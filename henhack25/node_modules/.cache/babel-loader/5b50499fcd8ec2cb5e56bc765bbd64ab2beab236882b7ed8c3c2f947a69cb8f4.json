{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport t from \"../../Graphic.js\";\nimport { FeatureSetQueryInterceptor as i } from \"../../arcade/featureset/support/FeatureSetQueryInterceptor.js\";\nimport s from \"../../core/Accessor.js\";\nimport { isSome as o } from \"../../core/arrayUtils.js\";\nimport { createTask as r } from \"../../core/asyncUtils.js\";\nimport a from \"../../core/Collection.js\";\nimport n from \"../../core/Identifiable.js\";\nimport l from \"../../core/Logger.js\";\nimport { abortMaybe as p } from \"../../core/maybe.js\";\nimport { eachAlways as c, isAbortError as d, throwIfAborted as h } from \"../../core/promiseUtils.js\";\nimport { watch as u, when as f, on as m, whenOnce as _, initial as y } from \"../../core/reactiveUtils.js\";\nimport { throttle as g } from \"../../core/throttle.js\";\nimport { property as b } from \"../../core/accessorSupport/decorators/property.js\";\nimport { cast as w } from \"../../core/accessorSupport/decorators/cast.js\";\nimport \"../../core/has.js\";\nimport { subclass as v } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport A from \"../../geometry/Point.js\";\nimport I from \"../../geometry/SpatialReference.js\";\nimport M from \"../../popup/content/TextContent.js\";\nimport { getFeaturePopupTitle as x } from \"../../support/popupUtils.js\";\nimport { system as T } from \"../../time/timeZoneUtils.js\";\nimport C from \"./FeatureAttachments/FeatureAttachmentsViewModel.js\";\nimport E from \"./FeatureContent/FeatureContentViewModel.js\";\nimport F from \"./FeatureExpression/FeatureExpressionViewModel.js\";\nimport V from \"./FeatureFields/FeatureFieldsViewModel.js\";\nimport j from \"./FeatureMedia/FeatureMediaViewModel.js\";\nimport k from \"./FeatureRelationship/FeatureRelationshipViewModel.js\";\nimport { compileExpressionInfos as P, formatArcadeValue as R } from \"./support/arcadeFeatureUtils.js\";\nimport { createFieldInfoMap as L, getAllFieldInfos as O, getSourceLayer as U, querySourceLayer as Z, isRelatableFeatureSupportedLayer as N, isAssociatedFeatureSupportedLayer as B, substituteFieldsInLinksAndAttributes as S, isExpressionField as H, isRelatedField as D, formatEditInfo as G, graphicCallback as q, formatAttributes as z, preLayerQueryCallback as Q, preRequestCallback as J, queryUpdatedFeature as K } from \"./support/featureUtils.js\";\nimport { queryLayerInfos as W, queryRelatedFeatures as X, setRelatedFeatures as Y, getRelatedFieldInfo as $, createRelatedInfo as ee, updateRelatedInfo as te } from \"./support/relatedFeatureUtils.js\";\nimport ie from \"../support/UtilityNetworkAssociations/FeatureUtilityNetworkAssociationsViewModel.js\";\nvar se;\nconst oe = 1,\n  re = \"content-view-models\",\n  ae = \"relationship-view-models\",\n  ne = \"association-view-models\",\n  le = {\n    attachmentsContent: !0,\n    chartAnimation: !0,\n    customContent: !0,\n    expressionContent: !0,\n    fieldsContent: !0,\n    mediaContent: !0,\n    textContent: !0,\n    relationshipContent: !0,\n    utilityNetworkAssociationsContent: !0\n  };\nlet pe = se = class extends n.IdentifiableMixin(s) {\n  constructor(e) {\n    super(e), this._error = null, this._graphicChangedTask = null, this._evaluateExpressionAttributesTask = null, this._associationVMAbortController = null, this._expressionAttributes = null, this._graphicExpressionAttributes = null, this.abilities = {\n      ...le\n    }, this.content = null, this.contentViewModels = [], this.description = null, this.defaultPopupTemplateEnabled = !1, this.formattedAttributes = null, this.lastEditInfo = null, this.location = null, this.relatedInfos = new Map(), this.title = \"\", this.view = null, this._graphicChangedThrottled = g(this._graphicChanged, () => this.notifyChange(\"waitingForContent\"), oe, this), this._isAllowedContentType = e => {\n      const {\n        abilities: t\n      } = this;\n      return \"attachments\" === e.type && !!t.attachmentsContent || \"custom\" === e.type && !!t.customContent || \"fields\" === e.type && !!t.fieldsContent || \"media\" === e.type && !!t.mediaContent || \"text\" === e.type && !!t.textContent || \"expression\" === e.type && !!t.expressionContent || \"relationship\" === e.type && !!t.relationshipContent || \"utility-network-associations\" === e.type && !!t.utilityNetworkAssociationsContent;\n    }, this._evaluateExpressionAttributesThrottled = g(this._evaluateExpressionAttributes, () => this.notifyChange(\"waitingForContent\"), oe, this), this.addHandles([u(() => [this.graphic, this._effectivePopupTemplate, this.abilities, this.timeZone], () => this._graphicChangedThrottled(), y), f(() => {\n      if (!this._graphicChangedTask?.finished || null == this._graphicChangedTask.value) return null;\n      const e = this._graphicChangedTask.value,\n        t = e?.expressionInfos?.dependencies;\n      return [e, t?.has(\"view-scale\") ? this.view?.scale : null, t?.has(\"view-time-extent\") ? this.view?.timeExtent?.start : null, t?.has(\"view-time-extent\") ? this.view?.timeExtent?.end : null];\n    }, ([e]) => this._evaluateExpressionAttributesThrottled(e))]);\n  }\n  initialize() {\n    this.addHandles([this._graphicChangedThrottled, this._evaluateExpressionAttributesThrottled]);\n  }\n  destroy() {\n    this._clear(), this._graphicChangedTask = p(this._graphicChangedTask), this._evaluateExpressionAttributesTask = p(this._evaluateExpressionAttributesTask), this._error = null, this.graphic = null, this._destroyContentViewModels(), this.relatedInfos.clear();\n  }\n  get _effectivePopupTemplate() {\n    return null != this.graphic ? this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled) : null;\n  }\n  get _fieldInfoMap() {\n    return L(O(this._effectivePopupTemplate), this._sourceLayer);\n  }\n  get _sourceLayer() {\n    return U(this.graphic);\n  }\n  castAbilities(e) {\n    return {\n      ...le,\n      ...e\n    };\n  }\n  get isTable() {\n    return this._sourceLayer?.isTable || !1;\n  }\n  get state() {\n    return this.graphic ? this._error ? \"error\" : this.waitingForContent ? \"loading\" : \"ready\" : \"disabled\";\n  }\n  set graphic(e) {\n    this._set(\"graphic\", e?.clone() ?? null);\n  }\n  get spatialReference() {\n    return this.view?.spatialReference ?? null;\n  }\n  set spatialReference(e) {\n    this._override(\"spatialReference\", e);\n  }\n  get timeZone() {\n    return this.view?.timeZone ?? T;\n  }\n  set timeZone(e) {\n    this._overrideIfSome(\"timeZone\", e);\n  }\n  get map() {\n    return this.view?.map || null;\n  }\n  set map(e) {\n    this._override(\"map\", e);\n  }\n  get waitingForContent() {\n    const {\n      _graphicChangedThrottled: e,\n      _evaluateExpressionAttributesThrottled: t,\n      _graphicChangedTask: i,\n      _evaluateExpressionAttributesTask: s,\n      _associationVMAbortController: o\n    } = this;\n    return e.hasPendingUpdates() || t.hasPendingUpdates() || null != i && !i.finished || null != s && !s.finished || !!o;\n  }\n  setActiveMedia(e, t) {\n    const i = this.contentViewModels[e];\n    i instanceof j && i.setActiveMedia(t);\n  }\n  nextMedia(e) {\n    const t = this.contentViewModels[e];\n    t instanceof j && t.next();\n  }\n  previousMedia(e) {\n    const t = this.contentViewModels[e];\n    t instanceof j && t.previous();\n  }\n  async updateGeometry() {\n    const {\n      graphic: e,\n      spatialReference: t,\n      _sourceLayer: i\n    } = this;\n    await i?.load();\n    const s = i?.objectIdField;\n    if (!s || !e || !i) return;\n    const o = e?.attributes?.[s];\n    if (null == o) return;\n    const r = [o];\n    if (!e.geometry) {\n      const s = await Z({\n          layer: i,\n          graphic: e,\n          outFields: [],\n          objectIds: r,\n          returnGeometry: !0,\n          spatialReference: t\n        }),\n        o = s?.geometry;\n      o && (e.geometry = o);\n    }\n  }\n  _clear() {\n    this._set(\"title\", \"\"), this._set(\"content\", null), this._set(\"formattedAttributes\", null);\n  }\n  _graphicChanged() {\n    this._evaluateExpressionAttributesTask = p(this._evaluateExpressionAttributesTask), this._graphicChangedTask = p(this._graphicChangedTask), this._graphicChangedTask = r(async e => {\n      this._error = null, this._clear();\n      const {\n        graphic: t\n      } = this;\n      try {\n        if (!t) return null;\n        const {\n            _sourceLayer: i,\n            _effectivePopupTemplate: s\n          } = this,\n          o = this.spatialReference;\n        await K({\n          graphic: t,\n          popupTemplate: s,\n          layer: i,\n          spatialReference: o\n        }, {\n          signal: e\n        });\n        const [{\n            value: r\n          }, {\n            value: a\n          }] = await c([this._getContent(), this._getTitle()]),\n          [, {\n            value: n\n          }] = await c([this._checkForRelatedFeatures({\n            signal: e\n          }), P(s?.expressionInfos, t)]);\n        return {\n          expressionInfos: n,\n          content: r,\n          title: a\n        };\n      } catch (i) {\n        throw d(i) || (this._error = i, l.getLogger(this).error(\"error\", \"The popupTemplate could not be displayed for this feature.\", {\n          error: i,\n          graphic: t,\n          popupTemplate: this._effectivePopupTemplate\n        })), i;\n      }\n    });\n  }\n  _compileContentElement(e, t) {\n    return \"attachments\" === e.type ? this._compileAttachments(e, t) : \"custom\" === e.type ? this._compileCustom(e, t) : \"fields\" === e.type ? this._compileFields(e, t) : \"media\" === e.type ? this._compileMedia(e, t) : \"text\" === e.type ? this._compileText(e, t) : \"expression\" === e.type ? this._compileExpression(e, t) : \"relationship\" === e.type ? this._compileRelationship(e, t) : \"utility-network-associations\" === e.type ? this._compileUtilityNetworkAssociation(e, t) : void 0;\n  }\n  _compileContent(e) {\n    if (this._destroyContentViewModels(), this.graphic) return Array.isArray(e) ? e.filter(this._isAllowedContentType).map((e, t) => this._compileContentElement(e, t)).filter(o) : \"string\" == typeof e ? this._compileText(new M({\n      text: e\n    }), 0).text : e;\n  }\n  _destroyContentViewModels() {\n    this.removeHandles(ae), this.removeHandles(re), this.contentViewModels.forEach(e => e && !e.destroyed && e.destroy()), this._set(\"contentViewModels\", []);\n  }\n  _matchesFeature(e, t) {\n    const i = e?.graphic?.getObjectId(),\n      s = t?.getObjectId();\n    return null != i && null != s && i === s;\n  }\n  _setRelatedFeaturesViewModels({\n    relatedFeatureViewModels: e,\n    relatedFeatures: t,\n    map: i\n  }) {\n    const {\n      view: s,\n      spatialReference: o,\n      timeZone: r\n    } = this;\n    t?.filter(Boolean).forEach(t => {\n      e.some(e => this._matchesFeature(e, t)) || e.add(new se({\n        abilities: {\n          relationshipContent: !1\n        },\n        map: i,\n        view: s,\n        spatialReference: o,\n        timeZone: r,\n        graphic: t\n      }));\n    }), e.forEach(i => {\n      const s = t?.find(e => this._matchesFeature(i, e));\n      s || e.remove(i);\n    });\n  }\n  _setExpressionContentVM(e, t) {\n    const i = this.formattedAttributes,\n      {\n        contentElement: s,\n        contentElementViewModel: o\n      } = e,\n      r = s?.type;\n    o && r && (\"fields\" === r && (this._createFieldsFormattedAttributes({\n      contentElement: s,\n      contentElementIndex: t,\n      formattedAttributes: i\n    }), o.set(this._createFieldsVMParams(s, t))), \"media\" === r && (this._createMediaFormattedAttributes({\n      contentElement: s,\n      contentElementIndex: t,\n      formattedAttributes: i\n    }), o.set(this._createMediaVMParams(s, t))), \"text\" === r && o.set(this._createTextVMParams(s)));\n  }\n  _compileRelationship(e, t) {\n    const {\n        displayCount: i,\n        orderByFields: s,\n        relationshipId: o,\n        title: r,\n        description: a\n      } = e,\n      {\n        _sourceLayer: n,\n        graphic: l,\n        map: p\n      } = this;\n    if (!N(n)) return;\n    const c = new k({\n      displayCount: i,\n      graphic: l,\n      orderByFields: s,\n      relationshipId: o,\n      layer: n,\n      map: p,\n      ...this._compileTitleAndDesc({\n        title: r,\n        description: a\n      })\n    });\n    return this.contentViewModels[t] = c, this.addHandles(m(() => c.relatedFeatures, \"change\", () => this._setRelatedFeaturesViewModels(c)), ae), e;\n  }\n  _matchesGlobalFeature(e, t) {\n    const i = e?.association.globalId,\n      s = t?.association.globalId;\n    return null != i && null != s && i === s;\n  }\n  async _setUpUtilityNetworkAssociationsViewModels(e, t, i) {\n    const {\n      view: s,\n      spatialReference: o,\n      timeZone: r\n    } = this;\n    e.forEach((i, s) => {\n      const o = t.get(s);\n      o ? i.forEach(t => {\n        o.find(e => this._matchesGlobalFeature(t, e)) || (i.remove(t), 0 === i.length && e.delete(s));\n      }) : (i.removeAll(), e.delete(s));\n    }), t.forEach((t, n) => {\n      const l = e.get(n) || new a();\n      t?.filter(Boolean).forEach(e => {\n        l.some(t => this._matchesGlobalFeature(t, e)) || l.add({\n          association: e.association,\n          featureViewModel: new se({\n            abilities: {\n              utilityNetworkAssociationsContent: !1\n            },\n            map: i,\n            view: s,\n            spatialReference: o,\n            timeZone: r,\n            graphic: e.feature\n          }),\n          terminalName: e.terminalName\n        });\n      }), e.set(n, l);\n    });\n    const n = new AbortController();\n    this._associationVMAbortController = n, await this._sortListObjectsByTitle(e, {\n      signal: n.signal\n    }), this._associationVMAbortController === n && (this._associationVMAbortController = null);\n  }\n  async _sortListObjectsByTitle(e, t) {\n    for (const i of e.values()) {\n      const e = i.map(e => _(() => \"ready\" === e.featureViewModel.state, t?.signal));\n      await Promise.all(e), i.sort(this._compareByFeatureTitle);\n    }\n  }\n  _compareByFeatureTitle(e, t) {\n    const i = x(e.featureViewModel),\n      s = x(t.featureViewModel);\n    return i.localeCompare(s, void 0, {\n      numeric: !0\n    });\n  }\n  _compileUtilityNetworkAssociation(e, t) {\n    const {\n        displayCount: i,\n        title: s,\n        description: o,\n        associationTypes: r\n      } = e,\n      {\n        _sourceLayer: a,\n        graphic: n,\n        map: l\n      } = this;\n    if (!B(a)) return;\n    const p = new ie({\n      graphic: n,\n      displayCount: i,\n      associationTypes: r,\n      layer: a,\n      map: l,\n      ...this._compileTitleAndDesc({\n        title: s,\n        description: o\n      })\n    });\n    return this.contentViewModels[t] = p, this.addHandles([u(() => p.associationFeatures.values(), () => this._setUpUtilityNetworkAssociationsViewModels(p.associationViewModels, p.associationFeatures, p.map))], ne), e;\n  }\n  _compileExpression(e, t) {\n    const {\n        expressionInfo: i\n      } = e,\n      {\n        graphic: s,\n        map: o,\n        spatialReference: r,\n        view: a,\n        location: n\n      } = this,\n      l = new F({\n        expressionInfo: i,\n        graphic: s,\n        interceptor: se.interceptor,\n        map: o,\n        spatialReference: r,\n        view: a,\n        location: n\n      });\n    return this.contentViewModels[t] = l, this.addHandles(u(() => l.contentElementViewModel, () => this._setExpressionContentVM(l, t), y), re), e;\n  }\n  _compileAttachments(e, t) {\n    const {\n        graphic: i\n      } = this,\n      {\n        description: s,\n        title: o,\n        orderByFields: r\n      } = e;\n    return this.contentViewModels[t] = new C({\n      graphic: i,\n      orderByFields: r,\n      ...this._compileTitleAndDesc({\n        title: o,\n        description: s\n      })\n    }), e;\n  }\n  _compileCustom(e, t) {\n    const {\n        graphic: i\n      } = this,\n      {\n        creator: s,\n        destroyer: o\n      } = e;\n    return this.contentViewModels[t] = new E({\n      graphic: i,\n      creator: s,\n      destroyer: o\n    }), e;\n  }\n  _compileTitleAndDesc({\n    title: e,\n    description: t\n  }) {\n    const {\n        _fieldInfoMap: i,\n        _sourceLayer: s,\n        graphic: o,\n        formattedAttributes: r\n      } = this,\n      a = o?.attributes,\n      n = this._expressionAttributes,\n      l = r.global;\n    return {\n      title: S({\n        attributes: a,\n        fieldInfoMap: i,\n        globalAttributes: l,\n        expressionAttributes: n,\n        layer: s,\n        text: e\n      }),\n      description: S({\n        attributes: a,\n        fieldInfoMap: i,\n        globalAttributes: l,\n        expressionAttributes: n,\n        layer: s,\n        text: t\n      })\n    };\n  }\n  _createFieldsVMParams(e, t) {\n    const i = this._effectivePopupTemplate,\n      s = this.formattedAttributes,\n      o = {\n        ...s?.global,\n        ...s?.content[t]\n      },\n      r = e?.fieldInfos || i?.fieldInfos,\n      a = r?.filter(({\n        fieldName: e\n      }) => !!e && (H(e) || D(e) || o.hasOwnProperty(e))),\n      n = i?.expressionInfos,\n      {\n        description: l,\n        title: p\n      } = e;\n    return {\n      attributes: o,\n      expressionInfos: n,\n      fieldInfos: a,\n      ...this._compileTitleAndDesc({\n        title: p,\n        description: l\n      })\n    };\n  }\n  _compileFields(e, t) {\n    const i = e.clone(),\n      s = new V(this._createFieldsVMParams(e, t));\n    return this.contentViewModels[t] = s, i.fieldInfos = s.formattedFieldInfos.slice(), i;\n  }\n  _createMediaVMParams(e, t) {\n    const {\n        abilities: i,\n        graphic: s,\n        _fieldInfoMap: o,\n        _effectivePopupTemplate: r,\n        relatedInfos: a,\n        _sourceLayer: n,\n        _expressionAttributes: l\n      } = this,\n      p = this.formattedAttributes,\n      c = s?.attributes ?? {},\n      {\n        description: d,\n        mediaInfos: h,\n        title: u\n      } = e;\n    return {\n      abilities: {\n        chartAnimation: i.chartAnimation\n      },\n      activeMediaInfoIndex: e.activeMediaInfoIndex || 0,\n      attributes: c,\n      isAggregate: s?.isAggregate,\n      layer: n,\n      fieldInfoMap: o,\n      formattedAttributes: {\n        ...p?.global,\n        ...p?.content[t]\n      },\n      expressionAttributes: l,\n      mediaInfos: h,\n      popupTemplate: r,\n      relatedInfos: a,\n      ...this._compileTitleAndDesc({\n        title: u,\n        description: d\n      })\n    };\n  }\n  _compileMedia(e, t) {\n    const i = e.clone(),\n      s = new j(this._createMediaVMParams(e, t));\n    return i.mediaInfos = s.formattedMediaInfos.slice(), this.contentViewModels[t] = s, i;\n  }\n  _createTextVMParams(e) {\n    const {\n      graphic: t,\n      _fieldInfoMap: i,\n      _sourceLayer: s,\n      _expressionAttributes: o\n    } = this;\n    if (e && e.text) {\n      const r = t?.attributes ?? {},\n        a = this.formattedAttributes?.global ?? {};\n      e.text = S({\n        attributes: r,\n        fieldInfoMap: i,\n        globalAttributes: a,\n        expressionAttributes: o,\n        layer: s,\n        text: e.text\n      });\n    }\n    return {\n      graphic: t,\n      creator: e.text\n    };\n  }\n  _compileText(e, t) {\n    const i = e.clone();\n    return this.contentViewModels[t] = new E(this._createTextVMParams(i)), i;\n  }\n  _compileLastEditInfo() {\n    const {\n      _effectivePopupTemplate: e,\n      _sourceLayer: t,\n      graphic: i,\n      timeZone: s\n    } = this;\n    if (!e) return;\n    const {\n        lastEditInfoEnabled: o\n      } = e,\n      r = t?.editFieldsInfo;\n    return o && r ? G(r, i?.attributes, s, t) : void 0;\n  }\n  _compileTitle(e) {\n    const {\n        _fieldInfoMap: t,\n        _sourceLayer: i,\n        graphic: s,\n        _expressionAttributes: o\n      } = this,\n      r = s?.attributes ?? {},\n      a = this.formattedAttributes?.global ?? {};\n    return S({\n      attributes: r,\n      fieldInfoMap: t,\n      globalAttributes: a,\n      expressionAttributes: o,\n      layer: i,\n      text: e\n    });\n  }\n  async _getTitle() {\n    const {\n      _effectivePopupTemplate: e,\n      graphic: t\n    } = this;\n    return t ? q({\n      type: \"title\",\n      value: e?.title,\n      event: {\n        graphic: t\n      }\n    }) : null;\n  }\n  async _getContent() {\n    const {\n      _effectivePopupTemplate: e,\n      graphic: t\n    } = this;\n    return t ? q({\n      type: \"content\",\n      value: e?.content,\n      event: {\n        graphic: t\n      }\n    }) : null;\n  }\n  _evaluateExpressionAttributes({\n    title: e,\n    content: t,\n    expressionInfos: i\n  }) {\n    this._evaluateExpressionAttributesTask = p(this._evaluateExpressionAttributesTask), this._evaluateExpressionAttributesTask = r(async s => {\n      const {\n        graphic: o,\n        map: r,\n        view: a,\n        spatialReference: n,\n        location: p\n      } = this;\n      try {\n        if (!o) return;\n        let l;\n        if (null != i) {\n          const e = [];\n          for (const [t, l] of i.expressions.entries()) null != l ? e.push(l.evaluate({\n            graphic: o,\n            interceptor: se.interceptor,\n            location: p,\n            map: r,\n            options: {\n              signal: s\n            },\n            spatialReference: n,\n            view: a\n          }).then(e => [t, R(e)]).catch(() => [t, void 0])) : e.push(Promise.resolve([t, void 0]));\n          l = Object.fromEntries(await Promise.all(e)), h(s);\n        }\n        this._expressionAttributes = l, this._graphicExpressionAttributes = {\n          ...o.attributes,\n          ...l\n        }, this._set(\"formattedAttributes\", this._createFormattedAttributes(t)), this._set(\"title\", this._compileTitle(e)), this._set(\"lastEditInfo\", this._compileLastEditInfo() || null), this._set(\"content\", this._compileContent(t) || null);\n      } catch (c) {\n        d(c) || (this._error = c, l.getLogger(this).error(\"error\", \"The popupTemplate could not be displayed for this feature.\", {\n          error: c,\n          graphic: o,\n          popupTemplate: this._effectivePopupTemplate\n        }));\n      }\n    });\n  }\n  _createMediaFormattedAttributes({\n    contentElement: e,\n    contentElementIndex: t,\n    formattedAttributes: i\n  }) {\n    const {\n      _effectivePopupTemplate: s,\n      graphic: o,\n      relatedInfos: r,\n      _sourceLayer: a,\n      _fieldInfoMap: n,\n      _graphicExpressionAttributes: l,\n      timeZone: p\n    } = this;\n    i.content[t] = z({\n      fieldInfos: s?.fieldInfos,\n      graphic: o,\n      attributes: {\n        ...l,\n        ...e.attributes\n      },\n      layer: a,\n      fieldInfoMap: n,\n      relatedInfos: r,\n      timeZone: p\n    });\n  }\n  _createFieldsFormattedAttributes({\n    contentElement: e,\n    contentElementIndex: t,\n    formattedAttributes: i\n  }) {\n    if (e.fieldInfos) {\n      const {\n        graphic: s,\n        relatedInfos: o,\n        _sourceLayer: r,\n        _fieldInfoMap: a,\n        _graphicExpressionAttributes: n,\n        timeZone: l\n      } = this;\n      i.content[t] = z({\n        fieldInfos: e.fieldInfos,\n        graphic: s,\n        attributes: {\n          ...n,\n          ...e.attributes\n        },\n        layer: r,\n        fieldInfoMap: a,\n        relatedInfos: o,\n        timeZone: l\n      });\n    }\n  }\n  _createFormattedAttributes(e) {\n    const {\n        _effectivePopupTemplate: t,\n        graphic: i,\n        relatedInfos: s,\n        _sourceLayer: o,\n        _fieldInfoMap: r,\n        _graphicExpressionAttributes: a,\n        timeZone: n\n      } = this,\n      l = t?.fieldInfos,\n      p = {\n        global: z({\n          fieldInfos: l,\n          graphic: i,\n          attributes: a,\n          layer: o,\n          fieldInfoMap: r,\n          relatedInfos: s,\n          timeZone: n\n        }),\n        content: []\n      };\n    return Array.isArray(e) && e.forEach((e, t) => {\n      \"fields\" === e.type && this._createFieldsFormattedAttributes({\n        contentElement: e,\n        contentElementIndex: t,\n        formattedAttributes: p\n      }), \"media\" === e.type && this._createMediaFormattedAttributes({\n        contentElement: e,\n        contentElementIndex: t,\n        formattedAttributes: p\n      });\n    }), p;\n  }\n  _checkForRelatedFeatures(e) {\n    const {\n      graphic: t,\n      _effectivePopupTemplate: i\n    } = this;\n    return this._queryRelatedInfos(t, O(i), e);\n  }\n  async _queryRelatedInfos(e, t, i) {\n    const {\n      relatedInfos: s,\n      _sourceLayer: o\n    } = this;\n    s.clear();\n    const r = null != o?.associatedLayer ? await o?.associatedLayer.load(i) : o;\n    if (!r || !e) return;\n    const a = t.filter(e => !!e.fieldName && D(e.fieldName));\n    if (!a?.length) return;\n    t.forEach(e => this._configureRelatedInfo(e, r));\n    const n = await W({\n      relatedInfos: s,\n      layer: r\n    }, i);\n    Object.keys(n).forEach(e => {\n      const t = s.get(e.toString()),\n        i = n[e]?.value;\n      t && i && (t.layerInfo = i.data);\n    });\n    const l = await X({\n      graphic: e,\n      relatedInfos: s,\n      layer: r\n    }, i);\n    Object.keys(l).forEach(e => {\n      Y(l[e]?.value, s.get(e.toString()));\n    });\n  }\n  _configureRelatedInfo(e, t) {\n    const {\n        relatedInfos: i\n      } = this,\n      s = $(e.fieldName || \"\");\n    if (!s) return;\n    const {\n      layerId: o,\n      fieldName: r\n    } = s;\n    if (!o) return;\n    const a = i.get(o.toString()) || ee(o, t);\n    a && (te({\n      relatedInfo: a,\n      fieldName: r,\n      fieldInfo: e\n    }), this.relatedInfos.set(o, a));\n  }\n};\npe.interceptor = new i(Q, J), e([b()], pe.prototype, \"_error\", void 0), e([b()], pe.prototype, \"_graphicChangedTask\", void 0), e([b()], pe.prototype, \"_evaluateExpressionAttributesTask\", void 0), e([b()], pe.prototype, \"_associationVMAbortController\", void 0), e([b({\n  readOnly: !0\n})], pe.prototype, \"_effectivePopupTemplate\", null), e([b({\n  readOnly: !0\n})], pe.prototype, \"_fieldInfoMap\", null), e([b({\n  readOnly: !0\n})], pe.prototype, \"_sourceLayer\", null), e([b()], pe.prototype, \"abilities\", void 0), e([w(\"abilities\")], pe.prototype, \"castAbilities\", null), e([b({\n  readOnly: !0\n})], pe.prototype, \"content\", void 0), e([b({\n  readOnly: !0\n})], pe.prototype, \"contentViewModels\", void 0), e([b()], pe.prototype, \"description\", void 0), e([b({\n  type: Boolean\n})], pe.prototype, \"defaultPopupTemplateEnabled\", void 0), e([b({\n  readOnly: !0\n})], pe.prototype, \"isTable\", null), e([b({\n  readOnly: !0\n})], pe.prototype, \"state\", null), e([b({\n  readOnly: !0\n})], pe.prototype, \"formattedAttributes\", void 0), e([b({\n  type: t,\n  value: null\n})], pe.prototype, \"graphic\", null), e([b({\n  readOnly: !0\n})], pe.prototype, \"lastEditInfo\", void 0), e([b({\n  type: A\n})], pe.prototype, \"location\", void 0), e([b({\n  readOnly: !0\n})], pe.prototype, \"relatedInfos\", void 0), e([b({\n  type: I\n})], pe.prototype, \"spatialReference\", null), e([b()], pe.prototype, \"timeZone\", null), e([b({\n  readOnly: !0\n})], pe.prototype, \"title\", void 0), e([b()], pe.prototype, \"map\", null), e([b({\n  readOnly: !0\n})], pe.prototype, \"waitingForContent\", null), e([b()], pe.prototype, \"view\", void 0), pe = se = e([v(\"esri.widgets.Feature.FeatureViewModel\")], pe);\nconst ce = pe;\nexport { ce as default };","map":{"version":3,"names":["_","e","t","FeatureSetQueryInterceptor","i","s","isSome","o","createTask","r","a","n","l","abortMaybe","p","eachAlways","c","isAbortError","d","throwIfAborted","h","watch","u","when","f","on","m","whenOnce","initial","y","throttle","g","property","b","cast","w","subclass","v","A","I","M","getFeaturePopupTitle","x","system","T","C","E","F","V","j","k","compileExpressionInfos","P","formatArcadeValue","R","createFieldInfoMap","L","getAllFieldInfos","O","getSourceLayer","U","querySourceLayer","Z","isRelatableFeatureSupportedLayer","N","isAssociatedFeatureSupportedLayer","B","substituteFieldsInLinksAndAttributes","S","isExpressionField","H","isRelatedField","D","formatEditInfo","G","graphicCallback","q","formatAttributes","z","preLayerQueryCallback","Q","preRequestCallback","J","queryUpdatedFeature","K","queryLayerInfos","W","queryRelatedFeatures","X","setRelatedFeatures","Y","getRelatedFieldInfo","$","createRelatedInfo","ee","updateRelatedInfo","te","ie","se","oe","re","ae","ne","le","attachmentsContent","chartAnimation","customContent","expressionContent","fieldsContent","mediaContent","textContent","relationshipContent","utilityNetworkAssociationsContent","pe","IdentifiableMixin","constructor","_error","_graphicChangedTask","_evaluateExpressionAttributesTask","_associationVMAbortController","_expressionAttributes","_graphicExpressionAttributes","abilities","content","contentViewModels","description","defaultPopupTemplateEnabled","formattedAttributes","lastEditInfo","location","relatedInfos","Map","title","view","_graphicChangedThrottled","_graphicChanged","notifyChange","_isAllowedContentType","type","_evaluateExpressionAttributesThrottled","_evaluateExpressionAttributes","addHandles","graphic","_effectivePopupTemplate","timeZone","finished","value","expressionInfos","dependencies","has","scale","timeExtent","start","end","initialize","destroy","_clear","_destroyContentViewModels","clear","getEffectivePopupTemplate","_fieldInfoMap","_sourceLayer","castAbilities","isTable","state","waitingForContent","_set","clone","spatialReference","_override","_overrideIfSome","map","hasPendingUpdates","setActiveMedia","nextMedia","next","previousMedia","previous","updateGeometry","load","objectIdField","attributes","geometry","layer","outFields","objectIds","returnGeometry","popupTemplate","signal","_getContent","_getTitle","_checkForRelatedFeatures","getLogger","error","_compileContentElement","_compileAttachments","_compileCustom","_compileFields","_compileMedia","_compileText","_compileExpression","_compileRelationship","_compileUtilityNetworkAssociation","_compileContent","Array","isArray","filter","text","removeHandles","forEach","destroyed","_matchesFeature","getObjectId","_setRelatedFeaturesViewModels","relatedFeatureViewModels","relatedFeatures","Boolean","some","add","find","remove","_setExpressionContentVM","contentElement","contentElementViewModel","_createFieldsFormattedAttributes","contentElementIndex","set","_createFieldsVMParams","_createMediaFormattedAttributes","_createMediaVMParams","_createTextVMParams","displayCount","orderByFields","relationshipId","_compileTitleAndDesc","_matchesGlobalFeature","association","globalId","_setUpUtilityNetworkAssociationsViewModels","get","length","delete","removeAll","featureViewModel","feature","terminalName","AbortController","_sortListObjectsByTitle","values","Promise","all","sort","_compareByFeatureTitle","localeCompare","numeric","associationTypes","associationFeatures","associationViewModels","expressionInfo","interceptor","creator","destroyer","global","fieldInfoMap","globalAttributes","expressionAttributes","fieldInfos","fieldName","hasOwnProperty","formattedFieldInfos","slice","mediaInfos","activeMediaInfoIndex","isAggregate","formattedMediaInfos","_compileLastEditInfo","lastEditInfoEnabled","editFieldsInfo","_compileTitle","event","expressions","entries","push","evaluate","options","then","catch","resolve","Object","fromEntries","_createFormattedAttributes","_queryRelatedInfos","associatedLayer","_configureRelatedInfo","keys","toString","layerInfo","data","layerId","relatedInfo","fieldInfo","prototype","readOnly","ce","default"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/widgets/Feature/FeatureViewModel.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../Graphic.js\";import{FeatureSetQueryInterceptor as i}from\"../../arcade/featureset/support/FeatureSetQueryInterceptor.js\";import s from\"../../core/Accessor.js\";import{isSome as o}from\"../../core/arrayUtils.js\";import{createTask as r}from\"../../core/asyncUtils.js\";import a from\"../../core/Collection.js\";import n from\"../../core/Identifiable.js\";import l from\"../../core/Logger.js\";import{abortMaybe as p}from\"../../core/maybe.js\";import{eachAlways as c,isAbortError as d,throwIfAborted as h}from\"../../core/promiseUtils.js\";import{watch as u,when as f,on as m,whenOnce as _,initial as y}from\"../../core/reactiveUtils.js\";import{throttle as g}from\"../../core/throttle.js\";import{property as b}from\"../../core/accessorSupport/decorators/property.js\";import{cast as w}from\"../../core/accessorSupport/decorators/cast.js\";import\"../../core/has.js\";import{subclass as v}from\"../../core/accessorSupport/decorators/subclass.js\";import A from\"../../geometry/Point.js\";import I from\"../../geometry/SpatialReference.js\";import M from\"../../popup/content/TextContent.js\";import{getFeaturePopupTitle as x}from\"../../support/popupUtils.js\";import{system as T}from\"../../time/timeZoneUtils.js\";import C from\"./FeatureAttachments/FeatureAttachmentsViewModel.js\";import E from\"./FeatureContent/FeatureContentViewModel.js\";import F from\"./FeatureExpression/FeatureExpressionViewModel.js\";import V from\"./FeatureFields/FeatureFieldsViewModel.js\";import j from\"./FeatureMedia/FeatureMediaViewModel.js\";import k from\"./FeatureRelationship/FeatureRelationshipViewModel.js\";import{compileExpressionInfos as P,formatArcadeValue as R}from\"./support/arcadeFeatureUtils.js\";import{createFieldInfoMap as L,getAllFieldInfos as O,getSourceLayer as U,querySourceLayer as Z,isRelatableFeatureSupportedLayer as N,isAssociatedFeatureSupportedLayer as B,substituteFieldsInLinksAndAttributes as S,isExpressionField as H,isRelatedField as D,formatEditInfo as G,graphicCallback as q,formatAttributes as z,preLayerQueryCallback as Q,preRequestCallback as J,queryUpdatedFeature as K}from\"./support/featureUtils.js\";import{queryLayerInfos as W,queryRelatedFeatures as X,setRelatedFeatures as Y,getRelatedFieldInfo as $,createRelatedInfo as ee,updateRelatedInfo as te}from\"./support/relatedFeatureUtils.js\";import ie from\"../support/UtilityNetworkAssociations/FeatureUtilityNetworkAssociationsViewModel.js\";var se;const oe=1,re=\"content-view-models\",ae=\"relationship-view-models\",ne=\"association-view-models\",le={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0,utilityNetworkAssociationsContent:!0};let pe=se=class extends(n.IdentifiableMixin(s)){constructor(e){super(e),this._error=null,this._graphicChangedTask=null,this._evaluateExpressionAttributesTask=null,this._associationVMAbortController=null,this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...le},this.content=null,this.contentViewModels=[],this.description=null,this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.location=null,this.relatedInfos=new Map,this.title=\"\",this.view=null,this._graphicChangedThrottled=g(this._graphicChanged,(()=>this.notifyChange(\"waitingForContent\")),oe,this),this._isAllowedContentType=e=>{const{abilities:t}=this;return\"attachments\"===e.type&&!!t.attachmentsContent||\"custom\"===e.type&&!!t.customContent||\"fields\"===e.type&&!!t.fieldsContent||\"media\"===e.type&&!!t.mediaContent||\"text\"===e.type&&!!t.textContent||\"expression\"===e.type&&!!t.expressionContent||\"relationship\"===e.type&&!!t.relationshipContent||\"utility-network-associations\"===e.type&&!!t.utilityNetworkAssociationsContent},this._evaluateExpressionAttributesThrottled=g(this._evaluateExpressionAttributes,(()=>this.notifyChange(\"waitingForContent\")),oe,this),this.addHandles([u((()=>[this.graphic,this._effectivePopupTemplate,this.abilities,this.timeZone]),(()=>this._graphicChangedThrottled()),y),f((()=>{if(!this._graphicChangedTask?.finished||null==this._graphicChangedTask.value)return null;const e=this._graphicChangedTask.value,t=e?.expressionInfos?.dependencies;return[e,t?.has(\"view-scale\")?this.view?.scale:null,t?.has(\"view-time-extent\")?this.view?.timeExtent?.start:null,t?.has(\"view-time-extent\")?this.view?.timeExtent?.end:null]}),(([e])=>this._evaluateExpressionAttributesThrottled(e)))])}initialize(){this.addHandles([this._graphicChangedThrottled,this._evaluateExpressionAttributesThrottled])}destroy(){this._clear(),this._graphicChangedTask=p(this._graphicChangedTask),this._evaluateExpressionAttributesTask=p(this._evaluateExpressionAttributesTask),this._error=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return null!=this.graphic?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return L(O(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return U(this.graphic)}castAbilities(e){return{...le,...e}}get isTable(){return this._sourceLayer?.isTable||!1}get state(){return this.graphic?this._error?\"error\":this.waitingForContent?\"loading\":\"ready\":\"disabled\"}set graphic(e){this._set(\"graphic\",e?.clone()??null)}get spatialReference(){return this.view?.spatialReference??null}set spatialReference(e){this._override(\"spatialReference\",e)}get timeZone(){return this.view?.timeZone??T}set timeZone(e){this._overrideIfSome(\"timeZone\",e)}get map(){return this.view?.map||null}set map(e){this._override(\"map\",e)}get waitingForContent(){const{_graphicChangedThrottled:e,_evaluateExpressionAttributesThrottled:t,_graphicChangedTask:i,_evaluateExpressionAttributesTask:s,_associationVMAbortController:o}=this;return e.hasPendingUpdates()||t.hasPendingUpdates()||null!=i&&!i.finished||null!=s&&!s.finished||!!o}setActiveMedia(e,t){const i=this.contentViewModels[e];i instanceof j&&i.setActiveMedia(t)}nextMedia(e){const t=this.contentViewModels[e];t instanceof j&&t.next()}previousMedia(e){const t=this.contentViewModels[e];t instanceof j&&t.previous()}async updateGeometry(){const{graphic:e,spatialReference:t,_sourceLayer:i}=this;await(i?.load());const s=i?.objectIdField;if(!s||!e||!i)return;const o=e?.attributes?.[s];if(null==o)return;const r=[o];if(!e.geometry){const s=await Z({layer:i,graphic:e,outFields:[],objectIds:r,returnGeometry:!0,spatialReference:t}),o=s?.geometry;o&&(e.geometry=o)}}_clear(){this._set(\"title\",\"\"),this._set(\"content\",null),this._set(\"formattedAttributes\",null)}_graphicChanged(){this._evaluateExpressionAttributesTask=p(this._evaluateExpressionAttributesTask),this._graphicChangedTask=p(this._graphicChangedTask),this._graphicChangedTask=r((async e=>{this._error=null,this._clear();const{graphic:t}=this;try{if(!t)return null;const{_sourceLayer:i,_effectivePopupTemplate:s}=this,o=this.spatialReference;await K({graphic:t,popupTemplate:s,layer:i,spatialReference:o},{signal:e});const[{value:r},{value:a}]=await c([this._getContent(),this._getTitle()]),[,{value:n}]=await c([this._checkForRelatedFeatures({signal:e}),P(s?.expressionInfos,t)]);return{expressionInfos:n,content:r,title:a}}catch(i){throw d(i)||(this._error=i,l.getLogger(this).error(\"error\",\"The popupTemplate could not be displayed for this feature.\",{error:i,graphic:t,popupTemplate:this._effectivePopupTemplate})),i}}))}_compileContentElement(e,t){return\"attachments\"===e.type?this._compileAttachments(e,t):\"custom\"===e.type?this._compileCustom(e,t):\"fields\"===e.type?this._compileFields(e,t):\"media\"===e.type?this._compileMedia(e,t):\"text\"===e.type?this._compileText(e,t):\"expression\"===e.type?this._compileExpression(e,t):\"relationship\"===e.type?this._compileRelationship(e,t):\"utility-network-associations\"===e.type?this._compileUtilityNetworkAssociation(e,t):void 0}_compileContent(e){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(e)?e.filter(this._isAllowedContentType).map(((e,t)=>this._compileContentElement(e,t))).filter(o):\"string\"==typeof e?this._compileText(new M({text:e}),0).text:e}_destroyContentViewModels(){this.removeHandles(ae),this.removeHandles(re),this.contentViewModels.forEach((e=>e&&!e.destroyed&&e.destroy())),this._set(\"contentViewModels\",[])}_matchesFeature(e,t){const i=e?.graphic?.getObjectId(),s=t?.getObjectId();return null!=i&&null!=s&&i===s}_setRelatedFeaturesViewModels({relatedFeatureViewModels:e,relatedFeatures:t,map:i}){const{view:s,spatialReference:o,timeZone:r}=this;t?.filter(Boolean).forEach((t=>{e.some((e=>this._matchesFeature(e,t)))||e.add(new se({abilities:{relationshipContent:!1},map:i,view:s,spatialReference:o,timeZone:r,graphic:t}))})),e.forEach((i=>{const s=t?.find((e=>this._matchesFeature(i,e)));s||e.remove(i)}))}_setExpressionContentVM(e,t){const i=this.formattedAttributes,{contentElement:s,contentElementViewModel:o}=e,r=s?.type;o&&r&&(\"fields\"===r&&(this._createFieldsFormattedAttributes({contentElement:s,contentElementIndex:t,formattedAttributes:i}),o.set(this._createFieldsVMParams(s,t))),\"media\"===r&&(this._createMediaFormattedAttributes({contentElement:s,contentElementIndex:t,formattedAttributes:i}),o.set(this._createMediaVMParams(s,t))),\"text\"===r&&o.set(this._createTextVMParams(s)))}_compileRelationship(e,t){const{displayCount:i,orderByFields:s,relationshipId:o,title:r,description:a}=e,{_sourceLayer:n,graphic:l,map:p}=this;if(!N(n))return;const c=new k({displayCount:i,graphic:l,orderByFields:s,relationshipId:o,layer:n,map:p,...this._compileTitleAndDesc({title:r,description:a})});return this.contentViewModels[t]=c,this.addHandles(m((()=>c.relatedFeatures),\"change\",(()=>this._setRelatedFeaturesViewModels(c))),ae),e}_matchesGlobalFeature(e,t){const i=e?.association.globalId,s=t?.association.globalId;return null!=i&&null!=s&&i===s}async _setUpUtilityNetworkAssociationsViewModels(e,t,i){const{view:s,spatialReference:o,timeZone:r}=this;e.forEach(((i,s)=>{const o=t.get(s);o?i.forEach((t=>{o.find((e=>this._matchesGlobalFeature(t,e)))||(i.remove(t),0===i.length&&e.delete(s))})):(i.removeAll(),e.delete(s))})),t.forEach(((t,n)=>{const l=e.get(n)||new a;t?.filter(Boolean).forEach((e=>{l.some((t=>this._matchesGlobalFeature(t,e)))||l.add({association:e.association,featureViewModel:new se({abilities:{utilityNetworkAssociationsContent:!1},map:i,view:s,spatialReference:o,timeZone:r,graphic:e.feature}),terminalName:e.terminalName})})),e.set(n,l)}));const n=new AbortController;this._associationVMAbortController=n,await this._sortListObjectsByTitle(e,{signal:n.signal}),this._associationVMAbortController===n&&(this._associationVMAbortController=null)}async _sortListObjectsByTitle(e,t){for(const i of e.values()){const e=i.map((e=>_((()=>\"ready\"===e.featureViewModel.state),t?.signal)));await Promise.all(e),i.sort(this._compareByFeatureTitle)}}_compareByFeatureTitle(e,t){const i=x(e.featureViewModel),s=x(t.featureViewModel);return i.localeCompare(s,void 0,{numeric:!0})}_compileUtilityNetworkAssociation(e,t){const{displayCount:i,title:s,description:o,associationTypes:r}=e,{_sourceLayer:a,graphic:n,map:l}=this;if(!B(a))return;const p=new ie({graphic:n,displayCount:i,associationTypes:r,layer:a,map:l,...this._compileTitleAndDesc({title:s,description:o})});return this.contentViewModels[t]=p,this.addHandles([u((()=>p.associationFeatures.values()),(()=>this._setUpUtilityNetworkAssociationsViewModels(p.associationViewModels,p.associationFeatures,p.map)))],ne),e}_compileExpression(e,t){const{expressionInfo:i}=e,{graphic:s,map:o,spatialReference:r,view:a,location:n}=this,l=new F({expressionInfo:i,graphic:s,interceptor:se.interceptor,map:o,spatialReference:r,view:a,location:n});return this.contentViewModels[t]=l,this.addHandles(u((()=>l.contentElementViewModel),(()=>this._setExpressionContentVM(l,t)),y),re),e}_compileAttachments(e,t){const{graphic:i}=this,{description:s,title:o,orderByFields:r}=e;return this.contentViewModels[t]=new C({graphic:i,orderByFields:r,...this._compileTitleAndDesc({title:o,description:s})}),e}_compileCustom(e,t){const{graphic:i}=this,{creator:s,destroyer:o}=e;return this.contentViewModels[t]=new E({graphic:i,creator:s,destroyer:o}),e}_compileTitleAndDesc({title:e,description:t}){const{_fieldInfoMap:i,_sourceLayer:s,graphic:o,formattedAttributes:r}=this,a=o?.attributes,n=this._expressionAttributes,l=r.global;return{title:S({attributes:a,fieldInfoMap:i,globalAttributes:l,expressionAttributes:n,layer:s,text:e}),description:S({attributes:a,fieldInfoMap:i,globalAttributes:l,expressionAttributes:n,layer:s,text:t})}}_createFieldsVMParams(e,t){const i=this._effectivePopupTemplate,s=this.formattedAttributes,o={...s?.global,...s?.content[t]},r=e?.fieldInfos||i?.fieldInfos,a=r?.filter((({fieldName:e})=>!!e&&(H(e)||D(e)||o.hasOwnProperty(e)))),n=i?.expressionInfos,{description:l,title:p}=e;return{attributes:o,expressionInfos:n,fieldInfos:a,...this._compileTitleAndDesc({title:p,description:l})}}_compileFields(e,t){const i=e.clone(),s=new V(this._createFieldsVMParams(e,t));return this.contentViewModels[t]=s,i.fieldInfos=s.formattedFieldInfos.slice(),i}_createMediaVMParams(e,t){const{abilities:i,graphic:s,_fieldInfoMap:o,_effectivePopupTemplate:r,relatedInfos:a,_sourceLayer:n,_expressionAttributes:l}=this,p=this.formattedAttributes,c=s?.attributes??{},{description:d,mediaInfos:h,title:u}=e;return{abilities:{chartAnimation:i.chartAnimation},activeMediaInfoIndex:e.activeMediaInfoIndex||0,attributes:c,isAggregate:s?.isAggregate,layer:n,fieldInfoMap:o,formattedAttributes:{...p?.global,...p?.content[t]},expressionAttributes:l,mediaInfos:h,popupTemplate:r,relatedInfos:a,...this._compileTitleAndDesc({title:u,description:d})}}_compileMedia(e,t){const i=e.clone(),s=new j(this._createMediaVMParams(e,t));return i.mediaInfos=s.formattedMediaInfos.slice(),this.contentViewModels[t]=s,i}_createTextVMParams(e){const{graphic:t,_fieldInfoMap:i,_sourceLayer:s,_expressionAttributes:o}=this;if(e&&e.text){const r=t?.attributes??{},a=this.formattedAttributes?.global??{};e.text=S({attributes:r,fieldInfoMap:i,globalAttributes:a,expressionAttributes:o,layer:s,text:e.text})}return{graphic:t,creator:e.text}}_compileText(e,t){const i=e.clone();return this.contentViewModels[t]=new E(this._createTextVMParams(i)),i}_compileLastEditInfo(){const{_effectivePopupTemplate:e,_sourceLayer:t,graphic:i,timeZone:s}=this;if(!e)return;const{lastEditInfoEnabled:o}=e,r=t?.editFieldsInfo;return o&&r?G(r,i?.attributes,s,t):void 0}_compileTitle(e){const{_fieldInfoMap:t,_sourceLayer:i,graphic:s,_expressionAttributes:o}=this,r=s?.attributes??{},a=this.formattedAttributes?.global??{};return S({attributes:r,fieldInfoMap:t,globalAttributes:a,expressionAttributes:o,layer:i,text:e})}async _getTitle(){const{_effectivePopupTemplate:e,graphic:t}=this;return t?q({type:\"title\",value:e?.title,event:{graphic:t}}):null}async _getContent(){const{_effectivePopupTemplate:e,graphic:t}=this;return t?q({type:\"content\",value:e?.content,event:{graphic:t}}):null}_evaluateExpressionAttributes({title:e,content:t,expressionInfos:i}){this._evaluateExpressionAttributesTask=p(this._evaluateExpressionAttributesTask),this._evaluateExpressionAttributesTask=r((async s=>{const{graphic:o,map:r,view:a,spatialReference:n,location:p}=this;try{if(!o)return;let l;if(null!=i){const e=[];for(const[t,l]of i.expressions.entries())null!=l?e.push(l.evaluate({graphic:o,interceptor:se.interceptor,location:p,map:r,options:{signal:s},spatialReference:n,view:a}).then((e=>[t,R(e)])).catch((()=>[t,void 0]))):e.push(Promise.resolve([t,void 0]));l=Object.fromEntries(await Promise.all(e)),h(s)}this._expressionAttributes=l,this._graphicExpressionAttributes={...o.attributes,...l},this._set(\"formattedAttributes\",this._createFormattedAttributes(t)),this._set(\"title\",this._compileTitle(e)),this._set(\"lastEditInfo\",this._compileLastEditInfo()||null),this._set(\"content\",this._compileContent(t)||null)}catch(c){d(c)||(this._error=c,l.getLogger(this).error(\"error\",\"The popupTemplate could not be displayed for this feature.\",{error:c,graphic:o,popupTemplate:this._effectivePopupTemplate}))}}))}_createMediaFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){const{_effectivePopupTemplate:s,graphic:o,relatedInfos:r,_sourceLayer:a,_fieldInfoMap:n,_graphicExpressionAttributes:l,timeZone:p}=this;i.content[t]=z({fieldInfos:s?.fieldInfos,graphic:o,attributes:{...l,...e.attributes},layer:a,fieldInfoMap:n,relatedInfos:r,timeZone:p})}_createFieldsFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){if(e.fieldInfos){const{graphic:s,relatedInfos:o,_sourceLayer:r,_fieldInfoMap:a,_graphicExpressionAttributes:n,timeZone:l}=this;i.content[t]=z({fieldInfos:e.fieldInfos,graphic:s,attributes:{...n,...e.attributes},layer:r,fieldInfoMap:a,relatedInfos:o,timeZone:l})}}_createFormattedAttributes(e){const{_effectivePopupTemplate:t,graphic:i,relatedInfos:s,_sourceLayer:o,_fieldInfoMap:r,_graphicExpressionAttributes:a,timeZone:n}=this,l=t?.fieldInfos,p={global:z({fieldInfos:l,graphic:i,attributes:a,layer:o,fieldInfoMap:r,relatedInfos:s,timeZone:n}),content:[]};return Array.isArray(e)&&e.forEach(((e,t)=>{\"fields\"===e.type&&this._createFieldsFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:p}),\"media\"===e.type&&this._createMediaFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:p})})),p}_checkForRelatedFeatures(e){const{graphic:t,_effectivePopupTemplate:i}=this;return this._queryRelatedInfos(t,O(i),e)}async _queryRelatedInfos(e,t,i){const{relatedInfos:s,_sourceLayer:o}=this;s.clear();const r=null!=o?.associatedLayer?await(o?.associatedLayer.load(i)):o;if(!r||!e)return;const a=t.filter((e=>!!e.fieldName&&D(e.fieldName)));if(!a?.length)return;t.forEach((e=>this._configureRelatedInfo(e,r)));const n=await W({relatedInfos:s,layer:r},i);Object.keys(n).forEach((e=>{const t=s.get(e.toString()),i=n[e]?.value;t&&i&&(t.layerInfo=i.data)}));const l=await X({graphic:e,relatedInfos:s,layer:r},i);Object.keys(l).forEach((e=>{Y(l[e]?.value,s.get(e.toString()))}))}_configureRelatedInfo(e,t){const{relatedInfos:i}=this,s=$(e.fieldName||\"\");if(!s)return;const{layerId:o,fieldName:r}=s;if(!o)return;const a=i.get(o.toString())||ee(o,t);a&&(te({relatedInfo:a,fieldName:r,fieldInfo:e}),this.relatedInfos.set(o,a))}};pe.interceptor=new i(Q,J),e([b()],pe.prototype,\"_error\",void 0),e([b()],pe.prototype,\"_graphicChangedTask\",void 0),e([b()],pe.prototype,\"_evaluateExpressionAttributesTask\",void 0),e([b()],pe.prototype,\"_associationVMAbortController\",void 0),e([b({readOnly:!0})],pe.prototype,\"_effectivePopupTemplate\",null),e([b({readOnly:!0})],pe.prototype,\"_fieldInfoMap\",null),e([b({readOnly:!0})],pe.prototype,\"_sourceLayer\",null),e([b()],pe.prototype,\"abilities\",void 0),e([w(\"abilities\")],pe.prototype,\"castAbilities\",null),e([b({readOnly:!0})],pe.prototype,\"content\",void 0),e([b({readOnly:!0})],pe.prototype,\"contentViewModels\",void 0),e([b()],pe.prototype,\"description\",void 0),e([b({type:Boolean})],pe.prototype,\"defaultPopupTemplateEnabled\",void 0),e([b({readOnly:!0})],pe.prototype,\"isTable\",null),e([b({readOnly:!0})],pe.prototype,\"state\",null),e([b({readOnly:!0})],pe.prototype,\"formattedAttributes\",void 0),e([b({type:t,value:null})],pe.prototype,\"graphic\",null),e([b({readOnly:!0})],pe.prototype,\"lastEditInfo\",void 0),e([b({type:A})],pe.prototype,\"location\",void 0),e([b({readOnly:!0})],pe.prototype,\"relatedInfos\",void 0),e([b({type:I})],pe.prototype,\"spatialReference\",null),e([b()],pe.prototype,\"timeZone\",null),e([b({readOnly:!0})],pe.prototype,\"title\",void 0),e([b()],pe.prototype,\"map\",null),e([b({readOnly:!0})],pe.prototype,\"waitingForContent\",null),e([b()],pe.prototype,\"view\",void 0),pe=se=e([v(\"esri.widgets.Feature.FeatureViewModel\")],pe);const ce=pe;export{ce as default};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}