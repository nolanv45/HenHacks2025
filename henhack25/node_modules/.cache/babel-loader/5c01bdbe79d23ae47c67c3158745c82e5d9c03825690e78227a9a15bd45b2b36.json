{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../chunks/tslib.es6.js\";\nimport { property as s } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/Logger.js\";\nimport \"../../../core/RandomLCG.js\";\nimport { subclass as e } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport r from \"./BaseRasterFunction.js\";\nimport o from \"./CompositeBandFunctionArguments.js\";\nimport { compositeBands as n } from \"./pixelUtils.js\";\nlet i = class extends r {\n  constructor() {\n    super(...arguments), this.functionName = \"CompositeBand\", this.functionArguments = null, this.rasterArgumentNames = [\"rasters\"];\n  }\n  _bindSourceRasters() {\n    const {\n        sourceRasterInfos: t\n      } = this,\n      s = t[0];\n    this.outputPixelType = this._getOutputPixelType(s.pixelType);\n    const e = s.clone();\n    if (e.attributeTable = null, e.colormap = null, e.pixelType = this.outputPixelType, e.bandCount = t.map(({\n      bandCount: t\n    }) => t).reduce((t, s) => t + s), t.every(({\n      statistics: t\n    }) => null != t && t.length)) {\n      const s = [];\n      t.forEach(({\n        statistics: t\n      }) => null != t && s.push(...t)), e.statistics = s;\n    }\n    if (t.every(({\n      histograms: t\n    }) => null != t && t.length)) {\n      const s = [];\n      t.forEach(({\n        histograms: t\n      }) => null != t && s.push(...t)), e.histograms = s;\n    }\n    e.multidimensionalInfo && e.multidimensionalInfo.variables.forEach(s => {\n      const e = t.map(t => t.multidimensionalInfo?.variables.find(({\n          name: t\n        }) => t === s.name)),\n        r = e.map(t => t?.statistics?.length ? t.statistics : null),\n        o = e.map(t => t?.histograms?.length ? t.histograms : null);\n      s.statistics = r.every(t => null != t) ? r.flat() : null, s.histograms = o.every(t => null != t) ? o.flat() : null;\n    }), e.bandCount > 1 && (e.colormap = null, e.attributeTable = null);\n    const r = t.every(t => t.keyProperties.BandProperties?.length) ? t.flatMap(t => t.keyProperties.BandProperties) : void 0;\n    e.keyProperties = {\n      ...e.keyProperties,\n      BandProperties: r\n    }, this.rasterInfo = e;\n    return {\n      success: !0,\n      supportsGPU: e.bandCount <= 3\n    };\n  }\n  _processPixels(t) {\n    const {\n      pixelBlocks: s\n    } = t;\n    if (!s) return null;\n    const e = s?.[0];\n    return null == e ? null : n(s);\n  }\n  _getWebGLParameters() {\n    return {\n      bandCount: this.rasterInfo.bandCount\n    };\n  }\n};\nt([s({\n  json: {\n    write: !0,\n    name: \"rasterFunction\"\n  }\n})], i.prototype, \"functionName\", void 0), t([s({\n  type: o,\n  json: {\n    write: !0,\n    name: \"rasterFunctionArguments\"\n  }\n})], i.prototype, \"functionArguments\", void 0), t([s()], i.prototype, \"rasterArgumentNames\", void 0), i = t([e(\"esri.layers.support.rasterFunctions.CompositeBandFunction\")], i);\nconst a = i;\nexport { a as default };","map":{"version":3,"names":["_","t","property","s","subclass","e","r","o","compositeBands","n","i","constructor","arguments","functionName","functionArguments","rasterArgumentNames","_bindSourceRasters","sourceRasterInfos","outputPixelType","_getOutputPixelType","pixelType","clone","attributeTable","colormap","bandCount","map","reduce","every","statistics","length","forEach","push","histograms","multidimensionalInfo","variables","find","name","flat","keyProperties","BandProperties","flatMap","rasterInfo","success","supportsGPU","_processPixels","pixelBlocks","_getWebGLParameters","json","write","prototype","type","a","default"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/layers/support/rasterFunctions/CompositeBandFunction.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as e}from\"../../../core/accessorSupport/decorators/subclass.js\";import r from\"./BaseRasterFunction.js\";import o from\"./CompositeBandFunctionArguments.js\";import{compositeBands as n}from\"./pixelUtils.js\";let i=class extends r{constructor(){super(...arguments),this.functionName=\"CompositeBand\",this.functionArguments=null,this.rasterArgumentNames=[\"rasters\"]}_bindSourceRasters(){const{sourceRasterInfos:t}=this,s=t[0];this.outputPixelType=this._getOutputPixelType(s.pixelType);const e=s.clone();if(e.attributeTable=null,e.colormap=null,e.pixelType=this.outputPixelType,e.bandCount=t.map((({bandCount:t})=>t)).reduce(((t,s)=>t+s)),t.every((({statistics:t})=>null!=t&&t.length))){const s=[];t.forEach((({statistics:t})=>null!=t&&s.push(...t))),e.statistics=s}if(t.every((({histograms:t})=>null!=t&&t.length))){const s=[];t.forEach((({histograms:t})=>null!=t&&s.push(...t))),e.histograms=s}e.multidimensionalInfo&&e.multidimensionalInfo.variables.forEach((s=>{const e=t.map((t=>t.multidimensionalInfo?.variables.find((({name:t})=>t===s.name)))),r=e.map((t=>t?.statistics?.length?t.statistics:null)),o=e.map((t=>t?.histograms?.length?t.histograms:null));s.statistics=r.every((t=>null!=t))?r.flat():null,s.histograms=o.every((t=>null!=t))?o.flat():null})),e.bandCount>1&&(e.colormap=null,e.attributeTable=null);const r=t.every((t=>t.keyProperties.BandProperties?.length))?t.flatMap((t=>t.keyProperties.BandProperties)):void 0;e.keyProperties={...e.keyProperties,BandProperties:r},this.rasterInfo=e;return{success:!0,supportsGPU:e.bandCount<=3}}_processPixels(t){const{pixelBlocks:s}=t;if(!s)return null;const e=s?.[0];return null==e?null:n(s)}_getWebGLParameters(){return{bandCount:this.rasterInfo.bandCount}}};t([s({json:{write:!0,name:\"rasterFunction\"}})],i.prototype,\"functionName\",void 0),t([s({type:o,json:{write:!0,name:\"rasterFunctionArguments\"}})],i.prototype,\"functionArguments\",void 0),t([s()],i.prototype,\"rasterArgumentNames\",void 0),i=t([e(\"esri.layers.support.rasterFunctions.CompositeBandFunction\")],i);const a=i;export{a as default};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}