{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { px2pt as e, pt2px as t } from \"../../core/screenUtils.js\";\nimport { CIMSymbolHelper as i } from \"../cim/CIMSymbolHelper.js\";\nimport { CIMSymbolRasterizer as l } from \"../cim/CIMSymbolRasterizer.js\";\nimport { OverrideHelper as r } from \"../cim/OverrideHelper.js\";\nimport { mapCIMSymbolToGeometryType as o } from \"../cim/utils.js\";\nimport { SymbolSizeDefaults as n } from \"./previewUtils.js\";\nimport { renderSymbol as a } from \"./renderUtils.js\";\nconst s = new l(null),\n  m = e(n.size),\n  h = e(n.maxSize),\n  c = e(n.lineWidth),\n  y = 1;\nasync function u(e, t, i) {\n  const l = t?.size;\n  let r = null != l && \"object\" == typeof l && \"width\" in l ? l.width : l,\n    o = null != l && \"object\" == typeof l && \"height\" in l ? l.height : l;\n  if (null == r || null == o) if (\"esriGeometryPolygon\" === i) r = o = t.maxSize ? Math.min(t.maxSize, m) : m;else {\n    const l = await f(e, t, i);\n    l && (r = l.width, o = l.height), \"esriGeometryPolyline\" === i && (r = t.maxSize ? Math.min(t.maxSize, c) : c), r = null != r && isFinite(r) ? Math.min(r, h) : m, o = null != o && isFinite(o) ? Math.max(Math.min(o, h), y) : m;\n  }\n  return \"legend\" === t.style && \"esriGeometryPolyline\" === i && (r = c), {\n    width: r,\n    height: o\n  };\n}\nasync function f(e, t, l) {\n  const {\n      feature: o,\n      fieldMap: n,\n      viewParams: a\n    } = t.cimOptions || t,\n    m = await r.resolveSymbolOverrides(e.data, o, null, n, l, null, a);\n  if (!m) return null;\n  (e = e.clone()).data = {\n    type: \"CIMSymbolReference\",\n    symbol: m\n  }, e.data.primitiveOverrides = void 0;\n  const h = [];\n  return i.fetchResources(m, s.resourceManager, h), i.fetchFonts(m, s.resourceManager, h), h.length > 0 && (await Promise.all(h)), i.getEnvelope(m, null, s.resourceManager);\n}\nasync function g(i) {\n  let l = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const {\n      node: r,\n      opacity: n,\n      symbolConfig: m\n    } = l,\n    h = null != m && \"object\" == typeof m && \"isSquareFill\" in m && m.isSquareFill,\n    c = l.cimOptions || l,\n    y = c.geometryType || o(i?.data?.symbol),\n    f = await u(i, l, y),\n    {\n      feature: g,\n      fieldMap: d\n    } = c,\n    p = l?.geometry || h || \"esriGeometryPolygon\" !== y ? \"preview\" : \"legend\";\n  let w = f;\n  const b = f;\n  if (l?.geometry && (\"esriGeometryPolygon\" === y || \"esriGeometryPolyline\" === y)) {\n    const i = 200;\n    if (t(f.width) < i || t(f.height) < i) {\n      const t = f.width > f.height ? e(i) * f.height / f.width : e(i);\n      w = {\n        width: f.width > f.height ? e(i) : e(i) * f.width / f.height,\n        height: t\n      };\n    }\n  }\n  const M = await s.rasterizeCIMSymbolAsync(i, g, w, p, d, y, null, c.viewParams, c.allowScalingUp, l?.geometry?.toJSON());\n  if (!M) return null;\n  const {\n      width: S,\n      height: v\n    } = M,\n    j = document.createElement(\"canvas\");\n  j.width = S, j.height = v;\n  j.getContext(\"2d\").putImageData(M, 0, 0);\n  const x = t(b.width),\n    z = t(b.height),\n    P = new Image(x, z);\n  P.src = j.toDataURL(), P.ariaLabel = l.ariaLabel ?? null, P.alt = l.ariaLabel ?? \"\", null != n && (P.style.opacity = `${n}`);\n  let C = P;\n  if (null != l.effectView) {\n    const e = {\n      shape: {\n        type: \"image\",\n        x: 0,\n        y: 0,\n        width: x,\n        height: z,\n        src: P.src\n      },\n      fill: null,\n      stroke: null,\n      offset: [0, 0]\n    };\n    C = a([[e]], [x, z], {\n      effectView: l.effectView,\n      ariaLabel: l.ariaLabel\n    });\n  }\n  return r && C && r.appendChild(C), C;\n}\nexport { g as previewCIMSymbol };","map":{"version":3,"names":["px2pt","e","pt2px","t","CIMSymbolHelper","i","CIMSymbolRasterizer","l","OverrideHelper","r","mapCIMSymbolToGeometryType","o","SymbolSizeDefaults","n","renderSymbol","a","s","m","size","h","maxSize","c","lineWidth","y","u","width","height","Math","min","f","isFinite","max","style","feature","fieldMap","viewParams","cimOptions","resolveSymbolOverrides","data","clone","type","symbol","primitiveOverrides","fetchResources","resourceManager","fetchFonts","length","Promise","all","getEnvelope","g","arguments","undefined","node","opacity","symbolConfig","isSquareFill","geometryType","d","p","geometry","w","b","M","rasterizeCIMSymbolAsync","allowScalingUp","toJSON","S","v","j","document","createElement","getContext","putImageData","x","z","P","Image","src","toDataURL","ariaLabel","alt","C","effectView","shape","fill","stroke","offset","appendChild","previewCIMSymbol"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/symbols/support/previewCIMSymbol.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{px2pt as e,pt2px as t}from\"../../core/screenUtils.js\";import{CIMSymbolHelper as i}from\"../cim/CIMSymbolHelper.js\";import{CIMSymbolRasterizer as l}from\"../cim/CIMSymbolRasterizer.js\";import{OverrideHelper as r}from\"../cim/OverrideHelper.js\";import{mapCIMSymbolToGeometryType as o}from\"../cim/utils.js\";import{SymbolSizeDefaults as n}from\"./previewUtils.js\";import{renderSymbol as a}from\"./renderUtils.js\";const s=new l(null),m=e(n.size),h=e(n.maxSize),c=e(n.lineWidth),y=1;async function u(e,t,i){const l=t?.size;let r=null!=l&&\"object\"==typeof l&&\"width\"in l?l.width:l,o=null!=l&&\"object\"==typeof l&&\"height\"in l?l.height:l;if(null==r||null==o)if(\"esriGeometryPolygon\"===i)r=o=t.maxSize?Math.min(t.maxSize,m):m;else{const l=await f(e,t,i);l&&(r=l.width,o=l.height),\"esriGeometryPolyline\"===i&&(r=t.maxSize?Math.min(t.maxSize,c):c),r=null!=r&&isFinite(r)?Math.min(r,h):m,o=null!=o&&isFinite(o)?Math.max(Math.min(o,h),y):m}return\"legend\"===t.style&&\"esriGeometryPolyline\"===i&&(r=c),{width:r,height:o}}async function f(e,t,l){const{feature:o,fieldMap:n,viewParams:a}=t.cimOptions||t,m=await r.resolveSymbolOverrides(e.data,o,null,n,l,null,a);if(!m)return null;(e=e.clone()).data={type:\"CIMSymbolReference\",symbol:m},e.data.primitiveOverrides=void 0;const h=[];return i.fetchResources(m,s.resourceManager,h),i.fetchFonts(m,s.resourceManager,h),h.length>0&&await Promise.all(h),i.getEnvelope(m,null,s.resourceManager)}async function g(i,l={}){const{node:r,opacity:n,symbolConfig:m}=l,h=null!=m&&\"object\"==typeof m&&\"isSquareFill\"in m&&m.isSquareFill,c=l.cimOptions||l,y=c.geometryType||o(i?.data?.symbol),f=await u(i,l,y),{feature:g,fieldMap:d}=c,p=l?.geometry||h||\"esriGeometryPolygon\"!==y?\"preview\":\"legend\";let w=f;const b=f;if(l?.geometry&&(\"esriGeometryPolygon\"===y||\"esriGeometryPolyline\"===y)){const i=200;if(t(f.width)<i||t(f.height)<i){const t=f.width>f.height?e(i)*f.height/f.width:e(i);w={width:f.width>f.height?e(i):e(i)*f.width/f.height,height:t}}}const M=await s.rasterizeCIMSymbolAsync(i,g,w,p,d,y,null,c.viewParams,c.allowScalingUp,l?.geometry?.toJSON());if(!M)return null;const{width:S,height:v}=M,j=document.createElement(\"canvas\");j.width=S,j.height=v;j.getContext(\"2d\").putImageData(M,0,0);const x=t(b.width),z=t(b.height),P=new Image(x,z);P.src=j.toDataURL(),P.ariaLabel=l.ariaLabel??null,P.alt=l.ariaLabel??\"\",null!=n&&(P.style.opacity=`${n}`);let C=P;if(null!=l.effectView){const e={shape:{type:\"image\",x:0,y:0,width:x,height:z,src:P.src},fill:null,stroke:null,offset:[0,0]};C=a([[e]],[x,z],{effectView:l.effectView,ariaLabel:l.ariaLabel})}return r&&C&&r.appendChild(C),C}export{g as previewCIMSymbol};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}