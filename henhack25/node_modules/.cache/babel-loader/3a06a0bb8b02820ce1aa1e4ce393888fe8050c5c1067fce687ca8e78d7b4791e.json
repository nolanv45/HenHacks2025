{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../chunks/tslib.es6.js\";\nimport e from \"../../core/Accessor.js\";\nimport i from \"../../core/Evented.js\";\nimport { clone as n } from \"../../core/lang.js\";\nimport { destroyMaybe as o, equalsMaybe as r } from \"../../core/maybe.js\";\nimport { memoize as s } from \"../../core/memoize.js\";\nimport { ignoreAbortErrors as a } from \"../../core/promiseUtils.js\";\nimport p from \"../../core/ReactiveSet.js\";\nimport { watch as c, syncAndInitial as l } from \"../../core/reactiveUtils.js\";\nimport { createScreenPoint as d } from \"../../core/screenUtils.js\";\nimport { property as h } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/has.js\";\nimport \"../../core/Logger.js\";\nimport { subclass as u } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { diff as m } from \"../../core/accessorSupport/diffUtils.js\";\nimport { UpdatingHandles as g } from \"../../core/support/UpdatingHandles.js\";\nimport { pointEquals as y, pointNear as _ } from \"../../layers/graphics/dehydratedFeatureComparison.js\";\nimport { getEffectiveElevationInfo as v } from \"../../support/elevationInfoUtils.js\";\nimport { ViewingMode as f } from \"../ViewingMode.js\";\nimport { defaultDrawingMode as x } from \"./DrawingMode.js\";\nimport { DrawManipulator as C } from \"./DrawManipulator.js\";\nimport { createCoordinateHelper as b } from \"../interactive/coordinateHelper.js\";\nimport { createManipulatorDragEventPipeline as T, sceneSnappingAtLocation as S } from \"../interactive/dragEventPipeline.js\";\nimport { EditGeometry as P, Component as V } from \"../interactive/editGeometry/EditGeometry.js\";\nimport { EditGeometryOperations as w } from \"../interactive/editGeometry/EditGeometryOperations.js\";\nimport { isPoint as O } from \"../interactive/sketch/constraints.js\";\nimport { pointToConstraintSpace as M, constraintSpaceToPoint as D, getPointConstraint as E, getPolylineOrPolygonConstraint as I } from \"../interactive/sketch/constraintUtils.js\";\nimport H from \"../interactive/sketch/SketchLabelOptions.js\";\nimport { SnappingContext as j } from \"../interactive/snapping/SnappingContext.js\";\nimport { createSnapDragEventPipelineStep as G } from \"../interactive/snapping/SnappingDragPipelineStep.js\";\nimport { SnappingOperation as k } from \"../interactive/snapping/SnappingOperation.js\";\nimport { setupSnappingToggleHandles as Z } from \"../interactive/snapping/snappingUtils.js\";\nconst A = \"crosshair\",\n  L = \"progress\",\n  U = Symbol(),\n  z = Symbol();\nlet F = class extends i.EventedMixin(e) {\n  constructor(t) {\n    super(t), this._createOperationCompleted = !1, this._hideDefaultCursor = !1, this._pointerDownStates = new p(), this._stagedScreenPoint = null, this._stagedPointerType = null, this._updatingHandles = new g(), this._stagedPointerId = null, this.constraintsEnabled = !1, this.constraints = void 0, this._getPointConstraint = s(E), this._getPolylineOrPolygonConstraint = s(I), this.constraintZ = null, this.defaultZ = null, this.isDraped = !0, this.labelOptions = new H(), this.cursor = null, this.loading = !1, this.snapToSceneEnabled = null, this.firstVertex = null, this.lastVertex = null, this.secondToLastVertex = null, null == t.elevationInfo && (this.elevationInfo = v(!!t.hasZ));\n  }\n  initialize() {\n    const {\n        geometryType: t,\n        view: e\n      } = this,\n      i = e.spatialReference,\n      n = \"viewingMode\" in e.state ? e.state.viewingMode : f.Local,\n      o = \"segment\" === t || \"multipoint\" === t ? \"polyline\" : t;\n    this.coordinateHelper = b(this.hasZ, this.hasM, i), this._editGeometryOperations = new w(new P(o, this.coordinateHelper), n), this._snappingOperation = new k({\n      view: e\n    }), this.addHandles([c(() => ({\n      stagedPoint: this._snappingOperation.stagedPoint,\n      constraint: this._constraint\n    }), (_ref, i) => {\n      let {\n        stagedPoint: t,\n        constraint: e\n      } = _ref;\n      const {\n        snappingOptions: n\n      } = this;\n      n && (n.forceDisabled = null != e && O(e));\n      if (null != i && t === i.stagedPoint && e !== i.constraint) return this._onKeyboardBasedChange();\n      this._processCursor(t ?? this._screenToMap(this._stagedScreenPoint));\n    }, {\n      equals: (t, e) => t.stagedPoint === e.stagedPoint && r(t.constraint, e.constraint)\n    }), c(() => this.view.viewpoint, (t, e) => {\n      t && e && m(t, e) && this._onKeyboardBasedChange();\n    })]), this._activeComponent = new V(i, n), this._editGeometryOperations.data.components.push(this._activeComponent);\n    const s = this.segmentLabels;\n    null != s && (s.context = {\n      view: e,\n      editGeometryOperations: this._editGeometryOperations,\n      elevationInfo: this.elevationInfo,\n      labelOptions: this.labelOptions\n    }, this.addHandles(c(() => this.labelOptions.enabled, t => {\n      s.visible = t;\n    }, l))), this.addHandles(this._editGeometryOperations.on([\"vertex-add\", \"vertex-update\", \"vertex-remove\"], t => {\n      const e = t.vertices.map(t => ({\n          componentIndex: 0,\n          vertexIndex: t.index,\n          coordinates: this.coordinateHelper.vectorToArray(t.pos)\n        })),\n        i = e.map(t => t.coordinates),\n        n = this.coordinateHelper.vectorToDehydratedPoint(this._activeComponent.getFirstVertex()?.pos) ?? null;\n      y(n, this.firstVertex) || (this.firstVertex = n);\n      const o = this.coordinateHelper.vectorToDehydratedPoint(this._activeComponent.getLastVertex()?.pos) ?? null;\n      y(o, this.lastVertex) || (this.lastVertex = o);\n      const r = this.coordinateHelper.vectorToDehydratedPoint(this._activeComponent.edges.at(-1)?.leftVertex?.pos) ?? null;\n      switch (y(r, this.secondToLastVertex) || (this.secondToLastVertex = r), this._processCursor(this.cursorVertex), t.type) {\n        case \"vertex-add\":\n          this.emit(t.type, {\n            ...t,\n            added: i,\n            vertices: e\n          });\n          break;\n        case \"vertex-update\":\n          this.emit(t.type, {\n            ...t,\n            updated: i,\n            vertices: e\n          });\n          break;\n        case \"vertex-remove\":\n          this.emit(t.type, {\n            ...t,\n            removed: i,\n            vertices: e\n          });\n      }\n    }));\n    const p = this._manipulator = new C({\n      consumesClicks: !1,\n      grabbableForEvent: t => \"click\" !== this.drawingMode || \"touch\" === t.pointerType && this._snappingEnabled && 1 === this._pointerDownStates.size\n    });\n    this.manipulators.add(p), p.grabbable = \"point\" !== t && \"multipoint\" !== t, this.addHandles([p.events.on(\"immediate-click\", t => this._onImmediateClick(t)), p.events.on(\"immediate-double-click\", t => this._onImmediateDoubleClick(t)), c(() => this.drawingMode, () => {\n      this.removeHandles(U), this.addHandles(this._createManipulatorDragPipeline(p), U);\n    }, l), c(() => ({\n      effectiveCursor: this.effectiveCursor\n    }), _ref2 => {\n      let {\n        effectiveCursor: t\n      } = _ref2;\n      p.cursor = t;\n    }, l)]), Z(this, () => {\n      const t = this.view.inputManager.latestPointerType ?? \"mouse\",\n        e = this._getSnappingContext(t);\n      if (null != this.snappingManager) {\n        const t = this._snappingOperation.snapAgainNearPreviousMapPoint(this.snappingManager, e);\n        this._updatingHandles.addPromise(a(t));\n      }\n    });\n  }\n  destroy() {\n    o(this.segmentLabels), o(this._snappingOperation), this._editGeometryOperations = o(this._editGeometryOperations), this._updatingHandles.destroy();\n  }\n  get _isDragging() {\n    const {\n      _stagedPointerId: t,\n      _manipulator: e\n    } = this;\n    return null != t && this._pointerDownStates.has(t) || e.grabbing || !e.interactive;\n  }\n  get _snappingEnabled() {\n    return null != this.snappingManager && this.snappingManager.options.effectiveEnabled;\n  }\n  get _requiresScenePoint() {\n    const t = this._updateAndGetEffectiveDrawSurface();\n    return \"3d\" === this.view.type && this.drawSurface !== t;\n  }\n  get canRedo() {\n    return this._editGeometryOperations.canRedo;\n  }\n  get canUndo() {\n    return this._editGeometryOperations.canUndo;\n  }\n  get committedVertices() {\n    return this._activeComponent.vertices.map(t => this.coordinateHelper.vectorToArray(t.pos));\n  }\n  get _constraint() {\n    const {\n      constraints: t,\n      constraintsEnabled: e\n    } = this;\n    if (t && e) switch (this.geometryType) {\n      case \"point\":\n      case \"multipoint\":\n        return this._getPointConstraint(t);\n      case \"polygon\":\n      case \"polyline\":\n        return this._getPolylineOrPolygonConstraint(this.lastVertex, this.secondToLastVertex, t);\n    }\n  }\n  set drawingMode(t) {\n    this._set(\"drawingMode\", t ?? x);\n  }\n  get effectiveCursor() {\n    return this.loading ? L : this._hideDefaultCursor ? null : this.cursor || A;\n  }\n  get interactive() {\n    return this._manipulator.interactive;\n  }\n  set interactive(t) {\n    this._manipulator.interactive = t;\n  }\n  get isCompleted() {\n    return this._createOperationCompleted;\n  }\n  get numCommittedVertices() {\n    return this._activeComponent.vertices.length;\n  }\n  get snappingOptions() {\n    return null != this.snappingManager ? this.snappingManager.options : null;\n  }\n  get cursorVertex() {\n    return this._get(\"cursorVertex\");\n  }\n  get visualizationCursorVertex() {\n    return \"mouse\" === this._stagedPointerType ? this.cursorVertex : null;\n  }\n  get committableVertex() {\n    const {\n      cursorVertex: t,\n      lastVertex: e,\n      firstVertex: i,\n      geometryType: n\n    } = this;\n    return \"polygon\" === n && _(t, i) || _(t, e) ? null : t;\n  }\n  get updating() {\n    return this._updatingHandles.updating;\n  }\n  get geometryIncludingUncommittedVertices() {\n    const {\n        committedVertices: t,\n        committableVertex: e,\n        coordinateHelper: i\n      } = this,\n      n = t.slice();\n    return null != e && n.push(i.pointToArray(e)), n;\n  }\n  cancel() {\n    this.complete({\n      aborted: !0\n    });\n  }\n  commitStagedVertex() {\n    this._snappingOperation.abort();\n    const {\n      committableVertex: t\n    } = this;\n    null != t && this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(t));\n  }\n  complete(t) {\n    const e = t?.aborted || !1;\n    this._snappingOperation.abort(), this.snappingManager?.doneSnapping();\n    const {\n        geometryType: i,\n        numCommittedVertices: n\n      } = this,\n      o = \"multipoint\" === i && 0 === n || \"polyline\" === i && n < 2 || \"polygon\" === i && n < 3;\n    \"segment\" !== i && \"point\" !== i || this.commitStagedVertex(), this._createOperationCompleted = !o, (this.isCompleted || e) && (this._stagedScreenPoint = null, this._stagedPointerId = null, this._stagedPointerType = null, this._processCursor(null), this.emit(\"complete\", {\n      vertices: this.committedVertices.map((t, e) => ({\n        componentIndex: 0,\n        vertexIndex: e,\n        coordinates: t\n      })),\n      aborted: e,\n      type: \"complete\"\n    }));\n  }\n  onInputEvent(t) {\n    switch (t.type) {\n      case \"pointer-down\":\n        this._pointerDownStates.add(t.pointerId);\n        break;\n      case \"pointer-up\":\n        this._pointerDownStates.delete(t.pointerId);\n    }\n    switch (t.type) {\n      case \"pointer-move\":\n        return this._onPointerMove(t);\n      case \"hold\":\n        return this._onHold(t);\n    }\n  }\n  redo() {\n    this._editGeometryOperations.redo();\n  }\n  undo() {\n    null != this.snappingManager && this.snappingManager.doneSnapping(), this._editGeometryOperations.undo();\n  }\n  _processCursor(t) {\n    const e = n(this.cursorVertex),\n      i = n(t),\n      o = i && (this._updateAndGetEffectiveDrawSurface()?.constrainZ(i) ?? i),\n      r = this._snapToClosingVertex(o),\n      s = this._applyConstraints(r);\n    _(e, s) || (this._set(\"cursorVertex\", s), this.segmentLabels?.set(\"stagedVertex\", null != s ? this.coordinateHelper.pointToVector(s) : null), null == s || \"mouse\" !== this._stagedPointerType ? this.emit(\"cursor-remove\") : this.emit(\"cursor-update\", {\n      updated: null,\n      vertices: [{\n        componentIndex: 0,\n        vertexIndex: this._activeComponent.vertices.length,\n        coordinates: this.coordinateHelper.pointToArray(s)\n      }],\n      operation: \"apply\",\n      type: \"vertex-update\"\n    }));\n  }\n  _snapToClosingVertex(t) {\n    if (null == t || this._isDragging || \"polygon\" !== this.geometryType || this.numCommittedVertices <= 2) return t;\n    const e = this._mapToScreen(t);\n    if (!e) return t;\n    const i = this._activeComponent;\n    return this._vertexWithinPointerDistance(i.vertices[0].pos, e) ? this.firstVertex : this._vertexWithinPointerDistance(i.vertices.at(-1).pos, e) ? this.lastVertex : t;\n  }\n  _createManipulatorDragPipeline(t) {\n    switch (this.drawingMode) {\n      case \"click\":\n        return this._createManipulatorDragPipelineClick(t);\n      case \"freehand\":\n        return this._createManipulatorDragPipelineFreehand(t);\n      case \"hybrid\":\n        return this._createManipulatorDragPipelineHybrid(t);\n    }\n  }\n  _createManipulatorDragPipelineClick(t) {\n    return T(t, (t, e, i, n) => {\n      const o = \"touch\" === n && this._snappingEnabled;\n      if (this.isCompleted || !o) return;\n      const {\n        snappingStep: r,\n        cancelSnapping: s\n      } = G({\n        predicate: () => o,\n        snappingManager: this.snappingManager,\n        snappingContext: new j({\n          editGeometryOperations: this._editGeometryOperations,\n          elevationInfo: this.elevationInfo,\n          feature: this.graphic,\n          pointer: n,\n          visualizer: this.snappingVisualizer,\n          drawConstraints: this.constraints\n        }),\n        updatingHandles: this._updatingHandles,\n        useZ: !this._requiresScenePoint\n      });\n      i = i.next(t => (o && null != this.snappingManager && this.snappingManager.doneSnapping(), t)).next(s), e.next(this._screenToMapDragEventStep()).next(t => (\"start\" === t.action && (this._processCursor(t.mapStart), (\"segment\" === this.geometryType || o && !this.numCommittedVertices) && this.commitStagedVertex()), t)).next(S(this.view, this.elevationInfo)).next(...r).next(t => (o && (this._processCursor(t.mapEnd), \"end\" === t.action && this.commitStagedVertex()), t)).next(t => (\"end\" === t.action && (\"mouse\" !== this._stagedPointerType && this._snappingOperation.abort(), \"segment\" !== this.geometryType && \"point\" !== this.geometryType || this.complete()), t));\n    });\n  }\n  _createManipulatorDragPipelineFreehand(t) {\n    return T(t, (t, e) => {\n      this.isCompleted || e.next(this._screenToMapDragEventStep()).next(t => (\"start\" === t.action && (this._snappingOperation.abort(), null == this.committableVertex && this._processCursor(t.mapStart), \"segment\" === this.geometryType && this.commitStagedVertex()), t)).next(t => {\n        switch (t.action) {\n          case \"start\":\n          case \"update\":\n            this._processCursor(t.mapEnd), \"polygon\" !== this.geometryType && \"polyline\" !== this.geometryType || this.commitStagedVertex();\n            break;\n          case \"end\":\n            this.complete();\n        }\n        return t;\n      });\n    });\n  }\n  _createManipulatorDragPipelineHybrid(t) {\n    return T(t, (t, e) => {\n      this.isCompleted || e.next(this._screenToMapDragEventStep()).next(t => (\"start\" === t.action && (this._snappingOperation.abort(), this.addHandles(this._editGeometryOperations.createUndoGroup(), z), this._processCursor(t.mapStart), this.commitStagedVertex()), t)).next(t => {\n        switch (t.action) {\n          case \"start\":\n          case \"update\":\n            this._processCursor(t.mapEnd), \"polygon\" !== this.geometryType && \"polyline\" !== this.geometryType || this.commitStagedVertex();\n            break;\n          case \"end\":\n            \"mouse\" !== this._stagedPointerType && this._snappingOperation.abort(), this.removeHandles(z), \"segment\" !== this.geometryType && \"point\" !== this.geometryType || this.complete();\n        }\n        return t;\n      });\n    });\n  }\n  get _drawAtFixedElevation() {\n    const {\n      constraintsEnabled: t,\n      constraintZ: e,\n      geometryType: i,\n      numCommittedVertices: n\n    } = this;\n    return t ? null != e || \"segment\" === i && n > 0 : (\"segment\" === i || \"polygon\" === i) && n > 0;\n  }\n  _updateAndGetEffectiveDrawSurface() {\n    const {\n      constraintsEnabled: t,\n      coordinateHelper: e,\n      drawSurface: i,\n      elevationDrawSurface: n,\n      snapToSceneEnabled: o\n    } = this;\n    if (null == n) return i;\n    if (!this.hasZ) return n.defaultZ = null, n;\n    const r = this.elevationInfo?.mode;\n    let s = this.defaultZ,\n      a = t || \"absolute-height\" === r;\n    if (null != o && (a = o), \"on-the-ground\" === r && (a = !1), this._drawAtFixedElevation) {\n      s = (t ? this.constraintZ : null) ?? e.getZ(this._activeComponent.vertices[0].pos), a = !1;\n    }\n    return a ? i : (n.defaultZ = s, n);\n  }\n  _mapToScreen(t) {\n    return this._updateAndGetEffectiveDrawSurface()?.mapToScreen(t);\n  }\n  _onHold(t) {\n    this._snappingOperation.abort(), \"click\" === this.drawingMode && \"touch\" === t.pointerType && this._snappingEnabled && this._processCursor(t.mapPoint), t.stopPropagation();\n  }\n  _onImmediateClick(t) {\n    if (!(\"mouse\" === t.pointerType && 2 === t.button || this._manipulator.dragging)) try {\n      const {\n        drawingMode: e,\n        geometryType: i\n      } = this;\n      this._stagedPointerType = t.pointerType, this._stagedScreenPoint = t.screenPoint;\n      const n = this._screenToMap(t.screenPoint);\n      if (null == n) return;\n      if (null == n || \"freehand\" === e && \"point\" !== i && \"multipoint\" !== i) return;\n      if (this._snappingEnabled && null != this.cursorVertex || this._processCursor(n), null == this.committableVertex) return void this.complete();\n      this.commitStagedVertex(), \"mouse\" !== t.pointerType && this._processCursor(null), (\"freehand\" === e && \"multipoint\" !== this.geometryType || \"point\" === i || \"segment\" === i && 2 === this.numCommittedVertices || \"segment\" === i && \"hybrid\" === e && 1 === this.numCommittedVertices) && this.complete();\n    } finally {\n      t.stopPropagation();\n    }\n  }\n  _onImmediateDoubleClick(t) {\n    this._manipulator.dragging || \"point\" === this.geometryType || (this.complete(), t.stopPropagation());\n  }\n  _onPointerMove(t) {\n    const e = d(t.x, t.y);\n    this._stagedScreenPoint = e, this._stagedPointerType = t.pointerType, this._stagedPointerId = t.pointerId, this._isDragging ? this._snappingOperation.abort() : (t.stopPropagation(), this._processCursorMovementRelativeToSurface(e, t.pointerType));\n  }\n  _onKeyboardBasedChange() {\n    \"mouse\" === this._stagedPointerType && this._stagedScreenPoint && null != this._stagedPointerId && !this._isDragging ? this._processCursorMovementRelativeToSurface(this._stagedScreenPoint, this._stagedPointerType) : this._snappingOperation.abort();\n  }\n  _processCursorMovementRelativeToSurface(t, e) {\n    const i = this._snappingOperation,\n      n = this._screenToMap(t),\n      o = this._requiresScenePoint ? this.drawSurface?.screenToMap(t) : null;\n    if (null == n) return this._hideDefaultCursor = !0, this._processCursor(null), void i.abort();\n    this._hideDefaultCursor = !1;\n    const r = this.snappingManager;\n    if (null == r) return this._processCursor(n), void i.abort();\n    const s = this._getSnappingContext(e);\n    this._updatingHandles.addPromise(a(i.snap({\n      point: n,\n      scenePoint: o\n    }, r, s)));\n  }\n  _applyConstraints(t) {\n    const {\n      _constraint: e,\n      constraints: i\n    } = this;\n    if (!t || !i || !e) return t;\n    const {\n        context: n\n      } = i,\n      o = M(t, n),\n      r = o ? e.closestTo(o) : void 0;\n    if (!r) return t;\n    const s = D(r, t, n),\n      a = \"2d\" === this.view.type || \"absolute-height\" !== n.elevationInfo.mode;\n    return null != s && a && null != this.constraintZ && this.hasZ && (s.z = this.constraintZ), s;\n  }\n  _screenToMap(t) {\n    return t ? this._updateAndGetEffectiveDrawSurface()?.screenToMap(t) : null;\n  }\n  _screenToMapDragEventStep() {\n    let t = null;\n    return e => {\n      if (\"start\" === e.action && (t = this._screenToMap(e.screenStart)), null == t) return null;\n      const i = this._screenToMap(e.screenEnd);\n      return null != i ? {\n        ...e,\n        mapStart: t,\n        mapEnd: i\n      } : null;\n    };\n  }\n  _vertexWithinPointerDistance(t, e) {\n    const i = 25,\n      n = this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(t));\n    return null != n && R(n, e, i);\n  }\n  _getSnappingContext(t) {\n    const e = this._drawAtFixedElevation ? this.elevationDrawSurface?.defaultZ : null;\n    return new j({\n      editGeometryOperations: this._editGeometryOperations,\n      elevationInfo: this.elevationInfo,\n      pointer: t,\n      feature: this.graphic,\n      visualizer: this.snappingVisualizer,\n      selfSnappingZ: null != e ? {\n        value: e,\n        elevationInfo: this.elevationInfo\n      } : null,\n      drawConstraints: this.constraints\n    });\n  }\n};\nfunction R(t, e, i) {\n  const n = t.x - e.x,\n    o = t.y - e.y;\n  return n * n + o * o <= i;\n}\nt([h()], F.prototype, \"_hideDefaultCursor\", void 0), t([h()], F.prototype, \"_stagedPointerId\", void 0), t([h()], F.prototype, \"_isDragging\", null), t([h()], F.prototype, \"_snappingOperation\", void 0), t([h()], F.prototype, \"_snappingEnabled\", null), t([h({\n  constructOnly: !0\n})], F.prototype, \"graphic\", void 0), t([h()], F.prototype, \"constraintsEnabled\", void 0), t([h()], F.prototype, \"constraints\", void 0), t([h()], F.prototype, \"_constraint\", null), t([h()], F.prototype, \"constraintZ\", void 0), t([h()], F.prototype, \"defaultZ\", void 0), t([h()], F.prototype, \"isDraped\", void 0), t([h({\n  value: x\n})], F.prototype, \"drawingMode\", null), t([h({\n  constructOnly: !0\n})], F.prototype, \"elevationDrawSurface\", void 0), t([h({\n  constructOnly: !0\n})], F.prototype, \"elevationInfo\", void 0), t([h({\n  constructOnly: !0,\n  type: H\n})], F.prototype, \"labelOptions\", void 0), t([h({\n  constructOnly: !0\n})], F.prototype, \"geometryType\", void 0), t([h({\n  constructOnly: !0\n})], F.prototype, \"hasM\", void 0), t([h({\n  constructOnly: !0\n})], F.prototype, \"hasZ\", void 0), t([h()], F.prototype, \"cursor\", void 0), t([h()], F.prototype, \"effectiveCursor\", null), t([h()], F.prototype, \"loading\", void 0), t([h({\n  constructOnly: !0\n})], F.prototype, \"manipulators\", void 0), t([h({\n  constructOnly: !0\n})], F.prototype, \"drawSurface\", void 0), t([h({\n  constructOnly: !0\n})], F.prototype, \"segmentLabels\", void 0), t([h({\n  constructOnly: !0\n})], F.prototype, \"snappingManager\", void 0), t([h({\n  constructOnly: !0\n})], F.prototype, \"snappingVisualizer\", void 0), t([h()], F.prototype, \"snapToSceneEnabled\", void 0), t([h({\n  readOnly: !0\n})], F.prototype, \"cursorVertex\", null), t([h({\n  readOnly: !0\n})], F.prototype, \"visualizationCursorVertex\", null), t([h()], F.prototype, \"committableVertex\", null), t([h()], F.prototype, \"firstVertex\", void 0), t([h()], F.prototype, \"lastVertex\", void 0), t([h()], F.prototype, \"secondToLastVertex\", void 0), t([h()], F.prototype, \"updating\", null), t([h({\n  constructOnly: !0\n})], F.prototype, \"view\", void 0), F = t([u(\"esri.views.draw.DrawOperation\")], F);\nexport { F as DrawOperation, A as defaultCursor, L as defaultLoadingCursor };","map":{"version":3,"names":["_","t","e","i","clone","n","destroyMaybe","o","equalsMaybe","r","memoize","s","ignoreAbortErrors","a","p","watch","c","syncAndInitial","l","createScreenPoint","d","property","h","subclass","u","diff","m","UpdatingHandles","g","pointEquals","y","pointNear","getEffectiveElevationInfo","v","ViewingMode","f","defaultDrawingMode","x","DrawManipulator","C","createCoordinateHelper","b","createManipulatorDragEventPipeline","T","sceneSnappingAtLocation","S","EditGeometry","P","Component","V","EditGeometryOperations","w","isPoint","O","pointToConstraintSpace","M","constraintSpaceToPoint","D","getPointConstraint","E","getPolylineOrPolygonConstraint","I","H","SnappingContext","j","createSnapDragEventPipelineStep","G","SnappingOperation","k","setupSnappingToggleHandles","Z","A","L","U","Symbol","z","F","EventedMixin","constructor","_createOperationCompleted","_hideDefaultCursor","_pointerDownStates","_stagedScreenPoint","_stagedPointerType","_updatingHandles","_stagedPointerId","constraintsEnabled","constraints","_getPointConstraint","_getPolylineOrPolygonConstraint","constraintZ","defaultZ","isDraped","labelOptions","cursor","loading","snapToSceneEnabled","firstVertex","lastVertex","secondToLastVertex","elevationInfo","hasZ","initialize","geometryType","view","spatialReference","state","viewingMode","Local","coordinateHelper","hasM","_editGeometryOperations","_snappingOperation","addHandles","stagedPoint","constraint","_constraint","_ref","snappingOptions","forceDisabled","_onKeyboardBasedChange","_processCursor","_screenToMap","equals","viewpoint","_activeComponent","data","components","push","segmentLabels","context","editGeometryOperations","enabled","visible","on","vertices","map","componentIndex","vertexIndex","index","coordinates","vectorToArray","pos","vectorToDehydratedPoint","getFirstVertex","getLastVertex","edges","at","leftVertex","cursorVertex","type","emit","added","updated","removed","_manipulator","consumesClicks","grabbableForEvent","drawingMode","pointerType","_snappingEnabled","size","manipulators","add","grabbable","events","_onImmediateClick","_onImmediateDoubleClick","removeHandles","_createManipulatorDragPipeline","effectiveCursor","_ref2","inputManager","latestPointerType","_getSnappingContext","snappingManager","snapAgainNearPreviousMapPoint","addPromise","destroy","_isDragging","has","grabbing","interactive","options","effectiveEnabled","_requiresScenePoint","_updateAndGetEffectiveDrawSurface","drawSurface","canRedo","canUndo","committedVertices","_set","isCompleted","numCommittedVertices","length","_get","visualizationCursorVertex","committableVertex","updating","geometryIncludingUncommittedVertices","slice","pointToArray","cancel","complete","aborted","commitStagedVertex","abort","appendVertex","pointToVector","doneSnapping","onInputEvent","pointerId","delete","_onPointerMove","_onHold","redo","undo","constrainZ","_snapToClosingVertex","_applyConstraints","set","operation","_mapToScreen","_vertexWithinPointerDistance","_createManipulatorDragPipelineClick","_createManipulatorDragPipelineFreehand","_createManipulatorDragPipelineHybrid","snappingStep","cancelSnapping","predicate","snappingContext","feature","graphic","pointer","visualizer","snappingVisualizer","drawConstraints","updatingHandles","useZ","next","_screenToMapDragEventStep","action","mapStart","mapEnd","createUndoGroup","_drawAtFixedElevation","elevationDrawSurface","mode","getZ","mapToScreen","mapPoint","stopPropagation","button","dragging","screenPoint","_processCursorMovementRelativeToSurface","screenToMap","snap","point","scenePoint","closestTo","screenStart","screenEnd","R","selfSnappingZ","value","prototype","constructOnly","readOnly","DrawOperation","defaultCursor","defaultLoadingCursor"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/draw/DrawOperation.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Accessor.js\";import i from\"../../core/Evented.js\";import{clone as n}from\"../../core/lang.js\";import{destroyMaybe as o,equalsMaybe as r}from\"../../core/maybe.js\";import{memoize as s}from\"../../core/memoize.js\";import{ignoreAbortErrors as a}from\"../../core/promiseUtils.js\";import p from\"../../core/ReactiveSet.js\";import{watch as c,syncAndInitial as l}from\"../../core/reactiveUtils.js\";import{createScreenPoint as d}from\"../../core/screenUtils.js\";import{property as h}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import{subclass as u}from\"../../core/accessorSupport/decorators/subclass.js\";import{diff as m}from\"../../core/accessorSupport/diffUtils.js\";import{UpdatingHandles as g}from\"../../core/support/UpdatingHandles.js\";import{pointEquals as y,pointNear as _}from\"../../layers/graphics/dehydratedFeatureComparison.js\";import{getEffectiveElevationInfo as v}from\"../../support/elevationInfoUtils.js\";import{ViewingMode as f}from\"../ViewingMode.js\";import{defaultDrawingMode as x}from\"./DrawingMode.js\";import{DrawManipulator as C}from\"./DrawManipulator.js\";import{createCoordinateHelper as b}from\"../interactive/coordinateHelper.js\";import{createManipulatorDragEventPipeline as T,sceneSnappingAtLocation as S}from\"../interactive/dragEventPipeline.js\";import{EditGeometry as P,Component as V}from\"../interactive/editGeometry/EditGeometry.js\";import{EditGeometryOperations as w}from\"../interactive/editGeometry/EditGeometryOperations.js\";import{isPoint as O}from\"../interactive/sketch/constraints.js\";import{pointToConstraintSpace as M,constraintSpaceToPoint as D,getPointConstraint as E,getPolylineOrPolygonConstraint as I}from\"../interactive/sketch/constraintUtils.js\";import H from\"../interactive/sketch/SketchLabelOptions.js\";import{SnappingContext as j}from\"../interactive/snapping/SnappingContext.js\";import{createSnapDragEventPipelineStep as G}from\"../interactive/snapping/SnappingDragPipelineStep.js\";import{SnappingOperation as k}from\"../interactive/snapping/SnappingOperation.js\";import{setupSnappingToggleHandles as Z}from\"../interactive/snapping/snappingUtils.js\";const A=\"crosshair\",L=\"progress\",U=Symbol(),z=Symbol();let F=class extends(i.EventedMixin(e)){constructor(t){super(t),this._createOperationCompleted=!1,this._hideDefaultCursor=!1,this._pointerDownStates=new p,this._stagedScreenPoint=null,this._stagedPointerType=null,this._updatingHandles=new g,this._stagedPointerId=null,this.constraintsEnabled=!1,this.constraints=void 0,this._getPointConstraint=s(E),this._getPolylineOrPolygonConstraint=s(I),this.constraintZ=null,this.defaultZ=null,this.isDraped=!0,this.labelOptions=new H,this.cursor=null,this.loading=!1,this.snapToSceneEnabled=null,this.firstVertex=null,this.lastVertex=null,this.secondToLastVertex=null,null==t.elevationInfo&&(this.elevationInfo=v(!!t.hasZ))}initialize(){const{geometryType:t,view:e}=this,i=e.spatialReference,n=\"viewingMode\"in e.state?e.state.viewingMode:f.Local,o=\"segment\"===t||\"multipoint\"===t?\"polyline\":t;this.coordinateHelper=b(this.hasZ,this.hasM,i),this._editGeometryOperations=new w(new P(o,this.coordinateHelper),n),this._snappingOperation=new k({view:e}),this.addHandles([c((()=>({stagedPoint:this._snappingOperation.stagedPoint,constraint:this._constraint})),(({stagedPoint:t,constraint:e},i)=>{const{snappingOptions:n}=this;n&&(n.forceDisabled=null!=e&&O(e));if(null!=i&&t===i.stagedPoint&&e!==i.constraint)return this._onKeyboardBasedChange();this._processCursor(t??this._screenToMap(this._stagedScreenPoint))}),{equals:(t,e)=>t.stagedPoint===e.stagedPoint&&r(t.constraint,e.constraint)}),c((()=>this.view.viewpoint),((t,e)=>{t&&e&&m(t,e)&&this._onKeyboardBasedChange()}))]),this._activeComponent=new V(i,n),this._editGeometryOperations.data.components.push(this._activeComponent);const s=this.segmentLabels;null!=s&&(s.context={view:e,editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,labelOptions:this.labelOptions},this.addHandles(c((()=>this.labelOptions.enabled),(t=>{s.visible=t}),l))),this.addHandles(this._editGeometryOperations.on([\"vertex-add\",\"vertex-update\",\"vertex-remove\"],(t=>{const e=t.vertices.map((t=>({componentIndex:0,vertexIndex:t.index,coordinates:this.coordinateHelper.vectorToArray(t.pos)}))),i=e.map((t=>t.coordinates)),n=this.coordinateHelper.vectorToDehydratedPoint(this._activeComponent.getFirstVertex()?.pos)??null;y(n,this.firstVertex)||(this.firstVertex=n);const o=this.coordinateHelper.vectorToDehydratedPoint(this._activeComponent.getLastVertex()?.pos)??null;y(o,this.lastVertex)||(this.lastVertex=o);const r=this.coordinateHelper.vectorToDehydratedPoint(this._activeComponent.edges.at(-1)?.leftVertex?.pos)??null;switch(y(r,this.secondToLastVertex)||(this.secondToLastVertex=r),this._processCursor(this.cursorVertex),t.type){case\"vertex-add\":this.emit(t.type,{...t,added:i,vertices:e});break;case\"vertex-update\":this.emit(t.type,{...t,updated:i,vertices:e});break;case\"vertex-remove\":this.emit(t.type,{...t,removed:i,vertices:e})}})));const p=this._manipulator=new C({consumesClicks:!1,grabbableForEvent:t=>\"click\"!==this.drawingMode||\"touch\"===t.pointerType&&this._snappingEnabled&&1===this._pointerDownStates.size});this.manipulators.add(p),p.grabbable=\"point\"!==t&&\"multipoint\"!==t,this.addHandles([p.events.on(\"immediate-click\",(t=>this._onImmediateClick(t))),p.events.on(\"immediate-double-click\",(t=>this._onImmediateDoubleClick(t))),c((()=>this.drawingMode),(()=>{this.removeHandles(U),this.addHandles(this._createManipulatorDragPipeline(p),U)}),l),c((()=>({effectiveCursor:this.effectiveCursor})),(({effectiveCursor:t})=>{p.cursor=t}),l)]),Z(this,(()=>{const t=this.view.inputManager.latestPointerType??\"mouse\",e=this._getSnappingContext(t);if(null!=this.snappingManager){const t=this._snappingOperation.snapAgainNearPreviousMapPoint(this.snappingManager,e);this._updatingHandles.addPromise(a(t))}}))}destroy(){o(this.segmentLabels),o(this._snappingOperation),this._editGeometryOperations=o(this._editGeometryOperations),this._updatingHandles.destroy()}get _isDragging(){const{_stagedPointerId:t,_manipulator:e}=this;return null!=t&&this._pointerDownStates.has(t)||e.grabbing||!e.interactive}get _snappingEnabled(){return null!=this.snappingManager&&this.snappingManager.options.effectiveEnabled}get _requiresScenePoint(){const t=this._updateAndGetEffectiveDrawSurface();return\"3d\"===this.view.type&&this.drawSurface!==t}get canRedo(){return this._editGeometryOperations.canRedo}get canUndo(){return this._editGeometryOperations.canUndo}get committedVertices(){return this._activeComponent.vertices.map((t=>this.coordinateHelper.vectorToArray(t.pos)))}get _constraint(){const{constraints:t,constraintsEnabled:e}=this;if(t&&e)switch(this.geometryType){case\"point\":case\"multipoint\":return this._getPointConstraint(t);case\"polygon\":case\"polyline\":return this._getPolylineOrPolygonConstraint(this.lastVertex,this.secondToLastVertex,t)}}set drawingMode(t){this._set(\"drawingMode\",t??x)}get effectiveCursor(){return this.loading?L:this._hideDefaultCursor?null:this.cursor||A}get interactive(){return this._manipulator.interactive}set interactive(t){this._manipulator.interactive=t}get isCompleted(){return this._createOperationCompleted}get numCommittedVertices(){return this._activeComponent.vertices.length}get snappingOptions(){return null!=this.snappingManager?this.snappingManager.options:null}get cursorVertex(){return this._get(\"cursorVertex\")}get visualizationCursorVertex(){return\"mouse\"===this._stagedPointerType?this.cursorVertex:null}get committableVertex(){const{cursorVertex:t,lastVertex:e,firstVertex:i,geometryType:n}=this;return\"polygon\"===n&&_(t,i)||_(t,e)?null:t}get updating(){return this._updatingHandles.updating}get geometryIncludingUncommittedVertices(){const{committedVertices:t,committableVertex:e,coordinateHelper:i}=this,n=t.slice();return null!=e&&n.push(i.pointToArray(e)),n}cancel(){this.complete({aborted:!0})}commitStagedVertex(){this._snappingOperation.abort();const{committableVertex:t}=this;null!=t&&this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(t))}complete(t){const e=t?.aborted||!1;this._snappingOperation.abort(),this.snappingManager?.doneSnapping();const{geometryType:i,numCommittedVertices:n}=this,o=\"multipoint\"===i&&0===n||\"polyline\"===i&&n<2||\"polygon\"===i&&n<3;\"segment\"!==i&&\"point\"!==i||this.commitStagedVertex(),this._createOperationCompleted=!o,(this.isCompleted||e)&&(this._stagedScreenPoint=null,this._stagedPointerId=null,this._stagedPointerType=null,this._processCursor(null),this.emit(\"complete\",{vertices:this.committedVertices.map(((t,e)=>({componentIndex:0,vertexIndex:e,coordinates:t}))),aborted:e,type:\"complete\"}))}onInputEvent(t){switch(t.type){case\"pointer-down\":this._pointerDownStates.add(t.pointerId);break;case\"pointer-up\":this._pointerDownStates.delete(t.pointerId)}switch(t.type){case\"pointer-move\":return this._onPointerMove(t);case\"hold\":return this._onHold(t)}}redo(){this._editGeometryOperations.redo()}undo(){null!=this.snappingManager&&this.snappingManager.doneSnapping(),this._editGeometryOperations.undo()}_processCursor(t){const e=n(this.cursorVertex),i=n(t),o=i&&(this._updateAndGetEffectiveDrawSurface()?.constrainZ(i)??i),r=this._snapToClosingVertex(o),s=this._applyConstraints(r);_(e,s)||(this._set(\"cursorVertex\",s),this.segmentLabels?.set(\"stagedVertex\",null!=s?this.coordinateHelper.pointToVector(s):null),null==s||\"mouse\"!==this._stagedPointerType?this.emit(\"cursor-remove\"):this.emit(\"cursor-update\",{updated:null,vertices:[{componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(s)}],operation:\"apply\",type:\"vertex-update\"}))}_snapToClosingVertex(t){if(null==t||this._isDragging||\"polygon\"!==this.geometryType||this.numCommittedVertices<=2)return t;const e=this._mapToScreen(t);if(!e)return t;const i=this._activeComponent;return this._vertexWithinPointerDistance(i.vertices[0].pos,e)?this.firstVertex:this._vertexWithinPointerDistance(i.vertices.at(-1).pos,e)?this.lastVertex:t}_createManipulatorDragPipeline(t){switch(this.drawingMode){case\"click\":return this._createManipulatorDragPipelineClick(t);case\"freehand\":return this._createManipulatorDragPipelineFreehand(t);case\"hybrid\":return this._createManipulatorDragPipelineHybrid(t)}}_createManipulatorDragPipelineClick(t){return T(t,((t,e,i,n)=>{const o=\"touch\"===n&&this._snappingEnabled;if(this.isCompleted||!o)return;const{snappingStep:r,cancelSnapping:s}=G({predicate:()=>o,snappingManager:this.snappingManager,snappingContext:new j({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,feature:this.graphic,pointer:n,visualizer:this.snappingVisualizer,drawConstraints:this.constraints}),updatingHandles:this._updatingHandles,useZ:!this._requiresScenePoint});i=i.next((t=>(o&&null!=this.snappingManager&&this.snappingManager.doneSnapping(),t))).next(s),e.next(this._screenToMapDragEventStep()).next((t=>(\"start\"===t.action&&(this._processCursor(t.mapStart),(\"segment\"===this.geometryType||o&&!this.numCommittedVertices)&&this.commitStagedVertex()),t))).next(S(this.view,this.elevationInfo)).next(...r).next((t=>(o&&(this._processCursor(t.mapEnd),\"end\"===t.action&&this.commitStagedVertex()),t))).next((t=>(\"end\"===t.action&&(\"mouse\"!==this._stagedPointerType&&this._snappingOperation.abort(),\"segment\"!==this.geometryType&&\"point\"!==this.geometryType||this.complete()),t)))}))}_createManipulatorDragPipelineFreehand(t){return T(t,((t,e)=>{this.isCompleted||e.next(this._screenToMapDragEventStep()).next((t=>(\"start\"===t.action&&(this._snappingOperation.abort(),null==this.committableVertex&&this._processCursor(t.mapStart),\"segment\"===this.geometryType&&this.commitStagedVertex()),t))).next((t=>{switch(t.action){case\"start\":case\"update\":this._processCursor(t.mapEnd),\"polygon\"!==this.geometryType&&\"polyline\"!==this.geometryType||this.commitStagedVertex();break;case\"end\":this.complete()}return t}))}))}_createManipulatorDragPipelineHybrid(t){return T(t,((t,e)=>{this.isCompleted||e.next(this._screenToMapDragEventStep()).next((t=>(\"start\"===t.action&&(this._snappingOperation.abort(),this.addHandles(this._editGeometryOperations.createUndoGroup(),z),this._processCursor(t.mapStart),this.commitStagedVertex()),t))).next((t=>{switch(t.action){case\"start\":case\"update\":this._processCursor(t.mapEnd),\"polygon\"!==this.geometryType&&\"polyline\"!==this.geometryType||this.commitStagedVertex();break;case\"end\":\"mouse\"!==this._stagedPointerType&&this._snappingOperation.abort(),this.removeHandles(z),\"segment\"!==this.geometryType&&\"point\"!==this.geometryType||this.complete()}return t}))}))}get _drawAtFixedElevation(){const{constraintsEnabled:t,constraintZ:e,geometryType:i,numCommittedVertices:n}=this;return t?null!=e||\"segment\"===i&&n>0:(\"segment\"===i||\"polygon\"===i)&&n>0}_updateAndGetEffectiveDrawSurface(){const{constraintsEnabled:t,coordinateHelper:e,drawSurface:i,elevationDrawSurface:n,snapToSceneEnabled:o}=this;if(null==n)return i;if(!this.hasZ)return n.defaultZ=null,n;const r=this.elevationInfo?.mode;let s=this.defaultZ,a=t||\"absolute-height\"===r;if(null!=o&&(a=o),\"on-the-ground\"===r&&(a=!1),this._drawAtFixedElevation){s=(t?this.constraintZ:null)??e.getZ(this._activeComponent.vertices[0].pos),a=!1}return a?i:(n.defaultZ=s,n)}_mapToScreen(t){return this._updateAndGetEffectiveDrawSurface()?.mapToScreen(t)}_onHold(t){this._snappingOperation.abort(),\"click\"===this.drawingMode&&\"touch\"===t.pointerType&&this._snappingEnabled&&this._processCursor(t.mapPoint),t.stopPropagation()}_onImmediateClick(t){if(!(\"mouse\"===t.pointerType&&2===t.button||this._manipulator.dragging))try{const{drawingMode:e,geometryType:i}=this;this._stagedPointerType=t.pointerType,this._stagedScreenPoint=t.screenPoint;const n=this._screenToMap(t.screenPoint);if(null==n)return;if(null==n||\"freehand\"===e&&\"point\"!==i&&\"multipoint\"!==i)return;if(this._snappingEnabled&&null!=this.cursorVertex||this._processCursor(n),null==this.committableVertex)return void this.complete();this.commitStagedVertex(),\"mouse\"!==t.pointerType&&this._processCursor(null),(\"freehand\"===e&&\"multipoint\"!==this.geometryType||\"point\"===i||\"segment\"===i&&2===this.numCommittedVertices||\"segment\"===i&&\"hybrid\"===e&&1===this.numCommittedVertices)&&this.complete()}finally{t.stopPropagation()}}_onImmediateDoubleClick(t){this._manipulator.dragging||\"point\"===this.geometryType||(this.complete(),t.stopPropagation())}_onPointerMove(t){const e=d(t.x,t.y);this._stagedScreenPoint=e,this._stagedPointerType=t.pointerType,this._stagedPointerId=t.pointerId,this._isDragging?this._snappingOperation.abort():(t.stopPropagation(),this._processCursorMovementRelativeToSurface(e,t.pointerType))}_onKeyboardBasedChange(){\"mouse\"===this._stagedPointerType&&this._stagedScreenPoint&&null!=this._stagedPointerId&&!this._isDragging?this._processCursorMovementRelativeToSurface(this._stagedScreenPoint,this._stagedPointerType):this._snappingOperation.abort()}_processCursorMovementRelativeToSurface(t,e){const i=this._snappingOperation,n=this._screenToMap(t),o=this._requiresScenePoint?this.drawSurface?.screenToMap(t):null;if(null==n)return this._hideDefaultCursor=!0,this._processCursor(null),void i.abort();this._hideDefaultCursor=!1;const r=this.snappingManager;if(null==r)return this._processCursor(n),void i.abort();const s=this._getSnappingContext(e);this._updatingHandles.addPromise(a(i.snap({point:n,scenePoint:o},r,s)))}_applyConstraints(t){const{_constraint:e,constraints:i}=this;if(!t||!i||!e)return t;const{context:n}=i,o=M(t,n),r=o?e.closestTo(o):void 0;if(!r)return t;const s=D(r,t,n),a=\"2d\"===this.view.type||\"absolute-height\"!==n.elevationInfo.mode;return null!=s&&a&&null!=this.constraintZ&&this.hasZ&&(s.z=this.constraintZ),s}_screenToMap(t){return t?this._updateAndGetEffectiveDrawSurface()?.screenToMap(t):null}_screenToMapDragEventStep(){let t=null;return e=>{if(\"start\"===e.action&&(t=this._screenToMap(e.screenStart)),null==t)return null;const i=this._screenToMap(e.screenEnd);return null!=i?{...e,mapStart:t,mapEnd:i}:null}}_vertexWithinPointerDistance(t,e){const i=25,n=this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(t));return null!=n&&R(n,e,i)}_getSnappingContext(t){const e=this._drawAtFixedElevation?this.elevationDrawSurface?.defaultZ:null;return new j({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:t,feature:this.graphic,visualizer:this.snappingVisualizer,selfSnappingZ:null!=e?{value:e,elevationInfo:this.elevationInfo}:null,drawConstraints:this.constraints})}};function R(t,e,i){const n=t.x-e.x,o=t.y-e.y;return n*n+o*o<=i}t([h()],F.prototype,\"_hideDefaultCursor\",void 0),t([h()],F.prototype,\"_stagedPointerId\",void 0),t([h()],F.prototype,\"_isDragging\",null),t([h()],F.prototype,\"_snappingOperation\",void 0),t([h()],F.prototype,\"_snappingEnabled\",null),t([h({constructOnly:!0})],F.prototype,\"graphic\",void 0),t([h()],F.prototype,\"constraintsEnabled\",void 0),t([h()],F.prototype,\"constraints\",void 0),t([h()],F.prototype,\"_constraint\",null),t([h()],F.prototype,\"constraintZ\",void 0),t([h()],F.prototype,\"defaultZ\",void 0),t([h()],F.prototype,\"isDraped\",void 0),t([h({value:x})],F.prototype,\"drawingMode\",null),t([h({constructOnly:!0})],F.prototype,\"elevationDrawSurface\",void 0),t([h({constructOnly:!0})],F.prototype,\"elevationInfo\",void 0),t([h({constructOnly:!0,type:H})],F.prototype,\"labelOptions\",void 0),t([h({constructOnly:!0})],F.prototype,\"geometryType\",void 0),t([h({constructOnly:!0})],F.prototype,\"hasM\",void 0),t([h({constructOnly:!0})],F.prototype,\"hasZ\",void 0),t([h()],F.prototype,\"cursor\",void 0),t([h()],F.prototype,\"effectiveCursor\",null),t([h()],F.prototype,\"loading\",void 0),t([h({constructOnly:!0})],F.prototype,\"manipulators\",void 0),t([h({constructOnly:!0})],F.prototype,\"drawSurface\",void 0),t([h({constructOnly:!0})],F.prototype,\"segmentLabels\",void 0),t([h({constructOnly:!0})],F.prototype,\"snappingManager\",void 0),t([h({constructOnly:!0})],F.prototype,\"snappingVisualizer\",void 0),t([h()],F.prototype,\"snapToSceneEnabled\",void 0),t([h({readOnly:!0})],F.prototype,\"cursorVertex\",null),t([h({readOnly:!0})],F.prototype,\"visualizationCursorVertex\",null),t([h()],F.prototype,\"committableVertex\",null),t([h()],F.prototype,\"firstVertex\",void 0),t([h()],F.prototype,\"lastVertex\",void 0),t([h()],F.prototype,\"secondToLastVertex\",void 0),t([h()],F.prototype,\"updating\",null),t([h({constructOnly:!0})],F.prototype,\"view\",void 0),F=t([u(\"esri.views.draw.DrawOperation\")],F);export{F as DrawOperation,A as defaultCursor,L as defaultLoadingCursor};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}