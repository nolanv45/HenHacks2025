{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../../core/Accessor.js\";\nimport { ByteSizeUnit as s } from \"../../../../../core/ByteSizeUnit.js\";\nimport \"../../../../../core/has.js\";\nimport { intersection as i, isSubsetOf as r } from \"../../../../../core/SetUtils.js\";\nimport { property as o } from \"../../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../../core/Logger.js\";\nimport \"../../../../../core/RandomLCG.js\";\nimport { subclass as n } from \"../../../../../core/accessorSupport/decorators/subclass.js\";\nimport { create as l, intersects as u, fromExtent as c, area as a } from \"../../../../../geometry/support/aaBoundingRect.js\";\nimport { getBoundsOptimizedGeometry as h } from \"../../../../../layers/graphics/featureConversionUtils.js\";\nimport { BoundsStore as d } from \"../../../../../layers/graphics/data/BoundsStore.js\";\nimport f from \"../../../../../layers/support/TileInfo.js\";\nimport { TileKey as _ } from \"../../../../../layers/support/TileKey.js\";\nimport { executeQueryForCount as m } from \"../../../../../rest/query/operations/query.js\";\nimport { FeatureServiceTileCache as p } from \"./FeatureServiceTileCache.js\";\nlet g = class extends t {\n  setPriorityOrderByKey(e) {\n    this._tiles.setPriorityOrderByKey(e);\n  }\n  get _memoryLimitExceeded() {\n    return this.featureStore.usedMemory >= this.maximumByteSize;\n  }\n  constructor(e) {\n    super(e), this.tileInfo = null, this.extent = null, this.maximumByteSize = 10 * s.MEGABYTES, this._tileBounds = new d(), this._tiles = new p(), this._refCounts = new Map(), this._tileFeatureCounts = new Map(), this._tmpBoundingRect = l();\n  }\n  add(e, t) {\n    for (const i of t) this._referenceFeature(i.objectId);\n    const s = this.featureStore.upsertMany(t),\n      r = s.map(e => new Set(Object.keys(e.attributes))).reduce((e, t) => i(e, t), new Set(Object.keys(s[0]?.attributes ?? []))),\n      o = this._memoryLimitExceeded;\n    this._addTileStorage(e, new Set(s.map(e => e.objectId)), r), o && this._applyCacheMemoryLimits();\n  }\n  _applyCacheMemoryLimits() {\n    if (!this._memoryLimitExceeded) return;\n    const {\n      _tiles: e,\n      featureStore: t,\n      maximumByteSize: s\n    } = this;\n    e.someFromLowestToHighestPriority(e => !this._memoryLimitExceeded || t.usedMemory - this._estimateRemoveTileMemoryReduction(e) < s || (this._removeTileStorage(e), !1));\n  }\n  _estimateRemoveTileMemoryReduction(e) {\n    let t = 0;\n    for (const s of e.objectIds) {\n      if (1 === this._refCounts.get(s)) {\n        const e = this.featureStore.getFeature(s);\n        e && (t += this.featureStore.estimateFeatureUsedMemory?.(e) ?? 0);\n      }\n    }\n    return t;\n  }\n  getAttributesForTile(e) {\n    return e ? this._tiles.get(e)?.attributeKeys : null;\n  }\n  destroy() {\n    this.clear(), this._tileFeatureCounts.clear();\n  }\n  clear() {\n    this.featureStore.clear(), this._tileBounds.clear(), this._tiles.clear(), this._refCounts.clear();\n  }\n  refresh() {\n    this.clear(), this._tileFeatureCounts.clear();\n  }\n  processEdits(e, t, s) {\n    return this._processEditsDelete(e.deletedFeatures.concat(e.updatedFeatures)), this._processEditsRefetch(e.addedFeatures.concat(e.updatedFeatures), t, s);\n  }\n  _addTileStorage(e, t, s) {\n    const i = e.id;\n    this._tiles.set(i, new v(e, t, s)), this._tileBounds.set(i, e.extent), this._tileFeatureCounts.set(i, t.size);\n  }\n  _remove(_ref) {\n    let {\n      id: e\n    } = _ref;\n    const t = this._tiles.get(e);\n    t && this._removeTileStorage(t);\n  }\n  _removeTileStorage(e) {\n    const t = [];\n    for (const i of e.objectIds) this._unreferenceFeature(i) === w.REMOVED && t.push(i);\n    this.featureStore.removeManyById(t);\n    const s = e.data.id;\n    this._tiles.delete(s), this._tileBounds.delete(s);\n  }\n  _processEditsDelete(e) {\n    this.featureStore.removeManyById(e);\n    for (const t of this._tiles.values()) {\n      for (const s of e) t.objectIds.delete(s);\n      this._tileFeatureCounts.set(t.data.id, t.objectIds.size);\n    }\n    for (const t of e) this._refCounts.delete(t);\n  }\n  async _processEditsRefetch(e, t, s) {\n    if (!e.length) return;\n    const i = (await t(e, s)).features,\n      {\n        hasZ: r,\n        hasM: o\n      } = this.featureStore;\n    for (const n of i) {\n      const e = h(this._tmpBoundingRect, n.geometry, r, o);\n      null != e && this._tileBounds.forEachInBounds(e, e => {\n        const t = this._tiles.get(e);\n        this.featureStore.add(n);\n        const s = n.objectId;\n        t.objectIds.has(s) || (t.objectIds.add(s), this._referenceFeature(s), this._tileFeatureCounts.set(t.data.id, t.objectIds.size));\n      });\n    }\n  }\n  process(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : () => !0;\n    let s = arguments.length > 2 ? arguments[2] : undefined;\n    if (null == this.tileInfo || !e.extent || null != this.extent && !u(c(this.extent, this._tmpBoundingRect), e.extent)) return new S(e);\n    if (this._memoryLimitExceeded && !this._tiles.hasLowerPriority(e.id ?? \"\")) return new S(e);\n    const i = this.getAttributesForTile(e.id);\n    if (r(s, i)) return new S(e);\n    const o = this._createTileTree(e, this.tileInfo);\n    return this._simplify(o, t, null, 0, 1), this._collectMissingTiles(e, o, this.tileInfo, s);\n  }\n  get debugInfo() {\n    return Array.from(this._tiles.values()).map(_ref2 => {\n      let {\n        data: e\n      } = _ref2;\n      return {\n        data: e,\n        featureCount: this._tileFeatureCounts.get(e.id) || 0\n      };\n    });\n  }\n  getFeatureCount(e) {\n    return this._tileFeatureCounts.get(e.id) ?? 0;\n  }\n  async fetchCount(e, t, s, i) {\n    const r = this._tileFeatureCounts.get(e.id);\n    if (null != r) return r;\n    const o = await m(t, s, i);\n    return this._tileFeatureCounts.set(e.id, o.data.count), o.data.count;\n  }\n  _createTileTree(e, t) {\n    const s = new C(e.level, e.row, e.col);\n    return t.updateTileInfo(s, f.ExtrapolateOptions.POWER_OF_TWO), this._tileBounds.forEachInBounds(e.extent, i => {\n      const r = this._tiles.get(i)?.data;\n      r && y(e, r) && this._populateChildren(s, r, t, this._tileFeatureCounts.get(r.id) || 0);\n    }), s;\n  }\n  _populateChildren(e, t, s, i) {\n    const r = t.level - e.level - 1;\n    if (r < 0) return void (e.isLeaf = !0);\n    const o = t.row >> r,\n      n = t.col >> r,\n      l = e.row << 1,\n      u = n - (e.col << 1) + (o - l << 1),\n      c = e.children[u];\n    if (null != c) this._populateChildren(c, t, s, i);else {\n      const r = new C(e.level + 1, o, n);\n      s.updateTileInfo(r, f.ExtrapolateOptions.POWER_OF_TWO), e.children[u] = r, this._populateChildren(r, t, s, i);\n    }\n  }\n  _simplify(e, t, s, i, r) {\n    const o = r * r;\n    if (e.isLeaf) return t(this.getFeatureCount(e), r) ? 0 : (this._remove(e), null != s && (s.children[i] = null), o);\n    const n = r / 2,\n      l = n * n;\n    let u = 0;\n    for (let c = 0; c < e.children.length; c++) {\n      const s = e.children[c];\n      u += null != s ? this._simplify(s, t, e, c, n) : l;\n    }\n    return 0 === u ? this._mergeChildren(e) : 1 - u / o < T && (this._purge(e), null != s && (s.children[i] = null), u = o), u;\n  }\n  _mergeChildren(e) {\n    const t = new Set();\n    let s;\n    this._forEachLeaf(e, e => {\n      const r = this._tiles.get(e.id);\n      if (r) {\n        s = s ? i(s, r.attributeKeys) : new Set(r.attributeKeys);\n        for (const e of r.objectIds) t.has(e) || (t.add(e), this._referenceFeature(e));\n        this._remove(e);\n      }\n    }), this._addTileStorage(e, t, s ?? new Set()), e.isLeaf = !0, e.children[0] = e.children[1] = e.children[2] = e.children[3] = null, this._tileFeatureCounts.set(e.id, t.size);\n  }\n  _forEachLeaf(e, t) {\n    for (const s of e.children) null != s && (s.isLeaf ? t(s) : this._forEachLeaf(s, t));\n  }\n  _purge(e) {\n    if (null != e) if (e.isLeaf) this._remove(e);else for (let t = 0; t < e.children.length; t++) {\n      const s = e.children[t];\n      this._purge(s), e.children[t] = null;\n    }\n  }\n  _collectMissingTiles(e, t, s, i) {\n    const r = new E(s, e, this.extent);\n    return this._collectMissingTilesRecurse(t, r, 1, i), r.info;\n  }\n  _collectMissingTilesRecurse(e, t, s, i) {\n    const o = this.getAttributesForTile(e.id),\n      n = o && !r(i, o);\n    if (n && t.addMissing(e.level, e.row, e.col, s), e.isLeaf) return;\n    if (!e.hasChildren) return void (n || t.addMissing(e.level, e.row, e.col, s));\n    const l = s / 2;\n    for (let r = 0; r < e.children.length; r++) {\n      const s = e.children[r];\n      null == s ? t.addMissing(e.level + 1, (e.row << 1) + ((2 & r) >> 1), (e.col << 1) + (1 & r), l) : this._collectMissingTilesRecurse(s, t, l, i);\n    }\n  }\n  _referenceFeature(e) {\n    const t = (this._refCounts.get(e) || 0) + 1;\n    return this._refCounts.set(e, t), 1 === t ? w.ADDED : w.UNCHANGED;\n  }\n  _unreferenceFeature(e) {\n    const t = (this._refCounts.get(e) || 0) - 1;\n    return 0 === t ? (this._refCounts.delete(e), w.REMOVED) : (t > 0 && this._refCounts.set(e, t), w.UNCHANGED);\n  }\n  get test() {}\n};\nfunction y(e, t) {\n  if (!e || !t) return !1;\n  if (e.level === t.level) return e.row === t.row && e.col === t.col;\n  const s = e.level < t.level,\n    i = s ? e : t,\n    r = s ? t : e,\n    o = 1 << r.level - i.level;\n  return Math.floor(r.row / o) === i.row && Math.floor(r.col / o) === i.col;\n}\ne([o({\n  constructOnly: !0\n})], g.prototype, \"featureStore\", void 0), e([o()], g.prototype, \"tileInfo\", void 0), e([o()], g.prototype, \"extent\", void 0), e([o()], g.prototype, \"maximumByteSize\", void 0), g = e([n(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTileStore\")], g);\nclass v {\n  constructor(e, t, s) {\n    this.data = e, this.objectIds = t, this.attributeKeys = s;\n  }\n}\nclass C {\n  constructor(e, t, s) {\n    this.level = e, this.row = t, this.col = s, this.isLeaf = !1, this.extent = null, this.children = [null, null, null, null];\n  }\n  get hasChildren() {\n    return !this.isLeaf && (null != this.children[0] || null != this.children[1] || null != this.children[2] || null != this.children[3]);\n  }\n}\nclass S {\n  constructor(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    this.missingTiles = t, this.fullArea = 0, this.coveredArea = 0, this.fullArea = a(e.extent), this.coveredArea = this.fullArea;\n  }\n  prepend(e) {\n    this.missingTiles = e.missingTiles.concat(this.missingTiles), this.coveredArea += e.coveredArea, this.fullArea += e.fullArea;\n  }\n}\nclass E {\n  constructor(e, t, s) {\n    this._tileInfo = e, this._extent = null, this.info = new S(t), null != s && (this._extent = c(s));\n  }\n  addMissing(e, t, s, i) {\n    const r = new _(null, e, t, s);\n    this._tileInfo.updateTileInfo(r, f.ExtrapolateOptions.POWER_OF_TWO), null == r.extent || null != this._extent && !u(this._extent, r.extent) || (this.info.missingTiles.push({\n      data: r,\n      resolution: i\n    }), this.info.coveredArea -= a(r.extent));\n  }\n}\nconst T = .18751;\nvar w;\n!function (e) {\n  e[e.ADDED = 0] = \"ADDED\", e[e.REMOVED = 1] = \"REMOVED\", e[e.UNCHANGED = 2] = \"UNCHANGED\";\n}(w || (w = {}));\nexport { g as FeatureServiceTileStore, S as ProcessResult };","map":{"version":3,"names":["_","e","t","ByteSizeUnit","s","intersection","i","isSubsetOf","r","property","o","subclass","n","create","l","intersects","u","fromExtent","c","area","a","getBoundsOptimizedGeometry","h","BoundsStore","d","f","TileKey","executeQueryForCount","m","FeatureServiceTileCache","p","g","setPriorityOrderByKey","_tiles","_memoryLimitExceeded","featureStore","usedMemory","maximumByteSize","constructor","tileInfo","extent","MEGABYTES","_tileBounds","_refCounts","Map","_tileFeatureCounts","_tmpBoundingRect","add","_referenceFeature","objectId","upsertMany","map","Set","Object","keys","attributes","reduce","_addTileStorage","_applyCacheMemoryLimits","someFromLowestToHighestPriority","_estimateRemoveTileMemoryReduction","_removeTileStorage","objectIds","get","getFeature","estimateFeatureUsedMemory","getAttributesForTile","attributeKeys","destroy","clear","refresh","processEdits","_processEditsDelete","deletedFeatures","concat","updatedFeatures","_processEditsRefetch","addedFeatures","id","set","v","size","_remove","_ref","_unreferenceFeature","w","REMOVED","push","removeManyById","data","delete","values","length","features","hasZ","hasM","geometry","forEachInBounds","has","process","arguments","undefined","S","hasLowerPriority","_createTileTree","_simplify","_collectMissingTiles","debugInfo","Array","from","_ref2","featureCount","getFeatureCount","fetchCount","count","C","level","row","col","updateTileInfo","ExtrapolateOptions","POWER_OF_TWO","y","_populateChildren","isLeaf","children","_mergeChildren","T","_purge","_forEachLeaf","E","_collectMissingTilesRecurse","info","addMissing","hasChildren","ADDED","UNCHANGED","test","Math","floor","constructOnly","prototype","missingTiles","fullArea","coveredArea","prepend","_tileInfo","_extent","resolution","FeatureServiceTileStore","ProcessResult"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileStore.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import t from\"../../../../../core/Accessor.js\";import{ByteSizeUnit as s}from\"../../../../../core/ByteSizeUnit.js\";import\"../../../../../core/has.js\";import{intersection as i,isSubsetOf as r}from\"../../../../../core/SetUtils.js\";import{property as o}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/RandomLCG.js\";import{subclass as n}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{create as l,intersects as u,fromExtent as c,area as a}from\"../../../../../geometry/support/aaBoundingRect.js\";import{getBoundsOptimizedGeometry as h}from\"../../../../../layers/graphics/featureConversionUtils.js\";import{BoundsStore as d}from\"../../../../../layers/graphics/data/BoundsStore.js\";import f from\"../../../../../layers/support/TileInfo.js\";import{TileKey as _}from\"../../../../../layers/support/TileKey.js\";import{executeQueryForCount as m}from\"../../../../../rest/query/operations/query.js\";import{FeatureServiceTileCache as p}from\"./FeatureServiceTileCache.js\";let g=class extends t{setPriorityOrderByKey(e){this._tiles.setPriorityOrderByKey(e)}get _memoryLimitExceeded(){return this.featureStore.usedMemory>=this.maximumByteSize}constructor(e){super(e),this.tileInfo=null,this.extent=null,this.maximumByteSize=10*s.MEGABYTES,this._tileBounds=new d,this._tiles=new p,this._refCounts=new Map,this._tileFeatureCounts=new Map,this._tmpBoundingRect=l()}add(e,t){for(const i of t)this._referenceFeature(i.objectId);const s=this.featureStore.upsertMany(t),r=s.map((e=>new Set(Object.keys(e.attributes)))).reduce(((e,t)=>i(e,t)),new Set(Object.keys(s[0]?.attributes??[]))),o=this._memoryLimitExceeded;this._addTileStorage(e,new Set(s.map((e=>e.objectId))),r),o&&this._applyCacheMemoryLimits()}_applyCacheMemoryLimits(){if(!this._memoryLimitExceeded)return;const{_tiles:e,featureStore:t,maximumByteSize:s}=this;e.someFromLowestToHighestPriority((e=>!this._memoryLimitExceeded||t.usedMemory-this._estimateRemoveTileMemoryReduction(e)<s||(this._removeTileStorage(e),!1)))}_estimateRemoveTileMemoryReduction(e){let t=0;for(const s of e.objectIds){if(1===this._refCounts.get(s)){const e=this.featureStore.getFeature(s);e&&(t+=this.featureStore.estimateFeatureUsedMemory?.(e)??0)}}return t}getAttributesForTile(e){return e?this._tiles.get(e)?.attributeKeys:null}destroy(){this.clear(),this._tileFeatureCounts.clear()}clear(){this.featureStore.clear(),this._tileBounds.clear(),this._tiles.clear(),this._refCounts.clear()}refresh(){this.clear(),this._tileFeatureCounts.clear()}processEdits(e,t,s){return this._processEditsDelete(e.deletedFeatures.concat(e.updatedFeatures)),this._processEditsRefetch(e.addedFeatures.concat(e.updatedFeatures),t,s)}_addTileStorage(e,t,s){const i=e.id;this._tiles.set(i,new v(e,t,s)),this._tileBounds.set(i,e.extent),this._tileFeatureCounts.set(i,t.size)}_remove({id:e}){const t=this._tiles.get(e);t&&this._removeTileStorage(t)}_removeTileStorage(e){const t=[];for(const i of e.objectIds)this._unreferenceFeature(i)===w.REMOVED&&t.push(i);this.featureStore.removeManyById(t);const s=e.data.id;this._tiles.delete(s),this._tileBounds.delete(s)}_processEditsDelete(e){this.featureStore.removeManyById(e);for(const t of this._tiles.values()){for(const s of e)t.objectIds.delete(s);this._tileFeatureCounts.set(t.data.id,t.objectIds.size)}for(const t of e)this._refCounts.delete(t)}async _processEditsRefetch(e,t,s){if(!e.length)return;const i=(await t(e,s)).features,{hasZ:r,hasM:o}=this.featureStore;for(const n of i){const e=h(this._tmpBoundingRect,n.geometry,r,o);null!=e&&this._tileBounds.forEachInBounds(e,(e=>{const t=this._tiles.get(e);this.featureStore.add(n);const s=n.objectId;t.objectIds.has(s)||(t.objectIds.add(s),this._referenceFeature(s),this._tileFeatureCounts.set(t.data.id,t.objectIds.size))}))}}process(e,t=()=>!0,s){if(null==this.tileInfo||!e.extent||null!=this.extent&&!u(c(this.extent,this._tmpBoundingRect),e.extent))return new S(e);if(this._memoryLimitExceeded&&!this._tiles.hasLowerPriority(e.id??\"\"))return new S(e);const i=this.getAttributesForTile(e.id);if(r(s,i))return new S(e);const o=this._createTileTree(e,this.tileInfo);return this._simplify(o,t,null,0,1),this._collectMissingTiles(e,o,this.tileInfo,s)}get debugInfo(){return Array.from(this._tiles.values()).map((({data:e})=>({data:e,featureCount:this._tileFeatureCounts.get(e.id)||0})))}getFeatureCount(e){return this._tileFeatureCounts.get(e.id)??0}async fetchCount(e,t,s,i){const r=this._tileFeatureCounts.get(e.id);if(null!=r)return r;const o=await m(t,s,i);return this._tileFeatureCounts.set(e.id,o.data.count),o.data.count}_createTileTree(e,t){const s=new C(e.level,e.row,e.col);return t.updateTileInfo(s,f.ExtrapolateOptions.POWER_OF_TWO),this._tileBounds.forEachInBounds(e.extent,(i=>{const r=this._tiles.get(i)?.data;r&&y(e,r)&&this._populateChildren(s,r,t,this._tileFeatureCounts.get(r.id)||0)})),s}_populateChildren(e,t,s,i){const r=t.level-e.level-1;if(r<0)return void(e.isLeaf=!0);const o=t.row>>r,n=t.col>>r,l=e.row<<1,u=n-(e.col<<1)+(o-l<<1),c=e.children[u];if(null!=c)this._populateChildren(c,t,s,i);else{const r=new C(e.level+1,o,n);s.updateTileInfo(r,f.ExtrapolateOptions.POWER_OF_TWO),e.children[u]=r,this._populateChildren(r,t,s,i)}}_simplify(e,t,s,i,r){const o=r*r;if(e.isLeaf)return t(this.getFeatureCount(e),r)?0:(this._remove(e),null!=s&&(s.children[i]=null),o);const n=r/2,l=n*n;let u=0;for(let c=0;c<e.children.length;c++){const s=e.children[c];u+=null!=s?this._simplify(s,t,e,c,n):l}return 0===u?this._mergeChildren(e):1-u/o<T&&(this._purge(e),null!=s&&(s.children[i]=null),u=o),u}_mergeChildren(e){const t=new Set;let s;this._forEachLeaf(e,(e=>{const r=this._tiles.get(e.id);if(r){s=s?i(s,r.attributeKeys):new Set(r.attributeKeys);for(const e of r.objectIds)t.has(e)||(t.add(e),this._referenceFeature(e));this._remove(e)}})),this._addTileStorage(e,t,s??new Set),e.isLeaf=!0,e.children[0]=e.children[1]=e.children[2]=e.children[3]=null,this._tileFeatureCounts.set(e.id,t.size)}_forEachLeaf(e,t){for(const s of e.children)null!=s&&(s.isLeaf?t(s):this._forEachLeaf(s,t))}_purge(e){if(null!=e)if(e.isLeaf)this._remove(e);else for(let t=0;t<e.children.length;t++){const s=e.children[t];this._purge(s),e.children[t]=null}}_collectMissingTiles(e,t,s,i){const r=new E(s,e,this.extent);return this._collectMissingTilesRecurse(t,r,1,i),r.info}_collectMissingTilesRecurse(e,t,s,i){const o=this.getAttributesForTile(e.id),n=o&&!r(i,o);if(n&&t.addMissing(e.level,e.row,e.col,s),e.isLeaf)return;if(!e.hasChildren)return void(n||t.addMissing(e.level,e.row,e.col,s));const l=s/2;for(let r=0;r<e.children.length;r++){const s=e.children[r];null==s?t.addMissing(e.level+1,(e.row<<1)+((2&r)>>1),(e.col<<1)+(1&r),l):this._collectMissingTilesRecurse(s,t,l,i)}}_referenceFeature(e){const t=(this._refCounts.get(e)||0)+1;return this._refCounts.set(e,t),1===t?w.ADDED:w.UNCHANGED}_unreferenceFeature(e){const t=(this._refCounts.get(e)||0)-1;return 0===t?(this._refCounts.delete(e),w.REMOVED):(t>0&&this._refCounts.set(e,t),w.UNCHANGED)}get test(){}};function y(e,t){if(!e||!t)return!1;if(e.level===t.level)return e.row===t.row&&e.col===t.col;const s=e.level<t.level,i=s?e:t,r=s?t:e,o=1<<r.level-i.level;return Math.floor(r.row/o)===i.row&&Math.floor(r.col/o)===i.col}e([o({constructOnly:!0})],g.prototype,\"featureStore\",void 0),e([o()],g.prototype,\"tileInfo\",void 0),e([o()],g.prototype,\"extent\",void 0),e([o()],g.prototype,\"maximumByteSize\",void 0),g=e([n(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTileStore\")],g);class v{constructor(e,t,s){this.data=e,this.objectIds=t,this.attributeKeys=s}}class C{constructor(e,t,s){this.level=e,this.row=t,this.col=s,this.isLeaf=!1,this.extent=null,this.children=[null,null,null,null]}get hasChildren(){return!this.isLeaf&&(null!=this.children[0]||null!=this.children[1]||null!=this.children[2]||null!=this.children[3])}}class S{constructor(e,t=[]){this.missingTiles=t,this.fullArea=0,this.coveredArea=0,this.fullArea=a(e.extent),this.coveredArea=this.fullArea}prepend(e){this.missingTiles=e.missingTiles.concat(this.missingTiles),this.coveredArea+=e.coveredArea,this.fullArea+=e.fullArea}}class E{constructor(e,t,s){this._tileInfo=e,this._extent=null,this.info=new S(t),null!=s&&(this._extent=c(s))}addMissing(e,t,s,i){const r=new _(null,e,t,s);this._tileInfo.updateTileInfo(r,f.ExtrapolateOptions.POWER_OF_TWO),null==r.extent||null!=this._extent&&!u(this._extent,r.extent)||(this.info.missingTiles.push({data:r,resolution:i}),this.info.coveredArea-=a(r.extent))}}const T=.18751;var w;!function(e){e[e.ADDED=0]=\"ADDED\",e[e.REMOVED=1]=\"REMOVED\",e[e.UNCHANGED=2]=\"UNCHANGED\"}(w||(w={}));export{g as FeatureServiceTileStore,S as ProcessResult};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}