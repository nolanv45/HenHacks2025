{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { FeatureMatcher as e } from \"./Matcher.js\";\nclass t extends e {\n  constructor(e, t) {\n    super(), this._defaultSymbolSortKey = 0, this._nullResult = null, this._resultsMap = new Map(), this._fields = [], this._fields = e, this._separator = t || \"\";\n  }\n  static async fromMatcherSchema(e, s) {\n    const l = s.expression ? [e.storage.createComputedField({\n        expression: s.expression\n      })] : [s.field ? e.storage.createComputedField({\n        field: s.field\n      }) : null, s.field2 ? e.storage.createComputedField({\n        field: s.field2\n      }) : null, s.field3 ? e.storage.createComputedField({\n        field: s.field3\n      }) : null],\n      r = (await Promise.all(l)).filter(e => !!e),\n      i = new t(r, s.fieldDelimiter),\n      a = await e.createMeshWriters(s.defaultSymbol);\n    i.setDefault(a);\n    const u = await e.createMeshWriters(s.backgroundFill);\n    return i.setBackgroundFill(u), await Promise.all(s.map.map(async (t, s) => {\n      const l = await e.createMeshWriters(t.symbol);\n      \"<Null>\" === t.value ? i.setNullResult(l) : i.add(t.value, l, s + 1);\n    })), i;\n  }\n  setNullResult(e) {\n    this._nullResult = e;\n  }\n  getSortKey(e, t) {\n    const s = this._getValueFromFields(e, t);\n    if (null == s || \"\" === s || \"<Null>\" === s) return 0;\n    const l = this._resultsMap.get(s.toString());\n    return l ? l.sortKey : this._defaultSymbolSortKey;\n  }\n  add(e, t, s) {\n    this._resultsMap.set(e.toString(), {\n      meshWriters: t,\n      sortKey: s\n    }), this._defaultSymbolSortKey = Math.max(this._defaultSymbolSortKey, s + 1);\n  }\n  size() {\n    return super.size() + this._resultsMap.size;\n  }\n  hasArcadeDependency(e) {\n    return this._fields.some(t => t.hasArcadeDependency(e)) || [...this._resultsMap.values()].some(t => t.meshWriters.some(t => t.hasArcadeDependency(e))) || this._nullResult?.some(t => t.hasArcadeDependency(e)) || !1;\n  }\n  doMatch(e, t) {\n    const s = this._getValueFromFields(e, t);\n    if (null !== this._nullResult && (null == s || \"\" === s || \"<Null>\" === s)) return this._nullResult;\n    if (null == s) return null;\n    const l = s.toString();\n    return this._resultsMap.get(l)?.meshWriters;\n  }\n  _getValueFromFields(e, t) {\n    const s = [];\n    for (const l of this._fields) {\n      const r = l.read(e, t);\n      null == r || \"\" === r ? s.push(\"<Null>\") : s.push(r);\n    }\n    return s.join(this._separator);\n  }\n}\nexport { t as MapMatcher };","map":{"version":3,"names":["FeatureMatcher","e","t","constructor","_defaultSymbolSortKey","_nullResult","_resultsMap","Map","_fields","_separator","fromMatcherSchema","s","l","expression","storage","createComputedField","field","field2","field3","r","Promise","all","filter","i","fieldDelimiter","a","createMeshWriters","defaultSymbol","setDefault","u","backgroundFill","setBackgroundFill","map","symbol","value","setNullResult","add","getSortKey","_getValueFromFields","get","toString","sortKey","set","meshWriters","Math","max","size","hasArcadeDependency","some","values","doMatch","read","push","join","MapMatcher"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/engine/webgl/util/MapMatcher.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{FeatureMatcher as e}from\"./Matcher.js\";class t extends e{constructor(e,t){super(),this._defaultSymbolSortKey=0,this._nullResult=null,this._resultsMap=new Map,this._fields=[],this._fields=e,this._separator=t||\"\"}static async fromMatcherSchema(e,s){const l=s.expression?[e.storage.createComputedField({expression:s.expression})]:[s.field?e.storage.createComputedField({field:s.field}):null,s.field2?e.storage.createComputedField({field:s.field2}):null,s.field3?e.storage.createComputedField({field:s.field3}):null],r=(await Promise.all(l)).filter((e=>!!e)),i=new t(r,s.fieldDelimiter),a=await e.createMeshWriters(s.defaultSymbol);i.setDefault(a);const u=await e.createMeshWriters(s.backgroundFill);return i.setBackgroundFill(u),await Promise.all(s.map.map((async(t,s)=>{const l=await e.createMeshWriters(t.symbol);\"<Null>\"===t.value?i.setNullResult(l):i.add(t.value,l,s+1)}))),i}setNullResult(e){this._nullResult=e}getSortKey(e,t){const s=this._getValueFromFields(e,t);if(null==s||\"\"===s||\"<Null>\"===s)return 0;const l=this._resultsMap.get(s.toString());return l?l.sortKey:this._defaultSymbolSortKey}add(e,t,s){this._resultsMap.set(e.toString(),{meshWriters:t,sortKey:s}),this._defaultSymbolSortKey=Math.max(this._defaultSymbolSortKey,s+1)}size(){return super.size()+this._resultsMap.size}hasArcadeDependency(e){return this._fields.some((t=>t.hasArcadeDependency(e)))||[...this._resultsMap.values()].some((t=>t.meshWriters.some((t=>t.hasArcadeDependency(e)))))||this._nullResult?.some((t=>t.hasArcadeDependency(e)))||!1}doMatch(e,t){const s=this._getValueFromFields(e,t);if(null!==this._nullResult&&(null==s||\"\"===s||\"<Null>\"===s))return this._nullResult;if(null==s)return null;const l=s.toString();return this._resultsMap.get(l)?.meshWriters}_getValueFromFields(e,t){const s=[];for(const l of this._fields){const r=l.read(e,t);null==r||\"\"===r?s.push(\"<Null>\"):s.push(r)}return s.join(this._separator)}}export{t as MapMatcher};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}