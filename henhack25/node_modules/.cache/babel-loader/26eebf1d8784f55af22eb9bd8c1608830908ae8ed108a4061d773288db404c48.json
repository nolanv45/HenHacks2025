{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from \"../../request.js\";\nimport t from \"../../core/Error.js\";\nimport { queryAllJSON as r } from \"../../layers/support/featureQueryAll.js\";\nimport a from \"../../portal/PortalItem.js\";\nimport o from \"../../rest/support/FeatureSet.js\";\nasync function n(e, t) {\n  const a = e.layers,\n    n = e.layerInfos,\n    l = e.returnGeometry || !1,\n    i = e.outSpatialReference;\n  await Promise.all(a.map(async e => {\n    await e.load();\n  }));\n  return (await Promise.all(a.map(async e => {\n    const a = n.find(t => t.layerUrl === e.parsedUrl?.path);\n    if (!a?.objectIds?.length) return {\n      layer: e,\n      featureSet: void 0\n    };\n    const s = e.createQuery();\n    s.returnGeometry = l, s.outFields = a.outFields || [\"*\"], s.outSpatialReference = i, s.gdbVersion = e.gdbVersion, s.objectIds = a.objectIds, t && (s.where = \"1=1\");\n    const p = o.fromJSON(await r(e, s));\n    return p.features.forEach(t => {\n      t.layer = e;\n    }), {\n      layer: e,\n      featureSet: p\n    };\n  }))).filter(e => void 0 !== e.featureSet);\n}\nasync function l(e, t) {\n  if (\"Utility Network Layer\" === e) {\n    const {\n      default: e\n    } = await import(\"../UtilityNetwork.js\");\n    return new e({\n      layerUrl: t\n    });\n  }\n  return null;\n}\nasync function i(r) {\n  let o = \"portalItem\" in r ? r : {\n    portalItem: r\n  };\n  !o.portalItem || o.portalItem instanceof a || (o = {\n    ...o,\n    portalItem: new a(o.portalItem)\n  });\n  const n = o.portalItem;\n  if (await n.load(), \"Feature Service\" !== n.type) throw new t(\"portal:unknown-item-type\", \"Unknown item type '${type}'\", {\n    type: n.type\n  });\n  const i = n.url,\n    s = await e(i, {\n      responseType: \"json\",\n      query: {\n        f: \"json\"\n      }\n    }),\n    p = \"Network Layer\";\n  if (s.data.type?.includes(p)) return l(s.data.type, i);\n  if (s.data.layers) {\n    const e = s.data.layers.find(e => e.type.includes(p));\n    if (e) {\n      const t = `${i}/${e.id}`;\n      return l(e.type, t);\n    }\n  }\n  return null;\n}\nexport { n as getFeaturesFromLayers, i as networkFromPortalItem };","map":{"version":3,"names":["e","t","queryAllJSON","r","a","o","n","layers","layerInfos","l","returnGeometry","i","outSpatialReference","Promise","all","map","load","find","layerUrl","parsedUrl","path","objectIds","length","layer","featureSet","s","createQuery","outFields","gdbVersion","where","p","fromJSON","features","forEach","filter","default","portalItem","type","url","responseType","query","f","data","includes","id","getFeaturesFromLayers","networkFromPortalItem"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/networks/support/utils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import t from\"../../core/Error.js\";import{queryAllJSON as r}from\"../../layers/support/featureQueryAll.js\";import a from\"../../portal/PortalItem.js\";import o from\"../../rest/support/FeatureSet.js\";async function n(e,t){const a=e.layers,n=e.layerInfos,l=e.returnGeometry||!1,i=e.outSpatialReference;await Promise.all(a.map((async e=>{await e.load()})));return(await Promise.all(a.map((async e=>{const a=n.find((t=>t.layerUrl===e.parsedUrl?.path));if(!a?.objectIds?.length)return{layer:e,featureSet:void 0};const s=e.createQuery();s.returnGeometry=l,s.outFields=a.outFields||[\"*\"],s.outSpatialReference=i,s.gdbVersion=e.gdbVersion,s.objectIds=a.objectIds,t&&(s.where=\"1=1\");const p=o.fromJSON(await r(e,s));return p.features.forEach((t=>{t.layer=e})),{layer:e,featureSet:p}})))).filter((e=>void 0!==e.featureSet))}async function l(e,t){if(\"Utility Network Layer\"===e){const{default:e}=await import(\"../UtilityNetwork.js\");return new e({layerUrl:t})}return null}async function i(r){let o=\"portalItem\"in r?r:{portalItem:r};!o.portalItem||o.portalItem instanceof a||(o={...o,portalItem:new a(o.portalItem)});const n=o.portalItem;if(await n.load(),\"Feature Service\"!==n.type)throw new t(\"portal:unknown-item-type\",\"Unknown item type '${type}'\",{type:n.type});const i=n.url,s=await e(i,{responseType:\"json\",query:{f:\"json\"}}),p=\"Network Layer\";if(s.data.type?.includes(p))return l(s.data.type,i);if(s.data.layers){const e=s.data.layers.find((e=>e.type.includes(p)));if(e){const t=`${i}/${e.id}`;return l(e.type,t)}}return null}export{n as getFeaturesFromLayers,i as networkFromPortalItem};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}