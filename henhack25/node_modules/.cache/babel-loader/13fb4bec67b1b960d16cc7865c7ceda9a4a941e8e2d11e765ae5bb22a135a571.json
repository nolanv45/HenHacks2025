{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { colorGamma as e } from \"../../../../colorUtils.js\";\nimport { adjustStaticAGOUrl as r } from \"../../../../core/devEnvironmentUtils.js\";\nimport { hasScaling as t } from \"../../../../core/mathUtils.js\";\nimport { normalFromMat4 as o, fromMat4 as s } from \"../../../../core/libs/gl-matrix-2/math/mat3.js\";\nimport { create as i } from \"../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";\nimport { invert as n } from \"../../../../core/libs/gl-matrix-2/math/mat4.js\";\nimport { create as l } from \"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";\nimport { ONES as a } from \"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";\nimport { t as u, d as c, E as m, l as f, n as d, m as p } from \"../../../../chunks/vec32.js\";\nimport { create as g } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { empty as x, expandWithVec3 as T } from \"../../../../geometry/support/aaBoundingBox.js\";\nimport { newFloatArray as b } from \"../../../../geometry/support/FloatArray.js\";\nimport { BufferViewVec4f as h, BufferViewVec4u8 as y, BufferViewVec4u16 as w, BufferViewVec3f as R, BufferViewVec3u8 as v, BufferViewVec3u16 as j } from \"../../../../geometry/support/buffer/BufferView.js\";\nimport { t as B, b as S, n as M, f as F } from \"../../../../chunks/vec3.js\";\nimport { t as A, b as E } from \"../../../../chunks/vec4.js\";\nimport { a as I } from \"../../../../chunks/vec2.js\";\nimport { DefaultLoadingContext as L } from \"../../glTF/DefaultLoadingContext.js\";\nimport { convertPrimitiveToTriangles as C } from \"../../glTF/internal/indexUtils.js\";\nimport { isEncodedMeshTexture as O } from \"../../glTF/internal/resourceUtils.js\";\nimport { getTransformMatrix as P } from \"../../glTF/internal/TextureTransformUtils.js\";\nimport { ProcessedObjectResource as U } from \"./ProcessedObjectResource.js\";\nimport { load as k, processLoadResult as N } from \"./wosrLoader.js\";\nimport { NormalType as V } from \"../../webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl.js\";\nimport { Attribute as D } from \"../../webgl-engine/lib/Attribute.js\";\nimport { AlphaDiscardMode as _, DepthTestFunction as q, CullFaceOptions as G } from \"../../webgl-engine/lib/basicInterfaces.js\";\nimport { Geometry as W } from \"../../webgl-engine/lib/Geometry.js\";\nimport { Texture as H } from \"../../webgl-engine/lib/Texture.js\";\nimport { VertexAttribute as $ } from \"../../webgl-engine/lib/VertexAttribute.js\";\nimport { DefaultMaterial as z } from \"../../webgl-engine/materials/DefaultMaterial.js\";\nimport { esriSymbologyMRRFactors as K, advancedMRRFactors as Q, useSchematicPBR as J, schematicMRRFactors as X } from \"../../webgl-engine/materials/pbrUtils.js\";\nasync function Y(e, t) {\n  const o = Z(r(e));\n  if (\"wosr\" === o.fileType) {\n    const e = await (t.cache ? t.cache.loadWOSR(o.url, t) : k(o.url, t)),\n      {\n        engineResources: r,\n        referenceBoundingBox: s\n      } = N(e, t);\n    return {\n      lods: r,\n      referenceBoundingBox: s,\n      isEsriSymbolResource: !1,\n      isWosr: !0\n    };\n  }\n  let s;\n  if (t.cache) s = await t.cache.loadGLTF(o.url, t, !!t.usePBR);else {\n    const {\n      loadGLTF: e\n    } = await import(\"../../glTF/loader.js\");\n    s = await e(new L(t.streamDataRequester), o.url, t, t.usePBR);\n  }\n  const i = s.model.meta?.ESRI_proxyEllipsoid,\n    n = s.meta.isEsriSymbolResource && null != i && \"EsriRealisticTreesStyle\" === s.meta.ESRI_webstyle;\n  n && !s.customMeta.esriTreeRendering && (s.customMeta.esriTreeRendering = !0, ie(s, i));\n  const l = !!t.usePBR,\n    a = s.meta.isEsriSymbolResource ? {\n      usePBR: l,\n      isSchematic: !1,\n      treeRendering: n,\n      mrrFactors: K\n    } : {\n      usePBR: l,\n      isSchematic: !1,\n      treeRendering: !1,\n      mrrFactors: Q\n    },\n    u = {\n      ...t.materialParameters,\n      treeRendering: n\n    },\n    {\n      engineResources: c,\n      referenceBoundingBox: m\n    } = ee(s, a, u, t, o.specifiedLodIndex);\n  return {\n    lods: c,\n    referenceBoundingBox: m,\n    isEsriSymbolResource: s.meta.isEsriSymbolResource,\n    isWosr: !1\n  };\n}\nfunction Z(e) {\n  const r = e.match(/(.*\\.(gltf|glb))(\\?lod=([0-9]+))?$/);\n  if (r) return {\n    fileType: \"gltf\",\n    url: r[1],\n    specifiedLodIndex: null != r[4] ? Number(r[4]) : null\n  };\n  return e.match(/(.*\\.(json|json\\.gz))$/) ? {\n    fileType: \"wosr\",\n    url: e,\n    specifiedLodIndex: null\n  } : {\n    fileType: \"unknown\",\n    url: e,\n    specifiedLodIndex: null\n  };\n}\nfunction ee(e, r, t, o, s) {\n  const i = e.model,\n    n = new Array(),\n    l = new Map(),\n    a = new Map(),\n    u = i.lods.length,\n    c = x();\n  return i.lods.forEach((e, m) => {\n    const f = !0 === o.skipHighLods && (u > 1 && 0 === m || u > 3 && 1 === m) || !1 === o.skipHighLods && null != s && m !== s;\n    if (f && 0 !== m) return;\n    const d = new U(e.name, e.lodThreshold, [0, 0, 0]);\n    e.parts.forEach(e => {\n      const s = f ? new z({}, o) : re(i, e, d, r, t, l, a, o),\n        {\n          geometry: n,\n          vertexCount: u\n        } = te(e, s ?? new z({}, o)),\n        p = n.boundingInfo;\n      null != p && 0 === m && (T(c, p.bbMin), T(c, p.bbMax)), null != s && (d.stageResources.geometries.push(n), d.numberOfVertices += u);\n    }), f || n.push(d);\n  }), {\n    engineResources: n,\n    referenceBoundingBox: c\n  };\n}\nfunction re(r, t, o, s, i, n, l, u) {\n  const c = r.materials.get(t.material);\n  if (null == c) return null;\n  const {\n      normal: m,\n      color: f,\n      texCoord0: d,\n      tangent: p\n    } = t.attributes,\n    g = t.material + (m ? \"_normal\" : \"\") + (f ? \"_color\" : \"\") + (d ? \"_texCoord0\" : \"\") + (p ? \"_tangent\" : \"\"),\n    x = null != t.attributes.texCoord0,\n    T = null != t.attributes.normal,\n    b = se(c.alphaMode);\n  if (!n.has(g)) {\n    if (x) {\n      const e = function (e) {\n        let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n        if (null != e && !l.has(e)) {\n          const o = r.textures.get(e);\n          if (o) {\n            const r = o.data;\n            l.set(e, new H(O(r) ? r.data : r, {\n              ...o.parameters,\n              preMultiplyAlpha: !O(r) && t,\n              encoding: O(r) ? r.encoding : void 0\n            }));\n          }\n        }\n      };\n      e(c.colorTexture, b !== _.Opaque), e(c.normalTexture), e(c.occlusionTexture), e(c.emissiveTexture), e(c.metallicRoughnessTexture);\n    }\n    const o = 1 / e,\n      m = c.color[0] ** o,\n      f = c.color[1] ** o,\n      d = c.color[2] ** o,\n      p = c.emissiveFactor[0] ** o,\n      h = c.emissiveFactor[1] ** o,\n      y = c.emissiveFactor[2] ** o,\n      w = null != c.colorTexture && x ? l.get(c.colorTexture) : null,\n      R = J(c),\n      v = null != c.normalTextureTransform?.scale ? c.normalTextureTransform?.scale : a;\n    n.set(g, new z({\n      ...s,\n      transparent: b === _.Blend,\n      customDepthTest: q.Lequal,\n      textureAlphaMode: b,\n      textureAlphaCutoff: c.alphaCutoff,\n      diffuse: [m, f, d],\n      ambient: [m, f, d],\n      opacity: c.opacity,\n      doubleSided: c.doubleSided,\n      doubleSidedType: \"winding-order\",\n      cullFace: c.doubleSided ? G.None : G.Back,\n      hasVertexColors: !!t.attributes.color,\n      hasVertexTangents: !!t.attributes.tangent,\n      normalType: T ? V.Attribute : V.ScreenDerivative,\n      castShadows: !0,\n      receiveShadows: c.receiveShadows,\n      receiveAmbientOcclusion: c.receiveAmbientOcclustion,\n      textureId: null != w ? w.id : void 0,\n      colorMixMode: c.colorMixMode,\n      normalTextureId: null != c.normalTexture && x ? l.get(c.normalTexture).id : void 0,\n      textureAlphaPremultiplied: null != w && !!w.parameters.preMultiplyAlpha,\n      occlusionTextureId: null != c.occlusionTexture && x ? l.get(c.occlusionTexture).id : void 0,\n      emissiveTextureId: null != c.emissiveTexture && x ? l.get(c.emissiveTexture).id : void 0,\n      metallicRoughnessTextureId: null != c.metallicRoughnessTexture && x ? l.get(c.metallicRoughnessTexture).id : void 0,\n      emissiveFactor: [p, h, y],\n      mrrFactors: R ? X : [c.metallicFactor, c.roughnessFactor, s.mrrFactors[2]],\n      isSchematic: R,\n      colorTextureTransformMatrix: P(c.colorTextureTransform),\n      normalTextureTransformMatrix: P(c.normalTextureTransform),\n      scale: [v[0], v[1]],\n      occlusionTextureTransformMatrix: P(c.occlusionTextureTransform),\n      emissiveTextureTransformMatrix: P(c.emissiveTextureTransform),\n      metallicRoughnessTextureTransformMatrix: P(c.metallicRoughnessTextureTransform),\n      ...i\n    }, u));\n  }\n  const h = n.get(g);\n  if (o.stageResources.materials.push(h), x) {\n    const e = e => {\n      null != e && o.stageResources.textures.push(l.get(e));\n    };\n    e(c.colorTexture), e(c.normalTexture), e(c.occlusionTexture), e(c.emissiveTexture), e(c.metallicRoughnessTexture);\n  }\n  return h;\n}\nfunction te(e, r) {\n  const i = e.attributes.position.count,\n    n = C(e.indices || i, e.primitiveType),\n    l = b(3 * i),\n    {\n      typedBuffer: a,\n      typedBufferStride: u\n    } = e.attributes.position;\n  B(l, a, e.transform, 3, u);\n  const c = [[$.POSITION, new D(l, n, 3, !0)]];\n  if (null != e.attributes.normal) {\n    const r = b(3 * i),\n      {\n        typedBuffer: s,\n        typedBufferStride: l\n      } = e.attributes.normal;\n    o(oe, e.transform), S(r, s, oe, 3, l), t(oe) && M(r, r), c.push([$.NORMAL, new D(r, n, 3, !0)]);\n  }\n  if (null != e.attributes.tangent) {\n    const r = b(4 * i),\n      {\n        typedBuffer: o,\n        typedBufferStride: l\n      } = e.attributes.tangent;\n    s(oe, e.transform), A(r, o, oe, 4, l), t(oe) && M(r, r, 4), c.push([$.TANGENT, new D(r, n, 4, !0)]);\n  }\n  if (null != e.attributes.texCoord0) {\n    const r = b(2 * i),\n      {\n        typedBuffer: t,\n        typedBufferStride: o\n      } = e.attributes.texCoord0;\n    I(r, t, 2, o), c.push([$.UV0, new D(r, n, 2, !0)]);\n  }\n  const m = e.attributes.color;\n  if (null != m) {\n    const r = new Uint8Array(4 * i);\n    4 === m.elementCount ? m instanceof h ? E(r, m, 1, 255) : (m instanceof y || m instanceof w) && E(r, m, 1 / 255, 255) : (r.fill(255), m instanceof R ? F(r, m.typedBuffer, 1, 255, 4, m.typedBufferStride) : (e.attributes.color instanceof v || e.attributes.color instanceof j) && F(r, m.typedBuffer, 1 / 255, 255, 4, e.attributes.color.typedBufferStride)), c.push([$.COLOR, new D(r, n, 4, !0)]);\n  }\n  return {\n    geometry: new W(r, c),\n    vertexCount: i\n  };\n}\nconst oe = i();\nfunction se(e) {\n  switch (e) {\n    case \"BLEND\":\n      return _.Blend;\n    case \"MASK\":\n      return _.Mask;\n    case \"OPAQUE\":\n    case null:\n    case void 0:\n      return _.Opaque;\n  }\n}\nfunction ie(r, t) {\n  for (let o = 0; o < r.model.lods.length; ++o) {\n    const s = r.model.lods[o];\n    for (const i of s.parts) {\n      const s = i.attributes.normal;\n      if (null == s) return;\n      const a = i.attributes.position,\n        x = a.count,\n        T = g(),\n        b = g(),\n        y = g(),\n        w = new Float32Array(4 * x),\n        v = new Float32Array(3 * x),\n        j = n(l(), i.transform);\n      let B = 0,\n        S = 0;\n      for (let n = 0; n < x; n++) {\n        a.getVec(n, b), s.getVec(n, T), u(b, b, i.transform), c(y, b, t.center), m(y, y, t.radius);\n        const l = y[2],\n          g = f(y),\n          x = Math.min(.45 + .55 * g * g, 1) ** e;\n        m(y, y, t.radius), null !== j && u(y, y, j), d(y, y), o + 1 !== r.model.lods.length && r.model.lods.length > 1 && p(y, y, T, l > -1 ? .2 : Math.min(-4 * l - 3.8, 1)), v[B] = y[0], v[B + 1] = y[1], v[B + 2] = y[2], B += 3, w[S] = x, w[S + 1] = x, w[S + 2] = x, w[S + 3] = 1, S += 4;\n      }\n      i.attributes.normal = new R(v), i.attributes.color = new h(w);\n    }\n  }\n}\nexport { Y as fetch, Z as parseUrl };","map":{"version":3,"names":["colorGamma","e","adjustStaticAGOUrl","r","hasScaling","t","normalFromMat4","o","fromMat4","s","create","i","invert","n","l","ONES","a","u","d","c","E","m","f","p","g","empty","x","expandWithVec3","T","newFloatArray","b","BufferViewVec4f","h","BufferViewVec4u8","y","BufferViewVec4u16","w","BufferViewVec3f","R","BufferViewVec3u8","v","BufferViewVec3u16","j","B","S","M","F","A","I","DefaultLoadingContext","L","convertPrimitiveToTriangles","C","isEncodedMeshTexture","O","getTransformMatrix","P","ProcessedObjectResource","U","load","k","processLoadResult","N","NormalType","V","Attribute","D","AlphaDiscardMode","_","DepthTestFunction","q","CullFaceOptions","G","Geometry","W","Texture","H","VertexAttribute","$","DefaultMaterial","z","esriSymbologyMRRFactors","K","advancedMRRFactors","Q","useSchematicPBR","J","schematicMRRFactors","X","Y","Z","fileType","cache","loadWOSR","url","engineResources","referenceBoundingBox","lods","isEsriSymbolResource","isWosr","loadGLTF","usePBR","streamDataRequester","model","meta","ESRI_proxyEllipsoid","ESRI_webstyle","customMeta","esriTreeRendering","ie","isSchematic","treeRendering","mrrFactors","materialParameters","ee","specifiedLodIndex","match","Number","Array","Map","length","forEach","skipHighLods","name","lodThreshold","parts","re","geometry","vertexCount","te","boundingInfo","bbMin","bbMax","stageResources","geometries","push","numberOfVertices","materials","get","material","normal","color","texCoord0","tangent","attributes","se","alphaMode","has","arguments","undefined","textures","data","set","parameters","preMultiplyAlpha","encoding","colorTexture","Opaque","normalTexture","occlusionTexture","emissiveTexture","metallicRoughnessTexture","emissiveFactor","normalTextureTransform","scale","transparent","Blend","customDepthTest","Lequal","textureAlphaMode","textureAlphaCutoff","alphaCutoff","diffuse","ambient","opacity","doubleSided","doubleSidedType","cullFace","None","Back","hasVertexColors","hasVertexTangents","normalType","ScreenDerivative","castShadows","receiveShadows","receiveAmbientOcclusion","receiveAmbientOcclustion","textureId","id","colorMixMode","normalTextureId","textureAlphaPremultiplied","occlusionTextureId","emissiveTextureId","metallicRoughnessTextureId","metallicFactor","roughnessFactor","colorTextureTransformMatrix","colorTextureTransform","normalTextureTransformMatrix","occlusionTextureTransformMatrix","occlusionTextureTransform","emissiveTextureTransformMatrix","emissiveTextureTransform","metallicRoughnessTextureTransformMatrix","metallicRoughnessTextureTransform","position","count","indices","primitiveType","typedBuffer","typedBufferStride","transform","POSITION","oe","NORMAL","TANGENT","UV0","Uint8Array","elementCount","fill","COLOR","Mask","Float32Array","getVec","center","radius","Math","min","fetch","parseUrl"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/3d/layers/graphics/objectResourceUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{colorGamma as e}from\"../../../../colorUtils.js\";import{adjustStaticAGOUrl as r}from\"../../../../core/devEnvironmentUtils.js\";import{hasScaling as t}from\"../../../../core/mathUtils.js\";import{normalFromMat4 as o,fromMat4 as s}from\"../../../../core/libs/gl-matrix-2/math/mat3.js\";import{create as i}from\"../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{invert as n}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as l}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{ONES as a}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{t as u,d as c,E as m,l as f,n as d,m as p}from\"../../../../chunks/vec32.js\";import{create as g}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{empty as x,expandWithVec3 as T}from\"../../../../geometry/support/aaBoundingBox.js\";import{newFloatArray as b}from\"../../../../geometry/support/FloatArray.js\";import{BufferViewVec4f as h,BufferViewVec4u8 as y,BufferViewVec4u16 as w,BufferViewVec3f as R,BufferViewVec3u8 as v,BufferViewVec3u16 as j}from\"../../../../geometry/support/buffer/BufferView.js\";import{t as B,b as S,n as M,f as F}from\"../../../../chunks/vec3.js\";import{t as A,b as E}from\"../../../../chunks/vec4.js\";import{a as I}from\"../../../../chunks/vec2.js\";import{DefaultLoadingContext as L}from\"../../glTF/DefaultLoadingContext.js\";import{convertPrimitiveToTriangles as C}from\"../../glTF/internal/indexUtils.js\";import{isEncodedMeshTexture as O}from\"../../glTF/internal/resourceUtils.js\";import{getTransformMatrix as P}from\"../../glTF/internal/TextureTransformUtils.js\";import{ProcessedObjectResource as U}from\"./ProcessedObjectResource.js\";import{load as k,processLoadResult as N}from\"./wosrLoader.js\";import{NormalType as V}from\"../../webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl.js\";import{Attribute as D}from\"../../webgl-engine/lib/Attribute.js\";import{AlphaDiscardMode as _,DepthTestFunction as q,CullFaceOptions as G}from\"../../webgl-engine/lib/basicInterfaces.js\";import{Geometry as W}from\"../../webgl-engine/lib/Geometry.js\";import{Texture as H}from\"../../webgl-engine/lib/Texture.js\";import{VertexAttribute as $}from\"../../webgl-engine/lib/VertexAttribute.js\";import{DefaultMaterial as z}from\"../../webgl-engine/materials/DefaultMaterial.js\";import{esriSymbologyMRRFactors as K,advancedMRRFactors as Q,useSchematicPBR as J,schematicMRRFactors as X}from\"../../webgl-engine/materials/pbrUtils.js\";async function Y(e,t){const o=Z(r(e));if(\"wosr\"===o.fileType){const e=await(t.cache?t.cache.loadWOSR(o.url,t):k(o.url,t)),{engineResources:r,referenceBoundingBox:s}=N(e,t);return{lods:r,referenceBoundingBox:s,isEsriSymbolResource:!1,isWosr:!0}}let s;if(t.cache)s=await t.cache.loadGLTF(o.url,t,!!t.usePBR);else{const{loadGLTF:e}=await import(\"../../glTF/loader.js\");s=await e(new L(t.streamDataRequester),o.url,t,t.usePBR)}const i=s.model.meta?.ESRI_proxyEllipsoid,n=s.meta.isEsriSymbolResource&&null!=i&&\"EsriRealisticTreesStyle\"===s.meta.ESRI_webstyle;n&&!s.customMeta.esriTreeRendering&&(s.customMeta.esriTreeRendering=!0,ie(s,i));const l=!!t.usePBR,a=s.meta.isEsriSymbolResource?{usePBR:l,isSchematic:!1,treeRendering:n,mrrFactors:K}:{usePBR:l,isSchematic:!1,treeRendering:!1,mrrFactors:Q},u={...t.materialParameters,treeRendering:n},{engineResources:c,referenceBoundingBox:m}=ee(s,a,u,t,o.specifiedLodIndex);return{lods:c,referenceBoundingBox:m,isEsriSymbolResource:s.meta.isEsriSymbolResource,isWosr:!1}}function Z(e){const r=e.match(/(.*\\.(gltf|glb))(\\?lod=([0-9]+))?$/);if(r)return{fileType:\"gltf\",url:r[1],specifiedLodIndex:null!=r[4]?Number(r[4]):null};return e.match(/(.*\\.(json|json\\.gz))$/)?{fileType:\"wosr\",url:e,specifiedLodIndex:null}:{fileType:\"unknown\",url:e,specifiedLodIndex:null}}function ee(e,r,t,o,s){const i=e.model,n=new Array,l=new Map,a=new Map,u=i.lods.length,c=x();return i.lods.forEach(((e,m)=>{const f=!0===o.skipHighLods&&(u>1&&0===m||u>3&&1===m)||!1===o.skipHighLods&&null!=s&&m!==s;if(f&&0!==m)return;const d=new U(e.name,e.lodThreshold,[0,0,0]);e.parts.forEach((e=>{const s=f?new z({},o):re(i,e,d,r,t,l,a,o),{geometry:n,vertexCount:u}=te(e,s??new z({},o)),p=n.boundingInfo;null!=p&&0===m&&(T(c,p.bbMin),T(c,p.bbMax)),null!=s&&(d.stageResources.geometries.push(n),d.numberOfVertices+=u)})),f||n.push(d)})),{engineResources:n,referenceBoundingBox:c}}function re(r,t,o,s,i,n,l,u){const c=r.materials.get(t.material);if(null==c)return null;const{normal:m,color:f,texCoord0:d,tangent:p}=t.attributes,g=t.material+(m?\"_normal\":\"\")+(f?\"_color\":\"\")+(d?\"_texCoord0\":\"\")+(p?\"_tangent\":\"\"),x=null!=t.attributes.texCoord0,T=null!=t.attributes.normal,b=se(c.alphaMode);if(!n.has(g)){if(x){const e=(e,t=!1)=>{if(null!=e&&!l.has(e)){const o=r.textures.get(e);if(o){const r=o.data;l.set(e,new H(O(r)?r.data:r,{...o.parameters,preMultiplyAlpha:!O(r)&&t,encoding:O(r)?r.encoding:void 0}))}}};e(c.colorTexture,b!==_.Opaque),e(c.normalTexture),e(c.occlusionTexture),e(c.emissiveTexture),e(c.metallicRoughnessTexture)}const o=1/e,m=c.color[0]**o,f=c.color[1]**o,d=c.color[2]**o,p=c.emissiveFactor[0]**o,h=c.emissiveFactor[1]**o,y=c.emissiveFactor[2]**o,w=null!=c.colorTexture&&x?l.get(c.colorTexture):null,R=J(c),v=null!=c.normalTextureTransform?.scale?c.normalTextureTransform?.scale:a;n.set(g,new z({...s,transparent:b===_.Blend,customDepthTest:q.Lequal,textureAlphaMode:b,textureAlphaCutoff:c.alphaCutoff,diffuse:[m,f,d],ambient:[m,f,d],opacity:c.opacity,doubleSided:c.doubleSided,doubleSidedType:\"winding-order\",cullFace:c.doubleSided?G.None:G.Back,hasVertexColors:!!t.attributes.color,hasVertexTangents:!!t.attributes.tangent,normalType:T?V.Attribute:V.ScreenDerivative,castShadows:!0,receiveShadows:c.receiveShadows,receiveAmbientOcclusion:c.receiveAmbientOcclustion,textureId:null!=w?w.id:void 0,colorMixMode:c.colorMixMode,normalTextureId:null!=c.normalTexture&&x?l.get(c.normalTexture).id:void 0,textureAlphaPremultiplied:null!=w&&!!w.parameters.preMultiplyAlpha,occlusionTextureId:null!=c.occlusionTexture&&x?l.get(c.occlusionTexture).id:void 0,emissiveTextureId:null!=c.emissiveTexture&&x?l.get(c.emissiveTexture).id:void 0,metallicRoughnessTextureId:null!=c.metallicRoughnessTexture&&x?l.get(c.metallicRoughnessTexture).id:void 0,emissiveFactor:[p,h,y],mrrFactors:R?X:[c.metallicFactor,c.roughnessFactor,s.mrrFactors[2]],isSchematic:R,colorTextureTransformMatrix:P(c.colorTextureTransform),normalTextureTransformMatrix:P(c.normalTextureTransform),scale:[v[0],v[1]],occlusionTextureTransformMatrix:P(c.occlusionTextureTransform),emissiveTextureTransformMatrix:P(c.emissiveTextureTransform),metallicRoughnessTextureTransformMatrix:P(c.metallicRoughnessTextureTransform),...i},u))}const h=n.get(g);if(o.stageResources.materials.push(h),x){const e=e=>{null!=e&&o.stageResources.textures.push(l.get(e))};e(c.colorTexture),e(c.normalTexture),e(c.occlusionTexture),e(c.emissiveTexture),e(c.metallicRoughnessTexture)}return h}function te(e,r){const i=e.attributes.position.count,n=C(e.indices||i,e.primitiveType),l=b(3*i),{typedBuffer:a,typedBufferStride:u}=e.attributes.position;B(l,a,e.transform,3,u);const c=[[$.POSITION,new D(l,n,3,!0)]];if(null!=e.attributes.normal){const r=b(3*i),{typedBuffer:s,typedBufferStride:l}=e.attributes.normal;o(oe,e.transform),S(r,s,oe,3,l),t(oe)&&M(r,r),c.push([$.NORMAL,new D(r,n,3,!0)])}if(null!=e.attributes.tangent){const r=b(4*i),{typedBuffer:o,typedBufferStride:l}=e.attributes.tangent;s(oe,e.transform),A(r,o,oe,4,l),t(oe)&&M(r,r,4),c.push([$.TANGENT,new D(r,n,4,!0)])}if(null!=e.attributes.texCoord0){const r=b(2*i),{typedBuffer:t,typedBufferStride:o}=e.attributes.texCoord0;I(r,t,2,o),c.push([$.UV0,new D(r,n,2,!0)])}const m=e.attributes.color;if(null!=m){const r=new Uint8Array(4*i);4===m.elementCount?m instanceof h?E(r,m,1,255):(m instanceof y||m instanceof w)&&E(r,m,1/255,255):(r.fill(255),m instanceof R?F(r,m.typedBuffer,1,255,4,m.typedBufferStride):(e.attributes.color instanceof v||e.attributes.color instanceof j)&&F(r,m.typedBuffer,1/255,255,4,e.attributes.color.typedBufferStride)),c.push([$.COLOR,new D(r,n,4,!0)])}return{geometry:new W(r,c),vertexCount:i}}const oe=i();function se(e){switch(e){case\"BLEND\":return _.Blend;case\"MASK\":return _.Mask;case\"OPAQUE\":case null:case void 0:return _.Opaque}}function ie(r,t){for(let o=0;o<r.model.lods.length;++o){const s=r.model.lods[o];for(const i of s.parts){const s=i.attributes.normal;if(null==s)return;const a=i.attributes.position,x=a.count,T=g(),b=g(),y=g(),w=new Float32Array(4*x),v=new Float32Array(3*x),j=n(l(),i.transform);let B=0,S=0;for(let n=0;n<x;n++){a.getVec(n,b),s.getVec(n,T),u(b,b,i.transform),c(y,b,t.center),m(y,y,t.radius);const l=y[2],g=f(y),x=Math.min(.45+.55*g*g,1)**e;m(y,y,t.radius),null!==j&&u(y,y,j),d(y,y),o+1!==r.model.lods.length&&r.model.lods.length>1&&p(y,y,T,l>-1?.2:Math.min(-4*l-3.8,1)),v[B]=y[0],v[B+1]=y[1],v[B+2]=y[2],B+=3,w[S]=x,w[S+1]=x,w[S+2]=x,w[S+3]=1,S+=4}i.attributes.normal=new R(v),i.attributes.color=new h(w)}}}export{Y as fetch,Z as parseUrl};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}