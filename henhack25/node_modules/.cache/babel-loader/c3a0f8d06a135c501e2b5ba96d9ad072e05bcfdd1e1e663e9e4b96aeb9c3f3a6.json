{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport r from \"../../../../core/Accessor.js\";\nimport { destroyHandle as t } from \"../../../../core/handleUtils.js\";\nimport { removeMaybe as o, abortMaybe as s } from \"../../../../core/maybe.js\";\nimport { isAborted as i } from \"../../../../core/promiseUtils.js\";\nimport { property as a } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/Logger.js\";\nimport \"../../../../core/RandomLCG.js\";\nimport { subclass as n } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { UpdatingHandles as d } from \"../../../../core/support/UpdatingHandles.js\";\nimport { EdgeWorkerHandle as c } from \"../../../3d/webgl-engine/lib/edgeRendering/EdgeWorkerHandle.js\";\nimport { SceneLayerSnappingSourceWorkerHandle as l } from \"./sceneLayerSource/SceneLayerSnappingSourceWorkerHandle.js\";\nlet p = class extends r {\n  get updating() {\n    return this._updatingHandles.updating;\n  }\n  constructor(e) {\n    super(e), this.availability = 1, this._updatingHandles = new d(), this._abortController = new AbortController();\n  }\n  destroy() {\n    this._tracker = o(this._tracker), this._abortController = s(this._abortController), this._updatingHandles.destroy();\n  }\n  initialize() {\n    const {\n        view: e\n      } = this,\n      r = e.resourceController;\n    this._edgeWorker = new c(h(r)), this._workerHandle = new l({\n      renderCoordsHelper: this.view.renderCoordsHelper,\n      schedule: h(r),\n      fetchEdgeLocations: async (e, r) => {\n        if (null == this._tracker) throw new Error(\"tracker-not-initialized\");\n        return this._tracker.fetchEdgeLocations(e, this._edgeWorker, r);\n      }\n    }), this._updatingHandles.addPromise(this._setupLayerView()), this.addHandles([t(this._workerHandle), t(this._edgeWorker)]);\n  }\n  async fetchCandidates(e, r) {\n    return this._workerHandle.fetchCandidates(e, r);\n  }\n  refresh() {}\n  async _setupLayerView() {\n    if (this.destroyed) return;\n    const e = this._abortController?.signal,\n      r = await this.getLayerView();\n    null == r || i(e) || (this._tracker = r.trackSnappingSources({\n      add: (r, t) => {\n        this._updatingHandles.addPromise(this._workerHandle.add({\n          id: r,\n          bounds: t\n        }, e));\n      },\n      remove: r => {\n        this._updatingHandles.addPromise(this._workerHandle.remove({\n          id: r\n        }, e));\n      }\n    }));\n  }\n};\nfunction h(e) {\n  return r => e.immediate.schedule(r);\n}\ne([a({\n  constructOnly: !0\n})], p.prototype, \"getLayerView\", void 0), e([a({\n  constructOnly: !0\n})], p.prototype, \"view\", void 0), e([a({\n  readOnly: !0\n})], p.prototype, \"updating\", null), e([a({\n  readOnly: !0\n})], p.prototype, \"availability\", void 0), p = e([n(\"esri.views.interactive.snapping.featureSources.I3SSnappingSource\")], p);\nexport { p as I3SSnappingSource };","map":{"version":3,"names":["_","e","r","destroyHandle","t","removeMaybe","o","abortMaybe","s","isAborted","i","property","a","subclass","n","UpdatingHandles","d","EdgeWorkerHandle","c","SceneLayerSnappingSourceWorkerHandle","l","p","updating","_updatingHandles","constructor","availability","_abortController","AbortController","destroy","_tracker","initialize","view","resourceController","_edgeWorker","h","_workerHandle","renderCoordsHelper","schedule","fetchEdgeLocations","Error","addPromise","_setupLayerView","addHandles","fetchCandidates","refresh","destroyed","signal","getLayerView","trackSnappingSources","add","id","bounds","remove","immediate","constructOnly","prototype","readOnly","I3SSnappingSource"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/interactive/snapping/featureSources/I3SSnappingSource.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Accessor.js\";import{destroyHandle as t}from\"../../../../core/handleUtils.js\";import{removeMaybe as o,abortMaybe as s}from\"../../../../core/maybe.js\";import{isAborted as i}from\"../../../../core/promiseUtils.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as n}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{UpdatingHandles as d}from\"../../../../core/support/UpdatingHandles.js\";import{EdgeWorkerHandle as c}from\"../../../3d/webgl-engine/lib/edgeRendering/EdgeWorkerHandle.js\";import{SceneLayerSnappingSourceWorkerHandle as l}from\"./sceneLayerSource/SceneLayerSnappingSourceWorkerHandle.js\";let p=class extends r{get updating(){return this._updatingHandles.updating}constructor(e){super(e),this.availability=1,this._updatingHandles=new d,this._abortController=new AbortController}destroy(){this._tracker=o(this._tracker),this._abortController=s(this._abortController),this._updatingHandles.destroy()}initialize(){const{view:e}=this,r=e.resourceController;this._edgeWorker=new c(h(r)),this._workerHandle=new l({renderCoordsHelper:this.view.renderCoordsHelper,schedule:h(r),fetchEdgeLocations:async(e,r)=>{if(null==this._tracker)throw new Error(\"tracker-not-initialized\");return this._tracker.fetchEdgeLocations(e,this._edgeWorker,r)}}),this._updatingHandles.addPromise(this._setupLayerView()),this.addHandles([t(this._workerHandle),t(this._edgeWorker)])}async fetchCandidates(e,r){return this._workerHandle.fetchCandidates(e,r)}refresh(){}async _setupLayerView(){if(this.destroyed)return;const e=this._abortController?.signal,r=await this.getLayerView();null==r||i(e)||(this._tracker=r.trackSnappingSources({add:(r,t)=>{this._updatingHandles.addPromise(this._workerHandle.add({id:r,bounds:t},e))},remove:r=>{this._updatingHandles.addPromise(this._workerHandle.remove({id:r},e))}}))}};function h(e){return r=>e.immediate.schedule(r)}e([a({constructOnly:!0})],p.prototype,\"getLayerView\",void 0),e([a({constructOnly:!0})],p.prototype,\"view\",void 0),e([a({readOnly:!0})],p.prototype,\"updating\",null),e([a({readOnly:!0})],p.prototype,\"availability\",void 0),p=e([n(\"esri.views.interactive.snapping.featureSources.I3SSnappingSource\")],p);export{p as I3SSnappingSource};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}