{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from \"../../../Graphic.js\";\nimport { id as t } from \"../../../kernel.js\";\nimport r from \"../../../request.js\";\nimport i from \"../../Attachment.js\";\nimport s from \"../../Dictionary.js\";\nimport { FeatureSetError as a, FeatureSetErrorCodes as n } from \"../support/errorsupport.js\";\nimport l from \"../support/FeatureSet.js\";\nimport o from \"../support/IdSet.js\";\nimport { defaultMaxRecords as u, stableStringify as d, FeatureServiceDatabaseType as c, IdState as h, extractServiceUrl as p } from \"../support/shared.js\";\nimport { toWhereClause as y, isSingleField as f } from \"../support/sqlUtils.js\";\nimport { decodeStatType as _ } from \"../support/stats.js\";\nimport { createMD5Hash as g, outputTypes as m } from \"../../../core/MD5.js\";\nimport { sqlAnd as R } from \"../../../core/sql.js\";\nimport { fromJSON as w } from \"../../../geometry/support/jsonUtils.js\";\nimport { srToRESTValue as b } from \"../../../geometry/support/spatialReferenceUtils.js\";\nimport S from \"../../../layers/FeatureLayer.js\";\nimport F from \"../../../rest/support/AttachmentQuery.js\";\nimport I from \"../../../rest/support/Query.js\";\nimport D from \"../../../rest/support/StatisticDefinition.js\";\nclass P extends l {\n  constructor(e) {\n    super(e), this.declaredClass = \"esri.arcade.featureset.sources.FeatureLayerDynamic\", this._removeGeometry = !1, this._overrideFields = null, this.formulaCredential = null, this._pageJustIds = !1, this._requestStandardised = !1, this._useDefinitionExpression = !0, e.spatialReference && (this.spatialReference = e.spatialReference), this._transparent = !0, this._maxProcessing = 1e3, this._layer = e.layer, this._wset = null, void 0 !== e.outFields && (this._overrideFields = e.outFields), void 0 !== e.includeGeometry && (this._removeGeometry = !1 === e.includeGeometry);\n  }\n  _maxQueryRate() {\n    return u;\n  }\n  end() {\n    return this._layer;\n  }\n  optimisePagingFeatureQueries(e) {\n    this._pageJustIds = e;\n  }\n  get urlQueryPath() {\n    return this._layer.parsedUrl.path || \"\";\n  }\n  convertQueryToLruCacheKey(e) {\n    const t = this.urlQueryPath + \",\" + d(e.toJSON());\n    return g(t, m.String);\n  }\n  async loadImpl() {\n    return !0 === this._layer.loaded ? (this._initialiseFeatureSet(), this) : (await this._layer.load(), this._initialiseFeatureSet(), this);\n  }\n  _initialiseFeatureSet() {\n    if (null == this.spatialReference && (this.spatialReference = this._layer.spatialReference), this.geometryType = this._layer.geometryType ?? \"\", this.fields = this._layer.fields.slice(), this.hasZ = !0 === this._layer?.capabilities?.data?.supportsZ, this.hasM = !0 === this._layer?.capabilities?.data?.supportsM, null !== this._overrideFields) if (1 === this._overrideFields.length && \"*\" === this._overrideFields[0]) this._overrideFields = null;else {\n      const e = [],\n        t = [];\n      for (const r of this.fields) if (\"oid\" === r.type) e.push(r), t.push(r.name);else for (const i of this._overrideFields) if (i.toLowerCase() === r.name.toLowerCase()) {\n        e.push(r), t.push(r.name);\n        break;\n      }\n      this.fields = e, this._overrideFields = t;\n    }\n    if (this._layer.source && this._layer.source.sourceJSON) {\n      const e = this._layer.source.sourceJSON.currentVersion;\n      !0 === this._layer.source.sourceJSON.useStandardizedQueries ? (this._databaseType = c.StandardisedNoInterval, null != e && e >= 10.61 && (this._databaseType = c.Standardised)) : null != e && (e >= 10.5 && (this._databaseType = c.StandardisedNoInterval, this._requestStandardised = !0), e >= 10.61 && (this._databaseType = c.Standardised));\n    }\n    this.objectIdField = this._layer.objectIdField;\n    for (const e of this.fields) \"global-id\" === e.type && (this.globalIdField = e.name);\n    this.subtypeField = this._layer.subtypeField ?? \"\", this.subtypes = this._layer.subtypes, this.typeIdField = (\"typeIdField\" in this._layer ? this._layer.typeIdField : null) ?? \"\", this.types = \"types\" in this._layer ? this._layer.types : null;\n  }\n  _isInFeatureSet() {\n    return h.InFeatureSet;\n  }\n  async _refineSetBlock(e) {\n    return e;\n  }\n  _candidateIdTransform(e) {\n    return e;\n  }\n  async _getSet(e) {\n    if (null === this._wset) {\n      await this._ensureLoaded();\n      const t = await this._getFilteredSet(\"\", null, null, null, e);\n      return this._wset = t, t;\n    }\n    return this._wset;\n  }\n  async _runDatabaseProbe(e) {\n    await this._ensureLoaded();\n    const t = new I();\n    this.datesInUnknownTimezone && (t.timeReferenceUnknownClient = !0), t.where = e.replace(\"OBJECTID\", this._layer.objectIdField);\n    try {\n      return await this._layer.queryObjectIds(t), !0;\n    } catch (r) {\n      return !1;\n    }\n  }\n  _canUsePagination() {\n    return !(!this._layer.capabilities || !this._layer.capabilities.query || !0 !== this._layer.capabilities.query.supportsPagination);\n  }\n  _cacheableFeatureSetSourceKey() {\n    return this._layer.url;\n  }\n  get gdbVersion() {\n    return this._layer && this._layer.capabilities && this._layer.capabilities.data && this._layer.capabilities.data.isVersioned ? this._layer.gdbVersion || \"SDE.DEFAULT\" : \"\";\n  }\n  nativeCapabilities() {\n    return {\n      title: this._layer.title ?? \"\",\n      source: this,\n      canQueryRelated: !0,\n      capabilities: this._layer.capabilities,\n      databaseType: this._databaseType,\n      requestStandardised: this._requestStandardised\n    };\n  }\n  _createQuery() {\n    const e = this._layer.createQuery();\n    return e.returnZ = this.hasZ, e.returnM = this.hasM, this.datesInUnknownTimezone && (e.timeReferenceUnknownClient = !0), this._requestStandardised && (e.sqlFormat = \"standard\"), this._useDefinitionExpression ? \"subtype-group\" === this._layer.type && (e.where = this._layer.definitionExpression) : e.where = null, e;\n  }\n  executeQuery(e, t) {\n    const r = \"execute\" === t ? this._layer.queryFeatures.bind(this._layer) : \"executeForCount\" === t ? this._layer.queryFeatureCount.bind(this._layer) : this._layer.queryObjectIds.bind(this._layer);\n    let i = null;\n    if (this.recentlyUsedQueries) {\n      const t = this.convertQueryToLruCacheKey(e);\n      i = this.recentlyUsedQueries.getFromCache(t), null === i && (i = r(e), this.recentlyUsedQueries.addToCache(t, i), i = i.catch(e => {\n        throw this.recentlyUsedQueries?.removeFromCache(t), e;\n      }));\n    }\n    return this.featureSetQueryInterceptor && this.featureSetQueryInterceptor.preLayerQueryCallback({\n      layer: this._layer,\n      query: e,\n      method: t\n    }), null === i && (i = r(e)), i;\n  }\n  async _getFilteredSet(e, t, r, i, s) {\n    const a = await this.databaseType();\n    if (this.isTable() && t && null !== e && \"\" !== e) {\n      return new o([], [], !0, null);\n    }\n    if (this._canUsePagination()) return this._getFilteredSetUsingPaging(e, t, r, i, s);\n    let n = \"\",\n      l = !1;\n    null !== i && this._layer.capabilities && this._layer.capabilities.query && !0 === this._layer.capabilities.query.supportsOrderBy && (n = i.constructClause(), l = !0);\n    const u = this._createQuery();\n    u.where = R(u.where, null === r ? null === t ? \"1=1\" : \"\" : y(r, a)), u.spatialRelationship = this._makeRelationshipEnum(e), u.outSpatialReference = this.spatialReference, u.orderByFields = \"\" !== n ? n.split(\",\") : null, u.geometry = null === t ? null : t, u.relationParameter = this._makeRelationshipParam(e);\n    let d = await this.executeQuery(u, \"executeForIds\");\n    null === d && (d = []), this._checkCancelled(s);\n    return new o([], d, l, null);\n  }\n  _expandPagedSet(e, t, r, i, s) {\n    return this._expandPagedSetFeatureSet(e, t, r, i, s);\n  }\n  async _getFilteredSetUsingPaging(e, t, r, i, s) {\n    let a = \"\",\n      n = !1;\n    null !== i && this._layer.capabilities && this._layer.capabilities.query && !0 === this._layer.capabilities.query.supportsOrderBy && (a = i.constructClause(), n = !0);\n    const l = await this.databaseType(),\n      u = null === r ? null === t ? \"1=1\" : \"\" : y(r, l);\n    let d = this._maxQueryRate();\n    const c = this._layer.capabilities?.query.maxRecordCount;\n    null != c && c < d && (d = c);\n    let h = null;\n    if (!0 === this._pageJustIds) h = new o([], [\"GETPAGES\"], n, {\n      spatialRel: this._makeRelationshipEnum(e),\n      relationParam: this._makeRelationshipParam(e),\n      outFields: this._layer.objectIdField,\n      resultRecordCount: d,\n      resultOffset: 0,\n      geometry: null === t ? null : t,\n      where: u,\n      orderByFields: a,\n      returnGeometry: !1,\n      returnIdsOnly: \"false\",\n      internal: {\n        set: [],\n        lastRetrieved: 0,\n        lastPage: 0,\n        fullyResolved: !1\n      }\n    });else {\n      let r = !0;\n      !0 === this._removeGeometry && (r = !1);\n      const i = this._overrideFields ?? this._fieldsIncludingObjectId([\"*\"]);\n      h = new o([], [\"GETPAGES\"], n, {\n        spatialRel: this._makeRelationshipEnum(e),\n        relationParam: this._makeRelationshipParam(e),\n        outFields: i.join(\",\"),\n        resultRecordCount: d,\n        resultOffset: 0,\n        geometry: null === t ? null : t,\n        where: u,\n        orderByFields: a,\n        returnGeometry: r,\n        returnIdsOnly: \"false\",\n        internal: {\n          set: [],\n          lastRetrieved: 0,\n          lastPage: 0,\n          fullyResolved: !1\n        }\n      });\n    }\n    return await this._expandPagedSet(h, d, 0, 1, s), h;\n  }\n  _clonePageDefinition(e) {\n    return null === e ? null : !0 !== e.groupbypage ? {\n      groupbypage: !1,\n      spatialRel: e.spatialRel,\n      relationParam: e.relationParam,\n      outFields: e.outFields,\n      resultRecordCount: e.resultRecordCount,\n      resultOffset: e.resultOffset,\n      geometry: e.geometry,\n      where: e.where,\n      orderByFields: e.orderByFields,\n      returnGeometry: e.returnGeometry,\n      returnIdsOnly: e.returnIdsOnly,\n      internal: e.internal\n    } : {\n      groupbypage: !0,\n      spatialRel: e.spatialRel,\n      relationParam: e.relationParam,\n      outFields: e.outFields,\n      resultRecordCount: e.resultRecordCount,\n      useOIDpagination: e.useOIDpagination,\n      generatedOid: e.generatedOid,\n      groupByFieldsForStatistics: e.groupByFieldsForStatistics,\n      resultOffset: e.resultOffset,\n      outStatistics: e.outStatistics,\n      geometry: e.geometry,\n      where: e.where,\n      orderByFields: e.orderByFields,\n      returnGeometry: e.returnGeometry,\n      returnIdsOnly: e.returnIdsOnly,\n      internal: e.internal\n    };\n  }\n  async _getPhysicalPage(e, t, r) {\n    const i = e.pagesDefinition.internal.lastRetrieved,\n      s = i,\n      a = e.pagesDefinition.internal.lastPage,\n      n = this._createQuery();\n    n.spatialRelationship = e.pagesDefinition.spatialRel, n.relationParameter = e.pagesDefinition.relationParam, n.outFields = e.pagesDefinition.outFields.split(\",\"), n.num = e.pagesDefinition.resultRecordCount, n.start = e.pagesDefinition.internal.lastPage, n.geometry = e.pagesDefinition.geometry, n.where = R(n.where, e.pagesDefinition.where), n.orderByFields = \"\" !== e.pagesDefinition.orderByFields ? e.pagesDefinition.orderByFields.split(\",\") : null, n.returnGeometry = e.pagesDefinition.returnGeometry, n.outSpatialReference = this.spatialReference;\n    const l = await this.executeQuery(n, \"execute\");\n    if (this._checkCancelled(r), e.pagesDefinition.internal.lastPage !== a) return \"done\";\n    const o = this._layer.objectIdField;\n    for (let u = 0; u < l.features.length; u++) e.pagesDefinition.internal.set[s + u] = l.features[u].attributes[o];\n    if (!1 === this._pageJustIds) for (let u = 0; u < l.features.length; u++) this._featureCache[l.features[u].attributes[o]] = l.features[u];\n    return (void 0 === l.exceededTransferLimit && l.features.length !== e.pagesDefinition.resultRecordCount || !1 === l.exceededTransferLimit) && (e.pagesDefinition.internal.fullyResolved = !0), e.pagesDefinition.internal.lastRetrieved = i + l.features.length, e.pagesDefinition.internal.lastPage += e.pagesDefinition.resultRecordCount, \"done\";\n  }\n  _fieldsIncludingObjectId(e) {\n    if (null === e) return [this.objectIdField];\n    const t = e.slice();\n    if (t.includes(\"*\")) return t;\n    let r = !1;\n    for (const i of t) if (i.toUpperCase() === this.objectIdField.toUpperCase()) {\n      r = !0;\n      break;\n    }\n    return !1 === r && t.push(this.objectIdField), t;\n  }\n  async _getFeatures(e, t, r, i) {\n    const s = [];\n    if (-1 !== t && void 0 === this._featureCache[t] && s.push(t), !0 === this._checkIfNeedToExpandKnownPage(e, this._maxProcessingRate())) return await this._expandPagedSet(e, this._maxProcessingRate(), 0, 0, i), this._getFeatures(e, t, r, i);\n    let l = 0;\n    for (let a = e._lastFetchedIndex; a < e._known.length; a++) {\n      if (e._lastFetchedIndex += 1, l++, void 0 === this._featureCache[e._known[a]]) {\n        let r = !1;\n        if (null !== this._layer._mode && void 0 !== this._layer._mode) {\n          const t = this._layer._mode;\n          if (void 0 !== t._featureMap[e._known[a]]) {\n            const i = t._featureMap[e._known[a]];\n            null !== i && (r = !0, this._featureCache[e._known[a]] = i);\n          }\n        }\n        if (!1 === r && (e._known[a] !== t && s.push(e._known[a]), s.length >= this._maxProcessingRate() - 1)) break;\n      }\n      if (l >= r && 0 === s.length) break;\n    }\n    if (0 === s.length) return \"success\";\n    const o = this._createQuery();\n    o.objectIds = s, o.outFields = this._overrideFields ?? this._fieldsIncludingObjectId([\"*\"]), o.returnGeometry = !0, !0 === this._removeGeometry && (o.returnGeometry = !1), o.outSpatialReference = this.spatialReference;\n    const u = await this.executeQuery(o, \"execute\");\n    if (this._checkCancelled(i), void 0 !== u.error) throw new a(n.RequestFailed, {\n      reason: u.error\n    });\n    const d = this._layer.objectIdField;\n    for (let a = 0; a < u.features.length; a++) this._featureCache[u.features[a].attributes[d]] = u.features[a];\n    return \"success\";\n  }\n  async _getDistinctPages(e, t, r, i, s, l, o, u, d) {\n    await this._ensureLoaded();\n    const c = await this.databaseType();\n    let h = r.parseTree.column;\n    const p = this._layer.fields ?? [];\n    for (let a = 0; a < p.length; a++) if (p[a].name.toLowerCase() === h.toLowerCase()) {\n      h = p[a].name;\n      break;\n    }\n    const f = this._createQuery();\n    f.where = R(f.where, null === l ? null === s ? \"1=1\" : \"\" : y(l, c)), f.spatialRelationship = this._makeRelationshipEnum(i), f.relationParameter = this._makeRelationshipParam(i), f.geometry = null === s ? null : s, f.returnDistinctValues = !0, f.returnGeometry = !1, f.outFields = [h];\n    const _ = await this.executeQuery(f, \"execute\");\n    if (this._checkCancelled(d), !_.hasOwnProperty(\"features\")) throw new a(n.InvalidStatResponse);\n    let g = !1;\n    for (let a = 0; a < p.length; a++) if (p[a].name === h) {\n      \"date\" === p[a].type && (g = !0);\n      break;\n    }\n    for (let a = 0; a < _.features.length; a++) {\n      if (g) {\n        const e = _.features[a].attributes[h];\n        null !== e ? u.push(new Date(e)) : u.push(e);\n      } else u.push(_.features[a].attributes[h]);\n      if (u.length >= o) break;\n    }\n    if (0 === _.features.length) return u;\n    if (_.features.length === this._layer.capabilities?.query.maxRecordCount && u.length < o) {\n      return {\n        calculated: !0,\n        result: await this._getDistinctPages(e + _.features.length, t, r, i, s, l, o, u, d)\n      };\n    }\n    return u;\n  }\n  async _distinctStat(e, t, r, i, s, a, n) {\n    return {\n      calculated: !0,\n      result: await this._getDistinctPages(0, e, t, r, i, s, a, [], n)\n    };\n  }\n  isTable() {\n    return this._layer.isTable || null === this._layer.geometryType || \"table\" === this._layer.type || \"\" === this._layer.geometryType || \"esriGeometryNull\" === this._layer.geometryType;\n  }\n  async _countstat(e, t, r, i) {\n    const s = await this.databaseType();\n    if (this.isTable() && r && null !== t && \"\" !== t) return {\n      calculated: !0,\n      result: 0\n    };\n    const a = this._createQuery();\n    a.where = R(a.where, null === i ? null === r ? \"1=1\" : \"\" : y(i, s)), a.spatialRelationship = this._makeRelationshipEnum(t), a.relationParameter = this._makeRelationshipParam(t), a.geometry = null === r ? null : r, a.returnGeometry = !1;\n    return {\n      calculated: !0,\n      result: await this.executeQuery(a, \"executeForCount\")\n    };\n  }\n  async _stats(e, t, r, i, s, l, o) {\n    await this._ensureLoaded();\n    const u = this._layer.capabilities?.query,\n      d = !!u?.supportsSqlExpression,\n      c = !!u?.supportsStatistics,\n      h = !!u?.supportsDistinct;\n    if (\"count\" === e) return h ? this._countstat(e, r, i, s) : {\n      calculated: !1\n    };\n    if (!1 === c || !1 === f(t) && !1 === d || !1 === t.isStandardized) return \"\" !== r || null !== s ? {\n      calculated: !1\n    } : this._manualStat(e, t, l, o);\n    if (\"distinct\" === e) return !1 === h ? \"\" !== r || null !== s ? {\n      calculated: !1\n    } : this._manualStat(e, t, l, o) : this._distinctStat(e, t, r, i, s, l, o);\n    const p = await this.databaseType();\n    if (this.isTable() && i && null !== r && \"\" !== r) return {\n      calculated: !0,\n      result: null\n    };\n    const g = this._createQuery();\n    g.where = R(g.where, null === s ? null === i ? \"1=1\" : \"\" : y(s, p)), g.spatialRelationship = this._makeRelationshipEnum(r), g.relationParameter = this._makeRelationshipParam(r), g.geometry = null === i ? null : i;\n    const m = new D();\n    m.statisticType = _(e), m.onStatisticField = y(t, p), m.outStatisticFieldName = \"ARCADE_STAT_RESULT\", g.returnGeometry = !1;\n    let w = \"ARCADE_STAT_RESULT\";\n    g.outStatistics = [m];\n    const b = await this.executeQuery(g, \"execute\");\n    if (!b.hasOwnProperty(\"features\") || 0 === b.features.length) throw new a(n.InvalidStatResponse);\n    let S = !1;\n    const F = b.fields ?? [];\n    for (let a = 0; a < F.length; a++) if (\"ARCADE_STAT_RESULT\" === F[a].name.toUpperCase()) {\n      w = F[a].name, \"date\" === F[a].type && (S = !0);\n      break;\n    }\n    if (S) {\n      let e = b.features[0].attributes[w];\n      return null !== e && (e = new Date(b.features[0].attributes[w])), {\n        calculated: !0,\n        result: e\n      };\n    }\n    return {\n      calculated: !0,\n      result: b.features[0].attributes[w]\n    };\n  }\n  _stat(e, t, r, i, s, a, n) {\n    return this._stats(e, t, r, i, s, a, n);\n  }\n  async _canDoAggregates(e, t) {\n    await this._ensureLoaded();\n    let r = !1;\n    const i = this._layer.capabilities?.query,\n      s = !0 === i?.supportsSqlExpression;\n    if (null != i && !0 === i.supportsStatistics && !0 === i.supportsOrderBy && (r = !0), r) for (let a = 0; a < t.length - 1; a++) (!1 === t[a].workingexpr?.isStandardized || !1 === f(t[a].workingexpr) && !1 === s) && (r = !1);\n    return !1 !== r;\n  }\n  _makeRelationshipEnum(e) {\n    if (e.includes(\"esriSpatialRelRelation\")) return \"relation\";\n    switch (e) {\n      case \"esriSpatialRelRelation\":\n        return \"relation\";\n      case \"esriSpatialRelIntersects\":\n        return \"intersects\";\n      case \"esriSpatialRelContains\":\n        return \"contains\";\n      case \"esriSpatialRelOverlaps\":\n        return \"overlaps\";\n      case \"esriSpatialRelWithin\":\n        return \"within\";\n      case \"esriSpatialRelTouches\":\n        return \"touches\";\n      case \"esriSpatialRelCrosses\":\n        return \"crosses\";\n      case \"esriSpatialRelEnvelopeIntersects\":\n        return \"envelope-intersects\";\n    }\n    return e;\n  }\n  _makeRelationshipParam(e) {\n    return e.includes(\"esriSpatialRelRelation\") ? e.split(\":\")[1] : \"\";\n  }\n  async _getAggregatePagesDataSourceDefinition(e, t, r, i, s, a, n) {\n    await this._ensureLoaded();\n    const l = await this.databaseType();\n    let u = \"\",\n      d = !1,\n      c = !1;\n    null !== a && this._layer.capabilities && this._layer.capabilities.query && !0 === this._layer.capabilities.query.supportsOrderBy && (u = a.constructClause(), c = !0), this._layer.capabilities && this._layer.capabilities.query && !1 === this._layer.capabilities.query.supportsPagination && (c = !1, d = !0, u = this._layer.objectIdField);\n    const h = [];\n    for (let o = 0; o < t.length; o++) {\n      const e = new D();\n      e.onStatisticField = null !== t[o].workingexpr ? y(t[o].workingexpr, l) : \"\", e.outStatisticFieldName = t[o].field, e.statisticType = t[o].toStatisticsName(), h.push(e);\n    }\n    \"\" === u && (u = e.join(\",\"));\n    let p = this._maxQueryRate();\n    const f = this._layer.capabilities?.query.maxRecordCount;\n    null != f && f < p && (p = f);\n    const _ = null === s ? null === i ? \"1=1\" : \"\" : y(s, l);\n    return new o([], [\"GETPAGES\"], c, {\n      groupbypage: !0,\n      spatialRel: this._makeRelationshipEnum(r),\n      relationParam: this._makeRelationshipParam(r),\n      outFields: [\"*\"],\n      useOIDpagination: d,\n      generatedOid: n,\n      resultRecordCount: p,\n      resultOffset: 0,\n      groupByFieldsForStatistics: e,\n      outStatistics: h,\n      geometry: null === i ? null : i,\n      where: _,\n      orderByFields: u,\n      returnGeometry: !1,\n      returnIdsOnly: !1,\n      internal: {\n        lastMaxId: -1,\n        set: [],\n        lastRetrieved: 0,\n        lastPage: 0,\n        fullyResolved: !1\n      }\n    });\n  }\n  async _getAgregagtePhysicalPage(t, r, i) {\n    let s = t.pagesDefinition.where;\n    !0 === t.pagesDefinition.useOIDpagination && (s = R(s, t.pagesDefinition.generatedOid + \">\" + t.pagesDefinition.internal.lastMaxId.toString()));\n    const l = t.pagesDefinition.internal.lastRetrieved,\n      o = l,\n      u = t.pagesDefinition.internal.lastPage,\n      d = this._createQuery();\n    if (d.where = R(d.where, s), d.spatialRelationship = t.pagesDefinition.spatialRel, d.relationParameter = t.pagesDefinition.relationParam, d.outFields = t.pagesDefinition.outFields, d.outStatistics = t.pagesDefinition.outStatistics, d.geometry = t.pagesDefinition.geometry, d.groupByFieldsForStatistics = t.pagesDefinition.groupByFieldsForStatistics, d.num = t.pagesDefinition.resultRecordCount, d.start = t.pagesDefinition.internal.lastPage, d.returnGeometry = t.pagesDefinition.returnGeometry, d.orderByFields = \"\" !== t.pagesDefinition.orderByFields ? t.pagesDefinition.orderByFields.split(\",\") : null, this.isTable() && d.geometry && d.spatialRelationship) return [];\n    const c = await this.executeQuery(d, \"execute\");\n    if (this._checkCancelled(i), !c.hasOwnProperty(\"features\")) throw new a(n.InvalidStatResponse);\n    const h = [];\n    if (t.pagesDefinition.internal.lastPage !== u) return [];\n    c.features.length > 0 && void 0 === c.features[0].attributes[t.pagesDefinition.generatedOid] && (t.pagesDefinition.generatedOid = t.pagesDefinition.generatedOid.toLowerCase());\n    for (let e = 0; e < c.features.length; e++) t.pagesDefinition.internal.set[o + e] = c.features[e].attributes[t.pagesDefinition.generatedOid];\n    for (let a = 0; a < c.features.length; a++) h.push(new e({\n      attributes: c.features[a].attributes,\n      geometry: null\n    }));\n    return !0 === t.pagesDefinition.useOIDpagination ? 0 === c.features.length ? t.pagesDefinition.internal.fullyResolved = !0 : t.pagesDefinition.internal.lastMaxId = c.features[c.features.length - 1].attributes[t.pagesDefinition.generatedOid] : (void 0 === c.exceededTransferLimit && c.features.length !== t.pagesDefinition.resultRecordCount || !1 === c.exceededTransferLimit) && (t.pagesDefinition.internal.fullyResolved = !0), t.pagesDefinition.internal.lastRetrieved = l + c.features.length, t.pagesDefinition.internal.lastPage += t.pagesDefinition.resultRecordCount, h;\n  }\n  static create(e, t, r, i, s) {\n    const a = new S({\n      url: e,\n      outFields: null === t ? [\"*\"] : t\n    });\n    return new P({\n      layer: a,\n      spatialReference: r,\n      lrucache: i,\n      interceptor: s\n    });\n  }\n  relationshipMetaData() {\n    return this._layer && this._layer.source && this._layer.source.sourceJSON?.relationships ? this._layer.source.sourceJSON.relationships : [];\n  }\n  serviceUrl() {\n    return p(this._layer.parsedUrl.path);\n  }\n  async queryAttachments(e, t, r, a, n) {\n    function l(e) {\n      const t = e.capabilities;\n      return t?.data.supportsAttachment && t?.operations.supportsQueryAttachments;\n    }\n    const o = this._layer;\n    if (l(o)) {\n      const l = {\n        objectIds: [e],\n        returnMetadata: n\n      };\n      (t && t > 0 || r && r > 0) && (l.size = [t && t > 0 ? t : 0, r && r > 0 ? r : t + 1]), a && a.length > 0 && (l.attachmentTypes = a), this.featureSetQueryInterceptor && this.featureSetQueryInterceptor.preLayerQueryCallback({\n        layer: o,\n        query: l,\n        method: \"attachments\"\n      });\n      const u = await o.queryAttachments(new F(l)),\n        d = [];\n      return u && u[e] && u[e].forEach(t => {\n        const r = this._layer.parsedUrl.path + \"/\" + e.toString() + \"/attachments/\" + t.id.toString();\n        let a = null;\n        n && t.exifInfo && (a = s.convertJsonToArcade(t.exifInfo, \"system\", !0)), d.push(new i(t.id, t.name, t.contentType, t.size, r, a, t.keywords ?? null));\n      }), d;\n    }\n    return [];\n  }\n  async queryRelatedFeatures(t) {\n    const i = {\n      f: \"json\",\n      relationshipId: t.relationshipId.toString(),\n      definitionExpression: t.where,\n      outFields: t.outFields?.join(\",\"),\n      returnGeometry: t.returnGeometry.toString()\n    };\n    void 0 !== t.resultOffset && null !== t.resultOffset && (i.resultOffset = t.resultOffset.toString()), void 0 !== t.resultRecordCount && null !== t.resultRecordCount && (i.resultRecordCount = t.resultRecordCount.toString()), t.orderByFields && (i.orderByFields = t.orderByFields.join(\",\")), t.objectIds && t.objectIds.length > 0 && (i.objectIds = t.objectIds.join(\",\")), t.outSpatialReference && (i.outSR = b(t.outSpatialReference)), this.featureSetQueryInterceptor && this.featureSetQueryInterceptor.preRequestCallback({\n      layer: this._layer,\n      queryPayload: i,\n      method: \"relatedrecords\",\n      url: this._layer.parsedUrl.path + \"/queryRelatedRecords\"\n    });\n    const s = await r(this._layer.parsedUrl.path + \"/queryRelatedRecords\", {\n      responseType: \"json\",\n      query: i\n    });\n    if (s.data) {\n      const t = {},\n        r = s.data;\n      if (r?.relatedRecordGroups) {\n        const i = r.spatialReference;\n        for (const s of r.relatedRecordGroups) {\n          const a = s.objectId,\n            n = [];\n          for (const t of s.relatedRecords) {\n            t.geometry && (t.geometry.spatialReference = i);\n            const r = new e({\n              geometry: t.geometry ? w(t.geometry) : null,\n              attributes: t.attributes\n            });\n            n.push(r);\n          }\n          t[a] = {\n            features: n,\n            exceededTransferLimit: !0 === r.exceededTransferLimit\n          };\n        }\n      }\n      return t;\n    }\n    throw new a(n.InvalidRequest);\n  }\n  async getFeatureByObjectId(e, t) {\n    const r = this._createQuery();\n    r.outFields = t, r.returnGeometry = !1, r.outSpatialReference = this.spatialReference, r.where = R(r.where, this.objectIdField + \"=\" + e.toString()), this.featureSetQueryInterceptor && this.featureSetQueryInterceptor.preLayerQueryCallback({\n      layer: this._layer,\n      query: r,\n      method: \"execute\"\n    });\n    const i = await this._layer.queryFeatures(r);\n    return 1 === i.features.length ? i.features[0] : null;\n  }\n  async getIdentityUser() {\n    await this.load();\n    const e = t?.findCredential(this._layer.url);\n    return e ? e.userId : null;\n  }\n  async getOwningSystemUrl() {\n    await this.load();\n    const e = t?.findServerInfo(this._layer.url);\n    if (e) return e.owningSystemUrl;\n    let i = this._layer.url;\n    const s = i.toLowerCase().indexOf(\"/rest/services\");\n    if (i = s > -1 ? i.slice(0, s) : i, i) {\n      i += \"/rest/info\";\n      try {\n        const e = await r(i, {\n          query: {\n            f: \"json\"\n          }\n        });\n        let t = \"\";\n        return e.data?.owningSystemUrl && (t = e.data.owningSystemUrl), t;\n      } catch (a) {\n        return \"\";\n      }\n    }\n    return \"\";\n  }\n  getDataSourceFeatureSet() {\n    const e = new P({\n      layer: this._layer,\n      spatialReference: this.spatialReference ?? void 0,\n      outFields: this._overrideFields ?? void 0,\n      includeGeometry: !this._removeGeometry,\n      lrucache: this.recentlyUsedQueries ?? void 0,\n      interceptor: this.featureSetQueryInterceptor ?? void 0\n    });\n    return e._useDefinitionExpression = !1, e;\n  }\n  get preferredTimeZone() {\n    return this._layer.preferredTimeZone ?? null;\n  }\n  get dateFieldsTimeZone() {\n    return this._layer.dateFieldsTimeZone ?? null;\n  }\n  get datesInUnknownTimezone() {\n    return this._layer.datesInUnknownTimezone ?? !1;\n  }\n  get editFieldsInfo() {\n    return this._layer.editFieldsInfo ?? null;\n  }\n  get timeInfo() {\n    return this._layer.timeInfo ?? null;\n  }\n  async getFeatureSetInfo() {\n    if (this.fsetInfo) return this.fsetInfo;\n    let e = null,\n      t = \"serviceItemId\" in this._layer ? this._layer.serviceItemId : null;\n    const i = this._layer.parsedUrl.path;\n    if (i) {\n      const s = await r(i, {\n        responseType: \"json\",\n        query: {\n          f: \"json\"\n        }\n      });\n      e = s?.data?.name ?? null, t = s?.data?.serviceItemId ?? null;\n    }\n    const s = this._layer.title && null !== (this._layer.parent ?? null);\n    return this.featureSetInfo = {\n      layerId: this._layer.layerId,\n      layerName: \"\" === e ? null : e,\n      itemId: \"\" === t ? null : t,\n      serviceLayerUrl: \"\" === i ? null : i,\n      webMapLayerId: s ? this._layer.id ?? null : null,\n      webMapLayerTitle: s ? this._layer.title ?? null : null,\n      className: null,\n      objectClassId: null\n    }, this.fsetInfo;\n  }\n}\nexport { P as default };","map":{"version":3,"names":["e","id","t","r","i","s","FeatureSetError","a","FeatureSetErrorCodes","n","l","o","defaultMaxRecords","u","stableStringify","d","FeatureServiceDatabaseType","c","IdState","h","extractServiceUrl","p","toWhereClause","y","isSingleField","f","decodeStatType","_","createMD5Hash","g","outputTypes","m","sqlAnd","R","fromJSON","w","srToRESTValue","b","S","F","I","D","P","constructor","declaredClass","_removeGeometry","_overrideFields","formulaCredential","_pageJustIds","_requestStandardised","_useDefinitionExpression","spatialReference","_transparent","_maxProcessing","_layer","layer","_wset","outFields","includeGeometry","_maxQueryRate","end","optimisePagingFeatureQueries","urlQueryPath","parsedUrl","path","convertQueryToLruCacheKey","toJSON","String","loadImpl","loaded","_initialiseFeatureSet","load","geometryType","fields","slice","hasZ","capabilities","data","supportsZ","hasM","supportsM","length","type","push","name","toLowerCase","source","sourceJSON","currentVersion","useStandardizedQueries","_databaseType","StandardisedNoInterval","Standardised","objectIdField","globalIdField","subtypeField","subtypes","typeIdField","types","_isInFeatureSet","InFeatureSet","_refineSetBlock","_candidateIdTransform","_getSet","_ensureLoaded","_getFilteredSet","_runDatabaseProbe","datesInUnknownTimezone","timeReferenceUnknownClient","where","replace","queryObjectIds","_canUsePagination","query","supportsPagination","_cacheableFeatureSetSourceKey","url","gdbVersion","isVersioned","nativeCapabilities","title","canQueryRelated","databaseType","requestStandardised","_createQuery","createQuery","returnZ","returnM","sqlFormat","definitionExpression","executeQuery","queryFeatures","bind","queryFeatureCount","recentlyUsedQueries","getFromCache","addToCache","catch","removeFromCache","featureSetQueryInterceptor","preLayerQueryCallback","method","isTable","_getFilteredSetUsingPaging","supportsOrderBy","constructClause","spatialRelationship","_makeRelationshipEnum","outSpatialReference","orderByFields","split","geometry","relationParameter","_makeRelationshipParam","_checkCancelled","_expandPagedSet","_expandPagedSetFeatureSet","maxRecordCount","spatialRel","relationParam","resultRecordCount","resultOffset","returnGeometry","returnIdsOnly","internal","set","lastRetrieved","lastPage","fullyResolved","_fieldsIncludingObjectId","join","_clonePageDefinition","groupbypage","useOIDpagination","generatedOid","groupByFieldsForStatistics","outStatistics","_getPhysicalPage","pagesDefinition","num","start","features","attributes","_featureCache","exceededTransferLimit","includes","toUpperCase","_getFeatures","_checkIfNeedToExpandKnownPage","_maxProcessingRate","_lastFetchedIndex","_known","_mode","_featureMap","objectIds","error","RequestFailed","reason","_getDistinctPages","parseTree","column","returnDistinctValues","hasOwnProperty","InvalidStatResponse","Date","calculated","result","_distinctStat","_countstat","_stats","supportsSqlExpression","supportsStatistics","supportsDistinct","isStandardized","_manualStat","statisticType","onStatisticField","outStatisticFieldName","_stat","_canDoAggregates","workingexpr","_getAggregatePagesDataSourceDefinition","field","toStatisticsName","lastMaxId","_getAgregagtePhysicalPage","toString","create","lrucache","interceptor","relationshipMetaData","relationships","serviceUrl","queryAttachments","supportsAttachment","operations","supportsQueryAttachments","returnMetadata","size","attachmentTypes","forEach","exifInfo","convertJsonToArcade","contentType","keywords","queryRelatedFeatures","relationshipId","outSR","preRequestCallback","queryPayload","responseType","relatedRecordGroups","objectId","relatedRecords","InvalidRequest","getFeatureByObjectId","getIdentityUser","findCredential","userId","getOwningSystemUrl","findServerInfo","owningSystemUrl","indexOf","getDataSourceFeatureSet","preferredTimeZone","dateFieldsTimeZone","editFieldsInfo","timeInfo","getFeatureSetInfo","fsetInfo","serviceItemId","parent","featureSetInfo","layerId","layerName","itemId","serviceLayerUrl","webMapLayerId","webMapLayerTitle","className","objectClassId","default"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/arcade/featureset/sources/FeatureLayerDynamic.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../Graphic.js\";import{id as t}from\"../../../kernel.js\";import r from\"../../../request.js\";import i from\"../../Attachment.js\";import s from\"../../Dictionary.js\";import{FeatureSetError as a,FeatureSetErrorCodes as n}from\"../support/errorsupport.js\";import l from\"../support/FeatureSet.js\";import o from\"../support/IdSet.js\";import{defaultMaxRecords as u,stableStringify as d,FeatureServiceDatabaseType as c,IdState as h,extractServiceUrl as p}from\"../support/shared.js\";import{toWhereClause as y,isSingleField as f}from\"../support/sqlUtils.js\";import{decodeStatType as _}from\"../support/stats.js\";import{createMD5Hash as g,outputTypes as m}from\"../../../core/MD5.js\";import{sqlAnd as R}from\"../../../core/sql.js\";import{fromJSON as w}from\"../../../geometry/support/jsonUtils.js\";import{srToRESTValue as b}from\"../../../geometry/support/spatialReferenceUtils.js\";import S from\"../../../layers/FeatureLayer.js\";import F from\"../../../rest/support/AttachmentQuery.js\";import I from\"../../../rest/support/Query.js\";import D from\"../../../rest/support/StatisticDefinition.js\";class P extends l{constructor(e){super(e),this.declaredClass=\"esri.arcade.featureset.sources.FeatureLayerDynamic\",this._removeGeometry=!1,this._overrideFields=null,this.formulaCredential=null,this._pageJustIds=!1,this._requestStandardised=!1,this._useDefinitionExpression=!0,e.spatialReference&&(this.spatialReference=e.spatialReference),this._transparent=!0,this._maxProcessing=1e3,this._layer=e.layer,this._wset=null,void 0!==e.outFields&&(this._overrideFields=e.outFields),void 0!==e.includeGeometry&&(this._removeGeometry=!1===e.includeGeometry)}_maxQueryRate(){return u}end(){return this._layer}optimisePagingFeatureQueries(e){this._pageJustIds=e}get urlQueryPath(){return this._layer.parsedUrl.path||\"\"}convertQueryToLruCacheKey(e){const t=this.urlQueryPath+\",\"+d(e.toJSON());return g(t,m.String)}async loadImpl(){return!0===this._layer.loaded?(this._initialiseFeatureSet(),this):(await this._layer.load(),this._initialiseFeatureSet(),this)}_initialiseFeatureSet(){if(null==this.spatialReference&&(this.spatialReference=this._layer.spatialReference),this.geometryType=this._layer.geometryType??\"\",this.fields=this._layer.fields.slice(),this.hasZ=!0===this._layer?.capabilities?.data?.supportsZ,this.hasM=!0===this._layer?.capabilities?.data?.supportsM,null!==this._overrideFields)if(1===this._overrideFields.length&&\"*\"===this._overrideFields[0])this._overrideFields=null;else{const e=[],t=[];for(const r of this.fields)if(\"oid\"===r.type)e.push(r),t.push(r.name);else for(const i of this._overrideFields)if(i.toLowerCase()===r.name.toLowerCase()){e.push(r),t.push(r.name);break}this.fields=e,this._overrideFields=t}if(this._layer.source&&this._layer.source.sourceJSON){const e=this._layer.source.sourceJSON.currentVersion;!0===this._layer.source.sourceJSON.useStandardizedQueries?(this._databaseType=c.StandardisedNoInterval,null!=e&&e>=10.61&&(this._databaseType=c.Standardised)):null!=e&&(e>=10.5&&(this._databaseType=c.StandardisedNoInterval,this._requestStandardised=!0),e>=10.61&&(this._databaseType=c.Standardised))}this.objectIdField=this._layer.objectIdField;for(const e of this.fields)\"global-id\"===e.type&&(this.globalIdField=e.name);this.subtypeField=this._layer.subtypeField??\"\",this.subtypes=this._layer.subtypes,this.typeIdField=(\"typeIdField\"in this._layer?this._layer.typeIdField:null)??\"\",this.types=\"types\"in this._layer?this._layer.types:null}_isInFeatureSet(){return h.InFeatureSet}async _refineSetBlock(e){return e}_candidateIdTransform(e){return e}async _getSet(e){if(null===this._wset){await this._ensureLoaded();const t=await this._getFilteredSet(\"\",null,null,null,e);return this._wset=t,t}return this._wset}async _runDatabaseProbe(e){await this._ensureLoaded();const t=new I;this.datesInUnknownTimezone&&(t.timeReferenceUnknownClient=!0),t.where=e.replace(\"OBJECTID\",this._layer.objectIdField);try{return await this._layer.queryObjectIds(t),!0}catch(r){return!1}}_canUsePagination(){return!(!this._layer.capabilities||!this._layer.capabilities.query||!0!==this._layer.capabilities.query.supportsPagination)}_cacheableFeatureSetSourceKey(){return this._layer.url}get gdbVersion(){return this._layer&&this._layer.capabilities&&this._layer.capabilities.data&&this._layer.capabilities.data.isVersioned?this._layer.gdbVersion||\"SDE.DEFAULT\":\"\"}nativeCapabilities(){return{title:this._layer.title??\"\",source:this,canQueryRelated:!0,capabilities:this._layer.capabilities,databaseType:this._databaseType,requestStandardised:this._requestStandardised}}_createQuery(){const e=this._layer.createQuery();return e.returnZ=this.hasZ,e.returnM=this.hasM,this.datesInUnknownTimezone&&(e.timeReferenceUnknownClient=!0),this._requestStandardised&&(e.sqlFormat=\"standard\"),this._useDefinitionExpression?\"subtype-group\"===this._layer.type&&(e.where=this._layer.definitionExpression):e.where=null,e}executeQuery(e,t){const r=\"execute\"===t?this._layer.queryFeatures.bind(this._layer):\"executeForCount\"===t?this._layer.queryFeatureCount.bind(this._layer):this._layer.queryObjectIds.bind(this._layer);let i=null;if(this.recentlyUsedQueries){const t=this.convertQueryToLruCacheKey(e);i=this.recentlyUsedQueries.getFromCache(t),null===i&&(i=r(e),this.recentlyUsedQueries.addToCache(t,i),i=i.catch((e=>{throw this.recentlyUsedQueries?.removeFromCache(t),e})))}return this.featureSetQueryInterceptor&&this.featureSetQueryInterceptor.preLayerQueryCallback({layer:this._layer,query:e,method:t}),null===i&&(i=r(e)),i}async _getFilteredSet(e,t,r,i,s){const a=await this.databaseType();if(this.isTable()&&t&&null!==e&&\"\"!==e){return new o([],[],!0,null)}if(this._canUsePagination())return this._getFilteredSetUsingPaging(e,t,r,i,s);let n=\"\",l=!1;null!==i&&this._layer.capabilities&&this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsOrderBy&&(n=i.constructClause(),l=!0);const u=this._createQuery();u.where=R(u.where,null===r?null===t?\"1=1\":\"\":y(r,a)),u.spatialRelationship=this._makeRelationshipEnum(e),u.outSpatialReference=this.spatialReference,u.orderByFields=\"\"!==n?n.split(\",\"):null,u.geometry=null===t?null:t,u.relationParameter=this._makeRelationshipParam(e);let d=await this.executeQuery(u,\"executeForIds\");null===d&&(d=[]),this._checkCancelled(s);return new o([],d,l,null)}_expandPagedSet(e,t,r,i,s){return this._expandPagedSetFeatureSet(e,t,r,i,s)}async _getFilteredSetUsingPaging(e,t,r,i,s){let a=\"\",n=!1;null!==i&&this._layer.capabilities&&this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsOrderBy&&(a=i.constructClause(),n=!0);const l=await this.databaseType(),u=null===r?null===t?\"1=1\":\"\":y(r,l);let d=this._maxQueryRate();const c=this._layer.capabilities?.query.maxRecordCount;null!=c&&c<d&&(d=c);let h=null;if(!0===this._pageJustIds)h=new o([],[\"GETPAGES\"],n,{spatialRel:this._makeRelationshipEnum(e),relationParam:this._makeRelationshipParam(e),outFields:this._layer.objectIdField,resultRecordCount:d,resultOffset:0,geometry:null===t?null:t,where:u,orderByFields:a,returnGeometry:!1,returnIdsOnly:\"false\",internal:{set:[],lastRetrieved:0,lastPage:0,fullyResolved:!1}});else{let r=!0;!0===this._removeGeometry&&(r=!1);const i=this._overrideFields??this._fieldsIncludingObjectId([\"*\"]);h=new o([],[\"GETPAGES\"],n,{spatialRel:this._makeRelationshipEnum(e),relationParam:this._makeRelationshipParam(e),outFields:i.join(\",\"),resultRecordCount:d,resultOffset:0,geometry:null===t?null:t,where:u,orderByFields:a,returnGeometry:r,returnIdsOnly:\"false\",internal:{set:[],lastRetrieved:0,lastPage:0,fullyResolved:!1}})}return await this._expandPagedSet(h,d,0,1,s),h}_clonePageDefinition(e){return null===e?null:!0!==e.groupbypage?{groupbypage:!1,spatialRel:e.spatialRel,relationParam:e.relationParam,outFields:e.outFields,resultRecordCount:e.resultRecordCount,resultOffset:e.resultOffset,geometry:e.geometry,where:e.where,orderByFields:e.orderByFields,returnGeometry:e.returnGeometry,returnIdsOnly:e.returnIdsOnly,internal:e.internal}:{groupbypage:!0,spatialRel:e.spatialRel,relationParam:e.relationParam,outFields:e.outFields,resultRecordCount:e.resultRecordCount,useOIDpagination:e.useOIDpagination,generatedOid:e.generatedOid,groupByFieldsForStatistics:e.groupByFieldsForStatistics,resultOffset:e.resultOffset,outStatistics:e.outStatistics,geometry:e.geometry,where:e.where,orderByFields:e.orderByFields,returnGeometry:e.returnGeometry,returnIdsOnly:e.returnIdsOnly,internal:e.internal}}async _getPhysicalPage(e,t,r){const i=e.pagesDefinition.internal.lastRetrieved,s=i,a=e.pagesDefinition.internal.lastPage,n=this._createQuery();n.spatialRelationship=e.pagesDefinition.spatialRel,n.relationParameter=e.pagesDefinition.relationParam,n.outFields=e.pagesDefinition.outFields.split(\",\"),n.num=e.pagesDefinition.resultRecordCount,n.start=e.pagesDefinition.internal.lastPage,n.geometry=e.pagesDefinition.geometry,n.where=R(n.where,e.pagesDefinition.where),n.orderByFields=\"\"!==e.pagesDefinition.orderByFields?e.pagesDefinition.orderByFields.split(\",\"):null,n.returnGeometry=e.pagesDefinition.returnGeometry,n.outSpatialReference=this.spatialReference;const l=await this.executeQuery(n,\"execute\");if(this._checkCancelled(r),e.pagesDefinition.internal.lastPage!==a)return\"done\";const o=this._layer.objectIdField;for(let u=0;u<l.features.length;u++)e.pagesDefinition.internal.set[s+u]=l.features[u].attributes[o];if(!1===this._pageJustIds)for(let u=0;u<l.features.length;u++)this._featureCache[l.features[u].attributes[o]]=l.features[u];return(void 0===l.exceededTransferLimit&&l.features.length!==e.pagesDefinition.resultRecordCount||!1===l.exceededTransferLimit)&&(e.pagesDefinition.internal.fullyResolved=!0),e.pagesDefinition.internal.lastRetrieved=i+l.features.length,e.pagesDefinition.internal.lastPage+=e.pagesDefinition.resultRecordCount,\"done\"}_fieldsIncludingObjectId(e){if(null===e)return[this.objectIdField];const t=e.slice();if(t.includes(\"*\"))return t;let r=!1;for(const i of t)if(i.toUpperCase()===this.objectIdField.toUpperCase()){r=!0;break}return!1===r&&t.push(this.objectIdField),t}async _getFeatures(e,t,r,i){const s=[];if(-1!==t&&void 0===this._featureCache[t]&&s.push(t),!0===this._checkIfNeedToExpandKnownPage(e,this._maxProcessingRate()))return await this._expandPagedSet(e,this._maxProcessingRate(),0,0,i),this._getFeatures(e,t,r,i);let l=0;for(let a=e._lastFetchedIndex;a<e._known.length;a++){if(e._lastFetchedIndex+=1,l++,void 0===this._featureCache[e._known[a]]){let r=!1;if(null!==this._layer._mode&&void 0!==this._layer._mode){const t=this._layer._mode;if(void 0!==t._featureMap[e._known[a]]){const i=t._featureMap[e._known[a]];null!==i&&(r=!0,this._featureCache[e._known[a]]=i)}}if(!1===r&&(e._known[a]!==t&&s.push(e._known[a]),s.length>=this._maxProcessingRate()-1))break}if(l>=r&&0===s.length)break}if(0===s.length)return\"success\";const o=this._createQuery();o.objectIds=s,o.outFields=this._overrideFields??this._fieldsIncludingObjectId([\"*\"]),o.returnGeometry=!0,!0===this._removeGeometry&&(o.returnGeometry=!1),o.outSpatialReference=this.spatialReference;const u=await this.executeQuery(o,\"execute\");if(this._checkCancelled(i),void 0!==u.error)throw new a(n.RequestFailed,{reason:u.error});const d=this._layer.objectIdField;for(let a=0;a<u.features.length;a++)this._featureCache[u.features[a].attributes[d]]=u.features[a];return\"success\"}async _getDistinctPages(e,t,r,i,s,l,o,u,d){await this._ensureLoaded();const c=await this.databaseType();let h=r.parseTree.column;const p=this._layer.fields??[];for(let a=0;a<p.length;a++)if(p[a].name.toLowerCase()===h.toLowerCase()){h=p[a].name;break}const f=this._createQuery();f.where=R(f.where,null===l?null===s?\"1=1\":\"\":y(l,c)),f.spatialRelationship=this._makeRelationshipEnum(i),f.relationParameter=this._makeRelationshipParam(i),f.geometry=null===s?null:s,f.returnDistinctValues=!0,f.returnGeometry=!1,f.outFields=[h];const _=await this.executeQuery(f,\"execute\");if(this._checkCancelled(d),!_.hasOwnProperty(\"features\"))throw new a(n.InvalidStatResponse);let g=!1;for(let a=0;a<p.length;a++)if(p[a].name===h){\"date\"===p[a].type&&(g=!0);break}for(let a=0;a<_.features.length;a++){if(g){const e=_.features[a].attributes[h];null!==e?u.push(new Date(e)):u.push(e)}else u.push(_.features[a].attributes[h]);if(u.length>=o)break}if(0===_.features.length)return u;if(_.features.length===this._layer.capabilities?.query.maxRecordCount&&u.length<o){return{calculated:!0,result:await this._getDistinctPages(e+_.features.length,t,r,i,s,l,o,u,d)}}return u}async _distinctStat(e,t,r,i,s,a,n){return{calculated:!0,result:await this._getDistinctPages(0,e,t,r,i,s,a,[],n)}}isTable(){return this._layer.isTable||null===this._layer.geometryType||\"table\"===this._layer.type||\"\"===this._layer.geometryType||\"esriGeometryNull\"===this._layer.geometryType}async _countstat(e,t,r,i){const s=await this.databaseType();if(this.isTable()&&r&&null!==t&&\"\"!==t)return{calculated:!0,result:0};const a=this._createQuery();a.where=R(a.where,null===i?null===r?\"1=1\":\"\":y(i,s)),a.spatialRelationship=this._makeRelationshipEnum(t),a.relationParameter=this._makeRelationshipParam(t),a.geometry=null===r?null:r,a.returnGeometry=!1;return{calculated:!0,result:await this.executeQuery(a,\"executeForCount\")}}async _stats(e,t,r,i,s,l,o){await this._ensureLoaded();const u=this._layer.capabilities?.query,d=!!u?.supportsSqlExpression,c=!!u?.supportsStatistics,h=!!u?.supportsDistinct;if(\"count\"===e)return h?this._countstat(e,r,i,s):{calculated:!1};if(!1===c||!1===f(t)&&!1===d||!1===t.isStandardized)return\"\"!==r||null!==s?{calculated:!1}:this._manualStat(e,t,l,o);if(\"distinct\"===e)return!1===h?\"\"!==r||null!==s?{calculated:!1}:this._manualStat(e,t,l,o):this._distinctStat(e,t,r,i,s,l,o);const p=await this.databaseType();if(this.isTable()&&i&&null!==r&&\"\"!==r)return{calculated:!0,result:null};const g=this._createQuery();g.where=R(g.where,null===s?null===i?\"1=1\":\"\":y(s,p)),g.spatialRelationship=this._makeRelationshipEnum(r),g.relationParameter=this._makeRelationshipParam(r),g.geometry=null===i?null:i;const m=new D;m.statisticType=_(e),m.onStatisticField=y(t,p),m.outStatisticFieldName=\"ARCADE_STAT_RESULT\",g.returnGeometry=!1;let w=\"ARCADE_STAT_RESULT\";g.outStatistics=[m];const b=await this.executeQuery(g,\"execute\");if(!b.hasOwnProperty(\"features\")||0===b.features.length)throw new a(n.InvalidStatResponse);let S=!1;const F=b.fields??[];for(let a=0;a<F.length;a++)if(\"ARCADE_STAT_RESULT\"===F[a].name.toUpperCase()){w=F[a].name,\"date\"===F[a].type&&(S=!0);break}if(S){let e=b.features[0].attributes[w];return null!==e&&(e=new Date(b.features[0].attributes[w])),{calculated:!0,result:e}}return{calculated:!0,result:b.features[0].attributes[w]}}_stat(e,t,r,i,s,a,n){return this._stats(e,t,r,i,s,a,n)}async _canDoAggregates(e,t){await this._ensureLoaded();let r=!1;const i=this._layer.capabilities?.query,s=!0===i?.supportsSqlExpression;if(null!=i&&!0===i.supportsStatistics&&!0===i.supportsOrderBy&&(r=!0),r)for(let a=0;a<t.length-1;a++)(!1===t[a].workingexpr?.isStandardized||!1===f(t[a].workingexpr)&&!1===s)&&(r=!1);return!1!==r}_makeRelationshipEnum(e){if(e.includes(\"esriSpatialRelRelation\"))return\"relation\";switch(e){case\"esriSpatialRelRelation\":return\"relation\";case\"esriSpatialRelIntersects\":return\"intersects\";case\"esriSpatialRelContains\":return\"contains\";case\"esriSpatialRelOverlaps\":return\"overlaps\";case\"esriSpatialRelWithin\":return\"within\";case\"esriSpatialRelTouches\":return\"touches\";case\"esriSpatialRelCrosses\":return\"crosses\";case\"esriSpatialRelEnvelopeIntersects\":return\"envelope-intersects\"}return e}_makeRelationshipParam(e){return e.includes(\"esriSpatialRelRelation\")?e.split(\":\")[1]:\"\"}async _getAggregatePagesDataSourceDefinition(e,t,r,i,s,a,n){await this._ensureLoaded();const l=await this.databaseType();let u=\"\",d=!1,c=!1;null!==a&&this._layer.capabilities&&this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsOrderBy&&(u=a.constructClause(),c=!0),this._layer.capabilities&&this._layer.capabilities.query&&!1===this._layer.capabilities.query.supportsPagination&&(c=!1,d=!0,u=this._layer.objectIdField);const h=[];for(let o=0;o<t.length;o++){const e=new D;e.onStatisticField=null!==t[o].workingexpr?y(t[o].workingexpr,l):\"\",e.outStatisticFieldName=t[o].field,e.statisticType=t[o].toStatisticsName(),h.push(e)}\"\"===u&&(u=e.join(\",\"));let p=this._maxQueryRate();const f=this._layer.capabilities?.query.maxRecordCount;null!=f&&f<p&&(p=f);const _=null===s?null===i?\"1=1\":\"\":y(s,l);return new o([],[\"GETPAGES\"],c,{groupbypage:!0,spatialRel:this._makeRelationshipEnum(r),relationParam:this._makeRelationshipParam(r),outFields:[\"*\"],useOIDpagination:d,generatedOid:n,resultRecordCount:p,resultOffset:0,groupByFieldsForStatistics:e,outStatistics:h,geometry:null===i?null:i,where:_,orderByFields:u,returnGeometry:!1,returnIdsOnly:!1,internal:{lastMaxId:-1,set:[],lastRetrieved:0,lastPage:0,fullyResolved:!1}})}async _getAgregagtePhysicalPage(t,r,i){let s=t.pagesDefinition.where;!0===t.pagesDefinition.useOIDpagination&&(s=R(s,t.pagesDefinition.generatedOid+\">\"+t.pagesDefinition.internal.lastMaxId.toString()));const l=t.pagesDefinition.internal.lastRetrieved,o=l,u=t.pagesDefinition.internal.lastPage,d=this._createQuery();if(d.where=R(d.where,s),d.spatialRelationship=t.pagesDefinition.spatialRel,d.relationParameter=t.pagesDefinition.relationParam,d.outFields=t.pagesDefinition.outFields,d.outStatistics=t.pagesDefinition.outStatistics,d.geometry=t.pagesDefinition.geometry,d.groupByFieldsForStatistics=t.pagesDefinition.groupByFieldsForStatistics,d.num=t.pagesDefinition.resultRecordCount,d.start=t.pagesDefinition.internal.lastPage,d.returnGeometry=t.pagesDefinition.returnGeometry,d.orderByFields=\"\"!==t.pagesDefinition.orderByFields?t.pagesDefinition.orderByFields.split(\",\"):null,this.isTable()&&d.geometry&&d.spatialRelationship)return[];const c=await this.executeQuery(d,\"execute\");if(this._checkCancelled(i),!c.hasOwnProperty(\"features\"))throw new a(n.InvalidStatResponse);const h=[];if(t.pagesDefinition.internal.lastPage!==u)return[];c.features.length>0&&void 0===c.features[0].attributes[t.pagesDefinition.generatedOid]&&(t.pagesDefinition.generatedOid=t.pagesDefinition.generatedOid.toLowerCase());for(let e=0;e<c.features.length;e++)t.pagesDefinition.internal.set[o+e]=c.features[e].attributes[t.pagesDefinition.generatedOid];for(let a=0;a<c.features.length;a++)h.push(new e({attributes:c.features[a].attributes,geometry:null}));return!0===t.pagesDefinition.useOIDpagination?0===c.features.length?t.pagesDefinition.internal.fullyResolved=!0:t.pagesDefinition.internal.lastMaxId=c.features[c.features.length-1].attributes[t.pagesDefinition.generatedOid]:(void 0===c.exceededTransferLimit&&c.features.length!==t.pagesDefinition.resultRecordCount||!1===c.exceededTransferLimit)&&(t.pagesDefinition.internal.fullyResolved=!0),t.pagesDefinition.internal.lastRetrieved=l+c.features.length,t.pagesDefinition.internal.lastPage+=t.pagesDefinition.resultRecordCount,h}static create(e,t,r,i,s){const a=new S({url:e,outFields:null===t?[\"*\"]:t});return new P({layer:a,spatialReference:r,lrucache:i,interceptor:s})}relationshipMetaData(){return this._layer&&this._layer.source&&this._layer.source.sourceJSON?.relationships?this._layer.source.sourceJSON.relationships:[]}serviceUrl(){return p(this._layer.parsedUrl.path)}async queryAttachments(e,t,r,a,n){function l(e){const t=e.capabilities;return t?.data.supportsAttachment&&t?.operations.supportsQueryAttachments}const o=this._layer;if(l(o)){const l={objectIds:[e],returnMetadata:n};(t&&t>0||r&&r>0)&&(l.size=[t&&t>0?t:0,r&&r>0?r:t+1]),a&&a.length>0&&(l.attachmentTypes=a),this.featureSetQueryInterceptor&&this.featureSetQueryInterceptor.preLayerQueryCallback({layer:o,query:l,method:\"attachments\"});const u=await o.queryAttachments(new F(l)),d=[];return u&&u[e]&&u[e].forEach((t=>{const r=this._layer.parsedUrl.path+\"/\"+e.toString()+\"/attachments/\"+t.id.toString();let a=null;n&&t.exifInfo&&(a=s.convertJsonToArcade(t.exifInfo,\"system\",!0)),d.push(new i(t.id,t.name,t.contentType,t.size,r,a,t.keywords??null))})),d}return[]}async queryRelatedFeatures(t){const i={f:\"json\",relationshipId:t.relationshipId.toString(),definitionExpression:t.where,outFields:t.outFields?.join(\",\"),returnGeometry:t.returnGeometry.toString()};void 0!==t.resultOffset&&null!==t.resultOffset&&(i.resultOffset=t.resultOffset.toString()),void 0!==t.resultRecordCount&&null!==t.resultRecordCount&&(i.resultRecordCount=t.resultRecordCount.toString()),t.orderByFields&&(i.orderByFields=t.orderByFields.join(\",\")),t.objectIds&&t.objectIds.length>0&&(i.objectIds=t.objectIds.join(\",\")),t.outSpatialReference&&(i.outSR=b(t.outSpatialReference)),this.featureSetQueryInterceptor&&this.featureSetQueryInterceptor.preRequestCallback({layer:this._layer,queryPayload:i,method:\"relatedrecords\",url:this._layer.parsedUrl.path+\"/queryRelatedRecords\"});const s=await r(this._layer.parsedUrl.path+\"/queryRelatedRecords\",{responseType:\"json\",query:i});if(s.data){const t={},r=s.data;if(r?.relatedRecordGroups){const i=r.spatialReference;for(const s of r.relatedRecordGroups){const a=s.objectId,n=[];for(const t of s.relatedRecords){t.geometry&&(t.geometry.spatialReference=i);const r=new e({geometry:t.geometry?w(t.geometry):null,attributes:t.attributes});n.push(r)}t[a]={features:n,exceededTransferLimit:!0===r.exceededTransferLimit}}}return t}throw new a(n.InvalidRequest)}async getFeatureByObjectId(e,t){const r=this._createQuery();r.outFields=t,r.returnGeometry=!1,r.outSpatialReference=this.spatialReference,r.where=R(r.where,this.objectIdField+\"=\"+e.toString()),this.featureSetQueryInterceptor&&this.featureSetQueryInterceptor.preLayerQueryCallback({layer:this._layer,query:r,method:\"execute\"});const i=await this._layer.queryFeatures(r);return 1===i.features.length?i.features[0]:null}async getIdentityUser(){await this.load();const e=t?.findCredential(this._layer.url);return e?e.userId:null}async getOwningSystemUrl(){await this.load();const e=t?.findServerInfo(this._layer.url);if(e)return e.owningSystemUrl;let i=this._layer.url;const s=i.toLowerCase().indexOf(\"/rest/services\");if(i=s>-1?i.slice(0,s):i,i){i+=\"/rest/info\";try{const e=await r(i,{query:{f:\"json\"}});let t=\"\";return e.data?.owningSystemUrl&&(t=e.data.owningSystemUrl),t}catch(a){return\"\"}}return\"\"}getDataSourceFeatureSet(){const e=new P({layer:this._layer,spatialReference:this.spatialReference??void 0,outFields:this._overrideFields??void 0,includeGeometry:!this._removeGeometry,lrucache:this.recentlyUsedQueries??void 0,interceptor:this.featureSetQueryInterceptor??void 0});return e._useDefinitionExpression=!1,e}get preferredTimeZone(){return this._layer.preferredTimeZone??null}get dateFieldsTimeZone(){return this._layer.dateFieldsTimeZone??null}get datesInUnknownTimezone(){return this._layer.datesInUnknownTimezone??!1}get editFieldsInfo(){return this._layer.editFieldsInfo??null}get timeInfo(){return this._layer.timeInfo??null}async getFeatureSetInfo(){if(this.fsetInfo)return this.fsetInfo;let e=null,t=\"serviceItemId\"in this._layer?this._layer.serviceItemId:null;const i=this._layer.parsedUrl.path;if(i){const s=await r(i,{responseType:\"json\",query:{f:\"json\"}});e=s?.data?.name??null,t=s?.data?.serviceItemId??null}const s=this._layer.title&&null!==(this._layer.parent??null);return this.featureSetInfo={layerId:this._layer.layerId,layerName:\"\"===e?null:e,itemId:\"\"===t?null:t,serviceLayerUrl:\"\"===i?null:i,webMapLayerId:s?this._layer.id??null:null,webMapLayerTitle:s?this._layer.title??null:null,className:null,objectClassId:null},this.fsetInfo}}export{P as default};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}