{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../core/Error.js\";\nimport { assertIsSome as i } from \"../../../core/maybe.js\";\nimport { urlToObject as s } from \"../../../core/urlUtils.js\";\nimport { property as r } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/Logger.js\";\nimport \"../../../core/RandomLCG.js\";\nimport { subclass as a } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport l from \"../../../geometry/Extent.js\";\nimport n from \"../../../geometry/Point.js\";\nimport o from \"../../../geometry/SpatialReference.js\";\nimport c from \"../RasterInfo.js\";\nimport m from \"../RasterStorageInfo.js\";\nimport u from \"../TileInfo.js\";\nimport { TilemapCache as h } from \"../TilemapCache.js\";\nimport f from \"./BaseRaster.js\";\nimport { setValidBoundary as p } from \"../rasterFunctions/pixelUtils.js\";\nimport d from \"../rasterTransforms/GCSShiftTransform.js\";\nimport { patchServiceInfo as y, fetchServiceRasterInfo as x } from \"../../../rest/imageService/fetchRasterInfo.js\";\nlet g = class extends f {\n  constructor() {\n    super(...arguments), this._levelOffset = 0, this._tilemapCache = null, this._slices = null, this.datasetFormat = \"RasterTileServer\", this.tileType = null;\n  }\n  async fetchRawTile(e, t, i) {\n    let s = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    const {\n        storageInfo: r,\n        extent: a\n      } = this.rasterInfo,\n      {\n        transposeInfo: l\n      } = r,\n      n = null != l && !!s.transposedVariableName;\n    if (this._slices && !n && null == s.sliceId) return null;\n    const o = n ? 0 : r.maximumPyramidLevel - e + this._levelOffset,\n      c = `${this.url}/tile/${o}/${t}/${i}`,\n      m = this._slices ? n ? {\n        variable: s.transposedVariableName\n      } : {\n        sliceId: s.sliceId || 0\n      } : null,\n      {\n        data: u\n      } = await this.request(c, {\n        query: m,\n        responseType: \"array-buffer\",\n        signal: s.signal\n      });\n    if (!u) return null;\n    const h = n ? l.tileSize : r.tileInfo.size,\n      f = await this.decodePixelBlock(u, {\n        width: h[0],\n        height: h[1],\n        planes: null,\n        pixelType: null,\n        isPoint: \"Elevation\" === this.tileType,\n        returnInterleaved: n,\n        noDataValue: this.rasterInfo.noDataValue\n      });\n    if (null == f) return null;\n    const d = r.blockBoundary[e];\n    if (\"jpg\" !== r.compression || i > d.minCol && i < d.maxCol && t > d.minRow && t < d.maxRow) return f;\n    const {\n        origin: y,\n        blockWidth: x,\n        blockHeight: g\n      } = r,\n      {\n        x: v,\n        y: S\n      } = this.getPyramidPixelSize(e),\n      I = Math.round((a.xmin - y.x) / v) % x,\n      w = Math.round((a.xmax - y.x) / v) % x || x,\n      j = Math.round((y.y - a.ymax) / S) % g,\n      M = Math.round((y.y - a.ymin) / S) % g || g,\n      b = i === d.minCol ? I : 0,\n      T = t === d.minRow ? j : 0,\n      _ = i === d.maxCol ? w : x,\n      O = t === d.maxRow ? M : g;\n    return p(f, {\n      x: b,\n      y: T\n    }, {\n      width: _ - b,\n      height: O - T\n    }), f;\n  }\n  getSliceIndex(e) {\n    if (!this._slices || null == e || 0 === e.length) return null;\n    const t = e;\n    for (let i = 0; i < this._slices.length; i++) {\n      const e = this._slices[i].multidimensionalDefinition;\n      if (e.length === t.length && !e.some(e => {\n        const i = t.find(t => e.variableName === t.variableName && t.dimensionName === e.dimensionName);\n        if (!i) return !0;\n        return (Array.isArray(e.values[0]) ? `${e.values[0][0]}-${e.values[0][1]}` : e.values[0]) !== (Array.isArray(i.values[0]) ? `${i.values[0][0]}-${i.values[0][1]}` : i.values[0]);\n      })) return i;\n    }\n    return null;\n  }\n  async fetchVariableStatisticsHistograms(e, t) {\n    const i = this.request(this.url + \"/statistics\", {\n        query: {\n          variable: e,\n          f: \"json\"\n        },\n        signal: t\n      }).then(e => e.data?.statistics),\n      s = this.request(this.url + \"/histograms\", {\n        query: {\n          variable: e,\n          f: \"json\"\n        },\n        signal: t\n      }).then(e => e.data?.histograms),\n      r = await Promise.all([i, s]);\n    return r[0] && r[0].forEach(e => {\n      e.avg = e.mean, e.stddev = e.standardDeviation;\n    }), r[1]?.[0]?.counts?.length || (r[1] = null), {\n      statistics: r[0] || null,\n      histograms: r[1] || null\n    };\n  }\n  async computeBestPyramidLevelForLocation(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    if (!this._tilemapCache) return 0;\n    let i = this.identifyPixelLocation(e, 0, t.datumTransformation);\n    if (null === i) return null;\n    let s = 0;\n    const {\n      maximumPyramidLevel: r\n    } = this.rasterInfo.storageInfo;\n    let a = r - s + this._levelOffset;\n    const l = i.srcLocation;\n    for (; a >= 0;) {\n      try {\n        if (\"available\" === (await this._tilemapCache.fetchAvailability(a, i.row, i.col, t))) break;\n      } catch {}\n      if (a--, s++, i = this.identifyPixelLocation(l, s, t.datumTransformation), null === i) return null;\n    }\n    return -1 === a || null == i ? null : s;\n  }\n  async _open(e) {\n    const r = e?.signal,\n      a = this.sourceJSON ? {\n        data: this.sourceJSON\n      } : await this.request(this.url, {\n        query: {\n          f: \"json\"\n        },\n        signal: r\n      });\n    a.ssl && (this.url = this.url.replace(/^http:/i, \"https:\"));\n    const l = a.data;\n    if (this.sourceJSON = l, !l) throw new t(\"imageserverraster:open\", \"cannot initialize tiled image service, missing service info\");\n    if (!l.tileInfo) throw new t(\"imageserverraster:open\", \"use ImageryLayer to open non-tiled image services\");\n    this._fixScaleInServiceInfo();\n    const n = [\"jpg\", \"jpeg\", \"png\", \"png8\", \"png24\", \"png32\", \"mixed\"];\n    this.tileType = l.cacheType, null == this.tileType && (n.includes(l.tileInfo.format.toLowerCase()) ? this.tileType = \"Map\" : \"lerc\" === l.tileInfo.format.toLowerCase() ? this.tileType = \"Elevation\" : this.tileType = \"Raster\"), this.datasetName = l.name?.slice(l.name.indexOf(\"/\") + 1) ?? \"\";\n    const o = await this._fetchRasterInfo({\n      signal: r\n    });\n    if (null == o) throw new t(\"image-server-raster:open\", \"cannot initialize image service\");\n    y(o, l);\n    const c = \"Map\" === this.tileType ? v(l.tileInfo, l) : u.fromJSON(l.tileInfo);\n    i(c);\n    const [f, p] = this._computeMinMaxLOD(o, c),\n      {\n        extent: d,\n        pixelSize: x\n      } = o,\n      g = .5 / o.width * x.x,\n      I = Math.max(x.x, x.y),\n      {\n        lods: w\n      } = c;\n    (\"Map\" !== this.tileType && 0 !== l.maxScale || Math.abs(x.x - x.y) > g || !w.some(e => Math.abs(e.resolution - I) < g)) && (x.x = x.y = f.resolution, o.width = Math.ceil((d.xmax - d.xmin) / x.x - .1), o.height = Math.ceil((d.ymax - d.ymin) / x.y - .1));\n    const j = f.level - p.level,\n      [M, b] = c.size,\n      T = [],\n      _ = [];\n    w.forEach((e, t) => {\n      e.level >= p.level && e.level <= f.level && T.push({\n        x: e.resolution,\n        y: e.resolution\n      }), t < w.length - 1 && _.push(Math.round(10 * e.resolution / w[t + 1].resolution) / 10);\n    }), T.sort((e, t) => e.x - t.x);\n    const O = this.computeBlockBoundary(d, M, b, c.origin, T, j),\n      R = T.length > 1 ? T.slice(1) : null;\n    let z;\n    l.transposeInfo && (z = {\n      tileSize: [l.transposeInfo.rows, l.transposeInfo.cols],\n      packetSize: o.keyProperties?._yxs.PacketSize ?? 0\n    });\n    const N = _.length <= 1 || _.length >= 3 && _.slice(0, -1).every(e => e === _[0]) ? _[0] ?? 2 : Math.round(10 / (p.resolution / f.resolution) ** (-1 / j)) / 10;\n    if (o.storageInfo = new m({\n      blockWidth: c.size[0],\n      blockHeight: c.size[1],\n      pyramidBlockWidth: c.size[0],\n      pyramidBlockHeight: c.size[1],\n      pyramidResolutions: R,\n      pyramidScalingFactor: N,\n      compression: c.format,\n      origin: c.origin,\n      firstPyramidLevel: 1,\n      maximumPyramidLevel: j,\n      tileInfo: c,\n      transposeInfo: z,\n      blockBoundary: O\n    }), S(o), this._set(\"rasterInfo\", o), l.capabilities.toLowerCase().includes(\"tilemap\")) {\n      const e = {\n        tileInfo: o.storageInfo.tileInfo,\n        parsedUrl: s(this.url),\n        url: this.url,\n        tileServers: []\n      };\n      this._tilemapCache = new h({\n        layer: e\n      });\n    }\n  }\n  async _fetchRasterInfo(e) {\n    const t = this.sourceJSON;\n    if (\"Map\" === this.tileType) {\n      const e = t.fullExtent || t.extent,\n        i = Math.ceil((e.xmax - e.xmin) / t.pixelSizeX - .1),\n        s = Math.ceil((e.ymax - e.ymin) / t.pixelSizeY - .1),\n        r = o.fromJSON(t.spatialReference || e.spatialReference),\n        a = new n({\n          x: t.pixelSizeX,\n          y: t.pixelSizeY,\n          spatialReference: r\n        });\n      return new c({\n        width: i,\n        height: s,\n        bandCount: 3,\n        extent: l.fromJSON(e),\n        spatialReference: r,\n        pixelSize: a,\n        pixelType: \"u8\",\n        statistics: null,\n        keyProperties: {\n          DataType: \"processed\"\n        }\n      });\n    }\n    const {\n        signal: i\n      } = e,\n      s = x(this.url, this.sourceJSON, {\n        signal: i,\n        query: this.ioConfig.customFetchParameters\n      }),\n      r = t.hasMultidimensions ? this.request(`${this.url}/slices`, {\n        query: {\n          f: \"json\"\n        },\n        signal: i\n      }).then(e => e.data?.slices).catch(() => null) : null,\n      a = await Promise.all([s, r]);\n    return this._slices = a[1], a[0];\n  }\n  _fixScaleInServiceInfo() {\n    const {\n      sourceJSON: e\n    } = this;\n    e.minScale && e.minScale < 0 && (e.minScale = 0), e.maxScale && e.maxScale < 0 && (e.maxScale = 0);\n  }\n  _computeMinMaxLOD(e, t) {\n    const {\n        pixelSize: i\n      } = e,\n      s = .5 / e.width * i.x,\n      {\n        lods: r\n      } = t,\n      a = t.lodAt(Math.max.apply(null, r.map(e => e.level))),\n      l = t.lodAt(Math.min.apply(null, r.map(e => e.level))),\n      {\n        tileType: n\n      } = this;\n    if (\"Map\" === n) return this._levelOffset = r[0].level, [a, l];\n    if (\"Raster\" === n) {\n      return [r.find(e => e.resolution === i.x) ?? a, l];\n    }\n    const {\n      minScale: o,\n      maxScale: c\n    } = this.sourceJSON;\n    let m = a;\n    c > 0 && (m = r.find(e => Math.abs(e.scale - c) < s), m || (m = r.filter(e => e.scale > c).sort((e, t) => e.scale > t.scale ? 1 : -1)[0] ?? a));\n    let u = l;\n    return o > 0 && (u = r.find(e => Math.abs(e.scale - o) < s) ?? l, this._levelOffset = u.level - l.level), [m, u];\n  }\n};\nfunction v(e, t) {\n  if (!e) return null;\n  const {\n    minScale: i,\n    maxScale: s,\n    minLOD: r,\n    maxLOD: a\n  } = t;\n  if (null != r && null != a) return u.fromJSON({\n    ...e,\n    lods: e.lods.filter(_ref => {\n      let {\n        level: e\n      } = _ref;\n      return null != e && e >= r && e <= a;\n    })\n  });\n  if (0 !== i && 0 !== s) {\n    const t = e => Math.round(1e4 * e) / 1e4,\n      r = i ? t(i) : 1 / 0,\n      a = s ? t(s) : -1 / 0;\n    return u.fromJSON({\n      ...e,\n      lods: e.lods.filter(e => {\n        const i = t(e.scale);\n        return i <= r && i >= a;\n      })\n    });\n  }\n  return u.fromJSON(e);\n}\nfunction S(e) {\n  const {\n    extent: t,\n    spatialReference: i\n  } = e;\n  t.xmin > -1 && t.xmax > 181 && i?.wkid && i.isGeographic && (e.nativeExtent = e.extent, e.transform = new d(), e.extent = e.transform.forwardTransform(t));\n}\ne([r({\n  type: String,\n  json: {\n    write: !0\n  }\n})], g.prototype, \"datasetFormat\", void 0), e([r()], g.prototype, \"tileType\", void 0), g = e([a(\"esri.layers.support.rasterDatasets.ImageServerRaster\")], g);\nconst I = g;\nexport { I as default };","map":{"version":3,"names":["_","e","t","assertIsSome","i","urlToObject","s","property","r","subclass","a","l","n","o","c","m","u","TilemapCache","h","f","setValidBoundary","p","d","patchServiceInfo","y","fetchServiceRasterInfo","x","g","constructor","arguments","_levelOffset","_tilemapCache","_slices","datasetFormat","tileType","fetchRawTile","length","undefined","storageInfo","extent","rasterInfo","transposeInfo","transposedVariableName","sliceId","maximumPyramidLevel","url","variable","data","request","query","responseType","signal","tileSize","tileInfo","size","decodePixelBlock","width","height","planes","pixelType","isPoint","returnInterleaved","noDataValue","blockBoundary","compression","minCol","maxCol","minRow","maxRow","origin","blockWidth","blockHeight","v","S","getPyramidPixelSize","I","Math","round","xmin","w","xmax","j","ymax","M","ymin","b","T","O","getSliceIndex","multidimensionalDefinition","some","find","variableName","dimensionName","Array","isArray","values","fetchVariableStatisticsHistograms","then","statistics","histograms","Promise","all","forEach","avg","mean","stddev","standardDeviation","counts","computeBestPyramidLevelForLocation","identifyPixelLocation","datumTransformation","srcLocation","fetchAvailability","row","col","_open","sourceJSON","ssl","replace","_fixScaleInServiceInfo","cacheType","includes","format","toLowerCase","datasetName","name","slice","indexOf","_fetchRasterInfo","fromJSON","_computeMinMaxLOD","pixelSize","max","lods","maxScale","abs","resolution","ceil","level","push","sort","computeBlockBoundary","R","z","rows","cols","packetSize","keyProperties","_yxs","PacketSize","N","every","pyramidBlockWidth","pyramidBlockHeight","pyramidResolutions","pyramidScalingFactor","firstPyramidLevel","_set","capabilities","parsedUrl","tileServers","layer","fullExtent","pixelSizeX","pixelSizeY","spatialReference","bandCount","DataType","ioConfig","customFetchParameters","hasMultidimensions","slices","catch","minScale","lodAt","apply","map","min","scale","filter","minLOD","maxLOD","_ref","wkid","isGeographic","nativeExtent","transform","forwardTransform","type","String","json","write","prototype","default"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/layers/support/rasterDatasets/ImageServerRaster.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Error.js\";import{assertIsSome as i}from\"../../../core/maybe.js\";import{urlToObject as s}from\"../../../core/urlUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import l from\"../../../geometry/Extent.js\";import n from\"../../../geometry/Point.js\";import o from\"../../../geometry/SpatialReference.js\";import c from\"../RasterInfo.js\";import m from\"../RasterStorageInfo.js\";import u from\"../TileInfo.js\";import{TilemapCache as h}from\"../TilemapCache.js\";import f from\"./BaseRaster.js\";import{setValidBoundary as p}from\"../rasterFunctions/pixelUtils.js\";import d from\"../rasterTransforms/GCSShiftTransform.js\";import{patchServiceInfo as y,fetchServiceRasterInfo as x}from\"../../../rest/imageService/fetchRasterInfo.js\";let g=class extends f{constructor(){super(...arguments),this._levelOffset=0,this._tilemapCache=null,this._slices=null,this.datasetFormat=\"RasterTileServer\",this.tileType=null}async fetchRawTile(e,t,i,s={}){const{storageInfo:r,extent:a}=this.rasterInfo,{transposeInfo:l}=r,n=null!=l&&!!s.transposedVariableName;if(this._slices&&!n&&null==s.sliceId)return null;const o=n?0:r.maximumPyramidLevel-e+this._levelOffset,c=`${this.url}/tile/${o}/${t}/${i}`,m=this._slices?n?{variable:s.transposedVariableName}:{sliceId:s.sliceId||0}:null,{data:u}=await this.request(c,{query:m,responseType:\"array-buffer\",signal:s.signal});if(!u)return null;const h=n?l.tileSize:r.tileInfo.size,f=await this.decodePixelBlock(u,{width:h[0],height:h[1],planes:null,pixelType:null,isPoint:\"Elevation\"===this.tileType,returnInterleaved:n,noDataValue:this.rasterInfo.noDataValue});if(null==f)return null;const d=r.blockBoundary[e];if(\"jpg\"!==r.compression||i>d.minCol&&i<d.maxCol&&t>d.minRow&&t<d.maxRow)return f;const{origin:y,blockWidth:x,blockHeight:g}=r,{x:v,y:S}=this.getPyramidPixelSize(e),I=Math.round((a.xmin-y.x)/v)%x,w=Math.round((a.xmax-y.x)/v)%x||x,j=Math.round((y.y-a.ymax)/S)%g,M=Math.round((y.y-a.ymin)/S)%g||g,b=i===d.minCol?I:0,T=t===d.minRow?j:0,_=i===d.maxCol?w:x,O=t===d.maxRow?M:g;return p(f,{x:b,y:T},{width:_-b,height:O-T}),f}getSliceIndex(e){if(!this._slices||null==e||0===e.length)return null;const t=e;for(let i=0;i<this._slices.length;i++){const e=this._slices[i].multidimensionalDefinition;if(e.length===t.length&&!e.some((e=>{const i=t.find((t=>e.variableName===t.variableName&&t.dimensionName===e.dimensionName));if(!i)return!0;return(Array.isArray(e.values[0])?`${e.values[0][0]}-${e.values[0][1]}`:e.values[0])!==(Array.isArray(i.values[0])?`${i.values[0][0]}-${i.values[0][1]}`:i.values[0])})))return i}return null}async fetchVariableStatisticsHistograms(e,t){const i=this.request(this.url+\"/statistics\",{query:{variable:e,f:\"json\"},signal:t}).then((e=>e.data?.statistics)),s=this.request(this.url+\"/histograms\",{query:{variable:e,f:\"json\"},signal:t}).then((e=>e.data?.histograms)),r=await Promise.all([i,s]);return r[0]&&r[0].forEach((e=>{e.avg=e.mean,e.stddev=e.standardDeviation})),r[1]?.[0]?.counts?.length||(r[1]=null),{statistics:r[0]||null,histograms:r[1]||null}}async computeBestPyramidLevelForLocation(e,t={}){if(!this._tilemapCache)return 0;let i=this.identifyPixelLocation(e,0,t.datumTransformation);if(null===i)return null;let s=0;const{maximumPyramidLevel:r}=this.rasterInfo.storageInfo;let a=r-s+this._levelOffset;const l=i.srcLocation;for(;a>=0;){try{if(\"available\"===await this._tilemapCache.fetchAvailability(a,i.row,i.col,t))break}catch{}if(a--,s++,i=this.identifyPixelLocation(l,s,t.datumTransformation),null===i)return null}return-1===a||null==i?null:s}async _open(e){const r=e?.signal,a=this.sourceJSON?{data:this.sourceJSON}:await this.request(this.url,{query:{f:\"json\"},signal:r});a.ssl&&(this.url=this.url.replace(/^http:/i,\"https:\"));const l=a.data;if(this.sourceJSON=l,!l)throw new t(\"imageserverraster:open\",\"cannot initialize tiled image service, missing service info\");if(!l.tileInfo)throw new t(\"imageserverraster:open\",\"use ImageryLayer to open non-tiled image services\");this._fixScaleInServiceInfo();const n=[\"jpg\",\"jpeg\",\"png\",\"png8\",\"png24\",\"png32\",\"mixed\"];this.tileType=l.cacheType,null==this.tileType&&(n.includes(l.tileInfo.format.toLowerCase())?this.tileType=\"Map\":\"lerc\"===l.tileInfo.format.toLowerCase()?this.tileType=\"Elevation\":this.tileType=\"Raster\"),this.datasetName=l.name?.slice(l.name.indexOf(\"/\")+1)??\"\";const o=await this._fetchRasterInfo({signal:r});if(null==o)throw new t(\"image-server-raster:open\",\"cannot initialize image service\");y(o,l);const c=\"Map\"===this.tileType?v(l.tileInfo,l):u.fromJSON(l.tileInfo);i(c);const[f,p]=this._computeMinMaxLOD(o,c),{extent:d,pixelSize:x}=o,g=.5/o.width*x.x,I=Math.max(x.x,x.y),{lods:w}=c;(\"Map\"!==this.tileType&&0!==l.maxScale||Math.abs(x.x-x.y)>g||!w.some((e=>Math.abs(e.resolution-I)<g)))&&(x.x=x.y=f.resolution,o.width=Math.ceil((d.xmax-d.xmin)/x.x-.1),o.height=Math.ceil((d.ymax-d.ymin)/x.y-.1));const j=f.level-p.level,[M,b]=c.size,T=[],_=[];w.forEach(((e,t)=>{e.level>=p.level&&e.level<=f.level&&T.push({x:e.resolution,y:e.resolution}),t<w.length-1&&_.push(Math.round(10*e.resolution/w[t+1].resolution)/10)})),T.sort(((e,t)=>e.x-t.x));const O=this.computeBlockBoundary(d,M,b,c.origin,T,j),R=T.length>1?T.slice(1):null;let z;l.transposeInfo&&(z={tileSize:[l.transposeInfo.rows,l.transposeInfo.cols],packetSize:o.keyProperties?._yxs.PacketSize??0});const N=_.length<=1||_.length>=3&&_.slice(0,-1).every((e=>e===_[0]))?_[0]??2:Math.round(10/(p.resolution/f.resolution)**(-1/j))/10;if(o.storageInfo=new m({blockWidth:c.size[0],blockHeight:c.size[1],pyramidBlockWidth:c.size[0],pyramidBlockHeight:c.size[1],pyramidResolutions:R,pyramidScalingFactor:N,compression:c.format,origin:c.origin,firstPyramidLevel:1,maximumPyramidLevel:j,tileInfo:c,transposeInfo:z,blockBoundary:O}),S(o),this._set(\"rasterInfo\",o),l.capabilities.toLowerCase().includes(\"tilemap\")){const e={tileInfo:o.storageInfo.tileInfo,parsedUrl:s(this.url),url:this.url,tileServers:[]};this._tilemapCache=new h({layer:e})}}async _fetchRasterInfo(e){const t=this.sourceJSON;if(\"Map\"===this.tileType){const e=t.fullExtent||t.extent,i=Math.ceil((e.xmax-e.xmin)/t.pixelSizeX-.1),s=Math.ceil((e.ymax-e.ymin)/t.pixelSizeY-.1),r=o.fromJSON(t.spatialReference||e.spatialReference),a=new n({x:t.pixelSizeX,y:t.pixelSizeY,spatialReference:r});return new c({width:i,height:s,bandCount:3,extent:l.fromJSON(e),spatialReference:r,pixelSize:a,pixelType:\"u8\",statistics:null,keyProperties:{DataType:\"processed\"}})}const{signal:i}=e,s=x(this.url,this.sourceJSON,{signal:i,query:this.ioConfig.customFetchParameters}),r=t.hasMultidimensions?this.request(`${this.url}/slices`,{query:{f:\"json\"},signal:i}).then((e=>e.data?.slices)).catch((()=>null)):null,a=await Promise.all([s,r]);return this._slices=a[1],a[0]}_fixScaleInServiceInfo(){const{sourceJSON:e}=this;e.minScale&&e.minScale<0&&(e.minScale=0),e.maxScale&&e.maxScale<0&&(e.maxScale=0)}_computeMinMaxLOD(e,t){const{pixelSize:i}=e,s=.5/e.width*i.x,{lods:r}=t,a=t.lodAt(Math.max.apply(null,r.map((e=>e.level)))),l=t.lodAt(Math.min.apply(null,r.map((e=>e.level)))),{tileType:n}=this;if(\"Map\"===n)return this._levelOffset=r[0].level,[a,l];if(\"Raster\"===n){return[r.find((e=>e.resolution===i.x))??a,l]}const{minScale:o,maxScale:c}=this.sourceJSON;let m=a;c>0&&(m=r.find((e=>Math.abs(e.scale-c)<s)),m||(m=r.filter((e=>e.scale>c)).sort(((e,t)=>e.scale>t.scale?1:-1))[0]??a));let u=l;return o>0&&(u=r.find((e=>Math.abs(e.scale-o)<s))??l,this._levelOffset=u.level-l.level),[m,u]}};function v(e,t){if(!e)return null;const{minScale:i,maxScale:s,minLOD:r,maxLOD:a}=t;if(null!=r&&null!=a)return u.fromJSON({...e,lods:e.lods.filter((({level:e})=>null!=e&&e>=r&&e<=a))});if(0!==i&&0!==s){const t=e=>Math.round(1e4*e)/1e4,r=i?t(i):1/0,a=s?t(s):-1/0;return u.fromJSON({...e,lods:e.lods.filter((e=>{const i=t(e.scale);return i<=r&&i>=a}))})}return u.fromJSON(e)}function S(e){const{extent:t,spatialReference:i}=e;t.xmin>-1&&t.xmax>181&&i?.wkid&&i.isGeographic&&(e.nativeExtent=e.extent,e.transform=new d,e.extent=e.transform.forwardTransform(t))}e([r({type:String,json:{write:!0}})],g.prototype,\"datasetFormat\",void 0),e([r()],g.prototype,\"tileType\",void 0),g=e([a(\"esri.layers.support.rasterDatasets.ImageServerRaster\")],g);const I=g;export{I as default};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}