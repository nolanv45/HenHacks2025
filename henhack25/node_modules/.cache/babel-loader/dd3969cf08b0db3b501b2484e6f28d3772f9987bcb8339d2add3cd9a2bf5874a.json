{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport t from \"../../core/Accessor.js\";\nimport \"../../core/has.js\";\nimport i from \"../../core/Logger.js\";\nimport r from \"../../core/Queue.js\";\nimport { property as n } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/RandomLCG.js\";\nimport { subclass as s } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { primaryKey as o, isSystemModifier as a } from \"./keys.js\";\nimport { LatestPointer as l } from \"./handlers/LatestPointer.js\";\nimport { MultiTouch as h } from \"./handlers/MultiTouch.js\";\nimport { PropertiesPool as p } from \"../support/PropertiesPool.js\";\nlet d = class extends t {\n  constructor(e) {\n    super(e), this._pointerCaptures = new Map(), this._nameToGroup = {}, this._handlers = [], this._handlersPriority = [], this._currentPropagation = null, this._updateDependenciesAfterPropagation = !1, this._sourceEvents = new Set(), this._keyModifiers = new Set(), this._activeKeyModifiers = new Set(), this._stoppedPropagationEventIds = new Set(), this.primaryKey = o, this._latestPointerType = \"mouse\", this._propertiesPool = new p({\n      latestPointerLocation: P\n    }, this), this.latestPointerLocation = null, this._paused = !1, this.test = {\n      timestamp: void 0,\n      hasCurrentPropagation: () => !!this._currentPropagation\n    };\n  }\n  initialize() {\n    this.eventSource.onEventReceived = this._onEventReceived.bind(this), this._installRecognizers();\n  }\n  destroy() {\n    const e = Object.keys(this._nameToGroup);\n    for (const t of e) this.uninstallHandlers(t);\n    this.eventSource.destroy(), this._currentPropagation = null, this._propertiesPool.destroy();\n  }\n  get hasPendingInputs() {\n    return this._handlers.some(e => e.handler.hasPendingInputs);\n  }\n  get latestPointerType() {\n    return this._latestPointerType;\n  }\n  get multiTouchActive() {\n    return this._multiTouchHandler.multiTouchActive;\n  }\n  get updating() {\n    return this.hasPendingInputs || this._paused;\n  }\n  installHandlers(e, t, i = _.INTERNAL) {\n    if (this._nameToGroup[e]) return;\n    if (0 === t.length) return;\n    const r = {\n      name: e,\n      handlers: t.map(e => ({\n        handler: e,\n        active: !0,\n        removed: !1,\n        priorityIndex: 0,\n        groupPriority: i,\n        eventCallback: null,\n        uninstallCallback: null\n      }))\n    };\n    this._nameToGroup[e] = r;\n    for (let n = r.handlers.length - 1; n >= 0; n--) {\n      const e = r.handlers[n];\n      this._handlers.push(e), e.handler.onInstall({\n        updateDependencies: () => {\n          this.updateDependencies();\n        },\n        emit: (t, i, r, n, s) => {\n          this._emitInputEvent(e.priorityIndex + 1, t, i, r, s, n);\n        },\n        setPointerCapture: (t, i) => {\n          this._setPointerCapture(r, e, t, i);\n        },\n        setEventCallback: t => {\n          e.eventCallback = t;\n        },\n        setUninstallCallback: t => {\n          e.uninstallCallback = t;\n        },\n        refreshHasPendingInputs: () => {\n          this.notifyChange(\"hasPendingInputs\");\n        }\n      });\n    }\n    this.updateDependencies();\n  }\n  uninstallHandlers(e) {\n    const t = this._nameToGroup[e];\n    t ? (t.handlers.forEach(e => {\n      e.removed = !0, e.uninstallCallback?.();\n    }), delete this._nameToGroup[e], this._currentPropagation ? this._currentPropagation.needsHandlerGarbageCollect = !0 : this._garbageCollectRemovedHandlers()) : i.getLogger(this).error(\"There is no InputHandler group registered under the name `\" + e + \"`\");\n  }\n  hasHandlers(e) {\n    return void 0 !== this._nameToGroup[e];\n  }\n  isModifierKeyDown(e) {\n    return this._activeKeyModifiers.has(e);\n  }\n  updateDependencies() {\n    if (this._currentPropagation) return void (this._updateDependenciesAfterPropagation = !0);\n    this._updateDependenciesAfterPropagation = !1;\n    const e = new Set(),\n      t = new Set();\n    this._handlersPriority = [];\n    for (let i = this._handlers.length - 1; i >= 0; i--) {\n      const e = this._handlers[i];\n      e.priorityIndex = i, this._handlersPriority.push(e);\n    }\n    this._handlersPriority = this._sortHandlersPriority(this._handlersPriority);\n    for (let i = this._handlersPriority.length - 1; i >= 0; i--) {\n      const r = this._handlersPriority[i];\n      r.priorityIndex = i;\n      let n = r.handler.hasSideEffects;\n      if (!n) for (const t of r.handler.outgoingEventTypes) if (e.has(t)) {\n        n = !0;\n        break;\n      }\n      if (n) for (const i of r.handler.incomingEventMatches) {\n        e.add(i.eventType);\n        for (const e of i.keyModifiers) a(e) || t.add(e);\n      }\n      r.active = n;\n    }\n    this._sourceEvents = e, this._keyModifiers = t, this._pointerCaptures.size > 0 && this._sourceEvents.add(\"pointer-capture-lost\"), this._keyModifiers.size > 0 && (this._sourceEvents.add(\"key-down\"), this._sourceEvents.add(\"key-up\")), this.eventSource && (this.eventSource.activeEvents = this._sourceEvents);\n  }\n  _setLatestPointer(e, t, i) {\n    this._latestPointerType = e;\n    const r = this._get(\"latestPointerLocation\");\n    if (null == r || r.x !== t || r.y !== i) {\n      const e = this._propertiesPool.get(\"latestPointerLocation\");\n      e.x = t, e.y = i, this._set(\"latestPointerLocation\", e);\n    }\n  }\n  _onEventReceived(e, t) {\n    if (\"pointer-capture-lost\" === e) {\n      const e = t;\n      this._pointerCaptures.delete(e.native.pointerId);\n    }\n    this._updateKeyModifiers(e, t);\n    const i = null != this.test.timestamp ? this.test.timestamp : t.native ? t.native.timestamp : void 0,\n      r = t.native ? t.native.cancelable : void 0;\n    this._emitInputEventFromSource(e, t, i, r);\n  }\n  _updateKeyModifiers(e, t) {\n    if (!t) return;\n    let i = !1;\n    const r = () => {\n        i || (this._activeKeyModifiers = new Set(this._activeKeyModifiers), i = !0);\n      },\n      n = (e, t) => {\n        t && !this._activeKeyModifiers.has(e) ? (r(), this._activeKeyModifiers.add(e)) : !t && this._activeKeyModifiers.has(e) && (r(), this._activeKeyModifiers.delete(e));\n      };\n    if (\"key-down\" === e || \"key-up\" === e) {\n      const i = t.key;\n      this._keyModifiers.has(i) && n(i, \"key-down\" === e);\n    }\n    const s = t.native;\n    n(\"Alt\", !!s?.altKey), n(\"Control\", !!s?.ctrlKey), n(\"Ctrl\", !!s?.ctrlKey), n(\"Shift\", !!s?.shiftKey), n(\"Meta\", !!s?.metaKey), n(\"Primary\", this._activeKeyModifiers.has(this.primaryKey));\n  }\n  _installRecognizers() {\n    this._latestPointerHandler = new l((e, t, i) => this._setLatestPointer(e, t, i)), this._multiTouchHandler = new h(), this.installHandlers(\"input-manager-logic\", [this._latestPointerHandler, this._multiTouchHandler], _.ALWAYS), this.recognizers.length > 0 && this.installHandlers(\"default\", this.recognizers, _.INTERNAL);\n  }\n  _setPointerCapture(e, t, i, r) {\n    const n = e.name + \"-\" + t.priorityIndex,\n      s = this._pointerCaptures.get(i.pointerId) || new Set();\n    this._pointerCaptures.set(i.pointerId, s), r ? (s.add(n), 1 === s.size && this.eventSource && this.eventSource.setPointerCapture(i, !0)) : s.has(n) && (s.delete(n), 0 === s.size && (this._pointerCaptures.delete(i.pointerId), this.eventSource && this.eventSource.setPointerCapture(i, !1)));\n  }\n  _garbageCollectRemovedHandlers() {\n    this._handlers = this._handlers.filter(e => !e.removed), this.updateDependencies();\n  }\n  _emitInputEventFromSource(e, t, i, r) {\n    this._emitInputEvent(0, e, t, i, r);\n  }\n  _emitInputEvent(e, t, i, r, n, s) {\n    const o = void 0 !== r ? r : this._currentPropagation ? this._currentPropagation.timestamp : performance.now(),\n      a = void 0 !== n && n,\n      l = {\n        event: new u(t, i, o, s || this._activeKeyModifiers, a),\n        priorityIndex: e\n      };\n    this._currentPropagation ? this._currentPropagation.events.push(l) : this._doNewPropagation(l);\n  }\n  _doNewPropagation(e) {\n    this._currentPropagation = {\n      events: new r(),\n      currentHandler: null,\n      needsHandlerGarbageCollect: !1,\n      timestamp: e.event.timestamp\n    }, this._currentPropagation.events.push(e), this._continuePropagation();\n  }\n  _continuePropagation() {\n    this._paused = !1;\n    const e = this._currentPropagation;\n    if (e) {\n      for (; e.events.length > 0;) {\n        const {\n            event: t,\n            priorityIndex: i\n          } = e.events.pop(),\n          r = t.data?.eventId;\n        if (!(null != r && this._stoppedPropagationEventIds.has(r))) for (e.currentHandler = this._handlersPriority[i]; e.currentHandler;) {\n          if (e.currentHandler.removed) e.needsHandlerGarbageCollect = !0;else {\n            if (e.currentHandler.active && !t.shouldStopPropagation() && e.currentHandler.eventCallback?.(t), t.shouldStopPropagation()) {\n              null != r && this._stoppedPropagationEventIds.add(r);\n              break;\n            }\n            if (t.shouldPausePropagation(() => this._continuePropagation())) return void this._pausePropagation({\n              event: t,\n              priorityIndex: e.currentHandler.priorityIndex + 1\n            });\n          }\n          e.currentHandler = this._handlersPriority[e.currentHandler.priorityIndex + 1];\n        }\n      }\n      e.needsHandlerGarbageCollect && this._garbageCollectRemovedHandlers(), this.hasPendingInputs || this._stoppedPropagationEventIds.clear(), this._currentPropagation = null, this._updateDependenciesAfterPropagation && this.updateDependencies();\n    }\n  }\n  _pausePropagation(e) {\n    const t = new r();\n    t.push(e);\n    const i = this._currentPropagation;\n    if (i) {\n      for (; i.events.length;) t.push(i.events.pop());\n      i.events = t, i.currentHandler = null, this._paused = !0;\n    }\n  }\n  _compareHandlerPriority(e, t) {\n    if (e.handler.hasSideEffects !== t.handler.hasSideEffects) return e.handler.hasSideEffects ? 1 : -1;\n    if (e.groupPriority !== t.groupPriority) return e.groupPriority > t.groupPriority ? -1 : 1;\n    for (const i of e.handler.incomingEventMatches) for (const e of t.handler.incomingEventMatches) {\n      if (i.eventType !== e.eventType) continue;\n      const t = i.keyModifiers.filter(t => e.keyModifiers.includes(t));\n      if (t.length === i.keyModifiers.length !== (t.length === e.keyModifiers.length)) return i.keyModifiers.length > e.keyModifiers.length ? -1 : 1;\n    }\n    return e.priorityIndex > t.priorityIndex ? -1 : 1;\n  }\n  _sortHandlersPriority(e) {\n    const t = [];\n    for (const i of e) {\n      let e = 0;\n      for (; e < t.length && this._compareHandlerPriority(i, t[e]) >= 0;) e++;\n      t.splice(e, 0, i);\n    }\n    return t;\n  }\n  get debug() {\n    const e = e => {\n      const t = this._setPointerCapture;\n      this._setPointerCapture = () => {}, e(), this._setPointerCapture = t;\n    };\n    return {\n      injectEvent: (t, i) => {\n        e(() => this._onEventReceived(t, i));\n      },\n      disablePointerCapture: e\n    };\n  }\n};\ne([n({\n  readOnly: !0\n})], d.prototype, \"hasPendingInputs\", null), e([n({\n  constructOnly: !0\n})], d.prototype, \"eventSource\", void 0), e([n({\n  constructOnly: !0\n})], d.prototype, \"recognizers\", void 0), e([n()], d.prototype, \"_latestPointerType\", void 0), e([n()], d.prototype, \"latestPointerType\", null), e([n()], d.prototype, \"multiTouchActive\", null), e([n({\n  readOnly: !0\n})], d.prototype, \"latestPointerLocation\", void 0), e([n()], d.prototype, \"_paused\", void 0), e([n({\n  readOnly: !0\n})], d.prototype, \"updating\", null), d = e([s(\"esri.views.input.InputManager\")], d);\nclass u {\n  constructor(e, t, i, r, n) {\n    this.type = e, this.data = t, this.timestamp = i, this.modifiers = r, this.cancelable = n, this._propagationState = c.NONE, this._resumeCallback = null;\n  }\n  stopPropagation() {\n    this._propagationState |= c.STOPPED;\n  }\n  shouldStopPropagation() {\n    return !!(this._propagationState & c.STOPPED);\n  }\n  async(e) {\n    this._propagationState |= c.PAUSED;\n    const t = (e, t) => {\n      this._propagationState &= ~c.PAUSED;\n      const i = this._resumeCallback;\n      if (this._resumeCallback = null, i && i(), t) throw e;\n      return e;\n    };\n    return (\"function\" == typeof e ? e() : e).then(e => t(e, !1), e => t(e, !0));\n  }\n  shouldPausePropagation(e) {\n    return !!(this._propagationState & c.PAUSED) && (this._resumeCallback = e, !0);\n  }\n  preventDefault() {\n    this.data.native.preventDefault();\n  }\n}\nvar c;\n!function (e) {\n  e[e.NONE = 0] = \"NONE\", e[e.STOPPED = 1] = \"STOPPED\", e[e.PAUSED = 2] = \"PAUSED\";\n}(c || (c = {}));\nconst _ = {\n  ALWAYS: 1,\n  DEFAULT: 0,\n  TOOL: -1,\n  WIDGET: -2,\n  INTERNAL: -3\n};\nclass g {}\nconst P = g;\nexport { d as InputManager, _ as ViewEventPriorities };","map":{"version":3,"names":["_","e","t","i","r","property","n","subclass","s","primaryKey","o","isSystemModifier","a","LatestPointer","l","MultiTouch","h","PropertiesPool","p","d","constructor","_pointerCaptures","Map","_nameToGroup","_handlers","_handlersPriority","_currentPropagation","_updateDependenciesAfterPropagation","_sourceEvents","Set","_keyModifiers","_activeKeyModifiers","_stoppedPropagationEventIds","_latestPointerType","_propertiesPool","latestPointerLocation","P","_paused","test","timestamp","hasCurrentPropagation","initialize","eventSource","onEventReceived","_onEventReceived","bind","_installRecognizers","destroy","Object","keys","uninstallHandlers","hasPendingInputs","some","handler","latestPointerType","multiTouchActive","_multiTouchHandler","updating","installHandlers","INTERNAL","length","name","handlers","map","active","removed","priorityIndex","groupPriority","eventCallback","uninstallCallback","push","onInstall","updateDependencies","emit","_emitInputEvent","setPointerCapture","_setPointerCapture","setEventCallback","setUninstallCallback","refreshHasPendingInputs","notifyChange","forEach","needsHandlerGarbageCollect","_garbageCollectRemovedHandlers","getLogger","error","hasHandlers","isModifierKeyDown","has","_sortHandlersPriority","hasSideEffects","outgoingEventTypes","incomingEventMatches","add","eventType","keyModifiers","size","activeEvents","_setLatestPointer","_get","x","y","get","_set","delete","native","pointerId","_updateKeyModifiers","cancelable","_emitInputEventFromSource","key","altKey","ctrlKey","shiftKey","metaKey","_latestPointerHandler","ALWAYS","recognizers","set","filter","performance","now","event","u","events","_doNewPropagation","currentHandler","_continuePropagation","pop","data","eventId","shouldStopPropagation","shouldPausePropagation","_pausePropagation","clear","_compareHandlerPriority","includes","splice","debug","injectEvent","disablePointerCapture","readOnly","prototype","constructOnly","type","modifiers","_propagationState","c","NONE","_resumeCallback","stopPropagation","STOPPED","async","PAUSED","then","preventDefault","DEFAULT","TOOL","WIDGET","g","InputManager","ViewEventPriorities"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/input/InputManager.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Accessor.js\";import\"../../core/has.js\";import i from\"../../core/Logger.js\";import r from\"../../core/Queue.js\";import{property as n}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/RandomLCG.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import{primaryKey as o,isSystemModifier as a}from\"./keys.js\";import{LatestPointer as l}from\"./handlers/LatestPointer.js\";import{MultiTouch as h}from\"./handlers/MultiTouch.js\";import{PropertiesPool as p}from\"../support/PropertiesPool.js\";let d=class extends t{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=o,this._latestPointerType=\"mouse\",this._propertiesPool=new p({latestPointerLocation:P},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const t of e)this.uninstallHandlers(t);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some((e=>e.handler.hasPendingInputs))}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,t,i=_.INTERNAL){if(this._nameToGroup[e])return;if(0===t.length)return;const r={name:e,handlers:t.map((e=>({handler:e,active:!0,removed:!1,priorityIndex:0,groupPriority:i,eventCallback:null,uninstallCallback:null})))};this._nameToGroup[e]=r;for(let n=r.handlers.length-1;n>=0;n--){const e=r.handlers[n];this._handlers.push(e),e.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(t,i,r,n,s)=>{this._emitInputEvent(e.priorityIndex+1,t,i,r,s,n)},setPointerCapture:(t,i)=>{this._setPointerCapture(r,e,t,i)},setEventCallback:t=>{e.eventCallback=t},setUninstallCallback:t=>{e.uninstallCallback=t},refreshHasPendingInputs:()=>{this.notifyChange(\"hasPendingInputs\")}})}this.updateDependencies()}uninstallHandlers(e){const t=this._nameToGroup[e];t?(t.handlers.forEach((e=>{e.removed=!0,e.uninstallCallback?.()})),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):i.getLogger(this).error(\"There is no InputHandler group registered under the name `\"+e+\"`\")}hasHandlers(e){return void 0!==this._nameToGroup[e]}isModifierKeyDown(e){return this._activeKeyModifiers.has(e)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,t=new Set;this._handlersPriority=[];for(let i=this._handlers.length-1;i>=0;i--){const e=this._handlers[i];e.priorityIndex=i,this._handlersPriority.push(e)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let i=this._handlersPriority.length-1;i>=0;i--){const r=this._handlersPriority[i];r.priorityIndex=i;let n=r.handler.hasSideEffects;if(!n)for(const t of r.handler.outgoingEventTypes)if(e.has(t)){n=!0;break}if(n)for(const i of r.handler.incomingEventMatches){e.add(i.eventType);for(const e of i.keyModifiers)a(e)||t.add(e)}r.active=n}this._sourceEvents=e,this._keyModifiers=t,this._pointerCaptures.size>0&&this._sourceEvents.add(\"pointer-capture-lost\"),this._keyModifiers.size>0&&(this._sourceEvents.add(\"key-down\"),this._sourceEvents.add(\"key-up\")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,t,i){this._latestPointerType=e;const r=this._get(\"latestPointerLocation\");if(null==r||r.x!==t||r.y!==i){const e=this._propertiesPool.get(\"latestPointerLocation\");e.x=t,e.y=i,this._set(\"latestPointerLocation\",e)}}_onEventReceived(e,t){if(\"pointer-capture-lost\"===e){const e=t;this._pointerCaptures.delete(e.native.pointerId)}this._updateKeyModifiers(e,t);const i=null!=this.test.timestamp?this.test.timestamp:t.native?t.native.timestamp:void 0,r=t.native?t.native.cancelable:void 0;this._emitInputEventFromSource(e,t,i,r)}_updateKeyModifiers(e,t){if(!t)return;let i=!1;const r=()=>{i||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),i=!0)},n=(e,t)=>{t&&!this._activeKeyModifiers.has(e)?(r(),this._activeKeyModifiers.add(e)):!t&&this._activeKeyModifiers.has(e)&&(r(),this._activeKeyModifiers.delete(e))};if(\"key-down\"===e||\"key-up\"===e){const i=t.key;this._keyModifiers.has(i)&&n(i,\"key-down\"===e)}const s=t.native;n(\"Alt\",!!s?.altKey),n(\"Control\",!!s?.ctrlKey),n(\"Ctrl\",!!s?.ctrlKey),n(\"Shift\",!!s?.shiftKey),n(\"Meta\",!!s?.metaKey),n(\"Primary\",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new l(((e,t,i)=>this._setLatestPointer(e,t,i))),this._multiTouchHandler=new h,this.installHandlers(\"input-manager-logic\",[this._latestPointerHandler,this._multiTouchHandler],_.ALWAYS),this.recognizers.length>0&&this.installHandlers(\"default\",this.recognizers,_.INTERNAL)}_setPointerCapture(e,t,i,r){const n=e.name+\"-\"+t.priorityIndex,s=this._pointerCaptures.get(i.pointerId)||new Set;this._pointerCaptures.set(i.pointerId,s),r?(s.add(n),1===s.size&&this.eventSource&&this.eventSource.setPointerCapture(i,!0)):s.has(n)&&(s.delete(n),0===s.size&&(this._pointerCaptures.delete(i.pointerId),this.eventSource&&this.eventSource.setPointerCapture(i,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter((e=>!e.removed)),this.updateDependencies()}_emitInputEventFromSource(e,t,i,r){this._emitInputEvent(0,e,t,i,r)}_emitInputEvent(e,t,i,r,n,s){const o=void 0!==r?r:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),a=void 0!==n&&n,l={event:new u(t,i,o,s||this._activeKeyModifiers,a),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(l):this._doNewPropagation(l)}_doNewPropagation(e){this._currentPropagation={events:new r,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:t,priorityIndex:i}=e.events.pop(),r=t.data?.eventId;if(!(null!=r&&this._stoppedPropagationEventIds.has(r)))for(e.currentHandler=this._handlersPriority[i];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!t.shouldStopPropagation()&&e.currentHandler.eventCallback?.(t),t.shouldStopPropagation()){null!=r&&this._stoppedPropagationEventIds.add(r);break}if(t.shouldPausePropagation((()=>this._continuePropagation())))return void this._pausePropagation({event:t,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const t=new r;t.push(e);const i=this._currentPropagation;if(i){for(;i.events.length;)t.push(i.events.pop());i.events=t,i.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;for(const i of e.handler.incomingEventMatches)for(const e of t.handler.incomingEventMatches){if(i.eventType!==e.eventType)continue;const t=i.keyModifiers.filter((t=>e.keyModifiers.includes(t)));if(t.length===i.keyModifiers.length!==(t.length===e.keyModifiers.length))return i.keyModifiers.length>e.keyModifiers.length?-1:1}return e.priorityIndex>t.priorityIndex?-1:1}_sortHandlersPriority(e){const t=[];for(const i of e){let e=0;for(;e<t.length&&this._compareHandlerPriority(i,t[e])>=0;)e++;t.splice(e,0,i)}return t}get debug(){const e=e=>{const t=this._setPointerCapture;this._setPointerCapture=()=>{},e(),this._setPointerCapture=t};return{injectEvent:(t,i)=>{e((()=>this._onEventReceived(t,i)))},disablePointerCapture:e}}};e([n({readOnly:!0})],d.prototype,\"hasPendingInputs\",null),e([n({constructOnly:!0})],d.prototype,\"eventSource\",void 0),e([n({constructOnly:!0})],d.prototype,\"recognizers\",void 0),e([n()],d.prototype,\"_latestPointerType\",void 0),e([n()],d.prototype,\"latestPointerType\",null),e([n()],d.prototype,\"multiTouchActive\",null),e([n({readOnly:!0})],d.prototype,\"latestPointerLocation\",void 0),e([n()],d.prototype,\"_paused\",void 0),e([n({readOnly:!0})],d.prototype,\"updating\",null),d=e([s(\"esri.views.input.InputManager\")],d);class u{constructor(e,t,i,r,n){this.type=e,this.data=t,this.timestamp=i,this.modifiers=r,this.cancelable=n,this._propagationState=c.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=c.STOPPED}shouldStopPropagation(){return!!(this._propagationState&c.STOPPED)}async(e){this._propagationState|=c.PAUSED;const t=(e,t)=>{this._propagationState&=~c.PAUSED;const i=this._resumeCallback;if(this._resumeCallback=null,i&&i(),t)throw e;return e};return(\"function\"==typeof e?e():e).then((e=>t(e,!1)),(e=>t(e,!0)))}shouldPausePropagation(e){return!!(this._propagationState&c.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}}var c;!function(e){e[e.NONE=0]=\"NONE\",e[e.STOPPED=1]=\"STOPPED\",e[e.PAUSED=2]=\"PAUSED\"}(c||(c={}));const _={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};class g{}const P=g;export{d as InputManager,_ as ViewEventPriorities};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}