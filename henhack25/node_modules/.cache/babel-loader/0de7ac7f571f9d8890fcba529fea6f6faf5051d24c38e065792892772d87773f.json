{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { clone as e } from \"../../../core/lang.js\";\nimport { signalFromSignalOrOptions as t } from \"../../../core/promiseUtils.js\";\nimport { fromJSON as r } from \"../../../geometry/support/jsonUtils.js\";\nimport { normalizeCentralMeridian as a } from \"../../../geometry/support/normalizeUtils.js\";\nimport { equals as i } from \"../../../geometry/support/spatialReferenceUtils.js\";\nimport { checkProjectionSupport as s, project as n } from \"./projectionSupport.js\";\nimport { getQueryBBoxes as o } from \"./QueryEngine.js\";\nimport { QueryEngineResult as l } from \"./QueryEngineResult.js\";\nimport { normalizeQueryLike as p } from \"./queryUtils.js\";\nimport { validateQuery as m } from \"./queryValidationUtils.js\";\nimport { getSpatialQueryOperator as c } from \"./spatialQuerySupport.js\";\nasync function u(c, u, y) {\n  const d = t(y),\n    {\n      point: x,\n      distance: g,\n      returnEdge: R,\n      vertexMode: j\n    } = u;\n  if (!R && \"none\" === j) return {\n    candidates: []\n  };\n  let w = e(u.query);\n  w = await c.schedule(() => p(w, c.definitionExpression, c.spatialReference), d), w = await c.reschedule(() => m(w, {\n    availableFields: c.availableFields,\n    fieldsIndex: c.fieldsIndex,\n    geometryType: c.geometryType,\n    spatialReference: c.spatialReference\n  }), d);\n  const h = !i(x.spatialReference, c.spatialReference);\n  h && (await s(x.spatialReference, c.spatialReference));\n  const b = \"number\" == typeof g ? g : g.x,\n    Q = \"number\" == typeof g ? g : g.y,\n    S = {\n      xmin: x.x - b,\n      xmax: x.x + b,\n      ymin: x.y - Q,\n      ymax: x.y + Q,\n      spatialReference: x.spatialReference\n    },\n    U = h ? n(S, c.spatialReference) : S;\n  if (!U) return {\n    candidates: []\n  };\n  const q = (await a(r(x), null, {\n      signal: d\n    }))[0],\n    E = (await a(r(U), null, {\n      signal: d\n    }))[0];\n  if (null == q || null == E) return {\n    candidates: []\n  };\n  const F = new l(await c.reschedule(() => c.searchFeatures(o(E.toJSON())), d), w, c);\n  await c.reschedule(() => c.executeObjectIdsQuery(F), d), await c.reschedule(() => c.executeTimeQuery(F), d), await c.reschedule(() => c.executeAttributesQuery(F), d), await c.reschedule(() => f(c, F, d), d);\n  const T = q.toJSON(),\n    v = h ? n(T, c.spatialReference) : T,\n    I = h ? Math.max(U.xmax - U.xmin, U.ymax - U.ymin) / 2 : g;\n  return F.createSnappingResponse({\n    ...u,\n    point: v,\n    distance: I\n  }, x.spatialReference);\n}\nasync function f(e, t, r) {\n  const {\n      query: a\n    } = t,\n    {\n      spatialRel: i\n    } = a;\n  if (!t?.items?.length || !a.geometry || !i) return;\n  const s = await c(i, a.geometry, e.geometryType, e.hasZ, e.hasM),\n    n = await e.runSpatialFilter(t.items, e => s(e.geometry), r);\n  t.items = n;\n}\nexport { u as executeQueryForSnapping };","map":{"version":3,"names":["clone","e","signalFromSignalOrOptions","t","fromJSON","r","normalizeCentralMeridian","a","equals","i","checkProjectionSupport","s","project","n","getQueryBBoxes","o","QueryEngineResult","l","normalizeQueryLike","p","validateQuery","m","getSpatialQueryOperator","c","u","y","d","point","x","distance","g","returnEdge","R","vertexMode","j","candidates","w","query","schedule","definitionExpression","spatialReference","reschedule","availableFields","fieldsIndex","geometryType","h","b","Q","S","xmin","xmax","ymin","ymax","U","q","signal","E","F","searchFeatures","toJSON","executeObjectIdsQuery","executeTimeQuery","executeAttributesQuery","f","T","v","I","Math","max","createSnappingResponse","spatialRel","items","length","geometry","hasZ","hasM","runSpatialFilter","executeQueryForSnapping"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/layers/graphics/data/executeQueryForSnapping.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{clone as e}from\"../../../core/lang.js\";import{signalFromSignalOrOptions as t}from\"../../../core/promiseUtils.js\";import{fromJSON as r}from\"../../../geometry/support/jsonUtils.js\";import{normalizeCentralMeridian as a}from\"../../../geometry/support/normalizeUtils.js\";import{equals as i}from\"../../../geometry/support/spatialReferenceUtils.js\";import{checkProjectionSupport as s,project as n}from\"./projectionSupport.js\";import{getQueryBBoxes as o}from\"./QueryEngine.js\";import{QueryEngineResult as l}from\"./QueryEngineResult.js\";import{normalizeQueryLike as p}from\"./queryUtils.js\";import{validateQuery as m}from\"./queryValidationUtils.js\";import{getSpatialQueryOperator as c}from\"./spatialQuerySupport.js\";async function u(c,u,y){const d=t(y),{point:x,distance:g,returnEdge:R,vertexMode:j}=u;if(!R&&\"none\"===j)return{candidates:[]};let w=e(u.query);w=await c.schedule((()=>p(w,c.definitionExpression,c.spatialReference)),d),w=await c.reschedule((()=>m(w,{availableFields:c.availableFields,fieldsIndex:c.fieldsIndex,geometryType:c.geometryType,spatialReference:c.spatialReference})),d);const h=!i(x.spatialReference,c.spatialReference);h&&await s(x.spatialReference,c.spatialReference);const b=\"number\"==typeof g?g:g.x,Q=\"number\"==typeof g?g:g.y,S={xmin:x.x-b,xmax:x.x+b,ymin:x.y-Q,ymax:x.y+Q,spatialReference:x.spatialReference},U=h?n(S,c.spatialReference):S;if(!U)return{candidates:[]};const q=(await a(r(x),null,{signal:d}))[0],E=(await a(r(U),null,{signal:d}))[0];if(null==q||null==E)return{candidates:[]};const F=new l(await c.reschedule((()=>c.searchFeatures(o(E.toJSON()))),d),w,c);await c.reschedule((()=>c.executeObjectIdsQuery(F)),d),await c.reschedule((()=>c.executeTimeQuery(F)),d),await c.reschedule((()=>c.executeAttributesQuery(F)),d),await c.reschedule((()=>f(c,F,d)),d);const T=q.toJSON(),v=h?n(T,c.spatialReference):T,I=h?Math.max(U.xmax-U.xmin,U.ymax-U.ymin)/2:g;return F.createSnappingResponse({...u,point:v,distance:I},x.spatialReference)}async function f(e,t,r){const{query:a}=t,{spatialRel:i}=a;if(!t?.items?.length||!a.geometry||!i)return;const s=await c(i,a.geometry,e.geometryType,e.hasZ,e.hasM),n=await e.runSpatialFilter(t.items,(e=>s(e.geometry)),r);t.items=n}export{u as executeQueryForSnapping};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}