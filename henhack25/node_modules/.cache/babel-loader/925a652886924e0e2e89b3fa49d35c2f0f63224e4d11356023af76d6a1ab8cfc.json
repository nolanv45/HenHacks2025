{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { GeometryCursor as e } from \"../../../../../../../geometry/GeometryCursor.js\";\nimport { CIMEffectHelper as t } from \"../../../../../../../symbols/cim/effects/CIMEffectHelper.js\";\nimport { loadGeometryEngine as r, getGeometryEngine as a } from \"./loadGeometryEngine.js\";\nimport { MeshWriterVertexPack as s } from \"./MeshWriterVertexPack.js\";\nfunction i(e) {\n  if (!e) return !1;\n  for (const t of e) switch (t.effect.type) {\n    case \"CIMGeometricEffectBuffer\":\n    case \"CIMGeometricEffectOffset\":\n    case \"CIMGeometricEffectDonut\":\n      return !0;\n  }\n  return !1;\n}\nclass c {\n  constructor(e, t, r, a) {\n    this._instanceId = e, this._evaluator = t, this._enabledOptionalAttributes = r, this._viewParams = a, this._evaluator.evaluator = e => this.vertexSpec.createComputedParams(e);\n  }\n  get _vertexPack() {\n    if (!this._cachedVertexPack) {\n      const e = s.fromVertexSpec(this.vertexSpec, this._enabledOptionalAttributes);\n      this._evaluator.hasDynamicProperties || e.pack(this._evaluator.evaluatedMeshParams, this._viewParams), this._cachedVertexPack = e;\n    }\n    return this._cachedVertexPack;\n  }\n  get evaluatedMeshParams() {\n    return this._evaluator.evaluatedMeshParams;\n  }\n  get hasEffects() {\n    return !!this.evaluatedMeshParams.effects;\n  }\n  get instanceId() {\n    return this._instanceId;\n  }\n  get attributeLayout() {\n    return this._vertexPack.attributeLayout;\n  }\n  get _preventEffectClipping() {\n    return !1;\n  }\n  setReferences(e) {\n    this._references = e;\n  }\n  getBoundsInfo() {\n    return null;\n  }\n  getTileInfo() {\n    return this._viewParams.tileInfo;\n  }\n  async loadDependencies() {\n    i(this._evaluator.inputMeshParams.effects?.effectInfos) && (await r());\n  }\n  enqueueRequest(e, t, r) {\n    this._evaluator.hasDynamicProperties && this._evaluator.enqueueRequest(e, t, r);\n  }\n  write(r, s, i, c, n) {\n    this.ensurePacked(s, i, c);\n    const o = this.evaluatedMeshParams.effects;\n    if (!o || 0 === o.length) return void this._write(r, i, void 0, n);\n    const u = i.readGeometryForDisplay()?.clone();\n    if (!u) return;\n    const h = e.fromOptimizedCIM(u, i.geometryType),\n      f = a();\n    h.invertY();\n    const l = r.id || \"\",\n      m = t.executeEffects(o, h, l, f, this._preventEffectClipping);\n    let v;\n    for (; v = m.next();) v.invertY(), this._write(r, i, v, n);\n  }\n  ensurePacked(e, t, r) {\n    if (!this._evaluator.hasDynamicProperties) return;\n    const a = this._evaluator.evaluateMeshParams(e, t, r);\n    this._vertexPack.pack(a, this._viewParams);\n  }\n  hasArcadeDependency(e) {\n    return this._evaluator.hasArcadeDependency(e);\n  }\n  _writeVertex(e, t, r, a, s) {\n    const i = this.evaluatedMeshParams;\n    this._vertexPack.writeVertex(e, t, r, a, i, s);\n  }\n}\nexport { c as MeshWriter };","map":{"version":3,"names":["GeometryCursor","e","CIMEffectHelper","t","loadGeometryEngine","r","getGeometryEngine","a","MeshWriterVertexPack","s","i","effect","type","c","constructor","_instanceId","_evaluator","_enabledOptionalAttributes","_viewParams","evaluator","vertexSpec","createComputedParams","_vertexPack","_cachedVertexPack","fromVertexSpec","hasDynamicProperties","pack","evaluatedMeshParams","hasEffects","effects","instanceId","attributeLayout","_preventEffectClipping","setReferences","_references","getBoundsInfo","getTileInfo","tileInfo","loadDependencies","inputMeshParams","effectInfos","enqueueRequest","write","n","ensurePacked","o","length","_write","u","readGeometryForDisplay","clone","h","fromOptimizedCIM","geometryType","f","invertY","l","id","m","executeEffects","v","next","evaluateMeshParams","hasArcadeDependency","_writeVertex","writeVertex","MeshWriter"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/mesh/MeshWriter.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{GeometryCursor as e}from\"../../../../../../../geometry/GeometryCursor.js\";import{CIMEffectHelper as t}from\"../../../../../../../symbols/cim/effects/CIMEffectHelper.js\";import{loadGeometryEngine as r,getGeometryEngine as a}from\"./loadGeometryEngine.js\";import{MeshWriterVertexPack as s}from\"./MeshWriterVertexPack.js\";function i(e){if(!e)return!1;for(const t of e)switch(t.effect.type){case\"CIMGeometricEffectBuffer\":case\"CIMGeometricEffectOffset\":case\"CIMGeometricEffectDonut\":return!0}return!1}class c{constructor(e,t,r,a){this._instanceId=e,this._evaluator=t,this._enabledOptionalAttributes=r,this._viewParams=a,this._evaluator.evaluator=e=>this.vertexSpec.createComputedParams(e)}get _vertexPack(){if(!this._cachedVertexPack){const e=s.fromVertexSpec(this.vertexSpec,this._enabledOptionalAttributes);this._evaluator.hasDynamicProperties||e.pack(this._evaluator.evaluatedMeshParams,this._viewParams),this._cachedVertexPack=e}return this._cachedVertexPack}get evaluatedMeshParams(){return this._evaluator.evaluatedMeshParams}get hasEffects(){return!!this.evaluatedMeshParams.effects}get instanceId(){return this._instanceId}get attributeLayout(){return this._vertexPack.attributeLayout}get _preventEffectClipping(){return!1}setReferences(e){this._references=e}getBoundsInfo(){return null}getTileInfo(){return this._viewParams.tileInfo}async loadDependencies(){i(this._evaluator.inputMeshParams.effects?.effectInfos)&&await r()}enqueueRequest(e,t,r){this._evaluator.hasDynamicProperties&&this._evaluator.enqueueRequest(e,t,r)}write(r,s,i,c,n){this.ensurePacked(s,i,c);const o=this.evaluatedMeshParams.effects;if(!o||0===o.length)return void this._write(r,i,void 0,n);const u=i.readGeometryForDisplay()?.clone();if(!u)return;const h=e.fromOptimizedCIM(u,i.geometryType),f=a();h.invertY();const l=r.id||\"\",m=t.executeEffects(o,h,l,f,this._preventEffectClipping);let v;for(;v=m.next();)v.invertY(),this._write(r,i,v,n)}ensurePacked(e,t,r){if(!this._evaluator.hasDynamicProperties)return;const a=this._evaluator.evaluateMeshParams(e,t,r);this._vertexPack.pack(a,this._viewParams)}hasArcadeDependency(e){return this._evaluator.hasArcadeDependency(e)}_writeVertex(e,t,r,a,s){const i=this.evaluatedMeshParams;this._vertexPack.writeVertex(e,t,r,a,i,s)}}export{c as MeshWriter};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}