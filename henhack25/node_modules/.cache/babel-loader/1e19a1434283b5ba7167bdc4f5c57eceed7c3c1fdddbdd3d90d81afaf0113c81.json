{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { remove as e } from \"../../../../core/arrayUtils.js\";\nimport \"../../../../core/has.js\";\nimport { createAbortError as t, createResolver as r, onAbort as s } from \"../../../../core/promiseUtils.js\";\nimport i from \"../../../../geometry/Multipoint.js\";\nimport { TaskPriority as o, noBudget as n } from \"../../../support/Scheduler.js\";\nclass l {\n  constructor(e, t) {\n    this.spatialReference = e, this._view = t;\n  }\n  getElevation(e, t, r) {\n    return this._view.elevationProvider.getElevation(e, t, 0, this.spatialReference, r);\n  }\n  async queryElevation(e, t, r, s, i) {\n    return this._view.elevationProvider.queryElevation(e, t, 0, this.spatialReference, i, r, s);\n  }\n}\nclass a {\n  constructor(e, t, r, s) {\n    this.spatialReference = t, this._getElevationQueryProvider = r, this._queries = new Array(), this._queryOptions = {\n      ...s,\n      ignoreInvisibleLayers: !0\n    }, this._frameTask = e.registerTask(o.ELEVATION_QUERY, this);\n  }\n  destroy({\n    completeTasks: e\n  } = {\n    completeTasks: !1\n  }) {\n    if (this._frameTask.remove(), this.running) if (e) this.runTask(n);else for (const r of this._queries) r.result.reject(t());\n  }\n  queryElevation(i, o, n, l = 0) {\n    const a = r(),\n      u = {\n        x: i,\n        y: o,\n        minDemResolution: l,\n        result: a,\n        signal: n\n      };\n    return this._queries.push(u), s(n, () => {\n      e(this._queries, u), a.reject(t());\n    }), a.promise;\n  }\n  get running() {\n    return this._queries.length > 0;\n  }\n  runTask(e) {\n    const r = this._queries;\n    this._queries = [];\n    const o = this._getElevationQueryProvider();\n    if (!o) return r.forEach(e => e.result.reject()), void e.madeProgress();\n    const n = r.map(e => [e.x, e.y]),\n      l = r.reduce((e, t) => Math.min(e, t.minDemResolution), 1 / 0),\n      a = new i({\n        points: n,\n        spatialReference: this.spatialReference\n      }),\n      u = r.length > 1 && r.some(e => !!e.signal) ? new AbortController() : null,\n      c = null != u ? u.signal : r[0].signal;\n    if (null != u) {\n      let e = 0;\n      r.forEach(i => s(i.signal, () => {\n        e++, i.result.reject(t()), e === r.length && u.abort();\n      }));\n    }\n    const h = {\n      ...this._queryOptions,\n      minDemResolution: l,\n      signal: c\n    };\n    o.queryElevation(a, h).then(e => {\n      r.forEach((r, s) => {\n        null != r.signal && r.signal.aborted ? r.result.reject(t()) : r.result.resolve(e.geometry.points[s][2]);\n      });\n    }).catch(e => {\n      r.forEach(t => t.result.reject(e));\n    }), e.madeProgress();\n  }\n  get test() {}\n}\nexport { a as ElevationQuery, l as ViewElevationProvider };","map":{"version":3,"names":["remove","e","createAbortError","t","createResolver","r","onAbort","s","i","TaskPriority","o","noBudget","n","l","constructor","spatialReference","_view","getElevation","elevationProvider","queryElevation","a","_getElevationQueryProvider","_queries","Array","_queryOptions","ignoreInvisibleLayers","_frameTask","registerTask","ELEVATION_QUERY","destroy","completeTasks","running","runTask","result","reject","u","x","y","minDemResolution","signal","push","promise","length","forEach","madeProgress","map","reduce","Math","min","points","some","AbortController","c","abort","h","then","aborted","resolve","geometry","catch","test","ElevationQuery","ViewElevationProvider"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/3d/layers/graphics/ElevationQuery.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{remove as e}from\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import{createAbortError as t,createResolver as r,onAbort as s}from\"../../../../core/promiseUtils.js\";import i from\"../../../../geometry/Multipoint.js\";import{TaskPriority as o,noBudget as n}from\"../../../support/Scheduler.js\";class l{constructor(e,t){this.spatialReference=e,this._view=t}getElevation(e,t,r){return this._view.elevationProvider.getElevation(e,t,0,this.spatialReference,r)}async queryElevation(e,t,r,s,i){return this._view.elevationProvider.queryElevation(e,t,0,this.spatialReference,i,r,s)}}class a{constructor(e,t,r,s){this.spatialReference=t,this._getElevationQueryProvider=r,this._queries=new Array,this._queryOptions={...s,ignoreInvisibleLayers:!0},this._frameTask=e.registerTask(o.ELEVATION_QUERY,this)}destroy({completeTasks:e}={completeTasks:!1}){if(this._frameTask.remove(),this.running)if(e)this.runTask(n);else for(const r of this._queries)r.result.reject(t())}queryElevation(i,o,n,l=0){const a=r(),u={x:i,y:o,minDemResolution:l,result:a,signal:n};return this._queries.push(u),s(n,(()=>{e(this._queries,u),a.reject(t())})),a.promise}get running(){return this._queries.length>0}runTask(e){const r=this._queries;this._queries=[];const o=this._getElevationQueryProvider();if(!o)return r.forEach((e=>e.result.reject())),void e.madeProgress();const n=r.map((e=>[e.x,e.y])),l=r.reduce(((e,t)=>Math.min(e,t.minDemResolution)),1/0),a=new i({points:n,spatialReference:this.spatialReference}),u=r.length>1&&r.some((e=>!!e.signal))?new AbortController:null,c=null!=u?u.signal:r[0].signal;if(null!=u){let e=0;r.forEach((i=>s(i.signal,(()=>{e++,i.result.reject(t()),e===r.length&&u.abort()}))))}const h={...this._queryOptions,minDemResolution:l,signal:c};o.queryElevation(a,h).then((e=>{r.forEach(((r,s)=>{null!=r.signal&&r.signal.aborted?r.result.reject(t()):r.result.resolve(e.geometry.points[s][2])}))})).catch((e=>{r.forEach((t=>t.result.reject(e)))})),e.madeProgress()}get test(){}}export{a as ElevationQuery,l as ViewElevationProvider};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}