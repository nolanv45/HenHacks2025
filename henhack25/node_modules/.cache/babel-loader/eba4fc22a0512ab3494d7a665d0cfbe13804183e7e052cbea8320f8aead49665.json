{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as t, a as e } from \"../../../../../../../chunks/tslib.es6.js\";\nimport { location as o, uniform as i, input as r } from \"../../GraphShaderModule.js\";\nimport { Vec2 as l, sin as s, cos as p, Vec3 as a, ifElse as n, Float as d, mod as m, mix as u, texture2D as f, greaterThan as c, equal as y, float as v, Vec4 as h, mat3 as x, negate as g, vec2 as b } from \"../../graph/glsl.js\";\nimport { FeatureFragmentInput as w, BaseHittestVertexInput as j } from \"./AFeatureShader.js\";\nimport { c256ToRad as O, bitsetGenericConsiderAlphaOnly as T, bitsetFillRandomPatternOffset as C } from \"./constants.js\";\nimport { FillVertexInput as F, FillShader as A } from \"./FillShader.js\";\nimport { LocalTileOffset as I } from \"./LocalTileOffset.js\";\nimport { MosaicInfo as S } from \"./MosaicInfo.js\";\nimport { getBit as z, isNan as M, rgba2float as V, rand as k } from \"./utils.js\";\nclass q extends F {}\nt([o(5, h)], q.prototype, \"tlbr\", void 0), t([o(6, d)], q.prototype, \"width\", void 0), t([o(7, d)], q.prototype, \"height\", void 0), t([o(8, l)], q.prototype, \"offset\", void 0), t([o(9, l)], q.prototype, \"scale\", void 0), t([o(10, d)], q.prototype, \"angle\", void 0);\nclass G extends w {}\nfunction L(t, e, o, i, r) {\n  const l = y(z(r, C), v(1)),\n    s = V(new h(t, 0));\n  return n(l, x(i.divide(e.x), o.divide(e.y), 0, g(o.divide(e.x)), i.divide(e.y), 0, k(b(s, 0)), k(b(0, s)), 1), x(i.divide(e.x), o.divide(e.y), 0, g(o.divide(e.x)), i.divide(e.y), 0, 0, 0, 1));\n}\nfunction P(t, e) {\n  const o = t.view.requiredZoomFactor,\n    i = new l(e.width, e.height),\n    r = i.multiply(e.scale).multiply(o),\n    m = e.angle.multiply(O),\n    u = s(m),\n    f = p(m),\n    c = L(e.id, r, u, f, e.bitset),\n    y = t.localTileOffset.getPatternOffsetAtTileOrigin(i, u, f),\n    v = o.multiply(e.scale).multiply(e.offset.subtract(y)).divide(r),\n    h = new a(e.pos, 1),\n    x = c.multiply(h).xy.subtract(v),\n    g = e.tlbr.divide(t.mosaicInfo.size.xyxy);\n  let b = z(e.bitset, T);\n  return null != t.visualVariableColor && (b = n(M(t.storage.getColorValue(e.id)), new d(0), b)), {\n    tileTextureCoord: x,\n    tlbr: g,\n    sampleAlphaOnly: b\n  };\n}\nfunction Z(t, e) {\n  const o = m(e.tileTextureCoord, new d(1)),\n    i = u(e.tlbr.xy, e.tlbr.zw, o);\n  let r = f(t.mosaicInfo.texture, i);\n  return r = n(c(e.sampleAlphaOnly, new d(.5)), r.aaaa, r), e.color.multiply(r);\n}\nclass _ extends A {\n  constructor() {\n    super(...arguments), this.type = \"ComplexFillShader\";\n  }\n  vertex(t, e) {\n    return {\n      ...super.vertex(t, e),\n      ...P(this, t)\n    };\n  }\n  fragment(t) {\n    const e = Z(this, t);\n    return this.getFragmentOutput(e, t, new d(0));\n  }\n}\nt([i(S)], _.prototype, \"mosaicInfo\", void 0), t([i(I)], _.prototype, \"localTileOffset\", void 0), t([e(0, r(q)), e(1, r(j))], _.prototype, \"vertex\", null), t([e(0, r(G))], _.prototype, \"fragment\", null);\nexport { G as ComplexFillFragmentInput, _ as ComplexFillShader, q as ComplexFillVertexInput, Z as getComplexFillFragmentColor, P as getComplexFillVertexData };","map":{"version":3,"names":["_","t","a","e","location","o","uniform","i","input","r","Vec2","l","sin","s","cos","p","Vec3","ifElse","n","Float","d","mod","m","mix","u","texture2D","f","greaterThan","c","equal","y","float","v","Vec4","h","mat3","x","negate","g","vec2","b","FeatureFragmentInput","w","BaseHittestVertexInput","j","c256ToRad","O","bitsetGenericConsiderAlphaOnly","T","bitsetFillRandomPatternOffset","C","FillVertexInput","F","FillShader","A","LocalTileOffset","I","MosaicInfo","S","getBit","z","isNan","M","rgba2float","V","rand","k","q","prototype","G","L","divide","P","view","requiredZoomFactor","width","height","multiply","scale","angle","id","bitset","localTileOffset","getPatternOffsetAtTileOrigin","offset","subtract","pos","xy","tlbr","mosaicInfo","size","xyxy","visualVariableColor","storage","getColorValue","tileTextureCoord","sampleAlphaOnly","Z","zw","texture","aaaa","color","constructor","arguments","type","vertex","fragment","getFragmentOutput","ComplexFillFragmentInput","ComplexFillShader","ComplexFillVertexInput","getComplexFillFragmentColor","getComplexFillVertexData"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/ComplexFillShader.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as t,a as e}from\"../../../../../../../chunks/tslib.es6.js\";import{location as o,uniform as i,input as r}from\"../../GraphShaderModule.js\";import{Vec2 as l,sin as s,cos as p,Vec3 as a,ifElse as n,Float as d,mod as m,mix as u,texture2D as f,greaterThan as c,equal as y,float as v,Vec4 as h,mat3 as x,negate as g,vec2 as b}from\"../../graph/glsl.js\";import{FeatureFragmentInput as w,BaseHittestVertexInput as j}from\"./AFeatureShader.js\";import{c256ToRad as O,bitsetGenericConsiderAlphaOnly as T,bitsetFillRandomPatternOffset as C}from\"./constants.js\";import{FillVertexInput as F,FillShader as A}from\"./FillShader.js\";import{LocalTileOffset as I}from\"./LocalTileOffset.js\";import{MosaicInfo as S}from\"./MosaicInfo.js\";import{getBit as z,isNan as M,rgba2float as V,rand as k}from\"./utils.js\";class q extends F{}t([o(5,h)],q.prototype,\"tlbr\",void 0),t([o(6,d)],q.prototype,\"width\",void 0),t([o(7,d)],q.prototype,\"height\",void 0),t([o(8,l)],q.prototype,\"offset\",void 0),t([o(9,l)],q.prototype,\"scale\",void 0),t([o(10,d)],q.prototype,\"angle\",void 0);class G extends w{}function L(t,e,o,i,r){const l=y(z(r,C),v(1)),s=V(new h(t,0));return n(l,x(i.divide(e.x),o.divide(e.y),0,g(o.divide(e.x)),i.divide(e.y),0,k(b(s,0)),k(b(0,s)),1),x(i.divide(e.x),o.divide(e.y),0,g(o.divide(e.x)),i.divide(e.y),0,0,0,1))}function P(t,e){const o=t.view.requiredZoomFactor,i=new l(e.width,e.height),r=i.multiply(e.scale).multiply(o),m=e.angle.multiply(O),u=s(m),f=p(m),c=L(e.id,r,u,f,e.bitset),y=t.localTileOffset.getPatternOffsetAtTileOrigin(i,u,f),v=o.multiply(e.scale).multiply(e.offset.subtract(y)).divide(r),h=new a(e.pos,1),x=c.multiply(h).xy.subtract(v),g=e.tlbr.divide(t.mosaicInfo.size.xyxy);let b=z(e.bitset,T);return null!=t.visualVariableColor&&(b=n(M(t.storage.getColorValue(e.id)),new d(0),b)),{tileTextureCoord:x,tlbr:g,sampleAlphaOnly:b}}function Z(t,e){const o=m(e.tileTextureCoord,new d(1)),i=u(e.tlbr.xy,e.tlbr.zw,o);let r=f(t.mosaicInfo.texture,i);return r=n(c(e.sampleAlphaOnly,new d(.5)),r.aaaa,r),e.color.multiply(r)}class _ extends A{constructor(){super(...arguments),this.type=\"ComplexFillShader\"}vertex(t,e){return{...super.vertex(t,e),...P(this,t)}}fragment(t){const e=Z(this,t);return this.getFragmentOutput(e,t,new d(0))}}t([i(S)],_.prototype,\"mosaicInfo\",void 0),t([i(I)],_.prototype,\"localTileOffset\",void 0),t([e(0,r(q)),e(1,r(j))],_.prototype,\"vertex\",null),t([e(0,r(G))],_.prototype,\"fragment\",null);export{G as ComplexFillFragmentInput,_ as ComplexFillShader,q as ComplexFillVertexInput,Z as getComplexFillFragmentColor,P as getComplexFillVertexData};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}