{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { ReadDepth as e } from \"../output/ReadDepth.glsl.js\";\nimport { If as r, glsl as t } from \"../../shaderModules/glsl.js\";\nimport { Texture2DBindUniform as o } from \"../../shaderModules/Texture2DBindUniform.js\";\nfunction d(d, {\n  occlusionPass: i,\n  terrainDepthTest: a,\n  cullAboveTerrain: s\n}) {\n  const n = d.vertex,\n    p = d.fragment;\n  if (!a) return n.code.add(\"void forwardViewPosDepth(vec3 pos) {}\"), void p.code.add(`${i ? \"bool\" : \"void\"} discardByTerrainDepth() { ${r(i, \"return false;\")}}`);\n  d.varyings.add(\"viewPosDepth\", \"float\"), n.code.add(\"void forwardViewPosDepth(vec3 pos) {\\n    viewPosDepth = pos.z;\\n  }\"), p.include(e), p.uniforms.add(new o(\"terrainDepthTexture\", e => e.terrainDepth?.attachment)).code.add(t`\n    ${i ? \"bool\" : \"void\"} discardByTerrainDepth() {\n      float depth = texelFetch(terrainDepthTexture, ivec2(gl_FragCoord.xy), 0).r;\n      float linearDepth = linearizeDepth(depth);\n      ${i ? \"return viewPosDepth < linearDepth && depth < 1.0;\" : `if(viewPosDepth ${s ? \">\" : \"<=\"} linearDepth) discard;`}\n    }`);\n}\nexport { d as terrainDepthTest };","map":{"version":3,"names":["ReadDepth","e","If","r","glsl","t","Texture2DBindUniform","o","d","occlusionPass","i","terrainDepthTest","a","cullAboveTerrain","s","n","vertex","p","fragment","code","add","varyings","include","uniforms","terrainDepth","attachment"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/TerrainDepthTest.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{ReadDepth as e}from\"../output/ReadDepth.glsl.js\";import{If as r,glsl as t}from\"../../shaderModules/glsl.js\";import{Texture2DBindUniform as o}from\"../../shaderModules/Texture2DBindUniform.js\";function d(d,{occlusionPass:i,terrainDepthTest:a,cullAboveTerrain:s}){const n=d.vertex,p=d.fragment;if(!a)return n.code.add(\"void forwardViewPosDepth(vec3 pos) {}\"),void p.code.add(`${i?\"bool\":\"void\"} discardByTerrainDepth() { ${r(i,\"return false;\")}}`);d.varyings.add(\"viewPosDepth\",\"float\"),n.code.add(\"void forwardViewPosDepth(vec3 pos) {\\n    viewPosDepth = pos.z;\\n  }\"),p.include(e),p.uniforms.add(new o(\"terrainDepthTexture\",(e=>e.terrainDepth?.attachment))).code.add(t`\n    ${i?\"bool\":\"void\"} discardByTerrainDepth() {\n      float depth = texelFetch(terrainDepthTexture, ivec2(gl_FragCoord.xy), 0).r;\n      float linearDepth = linearizeDepth(depth);\n      ${i?\"return viewPosDepth < linearDepth && depth < 1.0;\":`if(viewPosDepth ${s?\">\":\"<=\"} linearDepth) discard;`}\n    }`)}export{d as terrainDepthTest};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,SAAS,IAAIC,CAAC,QAAK,6BAA6B;AAAC,SAAOC,EAAE,IAAIC,CAAC,EAACC,IAAI,IAAIC,CAAC,QAAK,6BAA6B;AAAC,SAAOC,oBAAoB,IAAIC,CAAC,QAAK,6CAA6C;AAAC,SAASC,CAACA,CAACA,CAAC,EAAC;EAACC,aAAa,EAACC,CAAC;EAACC,gBAAgB,EAACC,CAAC;EAACC,gBAAgB,EAACC;AAAC,CAAC,EAAC;EAAC,MAAMC,CAAC,GAACP,CAAC,CAACQ,MAAM;IAACC,CAAC,GAACT,CAAC,CAACU,QAAQ;EAAC,IAAG,CAACN,CAAC,EAAC,OAAOG,CAAC,CAACI,IAAI,CAACC,GAAG,CAAC,uCAAuC,CAAC,EAAC,KAAKH,CAAC,CAACE,IAAI,CAACC,GAAG,CAAC,GAAGV,CAAC,GAAC,MAAM,GAAC,MAAM,8BAA8BP,CAAC,CAACO,CAAC,EAAC,eAAe,CAAC,GAAG,CAAC;EAACF,CAAC,CAACa,QAAQ,CAACD,GAAG,CAAC,cAAc,EAAC,OAAO,CAAC,EAACL,CAAC,CAACI,IAAI,CAACC,GAAG,CAAC,sEAAsE,CAAC,EAACH,CAAC,CAACK,OAAO,CAACrB,CAAC,CAAC,EAACgB,CAAC,CAACM,QAAQ,CAACH,GAAG,CAAC,IAAIb,CAAC,CAAC,qBAAqB,EAAEN,CAAC,IAAEA,CAAC,CAACuB,YAAY,EAAEC,UAAW,CAAC,CAAC,CAACN,IAAI,CAACC,GAAG,CAACf,CAAC;AAClqB,MAAMK,CAAC,GAAC,MAAM,GAAC,MAAM;AACrB;AACA;AACA,QAAQA,CAAC,GAAC,mDAAmD,GAAC,mBAAmBI,CAAC,GAAC,GAAG,GAAC,IAAI,wBAAwB;AACnH,MAAM,CAAC;AAAA;AAAC,SAAON,CAAC,IAAIG,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}