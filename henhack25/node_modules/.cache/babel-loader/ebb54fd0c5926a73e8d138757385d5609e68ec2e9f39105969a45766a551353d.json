{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../core/Accessor.js\";\nimport { createTask as r } from \"../../../../core/asyncUtils.js\";\nimport { destroyHandle as i } from \"../../../../core/handleUtils.js\";\nimport { memoize as s } from \"../../../../core/memoize.js\";\nimport { throwIfAborted as o, ignoreAbortErrors as a } from \"../../../../core/promiseUtils.js\";\nimport { watch as n, on as l, initial as d, sync as u, syncAndInitial as p } from \"../../../../core/reactiveUtils.js\";\nimport { sqlAnd as h } from \"../../../../core/sql.js\";\nimport { property as c } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/Logger.js\";\nimport \"../../../../core/RandomLCG.js\";\nimport { subclass as y } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { UpdatingHandles as f } from \"../../../../core/support/UpdatingHandles.js\";\nimport { isSubtypeGroupLayer as m } from \"../../../../layers/support/layerUtils.js\";\nimport { elevationContextAffectsAlignment as _ } from \"../../../../support/elevationInfoUtils.js\";\nimport { FeatureServiceTiles2D as g } from \"../../../2d/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiles2D.js\";\nimport { FeatureServiceTiles3D as w } from \"../../../3d/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiles3D.js\";\nimport { isUtilityNetworkWebMap as S } from \"../snappingUtils.js\";\nimport { convertSnappingCandidate as v, makeGetGroundElevation as b } from \"./queryEngineUtils.js\";\nimport { WorkerTileTreeDebugger as I } from \"./WorkerTileTreeDebugger.js\";\nimport { FeatureServiceSnappingSourceWorkerHandle as H } from \"./featureServiceSource/FeatureServiceSnappingSourceWorkerHandle.js\";\nimport { FeatureServiceTilesSimple as j } from \"./featureServiceSource/FeatureServiceTilesSimple.js\";\nimport F from \"../../../support/debugFlags.js\";\nlet O = class extends t {\n  get _updateTilesParameters() {\n    return {\n      tiles: this._tilesOfInterest.tiles,\n      tileInfo: this._tilesOfInterest.tileInfo,\n      tileSize: this._tilesOfInterest.tileSize\n    };\n  }\n  get _layerView() {\n    return this.view?.allLayerViews.find(e => e.layer === this._layer);\n  }\n  get _isSuspended() {\n    if (m(this._layer)) {\n      if (!this.layerSource.sublayerSources.some(e => e.enabled && e.layer.visible)) return !0;\n    }\n    return !!this.view && (!1 !== this._layerView?.suspended || !this.layerSource.enabled);\n  }\n  get updating() {\n    return this._workerHandle?.updating || this._updatingHandles.updating;\n  }\n  get _outFields() {\n    const {\n        view: e,\n        _layerView: t,\n        layerSource: r\n      } = this,\n      {\n        layer: i\n      } = r,\n      {\n        fieldsIndex: s,\n        timeInfo: o,\n        floorInfo: a,\n        subtypeField: n\n      } = i,\n      l = t && \"filter\" in t ? t.filter : null,\n      d = l?.where && \"1=1\" !== l.where ? this._getOrLoadWhereFields(l.where, s) : [];\n    if (l?.timeExtent && o) {\n      const {\n          startField: e,\n          endField: t\n        } = o,\n        r = s.get(e)?.name ?? e,\n        i = s.get(t)?.name ?? t;\n      r && d.push(r), i && d.push(i);\n    }\n    if (e?.map && S(e.map) && e.map.utilityNetworks?.find(e => e.isUtilityLayer(i))) {\n      const e = i.fieldsIndex.get(\"assetGroup\")?.name,\n        t = i.fieldsIndex.get(\"assetType\")?.name;\n      e && t && (d.push(e), d.push(t));\n    }\n    if (i && a?.floorField && e?.floors?.length) {\n      const e = s.get(a.floorField)?.name ?? a.floorField;\n      e && d.push(e);\n    }\n    if (n) {\n      const e = s.get(n)?.name ?? n;\n      e && d.push(e);\n    }\n    return new Set(d);\n  }\n  get configuration() {\n    const {\n        view: e\n      } = this,\n      {\n        apiKey: t,\n        customParameters: r\n      } = this._layer,\n      i = null != e ? e.type : \"2d\",\n      s = this._layer.createQuery();\n    return this._layerView && \"effectiveDisplayFilter\" in this._layerView && (s.where = h(s.where, this._layerView.effectiveDisplayFilter?.where)), {\n      filter: s,\n      customParameters: t ? {\n        ...r,\n        token: t\n      } : r,\n      viewType: i\n    };\n  }\n  get availability() {\n    return this._workerHandle?.availability ?? 0;\n  }\n  get _layer() {\n    return this.layerSource.layer;\n  }\n  constructor(e) {\n    super(e), this._updatingHandles = new f(), this._workerHandle = null, this._debug = null, this._memoizedMakeGetGroundElevation = s(b);\n  }\n  initialize() {\n    let e;\n    const t = this.view;\n    if (null == t || t.destroyed) this._tilesOfInterest = new j({\n      layer: this._layer\n    }), e = this._workerHandle = new H();else switch (t.type) {\n      case \"2d\":\n        this._tilesOfInterest = new g({\n          view: t,\n          layer: this._layer\n        }), e = this._workerHandle = new H();\n        break;\n      case \"3d\":\n        {\n          const {\n              resourceController: r\n            } = t,\n            i = this._layer;\n          this._tilesOfInterest = new w({\n            view: t\n          }), e = this._workerHandle = new H({\n            schedule: e => r.immediate.schedule(e),\n            hasZ: this._layer.hasZ && (this._layer.returnZ ?? !0),\n            elevationAlignPointsInFeatures: async (e, r) => {\n              const s = await t.whenLayerView(i);\n              return o(r), s.elevationAlignPointsInFeatures(e, r);\n            },\n            queryForSymbologySnapping: async (e, r) => {\n              const s = await t.whenLayerView(i);\n              return o(r), s.queryForSymbologySnapping(e, r);\n            }\n          }), this.addHandles([t.elevationProvider.on(\"elevation-change\", ({\n            context: t\n          }) => {\n            const {\n              elevationInfo: r\n            } = i;\n            _(t, r) && a(e.notifyElevationSourceChange());\n          }), n(() => i.elevationInfo, () => a(e.notifyElevationSourceChange()), d), n(() => this._layerView?.layer?.renderer, () => a(e.notifySymbologyChange()), d), n(() => this._layerView?.symbologySnappingSupported ?? !1, t => a(e.setSymbologySnappingSupported(t)), d), l(() => this._layerView?.layer, [\"edits\", \"apply-edits\", \"graphic-update\"], () => e.notifySymbologyChange())]);\n          break;\n        }\n    }\n    this.addHandles([i(e)]), a(e.setup({\n      layer: this._layer,\n      spatialReference: this.spatialReference,\n      configuration: this.configuration\n    }, null)), this._updatingHandles.add(() => this._updateTilesParameters, () => a(e.updateTiles(this._updateTilesParameters, null)), d), this.addHandles([n(() => this.configuration, t => a(e.configure(t, null)), u), n(() => this._layer.historicMoment, t => a(e.setHistoricMoment(t)), p), n(() => this._outFields, t => a(e.updateOutFields(t)), d), n(() => this._isSuspended, t => a(e.setSuspended(t)), p)]), null != t && this.addHandles(n(() => F.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES, r => {\n      r && !this._debug ? (this._debug = new I({\n        view: t,\n        handle: e\n      }), this.addHandles(i(this._debug), \"debug\")) : !r && this._debug && this.removeHandles(\"debug\");\n    }, d)), this.addHandles([this.layerSource.layer.on(\"edits\", t => a(e.handleEdits(t, null))), this.layerSource.layer.on(\"apply-edits\", e => this._updatingHandles.addPromise(e.result))]);\n  }\n  destroy() {\n    this._updatingHandles.destroy(), this._tilesOfInterest.destroy();\n  }\n  refresh() {\n    this._workerHandle?.refresh(null);\n  }\n  async fetchCandidates(e, t) {\n    const {\n      coordinateHelper: r,\n      point: i\n    } = e;\n    this._tilesOfInterest.pointOfInterest = r.arrayToPoint(i);\n    const s = this._memoizedMakeGetGroundElevation(this.view, r.spatialReference);\n    return (await this._workerHandle.fetchCandidates({\n      ...e\n    }, t)).candidates.map(e => v(e, s));\n  }\n  getDebugInfo(e) {\n    return this._workerHandle.getDebugInfo(e);\n  }\n  _getOrLoadWhereFields(e, t) {\n    const {\n      _whereModule: i\n    } = this;\n    if (!this._loadWhereModuleTask && !i) {\n      const e = r(async () => {\n        const e = await import(\"../../../../core/sql/WhereClause.js\");\n        return this._whereModule = e.default, this._whereModule;\n      });\n      return this._loadWhereModuleTask = e, this._updatingHandles.addPromise(e.promise), [];\n    }\n    if (!i) return [];\n    try {\n      return i.create(e, {\n        fieldsIndex: t\n      }).fieldNames;\n    } catch (s) {\n      return [];\n    }\n  }\n};\ne([c({\n  constructOnly: !0\n})], O.prototype, \"spatialReference\", void 0), e([c({\n  constructOnly: !0\n})], O.prototype, \"layerSource\", void 0), e([c({\n  constructOnly: !0\n})], O.prototype, \"view\", void 0), e([c()], O.prototype, \"_tilesOfInterest\", void 0), e([c({\n  readOnly: !0\n})], O.prototype, \"_updateTilesParameters\", null), e([c()], O.prototype, \"_layerView\", null), e([c()], O.prototype, \"_isSuspended\", null), e([c({\n  readOnly: !0\n})], O.prototype, \"updating\", null), e([c()], O.prototype, \"_outFields\", null), e([c({\n  readOnly: !0\n})], O.prototype, \"configuration\", null), e([c({\n  readOnly: !0\n})], O.prototype, \"availability\", null), e([c()], O.prototype, \"_loadWhereModuleTask\", void 0), e([c()], O.prototype, \"_whereModule\", void 0), O = e([y(\"esri.views.interactive.snapping.featureSources.FeatureServiceSnappingSource\")], O);\nexport { O as FeatureServiceSnappingSource };","map":{"version":3,"names":["_","e","t","createTask","r","destroyHandle","i","memoize","s","throwIfAborted","o","ignoreAbortErrors","a","watch","n","on","l","initial","d","sync","u","syncAndInitial","p","sqlAnd","h","property","c","subclass","y","UpdatingHandles","f","isSubtypeGroupLayer","m","elevationContextAffectsAlignment","FeatureServiceTiles2D","g","FeatureServiceTiles3D","w","isUtilityNetworkWebMap","S","convertSnappingCandidate","v","makeGetGroundElevation","b","WorkerTileTreeDebugger","I","FeatureServiceSnappingSourceWorkerHandle","H","FeatureServiceTilesSimple","j","F","O","_updateTilesParameters","tiles","_tilesOfInterest","tileInfo","tileSize","_layerView","view","allLayerViews","find","layer","_layer","_isSuspended","layerSource","sublayerSources","some","enabled","visible","suspended","updating","_workerHandle","_updatingHandles","_outFields","fieldsIndex","timeInfo","floorInfo","subtypeField","filter","where","_getOrLoadWhereFields","timeExtent","startField","endField","get","name","push","map","utilityNetworks","isUtilityLayer","floorField","floors","length","Set","configuration","apiKey","customParameters","type","createQuery","effectiveDisplayFilter","token","viewType","availability","constructor","_debug","_memoizedMakeGetGroundElevation","initialize","destroyed","resourceController","schedule","immediate","hasZ","returnZ","elevationAlignPointsInFeatures","whenLayerView","queryForSymbologySnapping","addHandles","elevationProvider","context","elevationInfo","notifyElevationSourceChange","renderer","notifySymbologyChange","symbologySnappingSupported","setSymbologySnappingSupported","setup","spatialReference","add","updateTiles","configure","historicMoment","setHistoricMoment","updateOutFields","setSuspended","FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES","handle","removeHandles","handleEdits","addPromise","result","destroy","refresh","fetchCandidates","coordinateHelper","point","pointOfInterest","arrayToPoint","candidates","getDebugInfo","_whereModule","_loadWhereModuleTask","default","promise","create","fieldNames","constructOnly","prototype","readOnly","FeatureServiceSnappingSource"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/interactive/snapping/featureSources/FeatureServiceSnappingSource.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import{createTask as r}from\"../../../../core/asyncUtils.js\";import{destroyHandle as i}from\"../../../../core/handleUtils.js\";import{memoize as s}from\"../../../../core/memoize.js\";import{throwIfAborted as o,ignoreAbortErrors as a}from\"../../../../core/promiseUtils.js\";import{watch as n,on as l,initial as d,sync as u,syncAndInitial as p}from\"../../../../core/reactiveUtils.js\";import{sqlAnd as h}from\"../../../../core/sql.js\";import{property as c}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as y}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{UpdatingHandles as f}from\"../../../../core/support/UpdatingHandles.js\";import{isSubtypeGroupLayer as m}from\"../../../../layers/support/layerUtils.js\";import{elevationContextAffectsAlignment as _}from\"../../../../support/elevationInfoUtils.js\";import{FeatureServiceTiles2D as g}from\"../../../2d/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiles2D.js\";import{FeatureServiceTiles3D as w}from\"../../../3d/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiles3D.js\";import{isUtilityNetworkWebMap as S}from\"../snappingUtils.js\";import{convertSnappingCandidate as v,makeGetGroundElevation as b}from\"./queryEngineUtils.js\";import{WorkerTileTreeDebugger as I}from\"./WorkerTileTreeDebugger.js\";import{FeatureServiceSnappingSourceWorkerHandle as H}from\"./featureServiceSource/FeatureServiceSnappingSourceWorkerHandle.js\";import{FeatureServiceTilesSimple as j}from\"./featureServiceSource/FeatureServiceTilesSimple.js\";import F from\"../../../support/debugFlags.js\";let O=class extends t{get _updateTilesParameters(){return{tiles:this._tilesOfInterest.tiles,tileInfo:this._tilesOfInterest.tileInfo,tileSize:this._tilesOfInterest.tileSize}}get _layerView(){return this.view?.allLayerViews.find((e=>e.layer===this._layer))}get _isSuspended(){if(m(this._layer)){if(!this.layerSource.sublayerSources.some((e=>e.enabled&&e.layer.visible)))return!0}return!!this.view&&(!1!==this._layerView?.suspended||!this.layerSource.enabled)}get updating(){return this._workerHandle?.updating||this._updatingHandles.updating}get _outFields(){const{view:e,_layerView:t,layerSource:r}=this,{layer:i}=r,{fieldsIndex:s,timeInfo:o,floorInfo:a,subtypeField:n}=i,l=t&&\"filter\"in t?t.filter:null,d=l?.where&&\"1=1\"!==l.where?this._getOrLoadWhereFields(l.where,s):[];if(l?.timeExtent&&o){const{startField:e,endField:t}=o,r=s.get(e)?.name??e,i=s.get(t)?.name??t;r&&d.push(r),i&&d.push(i)}if(e?.map&&S(e.map)&&e.map.utilityNetworks?.find((e=>e.isUtilityLayer(i)))){const e=i.fieldsIndex.get(\"assetGroup\")?.name,t=i.fieldsIndex.get(\"assetType\")?.name;e&&t&&(d.push(e),d.push(t))}if(i&&a?.floorField&&e?.floors?.length){const e=s.get(a.floorField)?.name??a.floorField;e&&d.push(e)}if(n){const e=s.get(n)?.name??n;e&&d.push(e)}return new Set(d)}get configuration(){const{view:e}=this,{apiKey:t,customParameters:r}=this._layer,i=null!=e?e.type:\"2d\",s=this._layer.createQuery();return this._layerView&&\"effectiveDisplayFilter\"in this._layerView&&(s.where=h(s.where,this._layerView.effectiveDisplayFilter?.where)),{filter:s,customParameters:t?{...r,token:t}:r,viewType:i}}get availability(){return this._workerHandle?.availability??0}get _layer(){return this.layerSource.layer}constructor(e){super(e),this._updatingHandles=new f,this._workerHandle=null,this._debug=null,this._memoizedMakeGetGroundElevation=s(b)}initialize(){let e;const t=this.view;if(null==t||t.destroyed)this._tilesOfInterest=new j({layer:this._layer}),e=this._workerHandle=new H;else switch(t.type){case\"2d\":this._tilesOfInterest=new g({view:t,layer:this._layer}),e=this._workerHandle=new H;break;case\"3d\":{const{resourceController:r}=t,i=this._layer;this._tilesOfInterest=new w({view:t}),e=this._workerHandle=new H({schedule:e=>r.immediate.schedule(e),hasZ:this._layer.hasZ&&(this._layer.returnZ??!0),elevationAlignPointsInFeatures:async(e,r)=>{const s=await t.whenLayerView(i);return o(r),s.elevationAlignPointsInFeatures(e,r)},queryForSymbologySnapping:async(e,r)=>{const s=await t.whenLayerView(i);return o(r),s.queryForSymbologySnapping(e,r)}}),this.addHandles([t.elevationProvider.on(\"elevation-change\",(({context:t})=>{const{elevationInfo:r}=i;_(t,r)&&a(e.notifyElevationSourceChange())})),n((()=>i.elevationInfo),(()=>a(e.notifyElevationSourceChange())),d),n((()=>this._layerView?.layer?.renderer),(()=>a(e.notifySymbologyChange())),d),n((()=>this._layerView?.symbologySnappingSupported??!1),(t=>a(e.setSymbologySnappingSupported(t))),d),l((()=>this._layerView?.layer),[\"edits\",\"apply-edits\",\"graphic-update\"],(()=>e.notifySymbologyChange()))]);break}}this.addHandles([i(e)]),a(e.setup({layer:this._layer,spatialReference:this.spatialReference,configuration:this.configuration},null)),this._updatingHandles.add((()=>this._updateTilesParameters),(()=>a(e.updateTiles(this._updateTilesParameters,null))),d),this.addHandles([n((()=>this.configuration),(t=>a(e.configure(t,null))),u),n((()=>this._layer.historicMoment),(t=>a(e.setHistoricMoment(t))),p),n((()=>this._outFields),(t=>a(e.updateOutFields(t))),d),n((()=>this._isSuspended),(t=>a(e.setSuspended(t))),p)]),null!=t&&this.addHandles(n((()=>F.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES),(r=>{r&&!this._debug?(this._debug=new I({view:t,handle:e}),this.addHandles(i(this._debug),\"debug\")):!r&&this._debug&&this.removeHandles(\"debug\")}),d)),this.addHandles([this.layerSource.layer.on(\"edits\",(t=>a(e.handleEdits(t,null)))),this.layerSource.layer.on(\"apply-edits\",(e=>this._updatingHandles.addPromise(e.result)))])}destroy(){this._updatingHandles.destroy(),this._tilesOfInterest.destroy()}refresh(){this._workerHandle?.refresh(null)}async fetchCandidates(e,t){const{coordinateHelper:r,point:i}=e;this._tilesOfInterest.pointOfInterest=r.arrayToPoint(i);const s=this._memoizedMakeGetGroundElevation(this.view,r.spatialReference);return(await this._workerHandle.fetchCandidates({...e},t)).candidates.map((e=>v(e,s)))}getDebugInfo(e){return this._workerHandle.getDebugInfo(e)}_getOrLoadWhereFields(e,t){const{_whereModule:i}=this;if(!this._loadWhereModuleTask&&!i){const e=r((async()=>{const e=await import(\"../../../../core/sql/WhereClause.js\");return this._whereModule=e.default,this._whereModule}));return this._loadWhereModuleTask=e,this._updatingHandles.addPromise(e.promise),[]}if(!i)return[];try{return i.create(e,{fieldsIndex:t}).fieldNames}catch(s){return[]}}};e([c({constructOnly:!0})],O.prototype,\"spatialReference\",void 0),e([c({constructOnly:!0})],O.prototype,\"layerSource\",void 0),e([c({constructOnly:!0})],O.prototype,\"view\",void 0),e([c()],O.prototype,\"_tilesOfInterest\",void 0),e([c({readOnly:!0})],O.prototype,\"_updateTilesParameters\",null),e([c()],O.prototype,\"_layerView\",null),e([c()],O.prototype,\"_isSuspended\",null),e([c({readOnly:!0})],O.prototype,\"updating\",null),e([c()],O.prototype,\"_outFields\",null),e([c({readOnly:!0})],O.prototype,\"configuration\",null),e([c({readOnly:!0})],O.prototype,\"availability\",null),e([c()],O.prototype,\"_loadWhereModuleTask\",void 0),e([c()],O.prototype,\"_whereModule\",void 0),O=e([y(\"esri.views.interactive.snapping.featureSources.FeatureServiceSnappingSource\")],O);export{O as FeatureServiceSnappingSource};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}