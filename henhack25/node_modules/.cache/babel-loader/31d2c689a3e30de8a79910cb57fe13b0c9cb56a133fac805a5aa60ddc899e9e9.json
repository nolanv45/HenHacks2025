{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport t from \"../../../core/Error.js\";\nimport { isAborted as e, createAbortError as a } from \"../../../core/promiseUtils.js\";\nimport { Z as n } from \"../../../chunks/Zlib.js\";\nclass i {\n  constructor(t) {\n    this._canvas = null, this._ctx = null, t && (this._canvas = t.canvas, this._ctx = t.ctx || t.canvas && t.canvas.getContext(\"2d\"));\n  }\n  decode(n, s, r) {\n    if (!n || n.byteLength < 10) throw new t(\"imagecanvasdecoder: decode\", \"required a valid encoded data as input.\");\n    let {\n      width: c = 0,\n      height: h = 0,\n      format: o\n    } = s;\n    const {\n      applyJpegMask: l\n    } = s;\n    if (l && (!c || !h)) throw new t(\"imagecanvasdecoder: decode\", \"image width and height are needed to apply jpeg mask directly to canvas\");\n    return new Promise((t, d) => {\n      let g = null;\n      \"jpg\" === o && l && (g = i._getMask(n, {\n        width: c,\n        height: h\n      }));\n      const w = new Blob([new Uint8Array(n)], {\n          type: \"image/\" + o == \"jpg\" ? \"jpeg\" : o\n        }),\n        v = URL.createObjectURL(w),\n        m = new Image();\n      let _;\n      m.src = v, m.onload = () => {\n        if (URL.revokeObjectURL(v), e(r)) return void d(a());\n        c = m.width, h = m.height, this._canvas && this._ctx ? (this._canvas.width === c && this._canvas.height === h || (this._canvas.width = c, this._canvas.height = h), this._ctx.clearRect(0, 0, c, h)) : (this._canvas = document.createElement(\"canvas\"), this._canvas.width = c, this._canvas.height = h, this._ctx = this._canvas.getContext(\"2d\")), this._ctx.drawImage(m, 0, 0);\n        const n = this._ctx.getImageData(0, 0, c, h);\n        let i;\n        if (_ = n.data, s.renderOnCanvas) {\n          if (g) for (i = 0; i < g.length; i++) g[i] ? _[4 * i + 3] = 255 : _[4 * i + 3] = 0;\n          return this._ctx.putImageData(n, 0, 0), void t(null);\n        }\n        const o = c * h,\n          l = new Uint8Array(o),\n          w = new Uint8Array(o),\n          p = new Uint8Array(o);\n        if (g) for (i = 0; i < o; i++) l[i] = _[4 * i], w[i] = _[4 * i + 1], p[i] = _[4 * i + 2];else for (g = new Uint8Array(o), i = 0; i < o; i++) l[i] = _[4 * i], w[i] = _[4 * i + 1], p[i] = _[4 * i + 2], g[i] = _[4 * i + 3];\n        t({\n          width: c,\n          height: h,\n          pixels: [l, w, p],\n          mask: g,\n          pixelType: \"u8\"\n        });\n      }, m.onerror = () => {\n        URL.revokeObjectURL(v), d(\"cannot load image\");\n      };\n    });\n  }\n  static _getMask(t, e) {\n    let a = null;\n    try {\n      const i = new Uint8Array(t),\n        s = Math.ceil(i.length / 2);\n      let r = 0;\n      const c = i.length - 2;\n      for (r = s; r < c && (255 !== i[r] || 217 !== i[r + 1]); r++);\n      if (r += 2, r < i.length - 1) {\n        const t = new n(i.subarray(r)).getBytes();\n        a = new Uint8Array(e.width * e.height);\n        let s = 0;\n        for (let e = 0; e < t.length; e++) for (let n = 7; n >= 0; n--) a[s++] = t[e] >> n & 1;\n      }\n    } catch (i) {}\n    return a;\n  }\n}\nexport { i as default };","map":{"version":3,"names":["t","isAborted","e","createAbortError","a","Z","n","i","constructor","_canvas","_ctx","canvas","ctx","getContext","decode","s","r","byteLength","width","c","height","h","format","o","applyJpegMask","l","Promise","d","g","_getMask","w","Blob","Uint8Array","type","v","URL","createObjectURL","m","Image","_","src","onload","revokeObjectURL","clearRect","document","createElement","drawImage","getImageData","data","renderOnCanvas","length","putImageData","p","pixels","mask","pixelType","onerror","Math","ceil","subarray","getBytes","default"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/layers/support/rasterFormats/ImageCanvasDecoder.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport t from\"../../../core/Error.js\";import{isAborted as e,createAbortError as a}from\"../../../core/promiseUtils.js\";import{Z as n}from\"../../../chunks/Zlib.js\";class i{constructor(t){this._canvas=null,this._ctx=null,t&&(this._canvas=t.canvas,this._ctx=t.ctx||t.canvas&&t.canvas.getContext(\"2d\"))}decode(n,s,r){if(!n||n.byteLength<10)throw new t(\"imagecanvasdecoder: decode\",\"required a valid encoded data as input.\");let{width:c=0,height:h=0,format:o}=s;const{applyJpegMask:l}=s;if(l&&(!c||!h))throw new t(\"imagecanvasdecoder: decode\",\"image width and height are needed to apply jpeg mask directly to canvas\");return new Promise(((t,d)=>{let g=null;\"jpg\"===o&&l&&(g=i._getMask(n,{width:c,height:h}));const w=new Blob([new Uint8Array(n)],{type:\"image/\"+o==\"jpg\"?\"jpeg\":o}),v=URL.createObjectURL(w),m=new Image;let _;m.src=v,m.onload=()=>{if(URL.revokeObjectURL(v),e(r))return void d(a());c=m.width,h=m.height,this._canvas&&this._ctx?(this._canvas.width===c&&this._canvas.height===h||(this._canvas.width=c,this._canvas.height=h),this._ctx.clearRect(0,0,c,h)):(this._canvas=document.createElement(\"canvas\"),this._canvas.width=c,this._canvas.height=h,this._ctx=this._canvas.getContext(\"2d\")),this._ctx.drawImage(m,0,0);const n=this._ctx.getImageData(0,0,c,h);let i;if(_=n.data,s.renderOnCanvas){if(g)for(i=0;i<g.length;i++)g[i]?_[4*i+3]=255:_[4*i+3]=0;return this._ctx.putImageData(n,0,0),void t(null)}const o=c*h,l=new Uint8Array(o),w=new Uint8Array(o),p=new Uint8Array(o);if(g)for(i=0;i<o;i++)l[i]=_[4*i],w[i]=_[4*i+1],p[i]=_[4*i+2];else for(g=new Uint8Array(o),i=0;i<o;i++)l[i]=_[4*i],w[i]=_[4*i+1],p[i]=_[4*i+2],g[i]=_[4*i+3];t({width:c,height:h,pixels:[l,w,p],mask:g,pixelType:\"u8\"})},m.onerror=()=>{URL.revokeObjectURL(v),d(\"cannot load image\")}}))}static _getMask(t,e){let a=null;try{const i=new Uint8Array(t),s=Math.ceil(i.length/2);let r=0;const c=i.length-2;for(r=s;r<c&&(255!==i[r]||217!==i[r+1]);r++);if(r+=2,r<i.length-1){const t=new n(i.subarray(r)).getBytes();a=new Uint8Array(e.width*e.height);let s=0;for(let e=0;e<t.length;e++)for(let n=7;n>=0;n--)a[s++]=t[e]>>n&1}}catch(i){}return a}}export{i as default};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}