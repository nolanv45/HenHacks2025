{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { valueInUnit as e } from \"../../../../../core/quantityUtils.js\";\nimport { createRenderScreenPointArray3 as r, createScreenPointArray as o } from \"../../../../../core/screenUtils.js\";\nimport { getMetersPerUnitForSR as t } from \"../../../../../core/unitUtils.js\";\nimport { fromValues as n } from \"../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";\nimport { e as s, o as i, k as c, d as l, b as a } from \"../../../../../chunks/vec32.js\";\nimport { create as p } from \"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { projectPoint as m } from \"../../../../../geometry/projection.js\";\nimport { projectVectorToVector as u } from \"../../../../../geometry/projection/projectVectorToVector.js\";\nimport { geodesicCompatibleSpatialReference as f, inverseGeodeticSolver as d, directGeodeticSolver as j, InverseGeodeticSolverResult as g } from \"../../../../../geometry/support/geodesicUtils.js\";\nimport { getNormal as y, fromPositionAndNormal as h, create as R } from \"../../../../../geometry/support/plane.js\";\nimport { makeDehydratedPoint as v } from \"../../../../../layers/graphics/dehydratedPoint.js\";\nimport { getZForElevationMode as x } from \"../../../../../support/elevationInfoUtils.js\";\nimport { PlaneType as C, OffsetEdgeVertex as H } from \"../../../../interactive/editGeometry/operations/OffsetEdgeVertex.js\";\nfunction U(e, r, o) {\n  const t = \"on-the-ground\" === o.mode ? C.XY : C.XYZ;\n  return new H(e, t, r, 0);\n}\nfunction w(e, r, o) {\n  const t = p();\n  if (!e.renderCoordsHelper.toRenderCoords(r, t)) return null;\n  const n = T(e, r, y(o.plane)),\n    i = T(e, r, o.edgeDirection);\n  if (null == n || null == i) return null;\n  const c = s(p(), n, i);\n  return h(t, c, R());\n}\nfunction T(e, r, o) {\n  const t = v(r.x + o[0], r.y + o[1], r.z + o[2], r.spatialReference),\n    n = p(),\n    s = p();\n  return e.renderCoordsHelper.toRenderCoords(r, n) && e.renderCoordsHelper.toRenderCoords(t, s) ? i(s, n, s) : null;\n}\nfunction b(e, r, o) {\n  const t = y(e),\n    c = i(p(), r, o),\n    l = s(p(), c, t),\n    a = s(p(), c, l);\n  return n(c[0], c[1], c[2], 0, l[0], l[1], l[2], 0, a[0], a[1], a[2], 0, 0, 0, 0, 1);\n}\nfunction q(e, o, t) {\n  const n = t.projectToRenderScreen(e, r()),\n    s = t.projectToRenderScreen(o, r());\n  return null != n && null != s ? c(l(n, n, s)) : 0;\n}\nfunction A(e, r, t, n) {\n  const {\n    elevationInfo: s,\n    operations: i\n  } = t;\n  if (!i || !e) return null;\n  const c = n.manipulator.elevationAlignedLocation,\n    l = x(c, r, s),\n    a = r.sceneIntersectionHelper.intersectElevationFromScreen(o(e.x, e.y), s, l);\n  return a && m(a, a, i.data.spatialReference) ? a : null;\n}\nfunction I(r, o, n, {\n  data: {\n    coordinateHelper: s,\n    spatialReference: i\n  }\n}) {\n  const c = e(r, \"meters\"),\n    l = t(i),\n    m = Math.sign(c * n.selectedArrow),\n    h = f(i),\n    R = y(n.plane),\n    v = s.pointToXYZ(o),\n    x = p();\n  a(x, v, R, m * (M / l));\n  const C = c * n.selectedArrow / l;\n  if (!h || !u(v, i, v, h) || !u(x, i, x, h)) return C;\n  const H = new g();\n  if (d(H, v, x, h), j(x, v, H.azimuth, c, h), !u(x, h, x, i)) return C;\n  const U = x[0] - o.x,\n    w = x[1] - o.y,\n    T = Math.sqrt(U * U + w * w) * m,\n    [b, q] = R,\n    A = Math.sqrt(b * b + q * q);\n  return 0 === A ? 0 : T / A;\n}\nconst M = 10;\nexport { w as createEdgeOffsetIntersectionPlane, U as createEdgeOffsetOperation, b as edgeOffsetRotationMatrix, I as getDistanceInGeometrySR, A as getMapPointAtEdgeOffsetManipulatorElevation, q as screenEdgeLengthSquared };","map":{"version":3,"names":["valueInUnit","e","createRenderScreenPointArray3","r","createScreenPointArray","o","getMetersPerUnitForSR","t","fromValues","n","s","i","k","c","d","l","b","a","create","p","projectPoint","m","projectVectorToVector","u","geodesicCompatibleSpatialReference","f","inverseGeodeticSolver","directGeodeticSolver","j","InverseGeodeticSolverResult","g","getNormal","y","fromPositionAndNormal","h","R","makeDehydratedPoint","v","getZForElevationMode","x","PlaneType","C","OffsetEdgeVertex","H","U","mode","XY","XYZ","w","renderCoordsHelper","toRenderCoords","T","plane","edgeDirection","z","spatialReference","q","projectToRenderScreen","A","elevationInfo","operations","manipulator","elevationAlignedLocation","sceneIntersectionHelper","intersectElevationFromScreen","data","I","coordinateHelper","Math","sign","selectedArrow","pointToXYZ","M","azimuth","sqrt","createEdgeOffsetIntersectionPlane","createEdgeOffsetOperation","edgeOffsetRotationMatrix","getDistanceInGeometrySR","getMapPointAtEdgeOffsetManipulatorElevation","screenEdgeLengthSquared"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/3d/interactive/editingTools/reshape/edgeOffsetUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{valueInUnit as e}from\"../../../../../core/quantityUtils.js\";import{createRenderScreenPointArray3 as r,createScreenPointArray as o}from\"../../../../../core/screenUtils.js\";import{getMetersPerUnitForSR as t}from\"../../../../../core/unitUtils.js\";import{fromValues as n}from\"../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{e as s,o as i,k as c,d as l,b as a}from\"../../../../../chunks/vec32.js\";import{create as p}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{projectPoint as m}from\"../../../../../geometry/projection.js\";import{projectVectorToVector as u}from\"../../../../../geometry/projection/projectVectorToVector.js\";import{geodesicCompatibleSpatialReference as f,inverseGeodeticSolver as d,directGeodeticSolver as j,InverseGeodeticSolverResult as g}from\"../../../../../geometry/support/geodesicUtils.js\";import{getNormal as y,fromPositionAndNormal as h,create as R}from\"../../../../../geometry/support/plane.js\";import{makeDehydratedPoint as v}from\"../../../../../layers/graphics/dehydratedPoint.js\";import{getZForElevationMode as x}from\"../../../../../support/elevationInfoUtils.js\";import{PlaneType as C,OffsetEdgeVertex as H}from\"../../../../interactive/editGeometry/operations/OffsetEdgeVertex.js\";function U(e,r,o){const t=\"on-the-ground\"===o.mode?C.XY:C.XYZ;return new H(e,t,r,0)}function w(e,r,o){const t=p();if(!e.renderCoordsHelper.toRenderCoords(r,t))return null;const n=T(e,r,y(o.plane)),i=T(e,r,o.edgeDirection);if(null==n||null==i)return null;const c=s(p(),n,i);return h(t,c,R())}function T(e,r,o){const t=v(r.x+o[0],r.y+o[1],r.z+o[2],r.spatialReference),n=p(),s=p();return e.renderCoordsHelper.toRenderCoords(r,n)&&e.renderCoordsHelper.toRenderCoords(t,s)?i(s,n,s):null}function b(e,r,o){const t=y(e),c=i(p(),r,o),l=s(p(),c,t),a=s(p(),c,l);return n(c[0],c[1],c[2],0,l[0],l[1],l[2],0,a[0],a[1],a[2],0,0,0,0,1)}function q(e,o,t){const n=t.projectToRenderScreen(e,r()),s=t.projectToRenderScreen(o,r());return null!=n&&null!=s?c(l(n,n,s)):0}function A(e,r,t,n){const{elevationInfo:s,operations:i}=t;if(!i||!e)return null;const c=n.manipulator.elevationAlignedLocation,l=x(c,r,s),a=r.sceneIntersectionHelper.intersectElevationFromScreen(o(e.x,e.y),s,l);return a&&m(a,a,i.data.spatialReference)?a:null}function I(r,o,n,{data:{coordinateHelper:s,spatialReference:i}}){const c=e(r,\"meters\"),l=t(i),m=Math.sign(c*n.selectedArrow),h=f(i),R=y(n.plane),v=s.pointToXYZ(o),x=p();a(x,v,R,m*(M/l));const C=c*n.selectedArrow/l;if(!h||!u(v,i,v,h)||!u(x,i,x,h))return C;const H=new g;if(d(H,v,x,h),j(x,v,H.azimuth,c,h),!u(x,h,x,i))return C;const U=x[0]-o.x,w=x[1]-o.y,T=Math.sqrt(U*U+w*w)*m,[b,q]=R,A=Math.sqrt(b*b+q*q);return 0===A?0:T/A}const M=10;export{w as createEdgeOffsetIntersectionPlane,U as createEdgeOffsetOperation,b as edgeOffsetRotationMatrix,I as getDistanceInGeometrySR,A as getMapPointAtEdgeOffsetManipulatorElevation,q as screenEdgeLengthSquared};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}