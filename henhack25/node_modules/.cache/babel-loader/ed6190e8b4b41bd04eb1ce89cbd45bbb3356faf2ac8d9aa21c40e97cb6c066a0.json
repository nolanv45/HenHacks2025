{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as s } from \"../../chunks/tslib.es6.js\";\nimport e from \"../Accessor.js\";\nimport { makeHandle as t } from \"../handleUtils.js\";\nimport { watch as i, when as n, on as d, sync as a } from \"../reactiveUtils.js\";\nimport { schedule as r } from \"../scheduling.js\";\nimport { property as o } from \"../accessorSupport/decorators/property.js\";\nimport { subclass as l } from \"../accessorSupport/decorators/subclass.js\";\nlet h = class extends e {\n  constructor() {\n    super(...arguments), this.updating = !1, this._handleId = 0, this._scheduleHandleId = 0, this._pendingPromises = new Set();\n  }\n  destroy() {\n    this.removeAll();\n  }\n  add(s, e) {\n    let t = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return this._installWatch(s, e, t, i);\n  }\n  addWhen(s, e) {\n    let t = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return this._installWatch(s, e, t, n);\n  }\n  addOnCollectionChange(s, e) {\n    let {\n      initial: i = !1,\n      final: n = !1\n    } = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    const r = ++this._handleId;\n    return this.addHandles([d(s, \"after-changes\", this._createSyncUpdatingCallback(), a), d(s, \"change\", e, {\n      onListenerAdd: i ? s => e({\n        added: s.toArray(),\n        removed: []\n      }) : void 0,\n      onListenerRemove: n ? s => e({\n        added: [],\n        removed: s.toArray()\n      }) : void 0\n    })], r), t(() => this.removeHandles(r));\n  }\n  addPromise(s) {\n    if (null == s) return s;\n    const e = ++this._handleId;\n    this.addHandles(t(() => {\n      this._pendingPromises.delete(s) && (0 !== this._pendingPromises.size || this.hasHandles(c) || this._set(\"updating\", !1));\n    }), e), this._pendingPromises.add(s), this._set(\"updating\", !0);\n    const i = () => this.removeHandles(e);\n    return s.then(i, i), s;\n  }\n  removeAll() {\n    this._pendingPromises.clear(), this.removeAllHandles(), this._set(\"updating\", !1);\n  }\n  _installWatch(s, e) {\n    let i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    let n = arguments.length > 3 ? arguments[3] : undefined;\n    const d = ++this._handleId;\n    i.sync || this._installSyncUpdatingWatch(s, d);\n    const a = n(s, e, i);\n    return this.addHandles(a, d), t(() => this.removeHandles(d));\n  }\n  _installSyncUpdatingWatch(s, e) {\n    const t = this._createSyncUpdatingCallback(),\n      n = i(s, t, {\n        sync: !0,\n        equals: () => !1\n      });\n    return this.addHandles(n, e), n;\n  }\n  _createSyncUpdatingCallback() {\n    return () => {\n      this.removeHandles(c), ++this._scheduleHandleId;\n      const s = this._scheduleHandleId;\n      this._get(\"updating\") || this._set(\"updating\", !0), this.addHandles(r(() => {\n        s === this._scheduleHandleId && (this._set(\"updating\", this._pendingPromises.size > 0), this.removeHandles(c));\n      }), c);\n    };\n  }\n};\ns([o({\n  readOnly: !0\n})], h.prototype, \"updating\", void 0), h = s([l(\"esri.core.support.UpdatingHandles\")], h);\nconst c = -42;\nexport { h as UpdatingHandles };","map":{"version":3,"names":["_","s","e","makeHandle","t","watch","i","when","n","on","d","sync","a","schedule","r","property","o","subclass","l","h","constructor","arguments","updating","_handleId","_scheduleHandleId","_pendingPromises","Set","destroy","removeAll","add","length","undefined","_installWatch","addWhen","addOnCollectionChange","initial","final","addHandles","_createSyncUpdatingCallback","onListenerAdd","added","toArray","removed","onListenerRemove","removeHandles","addPromise","delete","size","hasHandles","c","_set","then","clear","removeAllHandles","_installSyncUpdatingWatch","equals","_get","readOnly","prototype","UpdatingHandles"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/core/support/UpdatingHandles.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../../chunks/tslib.es6.js\";import e from\"../Accessor.js\";import{makeHandle as t}from\"../handleUtils.js\";import{watch as i,when as n,on as d,sync as a}from\"../reactiveUtils.js\";import{schedule as r}from\"../scheduling.js\";import{property as o}from\"../accessorSupport/decorators/property.js\";import{subclass as l}from\"../accessorSupport/decorators/subclass.js\";let h=class extends e{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(s,e,t={}){return this._installWatch(s,e,t,i)}addWhen(s,e,t={}){return this._installWatch(s,e,t,n)}addOnCollectionChange(s,e,{initial:i=!1,final:n=!1}={}){const r=++this._handleId;return this.addHandles([d(s,\"after-changes\",this._createSyncUpdatingCallback(),a),d(s,\"change\",e,{onListenerAdd:i?s=>e({added:s.toArray(),removed:[]}):void 0,onListenerRemove:n?s=>e({added:[],removed:s.toArray()}):void 0})],r),t((()=>this.removeHandles(r)))}addPromise(s){if(null==s)return s;const e=++this._handleId;this.addHandles(t((()=>{this._pendingPromises.delete(s)&&(0!==this._pendingPromises.size||this.hasHandles(c)||this._set(\"updating\",!1))})),e),this._pendingPromises.add(s),this._set(\"updating\",!0);const i=()=>this.removeHandles(e);return s.then(i,i),s}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set(\"updating\",!1)}_installWatch(s,e,i={},n){const d=++this._handleId;i.sync||this._installSyncUpdatingWatch(s,d);const a=n(s,e,i);return this.addHandles(a,d),t((()=>this.removeHandles(d)))}_installSyncUpdatingWatch(s,e){const t=this._createSyncUpdatingCallback(),n=i(s,t,{sync:!0,equals:()=>!1});return this.addHandles(n,e),n}_createSyncUpdatingCallback(){return()=>{this.removeHandles(c),++this._scheduleHandleId;const s=this._scheduleHandleId;this._get(\"updating\")||this._set(\"updating\",!0),this.addHandles(r((()=>{s===this._scheduleHandleId&&(this._set(\"updating\",this._pendingPromises.size>0),this.removeHandles(c))})),c)}}};s([o({readOnly:!0})],h.prototype,\"updating\",void 0),h=s([l(\"esri.core.support.UpdatingHandles\")],h);const c=-42;export{h as UpdatingHandles};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}