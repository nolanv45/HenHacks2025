{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport t from \"../../../request.js\";\nimport { urlToObject as e, join as r } from \"../../../core/urlUtils.js\";\nimport { getJsonType as n } from \"../../../geometry/support/jsonUtils.js\";\nimport { normalizeCentralMeridian as o } from \"../../../geometry/support/normalizeUtils.js\";\nimport { srToRESTValue as i } from \"../../../geometry/support/spatialReferenceUtils.js\";\nimport { mapParameters as s } from \"../../operations/urlUtils.js\";\nimport { applyFeatureSetZUnitScaling as l } from \"./queryZScale.js\";\nconst u = \"Layer does not support extent calculation.\";\nfunction y(t, e) {\n  const r = t.geometry,\n    o = t.toJSON(),\n    s = o;\n  if (null != r && (s.geometry = JSON.stringify(r), s.geometryType = n(r), s.inSR = i(r.spatialReference)), o.topFilter?.groupByFields && (s.topFilter.groupByFields = o.topFilter.groupByFields.join(\",\")), o.topFilter?.orderByFields && (s.topFilter.orderByFields = o.topFilter.orderByFields.join(\",\")), o.topFilter && (s.topFilter = JSON.stringify(s.topFilter)), o.objectIds && (s.objectIds = o.objectIds.join(\",\")), o.orderByFields && (s.orderByFields = o.orderByFields.join(\",\")), o.outFields && !(e?.returnCountOnly || e?.returnExtentOnly || e?.returnIdsOnly) ? o.outFields.includes(\"*\") ? s.outFields = \"*\" : s.outFields = o.outFields.join(\",\") : delete s.outFields, o.outSR ? s.outSR = i(o.outSR) : r && o.returnGeometry && (s.outSR = s.inSR), o.returnGeometry && delete o.returnGeometry, o.timeExtent) {\n    const t = o.timeExtent,\n      {\n        start: e,\n        end: r\n      } = t;\n    null == e && null == r || (s.time = e === r ? e : `${e ?? \"null\"},${r ?? \"null\"}`), delete o.timeExtent;\n  }\n  return s;\n}\nasync function p(t, e, r, n) {\n  const o = await a(t, e, \"json\", n);\n  return l(e, r, o.data), o;\n}\nasync function m(t, e, r) {\n  return null != e.timeExtent && e.timeExtent.isEmpty ? {\n    data: {\n      objectIds: []\n    }\n  } : a(t, e, \"json\", r, {\n    returnIdsOnly: !0\n  });\n}\nasync function d(t, e, r) {\n  return null != e.timeExtent && e.timeExtent.isEmpty ? {\n    data: {\n      count: 0,\n      extent: null\n    }\n  } : a(t, e, \"json\", r, {\n    returnExtentOnly: !0,\n    returnCountOnly: !0\n  }).then(t => {\n    const e = t.data;\n    if (e.hasOwnProperty(\"extent\")) return t;\n    if (e.features) throw new Error(u);\n    if (e.hasOwnProperty(\"count\")) throw new Error(u);\n    return t;\n  });\n}\nfunction c(t, e, r) {\n  return null != e.timeExtent && e.timeExtent.isEmpty ? Promise.resolve({\n    data: {\n      count: 0\n    }\n  }) : a(t, e, \"json\", r, {\n    returnIdsOnly: !0,\n    returnCountOnly: !0\n  });\n}\nfunction a(n, i, l, u = {}, p = {}) {\n  const m = \"string\" == typeof n ? e(n) : n,\n    d = i.geometry ? [i.geometry] : [];\n  return u.responseType = \"json\", o(d, null, u).then(e => {\n    const n = e?.[0];\n    null != n && ((i = i.clone()).geometry = n);\n    const o = s({\n      ...m.query,\n      f: l,\n      ...p,\n      ...y(i, p)\n    });\n    return t(r(m.path, \"queryTopFeatures\"), {\n      ...u,\n      query: {\n        ...o,\n        ...u.query\n      }\n    });\n  });\n}\nexport { c as executeQueryForTopCount, d as executeQueryForTopExtents, m as executeQueryForTopIds, p as executeTopFeaturesQuery, y as queryToQueryStringParameters };","map":{"version":3,"names":["t","urlToObject","e","join","r","getJsonType","n","normalizeCentralMeridian","o","srToRESTValue","i","mapParameters","s","applyFeatureSetZUnitScaling","l","u","y","geometry","toJSON","JSON","stringify","geometryType","inSR","spatialReference","topFilter","groupByFields","orderByFields","objectIds","outFields","returnCountOnly","returnExtentOnly","returnIdsOnly","includes","outSR","returnGeometry","timeExtent","start","end","time","p","a","data","m","isEmpty","d","count","extent","then","hasOwnProperty","features","Error","c","Promise","resolve","responseType","clone","query","f","path","executeQueryForTopCount","executeQueryForTopExtents","executeQueryForTopIds","executeTopFeaturesQuery","queryToQueryStringParameters"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/rest/query/operations/queryTopFeatures.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport t from\"../../../request.js\";import{urlToObject as e,join as r}from\"../../../core/urlUtils.js\";import{getJsonType as n}from\"../../../geometry/support/jsonUtils.js\";import{normalizeCentralMeridian as o}from\"../../../geometry/support/normalizeUtils.js\";import{srToRESTValue as i}from\"../../../geometry/support/spatialReferenceUtils.js\";import{mapParameters as s}from\"../../operations/urlUtils.js\";import{applyFeatureSetZUnitScaling as l}from\"./queryZScale.js\";const u=\"Layer does not support extent calculation.\";function y(t,e){const r=t.geometry,o=t.toJSON(),s=o;if(null!=r&&(s.geometry=JSON.stringify(r),s.geometryType=n(r),s.inSR=i(r.spatialReference)),o.topFilter?.groupByFields&&(s.topFilter.groupByFields=o.topFilter.groupByFields.join(\",\")),o.topFilter?.orderByFields&&(s.topFilter.orderByFields=o.topFilter.orderByFields.join(\",\")),o.topFilter&&(s.topFilter=JSON.stringify(s.topFilter)),o.objectIds&&(s.objectIds=o.objectIds.join(\",\")),o.orderByFields&&(s.orderByFields=o.orderByFields.join(\",\")),o.outFields&&!(e?.returnCountOnly||e?.returnExtentOnly||e?.returnIdsOnly)?o.outFields.includes(\"*\")?s.outFields=\"*\":s.outFields=o.outFields.join(\",\"):delete s.outFields,o.outSR?s.outSR=i(o.outSR):r&&o.returnGeometry&&(s.outSR=s.inSR),o.returnGeometry&&delete o.returnGeometry,o.timeExtent){const t=o.timeExtent,{start:e,end:r}=t;null==e&&null==r||(s.time=e===r?e:`${e??\"null\"},${r??\"null\"}`),delete o.timeExtent}return s}async function p(t,e,r,n){const o=await a(t,e,\"json\",n);return l(e,r,o.data),o}async function m(t,e,r){return null!=e.timeExtent&&e.timeExtent.isEmpty?{data:{objectIds:[]}}:a(t,e,\"json\",r,{returnIdsOnly:!0})}async function d(t,e,r){return null!=e.timeExtent&&e.timeExtent.isEmpty?{data:{count:0,extent:null}}:a(t,e,\"json\",r,{returnExtentOnly:!0,returnCountOnly:!0}).then((t=>{const e=t.data;if(e.hasOwnProperty(\"extent\"))return t;if(e.features)throw new Error(u);if(e.hasOwnProperty(\"count\"))throw new Error(u);return t}))}function c(t,e,r){return null!=e.timeExtent&&e.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):a(t,e,\"json\",r,{returnIdsOnly:!0,returnCountOnly:!0})}function a(n,i,l,u={},p={}){const m=\"string\"==typeof n?e(n):n,d=i.geometry?[i.geometry]:[];return u.responseType=\"json\",o(d,null,u).then((e=>{const n=e?.[0];null!=n&&((i=i.clone()).geometry=n);const o=s({...m.query,f:l,...p,...y(i,p)});return t(r(m.path,\"queryTopFeatures\"),{...u,query:{...o,...u.query}})}))}export{c as executeQueryForTopCount,d as executeQueryForTopExtents,m as executeQueryForTopIds,p as executeTopFeaturesQuery,y as queryToQueryStringParameters};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}