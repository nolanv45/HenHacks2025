{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from \"../../Graphic.js\";\nimport t from \"../../core/Collection.js\";\nimport a from \"../../core/Error.js\";\nimport { clone as r } from \"../../core/lang.js\";\nimport s from \"../../core/Logger.js\";\nimport { createResolver as i } from \"../../core/promiseUtils.js\";\nimport { dataComponents as n } from \"../../core/urlUtils.js\";\nimport { generateBracedUUID as o } from \"../../core/uuid.js\";\nimport { normalizeCentralMeridian as l } from \"../../geometry/support/normalizeUtils.js\";\nimport { isGeographic as d, equals as u, isWGS84 as p, isWebMercator as c } from \"../../geometry/support/spatialReferenceUtils.js\";\nimport { isEditBusLayer as h, emitApplyEditsEvent as m } from \"../mixins/EditBusLayer.js\";\nimport { isValidFieldValue as f } from \"../support/fieldUtils.js\";\nimport { isGlbSupportedEditFormat as y } from \"../support/infoFor3D.js\";\nimport { getEffectiveEditingEnabled as g, getEffectiveLayerCapabilities as b } from \"../support/layerUtils.js\";\nfunction w(e) {\n  return null != e?.applyEdits;\n}\nfunction F(e) {\n  return \"object\" == typeof e && null != e && \"objectId\" in e && !!e.objectId;\n}\nfunction A(e) {\n  return e.every(F);\n}\nfunction v(e) {\n  return \"object\" == typeof e && null != e && \"globalId\" in e && !!e.globalId;\n}\nfunction I(e) {\n  return e.every(v);\n}\nasync function $(e, t, a) {\n  let s = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  let n;\n  const o = \"gdbVersion\" in e ? e.gdbVersion : null,\n    l = s.gdbVersion ?? o;\n  if (h(e) && e.url) n = m(e.url, e.layerId, l, \"original-and-current-features\" === s.returnServiceEditsOption);else {\n    n = i(), n.promise.then(t => {\n      (t.addedFeatures.length || t.updatedFeatures.length || t.deletedFeatures.length || t.addedAttachments.length || t.updatedAttachments.length || t.deletedAttachments.length) && e.emit(\"edits\", t);\n    });\n    const t = {\n      result: n.promise\n    };\n    e.emit(\"apply-edits\", t);\n  }\n  try {\n    const {\n        results: i,\n        edits: o\n      } = await E(e, t, a, s),\n      l = e => e.filter(e => !e.error).map(r),\n      d = {\n        edits: o,\n        addedFeatures: l(i.addFeatureResults),\n        updatedFeatures: l(i.updateFeatureResults),\n        deletedFeatures: l(i.deleteFeatureResults),\n        addedAttachments: l(i.addAttachmentResults),\n        updatedAttachments: l(i.updateAttachmentResults),\n        deletedAttachments: l(i.deleteAttachmentResults),\n        exceededTransferLimit: !1,\n        historicMoment: i.editMoment ? new Date(i.editMoment) : null,\n        globalIdToObjectId: s.globalIdToObjectId\n      };\n    return i.editedFeatureResults?.length && (d.editedFeatures = i.editedFeatureResults), n.resolve(d), i;\n  } catch (d) {\n    throw n.reject(d), d;\n  }\n}\nasync function E(e, t, r, s) {\n  if (await e.load(), !w(t)) throw new a(`${e.type}-layer:no-editing-support`, \"Layer source does not support applyEdits capability\", {\n    layer: e\n  });\n  if (!g(e)) throw new a(`${e.type}-layer:editing-disabled`, \"Editing is disabled for layer\", {\n    layer: e\n  });\n  const {\n    edits: i,\n    options: n\n  } = await S(e, r, s);\n  return i.addFeatures?.length || i.updateFeatures?.length || i.deleteFeatures?.length || i.addAttachments?.length || i.updateAttachments?.length || i.deleteAttachments?.length ? {\n    edits: i,\n    results: await t.applyEdits(i, n)\n  } : {\n    edits: i,\n    results: {\n      addFeatureResults: [],\n      updateFeatureResults: [],\n      deleteFeatureResults: [],\n      addAttachmentResults: [],\n      updateAttachmentResults: [],\n      deleteAttachmentResults: []\n    }\n  };\n}\nasync function S(e, t, r) {\n  const i = b(e),\n    n = t && (t.addFeatures || t.updateFeatures || t.deleteFeatures),\n    o = t && (t.addAttachments || t.updateAttachments || t.deleteAttachments),\n    l = null != e.infoFor3D;\n  if (V(t, i, r, !!n, !!o, `${e.type}-layer`), !i.data.isVersioned && r?.gdbVersion) throw new a(`${e.type}-layer:invalid-parameter`, \"'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isVersioned'\");\n  if (!i.editing.supportsRollbackOnFailure && r?.rollbackOnFailureEnabled) throw new a(`${e.type}-layer:invalid-parameter`, \"This layer does not support 'rollbackOnFailureEnabled' parameter. See: 'capabilities.editing.supportsRollbackOnFailure'\");\n  const d = {\n    ...r\n  };\n  if (null != d.rollbackOnFailureEnabled || i.editing.supportsRollbackOnFailure || (d.rollbackOnFailureEnabled = !0), d.rollbackOnFailureEnabled || \"original-and-current-features\" !== d.returnServiceEditsOption || (!1 === d.rollbackOnFailureEnabled && s.getLogger(\"esri.layers.graphics.editingSupport\").warn(`${e.type}-layer:invalid-parameter`, \"'original-and-current-features' is valid for 'returnServiceEditsOption' only when 'rollBackOnFailure' is true, but 'rollBackOnFailure' was set to false. 'rollBackOnFailure' has been overwritten and set to true.\"), d.rollbackOnFailureEnabled = !0), !i.editing.supportsReturnServiceEditsInSourceSpatialReference && d.returnServiceEditsInSourceSR) throw new a(`${e.type}-layer:invalid-parameter`, \"This layer does not support 'returnServiceEditsInSourceSR' parameter. See: 'capabilities.editing.supportsReturnServiceEditsInSourceSpatialReference'\");\n  if (d.returnServiceEditsInSourceSR && \"original-and-current-features\" !== d.returnServiceEditsOption) throw new a(`${e.type}-layer:invalid-parameter`, \"'returnServiceEditsInSourceSR' is valid only when 'returnServiceEditsOption' is set to 'original-and-current-features'\");\n  const u = G(t, i, `${e.type}-layer`),\n    p = r?.globalIdUsed || l,\n    c = e.fields.filter(e => \"big-integer\" === e.type || \"oid\" === e.type && (e.length || 0) >= 8);\n  if (p) {\n    const {\n      globalIdField: t\n    } = e;\n    if (null == t) throw new a(`${e.type}-layer:invalid-parameter`, \"Layer does not specify a global id field.\");\n    u.addFeatures.forEach(e => B(e, t));\n  }\n  u.addFeatures.forEach(t => O(t, e, p, c)), u.updateFeatures.forEach(t => k(t, e, p, c)), u.deleteFeatures.forEach(t => U(t, e, p, c)), u.addAttachments.forEach(t => L(t, e)), u.updateAttachments.forEach(t => L(t, e)), l && (await x(u, e));\n  return {\n    edits: await T(u),\n    options: d\n  };\n}\nfunction R(e, t, r, s) {\n  if (r) {\n    if (\"attributes\" in e && !e.attributes[t.globalIdField]) throw new a(`${t.type}-layer:invalid-parameter`, `Feature should have '${t.globalIdField}' when 'globalIdUsed' is true`);\n    if (!(\"attributes\" in e) && !e.globalId) throw new a(`${t.type}-layer:invalid-parameter`, \"`'globalId' of the feature should be passed when 'globalIdUsed' is true\");\n  }\n  if (s.length && \"attributes\" in e) for (const i of s) {\n    const r = e.attributes[i.name];\n    if (void 0 !== r && !f(i, r)) throw new a(`${t.type}-layer:invalid-parameter`, `Big-integer field '${i.name}' of the feature must be less than ${Number.MAX_SAFE_INTEGER}`, {\n      feature: e\n    });\n  }\n  if (\"geometry\" in e && null != e.geometry) {\n    if (e.geometry.hasZ && !1 === t.capabilities?.data.supportsZ) throw new a(`${t.type}-layer:z-unsupported`, \"Layer does not support z values while feature has z values.\");\n    if (e.geometry.hasM && !1 === t.capabilities?.data.supportsM) throw new a(`${t.type}-layer:m-unsupported`, \"Layer does not support m values while feature has m values.\");\n  }\n}\nfunction j(e, t) {\n  if (\"geometry\" in e && \"mesh\" === e.geometry?.type && null != t.infoFor3D && null != t.spatialReference) {\n    const {\n        geometry: r\n      } = e,\n      {\n        spatialReference: s,\n        vertexSpace: i\n      } = r,\n      n = t.spatialReference,\n      o = \"local\" === i.type,\n      l = d(n),\n      h = u(n, s),\n      m = h || p(n) && (p(s) || c(s));\n    if (!(o && l && m || !o && !l && h)) throw new a(`${t.type}-layer:mesh-unsupported`, `Uploading a mesh with a ${i.type} vertex space and a spatial reference wkid:${s.wkid} to a layer with a spatial reference wkid:${n.wkid} is not supported.`);\n  }\n}\nfunction O(e, t, a, r) {\n  R(e, t, a, r), j(e, t);\n}\nfunction U(e, t, a, r) {\n  R(e, t, a, r);\n}\nfunction k(e, t, r, s) {\n  R(e, t, r, s), j(e, t);\n  const i = b(t);\n  if (\"geometry\" in e && null != e.geometry && !i?.editing.supportsGeometryUpdate) throw new a(`${t.type}-layer:unsupported-operation`, \"Layer does not support geometry updates.\");\n}\nfunction L(e, t) {\n  const {\n    feature: r,\n    attachment: s\n  } = e;\n  if (!r || \"attributes\" in r && !r.attributes[t.globalIdField]) throw new a(`${t.type}-layer:invalid-parameter`, \"Attachment should have reference to a feature with 'globalId'\");\n  if (!(\"attributes\" in r) && !r.globalId) throw new a(`${t.type}-layer:invalid-parameter`, \"Attachment should have reference to 'globalId' of the parent feature\");\n  if (!s.globalId) throw new a(`${t.type}-layer:invalid-parameter`, \"Attachment should have 'globalId'\");\n  if (!s.data && !s.uploadId) throw new a(`${t.type}-layer:invalid-parameter`, \"Attachment should have 'data' or 'uploadId'\");\n  if (!(s.data instanceof File && !!s.data.name) && !s.name) throw new a(`${t.type}-layer:invalid-parameter`, \"'name' is required when attachment is specified as Base64 encoded string using 'data'\");\n  if (!t.capabilities?.editing.supportsUploadWithItemId && s.uploadId) throw new a(`${t.type}-layer:invalid-parameter`, \"This layer does not support 'uploadId' parameter. See: 'capabilities.editing.supportsUploadWithItemId'\");\n  if (\"string\" == typeof s.data) {\n    const e = n(s.data);\n    if (e && !e.isBase64) throw new a(`${t.type}-layer:invalid-parameter`, \"Attachment 'data' should be a Blob, File or Base64 encoded string\");\n  }\n}\nfunction B(e, t) {\n  const {\n    attributes: a\n  } = e;\n  null == a[t] && (a[t] = o());\n}\nasync function T(e) {\n  const t = e.addFeatures ?? [],\n    a = e.updateFeatures ?? [],\n    r = t.concat(a).map(e => e.geometry),\n    s = await l(r),\n    i = t.length,\n    n = a.length;\n  return s.slice(0, i).forEach((e, a) => t[a].geometry = e), s.slice(i, i + n).forEach((e, t) => a[t].geometry = e), e;\n}\nfunction D(e) {\n  return {\n    addFeatures: Array.from(e?.addFeatures ?? []),\n    updateFeatures: Array.from(e?.updateFeatures ?? []),\n    deleteFeatures: e && t.isCollection(e.deleteFeatures) ? e.deleteFeatures.toArray() : e.deleteFeatures || [],\n    addAttachments: e.addAttachments || [],\n    updateAttachments: e.updateAttachments || [],\n    deleteAttachments: e.deleteAttachments || []\n  };\n}\nfunction G(e, t, r) {\n  const s = D(e);\n  if (s.addFeatures?.length && !t.operations.supportsAdd) throw new a(`${r}:unsupported-operation`, \"Layer does not support adding features.\");\n  if (s.updateFeatures?.length && !t.operations.supportsUpdate) throw new a(`${r}:unsupported-operation`, \"Layer does not support updating features.\");\n  if (s.deleteFeatures?.length && !t.operations.supportsDelete) throw new a(`${r}:unsupported-operation`, \"Layer does not support deleting features.\");\n  return s.addFeatures = s.addFeatures.map(M), s.updateFeatures = s.updateFeatures.map(M), s.addAssetFeatures = [], s;\n}\nfunction V(e, t, r, s, i, n) {\n  if (!e || !s && !i) throw new a(`${n}:missing-parameters`, \"'addFeatures', 'updateFeatures', 'deleteFeatures', 'addAttachments', 'updateAttachments' or 'deleteAttachments' parameter is required\");\n  if (!t.editing.supportsGlobalId && r?.globalIdUsed) throw new a(`${n}:invalid-parameter`, \"This layer does not support 'globalIdUsed' parameter. See: 'capabilities.editing.supportsGlobalId'\");\n  if (!t.editing.supportsGlobalId && i) throw new a(`${n}:invalid-parameter`, \"'addAttachments', 'updateAttachments' and 'deleteAttachments' are applicable only if the layer supports global ids. See: 'capabilities.editing.supportsGlobalId'\");\n  if (!r?.globalIdUsed && i) throw new a(`${n}:invalid-parameter`, \"When 'addAttachments', 'updateAttachments' or 'deleteAttachments' is specified, globalIdUsed should be set to true\");\n}\nfunction M(t) {\n  const a = new e();\n  return t.attributes || (t.attributes = {}), a.geometry = t.geometry, a.attributes = t.attributes, a;\n}\nasync function x(e, t) {\n  const {\n    infoFor3D: r\n  } = t;\n  if (null == r) return;\n  if (!y(r)) throw new a(`${t.type}-layer:binary-gltf-asset-not-supported`, \"3DObjectFeatureLayer requires binary glTF (.glb) support for updating mesh geometry.\");\n  e.addAssetFeatures ??= [];\n  const {\n    addAssetFeatures: s\n  } = e;\n  for (const a of e.addFeatures ?? []) z(a) && s.push(a);\n  for (const a of e.updateFeatures ?? []) z(a) && s.push(a);\n}\nfunction z(e) {\n  return \"mesh\" === e?.geometry?.type;\n}\nfunction q(e, t, r, s) {\n  if (!w(t)) throw new a(`${e.type}-layer:no-editing-support`, \"Layer source does not support applyEdits capability\", {\n    layer: e\n  });\n  if (!t.uploadAssets) throw new a(`${e.type}-layer:no-asset-upload-support`, \"Layer source does not support uploadAssets capability\", {\n    layer: e\n  });\n  return t.uploadAssets(r, s);\n}\nexport { $ as applyEdits, V as checkEditingCapabilities, I as isFeatureIdentifierArrayWithGlobalId, A as isFeatureIdentifierArrayWithObjectId, v as isFeatureIdentifierWithGlobalId, F as isFeatureIdentifierWithObjectId, D as normalizeCollections, G as normalizeEdits, T as normalizeGeometries, M as shallowCloneFeature, q as uploadAssets };","map":{"version":3,"names":["e","t","a","clone","r","s","createResolver","i","dataComponents","n","generateBracedUUID","o","normalizeCentralMeridian","l","isGeographic","d","equals","u","isWGS84","p","isWebMercator","c","isEditBusLayer","h","emitApplyEditsEvent","m","isValidFieldValue","f","isGlbSupportedEditFormat","y","getEffectiveEditingEnabled","g","getEffectiveLayerCapabilities","b","w","applyEdits","F","objectId","A","every","v","globalId","I","$","arguments","length","undefined","gdbVersion","url","layerId","returnServiceEditsOption","promise","then","addedFeatures","updatedFeatures","deletedFeatures","addedAttachments","updatedAttachments","deletedAttachments","emit","result","results","edits","E","filter","error","map","addFeatureResults","updateFeatureResults","deleteFeatureResults","addAttachmentResults","updateAttachmentResults","deleteAttachmentResults","exceededTransferLimit","historicMoment","editMoment","Date","globalIdToObjectId","editedFeatureResults","editedFeatures","resolve","reject","load","type","layer","options","S","addFeatures","updateFeatures","deleteFeatures","addAttachments","updateAttachments","deleteAttachments","infoFor3D","V","data","isVersioned","editing","supportsRollbackOnFailure","rollbackOnFailureEnabled","getLogger","warn","supportsReturnServiceEditsInSourceSpatialReference","returnServiceEditsInSourceSR","G","globalIdUsed","fields","globalIdField","forEach","B","O","k","U","L","x","T","R","attributes","name","Number","MAX_SAFE_INTEGER","feature","geometry","hasZ","capabilities","supportsZ","hasM","supportsM","j","spatialReference","vertexSpace","wkid","supportsGeometryUpdate","attachment","uploadId","File","supportsUploadWithItemId","isBase64","concat","slice","D","Array","from","isCollection","toArray","operations","supportsAdd","supportsUpdate","supportsDelete","M","addAssetFeatures","supportsGlobalId","z","push","q","uploadAssets","checkEditingCapabilities","isFeatureIdentifierArrayWithGlobalId","isFeatureIdentifierArrayWithObjectId","isFeatureIdentifierWithGlobalId","isFeatureIdentifierWithObjectId","normalizeCollections","normalizeEdits","normalizeGeometries","shallowCloneFeature"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/layers/graphics/editingSupport.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../Graphic.js\";import t from\"../../core/Collection.js\";import a from\"../../core/Error.js\";import{clone as r}from\"../../core/lang.js\";import s from\"../../core/Logger.js\";import{createResolver as i}from\"../../core/promiseUtils.js\";import{dataComponents as n}from\"../../core/urlUtils.js\";import{generateBracedUUID as o}from\"../../core/uuid.js\";import{normalizeCentralMeridian as l}from\"../../geometry/support/normalizeUtils.js\";import{isGeographic as d,equals as u,isWGS84 as p,isWebMercator as c}from\"../../geometry/support/spatialReferenceUtils.js\";import{isEditBusLayer as h,emitApplyEditsEvent as m}from\"../mixins/EditBusLayer.js\";import{isValidFieldValue as f}from\"../support/fieldUtils.js\";import{isGlbSupportedEditFormat as y}from\"../support/infoFor3D.js\";import{getEffectiveEditingEnabled as g,getEffectiveLayerCapabilities as b}from\"../support/layerUtils.js\";function w(e){return null!=e?.applyEdits}function F(e){return\"object\"==typeof e&&null!=e&&\"objectId\"in e&&!!e.objectId}function A(e){return e.every(F)}function v(e){return\"object\"==typeof e&&null!=e&&\"globalId\"in e&&!!e.globalId}function I(e){return e.every(v)}async function $(e,t,a,s={}){let n;const o=\"gdbVersion\"in e?e.gdbVersion:null,l=s.gdbVersion??o;if(h(e)&&e.url)n=m(e.url,e.layerId,l,\"original-and-current-features\"===s.returnServiceEditsOption);else{n=i(),n.promise.then((t=>{(t.addedFeatures.length||t.updatedFeatures.length||t.deletedFeatures.length||t.addedAttachments.length||t.updatedAttachments.length||t.deletedAttachments.length)&&e.emit(\"edits\",t)}));const t={result:n.promise};e.emit(\"apply-edits\",t)}try{const{results:i,edits:o}=await E(e,t,a,s),l=e=>e.filter((e=>!e.error)).map(r),d={edits:o,addedFeatures:l(i.addFeatureResults),updatedFeatures:l(i.updateFeatureResults),deletedFeatures:l(i.deleteFeatureResults),addedAttachments:l(i.addAttachmentResults),updatedAttachments:l(i.updateAttachmentResults),deletedAttachments:l(i.deleteAttachmentResults),exceededTransferLimit:!1,historicMoment:i.editMoment?new Date(i.editMoment):null,globalIdToObjectId:s.globalIdToObjectId};return i.editedFeatureResults?.length&&(d.editedFeatures=i.editedFeatureResults),n.resolve(d),i}catch(d){throw n.reject(d),d}}async function E(e,t,r,s){if(await e.load(),!w(t))throw new a(`${e.type}-layer:no-editing-support`,\"Layer source does not support applyEdits capability\",{layer:e});if(!g(e))throw new a(`${e.type}-layer:editing-disabled`,\"Editing is disabled for layer\",{layer:e});const{edits:i,options:n}=await S(e,r,s);return i.addFeatures?.length||i.updateFeatures?.length||i.deleteFeatures?.length||i.addAttachments?.length||i.updateAttachments?.length||i.deleteAttachments?.length?{edits:i,results:await t.applyEdits(i,n)}:{edits:i,results:{addFeatureResults:[],updateFeatureResults:[],deleteFeatureResults:[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}}async function S(e,t,r){const i=b(e),n=t&&(t.addFeatures||t.updateFeatures||t.deleteFeatures),o=t&&(t.addAttachments||t.updateAttachments||t.deleteAttachments),l=null!=e.infoFor3D;if(V(t,i,r,!!n,!!o,`${e.type}-layer`),!i.data.isVersioned&&r?.gdbVersion)throw new a(`${e.type}-layer:invalid-parameter`,\"'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isVersioned'\");if(!i.editing.supportsRollbackOnFailure&&r?.rollbackOnFailureEnabled)throw new a(`${e.type}-layer:invalid-parameter`,\"This layer does not support 'rollbackOnFailureEnabled' parameter. See: 'capabilities.editing.supportsRollbackOnFailure'\");const d={...r};if(null!=d.rollbackOnFailureEnabled||i.editing.supportsRollbackOnFailure||(d.rollbackOnFailureEnabled=!0),d.rollbackOnFailureEnabled||\"original-and-current-features\"!==d.returnServiceEditsOption||(!1===d.rollbackOnFailureEnabled&&s.getLogger(\"esri.layers.graphics.editingSupport\").warn(`${e.type}-layer:invalid-parameter`,\"'original-and-current-features' is valid for 'returnServiceEditsOption' only when 'rollBackOnFailure' is true, but 'rollBackOnFailure' was set to false. 'rollBackOnFailure' has been overwritten and set to true.\"),d.rollbackOnFailureEnabled=!0),!i.editing.supportsReturnServiceEditsInSourceSpatialReference&&d.returnServiceEditsInSourceSR)throw new a(`${e.type}-layer:invalid-parameter`,\"This layer does not support 'returnServiceEditsInSourceSR' parameter. See: 'capabilities.editing.supportsReturnServiceEditsInSourceSpatialReference'\");if(d.returnServiceEditsInSourceSR&&\"original-and-current-features\"!==d.returnServiceEditsOption)throw new a(`${e.type}-layer:invalid-parameter`,\"'returnServiceEditsInSourceSR' is valid only when 'returnServiceEditsOption' is set to 'original-and-current-features'\");const u=G(t,i,`${e.type}-layer`),p=r?.globalIdUsed||l,c=e.fields.filter((e=>\"big-integer\"===e.type||\"oid\"===e.type&&(e.length||0)>=8));if(p){const{globalIdField:t}=e;if(null==t)throw new a(`${e.type}-layer:invalid-parameter`,\"Layer does not specify a global id field.\");u.addFeatures.forEach((e=>B(e,t)))}u.addFeatures.forEach((t=>O(t,e,p,c))),u.updateFeatures.forEach((t=>k(t,e,p,c))),u.deleteFeatures.forEach((t=>U(t,e,p,c))),u.addAttachments.forEach((t=>L(t,e))),u.updateAttachments.forEach((t=>L(t,e))),l&&await x(u,e);return{edits:await T(u),options:d}}function R(e,t,r,s){if(r){if(\"attributes\"in e&&!e.attributes[t.globalIdField])throw new a(`${t.type}-layer:invalid-parameter`,`Feature should have '${t.globalIdField}' when 'globalIdUsed' is true`);if(!(\"attributes\"in e)&&!e.globalId)throw new a(`${t.type}-layer:invalid-parameter`,\"`'globalId' of the feature should be passed when 'globalIdUsed' is true\")}if(s.length&&\"attributes\"in e)for(const i of s){const r=e.attributes[i.name];if(void 0!==r&&!f(i,r))throw new a(`${t.type}-layer:invalid-parameter`,`Big-integer field '${i.name}' of the feature must be less than ${Number.MAX_SAFE_INTEGER}`,{feature:e})}if(\"geometry\"in e&&null!=e.geometry){if(e.geometry.hasZ&&!1===t.capabilities?.data.supportsZ)throw new a(`${t.type}-layer:z-unsupported`,\"Layer does not support z values while feature has z values.\");if(e.geometry.hasM&&!1===t.capabilities?.data.supportsM)throw new a(`${t.type}-layer:m-unsupported`,\"Layer does not support m values while feature has m values.\")}}function j(e,t){if(\"geometry\"in e&&\"mesh\"===e.geometry?.type&&null!=t.infoFor3D&&null!=t.spatialReference){const{geometry:r}=e,{spatialReference:s,vertexSpace:i}=r,n=t.spatialReference,o=\"local\"===i.type,l=d(n),h=u(n,s),m=h||p(n)&&(p(s)||c(s));if(!(o&&l&&m||!o&&!l&&h))throw new a(`${t.type}-layer:mesh-unsupported`,`Uploading a mesh with a ${i.type} vertex space and a spatial reference wkid:${s.wkid} to a layer with a spatial reference wkid:${n.wkid} is not supported.`)}}function O(e,t,a,r){R(e,t,a,r),j(e,t)}function U(e,t,a,r){R(e,t,a,r)}function k(e,t,r,s){R(e,t,r,s),j(e,t);const i=b(t);if(\"geometry\"in e&&null!=e.geometry&&!i?.editing.supportsGeometryUpdate)throw new a(`${t.type}-layer:unsupported-operation`,\"Layer does not support geometry updates.\")}function L(e,t){const{feature:r,attachment:s}=e;if(!r||\"attributes\"in r&&!r.attributes[t.globalIdField])throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have reference to a feature with 'globalId'\");if(!(\"attributes\"in r)&&!r.globalId)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have reference to 'globalId' of the parent feature\");if(!s.globalId)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have 'globalId'\");if(!s.data&&!s.uploadId)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have 'data' or 'uploadId'\");if(!(s.data instanceof File&&!!s.data.name)&&!s.name)throw new a(`${t.type}-layer:invalid-parameter`,\"'name' is required when attachment is specified as Base64 encoded string using 'data'\");if(!t.capabilities?.editing.supportsUploadWithItemId&&s.uploadId)throw new a(`${t.type}-layer:invalid-parameter`,\"This layer does not support 'uploadId' parameter. See: 'capabilities.editing.supportsUploadWithItemId'\");if(\"string\"==typeof s.data){const e=n(s.data);if(e&&!e.isBase64)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment 'data' should be a Blob, File or Base64 encoded string\")}}function B(e,t){const{attributes:a}=e;null==a[t]&&(a[t]=o())}async function T(e){const t=e.addFeatures??[],a=e.updateFeatures??[],r=t.concat(a).map((e=>e.geometry)),s=await l(r),i=t.length,n=a.length;return s.slice(0,i).forEach(((e,a)=>t[a].geometry=e)),s.slice(i,i+n).forEach(((e,t)=>a[t].geometry=e)),e}function D(e){return{addFeatures:Array.from(e?.addFeatures??[]),updateFeatures:Array.from(e?.updateFeatures??[]),deleteFeatures:e&&t.isCollection(e.deleteFeatures)?e.deleteFeatures.toArray():e.deleteFeatures||[],addAttachments:e.addAttachments||[],updateAttachments:e.updateAttachments||[],deleteAttachments:e.deleteAttachments||[]}}function G(e,t,r){const s=D(e);if(s.addFeatures?.length&&!t.operations.supportsAdd)throw new a(`${r}:unsupported-operation`,\"Layer does not support adding features.\");if(s.updateFeatures?.length&&!t.operations.supportsUpdate)throw new a(`${r}:unsupported-operation`,\"Layer does not support updating features.\");if(s.deleteFeatures?.length&&!t.operations.supportsDelete)throw new a(`${r}:unsupported-operation`,\"Layer does not support deleting features.\");return s.addFeatures=s.addFeatures.map(M),s.updateFeatures=s.updateFeatures.map(M),s.addAssetFeatures=[],s}function V(e,t,r,s,i,n){if(!e||!s&&!i)throw new a(`${n}:missing-parameters`,\"'addFeatures', 'updateFeatures', 'deleteFeatures', 'addAttachments', 'updateAttachments' or 'deleteAttachments' parameter is required\");if(!t.editing.supportsGlobalId&&r?.globalIdUsed)throw new a(`${n}:invalid-parameter`,\"This layer does not support 'globalIdUsed' parameter. See: 'capabilities.editing.supportsGlobalId'\");if(!t.editing.supportsGlobalId&&i)throw new a(`${n}:invalid-parameter`,\"'addAttachments', 'updateAttachments' and 'deleteAttachments' are applicable only if the layer supports global ids. See: 'capabilities.editing.supportsGlobalId'\");if(!r?.globalIdUsed&&i)throw new a(`${n}:invalid-parameter`,\"When 'addAttachments', 'updateAttachments' or 'deleteAttachments' is specified, globalIdUsed should be set to true\")}function M(t){const a=new e;return t.attributes||(t.attributes={}),a.geometry=t.geometry,a.attributes=t.attributes,a}async function x(e,t){const{infoFor3D:r}=t;if(null==r)return;if(!y(r))throw new a(`${t.type}-layer:binary-gltf-asset-not-supported`,\"3DObjectFeatureLayer requires binary glTF (.glb) support for updating mesh geometry.\");e.addAssetFeatures??=[];const{addAssetFeatures:s}=e;for(const a of e.addFeatures??[])z(a)&&s.push(a);for(const a of e.updateFeatures??[])z(a)&&s.push(a)}function z(e){return\"mesh\"===e?.geometry?.type}function q(e,t,r,s){if(!w(t))throw new a(`${e.type}-layer:no-editing-support`,\"Layer source does not support applyEdits capability\",{layer:e});if(!t.uploadAssets)throw new a(`${e.type}-layer:no-asset-upload-support`,\"Layer source does not support uploadAssets capability\",{layer:e});return t.uploadAssets(r,s)}export{$ as applyEdits,V as checkEditingCapabilities,I as isFeatureIdentifierArrayWithGlobalId,A as isFeatureIdentifierArrayWithObjectId,v as isFeatureIdentifierWithGlobalId,F as isFeatureIdentifierWithObjectId,D as normalizeCollections,G as normalizeEdits,T as normalizeGeometries,M as shallowCloneFeature,q as uploadAssets};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,OAAOA,CAAC,MAAK,kBAAkB;AAAC,OAAOC,CAAC,MAAK,0BAA0B;AAAC,OAAOC,CAAC,MAAK,qBAAqB;AAAC,SAAOC,KAAK,IAAIC,CAAC,QAAK,oBAAoB;AAAC,OAAOC,CAAC,MAAK,sBAAsB;AAAC,SAAOC,cAAc,IAAIC,CAAC,QAAK,4BAA4B;AAAC,SAAOC,cAAc,IAAIC,CAAC,QAAK,wBAAwB;AAAC,SAAOC,kBAAkB,IAAIC,CAAC,QAAK,oBAAoB;AAAC,SAAOC,wBAAwB,IAAIC,CAAC,QAAK,0CAA0C;AAAC,SAAOC,YAAY,IAAIC,CAAC,EAACC,MAAM,IAAIC,CAAC,EAACC,OAAO,IAAIC,CAAC,EAACC,aAAa,IAAIC,CAAC,QAAK,iDAAiD;AAAC,SAAOC,cAAc,IAAIC,CAAC,EAACC,mBAAmB,IAAIC,CAAC,QAAK,2BAA2B;AAAC,SAAOC,iBAAiB,IAAIC,CAAC,QAAK,0BAA0B;AAAC,SAAOC,wBAAwB,IAAIC,CAAC,QAAK,yBAAyB;AAAC,SAAOC,0BAA0B,IAAIC,CAAC,EAACC,6BAA6B,IAAIC,CAAC,QAAK,0BAA0B;AAAC,SAASC,CAACA,CAAClC,CAAC,EAAC;EAAC,OAAO,IAAI,IAAEA,CAAC,EAAEmC,UAAU;AAAA;AAAC,SAASC,CAACA,CAACpC,CAAC,EAAC;EAAC,OAAM,QAAQ,IAAE,OAAOA,CAAC,IAAE,IAAI,IAAEA,CAAC,IAAE,UAAU,IAAGA,CAAC,IAAE,CAAC,CAACA,CAAC,CAACqC,QAAQ;AAAA;AAAC,SAASC,CAACA,CAACtC,CAAC,EAAC;EAAC,OAAOA,CAAC,CAACuC,KAAK,CAACH,CAAC,CAAC;AAAA;AAAC,SAASI,CAACA,CAACxC,CAAC,EAAC;EAAC,OAAM,QAAQ,IAAE,OAAOA,CAAC,IAAE,IAAI,IAAEA,CAAC,IAAE,UAAU,IAAGA,CAAC,IAAE,CAAC,CAACA,CAAC,CAACyC,QAAQ;AAAA;AAAC,SAASC,CAACA,CAAC1C,CAAC,EAAC;EAAC,OAAOA,CAAC,CAACuC,KAAK,CAACC,CAAC,CAAC;AAAA;AAAC,eAAeG,CAACA,CAAC3C,CAAC,EAACC,CAAC,EAACC,CAAC,EAAM;EAAA,IAALG,CAAC,GAAAuC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,CAAC,CAAC;EAAE,IAAInC,CAAC;EAAC,MAAME,CAAC,GAAC,YAAY,IAAGX,CAAC,GAACA,CAAC,CAAC+C,UAAU,GAAC,IAAI;IAAClC,CAAC,GAACR,CAAC,CAAC0C,UAAU,IAAEpC,CAAC;EAAC,IAAGY,CAAC,CAACvB,CAAC,CAAC,IAAEA,CAAC,CAACgD,GAAG,EAACvC,CAAC,GAACgB,CAAC,CAACzB,CAAC,CAACgD,GAAG,EAAChD,CAAC,CAACiD,OAAO,EAACpC,CAAC,EAAC,+BAA+B,KAAGR,CAAC,CAAC6C,wBAAwB,CAAC,CAAC,KAAI;IAACzC,CAAC,GAACF,CAAC,CAAC,CAAC,EAACE,CAAC,CAAC0C,OAAO,CAACC,IAAI,CAAEnD,CAAC,IAAE;MAAC,CAACA,CAAC,CAACoD,aAAa,CAACR,MAAM,IAAE5C,CAAC,CAACqD,eAAe,CAACT,MAAM,IAAE5C,CAAC,CAACsD,eAAe,CAACV,MAAM,IAAE5C,CAAC,CAACuD,gBAAgB,CAACX,MAAM,IAAE5C,CAAC,CAACwD,kBAAkB,CAACZ,MAAM,IAAE5C,CAAC,CAACyD,kBAAkB,CAACb,MAAM,KAAG7C,CAAC,CAAC2D,IAAI,CAAC,OAAO,EAAC1D,CAAC,CAAC;IAAA,CAAE,CAAC;IAAC,MAAMA,CAAC,GAAC;MAAC2D,MAAM,EAACnD,CAAC,CAAC0C;IAAO,CAAC;IAACnD,CAAC,CAAC2D,IAAI,CAAC,aAAa,EAAC1D,CAAC,CAAC;EAAA;EAAC,IAAG;IAAC,MAAK;QAAC4D,OAAO,EAACtD,CAAC;QAACuD,KAAK,EAACnD;MAAC,CAAC,GAAC,MAAMoD,CAAC,CAAC/D,CAAC,EAACC,CAAC,EAACC,CAAC,EAACG,CAAC,CAAC;MAACQ,CAAC,GAACb,CAAC,IAAEA,CAAC,CAACgE,MAAM,CAAEhE,CAAC,IAAE,CAACA,CAAC,CAACiE,KAAM,CAAC,CAACC,GAAG,CAAC9D,CAAC,CAAC;MAACW,CAAC,GAAC;QAAC+C,KAAK,EAACnD,CAAC;QAAC0C,aAAa,EAACxC,CAAC,CAACN,CAAC,CAAC4D,iBAAiB,CAAC;QAACb,eAAe,EAACzC,CAAC,CAACN,CAAC,CAAC6D,oBAAoB,CAAC;QAACb,eAAe,EAAC1C,CAAC,CAACN,CAAC,CAAC8D,oBAAoB,CAAC;QAACb,gBAAgB,EAAC3C,CAAC,CAACN,CAAC,CAAC+D,oBAAoB,CAAC;QAACb,kBAAkB,EAAC5C,CAAC,CAACN,CAAC,CAACgE,uBAAuB,CAAC;QAACb,kBAAkB,EAAC7C,CAAC,CAACN,CAAC,CAACiE,uBAAuB,CAAC;QAACC,qBAAqB,EAAC,CAAC,CAAC;QAACC,cAAc,EAACnE,CAAC,CAACoE,UAAU,GAAC,IAAIC,IAAI,CAACrE,CAAC,CAACoE,UAAU,CAAC,GAAC,IAAI;QAACE,kBAAkB,EAACxE,CAAC,CAACwE;MAAkB,CAAC;IAAC,OAAOtE,CAAC,CAACuE,oBAAoB,EAAEjC,MAAM,KAAG9B,CAAC,CAACgE,cAAc,GAACxE,CAAC,CAACuE,oBAAoB,CAAC,EAACrE,CAAC,CAACuE,OAAO,CAACjE,CAAC,CAAC,EAACR,CAAC;EAAA,CAAC,QAAMQ,CAAC,EAAC;IAAC,MAAMN,CAAC,CAACwE,MAAM,CAAClE,CAAC,CAAC,EAACA,CAAC;EAAA;AAAC;AAAC,eAAegD,CAACA,CAAC/D,CAAC,EAACC,CAAC,EAACG,CAAC,EAACC,CAAC,EAAC;EAAC,IAAG,MAAML,CAAC,CAACkF,IAAI,CAAC,CAAC,EAAC,CAAChD,CAAC,CAACjC,CAAC,CAAC,EAAC,MAAM,IAAIC,CAAC,CAAC,GAAGF,CAAC,CAACmF,IAAI,2BAA2B,EAAC,qDAAqD,EAAC;IAACC,KAAK,EAACpF;EAAC,CAAC,CAAC;EAAC,IAAG,CAAC+B,CAAC,CAAC/B,CAAC,CAAC,EAAC,MAAM,IAAIE,CAAC,CAAC,GAAGF,CAAC,CAACmF,IAAI,yBAAyB,EAAC,+BAA+B,EAAC;IAACC,KAAK,EAACpF;EAAC,CAAC,CAAC;EAAC,MAAK;IAAC8D,KAAK,EAACvD,CAAC;IAAC8E,OAAO,EAAC5E;EAAC,CAAC,GAAC,MAAM6E,CAAC,CAACtF,CAAC,EAACI,CAAC,EAACC,CAAC,CAAC;EAAC,OAAOE,CAAC,CAACgF,WAAW,EAAE1C,MAAM,IAAEtC,CAAC,CAACiF,cAAc,EAAE3C,MAAM,IAAEtC,CAAC,CAACkF,cAAc,EAAE5C,MAAM,IAAEtC,CAAC,CAACmF,cAAc,EAAE7C,MAAM,IAAEtC,CAAC,CAACoF,iBAAiB,EAAE9C,MAAM,IAAEtC,CAAC,CAACqF,iBAAiB,EAAE/C,MAAM,GAAC;IAACiB,KAAK,EAACvD,CAAC;IAACsD,OAAO,EAAC,MAAM5D,CAAC,CAACkC,UAAU,CAAC5B,CAAC,EAACE,CAAC;EAAC,CAAC,GAAC;IAACqD,KAAK,EAACvD,CAAC;IAACsD,OAAO,EAAC;MAACM,iBAAiB,EAAC,EAAE;MAACC,oBAAoB,EAAC,EAAE;MAACC,oBAAoB,EAAC,EAAE;MAACC,oBAAoB,EAAC,EAAE;MAACC,uBAAuB,EAAC,EAAE;MAACC,uBAAuB,EAAC;IAAE;EAAC,CAAC;AAAA;AAAC,eAAec,CAACA,CAACtF,CAAC,EAACC,CAAC,EAACG,CAAC,EAAC;EAAC,MAAMG,CAAC,GAAC0B,CAAC,CAACjC,CAAC,CAAC;IAACS,CAAC,GAACR,CAAC,KAAGA,CAAC,CAACsF,WAAW,IAAEtF,CAAC,CAACuF,cAAc,IAAEvF,CAAC,CAACwF,cAAc,CAAC;IAAC9E,CAAC,GAACV,CAAC,KAAGA,CAAC,CAACyF,cAAc,IAAEzF,CAAC,CAAC0F,iBAAiB,IAAE1F,CAAC,CAAC2F,iBAAiB,CAAC;IAAC/E,CAAC,GAAC,IAAI,IAAEb,CAAC,CAAC6F,SAAS;EAAC,IAAGC,CAAC,CAAC7F,CAAC,EAACM,CAAC,EAACH,CAAC,EAAC,CAAC,CAACK,CAAC,EAAC,CAAC,CAACE,CAAC,EAAC,GAAGX,CAAC,CAACmF,IAAI,QAAQ,CAAC,EAAC,CAAC5E,CAAC,CAACwF,IAAI,CAACC,WAAW,IAAE5F,CAAC,EAAE2C,UAAU,EAAC,MAAM,IAAI7C,CAAC,CAAC,GAAGF,CAAC,CAACmF,IAAI,0BAA0B,EAAC,4GAA4G,CAAC;EAAC,IAAG,CAAC5E,CAAC,CAAC0F,OAAO,CAACC,yBAAyB,IAAE9F,CAAC,EAAE+F,wBAAwB,EAAC,MAAM,IAAIjG,CAAC,CAAC,GAAGF,CAAC,CAACmF,IAAI,0BAA0B,EAAC,yHAAyH,CAAC;EAAC,MAAMpE,CAAC,GAAC;IAAC,GAAGX;EAAC,CAAC;EAAC,IAAG,IAAI,IAAEW,CAAC,CAACoF,wBAAwB,IAAE5F,CAAC,CAAC0F,OAAO,CAACC,yBAAyB,KAAGnF,CAAC,CAACoF,wBAAwB,GAAC,CAAC,CAAC,CAAC,EAACpF,CAAC,CAACoF,wBAAwB,IAAE,+BAA+B,KAAGpF,CAAC,CAACmC,wBAAwB,KAAG,CAAC,CAAC,KAAGnC,CAAC,CAACoF,wBAAwB,IAAE9F,CAAC,CAAC+F,SAAS,CAAC,qCAAqC,CAAC,CAACC,IAAI,CAAC,GAAGrG,CAAC,CAACmF,IAAI,0BAA0B,EAAC,oNAAoN,CAAC,EAACpE,CAAC,CAACoF,wBAAwB,GAAC,CAAC,CAAC,CAAC,EAAC,CAAC5F,CAAC,CAAC0F,OAAO,CAACK,kDAAkD,IAAEvF,CAAC,CAACwF,4BAA4B,EAAC,MAAM,IAAIrG,CAAC,CAAC,GAAGF,CAAC,CAACmF,IAAI,0BAA0B,EAAC,sJAAsJ,CAAC;EAAC,IAAGpE,CAAC,CAACwF,4BAA4B,IAAE,+BAA+B,KAAGxF,CAAC,CAACmC,wBAAwB,EAAC,MAAM,IAAIhD,CAAC,CAAC,GAAGF,CAAC,CAACmF,IAAI,0BAA0B,EAAC,wHAAwH,CAAC;EAAC,MAAMlE,CAAC,GAACuF,CAAC,CAACvG,CAAC,EAACM,CAAC,EAAC,GAAGP,CAAC,CAACmF,IAAI,QAAQ,CAAC;IAAChE,CAAC,GAACf,CAAC,EAAEqG,YAAY,IAAE5F,CAAC;IAACQ,CAAC,GAACrB,CAAC,CAAC0G,MAAM,CAAC1C,MAAM,CAAEhE,CAAC,IAAE,aAAa,KAAGA,CAAC,CAACmF,IAAI,IAAE,KAAK,KAAGnF,CAAC,CAACmF,IAAI,IAAE,CAACnF,CAAC,CAAC6C,MAAM,IAAE,CAAC,KAAG,CAAE,CAAC;EAAC,IAAG1B,CAAC,EAAC;IAAC,MAAK;MAACwF,aAAa,EAAC1G;IAAC,CAAC,GAACD,CAAC;IAAC,IAAG,IAAI,IAAEC,CAAC,EAAC,MAAM,IAAIC,CAAC,CAAC,GAAGF,CAAC,CAACmF,IAAI,0BAA0B,EAAC,2CAA2C,CAAC;IAAClE,CAAC,CAACsE,WAAW,CAACqB,OAAO,CAAE5G,CAAC,IAAE6G,CAAC,CAAC7G,CAAC,EAACC,CAAC,CAAE,CAAC;EAAA;EAACgB,CAAC,CAACsE,WAAW,CAACqB,OAAO,CAAE3G,CAAC,IAAE6G,CAAC,CAAC7G,CAAC,EAACD,CAAC,EAACmB,CAAC,EAACE,CAAC,CAAE,CAAC,EAACJ,CAAC,CAACuE,cAAc,CAACoB,OAAO,CAAE3G,CAAC,IAAE8G,CAAC,CAAC9G,CAAC,EAACD,CAAC,EAACmB,CAAC,EAACE,CAAC,CAAE,CAAC,EAACJ,CAAC,CAACwE,cAAc,CAACmB,OAAO,CAAE3G,CAAC,IAAE+G,CAAC,CAAC/G,CAAC,EAACD,CAAC,EAACmB,CAAC,EAACE,CAAC,CAAE,CAAC,EAACJ,CAAC,CAACyE,cAAc,CAACkB,OAAO,CAAE3G,CAAC,IAAEgH,CAAC,CAAChH,CAAC,EAACD,CAAC,CAAE,CAAC,EAACiB,CAAC,CAAC0E,iBAAiB,CAACiB,OAAO,CAAE3G,CAAC,IAAEgH,CAAC,CAAChH,CAAC,EAACD,CAAC,CAAE,CAAC,EAACa,CAAC,KAAE,MAAMqG,CAAC,CAACjG,CAAC,EAACjB,CAAC,CAAC;EAAC,OAAM;IAAC8D,KAAK,EAAC,MAAMqD,CAAC,CAAClG,CAAC,CAAC;IAACoE,OAAO,EAACtE;EAAC,CAAC;AAAA;AAAC,SAASqG,CAACA,CAACpH,CAAC,EAACC,CAAC,EAACG,CAAC,EAACC,CAAC,EAAC;EAAC,IAAGD,CAAC,EAAC;IAAC,IAAG,YAAY,IAAGJ,CAAC,IAAE,CAACA,CAAC,CAACqH,UAAU,CAACpH,CAAC,CAAC0G,aAAa,CAAC,EAAC,MAAM,IAAIzG,CAAC,CAAC,GAAGD,CAAC,CAACkF,IAAI,0BAA0B,EAAC,wBAAwBlF,CAAC,CAAC0G,aAAa,+BAA+B,CAAC;IAAC,IAAG,EAAE,YAAY,IAAG3G,CAAC,CAAC,IAAE,CAACA,CAAC,CAACyC,QAAQ,EAAC,MAAM,IAAIvC,CAAC,CAAC,GAAGD,CAAC,CAACkF,IAAI,0BAA0B,EAAC,yEAAyE,CAAC;EAAA;EAAC,IAAG9E,CAAC,CAACwC,MAAM,IAAE,YAAY,IAAG7C,CAAC,EAAC,KAAI,MAAMO,CAAC,IAAIF,CAAC,EAAC;IAAC,MAAMD,CAAC,GAACJ,CAAC,CAACqH,UAAU,CAAC9G,CAAC,CAAC+G,IAAI,CAAC;IAAC,IAAG,KAAK,CAAC,KAAGlH,CAAC,IAAE,CAACuB,CAAC,CAACpB,CAAC,EAACH,CAAC,CAAC,EAAC,MAAM,IAAIF,CAAC,CAAC,GAAGD,CAAC,CAACkF,IAAI,0BAA0B,EAAC,sBAAsB5E,CAAC,CAAC+G,IAAI,sCAAsCC,MAAM,CAACC,gBAAgB,EAAE,EAAC;MAACC,OAAO,EAACzH;IAAC,CAAC,CAAC;EAAA;EAAC,IAAG,UAAU,IAAGA,CAAC,IAAE,IAAI,IAAEA,CAAC,CAAC0H,QAAQ,EAAC;IAAC,IAAG1H,CAAC,CAAC0H,QAAQ,CAACC,IAAI,IAAE,CAAC,CAAC,KAAG1H,CAAC,CAAC2H,YAAY,EAAE7B,IAAI,CAAC8B,SAAS,EAAC,MAAM,IAAI3H,CAAC,CAAC,GAAGD,CAAC,CAACkF,IAAI,sBAAsB,EAAC,6DAA6D,CAAC;IAAC,IAAGnF,CAAC,CAAC0H,QAAQ,CAACI,IAAI,IAAE,CAAC,CAAC,KAAG7H,CAAC,CAAC2H,YAAY,EAAE7B,IAAI,CAACgC,SAAS,EAAC,MAAM,IAAI7H,CAAC,CAAC,GAAGD,CAAC,CAACkF,IAAI,sBAAsB,EAAC,6DAA6D,CAAC;EAAA;AAAC;AAAC,SAAS6C,CAACA,CAAChI,CAAC,EAACC,CAAC,EAAC;EAAC,IAAG,UAAU,IAAGD,CAAC,IAAE,MAAM,KAAGA,CAAC,CAAC0H,QAAQ,EAAEvC,IAAI,IAAE,IAAI,IAAElF,CAAC,CAAC4F,SAAS,IAAE,IAAI,IAAE5F,CAAC,CAACgI,gBAAgB,EAAC;IAAC,MAAK;QAACP,QAAQ,EAACtH;MAAC,CAAC,GAACJ,CAAC;MAAC;QAACiI,gBAAgB,EAAC5H,CAAC;QAAC6H,WAAW,EAAC3H;MAAC,CAAC,GAACH,CAAC;MAACK,CAAC,GAACR,CAAC,CAACgI,gBAAgB;MAACtH,CAAC,GAAC,OAAO,KAAGJ,CAAC,CAAC4E,IAAI;MAACtE,CAAC,GAACE,CAAC,CAACN,CAAC,CAAC;MAACc,CAAC,GAACN,CAAC,CAACR,CAAC,EAACJ,CAAC,CAAC;MAACoB,CAAC,GAACF,CAAC,IAAEJ,CAAC,CAACV,CAAC,CAAC,KAAGU,CAAC,CAACd,CAAC,CAAC,IAAEgB,CAAC,CAAChB,CAAC,CAAC,CAAC;IAAC,IAAG,EAAEM,CAAC,IAAEE,CAAC,IAAEY,CAAC,IAAE,CAACd,CAAC,IAAE,CAACE,CAAC,IAAEU,CAAC,CAAC,EAAC,MAAM,IAAIrB,CAAC,CAAC,GAAGD,CAAC,CAACkF,IAAI,yBAAyB,EAAC,2BAA2B5E,CAAC,CAAC4E,IAAI,8CAA8C9E,CAAC,CAAC8H,IAAI,6CAA6C1H,CAAC,CAAC0H,IAAI,oBAAoB,CAAC;EAAA;AAAC;AAAC,SAASrB,CAACA,CAAC9G,CAAC,EAACC,CAAC,EAACC,CAAC,EAACE,CAAC,EAAC;EAACgH,CAAC,CAACpH,CAAC,EAACC,CAAC,EAACC,CAAC,EAACE,CAAC,CAAC,EAAC4H,CAAC,CAAChI,CAAC,EAACC,CAAC,CAAC;AAAA;AAAC,SAAS+G,CAACA,CAAChH,CAAC,EAACC,CAAC,EAACC,CAAC,EAACE,CAAC,EAAC;EAACgH,CAAC,CAACpH,CAAC,EAACC,CAAC,EAACC,CAAC,EAACE,CAAC,CAAC;AAAA;AAAC,SAAS2G,CAACA,CAAC/G,CAAC,EAACC,CAAC,EAACG,CAAC,EAACC,CAAC,EAAC;EAAC+G,CAAC,CAACpH,CAAC,EAACC,CAAC,EAACG,CAAC,EAACC,CAAC,CAAC,EAAC2H,CAAC,CAAChI,CAAC,EAACC,CAAC,CAAC;EAAC,MAAMM,CAAC,GAAC0B,CAAC,CAAChC,CAAC,CAAC;EAAC,IAAG,UAAU,IAAGD,CAAC,IAAE,IAAI,IAAEA,CAAC,CAAC0H,QAAQ,IAAE,CAACnH,CAAC,EAAE0F,OAAO,CAACmC,sBAAsB,EAAC,MAAM,IAAIlI,CAAC,CAAC,GAAGD,CAAC,CAACkF,IAAI,8BAA8B,EAAC,0CAA0C,CAAC;AAAA;AAAC,SAAS8B,CAACA,CAACjH,CAAC,EAACC,CAAC,EAAC;EAAC,MAAK;IAACwH,OAAO,EAACrH,CAAC;IAACiI,UAAU,EAAChI;EAAC,CAAC,GAACL,CAAC;EAAC,IAAG,CAACI,CAAC,IAAE,YAAY,IAAGA,CAAC,IAAE,CAACA,CAAC,CAACiH,UAAU,CAACpH,CAAC,CAAC0G,aAAa,CAAC,EAAC,MAAM,IAAIzG,CAAC,CAAC,GAAGD,CAAC,CAACkF,IAAI,0BAA0B,EAAC,+DAA+D,CAAC;EAAC,IAAG,EAAE,YAAY,IAAG/E,CAAC,CAAC,IAAE,CAACA,CAAC,CAACqC,QAAQ,EAAC,MAAM,IAAIvC,CAAC,CAAC,GAAGD,CAAC,CAACkF,IAAI,0BAA0B,EAAC,sEAAsE,CAAC;EAAC,IAAG,CAAC9E,CAAC,CAACoC,QAAQ,EAAC,MAAM,IAAIvC,CAAC,CAAC,GAAGD,CAAC,CAACkF,IAAI,0BAA0B,EAAC,mCAAmC,CAAC;EAAC,IAAG,CAAC9E,CAAC,CAAC0F,IAAI,IAAE,CAAC1F,CAAC,CAACiI,QAAQ,EAAC,MAAM,IAAIpI,CAAC,CAAC,GAAGD,CAAC,CAACkF,IAAI,0BAA0B,EAAC,6CAA6C,CAAC;EAAC,IAAG,EAAE9E,CAAC,CAAC0F,IAAI,YAAYwC,IAAI,IAAE,CAAC,CAAClI,CAAC,CAAC0F,IAAI,CAACuB,IAAI,CAAC,IAAE,CAACjH,CAAC,CAACiH,IAAI,EAAC,MAAM,IAAIpH,CAAC,CAAC,GAAGD,CAAC,CAACkF,IAAI,0BAA0B,EAAC,uFAAuF,CAAC;EAAC,IAAG,CAAClF,CAAC,CAAC2H,YAAY,EAAE3B,OAAO,CAACuC,wBAAwB,IAAEnI,CAAC,CAACiI,QAAQ,EAAC,MAAM,IAAIpI,CAAC,CAAC,GAAGD,CAAC,CAACkF,IAAI,0BAA0B,EAAC,wGAAwG,CAAC;EAAC,IAAG,QAAQ,IAAE,OAAO9E,CAAC,CAAC0F,IAAI,EAAC;IAAC,MAAM/F,CAAC,GAACS,CAAC,CAACJ,CAAC,CAAC0F,IAAI,CAAC;IAAC,IAAG/F,CAAC,IAAE,CAACA,CAAC,CAACyI,QAAQ,EAAC,MAAM,IAAIvI,CAAC,CAAC,GAAGD,CAAC,CAACkF,IAAI,0BAA0B,EAAC,mEAAmE,CAAC;EAAA;AAAC;AAAC,SAAS0B,CAACA,CAAC7G,CAAC,EAACC,CAAC,EAAC;EAAC,MAAK;IAACoH,UAAU,EAACnH;EAAC,CAAC,GAACF,CAAC;EAAC,IAAI,IAAEE,CAAC,CAACD,CAAC,CAAC,KAAGC,CAAC,CAACD,CAAC,CAAC,GAACU,CAAC,CAAC,CAAC,CAAC;AAAA;AAAC,eAAewG,CAACA,CAACnH,CAAC,EAAC;EAAC,MAAMC,CAAC,GAACD,CAAC,CAACuF,WAAW,IAAE,EAAE;IAACrF,CAAC,GAACF,CAAC,CAACwF,cAAc,IAAE,EAAE;IAACpF,CAAC,GAACH,CAAC,CAACyI,MAAM,CAACxI,CAAC,CAAC,CAACgE,GAAG,CAAElE,CAAC,IAAEA,CAAC,CAAC0H,QAAS,CAAC;IAACrH,CAAC,GAAC,MAAMQ,CAAC,CAACT,CAAC,CAAC;IAACG,CAAC,GAACN,CAAC,CAAC4C,MAAM;IAACpC,CAAC,GAACP,CAAC,CAAC2C,MAAM;EAAC,OAAOxC,CAAC,CAACsI,KAAK,CAAC,CAAC,EAACpI,CAAC,CAAC,CAACqG,OAAO,CAAE,CAAC5G,CAAC,EAACE,CAAC,KAAGD,CAAC,CAACC,CAAC,CAAC,CAACwH,QAAQ,GAAC1H,CAAE,CAAC,EAACK,CAAC,CAACsI,KAAK,CAACpI,CAAC,EAACA,CAAC,GAACE,CAAC,CAAC,CAACmG,OAAO,CAAE,CAAC5G,CAAC,EAACC,CAAC,KAAGC,CAAC,CAACD,CAAC,CAAC,CAACyH,QAAQ,GAAC1H,CAAE,CAAC,EAACA,CAAC;AAAA;AAAC,SAAS4I,CAACA,CAAC5I,CAAC,EAAC;EAAC,OAAM;IAACuF,WAAW,EAACsD,KAAK,CAACC,IAAI,CAAC9I,CAAC,EAAEuF,WAAW,IAAE,EAAE,CAAC;IAACC,cAAc,EAACqD,KAAK,CAACC,IAAI,CAAC9I,CAAC,EAAEwF,cAAc,IAAE,EAAE,CAAC;IAACC,cAAc,EAACzF,CAAC,IAAEC,CAAC,CAAC8I,YAAY,CAAC/I,CAAC,CAACyF,cAAc,CAAC,GAACzF,CAAC,CAACyF,cAAc,CAACuD,OAAO,CAAC,CAAC,GAAChJ,CAAC,CAACyF,cAAc,IAAE,EAAE;IAACC,cAAc,EAAC1F,CAAC,CAAC0F,cAAc,IAAE,EAAE;IAACC,iBAAiB,EAAC3F,CAAC,CAAC2F,iBAAiB,IAAE,EAAE;IAACC,iBAAiB,EAAC5F,CAAC,CAAC4F,iBAAiB,IAAE;EAAE,CAAC;AAAA;AAAC,SAASY,CAACA,CAACxG,CAAC,EAACC,CAAC,EAACG,CAAC,EAAC;EAAC,MAAMC,CAAC,GAACuI,CAAC,CAAC5I,CAAC,CAAC;EAAC,IAAGK,CAAC,CAACkF,WAAW,EAAE1C,MAAM,IAAE,CAAC5C,CAAC,CAACgJ,UAAU,CAACC,WAAW,EAAC,MAAM,IAAIhJ,CAAC,CAAC,GAAGE,CAAC,wBAAwB,EAAC,yCAAyC,CAAC;EAAC,IAAGC,CAAC,CAACmF,cAAc,EAAE3C,MAAM,IAAE,CAAC5C,CAAC,CAACgJ,UAAU,CAACE,cAAc,EAAC,MAAM,IAAIjJ,CAAC,CAAC,GAAGE,CAAC,wBAAwB,EAAC,2CAA2C,CAAC;EAAC,IAAGC,CAAC,CAACoF,cAAc,EAAE5C,MAAM,IAAE,CAAC5C,CAAC,CAACgJ,UAAU,CAACG,cAAc,EAAC,MAAM,IAAIlJ,CAAC,CAAC,GAAGE,CAAC,wBAAwB,EAAC,2CAA2C,CAAC;EAAC,OAAOC,CAAC,CAACkF,WAAW,GAAClF,CAAC,CAACkF,WAAW,CAACrB,GAAG,CAACmF,CAAC,CAAC,EAAChJ,CAAC,CAACmF,cAAc,GAACnF,CAAC,CAACmF,cAAc,CAACtB,GAAG,CAACmF,CAAC,CAAC,EAAChJ,CAAC,CAACiJ,gBAAgB,GAAC,EAAE,EAACjJ,CAAC;AAAA;AAAC,SAASyF,CAACA,CAAC9F,CAAC,EAACC,CAAC,EAACG,CAAC,EAACC,CAAC,EAACE,CAAC,EAACE,CAAC,EAAC;EAAC,IAAG,CAACT,CAAC,IAAE,CAACK,CAAC,IAAE,CAACE,CAAC,EAAC,MAAM,IAAIL,CAAC,CAAC,GAAGO,CAAC,qBAAqB,EAAC,uIAAuI,CAAC;EAAC,IAAG,CAACR,CAAC,CAACgG,OAAO,CAACsD,gBAAgB,IAAEnJ,CAAC,EAAEqG,YAAY,EAAC,MAAM,IAAIvG,CAAC,CAAC,GAAGO,CAAC,oBAAoB,EAAC,oGAAoG,CAAC;EAAC,IAAG,CAACR,CAAC,CAACgG,OAAO,CAACsD,gBAAgB,IAAEhJ,CAAC,EAAC,MAAM,IAAIL,CAAC,CAAC,GAAGO,CAAC,oBAAoB,EAAC,kKAAkK,CAAC;EAAC,IAAG,CAACL,CAAC,EAAEqG,YAAY,IAAElG,CAAC,EAAC,MAAM,IAAIL,CAAC,CAAC,GAAGO,CAAC,oBAAoB,EAAC,oHAAoH,CAAC;AAAA;AAAC,SAAS4I,CAACA,CAACpJ,CAAC,EAAC;EAAC,MAAMC,CAAC,GAAC,IAAIF,CAAC,CAAD,CAAC;EAAC,OAAOC,CAAC,CAACoH,UAAU,KAAGpH,CAAC,CAACoH,UAAU,GAAC,CAAC,CAAC,CAAC,EAACnH,CAAC,CAACwH,QAAQ,GAACzH,CAAC,CAACyH,QAAQ,EAACxH,CAAC,CAACmH,UAAU,GAACpH,CAAC,CAACoH,UAAU,EAACnH,CAAC;AAAA;AAAC,eAAegH,CAACA,CAAClH,CAAC,EAACC,CAAC,EAAC;EAAC,MAAK;IAAC4F,SAAS,EAACzF;EAAC,CAAC,GAACH,CAAC;EAAC,IAAG,IAAI,IAAEG,CAAC,EAAC;EAAO,IAAG,CAACyB,CAAC,CAACzB,CAAC,CAAC,EAAC,MAAM,IAAIF,CAAC,CAAC,GAAGD,CAAC,CAACkF,IAAI,wCAAwC,EAAC,sFAAsF,CAAC;EAACnF,CAAC,CAACsJ,gBAAgB,KAAG,EAAE;EAAC,MAAK;IAACA,gBAAgB,EAACjJ;EAAC,CAAC,GAACL,CAAC;EAAC,KAAI,MAAME,CAAC,IAAIF,CAAC,CAACuF,WAAW,IAAE,EAAE,EAACiE,CAAC,CAACtJ,CAAC,CAAC,IAAEG,CAAC,CAACoJ,IAAI,CAACvJ,CAAC,CAAC;EAAC,KAAI,MAAMA,CAAC,IAAIF,CAAC,CAACwF,cAAc,IAAE,EAAE,EAACgE,CAAC,CAACtJ,CAAC,CAAC,IAAEG,CAAC,CAACoJ,IAAI,CAACvJ,CAAC,CAAC;AAAA;AAAC,SAASsJ,CAACA,CAACxJ,CAAC,EAAC;EAAC,OAAM,MAAM,KAAGA,CAAC,EAAE0H,QAAQ,EAAEvC,IAAI;AAAA;AAAC,SAASuE,CAACA,CAAC1J,CAAC,EAACC,CAAC,EAACG,CAAC,EAACC,CAAC,EAAC;EAAC,IAAG,CAAC6B,CAAC,CAACjC,CAAC,CAAC,EAAC,MAAM,IAAIC,CAAC,CAAC,GAAGF,CAAC,CAACmF,IAAI,2BAA2B,EAAC,qDAAqD,EAAC;IAACC,KAAK,EAACpF;EAAC,CAAC,CAAC;EAAC,IAAG,CAACC,CAAC,CAAC0J,YAAY,EAAC,MAAM,IAAIzJ,CAAC,CAAC,GAAGF,CAAC,CAACmF,IAAI,gCAAgC,EAAC,uDAAuD,EAAC;IAACC,KAAK,EAACpF;EAAC,CAAC,CAAC;EAAC,OAAOC,CAAC,CAAC0J,YAAY,CAACvJ,CAAC,EAACC,CAAC,CAAC;AAAA;AAAC,SAAOsC,CAAC,IAAIR,UAAU,EAAC2D,CAAC,IAAI8D,wBAAwB,EAAClH,CAAC,IAAImH,oCAAoC,EAACvH,CAAC,IAAIwH,oCAAoC,EAACtH,CAAC,IAAIuH,+BAA+B,EAAC3H,CAAC,IAAI4H,+BAA+B,EAACpB,CAAC,IAAIqB,oBAAoB,EAACzD,CAAC,IAAI0D,cAAc,EAAC/C,CAAC,IAAIgD,mBAAmB,EAACd,CAAC,IAAIe,mBAAmB,EAACV,CAAC,IAAIC,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}