{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as t, a as e } from \"../../../../../../../chunks/tslib.es6.js\";\nimport { location as s, uniform as i, define as l, UniformGroup as o, input as r } from \"../../GraphShaderModule.js\";\nimport { Float as a, Vec3 as p, Vec4 as n, length as u, step as m, Vec2 as d } from \"../../graph/glsl.js\";\nimport { FeatureVertexInput as y, FeatureFragmentInput as h, AFeatureShader as c } from \"./AFeatureShader.js\";\nimport { getHeatmapCompressionFactor as f } from \"./heatmapUtils.js\";\nimport { hittestMarker as w } from \"./hittestUtils.js\";\nclass v extends y {}\nt([s(5, d)], v.prototype, \"offset\", void 0);\nclass x extends h {}\nclass g extends o {}\nt([i(a)], g.prototype, \"radius\", void 0), t([i(a)], g.prototype, \"isFieldActive\", void 0);\nclass F extends c {\n  constructor() {\n    super(...arguments), this.type = \"HeatmapAccumulateShader\", this.usesHalfFloatPrecision = !1;\n  }\n  vertex(t) {\n    const {\n        radius: e,\n        isFieldActive: s\n      } = this.kernelControls,\n      i = t.offset,\n      l = s.multiply(this.storage.getVVData(t.id).x).add(new a(1).subtract(s)),\n      o = this.view.displayViewScreenMat3.multiply(new p(t.pos, 1)).add(this.view.displayViewMat3.multiply(new p(i, 0)).multiply(e)),\n      r = this.clip(t.id);\n    return {\n      glPosition: new n(o.xy, r, 1),\n      offset: i,\n      fieldValue: l,\n      color: new n(0),\n      ...this.maybeRunHittest(t, {}, null)\n    };\n  }\n  fragment(t) {\n    const {\n        offset: e,\n        fieldValue: s\n      } = t,\n      i = u(e),\n      l = m(i, new a(1)),\n      o = new a(1).subtract(i.multiply(i)),\n      r = o.multiply(o),\n      p = l.multiply(r).multiply(s).multiply(new a(f(this.usesHalfFloatPrecision)));\n    return this.getFragmentOutput(new n(p), t);\n  }\n  hittest(t) {\n    const {\n        viewMat3: e,\n        tileMat3: s\n      } = this.view,\n      i = e.multiply(s).multiply(new p(t.pos, 1));\n    return w(i.xy, this.kernelControls.radius, this.hittestRequest.position);\n  }\n}\nt([l], F.prototype, \"usesHalfFloatPrecision\", void 0), t([i(g)], F.prototype, \"kernelControls\", void 0), t([e(0, r(v))], F.prototype, \"vertex\", null), t([e(0, r(x))], F.prototype, \"fragment\", null);\nexport { x as HeatmapAccumulateFragmentInput, F as HeatmapAccumulateShader, v as HeatmapAccumulateVertexInput };","map":{"version":3,"names":["_","t","a","e","location","s","uniform","i","define","l","UniformGroup","o","input","r","Float","Vec3","p","Vec4","n","length","u","step","m","Vec2","d","FeatureVertexInput","y","FeatureFragmentInput","h","AFeatureShader","c","getHeatmapCompressionFactor","f","hittestMarker","w","v","prototype","x","g","F","constructor","arguments","type","usesHalfFloatPrecision","vertex","radius","isFieldActive","kernelControls","offset","multiply","storage","getVVData","id","add","subtract","view","displayViewScreenMat3","pos","displayViewMat3","clip","glPosition","xy","fieldValue","color","maybeRunHittest","fragment","getFragmentOutput","hittest","viewMat3","tileMat3","hittestRequest","position","HeatmapAccumulateFragmentInput","HeatmapAccumulateShader","HeatmapAccumulateVertexInput"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/HeatmapAccumulateShader.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as t,a as e}from\"../../../../../../../chunks/tslib.es6.js\";import{location as s,uniform as i,define as l,UniformGroup as o,input as r}from\"../../GraphShaderModule.js\";import{Float as a,Vec3 as p,Vec4 as n,length as u,step as m,Vec2 as d}from\"../../graph/glsl.js\";import{FeatureVertexInput as y,FeatureFragmentInput as h,AFeatureShader as c}from\"./AFeatureShader.js\";import{getHeatmapCompressionFactor as f}from\"./heatmapUtils.js\";import{hittestMarker as w}from\"./hittestUtils.js\";class v extends y{}t([s(5,d)],v.prototype,\"offset\",void 0);class x extends h{}class g extends o{}t([i(a)],g.prototype,\"radius\",void 0),t([i(a)],g.prototype,\"isFieldActive\",void 0);class F extends c{constructor(){super(...arguments),this.type=\"HeatmapAccumulateShader\",this.usesHalfFloatPrecision=!1}vertex(t){const{radius:e,isFieldActive:s}=this.kernelControls,i=t.offset,l=s.multiply(this.storage.getVVData(t.id).x).add(new a(1).subtract(s)),o=this.view.displayViewScreenMat3.multiply(new p(t.pos,1)).add(this.view.displayViewMat3.multiply(new p(i,0)).multiply(e)),r=this.clip(t.id);return{glPosition:new n(o.xy,r,1),offset:i,fieldValue:l,color:new n(0),...this.maybeRunHittest(t,{},null)}}fragment(t){const{offset:e,fieldValue:s}=t,i=u(e),l=m(i,new a(1)),o=new a(1).subtract(i.multiply(i)),r=o.multiply(o),p=l.multiply(r).multiply(s).multiply(new a(f(this.usesHalfFloatPrecision)));return this.getFragmentOutput(new n(p),t)}hittest(t){const{viewMat3:e,tileMat3:s}=this.view,i=e.multiply(s).multiply(new p(t.pos,1));return w(i.xy,this.kernelControls.radius,this.hittestRequest.position)}}t([l],F.prototype,\"usesHalfFloatPrecision\",void 0),t([i(g)],F.prototype,\"kernelControls\",void 0),t([e(0,r(v))],F.prototype,\"vertex\",null),t([e(0,r(x))],F.prototype,\"fragment\",null);export{x as HeatmapAccumulateFragmentInput,F as HeatmapAccumulateShader,v as HeatmapAccumulateVertexInput};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}