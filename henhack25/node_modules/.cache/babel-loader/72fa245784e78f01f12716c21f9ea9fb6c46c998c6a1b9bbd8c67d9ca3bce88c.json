{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from \"../../../../core/Logger.js\";\nimport { disposeMaybe as t } from \"../../../../core/maybe.js\";\nimport { NestedMap as r } from \"../../../../core/NestedMap.js\";\nimport { assert as i } from \"./Util.js\";\nclass s {\n  constructor(e, t, i, s) {\n    this._textures = e, this._techniques = t, this.materialChanged = i, this.requestRender = s, this._id2glMaterialRef = new r();\n  }\n  dispose() {\n    this._textures.destroy();\n  }\n  acquire(e, t, r) {\n    this._ownMaterial(e);\n    const i = e.produces.get(t);\n    if (!i?.(r)) return null;\n    let s = this._id2glMaterialRef.get(r, e.id);\n    if (null == s) {\n      const t = e.createGLMaterial({\n        material: e,\n        techniques: this._techniques,\n        textures: this._textures,\n        output: r\n      });\n      s = new a(t), this._id2glMaterialRef.set(r, e.id, s);\n    }\n    return s.ref(), s.glMaterial;\n  }\n  release(e, r) {\n    const i = this._id2glMaterialRef.get(r, e.id);\n    null != i && (i.unref(), i.referenced || (t(i.glMaterial), this._id2glMaterialRef.delete(r, e.id)));\n  }\n  _ownMaterial(t) {\n    t.repository && t.repository !== this && e.getLogger(\"esri.views.3d.webgl-engine.lib.GLMaterialRepository\").error(\"Material is already owned by a different material repository\"), t.repository = this;\n  }\n}\nclass a {\n  constructor(e) {\n    this.glMaterial = e, this._refCnt = 0;\n  }\n  ref() {\n    ++this._refCnt;\n  }\n  unref() {\n    --this._refCnt, i(this._refCnt >= 0);\n  }\n  get referenced() {\n    return this._refCnt > 0;\n  }\n}\nexport { s as GLMaterialRepository };","map":{"version":3,"names":["e","disposeMaybe","t","NestedMap","r","assert","i","s","constructor","_textures","_techniques","materialChanged","requestRender","_id2glMaterialRef","dispose","destroy","acquire","_ownMaterial","produces","get","id","createGLMaterial","material","techniques","textures","output","a","set","ref","glMaterial","release","unref","referenced","delete","repository","getLogger","error","_refCnt","GLMaterialRepository"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterialRepository.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Logger.js\";import{disposeMaybe as t}from\"../../../../core/maybe.js\";import{NestedMap as r}from\"../../../../core/NestedMap.js\";import{assert as i}from\"./Util.js\";class s{constructor(e,t,i,s){this._textures=e,this._techniques=t,this.materialChanged=i,this.requestRender=s,this._id2glMaterialRef=new r}dispose(){this._textures.destroy()}acquire(e,t,r){this._ownMaterial(e);const i=e.produces.get(t);if(!i?.(r))return null;let s=this._id2glMaterialRef.get(r,e.id);if(null==s){const t=e.createGLMaterial({material:e,techniques:this._techniques,textures:this._textures,output:r});s=new a(t),this._id2glMaterialRef.set(r,e.id,s)}return s.ref(),s.glMaterial}release(e,r){const i=this._id2glMaterialRef.get(r,e.id);null!=i&&(i.unref(),i.referenced||(t(i.glMaterial),this._id2glMaterialRef.delete(r,e.id)))}_ownMaterial(t){t.repository&&t.repository!==this&&e.getLogger(\"esri.views.3d.webgl-engine.lib.GLMaterialRepository\").error(\"Material is already owned by a different material repository\"),t.repository=this}}class a{constructor(e){this.glMaterial=e,this._refCnt=0}ref(){++this._refCnt}unref(){--this._refCnt,i(this._refCnt>=0)}get referenced(){return this._refCnt>0}}export{s as GLMaterialRepository};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}