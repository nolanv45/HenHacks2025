{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { throwIfAborted as e } from \"../../../../core/promiseUtils.js\";\nimport { create as o } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport t from \"../../../../geometry/SpatialReference.js\";\nimport { projectPointToVectorAsync as r } from \"../../../../geometry/projection/projectPointToVector.js\";\nimport { makeDehydratedPoint as i } from \"../../../../layers/graphics/dehydratedPoint.js\";\nimport { getGeometryEffectiveElevationInfo as n } from \"../../../../support/elevationInfoUtils.js\";\nimport { evaluateElevationInfoAtPoint as s, SampleElevationInfo as a } from \"./elevationAlignmentUtils.js\";\nimport { ElevationContext as p } from \"./ElevationContext.js\";\nimport { extractExpressionInfo as f, createContext as c } from \"./featureExpressionInfoUtils.js\";\nasync function l(l, m, d, j, u) {\n  const {\n      elevationProvider: v,\n      renderCoordsHelper: g\n    } = l,\n    {\n      elevationInfo: I\n    } = m,\n    {\n      pointsInFeatures: x,\n      spatialReference: y\n    } = j,\n    h = t.fromJSON(y),\n    w = f(I, !0),\n    R = await c(w, h, u);\n  e(u);\n  const S = [],\n    b = new Set(),\n    z = new Set(),\n    E = new p(),\n    P = i(0, 0, 0, t.WGS84),\n    U = new a(),\n    C = o();\n  P.spatialReference = h;\n  const F = l.elevationProvider.spatialReference ?? l.spatialReference;\n  for (const {\n    objectId: e,\n    points: o\n  } of x) {\n    const t = d(e);\n    if (null == t) {\n      for (const e of o) S.push(e.z ?? 0);\n      b.add(e);\n      continue;\n    }\n    t.isDraped && z.add(e);\n    const i = t.graphic.geometry;\n    E.setFromElevationInfo(n(i, I)), E.updateFeatureExpressionInfoContext(R, t.graphic, m);\n    for (const {\n      x: e,\n      y: n,\n      z: a\n    } of o) P.x = e, P.y = n, P.z = a ?? 0, await r(P, C, F, 0, {\n      signal: u\n    }), s(C, v, E, g, U), S.push(U.z);\n  }\n  return {\n    elevations: S,\n    drapedObjectIds: z,\n    failedObjectIds: b\n  };\n}\nexport { l as elevationAlignPointsInFeatures };","map":{"version":3,"names":["throwIfAborted","e","create","o","t","projectPointToVectorAsync","r","makeDehydratedPoint","i","getGeometryEffectiveElevationInfo","n","evaluateElevationInfoAtPoint","s","SampleElevationInfo","a","ElevationContext","p","extractExpressionInfo","f","createContext","c","l","m","d","j","u","elevationProvider","v","renderCoordsHelper","g","elevationInfo","I","pointsInFeatures","x","spatialReference","y","h","fromJSON","w","R","S","b","Set","z","E","P","WGS84","U","C","F","objectId","points","push","add","isDraped","graphic","geometry","setFromElevationInfo","updateFeatureExpressionInfoContext","signal","elevations","drapedObjectIds","failedObjectIds","elevationAlignPointsInFeatures"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/3d/layers/graphics/elevationAlignPointsInFeatures.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{throwIfAborted as e}from\"../../../../core/promiseUtils.js\";import{create as o}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import t from\"../../../../geometry/SpatialReference.js\";import{projectPointToVectorAsync as r}from\"../../../../geometry/projection/projectPointToVector.js\";import{makeDehydratedPoint as i}from\"../../../../layers/graphics/dehydratedPoint.js\";import{getGeometryEffectiveElevationInfo as n}from\"../../../../support/elevationInfoUtils.js\";import{evaluateElevationInfoAtPoint as s,SampleElevationInfo as a}from\"./elevationAlignmentUtils.js\";import{ElevationContext as p}from\"./ElevationContext.js\";import{extractExpressionInfo as f,createContext as c}from\"./featureExpressionInfoUtils.js\";async function l(l,m,d,j,u){const{elevationProvider:v,renderCoordsHelper:g}=l,{elevationInfo:I}=m,{pointsInFeatures:x,spatialReference:y}=j,h=t.fromJSON(y),w=f(I,!0),R=await c(w,h,u);e(u);const S=[],b=new Set,z=new Set,E=new p,P=i(0,0,0,t.WGS84),U=new a,C=o();P.spatialReference=h;const F=l.elevationProvider.spatialReference??l.spatialReference;for(const{objectId:e,points:o}of x){const t=d(e);if(null==t){for(const e of o)S.push(e.z??0);b.add(e);continue}t.isDraped&&z.add(e);const i=t.graphic.geometry;E.setFromElevationInfo(n(i,I)),E.updateFeatureExpressionInfoContext(R,t.graphic,m);for(const{x:e,y:n,z:a}of o)P.x=e,P.y=n,P.z=a??0,await r(P,C,F,0,{signal:u}),s(C,v,E,g,U),S.push(U.z)}return{elevations:S,drapedObjectIds:z,failedObjectIds:b}}export{l as elevationAlignPointsInFeatures};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}