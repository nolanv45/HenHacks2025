{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport t from \"../../../../request.js\";\nimport e from \"../../../../core/pbf.js\";\nclass s {\n  constructor(t) {\n    if (this._metrics = [], !t) return void (this._allBitmaps = null);\n    const e = new Map();\n    let s = 0;\n    for (; t.next();) switch (t.tag()) {\n      case 1:\n        {\n          const a = t.getMessage();\n          for (; a.next();) switch (a.tag()) {\n            case 3:\n              {\n                const t = a.getMessage();\n                let r, n, i, c, o, g, h;\n                for (; t.next();) switch (t.tag()) {\n                  case 1:\n                    r = t.getUInt32();\n                    break;\n                  case 2:\n                    n = t.getBytes();\n                    break;\n                  case 3:\n                    i = t.getUInt32();\n                    break;\n                  case 4:\n                    c = t.getUInt32();\n                    break;\n                  case 5:\n                    o = t.getSInt32();\n                    break;\n                  case 6:\n                    g = t.getSInt32();\n                    break;\n                  case 7:\n                    h = t.getUInt32();\n                    break;\n                  default:\n                    t.skip();\n                }\n                if (t.release(), r) {\n                  const t = n?.length ?? 0;\n                  this._metrics[r] = {\n                    width: i,\n                    height: c,\n                    left: o,\n                    top: g,\n                    advance: h,\n                    startOffset: s,\n                    length: t\n                  }, e.set(r, n), s += t;\n                }\n                break;\n              }\n            default:\n              a.skip();\n          }\n          a.release();\n          break;\n        }\n      default:\n        t.skip();\n    }\n    const a = new Uint8Array(s),\n      r = this._metrics;\n    for (const [n, i] of e) {\n      const {\n        startOffset: t,\n        length: e\n      } = r[n];\n      if (i) for (let s = 0; s < e; ++s) a[t + s] = i[s];\n    }\n    this._allBitmaps = a;\n  }\n  getMetrics(t) {\n    return this._metrics[t];\n  }\n  getBitmap(t) {\n    if (!this._allBitmaps) return;\n    const e = this._metrics[t];\n    if (void 0 === e) return;\n    const {\n      startOffset: s,\n      length: a\n    } = e;\n    return 0 !== a ? new n(this._allBitmaps, s, a) : void 0;\n  }\n}\nclass a {\n  constructor() {\n    this._ranges = [];\n  }\n  get ranges() {\n    return this._ranges;\n  }\n  getRange(t) {\n    return this._ranges[t];\n  }\n  addRange(t, e) {\n    this._ranges[t] = e;\n  }\n}\nclass r {\n  constructor(t) {\n    this._glyphInfo = {}, this._baseURL = t;\n  }\n  getRange(a, r) {\n    const n = this._getFontStack(a);\n    if (n.getRange(r)) return Promise.resolve();\n    const i = 256 * r,\n      c = i + 255;\n    if (this._baseURL) {\n      const o = this._baseURL.replace(\"{fontstack}\", a).replace(\"{range}\", i + \"-\" + c);\n      return t(o, {\n        responseType: \"array-buffer\"\n      }).then(t => {\n        n.addRange(r, new s(new e(new Uint8Array(t.data), new DataView(t.data))));\n      }).catch(() => {\n        n.addRange(r, new s());\n      });\n    }\n    return n.addRange(r, new s()), Promise.resolve();\n  }\n  getGlyph(t, e) {\n    const s = this._getFontStack(t);\n    if (!s) return;\n    const a = Math.floor(e / 256),\n      r = s.getRange(a);\n    return r ? {\n      metrics: r.getMetrics(e),\n      bitmap: r.getBitmap(e)\n    } : void 0;\n  }\n  _getFontStack(t) {\n    let e = this._glyphInfo[t];\n    return e || (e = this._glyphInfo[t] = new a()), e;\n  }\n}\nclass n {\n  constructor(t, e, s) {\n    this._array = t, this._start = e, this.length = s;\n  }\n  at(t) {\n    return 0 <= t && t < this.length ? this._array[this._start + t] : void 0;\n  }\n}\nexport { r as default };","map":{"version":3,"names":["t","e","s","constructor","_metrics","_allBitmaps","Map","next","tag","a","getMessage","r","n","i","c","o","g","h","getUInt32","getBytes","getSInt32","skip","release","length","width","height","left","top","advance","startOffset","set","Uint8Array","getMetrics","getBitmap","_ranges","ranges","getRange","addRange","_glyphInfo","_baseURL","_getFontStack","Promise","resolve","replace","responseType","then","data","DataView","catch","getGlyph","Math","floor","metrics","bitmap","_array","_start","at","default"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/engine/vectorTiles/GlyphSource.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport t from\"../../../../request.js\";import e from\"../../../../core/pbf.js\";class s{constructor(t){if(this._metrics=[],!t)return void(this._allBitmaps=null);const e=new Map;let s=0;for(;t.next();)switch(t.tag()){case 1:{const a=t.getMessage();for(;a.next();)switch(a.tag()){case 3:{const t=a.getMessage();let r,n,i,c,o,g,h;for(;t.next();)switch(t.tag()){case 1:r=t.getUInt32();break;case 2:n=t.getBytes();break;case 3:i=t.getUInt32();break;case 4:c=t.getUInt32();break;case 5:o=t.getSInt32();break;case 6:g=t.getSInt32();break;case 7:h=t.getUInt32();break;default:t.skip()}if(t.release(),r){const t=n?.length??0;this._metrics[r]={width:i,height:c,left:o,top:g,advance:h,startOffset:s,length:t},e.set(r,n),s+=t}break}default:a.skip()}a.release();break}default:t.skip()}const a=new Uint8Array(s),r=this._metrics;for(const[n,i]of e){const{startOffset:t,length:e}=r[n];if(i)for(let s=0;s<e;++s)a[t+s]=i[s]}this._allBitmaps=a}getMetrics(t){return this._metrics[t]}getBitmap(t){if(!this._allBitmaps)return;const e=this._metrics[t];if(void 0===e)return;const{startOffset:s,length:a}=e;return 0!==a?new n(this._allBitmaps,s,a):void 0}}class a{constructor(){this._ranges=[]}get ranges(){return this._ranges}getRange(t){return this._ranges[t]}addRange(t,e){this._ranges[t]=e}}class r{constructor(t){this._glyphInfo={},this._baseURL=t}getRange(a,r){const n=this._getFontStack(a);if(n.getRange(r))return Promise.resolve();const i=256*r,c=i+255;if(this._baseURL){const o=this._baseURL.replace(\"{fontstack}\",a).replace(\"{range}\",i+\"-\"+c);return t(o,{responseType:\"array-buffer\"}).then((t=>{n.addRange(r,new s(new e(new Uint8Array(t.data),new DataView(t.data))))})).catch((()=>{n.addRange(r,new s)}))}return n.addRange(r,new s),Promise.resolve()}getGlyph(t,e){const s=this._getFontStack(t);if(!s)return;const a=Math.floor(e/256),r=s.getRange(a);return r?{metrics:r.getMetrics(e),bitmap:r.getBitmap(e)}:void 0}_getFontStack(t){let e=this._glyphInfo[t];return e||(e=this._glyphInfo[t]=new a),e}}class n{constructor(t,e,s){this._array=t,this._start=e,this.length=s}at(t){return 0<=t&&t<this.length?this._array[this._start+t]:void 0}}export{r as default};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}