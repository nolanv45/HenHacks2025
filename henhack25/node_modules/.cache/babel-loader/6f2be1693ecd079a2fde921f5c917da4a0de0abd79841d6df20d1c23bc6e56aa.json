{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport t from \"../../../../../../core/Error.js\";\nimport { throwIfAborted as e } from \"../../../../../../core/promiseUtils.js\";\nimport r from \"../../../../../../core/RandomLCG.js\";\nimport { AFetchLoadStrategy as o } from \"./AFetchLoadStrategy.js\";\nimport { FeatureSnapshotSourceChunk as s } from \"./chunks/FeatureSnapshotSourceChunk.js\";\nimport { FeatureSetReaderJSON as n } from \"../../support/FeatureSetReaderJSON.js\";\nclass a extends o {\n  constructor(t, e, o, s, n, a) {\n    super(t, e, o, n, a), this._random = new r(1e3), this._featureCount = s;\n  }\n  get about() {\n    return {\n      supportsDisplayFilter: !1,\n      willQueryAllFeatures: !0,\n      willQueryFullResolutionGeometry: !0\n    };\n  }\n  load(t) {\n    return null == this._promise && (this._promise = this._downloadPages(this._featureCount)), this._promise;\n  }\n  unload(t) {}\n  async _downloadPages(e) {\n    const r = Math.ceil(e / this._queryInfo.pageSize),\n      o = Array.from({\n        length: r\n      }, (t, e) => e).sort((t, e) => this._random.getInt() - this._random.getInt()),\n      a = await Promise.all(o.map(t => this._downloadPage(t))),\n      i = new s(n.empty(this._metadata), null, -1, !0);\n    this._store.insert(i);\n    const u = a.filter(t => t);\n    if (u.length) throw new t(\"featurelayer-query\", \"Encountered errors when downloading data\", {\n      errors: u\n    });\n  }\n  async _downloadPage(t) {\n    try {\n      const r = this._queryInfo.createPagedQuery(t),\n        o = await this._fetch(r, this._options, {\n          chunkId: t.toString()\n        }),\n        n = new s(o, r.inner.toJSON(), t, !1);\n      return e(this._options), this._store.insert(n), null;\n    } catch (r) {\n      return r;\n    }\n  }\n}\nexport { a as SnapshotLoadStrategy };","map":{"version":3,"names":["t","throwIfAborted","e","r","AFetchLoadStrategy","o","FeatureSnapshotSourceChunk","s","FeatureSetReaderJSON","n","a","constructor","_random","_featureCount","about","supportsDisplayFilter","willQueryAllFeatures","willQueryFullResolutionGeometry","load","_promise","_downloadPages","unload","Math","ceil","_queryInfo","pageSize","Array","from","length","sort","getInt","Promise","all","map","_downloadPage","i","empty","_metadata","_store","insert","u","filter","errors","createPagedQuery","_fetch","_options","chunkId","toString","inner","toJSON","SnapshotLoadStrategy"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/layers/features/sources/strategies/SnapshotLoadStrategy.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport t from\"../../../../../../core/Error.js\";import{throwIfAborted as e}from\"../../../../../../core/promiseUtils.js\";import r from\"../../../../../../core/RandomLCG.js\";import{AFetchLoadStrategy as o}from\"./AFetchLoadStrategy.js\";import{FeatureSnapshotSourceChunk as s}from\"./chunks/FeatureSnapshotSourceChunk.js\";import{FeatureSetReaderJSON as n}from\"../../support/FeatureSetReaderJSON.js\";class a extends o{constructor(t,e,o,s,n,a){super(t,e,o,n,a),this._random=new r(1e3),this._featureCount=s}get about(){return{supportsDisplayFilter:!1,willQueryAllFeatures:!0,willQueryFullResolutionGeometry:!0}}load(t){return null==this._promise&&(this._promise=this._downloadPages(this._featureCount)),this._promise}unload(t){}async _downloadPages(e){const r=Math.ceil(e/this._queryInfo.pageSize),o=Array.from({length:r},((t,e)=>e)).sort(((t,e)=>this._random.getInt()-this._random.getInt())),a=await Promise.all(o.map((t=>this._downloadPage(t)))),i=new s(n.empty(this._metadata),null,-1,!0);this._store.insert(i);const u=a.filter((t=>t));if(u.length)throw new t(\"featurelayer-query\",\"Encountered errors when downloading data\",{errors:u})}async _downloadPage(t){try{const r=this._queryInfo.createPagedQuery(t),o=await this._fetch(r,this._options,{chunkId:t.toString()}),n=new s(o,r.inner.toJSON(),t,!1);return e(this._options),this._store.insert(n),null}catch(r){return r}}}export{a as SnapshotLoadStrategy};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}