{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport { property as t } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/Logger.js\";\nimport \"../../../core/RandomLCG.js\";\nimport { subclass as s } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { isIntegerPixelType as r } from \"../rasterFormats/pixelRangeUtils.js\";\nimport o from \"./BaseRasterFunction.js\";\nimport { createColormapLUT as i } from \"./pixelUtils.js\";\nimport n from \"./ShadedReliefFunctionArguments.js\";\nimport { getHillshadeOptions as p, hillshade as a, tintHillshade as u, calculateHillshadeParams as c, gcsFactor as l } from \"./surfaceUtils.js\";\nimport { convertColorRampToColormap as m, createHsvMap as d } from \"../../../renderers/support/colorRampUtils.js\";\nimport { isColormapSupportedByWebGL as f } from \"../../../renderers/support/rasterRendererChecks.js\";\nlet h = class extends o {\n  constructor() {\n    super(...arguments), this.functionName = \"ShadedRelief\", this.functionArguments = null, this.rasterArgumentNames = [\"raster\"], this.isGCS = !1;\n  }\n  _bindSourceRasters() {\n    const e = this.sourceRasterInfos[0];\n    if (e.bandCount > 1) return {\n      success: !1,\n      supportsGPU: !1,\n      error: \"shadedrelief-function: source data must be single band\"\n    };\n    let {\n      colorRamp: t,\n      colormap: s\n    } = this.functionArguments;\n    if (!t && !s?.length) return {\n      success: !1,\n      supportsGPU: !1,\n      error: \"shadedrelief-function: a color ramp argument must be specified\"\n    };\n    this.outputPixelType = this._getOutputPixelType(\"u8\");\n    const r = e.clone();\n    this._removeStatsHistColormapVAT(r), r.pixelType = this.outputPixelType, r.bandCount = 3, r.statistics = [{\n      min: 0,\n      max: 255,\n      avg: 60,\n      stddev: 10\n    }, {\n      min: 0,\n      max: 255,\n      avg: 60,\n      stddev: 10\n    }, {\n      min: 0,\n      max: 255,\n      avg: 60,\n      stddev: 10\n    }], this.rasterInfo = r, this.isGCS = r.spatialReference?.isGeographic ?? !1, s?.length || (s = m(t, {\n      interpolateAlpha: !0\n    }));\n    const {\n      indexedColormap: o,\n      offset: n\n    } = i({\n      colormap: s\n    });\n    if (!o?.length) return {\n      success: !1,\n      supportsGPU: !1,\n      error: \"shadedrelief-function: a valid colorramp is required\"\n    };\n    const p = d(o);\n    return this.lookup = {\n      indexedColormap: o,\n      offset: n,\n      hsvMap: p\n    }, {\n      success: !0,\n      supportsGPU: f(o)\n    };\n  }\n  _processPixels(e) {\n    const t = e.pixelBlocks?.[0];\n    if (!t || !this.lookup) return null;\n    let s = e.primaryPixelSizes?.[0];\n    if (null == s) {\n      const {\n        extent: r\n      } = e;\n      s = r ? {\n        x: r.width / t.width,\n        y: r.height / t.height\n      } : {\n        x: 1,\n        y: 1\n      };\n    }\n    const r = p(this.functionArguments, s, this.isGCS),\n      o = a(t, r),\n      i = this.sourceRasterInfos[0].statistics?.[0] ?? {\n        min: 0,\n        max: 8e3\n      };\n    return u(o, t, this.lookup.hsvMap, i), o.pixelType = this.outputPixelType, o;\n  }\n  _getWebGLParameters() {\n    const e = p(this.functionArguments, {\n        x: 1,\n        y: 1\n      }, this.isGCS),\n      t = c(e),\n      {\n        slopeType: s,\n        zFactor: o,\n        pixelSizeFactor: i,\n        pixelSizePower: n\n      } = this.functionArguments,\n      a = \"scaled\" === s,\n      {\n        indexedColormap: u,\n        offset: m\n      } = this.lookup,\n      d = this.sourceRasterInfos[0].statistics?.[0],\n      f = r(this.outputPixelType);\n    return {\n      ...t,\n      indexedColormap: u,\n      offset: m,\n      zFactor: o,\n      gcsFactor: this.isGCS ? l : 1,\n      pixelSizeFactor: a ? i : 0,\n      pixelSizePower: a ? n : 0,\n      minValue: d?.min ?? 0,\n      maxValue: d?.max ?? 8e3,\n      isOutputRounded: f\n    };\n  }\n};\ne([t({\n  json: {\n    write: !0,\n    name: \"rasterFunction\"\n  }\n})], h.prototype, \"functionName\", void 0), e([t({\n  type: n,\n  json: {\n    write: !0,\n    name: \"rasterFunctionArguments\"\n  }\n})], h.prototype, \"functionArguments\", void 0), e([t()], h.prototype, \"rasterArgumentNames\", void 0), e([t({\n  json: {\n    write: !0\n  }\n})], h.prototype, \"isGCS\", void 0), e([t({\n  json: {\n    write: !0\n  }\n})], h.prototype, \"lookup\", void 0), h = e([s(\"esri.layers.support.rasterFunctions.ShadedReliefFunction\")], h);\nconst x = h;\nexport { x as default };","map":{"version":3,"names":["_","e","property","t","subclass","s","isIntegerPixelType","r","o","createColormapLUT","i","n","getHillshadeOptions","p","hillshade","a","tintHillshade","u","calculateHillshadeParams","c","gcsFactor","l","convertColorRampToColormap","m","createHsvMap","d","isColormapSupportedByWebGL","f","h","constructor","arguments","functionName","functionArguments","rasterArgumentNames","isGCS","_bindSourceRasters","sourceRasterInfos","bandCount","success","supportsGPU","error","colorRamp","colormap","length","outputPixelType","_getOutputPixelType","clone","_removeStatsHistColormapVAT","pixelType","statistics","min","max","avg","stddev","rasterInfo","spatialReference","isGeographic","interpolateAlpha","indexedColormap","offset","lookup","hsvMap","_processPixels","pixelBlocks","primaryPixelSizes","extent","x","width","y","height","_getWebGLParameters","slopeType","zFactor","pixelSizeFactor","pixelSizePower","minValue","maxValue","isOutputRounded","json","write","name","prototype","type","default"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/layers/support/rasterFunctions/ShadedReliefFunction.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{property as t}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import{isIntegerPixelType as r}from\"../rasterFormats/pixelRangeUtils.js\";import o from\"./BaseRasterFunction.js\";import{createColormapLUT as i}from\"./pixelUtils.js\";import n from\"./ShadedReliefFunctionArguments.js\";import{getHillshadeOptions as p,hillshade as a,tintHillshade as u,calculateHillshadeParams as c,gcsFactor as l}from\"./surfaceUtils.js\";import{convertColorRampToColormap as m,createHsvMap as d}from\"../../../renderers/support/colorRampUtils.js\";import{isColormapSupportedByWebGL as f}from\"../../../renderers/support/rasterRendererChecks.js\";let h=class extends o{constructor(){super(...arguments),this.functionName=\"ShadedRelief\",this.functionArguments=null,this.rasterArgumentNames=[\"raster\"],this.isGCS=!1}_bindSourceRasters(){const e=this.sourceRasterInfos[0];if(e.bandCount>1)return{success:!1,supportsGPU:!1,error:\"shadedrelief-function: source data must be single band\"};let{colorRamp:t,colormap:s}=this.functionArguments;if(!t&&!s?.length)return{success:!1,supportsGPU:!1,error:\"shadedrelief-function: a color ramp argument must be specified\"};this.outputPixelType=this._getOutputPixelType(\"u8\");const r=e.clone();this._removeStatsHistColormapVAT(r),r.pixelType=this.outputPixelType,r.bandCount=3,r.statistics=[{min:0,max:255,avg:60,stddev:10},{min:0,max:255,avg:60,stddev:10},{min:0,max:255,avg:60,stddev:10}],this.rasterInfo=r,this.isGCS=r.spatialReference?.isGeographic??!1,s?.length||(s=m(t,{interpolateAlpha:!0}));const{indexedColormap:o,offset:n}=i({colormap:s});if(!o?.length)return{success:!1,supportsGPU:!1,error:\"shadedrelief-function: a valid colorramp is required\"};const p=d(o);return this.lookup={indexedColormap:o,offset:n,hsvMap:p},{success:!0,supportsGPU:f(o)}}_processPixels(e){const t=e.pixelBlocks?.[0];if(!t||!this.lookup)return null;let s=e.primaryPixelSizes?.[0];if(null==s){const{extent:r}=e;s=r?{x:r.width/t.width,y:r.height/t.height}:{x:1,y:1}}const r=p(this.functionArguments,s,this.isGCS),o=a(t,r),i=this.sourceRasterInfos[0].statistics?.[0]??{min:0,max:8e3};return u(o,t,this.lookup.hsvMap,i),o.pixelType=this.outputPixelType,o}_getWebGLParameters(){const e=p(this.functionArguments,{x:1,y:1},this.isGCS),t=c(e),{slopeType:s,zFactor:o,pixelSizeFactor:i,pixelSizePower:n}=this.functionArguments,a=\"scaled\"===s,{indexedColormap:u,offset:m}=this.lookup,d=this.sourceRasterInfos[0].statistics?.[0],f=r(this.outputPixelType);return{...t,indexedColormap:u,offset:m,zFactor:o,gcsFactor:this.isGCS?l:1,pixelSizeFactor:a?i:0,pixelSizePower:a?n:0,minValue:d?.min??0,maxValue:d?.max??8e3,isOutputRounded:f}}};e([t({json:{write:!0,name:\"rasterFunction\"}})],h.prototype,\"functionName\",void 0),e([t({type:n,json:{write:!0,name:\"rasterFunctionArguments\"}})],h.prototype,\"functionArguments\",void 0),e([t()],h.prototype,\"rasterArgumentNames\",void 0),e([t({json:{write:!0}})],h.prototype,\"isGCS\",void 0),e([t({json:{write:!0}})],h.prototype,\"lookup\",void 0),h=e([s(\"esri.layers.support.rasterFunctions.ShadedReliefFunction\")],h);const x=h;export{x as default};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}