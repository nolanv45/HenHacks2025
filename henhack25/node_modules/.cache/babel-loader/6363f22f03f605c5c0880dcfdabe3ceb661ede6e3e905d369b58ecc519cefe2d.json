{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from \"../../../../Color.js\";\nimport { result as t, createTask as r } from \"../../../../core/asyncUtils.js\";\nimport i from \"../../../../core/Error.js\";\nimport has from \"../../../../core/has.js\";\nimport { clone as s } from \"../../../../core/lang.js\";\nimport { abortMaybe as o, releaseMaybe as a } from \"../../../../core/maybe.js\";\nimport { throwIfAbortError as n, throwIfAborted as l } from \"../../../../core/promiseUtils.js\";\nimport { pt2px as c, px2pt as h } from \"../../../../core/screenUtils.js\";\nimport { numericHash as u } from \"../../../../core/string.js\";\nimport { dataComponents as m } from \"../../../../core/urlUtils.js\";\nimport { fromValues as d, create as p } from \"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";\nimport { create as _, fromValues as f } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { fromValues as y } from \"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";\nimport { projectPointToVector as g } from \"../../../../geometry/projection/projectPointToVector.js\";\nimport { containsPoint as x } from \"../../../../geometry/support/aaBoundingBox.js\";\nimport { createRendererExpression as b } from \"../../../../support/arcadeOnDemand.js\";\nimport { CIMSymbolHelper as v } from \"../../../../symbols/cim/CIMSymbolHelper.js\";\nimport { evaluateValueOrFunction as S } from \"../../../../symbols/cim/utils.js\";\nimport { scaleCIMSymbol as P } from \"../../../../symbols/support/cimSymbolUtils.js\";\nimport { defaultPrimitive as R } from \"../../../../symbols/support/IconSymbol3DLayerResource.js\";\nimport { Symbol3DAnchorPosition2D as w } from \"../../../../symbols/support/Symbol3DAnchorPosition2D.js\";\nimport { getIconHref as C } from \"../../../../symbols/support/utils.js\";\nimport { focusAreaHUDColor as z } from \"../../../FocusAreas.js\";\nimport { transparentUnit as O } from \"./constants.js\";\nimport { perObjectElevationAligner as j } from \"./ElevationAligners.js\";\nimport { SymbolUpdateType as M, elevationModeChangeUpdateType as I, needsElevationUpdates2D as T } from \"./elevationAlignmentUtils.js\";\nimport { Graphics3DDrapedGraphicLayer as E } from \"./Graphics3DDrapedGraphicLayer.js\";\nimport { Graphics3DObject3DGraphicLayer as D } from \"./Graphics3DObject3DGraphicLayer.js\";\nimport { Graphics3DSymbolLayer as F } from \"./Graphics3DSymbolLayer.js\";\nimport { validateSymbolLayerSize as A } from \"./graphicUtils.js\";\nimport { ApplyRendererDiffResult as U } from \"./interfaces.js\";\nimport { namedAnchorToHUDMaterialAnchorPos as L } from \"./placementUtils.js\";\nimport { placePointOnGeometry as G, updateStageObjectGeometry as V, getLocalOriginForPoint as H, extendPointGraphicElevationContext as k, createStageObject as B } from \"./pointUtils.js\";\nimport { initFastSymbolUpdatesState as N, updateFastSymbolUpdatesState as $, evaluateModelTransformScale as W, ConvertOptions as q } from \"../support/FastSymbolUpdates.js\";\nimport { createTexture as J, requiresHalfTexelOffset as Z, defaultBoundingBox as K, defaultSymbolSizeRatio as Q, defaultTexSize as X } from \"../../support/engineContent/sdfPrimitives.js\";\nimport { drapedZ as Y } from \"../../terrain/OverlayRenderer.js\";\nimport { createPointGeometry as ee } from \"../../webgl-engine/lib/GeometryUtil.js\";\nimport { RenderGeometry as te } from \"../../webgl-engine/lib/RenderGeometry.js\";\nimport { Texture as re } from \"../../webgl-engine/lib/Texture.js\";\nimport { HUDMaterial as ie } from \"../../webgl-engine/materials/HUDMaterial.js\";\nconst se = f(0, 0, 1),\n  oe = 16,\n  ae = 1.5,\n  ne = [X * Q, X * Q];\nclass le extends F {\n  getCachedSize() {\n    return {\n      size: this._getIconSize()\n    };\n  }\n  constructor(e, t, r, i) {\n    super(e, t, r, i), this._cimData = null, this._overrideHelperClass = null, this._arcadeInfo = null, this._cimSymbolMaterials = new Map(), this._cimSymbolTextures = new Map(), this._cimMaterialParametersInfo = null, this._cimScaleFactorOrFunction = null, this._size = null, this._symbolTextureRatio = 1, this._outlineSize = 0, this._textureHandle = null, this._patchTask = null, this._elevationOptions = {\n      supportsOffsetAdjustment: !0,\n      supportsOnTheGround: !0\n    };\n  }\n  async doLoad(e) {\n    this._validateOrThrow();\n    const t = this._prepareMaterialParameters(),\n      r = this._getPrimitive();\n    if (null != r) this._prepareResourcesPrimitive(t, r);else {\n      const r = C(this.symbolLayer),\n        i = ue(r);\n      null != i ? await this._prepareResourcesCIM(t, JSON.parse(i), e) : await this._prepareResourcesHref(t, r, e);\n    }\n  }\n  _validateOrThrow() {\n    if (this._drivenProperties.size) return;\n    const e = A(this._getIconSize());\n    if (e) throw new i(\"graphics3diconsymbollayer:invalid-size\", e);\n  }\n  _getIconSize() {\n    const e = this.symbolLayer,\n      t = Math.round(null != e.size ? c(e.size) : oe);\n    return this._drivenProperties.size ? Math.max(t, 64) : t;\n  }\n  _generateTextureCIM(e) {\n    const t = this._overrideHelperClass;\n    let r = this._cimData;\n    if (t && r && r.symbol || this.logger.error(\"Can't create texture, CIM data is undefined\"), r.primitiveOverrides) {\n      r = s(r);\n      const i = r.primitiveOverrides;\n      t.evaluateOverrides(i, e, this._arcadeInfo.geometryType, null, null), t.applyOverrides(r.symbol, i);\n    }\n    const i = u(JSON.stringify(r));\n    let o = this._cimSymbolTextures.get(i);\n    if (o) return o;\n    const a = this._context.sharedResources.cimSymbolRasterizer,\n      n = this._context.renderer && \"dictionary\" === this._context.renderer.type ? this._context.renderer.fieldMap : null;\n    n && t.applyDictionaryTextOverrides(r.symbol, e, n, null);\n    const l = null != this._cimScaleFactorOrFunction ? S(this._cimScaleFactorOrFunction, e) : 1;\n    1 !== l && r.symbol && P(r.symbol, l, !0);\n    const c = v.getEnvelope(r, null, a.resourceManager);\n    if (c?.width && c.height) {\n      const e = c.x + c.width / 2,\n        t = c.y + c.height / 2,\n        i = a.rasterize({\n          type: \"cim\",\n          data: r\n        }, c.width, c.height, e, t, 1, \"esriGeometryPoint\", 0, null, this._context.graphicsCoreOwner.view.state.rasterPixelRatio),\n        s = new w({\n          x: -c.x / c.width - .5,\n          y: (c.height + c.y) / c.height - .5\n        });\n      this._cimMaterialParametersInfo.anchorPosition = me(\"relative\", s), o = new re(i, {\n        width: i?.width ?? 1,\n        height: i?.height ?? 1,\n        reloadable: !0\n      });\n    } else o = new re(new ImageData(1, 1), {\n      width: 1,\n      height: 1,\n      reloadable: !0\n    });\n    return this._cimSymbolTextures.set(i, o), this._context.stage.add(o), o;\n  }\n  _prepareMaterialParameters() {\n    const e = {\n        anchorPosition: me(this.symbolLayer.anchor, this.symbolLayer.anchorPosition),\n        rotation: this.symbolLayer.angle\n      },\n      t = this.symbol;\n    if (ce(t)) {\n      const {\n        screenLength: r,\n        minWorldLength: i,\n        maxWorldLength: s\n      } = t.verticalOffset;\n      e.verticalOffset = {\n        screenLength: c(r),\n        minWorldLength: i || 0,\n        maxWorldLength: null != s ? s : 1 / 0\n      };\n    }\n    this._context.screenSizePerspectiveEnabled && (e.screenSizePerspective = this._context.sharedResources.screenSizePerspectiveSettings), (0 !== e.rotation || this._drivenProperties.rotation) && (e.hasRotation = !0);\n    const r = !!has(\"enable-feature:non-occluded-hud\");\n    return e.occlusionTest = !r, e.occludedFragmentFade = r, e.horizonCullingEnabled = r && this._context.spherical, e.hasSlicePlane = this._context.slicePlaneEnabled, e;\n  }\n  _prepareResourcesPrimitive(e, t) {\n    const r = this._getOutlineSize();\n    if (he(t) && 0 === r) throw new Error(\"Nothing to render\");\n    if (this._outlineSize = r, e.color = this._getFillColor(), e.outlineColor = this._getOutlineColor(), e.outlineSize = this._outlineSize, null != this._context.sharedResources.textures) {\n      const r = this._context.sharedResources.textures.fromData(`${t}-icon`, () => J(t));\n      this._textureHandle = r, e.textureId = r.texture.id;\n    }\n    e.textureIsSignedDistanceField = !0, e.sampleSignedDistanceFieldTexelCenter = Z(t), e.distanceFieldBoundingBox = K;\n    const i = this._getIconSize();\n    this._size = [i, i], this._symbolTextureRatio = 1 / Q, this._createMaterialAndAddToStage(e, this._context.stage);\n  }\n  async _prepareResourcesHref(e, r, s) {\n    this._outlineSize = this._getOutlineSize(), e.color = this._getFillColor(), e.outlineColor = this._getOutlineColor(), e.outlineSize = this._outlineSize, e.textureIsSignedDistanceField = !1;\n    const o = this._getIconSize(),\n      a = o * this._context.graphicsCoreOwner.view.state.rasterPixelRatio;\n    if (null != this._context.sharedResources.textures) {\n      const l = await t(this._context.sharedResources.textures.fromUrl(r, a, {\n        signal: s\n      }));\n      if (!1 === l.ok) {\n        n(l.error);\n        throw new i(\"graphics3diconsymbollayer:request-failed\", `Failed to load (Request for icon resource failed: ${r})`);\n      }\n      this._textureHandle = l.value;\n      const c = l.value.texture;\n      this._size = de(c, o), e.textureId = c.id;\n    }\n    this._createMaterialAndAddToStage(e, this._context.stage);\n  }\n  async _prepareResourcesCIM(e, t, r) {\n    const {\n      OverrideHelper: i\n    } = await import(\"../../../../symbols/cim/OverrideHelper.js\");\n    if (this._overrideHelperClass = i, this._cimData = t, !this._context.sharedResources.cimSymbolRasterizer) {\n      const e = (await import(\"../../../../symbols/cim/CIMSymbolRasterizer.js\")).CIMSymbolRasterizer;\n      l(r), this._context.sharedResources.cimSymbolRasterizer || (this._context.sharedResources.cimSymbolRasterizer = new e(this._context.renderCoordsHelper.spatialReference));\n    }\n    const s = this._context.sharedResources.cimSymbolRasterizer,\n      o = [],\n      a = t,\n      n = a?.symbol;\n    v.fetchResources(n, s.resourceManager, o, r), v.fetchFonts(n, s.resourceManager, o);\n    const c = this._context.layer.fields ? this._context.layer.fields.map(e => e.toJSON()) : [],\n      h = this._context.renderCoordsHelper.spatialReference;\n    if (this._arcadeInfo = {\n      spatialReference: h,\n      fields: c,\n      geometryType: \"esriGeometryPoint\"\n    }, a?.primitiveOverrides && o.push(i.createRenderExpressions(a.primitiveOverrides, this._arcadeInfo)), o.length > 0 && (await Promise.all(o), l(r)), this._context.renderer && \"dictionary\" === this._context.renderer.type && this._context.renderer.scaleExpression) {\n      const e = this._context.renderer;\n      if (e.scaleExpression) {\n        const t = e.scaleExpression,\n          r = await b(t, this._context.layer.spatialReference, c),\n          {\n            default: i\n          } = await import(\"../../../2d/arcade/callExpressionWithFeature.js\");\n        this._cimScaleFactorOrFunction = (e, t, s) => {\n          const o = i(r, e, {\n            $view: s\n          }, \"esriGeometryPoint\", t);\n          return null !== o ? o : 1;\n        };\n      }\n    }\n    l(r), this._cimMaterialParametersInfo = e, this._cimMaterialParametersInfo.color = this._getFillColor(), this._cimMaterialParametersInfo.outlineColor = [0, 0, 0, 0], this._cimMaterialParametersInfo.outlineSize = 0, this._cimMaterialParametersInfo.textureIsSignedDistanceField = !1;\n  }\n  _getPrimitive() {\n    return this.symbolLayer.resource?.href ? null : this.symbolLayer.resource?.primitive ?? R;\n  }\n  _getOutlineSize() {\n    let e = 0;\n    const t = this.symbolLayer;\n    if (null != t.outline?.size) return Math.max(c(t.outline.size), 0);\n    return e = he(this._getPrimitive()) ? ae : 0, Math.max(e, 0);\n  }\n  _getOutlineColor() {\n    const t = this._getLayerOpacity(),\n      r = this.symbolLayer,\n      i = r?.outline?.color;\n    if (null != i) {\n      const r = e.toUnitRGB(i),\n        s = i.a * t;\n      return [r[0], r[1], r[2], s];\n    }\n    return [0, 0, 0, 0];\n  }\n  _getFillColor() {\n    if (he(this._getPrimitive())) return O;\n    const e = null == this._getPrimitive(),\n      t = this.symbolLayer?.material?.color;\n    return this._getCombinedOpacityAndColor(t, {\n      hasIntrinsicColor: e\n    });\n  }\n  _createMaterialAndAddToStage(e, t) {\n    const r = this._context.spherical;\n    if (this._cimData) {\n      this._fastUpdates = null;\n      let i = e.textureId ? this._cimSymbolMaterials.get(e.textureId) : null;\n      return i || (i = new ie(e, r), this._cimSymbolMaterials.set(e.textureId ?? 0, i), t.add(i)), i;\n    }\n    if (this._fastUpdates = N(this._context.renderer, this._fastVisualVariableConvertOptions()), this._fastUpdates && (e = {\n      ...e,\n      ...this._fastUpdates.materialParameters\n    }), this._materials[0] = new ie(e, r), t.add(this._materials[0]), this._context.graphicsCoreOwner.view.focusAreas.activePolygons.length > 0) {\n      e.isFocused = !1;\n      const i = this._context.stage.view.focusAreas.style;\n      e.color = z(e.color, i), e.outlineColor = z(e.outlineColor, i), this._materials[1] = new ie(e, r), t.add(this._materials[1]);\n    }\n    return this._materials[0];\n  }\n  _setDrapingDependentMaterialParameters() {\n    this.draped && (this._forEachMaterial(e => {\n      e.setParameters({\n        verticalOffset: null,\n        screenSizePerspective: null,\n        occlusionTest: !1,\n        hasSlicePlane: !1,\n        shaderPolygonOffset: 0,\n        draped: this.draped\n      });\n    }), this.layerOpacityChanged());\n  }\n  destroy() {\n    super.destroy(), this._patchTask = o(this._patchTask), this._forEachMaterial(e => this._context.stage.remove(e)), this._materials.length = 0, this._cimSymbolMaterials.clear(), this._cimSymbolTextures.forEach(e => this._context.stage.remove(e)), this._cimSymbolTextures.clear(), this._textureHandle = a(this._textureHandle);\n  }\n  _getScaleFactor(e, t) {\n    if (this._drivenProperties.size && e.size) {\n      const r = Array.from(e.size);\n      for (let e = 0; e < 3; e++) {\n        const t = r[e];\n        t && \"symbol-value\" !== t && \"proportional\" !== t && (r[e] = c(t));\n      }\n      if (\"symbol-value\" === r[0]) return 1;\n      if (isFinite(+r[0])) return +r[0] / t;\n      if (isFinite(+r[2])) return +r[2] / t;\n    }\n    return 1;\n  }\n  _getDrivenRotation(e) {\n    return this._drivenProperties.rotation ? e.heading ?? 0 : 0;\n  }\n  createGraphics3DGraphic(e) {\n    const t = e.graphic;\n    if (!this._validateGeometry(t.geometry)) return null;\n    let r,\n      i = [0, 0];\n    const s = G(t.geometry);\n    if (null == s) return this.logger.warn(`unsupported geometry type for text symbol: ${t.geometry.type}`), null;\n    const o = this._context.stage.view.focusAreas.containsGeometry(s);\n    if (this._cimData) {\n      if (!this._cimData.symbol) return null;\n      const e = this._generateTextureCIM(t),\n        s = {\n          textureId: e.id,\n          isFocused: o,\n          ...this._cimMaterialParametersInfo\n        };\n      r = this._createMaterialAndAddToStage(s, this._context.stage);\n      const a = this._context.graphicsCoreOwner.view.state.rasterPixelRatio;\n      i = [e.parameters.width / a, e.parameters.height / a];\n    } else i = this._size, r = o || 1 === this._materials.length ? this._materials[0] : this._materials[1];\n    if (null == s) return this.logger.warn(`unsupported geometry type for icon symbol: ${t.geometry.type}`), null;\n    const a = e.renderingInfo,\n      n = this._getVertexOpacityAndColor(a),\n      l = this._getDrivenRotation(a);\n    let c = 1;\n    if (!this._fastUpdates?.visualVariables.size) {\n      const e = i[0] > i[1] ? i[0] : i[1];\n      c = this._getScaleFactor(a, e);\n    }\n    c *= this._symbolTextureRatio;\n    const h = d(i[0] * c, i[1] * c),\n      u = this.setGraphicElevationContext(t);\n    return this.ensureDrapedStatus(\"on-the-ground\" === u.mode) && this._setDrapingDependentMaterialParameters(), this.draped ? this._createAsOverlay(t, s, r, n, l, h, e.layer.uid) : this._createAs3DShape(t, s, r, n, l, h, u, t.uid);\n  }\n  layerOpacityChanged() {\n    const e = this._getFillColor(),\n      t = this._getOutlineColor();\n    this._forEachMaterial(r => {\n      r.setParameters({\n        color: e\n      }), r.setParameters({\n        outlineColor: t\n      });\n    });\n  }\n  updateGeometry(e, t) {\n    if (this.draped || !this._validateGeometry(t)) return !1;\n    const {\n      elevationContext: r,\n      stageObject: i\n    } = e;\n    if (r.mode !== this.getGeometryElevationMode(t)) return !1;\n    const s = G(t);\n    if (!s) return !1;\n    const o = V(i, this._context, s, r);\n    if (null == o) return !1;\n    const a = H(this._context, s);\n    return i.geometries[0].localOrigin === a && (e.alignedSampledElevation = o, k(e, s, this._context.elevationProvider), !0);\n  }\n  layerElevationInfoChanged(e, t, r) {\n    const i = this._elevationContext.mode,\n      s = I(le.elevationModeChangeTypes, r, i);\n    if (s !== M.UPDATE) return s;\n    const o = T(i) || \"absolute-height\" === i;\n    return this.updateGraphics3DGraphicElevationInfo(e, t, () => o);\n  }\n  slicePlaneEnabledChanged() {\n    return this.draped || this._forEachMaterial(e => {\n      e.setParameters({\n        hasSlicePlane: this._context.slicePlaneEnabled\n      });\n    }), !0;\n  }\n  physicalBasedRenderingChanged() {\n    return !0;\n  }\n  get pixelRatioChanged() {\n    return null != this._getPrimitive();\n  }\n  applyRendererDiff(e, t) {\n    for (const r in e.diff) {\n      if (\"visualVariables\" !== r) return U.RecreateSymbol;\n      if (!$(this._fastUpdates, t, this._fastVisualVariableConvertOptions())) return U.RecreateSymbol;\n      this._materials[0]?.setParameters(this._fastUpdates.materialParameters);\n    }\n    return U.FastUpdate;\n  }\n  updateFocus(e, t) {\n    t.forEach(t => {\n      const r = this._context.stage.view.focusAreas.containsGeometry(t.graphic.geometry);\n      t.layers.forEach(i => {\n        if (i?.graphics3DSymbolLayer === this) {\n          i.stageObject.geometries.some(e => e.material.parameters.isFocused !== r) && e(t);\n        }\n      });\n    });\n  }\n  prepareSymbolLayerPatch(e) {\n    if (this._patchTask?.abort(), \"partial\" !== e.diff.type) return;\n    const t = e.diff.diff;\n    this._preparePatchResource(e, t), this._preparePatchRotation(e, t);\n  }\n  _preparePatchResource(e, s) {\n    if (!s.resource || \"partial\" !== s.resource.type) return;\n    const c = s.resource.diff;\n    if (\"complete\" !== c?.href?.type) return;\n    const h = c.href.newValue,\n      {\n        textures: u\n      } = this._context.sharedResources;\n    if (null == h || null == u || null != ue(h)) return;\n    const m = this._getIconSize(),\n      d = m * this._context.graphicsCoreOwner.view.state.pixelRatio;\n    e.symbolLayerStatePatches.push(() => {\n      this._patchTask = o(this._patchTask), this._patchTask = r(e => this._context.schedule(async (e, r) => {\n        const s = await t(u.fromUrl(h, d, {\n          signal: r\n        }));\n        l(r);\n        const o = !s.ok;\n        if (o && n(s.error), this._textureHandle = a(this._textureHandle), this._patchTask = null, o) {\n          this._forEachMaterial(e => {\n            e.visible = !1, e.setParameters({\n              textureId: null\n            });\n          });\n          const e = `Failed to load (Request for icon resource failed: ${h})`;\n          return void this.logger.error(new i(\"graphics3diconsymbollayer:request-failed\", e));\n        }\n        this._textureHandle = s.value;\n        const c = s.value.texture;\n        this._size = de(c, m), this._forEachMaterial(e => {\n          e.setParameters({\n            textureId: c.id\n          }), e.visible = !0;\n        });\n      }, e));\n    }), delete c.href;\n  }\n  _preparePatchRotation(e, t) {\n    if (!t.angle || \"complete\" !== t.angle.type) return;\n    const r = t.angle.newValue ?? 0,\n      i = 0 !== r || this._drivenProperties.rotation;\n    e.symbolLayerStatePatches.push(() => {\n      this._forEachMaterial(e => e.setParameters({\n        rotation: r,\n        hasRotation: i\n      }));\n    }), delete t.angle;\n  }\n  _defaultElevationInfoNoZ() {\n    return pe;\n  }\n  _createAs3DShape(e, t, r, i, s, o, a, n) {\n    const l = this.getFastUpdateAttrValues(e),\n      c = this._context.layer.uid,\n      h = this._context.stage.renderView.getObjectAndLayerIdColor({\n        graphicUid: n,\n        layerUid: c\n      }),\n      u = ee(r, {\n        normal: se,\n        color: i,\n        rotation: s,\n        size: o,\n        centerOffsetAndDistance: _e,\n        featureAttribute: l,\n        objectAndLayerIdColor: h\n      }),\n      m = B(this._context, t, u, a, n);\n    if (null == m) return null;\n    const d = new D(this, m.object, [u], null, null, j, a);\n    return d.alignedSampledElevation = m.sampledElevation, d.needsElevationUpdates = T(a.mode) || \"absolute-height\" === a.mode, d.getScreenSize = this._createScreenSizeGetter(o, l), d.calculateRelativeScreenBounds = e => r.calculateRelativeScreenBounds(d.getScreenSize(), 1, e), k(d, t, this._context.elevationProvider), d;\n  }\n  _createAsOverlay(e, t, r, i, s, o, a) {\n    r.renderPriority = this._renderPriority;\n    const n = _();\n    g(t, n, this._context.overlaySR), n[2] = Y;\n    const l = this._context.clippingExtent;\n    if (null != l && !x(l, n)) return null;\n    const c = this.getFastUpdateAttrValues(e),\n      h = this._context.stage.renderView.getObjectAndLayerIdColor({\n        graphicUid: e.uid,\n        layerUid: this._context.layer.uid\n      }),\n      u = ee(r, {\n        normal: se,\n        position: n,\n        color: i,\n        rotation: s,\n        size: o,\n        featureAttribute: c,\n        objectAndLayerIdColor: h\n      }),\n      m = new te(u, {\n        layerUid: a,\n        graphicUid: e.uid\n      }),\n      d = new E(this, [m], null, this._context.drapeSourceRenderer);\n    return d.getScreenSize = this._createScreenSizeGetter(o, c), d.calculateRelativeScreenBounds = e => r.calculateRelativeScreenBounds(d.getScreenSize(), 1, e), d;\n  }\n  _createScreenSizeGetter(e, t) {\n    var _this = this;\n    const r = this._outlineSize + 2;\n    if (this._fastUpdates && t) {\n      const i = e[0] / this._symbolTextureRatio,\n        s = e[1] / this._symbolTextureRatio;\n      return function () {\n        let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : p();\n        const [o, a] = W(fe, _this._fastUpdates.materialParameters, t);\n        return e[0] = o * i + r, e[1] = a * s + r, e;\n      };\n    }\n    const i = e[0] / this._symbolTextureRatio + r,\n      s = e[1] / this._symbolTextureRatio + r;\n    return function () {\n      let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : p();\n      return e[0] = i, e[1] = s, e;\n    };\n  }\n  _fastVisualVariableConvertOptions() {\n    const e = Math.max(this._size[0], this._size[1]),\n      t = f(e, e, e),\n      r = h(1),\n      i = e * r,\n      s = f(i, i, i);\n    return new q({\n      size: !0,\n      color: !0,\n      rotation: !0,\n      opacity: !1\n    }, t, s, r);\n  }\n  _forEachMaterial(e) {\n    this._materials.forEach(e), this._cimSymbolMaterials.forEach(e);\n  }\n  test() {\n    return {\n      ...super.test(),\n      material: this._materials[0]\n    };\n  }\n}\nfunction ce(e) {\n  return e && \"point-3d\" === e.type && e.hasVisibleVerticalOffset();\n}\nfunction he(e) {\n  return null != e && (\"cross\" === e || \"x\" === e);\n}\nfunction ue(e) {\n  const t = m(e);\n  return \"application/json\" === t?.mediaType ? t.data : void 0;\n}\nfunction me(e, t) {\n  return \"relative\" === e ? d((t.x || 0) + .5, .5 - (t.y || 0)) : e in L ? L[e] : L.center;\n}\nfunction de(_ref, t) {\n  let {\n    parameters: e\n  } = _ref;\n  const r = (e.width ?? 1) / (e.height ?? 1);\n  return r > 1 ? [t, Math.round(t / r)] : [Math.round(t * r), t];\n}\nle.PRIMITIVE_SIZE = ne, le.elevationModeChangeTypes = {\n  definedChanged: M.UPDATE,\n  staysOnTheGround: M.NONE,\n  onTheGroundChanged: M.RECREATE\n};\nconst pe = {\n    mode: \"relative-to-ground\",\n    offset: 0\n  },\n  _e = y(0, 0, 0, 1),\n  fe = _();\nexport { le as Graphics3DIconSymbolLayer };","map":{"version":3,"names":["e","result","t","createTask","r","i","has","clone","s","abortMaybe","o","releaseMaybe","a","throwIfAbortError","n","throwIfAborted","l","pt2px","c","px2pt","h","numericHash","u","dataComponents","m","fromValues","d","create","p","_","f","y","projectPointToVector","g","containsPoint","x","createRendererExpression","b","CIMSymbolHelper","v","evaluateValueOrFunction","S","scaleCIMSymbol","P","defaultPrimitive","R","Symbol3DAnchorPosition2D","w","getIconHref","C","focusAreaHUDColor","z","transparentUnit","O","perObjectElevationAligner","j","SymbolUpdateType","M","elevationModeChangeUpdateType","I","needsElevationUpdates2D","T","Graphics3DDrapedGraphicLayer","E","Graphics3DObject3DGraphicLayer","D","Graphics3DSymbolLayer","F","validateSymbolLayerSize","A","ApplyRendererDiffResult","U","namedAnchorToHUDMaterialAnchorPos","L","placePointOnGeometry","G","updateStageObjectGeometry","V","getLocalOriginForPoint","H","extendPointGraphicElevationContext","k","createStageObject","B","initFastSymbolUpdatesState","N","updateFastSymbolUpdatesState","$","evaluateModelTransformScale","W","ConvertOptions","q","createTexture","J","requiresHalfTexelOffset","Z","defaultBoundingBox","K","defaultSymbolSizeRatio","Q","defaultTexSize","X","drapedZ","Y","createPointGeometry","ee","RenderGeometry","te","Texture","re","HUDMaterial","ie","se","oe","ae","ne","le","getCachedSize","size","_getIconSize","constructor","_cimData","_overrideHelperClass","_arcadeInfo","_cimSymbolMaterials","Map","_cimSymbolTextures","_cimMaterialParametersInfo","_cimScaleFactorOrFunction","_size","_symbolTextureRatio","_outlineSize","_textureHandle","_patchTask","_elevationOptions","supportsOffsetAdjustment","supportsOnTheGround","doLoad","_validateOrThrow","_prepareMaterialParameters","_getPrimitive","_prepareResourcesPrimitive","symbolLayer","ue","_prepareResourcesCIM","JSON","parse","_prepareResourcesHref","_drivenProperties","Math","round","max","_generateTextureCIM","symbol","logger","error","primitiveOverrides","evaluateOverrides","geometryType","applyOverrides","stringify","get","_context","sharedResources","cimSymbolRasterizer","renderer","type","fieldMap","applyDictionaryTextOverrides","getEnvelope","resourceManager","width","height","rasterize","data","graphicsCoreOwner","view","state","rasterPixelRatio","anchorPosition","me","reloadable","ImageData","set","stage","add","anchor","rotation","angle","ce","screenLength","minWorldLength","maxWorldLength","verticalOffset","screenSizePerspectiveEnabled","screenSizePerspective","screenSizePerspectiveSettings","hasRotation","occlusionTest","occludedFragmentFade","horizonCullingEnabled","spherical","hasSlicePlane","slicePlaneEnabled","_getOutlineSize","he","Error","color","_getFillColor","outlineColor","_getOutlineColor","outlineSize","textures","fromData","textureId","texture","id","textureIsSignedDistanceField","sampleSignedDistanceFieldTexelCenter","distanceFieldBoundingBox","_createMaterialAndAddToStage","fromUrl","signal","ok","value","de","OverrideHelper","CIMSymbolRasterizer","renderCoordsHelper","spatialReference","fetchResources","fetchFonts","layer","fields","map","toJSON","push","createRenderExpressions","length","Promise","all","scaleExpression","default","$view","resource","href","primitive","outline","_getLayerOpacity","toUnitRGB","material","_getCombinedOpacityAndColor","hasIntrinsicColor","_fastUpdates","_fastVisualVariableConvertOptions","materialParameters","_materials","focusAreas","activePolygons","isFocused","style","_setDrapingDependentMaterialParameters","draped","_forEachMaterial","setParameters","shaderPolygonOffset","layerOpacityChanged","destroy","remove","clear","forEach","_getScaleFactor","Array","from","isFinite","_getDrivenRotation","heading","createGraphics3DGraphic","graphic","_validateGeometry","geometry","warn","containsGeometry","parameters","renderingInfo","_getVertexOpacityAndColor","visualVariables","setGraphicElevationContext","ensureDrapedStatus","mode","_createAsOverlay","uid","_createAs3DShape","updateGeometry","elevationContext","stageObject","getGeometryElevationMode","geometries","localOrigin","alignedSampledElevation","elevationProvider","layerElevationInfoChanged","_elevationContext","elevationModeChangeTypes","UPDATE","updateGraphics3DGraphicElevationInfo","slicePlaneEnabledChanged","physicalBasedRenderingChanged","pixelRatioChanged","applyRendererDiff","diff","RecreateSymbol","FastUpdate","updateFocus","layers","graphics3DSymbolLayer","some","prepareSymbolLayerPatch","abort","_preparePatchResource","_preparePatchRotation","newValue","pixelRatio","symbolLayerStatePatches","schedule","visible","_defaultElevationInfoNoZ","pe","getFastUpdateAttrValues","renderView","getObjectAndLayerIdColor","graphicUid","layerUid","normal","centerOffsetAndDistance","_e","featureAttribute","objectAndLayerIdColor","object","sampledElevation","needsElevationUpdates","getScreenSize","_createScreenSizeGetter","calculateRelativeScreenBounds","renderPriority","_renderPriority","overlaySR","clippingExtent","position","drapeSourceRenderer","_this","arguments","undefined","fe","opacity","test","hasVisibleVerticalOffset","mediaType","center","_ref","PRIMITIVE_SIZE","definedChanged","staysOnTheGround","NONE","onTheGroundChanged","RECREATE","offset","Graphics3DIconSymbolLayer"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DIconSymbolLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../../Color.js\";import{result as t,createTask as r}from\"../../../../core/asyncUtils.js\";import i from\"../../../../core/Error.js\";import has from\"../../../../core/has.js\";import{clone as s}from\"../../../../core/lang.js\";import{abortMaybe as o,releaseMaybe as a}from\"../../../../core/maybe.js\";import{throwIfAbortError as n,throwIfAborted as l}from\"../../../../core/promiseUtils.js\";import{pt2px as c,px2pt as h}from\"../../../../core/screenUtils.js\";import{numericHash as u}from\"../../../../core/string.js\";import{dataComponents as m}from\"../../../../core/urlUtils.js\";import{fromValues as d,create as p}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{create as _,fromValues as f}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{fromValues as y}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{projectPointToVector as g}from\"../../../../geometry/projection/projectPointToVector.js\";import{containsPoint as x}from\"../../../../geometry/support/aaBoundingBox.js\";import{createRendererExpression as b}from\"../../../../support/arcadeOnDemand.js\";import{CIMSymbolHelper as v}from\"../../../../symbols/cim/CIMSymbolHelper.js\";import{evaluateValueOrFunction as S}from\"../../../../symbols/cim/utils.js\";import{scaleCIMSymbol as P}from\"../../../../symbols/support/cimSymbolUtils.js\";import{defaultPrimitive as R}from\"../../../../symbols/support/IconSymbol3DLayerResource.js\";import{Symbol3DAnchorPosition2D as w}from\"../../../../symbols/support/Symbol3DAnchorPosition2D.js\";import{getIconHref as C}from\"../../../../symbols/support/utils.js\";import{focusAreaHUDColor as z}from\"../../../FocusAreas.js\";import{transparentUnit as O}from\"./constants.js\";import{perObjectElevationAligner as j}from\"./ElevationAligners.js\";import{SymbolUpdateType as M,elevationModeChangeUpdateType as I,needsElevationUpdates2D as T}from\"./elevationAlignmentUtils.js\";import{Graphics3DDrapedGraphicLayer as E}from\"./Graphics3DDrapedGraphicLayer.js\";import{Graphics3DObject3DGraphicLayer as D}from\"./Graphics3DObject3DGraphicLayer.js\";import{Graphics3DSymbolLayer as F}from\"./Graphics3DSymbolLayer.js\";import{validateSymbolLayerSize as A}from\"./graphicUtils.js\";import{ApplyRendererDiffResult as U}from\"./interfaces.js\";import{namedAnchorToHUDMaterialAnchorPos as L}from\"./placementUtils.js\";import{placePointOnGeometry as G,updateStageObjectGeometry as V,getLocalOriginForPoint as H,extendPointGraphicElevationContext as k,createStageObject as B}from\"./pointUtils.js\";import{initFastSymbolUpdatesState as N,updateFastSymbolUpdatesState as $,evaluateModelTransformScale as W,ConvertOptions as q}from\"../support/FastSymbolUpdates.js\";import{createTexture as J,requiresHalfTexelOffset as Z,defaultBoundingBox as K,defaultSymbolSizeRatio as Q,defaultTexSize as X}from\"../../support/engineContent/sdfPrimitives.js\";import{drapedZ as Y}from\"../../terrain/OverlayRenderer.js\";import{createPointGeometry as ee}from\"../../webgl-engine/lib/GeometryUtil.js\";import{RenderGeometry as te}from\"../../webgl-engine/lib/RenderGeometry.js\";import{Texture as re}from\"../../webgl-engine/lib/Texture.js\";import{HUDMaterial as ie}from\"../../webgl-engine/materials/HUDMaterial.js\";const se=f(0,0,1),oe=16,ae=1.5,ne=[X*Q,X*Q];class le extends F{getCachedSize(){return{size:this._getIconSize()}}constructor(e,t,r,i){super(e,t,r,i),this._cimData=null,this._overrideHelperClass=null,this._arcadeInfo=null,this._cimSymbolMaterials=new Map,this._cimSymbolTextures=new Map,this._cimMaterialParametersInfo=null,this._cimScaleFactorOrFunction=null,this._size=null,this._symbolTextureRatio=1,this._outlineSize=0,this._textureHandle=null,this._patchTask=null,this._elevationOptions={supportsOffsetAdjustment:!0,supportsOnTheGround:!0}}async doLoad(e){this._validateOrThrow();const t=this._prepareMaterialParameters(),r=this._getPrimitive();if(null!=r)this._prepareResourcesPrimitive(t,r);else{const r=C(this.symbolLayer),i=ue(r);null!=i?await this._prepareResourcesCIM(t,JSON.parse(i),e):await this._prepareResourcesHref(t,r,e)}}_validateOrThrow(){if(this._drivenProperties.size)return;const e=A(this._getIconSize());if(e)throw new i(\"graphics3diconsymbollayer:invalid-size\",e)}_getIconSize(){const e=this.symbolLayer,t=Math.round(null!=e.size?c(e.size):oe);return this._drivenProperties.size?Math.max(t,64):t}_generateTextureCIM(e){const t=this._overrideHelperClass;let r=this._cimData;if(t&&r&&r.symbol||this.logger.error(\"Can't create texture, CIM data is undefined\"),r.primitiveOverrides){r=s(r);const i=r.primitiveOverrides;t.evaluateOverrides(i,e,this._arcadeInfo.geometryType,null,null),t.applyOverrides(r.symbol,i)}const i=u(JSON.stringify(r));let o=this._cimSymbolTextures.get(i);if(o)return o;const a=this._context.sharedResources.cimSymbolRasterizer,n=this._context.renderer&&\"dictionary\"===this._context.renderer.type?this._context.renderer.fieldMap:null;n&&t.applyDictionaryTextOverrides(r.symbol,e,n,null);const l=null!=this._cimScaleFactorOrFunction?S(this._cimScaleFactorOrFunction,e):1;1!==l&&r.symbol&&P(r.symbol,l,!0);const c=v.getEnvelope(r,null,a.resourceManager);if(c?.width&&c.height){const e=c.x+c.width/2,t=c.y+c.height/2,i=a.rasterize({type:\"cim\",data:r},c.width,c.height,e,t,1,\"esriGeometryPoint\",0,null,this._context.graphicsCoreOwner.view.state.rasterPixelRatio),s=new w({x:-c.x/c.width-.5,y:(c.height+c.y)/c.height-.5});this._cimMaterialParametersInfo.anchorPosition=me(\"relative\",s),o=new re(i,{width:i?.width??1,height:i?.height??1,reloadable:!0})}else o=new re(new ImageData(1,1),{width:1,height:1,reloadable:!0});return this._cimSymbolTextures.set(i,o),this._context.stage.add(o),o}_prepareMaterialParameters(){const e={anchorPosition:me(this.symbolLayer.anchor,this.symbolLayer.anchorPosition),rotation:this.symbolLayer.angle},t=this.symbol;if(ce(t)){const{screenLength:r,minWorldLength:i,maxWorldLength:s}=t.verticalOffset;e.verticalOffset={screenLength:c(r),minWorldLength:i||0,maxWorldLength:null!=s?s:1/0}}this._context.screenSizePerspectiveEnabled&&(e.screenSizePerspective=this._context.sharedResources.screenSizePerspectiveSettings),(0!==e.rotation||this._drivenProperties.rotation)&&(e.hasRotation=!0);const r=!!has(\"enable-feature:non-occluded-hud\");return e.occlusionTest=!r,e.occludedFragmentFade=r,e.horizonCullingEnabled=r&&this._context.spherical,e.hasSlicePlane=this._context.slicePlaneEnabled,e}_prepareResourcesPrimitive(e,t){const r=this._getOutlineSize();if(he(t)&&0===r)throw new Error(\"Nothing to render\");if(this._outlineSize=r,e.color=this._getFillColor(),e.outlineColor=this._getOutlineColor(),e.outlineSize=this._outlineSize,null!=this._context.sharedResources.textures){const r=this._context.sharedResources.textures.fromData(`${t}-icon`,(()=>J(t)));this._textureHandle=r,e.textureId=r.texture.id}e.textureIsSignedDistanceField=!0,e.sampleSignedDistanceFieldTexelCenter=Z(t),e.distanceFieldBoundingBox=K;const i=this._getIconSize();this._size=[i,i],this._symbolTextureRatio=1/Q,this._createMaterialAndAddToStage(e,this._context.stage)}async _prepareResourcesHref(e,r,s){this._outlineSize=this._getOutlineSize(),e.color=this._getFillColor(),e.outlineColor=this._getOutlineColor(),e.outlineSize=this._outlineSize,e.textureIsSignedDistanceField=!1;const o=this._getIconSize(),a=o*this._context.graphicsCoreOwner.view.state.rasterPixelRatio;if(null!=this._context.sharedResources.textures){const l=await t(this._context.sharedResources.textures.fromUrl(r,a,{signal:s}));if(!1===l.ok){n(l.error);throw new i(\"graphics3diconsymbollayer:request-failed\",`Failed to load (Request for icon resource failed: ${r})`)}this._textureHandle=l.value;const c=l.value.texture;this._size=de(c,o),e.textureId=c.id}this._createMaterialAndAddToStage(e,this._context.stage)}async _prepareResourcesCIM(e,t,r){const{OverrideHelper:i}=await import(\"../../../../symbols/cim/OverrideHelper.js\");if(this._overrideHelperClass=i,this._cimData=t,!this._context.sharedResources.cimSymbolRasterizer){const e=(await import(\"../../../../symbols/cim/CIMSymbolRasterizer.js\")).CIMSymbolRasterizer;l(r),this._context.sharedResources.cimSymbolRasterizer||(this._context.sharedResources.cimSymbolRasterizer=new e(this._context.renderCoordsHelper.spatialReference))}const s=this._context.sharedResources.cimSymbolRasterizer,o=[],a=t,n=a?.symbol;v.fetchResources(n,s.resourceManager,o,r),v.fetchFonts(n,s.resourceManager,o);const c=this._context.layer.fields?this._context.layer.fields.map((e=>e.toJSON())):[],h=this._context.renderCoordsHelper.spatialReference;if(this._arcadeInfo={spatialReference:h,fields:c,geometryType:\"esriGeometryPoint\"},a?.primitiveOverrides&&o.push(i.createRenderExpressions(a.primitiveOverrides,this._arcadeInfo)),o.length>0&&(await Promise.all(o),l(r)),this._context.renderer&&\"dictionary\"===this._context.renderer.type&&this._context.renderer.scaleExpression){const e=this._context.renderer;if(e.scaleExpression){const t=e.scaleExpression,r=await b(t,this._context.layer.spatialReference,c),{default:i}=await import(\"../../../2d/arcade/callExpressionWithFeature.js\");this._cimScaleFactorOrFunction=(e,t,s)=>{const o=i(r,e,{$view:s},\"esriGeometryPoint\",t);return null!==o?o:1}}}l(r),this._cimMaterialParametersInfo=e,this._cimMaterialParametersInfo.color=this._getFillColor(),this._cimMaterialParametersInfo.outlineColor=[0,0,0,0],this._cimMaterialParametersInfo.outlineSize=0,this._cimMaterialParametersInfo.textureIsSignedDistanceField=!1}_getPrimitive(){return this.symbolLayer.resource?.href?null:this.symbolLayer.resource?.primitive??R}_getOutlineSize(){let e=0;const t=this.symbolLayer;if(null!=t.outline?.size)return Math.max(c(t.outline.size),0);return e=he(this._getPrimitive())?ae:0,Math.max(e,0)}_getOutlineColor(){const t=this._getLayerOpacity(),r=this.symbolLayer,i=r?.outline?.color;if(null!=i){const r=e.toUnitRGB(i),s=i.a*t;return[r[0],r[1],r[2],s]}return[0,0,0,0]}_getFillColor(){if(he(this._getPrimitive()))return O;const e=null==this._getPrimitive(),t=this.symbolLayer?.material?.color;return this._getCombinedOpacityAndColor(t,{hasIntrinsicColor:e})}_createMaterialAndAddToStage(e,t){const r=this._context.spherical;if(this._cimData){this._fastUpdates=null;let i=e.textureId?this._cimSymbolMaterials.get(e.textureId):null;return i||(i=new ie(e,r),this._cimSymbolMaterials.set(e.textureId??0,i),t.add(i)),i}if(this._fastUpdates=N(this._context.renderer,this._fastVisualVariableConvertOptions()),this._fastUpdates&&(e={...e,...this._fastUpdates.materialParameters}),this._materials[0]=new ie(e,r),t.add(this._materials[0]),this._context.graphicsCoreOwner.view.focusAreas.activePolygons.length>0){e.isFocused=!1;const i=this._context.stage.view.focusAreas.style;e.color=z(e.color,i),e.outlineColor=z(e.outlineColor,i),this._materials[1]=new ie(e,r),t.add(this._materials[1])}return this._materials[0]}_setDrapingDependentMaterialParameters(){this.draped&&(this._forEachMaterial((e=>{e.setParameters({verticalOffset:null,screenSizePerspective:null,occlusionTest:!1,hasSlicePlane:!1,shaderPolygonOffset:0,draped:this.draped})})),this.layerOpacityChanged())}destroy(){super.destroy(),this._patchTask=o(this._patchTask),this._forEachMaterial((e=>this._context.stage.remove(e))),this._materials.length=0,this._cimSymbolMaterials.clear(),this._cimSymbolTextures.forEach((e=>this._context.stage.remove(e))),this._cimSymbolTextures.clear(),this._textureHandle=a(this._textureHandle)}_getScaleFactor(e,t){if(this._drivenProperties.size&&e.size){const r=Array.from(e.size);for(let e=0;e<3;e++){const t=r[e];t&&\"symbol-value\"!==t&&\"proportional\"!==t&&(r[e]=c(t))}if(\"symbol-value\"===r[0])return 1;if(isFinite(+r[0]))return+r[0]/t;if(isFinite(+r[2]))return+r[2]/t}return 1}_getDrivenRotation(e){return this._drivenProperties.rotation?e.heading??0:0}createGraphics3DGraphic(e){const t=e.graphic;if(!this._validateGeometry(t.geometry))return null;let r,i=[0,0];const s=G(t.geometry);if(null==s)return this.logger.warn(`unsupported geometry type for text symbol: ${t.geometry.type}`),null;const o=this._context.stage.view.focusAreas.containsGeometry(s);if(this._cimData){if(!this._cimData.symbol)return null;const e=this._generateTextureCIM(t),s={textureId:e.id,isFocused:o,...this._cimMaterialParametersInfo};r=this._createMaterialAndAddToStage(s,this._context.stage);const a=this._context.graphicsCoreOwner.view.state.rasterPixelRatio;i=[e.parameters.width/a,e.parameters.height/a]}else i=this._size,r=o||1===this._materials.length?this._materials[0]:this._materials[1];if(null==s)return this.logger.warn(`unsupported geometry type for icon symbol: ${t.geometry.type}`),null;const a=e.renderingInfo,n=this._getVertexOpacityAndColor(a),l=this._getDrivenRotation(a);let c=1;if(!this._fastUpdates?.visualVariables.size){const e=i[0]>i[1]?i[0]:i[1];c=this._getScaleFactor(a,e)}c*=this._symbolTextureRatio;const h=d(i[0]*c,i[1]*c),u=this.setGraphicElevationContext(t);return this.ensureDrapedStatus(\"on-the-ground\"===u.mode)&&this._setDrapingDependentMaterialParameters(),this.draped?this._createAsOverlay(t,s,r,n,l,h,e.layer.uid):this._createAs3DShape(t,s,r,n,l,h,u,t.uid)}layerOpacityChanged(){const e=this._getFillColor(),t=this._getOutlineColor();this._forEachMaterial((r=>{r.setParameters({color:e}),r.setParameters({outlineColor:t})}))}updateGeometry(e,t){if(this.draped||!this._validateGeometry(t))return!1;const{elevationContext:r,stageObject:i}=e;if(r.mode!==this.getGeometryElevationMode(t))return!1;const s=G(t);if(!s)return!1;const o=V(i,this._context,s,r);if(null==o)return!1;const a=H(this._context,s);return i.geometries[0].localOrigin===a&&(e.alignedSampledElevation=o,k(e,s,this._context.elevationProvider),!0)}layerElevationInfoChanged(e,t,r){const i=this._elevationContext.mode,s=I(le.elevationModeChangeTypes,r,i);if(s!==M.UPDATE)return s;const o=T(i)||\"absolute-height\"===i;return this.updateGraphics3DGraphicElevationInfo(e,t,(()=>o))}slicePlaneEnabledChanged(){return this.draped||this._forEachMaterial((e=>{e.setParameters({hasSlicePlane:this._context.slicePlaneEnabled})})),!0}physicalBasedRenderingChanged(){return!0}get pixelRatioChanged(){return null!=this._getPrimitive()}applyRendererDiff(e,t){for(const r in e.diff){if(\"visualVariables\"!==r)return U.RecreateSymbol;if(!$(this._fastUpdates,t,this._fastVisualVariableConvertOptions()))return U.RecreateSymbol;this._materials[0]?.setParameters(this._fastUpdates.materialParameters)}return U.FastUpdate}updateFocus(e,t){t.forEach((t=>{const r=this._context.stage.view.focusAreas.containsGeometry(t.graphic.geometry);t.layers.forEach((i=>{if(i?.graphics3DSymbolLayer===this){i.stageObject.geometries.some((e=>e.material.parameters.isFocused!==r))&&e(t)}}))}))}prepareSymbolLayerPatch(e){if(this._patchTask?.abort(),\"partial\"!==e.diff.type)return;const t=e.diff.diff;this._preparePatchResource(e,t),this._preparePatchRotation(e,t)}_preparePatchResource(e,s){if(!s.resource||\"partial\"!==s.resource.type)return;const c=s.resource.diff;if(\"complete\"!==c?.href?.type)return;const h=c.href.newValue,{textures:u}=this._context.sharedResources;if(null==h||null==u||null!=ue(h))return;const m=this._getIconSize(),d=m*this._context.graphicsCoreOwner.view.state.pixelRatio;e.symbolLayerStatePatches.push((()=>{this._patchTask=o(this._patchTask),this._patchTask=r((e=>this._context.schedule((async(e,r)=>{const s=await t(u.fromUrl(h,d,{signal:r}));l(r);const o=!s.ok;if(o&&n(s.error),this._textureHandle=a(this._textureHandle),this._patchTask=null,o){this._forEachMaterial((e=>{e.visible=!1,e.setParameters({textureId:null})}));const e=`Failed to load (Request for icon resource failed: ${h})`;return void this.logger.error(new i(\"graphics3diconsymbollayer:request-failed\",e))}this._textureHandle=s.value;const c=s.value.texture;this._size=de(c,m),this._forEachMaterial((e=>{e.setParameters({textureId:c.id}),e.visible=!0}))}),e)))})),delete c.href}_preparePatchRotation(e,t){if(!t.angle||\"complete\"!==t.angle.type)return;const r=t.angle.newValue??0,i=0!==r||this._drivenProperties.rotation;e.symbolLayerStatePatches.push((()=>{this._forEachMaterial((e=>e.setParameters({rotation:r,hasRotation:i})))})),delete t.angle}_defaultElevationInfoNoZ(){return pe}_createAs3DShape(e,t,r,i,s,o,a,n){const l=this.getFastUpdateAttrValues(e),c=this._context.layer.uid,h=this._context.stage.renderView.getObjectAndLayerIdColor({graphicUid:n,layerUid:c}),u=ee(r,{normal:se,color:i,rotation:s,size:o,centerOffsetAndDistance:_e,featureAttribute:l,objectAndLayerIdColor:h}),m=B(this._context,t,u,a,n);if(null==m)return null;const d=new D(this,m.object,[u],null,null,j,a);return d.alignedSampledElevation=m.sampledElevation,d.needsElevationUpdates=T(a.mode)||\"absolute-height\"===a.mode,d.getScreenSize=this._createScreenSizeGetter(o,l),d.calculateRelativeScreenBounds=e=>r.calculateRelativeScreenBounds(d.getScreenSize(),1,e),k(d,t,this._context.elevationProvider),d}_createAsOverlay(e,t,r,i,s,o,a){r.renderPriority=this._renderPriority;const n=_();g(t,n,this._context.overlaySR),n[2]=Y;const l=this._context.clippingExtent;if(null!=l&&!x(l,n))return null;const c=this.getFastUpdateAttrValues(e),h=this._context.stage.renderView.getObjectAndLayerIdColor({graphicUid:e.uid,layerUid:this._context.layer.uid}),u=ee(r,{normal:se,position:n,color:i,rotation:s,size:o,featureAttribute:c,objectAndLayerIdColor:h}),m=new te(u,{layerUid:a,graphicUid:e.uid}),d=new E(this,[m],null,this._context.drapeSourceRenderer);return d.getScreenSize=this._createScreenSizeGetter(o,c),d.calculateRelativeScreenBounds=e=>r.calculateRelativeScreenBounds(d.getScreenSize(),1,e),d}_createScreenSizeGetter(e,t){const r=this._outlineSize+2;if(this._fastUpdates&&t){const i=e[0]/this._symbolTextureRatio,s=e[1]/this._symbolTextureRatio;return(e=p())=>{const[o,a]=W(fe,this._fastUpdates.materialParameters,t);return e[0]=o*i+r,e[1]=a*s+r,e}}const i=e[0]/this._symbolTextureRatio+r,s=e[1]/this._symbolTextureRatio+r;return(e=p())=>(e[0]=i,e[1]=s,e)}_fastVisualVariableConvertOptions(){const e=Math.max(this._size[0],this._size[1]),t=f(e,e,e),r=h(1),i=e*r,s=f(i,i,i);return new q({size:!0,color:!0,rotation:!0,opacity:!1},t,s,r)}_forEachMaterial(e){this._materials.forEach(e),this._cimSymbolMaterials.forEach(e)}test(){return{...super.test(),material:this._materials[0]}}}function ce(e){return e&&\"point-3d\"===e.type&&e.hasVisibleVerticalOffset()}function he(e){return null!=e&&(\"cross\"===e||\"x\"===e)}function ue(e){const t=m(e);return\"application/json\"===t?.mediaType?t.data:void 0}function me(e,t){return\"relative\"===e?d((t.x||0)+.5,.5-(t.y||0)):e in L?L[e]:L.center}function de({parameters:e},t){const r=(e.width??1)/(e.height??1);return r>1?[t,Math.round(t/r)]:[Math.round(t*r),t]}le.PRIMITIVE_SIZE=ne,le.elevationModeChangeTypes={definedChanged:M.UPDATE,staysOnTheGround:M.NONE,onTheGroundChanged:M.RECREATE};const pe={mode:\"relative-to-ground\",offset:0},_e=y(0,0,0,1),fe=_();export{le as Graphics3DIconSymbolLayer};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}