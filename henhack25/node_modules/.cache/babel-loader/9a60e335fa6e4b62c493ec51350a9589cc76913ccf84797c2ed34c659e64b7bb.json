{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../../../../../chunks/tslib.es6.js\";\nimport { maxHighlightReasons as i } from \"../../../definitions.js\";\nimport { VertexInput as e, location as o, ComputeVertexInput as s, FragmentInput as r, GraphShaderModule as h, define as l, option as n, uniform as d, FragmentOutput as g } from \"../../GraphShaderModule.js\";\nimport { Float as p, float as a, step as u, Vec4 as c, ifElse as m, greaterThan as y, Vec3 as w, Vec2 as f } from \"../../graph/glsl.js\";\nimport { EntityStorage as v } from \"./EntityStorage.js\";\nimport { ShaderHighlight as b } from \"./ShaderHighlight.js\";\nimport { ShaderHittest as H } from \"./ShaderHittest.js\";\nimport { getFilterBit as _, getHighlightBit as j, getBit as x, uvToClip as R } from \"./utils.js\";\nimport { ViewInfo as k } from \"./ViewInfo.js\";\nclass S extends e {}\nt([o(0, w)], S.prototype, \"id\", void 0), t([o(1, p)], S.prototype, \"bitset\", void 0), t([o(2, f)], S.prototype, \"pos\", void 0);\nclass q extends s {}\nt([o(14, f)], q.prototype, \"nextPos1\", void 0), t([o(15, f)], q.prototype, \"nextPos2\", void 0);\nclass P extends r {}\nclass B extends h {\n  clip(t, i) {\n    let e = new p(0);\n    const o = this.storage.getFilterFlags(t);\n    if (e = e.add(a(2).multiply(a(1).subtract(_(o, 0)))), this.inside ? e = e.add(a(2).multiply(a(1).subtract(_(o, 1)))) : this.outside ? e = e.add(a(2).multiply(_(o, 1))) : this.highlight && (e = e.add(a(2).multiply(a(1).subtract(this._checkHighlight(o))))), null != i) {\n      const t = new p(1).subtract(u(i.x, this.view.currentZoom)),\n        o = u(i.y, this.view.currentZoom);\n      e = e.add(new p(2).multiply(t.add(o)));\n    }\n    return e;\n  }\n  getFragmentOutput(t, i, e = new p(1 / 255)) {\n    const o = new g();\n    return o.fragColor = this._maybeWriteHittest(i) ?? this._maybeHighlight(t, e) ?? t, o;\n  }\n  _maybeHighlight(t, i) {\n    return this.highlight ? new c(t.rgb, u(i, t.a)) : null;\n  }\n  _checkHighlight(t) {\n    let e = this._checkHighlightBit(t, 0);\n    for (let o = 1; o < i; o++) e = e.add(this._checkHighlightBit(t, o));\n    return u(new p(.1), e.add(this.highlight.highlightAll));\n  }\n  _checkHighlightBit(t, i) {\n    return j(t, i).multiply(x(this.highlight.activeReasons, i));\n  }\n  maybeRunHittest(t, i, e) {\n    if (null == this.hittestRequest) return null;\n    const o = this.hittest(t, i, e);\n    let s = m(y(o, this.hittestRequest.distance), new p(2), new p(0));\n    const r = this.storage.getAttributeDataCoords(t.id),\n      h = R(r);\n    s = s.add(this.clip(t.id, t.zoomRange));\n    const l = new c(new p(1 / 255), 0, 0, 0);\n    return {\n      glPointSize: new p(1),\n      glPosition: new c(h, s, 1),\n      color: l\n    };\n  }\n  _maybeWriteHittest(t) {\n    return null != this.hittestRequest ? t.color : null;\n  }\n}\nt([l], B.prototype, \"inside\", void 0), t([l], B.prototype, \"outside\", void 0), t([n(b)], B.prototype, \"highlight\", void 0), t([d(v)], B.prototype, \"storage\", void 0), t([d(k)], B.prototype, \"view\", void 0), t([n(H)], B.prototype, \"hittestRequest\", void 0);\nexport { B as AFeatureShader, q as BaseHittestVertexInput, P as FeatureFragmentInput, S as FeatureVertexInput };","map":{"version":3,"names":["_","t","maxHighlightReasons","i","VertexInput","e","location","o","ComputeVertexInput","s","FragmentInput","r","GraphShaderModule","h","define","l","option","n","uniform","d","FragmentOutput","g","Float","p","float","a","step","u","Vec4","c","ifElse","m","greaterThan","y","Vec3","w","Vec2","f","EntityStorage","v","ShaderHighlight","b","ShaderHittest","H","getFilterBit","getHighlightBit","j","getBit","x","uvToClip","R","ViewInfo","k","S","prototype","q","P","B","clip","storage","getFilterFlags","add","multiply","subtract","inside","outside","highlight","_checkHighlight","view","currentZoom","getFragmentOutput","fragColor","_maybeWriteHittest","_maybeHighlight","rgb","_checkHighlightBit","highlightAll","activeReasons","maybeRunHittest","hittestRequest","hittest","distance","getAttributeDataCoords","id","zoomRange","glPointSize","glPosition","color","AFeatureShader","BaseHittestVertexInput","FeatureFragmentInput","FeatureVertexInput"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/AFeatureShader.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../../../../chunks/tslib.es6.js\";import{maxHighlightReasons as i}from\"../../../definitions.js\";import{VertexInput as e,location as o,ComputeVertexInput as s,FragmentInput as r,GraphShaderModule as h,define as l,option as n,uniform as d,FragmentOutput as g}from\"../../GraphShaderModule.js\";import{Float as p,float as a,step as u,Vec4 as c,ifElse as m,greaterThan as y,Vec3 as w,Vec2 as f}from\"../../graph/glsl.js\";import{EntityStorage as v}from\"./EntityStorage.js\";import{ShaderHighlight as b}from\"./ShaderHighlight.js\";import{ShaderHittest as H}from\"./ShaderHittest.js\";import{getFilterBit as _,getHighlightBit as j,getBit as x,uvToClip as R}from\"./utils.js\";import{ViewInfo as k}from\"./ViewInfo.js\";class S extends e{}t([o(0,w)],S.prototype,\"id\",void 0),t([o(1,p)],S.prototype,\"bitset\",void 0),t([o(2,f)],S.prototype,\"pos\",void 0);class q extends s{}t([o(14,f)],q.prototype,\"nextPos1\",void 0),t([o(15,f)],q.prototype,\"nextPos2\",void 0);class P extends r{}class B extends h{clip(t,i){let e=new p(0);const o=this.storage.getFilterFlags(t);if(e=e.add(a(2).multiply(a(1).subtract(_(o,0)))),this.inside?e=e.add(a(2).multiply(a(1).subtract(_(o,1)))):this.outside?e=e.add(a(2).multiply(_(o,1))):this.highlight&&(e=e.add(a(2).multiply(a(1).subtract(this._checkHighlight(o))))),null!=i){const t=new p(1).subtract(u(i.x,this.view.currentZoom)),o=u(i.y,this.view.currentZoom);e=e.add(new p(2).multiply(t.add(o)))}return e}getFragmentOutput(t,i,e=new p(1/255)){const o=new g;return o.fragColor=this._maybeWriteHittest(i)??this._maybeHighlight(t,e)??t,o}_maybeHighlight(t,i){return this.highlight?new c(t.rgb,u(i,t.a)):null}_checkHighlight(t){let e=this._checkHighlightBit(t,0);for(let o=1;o<i;o++)e=e.add(this._checkHighlightBit(t,o));return u(new p(.1),e.add(this.highlight.highlightAll))}_checkHighlightBit(t,i){return j(t,i).multiply(x(this.highlight.activeReasons,i))}maybeRunHittest(t,i,e){if(null==this.hittestRequest)return null;const o=this.hittest(t,i,e);let s=m(y(o,this.hittestRequest.distance),new p(2),new p(0));const r=this.storage.getAttributeDataCoords(t.id),h=R(r);s=s.add(this.clip(t.id,t.zoomRange));const l=new c(new p(1/255),0,0,0);return{glPointSize:new p(1),glPosition:new c(h,s,1),color:l}}_maybeWriteHittest(t){return null!=this.hittestRequest?t.color:null}}t([l],B.prototype,\"inside\",void 0),t([l],B.prototype,\"outside\",void 0),t([n(b)],B.prototype,\"highlight\",void 0),t([d(v)],B.prototype,\"storage\",void 0),t([d(k)],B.prototype,\"view\",void 0),t([n(H)],B.prototype,\"hittestRequest\",void 0);export{B as AFeatureShader,q as BaseHittestVertexInput,P as FeatureFragmentInput,S as FeatureVertexInput};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}