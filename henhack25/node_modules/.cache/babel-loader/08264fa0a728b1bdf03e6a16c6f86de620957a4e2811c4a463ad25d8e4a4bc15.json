{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from \"../../request.js\";\nimport t from \"../../core/Error.js\";\nimport { getOrCreateMapValue as r } from \"../../core/MapUtils.js\";\nimport { convertFromGeometry as i } from \"../../layers/graphics/featureConversionUtils.js\";\nimport n from \"../../layers/graphics/OptimizedGeometry.js\";\nimport { ProtoOutboundRelationshipFeatureCollectionAttributionIndexes as s, ProtoInboundFeatureCollectionAttributionNames as a, ProtoOutboundEntityFeatureCollectionAttributionIndexes as o } from \"../../rest/knowledgeGraph/ProtoFeatureCollection.js\";\nimport { getWasmInterface as l } from \"../../rest/knowledgeGraph/wasmInterface/knowledgeWasmAccess.js\";\nimport { EsriFieldTypes as c } from \"../../rest/knowledgeGraph/wasmInterface/WasmDataModelWrapperInterfaces.js\";\nimport { WasmQuantizeOriginPositionTypeCode as d, SqlTypeCode as u, IdArrayType as y } from \"../../rest/knowledgeGraph/wasmInterface/WasmSerializedLayerData.js\";\nimport { wasmToProtoFeatureCollection as f } from \"../../rest/knowledgeGraph/wasmInterface/wasmToFeatureFactories.js\";\nasync function p(e) {\n  const t = [],\n    r = {\n      generateAllSublayers: !1,\n      namedTypeDefinitions: new Map()\n    };\n  return e.entitiesUrl && t.push(E(e.entitiesUrl).then(e => {\n    I(e, r);\n  })), e.relationshipsUrl && t.push(E(e.relationshipsUrl).then(e => {\n    I(e, r);\n  })), await Promise.all(t), r;\n}\nasync function m(e, t) {\n  t ??= !1;\n  const r = {\n    generateAllSublayers: t,\n    namedTypeDefinitions: new Map()\n  };\n  return await k(e).then(e => {\n    M(e, r);\n  }), r;\n}\nasync function _(e, t, r) {\n  const i = await l(),\n    n = new i.FeatureCollection(),\n    s = new i.FeatureCollection();\n  try {\n    T(n, i, e, \"entities\", t, r), T(s, i, e, \"relationships\", t, r);\n    const a = new i.FeatureCollectionEncoder(),\n      o = new i.FeatureCollectionEncoder(),\n      l = C(n, a),\n      c = structuredClone(l),\n      d = C(s, o),\n      u = {\n        entitiesFC: c,\n        relationshipsFC: structuredClone(d)\n      };\n    return a.delete(), o.delete(), u;\n  } finally {\n    n.delete(), s.delete();\n  }\n}\nasync function w(e, t, r) {\n  const i = await l(),\n    n = new i.FeatureCollection();\n  try {\n    T(n, i, e, \"entities\", t, r);\n    const s = new i.FeatureCollectionEncoder(),\n      a = C(n, s),\n      o = structuredClone(a);\n    return s.delete(), o;\n  } finally {\n    n.delete();\n  }\n}\nasync function g(e, t, r) {\n  const i = await l(),\n    n = new i.FeatureCollection();\n  try {\n    T(n, i, e, \"relationships\", t, r);\n    const s = new i.FeatureCollectionEncoder(),\n      a = C(n, s),\n      o = structuredClone(a);\n    return s.delete(), o;\n  } finally {\n    n.delete();\n  }\n}\nasync function h(e) {\n  const r = await l(),\n    i = new r.MapOfObjectIdentifierSets();\n  b(i, r, e);\n  const n = new r.MapOfObjectIdentifierSetsEncoder();\n  try {\n    n.set_map_of_identifier_sets(i), n.encode();\n    const e = n.get_encoding_result();\n    if (0 !== e.error.error_code) throw new t(\"knowledge-graph:layer-support-utils\", e.error.error_message);\n    const r = structuredClone(e.get_byte_buffer());\n    return n.delete(), r;\n  } finally {\n    i.delete();\n  }\n}\nfunction T(e, t, r, n, a, l) {\n  e.version = \"\";\n  const y = new t.QueryResult(),\n    f = new t.FeatureResult(),\n    p = \"entities\" === n ? o : s;\n  f.unique_id_field = {\n    name: p[p.ELEMENTUID],\n    isSystemMaintained: !1\n  }, f.globalid_field_name = p[p.ELEMENTUID], f.geohash_field_name = \"\", f.geometry_properties = {\n    shapeAreaFieldName: \"\",\n    shapeLengthFieldName: \"\",\n    units: \"\"\n  }, f.spatial_reference = {\n    wkid: 4326,\n    latestWkid: 4326,\n    vcsWkid: 0,\n    latestVcsWkid: 0,\n    wkt: \"\"\n  }, f.exceeded_transfer_limit = !1, f.has_z = !1, f.has_m = !1, f.transform = {\n    quantizeOriginPosition: {\n      value: d.upperLeft\n    },\n    scale: {\n      xScale: 1e-9,\n      yScale: 1e-9,\n      mScale: 1e-4,\n      zScale: 1e-4\n    },\n    translate: {\n      xTranslate: -400,\n      yTranslate: -400,\n      mTranslate: -1e5,\n      zTranslate: -1e5\n    }\n  };\n  for (const i of Object.keys(p).filter(e => isNaN(Number(e)))) {\n    const e = new t.Field();\n    if (e.name = i, e.alias = i, e.sql_type = {\n      value: u.sqlTypeBigInt\n    }, \"entities\" === n) switch (i) {\n      case p[p.ELEMENTUID]:\n      case p[p.TYPENAME]:\n        e.field_type = {\n          value: c.esriFieldTypeString\n        };\n    } else switch (i) {\n      case p[p.ELEMENTUID]:\n      case p[p.TYPENAME]:\n      case s[s.FROMUID]:\n      case s[s.TOUID]:\n        e.field_type = {\n          value: c.esriFieldTypeString\n        };\n    }\n    e.domain = \"\", f.add_field(e), e.delete();\n  }\n  const m = new Map();\n  for (const i of a.dataModel.entityTypes) m.set(i.name, \"entities\");\n  for (const i of a.dataModel.relationshipTypes) m.set(i.name, \"relationships\");\n  for (const [o, c] of r.namedTypeDefinitions) if (n === m.get(o)) for (const e of c.members.values()) {\n    const r = new t.Feature();\n    for (const i of Object.keys(p).filter(e => isNaN(Number(e)))) if (\"entities\" === n) switch (i) {\n      case p[p.ELEMENTUID]:\n        r.add_attribute(e.id, t.esriFieldType.esriFieldTypeString);\n        break;\n      case p[p.TYPENAME]:\n        r.add_attribute(o, t.esriFieldType.esriFieldTypeString);\n    } else switch (i) {\n      case p[p.ELEMENTUID]:\n        r.add_attribute(e.id, t.esriFieldType.esriFieldTypeString);\n        break;\n      case s[s.FROMUID]:\n        r.add_attribute(l.has(e.id) ? l.get(e.id)[0] : \"\", t.esriFieldType.esriFieldTypeString);\n        break;\n      case s[s.TOUID]:\n        r.add_attribute(l.has(e.id) ? l.get(e.id)[1] : \"\", t.esriFieldType.esriFieldTypeString);\n        break;\n      case p[p.TYPENAME]:\n        r.add_attribute(o, t.esriFieldType.esriFieldTypeString);\n    }\n    let a;\n    if (e.linkChartLocation && \"x\" in e.linkChartLocation ? a = i(e.linkChartLocation) : e.linkChartLocation && (a = e.linkChartLocation), e.linkChartLocation && a) {\n      const e = new t.FeatureCollectionGeometry();\n      let i = !1;\n      switch (n) {\n        case \"entities\":\n          e.geometry_type = t.esriGeometryType.esriGeometryPoint, i = !0;\n          break;\n        case \"relationships\":\n          e.geometry_type = t.esriGeometryType.esriGeometryPolyline;\n      }\n      e.coords = new Float64Array(a.coords), e.lengths = new Uint32Array(i ? [1] : a.lengths), r.set_compressed_geometry(e), e.delete();\n    }\n    f.add_feature(r), r.delete();\n  }\n  switch (n) {\n    case \"entities\":\n      f.geometry_type = t.esriGeometryType.esriGeometryPoint;\n      break;\n    case \"relationships\":\n      f.geometry_type = t.esriGeometryType.esriGeometryPolyline;\n  }\n  return y.set_feature_result(f), e.set_query_result(y), f.delete(), y.delete(), e;\n}\nfunction b(e, t, r) {\n  for (const [i, n] of r.namedTypeDefinitions) {\n    if (!n.members || n.useAllData) continue;\n    const r = n.members.keys();\n    let s = !1,\n      a = !0;\n    const o = new t.ObjectIdArray(),\n      l = new t.StringArray(),\n      c = new t.GlobalIdArray(),\n      d = new t.IdentifierArray(),\n      u = new t.ObjectIdentifierSet();\n    for (const e of r) a && (s = !isNaN(Number(e)), a = !1), s ? o.add_objectid(Number(e)) : (l.add_string(e), c.add_globalid(e)), d.add_identifier(e);\n    u.set_oid_array(o), u.set_string_array(l), u.set_globalid_array(c), u.set_identifier_array(d), o.delete(), l.delete(), c.delete(), d.delete(), e.put_identifier_set(i, u), u.delete();\n  }\n  return e;\n}\nasync function E(t) {\n  const r = await e(t, {\n    responseType: \"array-buffer\"\n  });\n  return F(await r.data);\n}\nasync function F(e) {\n  const r = new (await l()).FeatureCollectionDecoder(),\n    i = r.decode(new Uint8Array(e));\n  if (0 !== i.error_code) throw new t(\"knowledge-graph:layer-support-utils\", i.error_message);\n  const n = r.get_feature_collection(),\n    s = f(n);\n  return r.delete(), s;\n}\nasync function k(t) {\n  const r = await e(t, {\n      responseType: \"array-buffer\"\n    }),\n    i = await r.data;\n  return A(new Uint8Array(i));\n}\nasync function A(e) {\n  const r = new (await l()).MapOfObjectIdentifierSetsDecoder(),\n    i = r.decode(new Uint8Array(e)),\n    n = new Map();\n  if (0 !== i.error_code) throw new t(\"knowledge-graph:layer-support-utils\", i.error_message);\n  const s = r.get_map_of_identifier_sets(),\n    a = s.keys,\n    o = a.size();\n  for (let l = 0; l < o; l++) {\n    const e = a.get(l),\n      r = s.query_identifier_set(e),\n      i = [];\n    if (r.id_array_type.value === y.GLOBALID_ARRAY) {\n      const e = r.get_globalid_array(),\n        t = e.count();\n      for (let r = 0; r < t; r++) i.push(e.get_globalid_at(r));\n    } else if (r.id_array_type.value === y.IDENTIFIER_ARRAY) {\n      const e = r.get_identifier_array(),\n        t = e.count();\n      for (let r = 0; r < t; r++) i.push(e.get_identifier_at(r).toString());\n    } else if (r.id_array_type.value === y.STRING_ARRAY) {\n      const e = r.get_string_array(),\n        t = e.count();\n      for (let r = 0; r < t; r++) i.push(e.get_string_at(r));\n    } else {\n      if (r.id_array_type.value !== y.OID_ARRAY) throw new t(\"knowledge-graph:layer-support-utils\", \"Tried to encode an unexpected ID Array type.\");\n      {\n        const e = r.get_oid_array(),\n          t = e.count();\n        for (let r = 0; r < t; r++) i.push(e.get_objectid_at(r).toString());\n      }\n    }\n    n.set(e, i);\n  }\n  return r.delete(), n;\n}\nfunction I(e, t) {\n  if (!e?.queryResult?.featureResult) return t;\n  const i = e.queryResult.featureResult.fieldNameToAttributeIndexMap;\n  for (const s of e.queryResult.featureResult.features) {\n    const e = s.attributes[i[a.TYPENAME]],\n      o = r(t.namedTypeDefinitions, e, () => ({\n        useAllData: !1,\n        members: new Map()\n      })),\n      l = s.attributes[i[a.ELEMENTUID]];\n    if (s.compressedGeometry?.coords?.length > 0) {\n      let e = s.compressedGeometry.lengths;\n      \"esriGeometryPoint\" === s.compressedGeometry.geometryType && (e = []), o.members.set(l, {\n        id: l,\n        linkChartLocation: new n(e, s.compressedGeometry.coords)\n      });\n    } else o.members.set(l, {\n      id: l\n    });\n  }\n  return t;\n}\nfunction M(e, t) {\n  for (const [i, n] of e) {\n    const e = r(t.namedTypeDefinitions, i, () => ({\n      useAllData: !1,\n      members: new Map()\n    }));\n    for (const t of n) e.members.has(t) || e.members.set(t, {\n      id: t\n    });\n  }\n  return t;\n}\nconst C = (e, r) => {\n    r.set_feature_collection(e), r.encode();\n    const i = r.get_encoding_result();\n    if (0 !== i.error.error_code) throw new t(\"knowledge-graph:layer-support-utils\", i.error.error_message);\n    return i.get_byte_buffer();\n  },\n  D = {\n    fetchAndConvertSerializedLinkChart: e => p(e)\n  };\nexport { I as addFeatureCollectionToInclusionDefinition, M as addIdMapToInclusionDefinition, F as deserializeFeatureCollection, A as deserializeIdCollectionMap, m as fetchAndConvertSerializedKnowledgeIdMap, p as fetchAndConvertSerializedLinkChart, E as fetchAndDeserializeFeatureCollection, k as fetchAndDeserializeIdCollectionMap, D as serializationUtilsModuleWrapper, _ as serializeInclusionDefinitionToAllPbf, w as serializeInclusionDefinitionToEntitiesPbf, h as serializeInclusionDefinitionToIdCollectionsMapPbf, g as serializeInclusionDefinitionToRelationshipsPbf, T as setFeatureCollectionProperties };","map":{"version":3,"names":["e","t","getOrCreateMapValue","r","convertFromGeometry","i","n","ProtoOutboundRelationshipFeatureCollectionAttributionIndexes","s","ProtoInboundFeatureCollectionAttributionNames","a","ProtoOutboundEntityFeatureCollectionAttributionIndexes","o","getWasmInterface","l","EsriFieldTypes","c","WasmQuantizeOriginPositionTypeCode","d","SqlTypeCode","u","IdArrayType","y","wasmToProtoFeatureCollection","f","p","generateAllSublayers","namedTypeDefinitions","Map","entitiesUrl","push","E","then","I","relationshipsUrl","Promise","all","m","k","M","_","FeatureCollection","T","FeatureCollectionEncoder","C","structuredClone","entitiesFC","relationshipsFC","delete","w","g","h","MapOfObjectIdentifierSets","b","MapOfObjectIdentifierSetsEncoder","set_map_of_identifier_sets","encode","get_encoding_result","error","error_code","error_message","get_byte_buffer","version","QueryResult","FeatureResult","unique_id_field","name","ELEMENTUID","isSystemMaintained","globalid_field_name","geohash_field_name","geometry_properties","shapeAreaFieldName","shapeLengthFieldName","units","spatial_reference","wkid","latestWkid","vcsWkid","latestVcsWkid","wkt","exceeded_transfer_limit","has_z","has_m","transform","quantizeOriginPosition","value","upperLeft","scale","xScale","yScale","mScale","zScale","translate","xTranslate","yTranslate","mTranslate","zTranslate","Object","keys","filter","isNaN","Number","Field","alias","sql_type","sqlTypeBigInt","TYPENAME","field_type","esriFieldTypeString","FROMUID","TOUID","domain","add_field","dataModel","entityTypes","set","relationshipTypes","get","members","values","Feature","add_attribute","id","esriFieldType","has","linkChartLocation","FeatureCollectionGeometry","geometry_type","esriGeometryType","esriGeometryPoint","esriGeometryPolyline","coords","Float64Array","lengths","Uint32Array","set_compressed_geometry","add_feature","set_feature_result","set_query_result","useAllData","ObjectIdArray","StringArray","GlobalIdArray","IdentifierArray","ObjectIdentifierSet","add_objectid","add_string","add_globalid","add_identifier","set_oid_array","set_string_array","set_globalid_array","set_identifier_array","put_identifier_set","responseType","F","data","FeatureCollectionDecoder","decode","Uint8Array","get_feature_collection","A","MapOfObjectIdentifierSetsDecoder","get_map_of_identifier_sets","size","query_identifier_set","id_array_type","GLOBALID_ARRAY","get_globalid_array","count","get_globalid_at","IDENTIFIER_ARRAY","get_identifier_array","get_identifier_at","toString","STRING_ARRAY","get_string_array","get_string_at","OID_ARRAY","get_oid_array","get_objectid_at","queryResult","featureResult","fieldNameToAttributeIndexMap","features","attributes","compressedGeometry","length","geometryType","set_feature_collection","D","fetchAndConvertSerializedLinkChart","addFeatureCollectionToInclusionDefinition","addIdMapToInclusionDefinition","deserializeFeatureCollection","deserializeIdCollectionMap","fetchAndConvertSerializedKnowledgeIdMap","fetchAndDeserializeFeatureCollection","fetchAndDeserializeIdCollectionMap","serializationUtilsModuleWrapper","serializeInclusionDefinitionToAllPbf","serializeInclusionDefinitionToEntitiesPbf","serializeInclusionDefinitionToIdCollectionsMapPbf","serializeInclusionDefinitionToRelationshipsPbf","setFeatureCollectionProperties"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/applications/KnowledgeStudio/resourceSerializationUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import t from\"../../core/Error.js\";import{getOrCreateMapValue as r}from\"../../core/MapUtils.js\";import{convertFromGeometry as i}from\"../../layers/graphics/featureConversionUtils.js\";import n from\"../../layers/graphics/OptimizedGeometry.js\";import{ProtoOutboundRelationshipFeatureCollectionAttributionIndexes as s,ProtoInboundFeatureCollectionAttributionNames as a,ProtoOutboundEntityFeatureCollectionAttributionIndexes as o}from\"../../rest/knowledgeGraph/ProtoFeatureCollection.js\";import{getWasmInterface as l}from\"../../rest/knowledgeGraph/wasmInterface/knowledgeWasmAccess.js\";import{EsriFieldTypes as c}from\"../../rest/knowledgeGraph/wasmInterface/WasmDataModelWrapperInterfaces.js\";import{WasmQuantizeOriginPositionTypeCode as d,SqlTypeCode as u,IdArrayType as y}from\"../../rest/knowledgeGraph/wasmInterface/WasmSerializedLayerData.js\";import{wasmToProtoFeatureCollection as f}from\"../../rest/knowledgeGraph/wasmInterface/wasmToFeatureFactories.js\";async function p(e){const t=[],r={generateAllSublayers:!1,namedTypeDefinitions:new Map};return e.entitiesUrl&&t.push(E(e.entitiesUrl).then((e=>{I(e,r)}))),e.relationshipsUrl&&t.push(E(e.relationshipsUrl).then((e=>{I(e,r)}))),await Promise.all(t),r}async function m(e,t){t??=!1;const r={generateAllSublayers:t,namedTypeDefinitions:new Map};return await k(e).then((e=>{M(e,r)})),r}async function _(e,t,r){const i=await l(),n=new i.FeatureCollection,s=new i.FeatureCollection;try{T(n,i,e,\"entities\",t,r),T(s,i,e,\"relationships\",t,r);const a=new i.FeatureCollectionEncoder,o=new i.FeatureCollectionEncoder,l=C(n,a),c=structuredClone(l),d=C(s,o),u={entitiesFC:c,relationshipsFC:structuredClone(d)};return a.delete(),o.delete(),u}finally{n.delete(),s.delete()}}async function w(e,t,r){const i=await l(),n=new i.FeatureCollection;try{T(n,i,e,\"entities\",t,r);const s=new i.FeatureCollectionEncoder,a=C(n,s),o=structuredClone(a);return s.delete(),o}finally{n.delete()}}async function g(e,t,r){const i=await l(),n=new i.FeatureCollection;try{T(n,i,e,\"relationships\",t,r);const s=new i.FeatureCollectionEncoder,a=C(n,s),o=structuredClone(a);return s.delete(),o}finally{n.delete()}}async function h(e){const r=await l(),i=new r.MapOfObjectIdentifierSets;b(i,r,e);const n=new r.MapOfObjectIdentifierSetsEncoder;try{n.set_map_of_identifier_sets(i),n.encode();const e=n.get_encoding_result();if(0!==e.error.error_code)throw new t(\"knowledge-graph:layer-support-utils\",e.error.error_message);const r=structuredClone(e.get_byte_buffer());return n.delete(),r}finally{i.delete()}}function T(e,t,r,n,a,l){e.version=\"\";const y=new t.QueryResult,f=new t.FeatureResult,p=\"entities\"===n?o:s;f.unique_id_field={name:p[p.ELEMENTUID],isSystemMaintained:!1},f.globalid_field_name=p[p.ELEMENTUID],f.geohash_field_name=\"\",f.geometry_properties={shapeAreaFieldName:\"\",shapeLengthFieldName:\"\",units:\"\"},f.spatial_reference={wkid:4326,latestWkid:4326,vcsWkid:0,latestVcsWkid:0,wkt:\"\"},f.exceeded_transfer_limit=!1,f.has_z=!1,f.has_m=!1,f.transform={quantizeOriginPosition:{value:d.upperLeft},scale:{xScale:1e-9,yScale:1e-9,mScale:1e-4,zScale:1e-4},translate:{xTranslate:-400,yTranslate:-400,mTranslate:-1e5,zTranslate:-1e5}};for(const i of Object.keys(p).filter((e=>isNaN(Number(e))))){const e=new t.Field;if(e.name=i,e.alias=i,e.sql_type={value:u.sqlTypeBigInt},\"entities\"===n)switch(i){case p[p.ELEMENTUID]:case p[p.TYPENAME]:e.field_type={value:c.esriFieldTypeString}}else switch(i){case p[p.ELEMENTUID]:case p[p.TYPENAME]:case s[s.FROMUID]:case s[s.TOUID]:e.field_type={value:c.esriFieldTypeString}}e.domain=\"\",f.add_field(e),e.delete()}const m=new Map;for(const i of a.dataModel.entityTypes)m.set(i.name,\"entities\");for(const i of a.dataModel.relationshipTypes)m.set(i.name,\"relationships\");for(const[o,c]of r.namedTypeDefinitions)if(n===m.get(o))for(const e of c.members.values()){const r=new t.Feature;for(const i of Object.keys(p).filter((e=>isNaN(Number(e)))))if(\"entities\"===n)switch(i){case p[p.ELEMENTUID]:r.add_attribute(e.id,t.esriFieldType.esriFieldTypeString);break;case p[p.TYPENAME]:r.add_attribute(o,t.esriFieldType.esriFieldTypeString)}else switch(i){case p[p.ELEMENTUID]:r.add_attribute(e.id,t.esriFieldType.esriFieldTypeString);break;case s[s.FROMUID]:r.add_attribute(l.has(e.id)?l.get(e.id)[0]:\"\",t.esriFieldType.esriFieldTypeString);break;case s[s.TOUID]:r.add_attribute(l.has(e.id)?l.get(e.id)[1]:\"\",t.esriFieldType.esriFieldTypeString);break;case p[p.TYPENAME]:r.add_attribute(o,t.esriFieldType.esriFieldTypeString)}let a;if(e.linkChartLocation&&\"x\"in e.linkChartLocation?a=i(e.linkChartLocation):e.linkChartLocation&&(a=e.linkChartLocation),e.linkChartLocation&&a){const e=new t.FeatureCollectionGeometry;let i=!1;switch(n){case\"entities\":e.geometry_type=t.esriGeometryType.esriGeometryPoint,i=!0;break;case\"relationships\":e.geometry_type=t.esriGeometryType.esriGeometryPolyline}e.coords=new Float64Array(a.coords),e.lengths=new Uint32Array(i?[1]:a.lengths),r.set_compressed_geometry(e),e.delete()}f.add_feature(r),r.delete()}switch(n){case\"entities\":f.geometry_type=t.esriGeometryType.esriGeometryPoint;break;case\"relationships\":f.geometry_type=t.esriGeometryType.esriGeometryPolyline}return y.set_feature_result(f),e.set_query_result(y),f.delete(),y.delete(),e}function b(e,t,r){for(const[i,n]of r.namedTypeDefinitions){if(!n.members||n.useAllData)continue;const r=n.members.keys();let s=!1,a=!0;const o=new t.ObjectIdArray,l=new t.StringArray,c=new t.GlobalIdArray,d=new t.IdentifierArray,u=new t.ObjectIdentifierSet;for(const e of r)a&&(s=!isNaN(Number(e)),a=!1),s?o.add_objectid(Number(e)):(l.add_string(e),c.add_globalid(e)),d.add_identifier(e);u.set_oid_array(o),u.set_string_array(l),u.set_globalid_array(c),u.set_identifier_array(d),o.delete(),l.delete(),c.delete(),d.delete(),e.put_identifier_set(i,u),u.delete()}return e}async function E(t){const r=await e(t,{responseType:\"array-buffer\"});return F(await r.data)}async function F(e){const r=new((await l()).FeatureCollectionDecoder),i=r.decode(new Uint8Array(e));if(0!==i.error_code)throw new t(\"knowledge-graph:layer-support-utils\",i.error_message);const n=r.get_feature_collection(),s=f(n);return r.delete(),s}async function k(t){const r=await e(t,{responseType:\"array-buffer\"}),i=await r.data;return A(new Uint8Array(i))}async function A(e){const r=new((await l()).MapOfObjectIdentifierSetsDecoder),i=r.decode(new Uint8Array(e)),n=new Map;if(0!==i.error_code)throw new t(\"knowledge-graph:layer-support-utils\",i.error_message);const s=r.get_map_of_identifier_sets(),a=s.keys,o=a.size();for(let l=0;l<o;l++){const e=a.get(l),r=s.query_identifier_set(e),i=[];if(r.id_array_type.value===y.GLOBALID_ARRAY){const e=r.get_globalid_array(),t=e.count();for(let r=0;r<t;r++)i.push(e.get_globalid_at(r))}else if(r.id_array_type.value===y.IDENTIFIER_ARRAY){const e=r.get_identifier_array(),t=e.count();for(let r=0;r<t;r++)i.push(e.get_identifier_at(r).toString())}else if(r.id_array_type.value===y.STRING_ARRAY){const e=r.get_string_array(),t=e.count();for(let r=0;r<t;r++)i.push(e.get_string_at(r))}else{if(r.id_array_type.value!==y.OID_ARRAY)throw new t(\"knowledge-graph:layer-support-utils\",\"Tried to encode an unexpected ID Array type.\");{const e=r.get_oid_array(),t=e.count();for(let r=0;r<t;r++)i.push(e.get_objectid_at(r).toString())}}n.set(e,i)}return r.delete(),n}function I(e,t){if(!e?.queryResult?.featureResult)return t;const i=e.queryResult.featureResult.fieldNameToAttributeIndexMap;for(const s of e.queryResult.featureResult.features){const e=s.attributes[i[a.TYPENAME]],o=r(t.namedTypeDefinitions,e,(()=>({useAllData:!1,members:new Map}))),l=s.attributes[i[a.ELEMENTUID]];if(s.compressedGeometry?.coords?.length>0){let e=s.compressedGeometry.lengths;\"esriGeometryPoint\"===s.compressedGeometry.geometryType&&(e=[]),o.members.set(l,{id:l,linkChartLocation:new n(e,s.compressedGeometry.coords)})}else o.members.set(l,{id:l})}return t}function M(e,t){for(const[i,n]of e){const e=r(t.namedTypeDefinitions,i,(()=>({useAllData:!1,members:new Map})));for(const t of n)e.members.has(t)||e.members.set(t,{id:t})}return t}const C=(e,r)=>{r.set_feature_collection(e),r.encode();const i=r.get_encoding_result();if(0!==i.error.error_code)throw new t(\"knowledge-graph:layer-support-utils\",i.error.error_message);return i.get_byte_buffer()},D={fetchAndConvertSerializedLinkChart:e=>p(e)};export{I as addFeatureCollectionToInclusionDefinition,M as addIdMapToInclusionDefinition,F as deserializeFeatureCollection,A as deserializeIdCollectionMap,m as fetchAndConvertSerializedKnowledgeIdMap,p as fetchAndConvertSerializedLinkChart,E as fetchAndDeserializeFeatureCollection,k as fetchAndDeserializeIdCollectionMap,D as serializationUtilsModuleWrapper,_ as serializeInclusionDefinitionToAllPbf,w as serializeInclusionDefinitionToEntitiesPbf,h as serializeInclusionDefinitionToIdCollectionsMapPbf,g as serializeInclusionDefinitionToRelationshipsPbf,T as setFeatureCollectionProperties};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}