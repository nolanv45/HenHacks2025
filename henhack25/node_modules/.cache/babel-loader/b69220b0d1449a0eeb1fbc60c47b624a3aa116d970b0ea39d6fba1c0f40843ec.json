{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { createResolver as e, ignoreAbortErrors as r } from \"../../../../core/promiseUtils.js\";\nimport { QueueProcessor as s } from \"../../../../core/QueueProcessor.js\";\nimport { UpdateTracking2D as t } from \"./UpdateTracking2D.js\";\nclass i {\n  constructor() {\n    this.type = \"override-batch\", this.messages = [], this._resovler = e();\n  }\n  get promise() {\n    return this._resovler.promise;\n  }\n  resolve() {\n    this._resovler.resolve();\n  }\n  add(e) {\n    this.messages.push(e);\n  }\n}\nclass o {\n  constructor(e) {\n    this.updateTracking = new t({\n      debugName: \"FeatureCommandQueue\"\n    }), this.process = e.process, this._queueProcessor = new s({\n      concurrency: 1,\n      process: async e => {\n        if (\"override-batch\" === e.type) {\n          const e = this._nextOverrideBatch;\n          if (null == e) throw new Error(\"InternalError: Override should be defined\");\n          return this._nextOverrideBatch = null, await this.process(e), void e.resolve();\n        }\n        return this.process(e);\n      }\n    });\n  }\n  destroy() {\n    this.updateTracking.destroy(), this._queueProcessor.destroy(), this.clear();\n  }\n  clear() {\n    this._queueProcessor.clear();\n  }\n  async push(e) {\n    return r(this.updateTracking.addPromise(this._doPush(e)));\n  }\n  async _doPush(e) {\n    const r = this._queueProcessor,\n      s = r.last();\n    switch (e.type) {\n      case \"update\":\n      case \"highlight\":\n        if (s?.type === e.type) return;\n        return r.push(e);\n      case \"override\":\n      case \"edit\":\n        return this._pushOverride(e);\n    }\n  }\n  _pushOverride(e) {\n    return null == this._nextOverrideBatch && (this._nextOverrideBatch = new i(), this._queueProcessor.push(this._nextOverrideBatch)), this._nextOverrideBatch.add(e), this._nextOverrideBatch.promise;\n  }\n}\nexport { o as FeatureCommandQueue, i as OverrideBatch };","map":{"version":3,"names":["createResolver","e","ignoreAbortErrors","r","QueueProcessor","s","UpdateTracking2D","t","i","constructor","type","messages","_resovler","promise","resolve","add","push","o","updateTracking","debugName","process","_queueProcessor","concurrency","_nextOverrideBatch","Error","destroy","clear","addPromise","_doPush","last","_pushOverride","FeatureCommandQueue","OverrideBatch"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/layers/support/FeatureCommandQueue.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{createResolver as e,ignoreAbortErrors as r}from\"../../../../core/promiseUtils.js\";import{QueueProcessor as s}from\"../../../../core/QueueProcessor.js\";import{UpdateTracking2D as t}from\"./UpdateTracking2D.js\";class i{constructor(){this.type=\"override-batch\",this.messages=[],this._resovler=e()}get promise(){return this._resovler.promise}resolve(){this._resovler.resolve()}add(e){this.messages.push(e)}}class o{constructor(e){this.updateTracking=new t({debugName:\"FeatureCommandQueue\"}),this.process=e.process,this._queueProcessor=new s({concurrency:1,process:async e=>{if(\"override-batch\"===e.type){const e=this._nextOverrideBatch;if(null==e)throw new Error(\"InternalError: Override should be defined\");return this._nextOverrideBatch=null,await this.process(e),void e.resolve()}return this.process(e)}})}destroy(){this.updateTracking.destroy(),this._queueProcessor.destroy(),this.clear()}clear(){this._queueProcessor.clear()}async push(e){return r(this.updateTracking.addPromise(this._doPush(e)))}async _doPush(e){const r=this._queueProcessor,s=r.last();switch(e.type){case\"update\":case\"highlight\":if(s?.type===e.type)return;return r.push(e);case\"override\":case\"edit\":return this._pushOverride(e)}}_pushOverride(e){return null==this._nextOverrideBatch&&(this._nextOverrideBatch=new i,this._queueProcessor.push(this._nextOverrideBatch)),this._nextOverrideBatch.add(e),this._nextOverrideBatch.promise}}export{o as FeatureCommandQueue,i as OverrideBatch};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,cAAc,IAAIC,CAAC,EAACC,iBAAiB,IAAIC,CAAC,QAAK,kCAAkC;AAAC,SAAOC,cAAc,IAAIC,CAAC,QAAK,oCAAoC;AAAC,SAAOC,gBAAgB,IAAIC,CAAC,QAAK,uBAAuB;AAAC,MAAMC,CAAC;EAACC,WAAWA,CAAA,EAAE;IAAC,IAAI,CAACC,IAAI,GAAC,gBAAgB,EAAC,IAAI,CAACC,QAAQ,GAAC,EAAE,EAAC,IAAI,CAACC,SAAS,GAACX,CAAC,CAAC,CAAC;EAAA;EAAC,IAAIY,OAAOA,CAAA,EAAE;IAAC,OAAO,IAAI,CAACD,SAAS,CAACC,OAAO;EAAA;EAACC,OAAOA,CAAA,EAAE;IAAC,IAAI,CAACF,SAAS,CAACE,OAAO,CAAC,CAAC;EAAA;EAACC,GAAGA,CAACd,CAAC,EAAC;IAAC,IAAI,CAACU,QAAQ,CAACK,IAAI,CAACf,CAAC,CAAC;EAAA;AAAC;AAAC,MAAMgB,CAAC;EAACR,WAAWA,CAACR,CAAC,EAAC;IAAC,IAAI,CAACiB,cAAc,GAAC,IAAIX,CAAC,CAAC;MAACY,SAAS,EAAC;IAAqB,CAAC,CAAC,EAAC,IAAI,CAACC,OAAO,GAACnB,CAAC,CAACmB,OAAO,EAAC,IAAI,CAACC,eAAe,GAAC,IAAIhB,CAAC,CAAC;MAACiB,WAAW,EAAC,CAAC;MAACF,OAAO,EAAC,MAAMnB,CAAC,IAAE;QAAC,IAAG,gBAAgB,KAAGA,CAAC,CAACS,IAAI,EAAC;UAAC,MAAMT,CAAC,GAAC,IAAI,CAACsB,kBAAkB;UAAC,IAAG,IAAI,IAAEtB,CAAC,EAAC,MAAM,IAAIuB,KAAK,CAAC,2CAA2C,CAAC;UAAC,OAAO,IAAI,CAACD,kBAAkB,GAAC,IAAI,EAAC,MAAM,IAAI,CAACH,OAAO,CAACnB,CAAC,CAAC,EAAC,KAAKA,CAAC,CAACa,OAAO,CAAC,CAAC;QAAA;QAAC,OAAO,IAAI,CAACM,OAAO,CAACnB,CAAC,CAAC;MAAA;IAAC,CAAC,CAAC;EAAA;EAACwB,OAAOA,CAAA,EAAE;IAAC,IAAI,CAACP,cAAc,CAACO,OAAO,CAAC,CAAC,EAAC,IAAI,CAACJ,eAAe,CAACI,OAAO,CAAC,CAAC,EAAC,IAAI,CAACC,KAAK,CAAC,CAAC;EAAA;EAACA,KAAKA,CAAA,EAAE;IAAC,IAAI,CAACL,eAAe,CAACK,KAAK,CAAC,CAAC;EAAA;EAAC,MAAMV,IAAIA,CAACf,CAAC,EAAC;IAAC,OAAOE,CAAC,CAAC,IAAI,CAACe,cAAc,CAACS,UAAU,CAAC,IAAI,CAACC,OAAO,CAAC3B,CAAC,CAAC,CAAC,CAAC;EAAA;EAAC,MAAM2B,OAAOA,CAAC3B,CAAC,EAAC;IAAC,MAAME,CAAC,GAAC,IAAI,CAACkB,eAAe;MAAChB,CAAC,GAACF,CAAC,CAAC0B,IAAI,CAAC,CAAC;IAAC,QAAO5B,CAAC,CAACS,IAAI;MAAE,KAAI,QAAQ;MAAC,KAAI,WAAW;QAAC,IAAGL,CAAC,EAAEK,IAAI,KAAGT,CAAC,CAACS,IAAI,EAAC;QAAO,OAAOP,CAAC,CAACa,IAAI,CAACf,CAAC,CAAC;MAAC,KAAI,UAAU;MAAC,KAAI,MAAM;QAAC,OAAO,IAAI,CAAC6B,aAAa,CAAC7B,CAAC,CAAC;IAAA;EAAC;EAAC6B,aAAaA,CAAC7B,CAAC,EAAC;IAAC,OAAO,IAAI,IAAE,IAAI,CAACsB,kBAAkB,KAAG,IAAI,CAACA,kBAAkB,GAAC,IAAIf,CAAC,CAAD,CAAC,EAAC,IAAI,CAACa,eAAe,CAACL,IAAI,CAAC,IAAI,CAACO,kBAAkB,CAAC,CAAC,EAAC,IAAI,CAACA,kBAAkB,CAACR,GAAG,CAACd,CAAC,CAAC,EAAC,IAAI,CAACsB,kBAAkB,CAACV,OAAO;EAAA;AAAC;AAAC,SAAOI,CAAC,IAAIc,mBAAmB,EAACvB,CAAC,IAAIwB,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}