{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from \"../request.js\";\nimport { ModuleError as t, ModuleErrorCodes as r } from \"./executionError.js\";\nimport { parseScript as o } from \"./parser.js\";\nimport s from \"./featureset/support/RecentlyUsedCache.js\";\nimport i from \"../portal/Portal.js\";\nclass l {\n  constructor(e) {\n    this.portalUri = e;\n  }\n  normalizeModuleUri(e) {\n    const o = /^[a-z0-9A-Z]+(@[0-9]+\\.[0-9]+\\.[0-9]+)?([?|/].*)?$/gi,\n      s = /(?<portalurl>.+)\\/home\\/item\\.html\\?id=(?<itemid>.+)$/gi,\n      c = /(?<portalurl>.+)\\/sharing\\/rest\\/content\\/users\\/[a-zA-Z0-9]+\\/items\\/(?<itemid>.+)$/gi,\n      u = /(?<portalurl>.+)\\/sharing\\/rest\\/content\\/items\\/(?<itemid>.+)$/gi,\n      n = /(?<itemid>.*)@(?<versionstring>[0-9]+\\.[0-9]+\\.[0-9]+)([?|/].*)?$/gi;\n    if (e.startsWith(\"portal+\")) {\n      let l = e.slice(7),\n        a = \"\",\n        m = l,\n        d = !1;\n      for (const e of [s, u, c]) {\n        const t = e.exec(l);\n        if (null !== t) {\n          const e = t.groups;\n          m = e.itemid, a = e.portalurl, d = !0;\n          break;\n        }\n      }\n      if (!1 === d) {\n        if (!o.test(l)) throw new t(r.UnsupportedUriProtocol, {\n          uri: e\n        });\n        m = l, a = this.portalUri;\n      }\n      m.includes(\"/\") && (m = m.split(\"/\")[0]), m.includes(\"?\") && (m = m.split(\"?\")[0]);\n      let h = \"current\";\n      const p = n.exec(m);\n      if (null !== p) {\n        const e = p.groups;\n        m = e.itemid, h = e.versionstring;\n      }\n      return l = new i({\n        url: a\n      }).restUrl + \"/content/items/\" + m + \"/resources/\" + h + \".arc\", {\n        url: l,\n        scheme: \"portal\",\n        uri: \"PO:\" + l\n      };\n    }\n    if (e.startsWith(\"mock\")) {\n      if (\"mock\" === e) {\n        return {\n          url: \"\",\n          scheme: \"mock\",\n          data: '\\n      export var hello = 1;\\n      export function helloWorld() {\\n          return \"Hello World \" + hello;\\n      }\\n  ',\n          uri: \"mock\"\n        };\n      }\n      const t = e.replace(\"mock:\", \"\");\n      if (void 0 !== l.mocks[t]) return {\n        url: \"\",\n        scheme: \"mock\",\n        data: l.mocks[t],\n        uri: e\n      };\n    }\n    throw new t(r.UnrecognizedUri, {\n      uri: e\n    });\n  }\n  async fetchModule(e) {\n    const t = l.cachedModules.getFromCache(e.uri);\n    if (t) return t;\n    const r = this.fetchSource(e);\n    l.cachedModules.addToCache(e.uri, r);\n    let o = null;\n    try {\n      o = await r;\n    } catch (s) {\n      throw l.cachedModules.removeFromCache(e.uri), s;\n    }\n    return o;\n  }\n  async fetchSource(s) {\n    if (\"portal\" === s.scheme) {\n      const t = await e(s.url, {\n        responseType: \"text\",\n        query: {}\n      });\n      if (t.data) return o(t.data, []);\n    }\n    if (\"mock\" === s.scheme) return o(s.data ?? \"\", []);\n    throw new t(r.UnsupportedUriProtocol);\n  }\n  static create(e) {\n    return new l(e);\n  }\n  static getDefault() {\n    return this._default ?? (l._default = l._moduleResolverFactory());\n  }\n  static set moduleResolverClass(e) {\n    this._moduleResolverFactory = e, this._default = null;\n  }\n}\nl.mocks = {}, l.cachedModules = new s(30), l._default = null, l._moduleResolverFactory = () => {\n  const e = i.getDefault();\n  return new l(e.url);\n};\nexport { l as ArcadeModuleResolver };","map":{"version":3,"names":["e","ModuleError","t","ModuleErrorCodes","r","parseScript","o","s","i","l","constructor","portalUri","normalizeModuleUri","c","u","n","startsWith","slice","a","m","d","exec","groups","itemid","portalurl","test","UnsupportedUriProtocol","uri","includes","split","h","p","versionstring","url","restUrl","scheme","data","replace","mocks","UnrecognizedUri","fetchModule","cachedModules","getFromCache","fetchSource","addToCache","removeFromCache","responseType","query","create","getDefault","_default","_moduleResolverFactory","moduleResolverClass","ArcadeModuleResolver"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/arcade/ArcadeModuleResolver.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../request.js\";import{ModuleError as t,ModuleErrorCodes as r}from\"./executionError.js\";import{parseScript as o}from\"./parser.js\";import s from\"./featureset/support/RecentlyUsedCache.js\";import i from\"../portal/Portal.js\";class l{constructor(e){this.portalUri=e}normalizeModuleUri(e){const o=/^[a-z0-9A-Z]+(@[0-9]+\\.[0-9]+\\.[0-9]+)?([?|/].*)?$/gi,s=/(?<portalurl>.+)\\/home\\/item\\.html\\?id=(?<itemid>.+)$/gi,c=/(?<portalurl>.+)\\/sharing\\/rest\\/content\\/users\\/[a-zA-Z0-9]+\\/items\\/(?<itemid>.+)$/gi,u=/(?<portalurl>.+)\\/sharing\\/rest\\/content\\/items\\/(?<itemid>.+)$/gi,n=/(?<itemid>.*)@(?<versionstring>[0-9]+\\.[0-9]+\\.[0-9]+)([?|/].*)?$/gi;if(e.startsWith(\"portal+\")){let l=e.slice(7),a=\"\",m=l,d=!1;for(const e of[s,u,c]){const t=e.exec(l);if(null!==t){const e=t.groups;m=e.itemid,a=e.portalurl,d=!0;break}}if(!1===d){if(!o.test(l))throw new t(r.UnsupportedUriProtocol,{uri:e});m=l,a=this.portalUri}m.includes(\"/\")&&(m=m.split(\"/\")[0]),m.includes(\"?\")&&(m=m.split(\"?\")[0]);let h=\"current\";const p=n.exec(m);if(null!==p){const e=p.groups;m=e.itemid,h=e.versionstring}return l=new i({url:a}).restUrl+\"/content/items/\"+m+\"/resources/\"+h+\".arc\",{url:l,scheme:\"portal\",uri:\"PO:\"+l}}if(e.startsWith(\"mock\")){if(\"mock\"===e){return{url:\"\",scheme:\"mock\",data:'\\n      export var hello = 1;\\n      export function helloWorld() {\\n          return \"Hello World \" + hello;\\n      }\\n  ',uri:\"mock\"}}const t=e.replace(\"mock:\",\"\");if(void 0!==l.mocks[t])return{url:\"\",scheme:\"mock\",data:l.mocks[t],uri:e}}throw new t(r.UnrecognizedUri,{uri:e})}async fetchModule(e){const t=l.cachedModules.getFromCache(e.uri);if(t)return t;const r=this.fetchSource(e);l.cachedModules.addToCache(e.uri,r);let o=null;try{o=await r}catch(s){throw l.cachedModules.removeFromCache(e.uri),s}return o}async fetchSource(s){if(\"portal\"===s.scheme){const t=await e(s.url,{responseType:\"text\",query:{}});if(t.data)return o(t.data,[])}if(\"mock\"===s.scheme)return o(s.data??\"\",[]);throw new t(r.UnsupportedUriProtocol)}static create(e){return new l(e)}static getDefault(){return this._default??(l._default=l._moduleResolverFactory())}static set moduleResolverClass(e){this._moduleResolverFactory=e,this._default=null}}l.mocks={},l.cachedModules=new s(30),l._default=null,l._moduleResolverFactory=()=>{const e=i.getDefault();return new l(e.url)};export{l as ArcadeModuleResolver};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}