{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../../chunks/tslib.es6.js\";\nimport e from \"../../../../Graphic.js\";\nimport i from \"../../../../core/Accessor.js\";\nimport r from \"../../../../core/Logger.js\";\nimport { isAbortError as s } from \"../../../../core/promiseUtils.js\";\nimport { property as a } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/RandomLCG.js\";\nimport { subclass as o } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { mosaicPixelData as p } from \"../../../../layers/support/rasterFunctions/pixelUtils.js\";\nimport { BitmapContainer as n } from \"../../engine/BitmapContainer.js\";\nimport { Container as l } from \"../../engine/Container.js\";\nimport c from \"../../engine/ImageryBitmapSource.js\";\nimport h from \"../support/ExportStrategy.js\";\nlet m = class extends i {\n  constructor() {\n    super(...arguments), this.attached = !1, this.container = new l(), this.updateRequested = !1, this.type = \"imagery\", this._bitmapView = new n();\n  }\n  destroy() {\n    this.attached && (this.detach(), this.attached = !1), this.updateRequested = !1;\n  }\n  get updating() {\n    return !this.attached || this.isUpdating();\n  }\n  update(t) {\n    this.strategy.update(t).catch(t => {\n      s(t) || r.getLogger(this).error(t);\n    });\n  }\n  hitTest(t) {\n    return new e({\n      attributes: {},\n      geometry: t.clone(),\n      layer: this.layer\n    });\n  }\n  attach() {\n    this.container.addChild(this._bitmapView);\n    const t = this.layer.version >= 10,\n      e = this.layer.version >= 10.1 ? this.layer.imageMaxHeight : 2048,\n      i = this.layer.version >= 10.1 ? this.layer.imageMaxWidth : 2048;\n    this.strategy = new h({\n      container: this._bitmapView,\n      imageNormalizationSupported: t,\n      imageMaxHeight: e,\n      imageMaxWidth: i,\n      fetchSource: this._fetchImage.bind(this),\n      requestUpdate: () => this.requestUpdate()\n    });\n  }\n  detach() {\n    this.strategy.destroy(), this._bitmapView.removeAllChildren(), this.container.removeAllChildren(), this.updateRequested = !1;\n  }\n  redraw() {\n    this.strategy.updateExports(async t => {\n      const {\n        source: e\n      } = t;\n      if (!e || e instanceof ImageBitmap) return;\n      const i = await this.layer.applyRenderer({\n        extent: e.extent,\n        pixelBlock: e.originalPixelBlock ?? e.pixelBlock\n      });\n      e.filter = t => this.layer.pixelFilter ? this.layer.applyFilter(t) : {\n        ...i,\n        extent: e.extent\n      };\n    }).catch(t => {\n      s(t) || r.getLogger(this).error(t);\n    });\n  }\n  requestUpdate() {\n    this.updateRequested || (this.updateRequested = !0, this.view.requestUpdate());\n  }\n  isUpdating() {\n    return this.strategy.updating || this.updateRequested;\n  }\n  getPixelData() {\n    if (this.updating) return null;\n    const t = this.strategy.bitmaps;\n    if (1 === t.length && t[0].source) return {\n      extent: t[0].source.extent,\n      pixelBlock: t[0].source.originalPixelBlock\n    };\n    if (t.length > 1) {\n      const e = this.view.extent,\n        i = t.map(t => t.source).filter(t => t.extent && t.extent.intersects(e)).map(t => ({\n          extent: t.extent,\n          pixelBlock: t.originalPixelBlock\n        })),\n        r = p(i, e);\n      return null != r ? {\n        extent: r.extent,\n        pixelBlock: r.pixelBlock\n      } : null;\n    }\n    return null;\n  }\n  async _fetchImage(t, e, i, r) {\n    (r = r || {}).timeExtent = this.timeExtent, r.requestAsImageElement = !0, r.returnImageBitmap = !0;\n    const s = await this.layer.fetchImage(t, e, i, r);\n    if (s.imageBitmap) return s.imageBitmap;\n    const a = await this.layer.applyRenderer(s.pixelData, {\n        signal: r.signal\n      }),\n      o = new c(a.pixelBlock, a.extent?.clone(), s.pixelData.pixelBlock);\n    return o.filter = t => this.layer.applyFilter(t), o;\n  }\n};\nt([a()], m.prototype, \"attached\", void 0), t([a()], m.prototype, \"container\", void 0), t([a()], m.prototype, \"layer\", void 0), t([a()], m.prototype, \"strategy\", void 0), t([a()], m.prototype, \"timeExtent\", void 0), t([a()], m.prototype, \"view\", void 0), t([a()], m.prototype, \"updateRequested\", void 0), t([a()], m.prototype, \"updating\", null), t([a()], m.prototype, \"type\", void 0), m = t([o(\"esri.views.2d.layers.imagery.ImageryView2D\")], m);\nconst d = m;\nexport { d as default };","map":{"version":3,"names":["_","t","e","i","r","isAbortError","s","property","a","subclass","o","mosaicPixelData","p","BitmapContainer","n","Container","l","c","h","m","constructor","arguments","attached","container","updateRequested","type","_bitmapView","destroy","detach","updating","isUpdating","update","strategy","catch","getLogger","error","hitTest","attributes","geometry","clone","layer","attach","addChild","version","imageMaxHeight","imageMaxWidth","imageNormalizationSupported","fetchSource","_fetchImage","bind","requestUpdate","removeAllChildren","redraw","updateExports","source","ImageBitmap","applyRenderer","extent","pixelBlock","originalPixelBlock","filter","pixelFilter","applyFilter","view","getPixelData","bitmaps","length","map","intersects","timeExtent","requestAsImageElement","returnImageBitmap","fetchImage","imageBitmap","pixelData","signal","prototype","d","default"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/layers/imagery/ImageryView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../Graphic.js\";import i from\"../../../../core/Accessor.js\";import r from\"../../../../core/Logger.js\";import{isAbortError as s}from\"../../../../core/promiseUtils.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/RandomLCG.js\";import{subclass as o}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{mosaicPixelData as p}from\"../../../../layers/support/rasterFunctions/pixelUtils.js\";import{BitmapContainer as n}from\"../../engine/BitmapContainer.js\";import{Container as l}from\"../../engine/Container.js\";import c from\"../../engine/ImageryBitmapSource.js\";import h from\"../support/ExportStrategy.js\";let m=class extends i{constructor(){super(...arguments),this.attached=!1,this.container=new l,this.updateRequested=!1,this.type=\"imagery\",this._bitmapView=new n}destroy(){this.attached&&(this.detach(),this.attached=!1),this.updateRequested=!1}get updating(){return!this.attached||this.isUpdating()}update(t){this.strategy.update(t).catch((t=>{s(t)||r.getLogger(this).error(t)}))}hitTest(t){return new e({attributes:{},geometry:t.clone(),layer:this.layer})}attach(){this.container.addChild(this._bitmapView);const t=this.layer.version>=10,e=this.layer.version>=10.1?this.layer.imageMaxHeight:2048,i=this.layer.version>=10.1?this.layer.imageMaxWidth:2048;this.strategy=new h({container:this._bitmapView,imageNormalizationSupported:t,imageMaxHeight:e,imageMaxWidth:i,fetchSource:this._fetchImage.bind(this),requestUpdate:()=>this.requestUpdate()})}detach(){this.strategy.destroy(),this._bitmapView.removeAllChildren(),this.container.removeAllChildren(),this.updateRequested=!1}redraw(){this.strategy.updateExports((async t=>{const{source:e}=t;if(!e||e instanceof ImageBitmap)return;const i=await this.layer.applyRenderer({extent:e.extent,pixelBlock:e.originalPixelBlock??e.pixelBlock});e.filter=t=>this.layer.pixelFilter?this.layer.applyFilter(t):{...i,extent:e.extent}})).catch((t=>{s(t)||r.getLogger(this).error(t)}))}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.view.requestUpdate())}isUpdating(){return this.strategy.updating||this.updateRequested}getPixelData(){if(this.updating)return null;const t=this.strategy.bitmaps;if(1===t.length&&t[0].source)return{extent:t[0].source.extent,pixelBlock:t[0].source.originalPixelBlock};if(t.length>1){const e=this.view.extent,i=t.map((t=>t.source)).filter((t=>t.extent&&t.extent.intersects(e))).map((t=>({extent:t.extent,pixelBlock:t.originalPixelBlock}))),r=p(i,e);return null!=r?{extent:r.extent,pixelBlock:r.pixelBlock}:null}return null}async _fetchImage(t,e,i,r){(r=r||{}).timeExtent=this.timeExtent,r.requestAsImageElement=!0,r.returnImageBitmap=!0;const s=await this.layer.fetchImage(t,e,i,r);if(s.imageBitmap)return s.imageBitmap;const a=await this.layer.applyRenderer(s.pixelData,{signal:r.signal}),o=new c(a.pixelBlock,a.extent?.clone(),s.pixelData.pixelBlock);return o.filter=t=>this.layer.applyFilter(t),o}};t([a()],m.prototype,\"attached\",void 0),t([a()],m.prototype,\"container\",void 0),t([a()],m.prototype,\"layer\",void 0),t([a()],m.prototype,\"strategy\",void 0),t([a()],m.prototype,\"timeExtent\",void 0),t([a()],m.prototype,\"view\",void 0),t([a()],m.prototype,\"updateRequested\",void 0),t([a()],m.prototype,\"updating\",null),t([a()],m.prototype,\"type\",void 0),m=t([o(\"esri.views.2d.layers.imagery.ImageryView2D\")],m);const d=m;export{d as default};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}