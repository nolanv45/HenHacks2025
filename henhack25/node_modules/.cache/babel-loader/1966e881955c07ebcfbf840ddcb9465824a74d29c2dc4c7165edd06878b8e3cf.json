{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../request.js\";\nimport r from \"../../../../core/Error.js\";\nimport i from \"../../../../core/Logger.js\";\nimport { createResolver as o } from \"../../../../core/promiseUtils.js\";\nimport { addQueryParameters as s } from \"../../../../core/urlUtils.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/RandomLCG.js\";\nimport { subclass as n } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport a from \"../../../../geometry/SpatialReference.js\";\nimport { fromJSON as c } from \"../../../../geometry/support/jsonUtils.js\";\nimport { WebSocketConnection as u } from \"./WebSocketConnection.js\";\nimport { executeQuery as l } from \"../../../../rest/query/operations/query.js\";\nimport f from \"../../../../rest/support/Query.js\";\nconst h = 1e4,\n  d = {\n    maxQueryDepth: 5,\n    maxRecordCountFactor: 3\n  };\nlet g = class extends u {\n  constructor(e) {\n    super({\n      ...d,\n      ...e\n    }), this._buddyServicesQuery = null, this._relatedFeatures = null;\n  }\n  async _open() {\n    const e = await this._fetchServiceDefinition(this._config.source);\n    e.timeInfo.trackIdField || i.getLogger(this).warn(\"GeoEvent service was configured without a TrackIdField. This may result in certain functionality being disabled. The purgeOptions.maxObservations property will have no effect.\");\n    const t = this._fetchWebSocketUrl(e.streamUrls, this._config.spatialReference);\n    this._buddyServicesQuery || (this._buddyServicesQuery = this._queryBuddyServices()), await this._buddyServicesQuery, await this._tryCreateWebSocket(t);\n    const {\n      filter: r,\n      outFields: o\n    } = this._config;\n    this.destroyed || this._setFilter(r, o);\n  }\n  _onMessage(e) {\n    if (\"attributes\" in e) {\n      let o;\n      try {\n        o = this._enrich(e), null != this._featureZScaler && this._featureZScaler(o.geometry);\n      } catch (t) {\n        return void i.getLogger(this).error(new r(\"geoevent-connection\", \"Failed to parse message\", t));\n      }\n      this.onFeature(o);\n    } else this.onMessage(e);\n  }\n  async _fetchServiceDefinition(e) {\n    const r = {\n        f: \"json\",\n        ...this._config.customParameters\n      },\n      i = t(e.path, {\n        query: r,\n        responseType: \"json\"\n      }),\n      o = (await i).data;\n    return this._serviceDefinition = o, o;\n  }\n  _fetchWebSocketUrl(e, t) {\n    const r = e[0],\n      {\n        urls: i,\n        token: o\n      } = r,\n      n = this._inferWebSocketBaseUrl(i);\n    return s(`${n}/subscribe`, {\n      outSR: \"\" + t.wkid,\n      token: o\n    });\n  }\n  _inferWebSocketBaseUrl(e) {\n    if (1 === e.length) return e[0];\n    for (const t of e) if (t.includes(\"wss\")) return t;\n    return i.getLogger(this).error(new r(\"geoevent-connection\", \"Unable to infer WebSocket url\", e)), null;\n  }\n  async _setFilter(e, t) {\n    const s = this._websocket;\n    if (null == s || null == e && null == t) return;\n    const n = JSON.stringify({\n      filter: this._serializeFilter(e, t)\n    });\n    let a = !1;\n    const c = o(),\n      u = () => {\n        a || (this.destroyed || this._websocket !== s || i.getLogger(this).error(new r(\"geoevent-connection\", \"Server timed out when setting filter\")), c.reject());\n      },\n      l = e => {\n        const t = JSON.parse(e.data);\n        t.filter && (t.error && (i.getLogger(this).error(new r(\"geoevent-connection\", \"Failed to set service filter\", t.error)), this._set(\"errorString\", `Could not set service filter - ${t.error}`), c.reject(t.error)), this._setWebSocketJSONParseHandler(s), a = !0, c.resolve());\n      };\n    return s.onmessage = l, s.send(n), setTimeout(u, h), c.promise;\n  }\n  _serializeFilter(e, t) {\n    const o = {};\n    if (null == e && null == t) return o;\n    if (e?.geometry) try {\n      const t = c(e.geometry);\n      if (\"extent\" !== t.type) throw new r(`Expected extent but found type ${t.type}`);\n      o.geometry = JSON.stringify(t.shiftCentralMeridian());\n    } catch (s) {\n      i.getLogger(this).error(new r(\"geoevent-connection\", \"Encountered an error when setting connection geometryDefinition\", s));\n    }\n    return e?.where && \"1 = 1\" !== e.where && \"1=1\" !== e.where && (o.where = e.where), null != t && (o.outFields = t.join(\",\")), o;\n  }\n  _enrich(e) {\n    if (!this._relatedFeatures) return e;\n    const t = this._serviceDefinition.relatedFeatures.joinField,\n      o = e.attributes[t],\n      s = this._relatedFeatures.get(o);\n    if (!s) return i.getLogger(this).warn(\"geoevent-connection\", \"Feature join failed. Is the join field configured correctly?\", e), e;\n    const {\n      attributes: n,\n      geometry: a\n    } = s;\n    for (const r in n) e.attributes[r] = n[r];\n    return a && (e.geometry = a), e.geometry || e.centroid || i.getLogger(this).error(new r(\"geoevent-connection\", \"Found malformed feature - no geometry found\", e)), e;\n  }\n  async _queryBuddyServices() {\n    try {\n      const {\n          relatedFeatures: e,\n          keepLatestArchive: t\n        } = this._serviceDefinition,\n        r = this._queryRelatedFeatures(e),\n        i = this._queryArchive(t);\n      await r;\n      const o = await i;\n      if (!o) return;\n      for (const s of o.features) this.onFeature(this._enrich(s));\n    } catch (e) {\n      i.getLogger(this).error(new r(\"geoevent-connection\", \"Encountered an error when querying buddy services\", {\n        error: e\n      }));\n    }\n  }\n  async _queryRelatedFeatures(e) {\n    if (!e) return;\n    const t = await this._queryBuddy(e.featuresUrl);\n    this._addRelatedFeatures(t);\n  }\n  async _queryArchive(e) {\n    if (e) return this._queryBuddy(e.featuresUrl);\n  }\n  async _queryBuddy(e) {\n    const t = new (await import(\"../../../FeatureLayer.js\")).default({\n        url: e\n      }),\n      {\n        capabilities: r\n      } = await t.load(),\n      i = r.query.supportsMaxRecordCountFactor,\n      o = r.query.supportsPagination,\n      s = r.query.supportsCentroid,\n      n = this._config.maxRecordCountFactor,\n      c = t.capabilities.query.maxRecordCount,\n      u = i ? c * n : c,\n      h = new f();\n    if (h.outFields = this._config.outFields ?? [\"*\"], h.where = this._config.filter?.where ?? \"1=1\", h.returnGeometry = !0, h.returnExceededLimitFeatures = !0, h.outSpatialReference = a.fromJSON(this._config.spatialReference), s && (h.returnCentroid = !0), i && (h.maxRecordCountFactor = n), o) return h.num = u, t.destroy(), this._queryPages(e, h);\n    const d = await l(e, h, this._config.sourceSpatialReference);\n    return t.destroy(), d.data;\n  }\n  async _queryPages(e, t, r = [], i = 0) {\n    t.start = null != t.num ? i * t.num : null;\n    const {\n      data: o\n    } = await l(e, t, this._config.sourceSpatialReference);\n    return o.exceededTransferLimit && i < (this._config.maxQueryDepth ?? 0) ? (o.features.forEach(e => r.push(e)), this._queryPages(e, t, r, i + 1)) : (r.forEach(e => o.features.push(e)), o);\n  }\n  _addRelatedFeatures(e) {\n    const t = new Map(),\n      r = e.features,\n      i = this._serviceDefinition.relatedFeatures.joinField;\n    for (const o of r) {\n      const e = o.attributes[i];\n      t.set(e, o);\n    }\n    this._relatedFeatures = t;\n  }\n};\ng = e([n(\"esri.layers.graphics.sources.connections.GeoEventConnection\")], g);\nconst y = g;\nexport { y as default };","map":{"version":3,"names":["_","e","t","r","i","createResolver","o","addQueryParameters","s","subclass","n","a","fromJSON","c","WebSocketConnection","u","executeQuery","l","f","h","d","maxQueryDepth","maxRecordCountFactor","g","constructor","_buddyServicesQuery","_relatedFeatures","_open","_fetchServiceDefinition","_config","source","timeInfo","trackIdField","getLogger","warn","_fetchWebSocketUrl","streamUrls","spatialReference","_queryBuddyServices","_tryCreateWebSocket","filter","outFields","destroyed","_setFilter","_onMessage","_enrich","_featureZScaler","geometry","error","onFeature","onMessage","customParameters","path","query","responseType","data","_serviceDefinition","urls","token","_inferWebSocketBaseUrl","outSR","wkid","length","includes","_websocket","JSON","stringify","_serializeFilter","reject","parse","_set","_setWebSocketJSONParseHandler","resolve","onmessage","send","setTimeout","promise","type","shiftCentralMeridian","where","join","relatedFeatures","joinField","attributes","get","centroid","keepLatestArchive","_queryRelatedFeatures","_queryArchive","features","_queryBuddy","featuresUrl","_addRelatedFeatures","default","url","capabilities","load","supportsMaxRecordCountFactor","supportsPagination","supportsCentroid","maxRecordCount","returnGeometry","returnExceededLimitFeatures","outSpatialReference","returnCentroid","num","destroy","_queryPages","sourceSpatialReference","start","exceededTransferLimit","forEach","push","Map","set","y"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/layers/graphics/sources/connections/GeoEventConnection.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../request.js\";import r from\"../../../../core/Error.js\";import i from\"../../../../core/Logger.js\";import{createResolver as o}from\"../../../../core/promiseUtils.js\";import{addQueryParameters as s}from\"../../../../core/urlUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/RandomLCG.js\";import{subclass as n}from\"../../../../core/accessorSupport/decorators/subclass.js\";import a from\"../../../../geometry/SpatialReference.js\";import{fromJSON as c}from\"../../../../geometry/support/jsonUtils.js\";import{WebSocketConnection as u}from\"./WebSocketConnection.js\";import{executeQuery as l}from\"../../../../rest/query/operations/query.js\";import f from\"../../../../rest/support/Query.js\";const h=1e4,d={maxQueryDepth:5,maxRecordCountFactor:3};let g=class extends u{constructor(e){super({...d,...e}),this._buddyServicesQuery=null,this._relatedFeatures=null}async _open(){const e=await this._fetchServiceDefinition(this._config.source);e.timeInfo.trackIdField||i.getLogger(this).warn(\"GeoEvent service was configured without a TrackIdField. This may result in certain functionality being disabled. The purgeOptions.maxObservations property will have no effect.\");const t=this._fetchWebSocketUrl(e.streamUrls,this._config.spatialReference);this._buddyServicesQuery||(this._buddyServicesQuery=this._queryBuddyServices()),await this._buddyServicesQuery,await this._tryCreateWebSocket(t);const{filter:r,outFields:o}=this._config;this.destroyed||this._setFilter(r,o)}_onMessage(e){if(\"attributes\"in e){let o;try{o=this._enrich(e),null!=this._featureZScaler&&this._featureZScaler(o.geometry)}catch(t){return void i.getLogger(this).error(new r(\"geoevent-connection\",\"Failed to parse message\",t))}this.onFeature(o)}else this.onMessage(e)}async _fetchServiceDefinition(e){const r={f:\"json\",...this._config.customParameters},i=t(e.path,{query:r,responseType:\"json\"}),o=(await i).data;return this._serviceDefinition=o,o}_fetchWebSocketUrl(e,t){const r=e[0],{urls:i,token:o}=r,n=this._inferWebSocketBaseUrl(i);return s(`${n}/subscribe`,{outSR:\"\"+t.wkid,token:o})}_inferWebSocketBaseUrl(e){if(1===e.length)return e[0];for(const t of e)if(t.includes(\"wss\"))return t;return i.getLogger(this).error(new r(\"geoevent-connection\",\"Unable to infer WebSocket url\",e)),null}async _setFilter(e,t){const s=this._websocket;if(null==s||null==e&&null==t)return;const n=JSON.stringify({filter:this._serializeFilter(e,t)});let a=!1;const c=o(),u=()=>{a||(this.destroyed||this._websocket!==s||i.getLogger(this).error(new r(\"geoevent-connection\",\"Server timed out when setting filter\")),c.reject())},l=e=>{const t=JSON.parse(e.data);t.filter&&(t.error&&(i.getLogger(this).error(new r(\"geoevent-connection\",\"Failed to set service filter\",t.error)),this._set(\"errorString\",`Could not set service filter - ${t.error}`),c.reject(t.error)),this._setWebSocketJSONParseHandler(s),a=!0,c.resolve())};return s.onmessage=l,s.send(n),setTimeout(u,h),c.promise}_serializeFilter(e,t){const o={};if(null==e&&null==t)return o;if(e?.geometry)try{const t=c(e.geometry);if(\"extent\"!==t.type)throw new r(`Expected extent but found type ${t.type}`);o.geometry=JSON.stringify(t.shiftCentralMeridian())}catch(s){i.getLogger(this).error(new r(\"geoevent-connection\",\"Encountered an error when setting connection geometryDefinition\",s))}return e?.where&&\"1 = 1\"!==e.where&&\"1=1\"!==e.where&&(o.where=e.where),null!=t&&(o.outFields=t.join(\",\")),o}_enrich(e){if(!this._relatedFeatures)return e;const t=this._serviceDefinition.relatedFeatures.joinField,o=e.attributes[t],s=this._relatedFeatures.get(o);if(!s)return i.getLogger(this).warn(\"geoevent-connection\",\"Feature join failed. Is the join field configured correctly?\",e),e;const{attributes:n,geometry:a}=s;for(const r in n)e.attributes[r]=n[r];return a&&(e.geometry=a),e.geometry||e.centroid||i.getLogger(this).error(new r(\"geoevent-connection\",\"Found malformed feature - no geometry found\",e)),e}async _queryBuddyServices(){try{const{relatedFeatures:e,keepLatestArchive:t}=this._serviceDefinition,r=this._queryRelatedFeatures(e),i=this._queryArchive(t);await r;const o=await i;if(!o)return;for(const s of o.features)this.onFeature(this._enrich(s))}catch(e){i.getLogger(this).error(new r(\"geoevent-connection\",\"Encountered an error when querying buddy services\",{error:e}))}}async _queryRelatedFeatures(e){if(!e)return;const t=await this._queryBuddy(e.featuresUrl);this._addRelatedFeatures(t)}async _queryArchive(e){if(e)return this._queryBuddy(e.featuresUrl)}async _queryBuddy(e){const t=new((await import(\"../../../FeatureLayer.js\")).default)({url:e}),{capabilities:r}=await t.load(),i=r.query.supportsMaxRecordCountFactor,o=r.query.supportsPagination,s=r.query.supportsCentroid,n=this._config.maxRecordCountFactor,c=t.capabilities.query.maxRecordCount,u=i?c*n:c,h=new f;if(h.outFields=this._config.outFields??[\"*\"],h.where=this._config.filter?.where??\"1=1\",h.returnGeometry=!0,h.returnExceededLimitFeatures=!0,h.outSpatialReference=a.fromJSON(this._config.spatialReference),s&&(h.returnCentroid=!0),i&&(h.maxRecordCountFactor=n),o)return h.num=u,t.destroy(),this._queryPages(e,h);const d=await l(e,h,this._config.sourceSpatialReference);return t.destroy(),d.data}async _queryPages(e,t,r=[],i=0){t.start=null!=t.num?i*t.num:null;const{data:o}=await l(e,t,this._config.sourceSpatialReference);return o.exceededTransferLimit&&i<(this._config.maxQueryDepth??0)?(o.features.forEach((e=>r.push(e))),this._queryPages(e,t,r,i+1)):(r.forEach((e=>o.features.push(e))),o)}_addRelatedFeatures(e){const t=new Map,r=e.features,i=this._serviceDefinition.relatedFeatures.joinField;for(const o of r){const e=o.attributes[i];t.set(e,o)}this._relatedFeatures=t}};g=e([n(\"esri.layers.graphics.sources.connections.GeoEventConnection\")],g);const y=g;export{y as default};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAC,QAAK,iCAAiC;AAAC,OAAOC,CAAC,MAAK,wBAAwB;AAAC,OAAOC,CAAC,MAAK,2BAA2B;AAAC,OAAOC,CAAC,MAAK,4BAA4B;AAAC,SAAOC,cAAc,IAAIC,CAAC,QAAK,kCAAkC;AAAC,SAAOC,kBAAkB,IAAIC,CAAC,QAAK,8BAA8B;AAAC,OAAM,yBAAyB;AAAC,OAAM,+BAA+B;AAAC,SAAOC,QAAQ,IAAIC,CAAC,QAAK,yDAAyD;AAAC,OAAOC,CAAC,MAAK,0CAA0C;AAAC,SAAOC,QAAQ,IAAIC,CAAC,QAAK,2CAA2C;AAAC,SAAOC,mBAAmB,IAAIC,CAAC,QAAK,0BAA0B;AAAC,SAAOC,YAAY,IAAIC,CAAC,QAAK,4CAA4C;AAAC,OAAOC,CAAC,MAAK,mCAAmC;AAAC,MAAMC,CAAC,GAAC,GAAG;EAACC,CAAC,GAAC;IAACC,aAAa,EAAC,CAAC;IAACC,oBAAoB,EAAC;EAAC,CAAC;AAAC,IAAIC,CAAC,GAAC,cAAcR,CAAC;EAACS,WAAWA,CAACvB,CAAC,EAAC;IAAC,KAAK,CAAC;MAAC,GAAGmB,CAAC;MAAC,GAAGnB;IAAC,CAAC,CAAC,EAAC,IAAI,CAACwB,mBAAmB,GAAC,IAAI,EAAC,IAAI,CAACC,gBAAgB,GAAC,IAAI;EAAA;EAAC,MAAMC,KAAKA,CAAA,EAAE;IAAC,MAAM1B,CAAC,GAAC,MAAM,IAAI,CAAC2B,uBAAuB,CAAC,IAAI,CAACC,OAAO,CAACC,MAAM,CAAC;IAAC7B,CAAC,CAAC8B,QAAQ,CAACC,YAAY,IAAE5B,CAAC,CAAC6B,SAAS,CAAC,IAAI,CAAC,CAACC,IAAI,CAAC,iLAAiL,CAAC;IAAC,MAAMhC,CAAC,GAAC,IAAI,CAACiC,kBAAkB,CAAClC,CAAC,CAACmC,UAAU,EAAC,IAAI,CAACP,OAAO,CAACQ,gBAAgB,CAAC;IAAC,IAAI,CAACZ,mBAAmB,KAAG,IAAI,CAACA,mBAAmB,GAAC,IAAI,CAACa,mBAAmB,CAAC,CAAC,CAAC,EAAC,MAAM,IAAI,CAACb,mBAAmB,EAAC,MAAM,IAAI,CAACc,mBAAmB,CAACrC,CAAC,CAAC;IAAC,MAAK;MAACsC,MAAM,EAACrC,CAAC;MAACsC,SAAS,EAACnC;IAAC,CAAC,GAAC,IAAI,CAACuB,OAAO;IAAC,IAAI,CAACa,SAAS,IAAE,IAAI,CAACC,UAAU,CAACxC,CAAC,EAACG,CAAC,CAAC;EAAA;EAACsC,UAAUA,CAAC3C,CAAC,EAAC;IAAC,IAAG,YAAY,IAAGA,CAAC,EAAC;MAAC,IAAIK,CAAC;MAAC,IAAG;QAACA,CAAC,GAAC,IAAI,CAACuC,OAAO,CAAC5C,CAAC,CAAC,EAAC,IAAI,IAAE,IAAI,CAAC6C,eAAe,IAAE,IAAI,CAACA,eAAe,CAACxC,CAAC,CAACyC,QAAQ,CAAC;MAAA,CAAC,QAAM7C,CAAC,EAAC;QAAC,OAAO,KAAKE,CAAC,CAAC6B,SAAS,CAAC,IAAI,CAAC,CAACe,KAAK,CAAC,IAAI7C,CAAC,CAAC,qBAAqB,EAAC,yBAAyB,EAACD,CAAC,CAAC,CAAC;MAAA;MAAC,IAAI,CAAC+C,SAAS,CAAC3C,CAAC,CAAC;IAAA,CAAC,MAAK,IAAI,CAAC4C,SAAS,CAACjD,CAAC,CAAC;EAAA;EAAC,MAAM2B,uBAAuBA,CAAC3B,CAAC,EAAC;IAAC,MAAME,CAAC,GAAC;QAACe,CAAC,EAAC,MAAM;QAAC,GAAG,IAAI,CAACW,OAAO,CAACsB;MAAgB,CAAC;MAAC/C,CAAC,GAACF,CAAC,CAACD,CAAC,CAACmD,IAAI,EAAC;QAACC,KAAK,EAAClD,CAAC;QAACmD,YAAY,EAAC;MAAM,CAAC,CAAC;MAAChD,CAAC,GAAC,CAAC,MAAMF,CAAC,EAAEmD,IAAI;IAAC,OAAO,IAAI,CAACC,kBAAkB,GAAClD,CAAC,EAACA,CAAC;EAAA;EAAC6B,kBAAkBA,CAAClC,CAAC,EAACC,CAAC,EAAC;IAAC,MAAMC,CAAC,GAACF,CAAC,CAAC,CAAC,CAAC;MAAC;QAACwD,IAAI,EAACrD,CAAC;QAACsD,KAAK,EAACpD;MAAC,CAAC,GAACH,CAAC;MAACO,CAAC,GAAC,IAAI,CAACiD,sBAAsB,CAACvD,CAAC,CAAC;IAAC,OAAOI,CAAC,CAAC,GAAGE,CAAC,YAAY,EAAC;MAACkD,KAAK,EAAC,EAAE,GAAC1D,CAAC,CAAC2D,IAAI;MAACH,KAAK,EAACpD;IAAC,CAAC,CAAC;EAAA;EAACqD,sBAAsBA,CAAC1D,CAAC,EAAC;IAAC,IAAG,CAAC,KAAGA,CAAC,CAAC6D,MAAM,EAAC,OAAO7D,CAAC,CAAC,CAAC,CAAC;IAAC,KAAI,MAAMC,CAAC,IAAID,CAAC,EAAC,IAAGC,CAAC,CAAC6D,QAAQ,CAAC,KAAK,CAAC,EAAC,OAAO7D,CAAC;IAAC,OAAOE,CAAC,CAAC6B,SAAS,CAAC,IAAI,CAAC,CAACe,KAAK,CAAC,IAAI7C,CAAC,CAAC,qBAAqB,EAAC,+BAA+B,EAACF,CAAC,CAAC,CAAC,EAAC,IAAI;EAAA;EAAC,MAAM0C,UAAUA,CAAC1C,CAAC,EAACC,CAAC,EAAC;IAAC,MAAMM,CAAC,GAAC,IAAI,CAACwD,UAAU;IAAC,IAAG,IAAI,IAAExD,CAAC,IAAE,IAAI,IAAEP,CAAC,IAAE,IAAI,IAAEC,CAAC,EAAC;IAAO,MAAMQ,CAAC,GAACuD,IAAI,CAACC,SAAS,CAAC;MAAC1B,MAAM,EAAC,IAAI,CAAC2B,gBAAgB,CAAClE,CAAC,EAACC,CAAC;IAAC,CAAC,CAAC;IAAC,IAAIS,CAAC,GAAC,CAAC,CAAC;IAAC,MAAME,CAAC,GAACP,CAAC,CAAC,CAAC;MAACS,CAAC,GAACA,CAAA,KAAI;QAACJ,CAAC,KAAG,IAAI,CAAC+B,SAAS,IAAE,IAAI,CAACsB,UAAU,KAAGxD,CAAC,IAAEJ,CAAC,CAAC6B,SAAS,CAAC,IAAI,CAAC,CAACe,KAAK,CAAC,IAAI7C,CAAC,CAAC,qBAAqB,EAAC,sCAAsC,CAAC,CAAC,EAACU,CAAC,CAACuD,MAAM,CAAC,CAAC,CAAC;MAAA,CAAC;MAACnD,CAAC,GAAChB,CAAC,IAAE;QAAC,MAAMC,CAAC,GAAC+D,IAAI,CAACI,KAAK,CAACpE,CAAC,CAACsD,IAAI,CAAC;QAACrD,CAAC,CAACsC,MAAM,KAAGtC,CAAC,CAAC8C,KAAK,KAAG5C,CAAC,CAAC6B,SAAS,CAAC,IAAI,CAAC,CAACe,KAAK,CAAC,IAAI7C,CAAC,CAAC,qBAAqB,EAAC,8BAA8B,EAACD,CAAC,CAAC8C,KAAK,CAAC,CAAC,EAAC,IAAI,CAACsB,IAAI,CAAC,aAAa,EAAC,kCAAkCpE,CAAC,CAAC8C,KAAK,EAAE,CAAC,EAACnC,CAAC,CAACuD,MAAM,CAAClE,CAAC,CAAC8C,KAAK,CAAC,CAAC,EAAC,IAAI,CAACuB,6BAA6B,CAAC/D,CAAC,CAAC,EAACG,CAAC,GAAC,CAAC,CAAC,EAACE,CAAC,CAAC2D,OAAO,CAAC,CAAC,CAAC;MAAA,CAAC;IAAC,OAAOhE,CAAC,CAACiE,SAAS,GAACxD,CAAC,EAACT,CAAC,CAACkE,IAAI,CAAChE,CAAC,CAAC,EAACiE,UAAU,CAAC5D,CAAC,EAACI,CAAC,CAAC,EAACN,CAAC,CAAC+D,OAAO;EAAA;EAACT,gBAAgBA,CAAClE,CAAC,EAACC,CAAC,EAAC;IAAC,MAAMI,CAAC,GAAC,CAAC,CAAC;IAAC,IAAG,IAAI,IAAEL,CAAC,IAAE,IAAI,IAAEC,CAAC,EAAC,OAAOI,CAAC;IAAC,IAAGL,CAAC,EAAE8C,QAAQ,EAAC,IAAG;MAAC,MAAM7C,CAAC,GAACW,CAAC,CAACZ,CAAC,CAAC8C,QAAQ,CAAC;MAAC,IAAG,QAAQ,KAAG7C,CAAC,CAAC2E,IAAI,EAAC,MAAM,IAAI1E,CAAC,CAAC,kCAAkCD,CAAC,CAAC2E,IAAI,EAAE,CAAC;MAACvE,CAAC,CAACyC,QAAQ,GAACkB,IAAI,CAACC,SAAS,CAAChE,CAAC,CAAC4E,oBAAoB,CAAC,CAAC,CAAC;IAAA,CAAC,QAAMtE,CAAC,EAAC;MAACJ,CAAC,CAAC6B,SAAS,CAAC,IAAI,CAAC,CAACe,KAAK,CAAC,IAAI7C,CAAC,CAAC,qBAAqB,EAAC,iEAAiE,EAACK,CAAC,CAAC,CAAC;IAAA;IAAC,OAAOP,CAAC,EAAE8E,KAAK,IAAE,OAAO,KAAG9E,CAAC,CAAC8E,KAAK,IAAE,KAAK,KAAG9E,CAAC,CAAC8E,KAAK,KAAGzE,CAAC,CAACyE,KAAK,GAAC9E,CAAC,CAAC8E,KAAK,CAAC,EAAC,IAAI,IAAE7E,CAAC,KAAGI,CAAC,CAACmC,SAAS,GAACvC,CAAC,CAAC8E,IAAI,CAAC,GAAG,CAAC,CAAC,EAAC1E,CAAC;EAAA;EAACuC,OAAOA,CAAC5C,CAAC,EAAC;IAAC,IAAG,CAAC,IAAI,CAACyB,gBAAgB,EAAC,OAAOzB,CAAC;IAAC,MAAMC,CAAC,GAAC,IAAI,CAACsD,kBAAkB,CAACyB,eAAe,CAACC,SAAS;MAAC5E,CAAC,GAACL,CAAC,CAACkF,UAAU,CAACjF,CAAC,CAAC;MAACM,CAAC,GAAC,IAAI,CAACkB,gBAAgB,CAAC0D,GAAG,CAAC9E,CAAC,CAAC;IAAC,IAAG,CAACE,CAAC,EAAC,OAAOJ,CAAC,CAAC6B,SAAS,CAAC,IAAI,CAAC,CAACC,IAAI,CAAC,qBAAqB,EAAC,8DAA8D,EAACjC,CAAC,CAAC,EAACA,CAAC;IAAC,MAAK;MAACkF,UAAU,EAACzE,CAAC;MAACqC,QAAQ,EAACpC;IAAC,CAAC,GAACH,CAAC;IAAC,KAAI,MAAML,CAAC,IAAIO,CAAC,EAACT,CAAC,CAACkF,UAAU,CAAChF,CAAC,CAAC,GAACO,CAAC,CAACP,CAAC,CAAC;IAAC,OAAOQ,CAAC,KAAGV,CAAC,CAAC8C,QAAQ,GAACpC,CAAC,CAAC,EAACV,CAAC,CAAC8C,QAAQ,IAAE9C,CAAC,CAACoF,QAAQ,IAAEjF,CAAC,CAAC6B,SAAS,CAAC,IAAI,CAAC,CAACe,KAAK,CAAC,IAAI7C,CAAC,CAAC,qBAAqB,EAAC,6CAA6C,EAACF,CAAC,CAAC,CAAC,EAACA,CAAC;EAAA;EAAC,MAAMqC,mBAAmBA,CAAA,EAAE;IAAC,IAAG;MAAC,MAAK;UAAC2C,eAAe,EAAChF,CAAC;UAACqF,iBAAiB,EAACpF;QAAC,CAAC,GAAC,IAAI,CAACsD,kBAAkB;QAACrD,CAAC,GAAC,IAAI,CAACoF,qBAAqB,CAACtF,CAAC,CAAC;QAACG,CAAC,GAAC,IAAI,CAACoF,aAAa,CAACtF,CAAC,CAAC;MAAC,MAAMC,CAAC;MAAC,MAAMG,CAAC,GAAC,MAAMF,CAAC;MAAC,IAAG,CAACE,CAAC,EAAC;MAAO,KAAI,MAAME,CAAC,IAAIF,CAAC,CAACmF,QAAQ,EAAC,IAAI,CAACxC,SAAS,CAAC,IAAI,CAACJ,OAAO,CAACrC,CAAC,CAAC,CAAC;IAAA,CAAC,QAAMP,CAAC,EAAC;MAACG,CAAC,CAAC6B,SAAS,CAAC,IAAI,CAAC,CAACe,KAAK,CAAC,IAAI7C,CAAC,CAAC,qBAAqB,EAAC,mDAAmD,EAAC;QAAC6C,KAAK,EAAC/C;MAAC,CAAC,CAAC,CAAC;IAAA;EAAC;EAAC,MAAMsF,qBAAqBA,CAACtF,CAAC,EAAC;IAAC,IAAG,CAACA,CAAC,EAAC;IAAO,MAAMC,CAAC,GAAC,MAAM,IAAI,CAACwF,WAAW,CAACzF,CAAC,CAAC0F,WAAW,CAAC;IAAC,IAAI,CAACC,mBAAmB,CAAC1F,CAAC,CAAC;EAAA;EAAC,MAAMsF,aAAaA,CAACvF,CAAC,EAAC;IAAC,IAAGA,CAAC,EAAC,OAAO,IAAI,CAACyF,WAAW,CAACzF,CAAC,CAAC0F,WAAW,CAAC;EAAA;EAAC,MAAMD,WAAWA,CAACzF,CAAC,EAAC;IAAC,MAAMC,CAAC,GAAC,IAAI,CAAC,MAAM,MAAM,CAAC,0BAA0B,CAAC,EAAE2F,OAAO,CAAE;QAACC,GAAG,EAAC7F;MAAC,CAAC,CAAC;MAAC;QAAC8F,YAAY,EAAC5F;MAAC,CAAC,GAAC,MAAMD,CAAC,CAAC8F,IAAI,CAAC,CAAC;MAAC5F,CAAC,GAACD,CAAC,CAACkD,KAAK,CAAC4C,4BAA4B;MAAC3F,CAAC,GAACH,CAAC,CAACkD,KAAK,CAAC6C,kBAAkB;MAAC1F,CAAC,GAACL,CAAC,CAACkD,KAAK,CAAC8C,gBAAgB;MAACzF,CAAC,GAAC,IAAI,CAACmB,OAAO,CAACP,oBAAoB;MAACT,CAAC,GAACX,CAAC,CAAC6F,YAAY,CAAC1C,KAAK,CAAC+C,cAAc;MAACrF,CAAC,GAACX,CAAC,GAACS,CAAC,GAACH,CAAC,GAACG,CAAC;MAACM,CAAC,GAAC,IAAID,CAAC,CAAD,CAAC;IAAC,IAAGC,CAAC,CAACsB,SAAS,GAAC,IAAI,CAACZ,OAAO,CAACY,SAAS,IAAE,CAAC,GAAG,CAAC,EAACtB,CAAC,CAAC4D,KAAK,GAAC,IAAI,CAAClD,OAAO,CAACW,MAAM,EAAEuC,KAAK,IAAE,KAAK,EAAC5D,CAAC,CAACkF,cAAc,GAAC,CAAC,CAAC,EAAClF,CAAC,CAACmF,2BAA2B,GAAC,CAAC,CAAC,EAACnF,CAAC,CAACoF,mBAAmB,GAAC5F,CAAC,CAACC,QAAQ,CAAC,IAAI,CAACiB,OAAO,CAACQ,gBAAgB,CAAC,EAAC7B,CAAC,KAAGW,CAAC,CAACqF,cAAc,GAAC,CAAC,CAAC,CAAC,EAACpG,CAAC,KAAGe,CAAC,CAACG,oBAAoB,GAACZ,CAAC,CAAC,EAACJ,CAAC,EAAC,OAAOa,CAAC,CAACsF,GAAG,GAAC1F,CAAC,EAACb,CAAC,CAACwG,OAAO,CAAC,CAAC,EAAC,IAAI,CAACC,WAAW,CAAC1G,CAAC,EAACkB,CAAC,CAAC;IAAC,MAAMC,CAAC,GAAC,MAAMH,CAAC,CAAChB,CAAC,EAACkB,CAAC,EAAC,IAAI,CAACU,OAAO,CAAC+E,sBAAsB,CAAC;IAAC,OAAO1G,CAAC,CAACwG,OAAO,CAAC,CAAC,EAACtF,CAAC,CAACmC,IAAI;EAAA;EAAC,MAAMoD,WAAWA,CAAC1G,CAAC,EAACC,CAAC,EAACC,CAAC,GAAC,EAAE,EAACC,CAAC,GAAC,CAAC,EAAC;IAACF,CAAC,CAAC2G,KAAK,GAAC,IAAI,IAAE3G,CAAC,CAACuG,GAAG,GAACrG,CAAC,GAACF,CAAC,CAACuG,GAAG,GAAC,IAAI;IAAC,MAAK;MAAClD,IAAI,EAACjD;IAAC,CAAC,GAAC,MAAMW,CAAC,CAAChB,CAAC,EAACC,CAAC,EAAC,IAAI,CAAC2B,OAAO,CAAC+E,sBAAsB,CAAC;IAAC,OAAOtG,CAAC,CAACwG,qBAAqB,IAAE1G,CAAC,IAAE,IAAI,CAACyB,OAAO,CAACR,aAAa,IAAE,CAAC,CAAC,IAAEf,CAAC,CAACmF,QAAQ,CAACsB,OAAO,CAAE9G,CAAC,IAAEE,CAAC,CAAC6G,IAAI,CAAC/G,CAAC,CAAE,CAAC,EAAC,IAAI,CAAC0G,WAAW,CAAC1G,CAAC,EAACC,CAAC,EAACC,CAAC,EAACC,CAAC,GAAC,CAAC,CAAC,KAAGD,CAAC,CAAC4G,OAAO,CAAE9G,CAAC,IAAEK,CAAC,CAACmF,QAAQ,CAACuB,IAAI,CAAC/G,CAAC,CAAE,CAAC,EAACK,CAAC,CAAC;EAAA;EAACsF,mBAAmBA,CAAC3F,CAAC,EAAC;IAAC,MAAMC,CAAC,GAAC,IAAI+G,GAAG,CAAD,CAAC;MAAC9G,CAAC,GAACF,CAAC,CAACwF,QAAQ;MAACrF,CAAC,GAAC,IAAI,CAACoD,kBAAkB,CAACyB,eAAe,CAACC,SAAS;IAAC,KAAI,MAAM5E,CAAC,IAAIH,CAAC,EAAC;MAAC,MAAMF,CAAC,GAACK,CAAC,CAAC6E,UAAU,CAAC/E,CAAC,CAAC;MAACF,CAAC,CAACgH,GAAG,CAACjH,CAAC,EAACK,CAAC,CAAC;IAAA;IAAC,IAAI,CAACoB,gBAAgB,GAACxB,CAAC;EAAA;AAAC,CAAC;AAACqB,CAAC,GAACtB,CAAC,CAAC,CAACS,CAAC,CAAC,6DAA6D,CAAC,CAAC,EAACa,CAAC,CAAC;AAAC,MAAM4F,CAAC,GAAC5F,CAAC;AAAC,SAAO4F,CAAC,IAAItB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}