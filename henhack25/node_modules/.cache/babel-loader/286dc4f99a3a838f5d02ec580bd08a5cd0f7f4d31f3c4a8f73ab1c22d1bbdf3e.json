{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { handlesGroup as e } from \"../handleUtils.js\";\nimport \"../has.js\";\nimport { isPromiseLike as t, createAbortError as s, createResolver as i, throwIfAborted as n } from \"../promiseUtils.js\";\nimport o from \"../Queue.js\";\nimport { unregister as r } from \"./connectionRegistry.js\";\nimport { createInvokeProxy as l } from \"./InvokeHandler.js\";\nimport h from \"./RemoteClient.js\";\nclass c {\n  constructor() {\n    this._inUseClients = new Array(), this._clients = new Array(), this._clientPromises = new Array(), this._ongoingJobsQueue = new o();\n  }\n  destroy() {\n    this.close();\n  }\n  get closed() {\n    return !this._clients?.length;\n  }\n  open(e, s) {\n    return new Promise((i, o) => {\n      let r = !0;\n      const l = e => {\n        n(s.signal), r && (r = !1, e());\n      };\n      this._clients.length = e.length, this._clientPromises.length = e.length, this._inUseClients.length = e.length;\n      for (let n = 0; n < e.length; ++n) {\n        const r = e[n];\n        t(r) ? this._clientPromises[n] = r.then(e => (this._clients[n] = new h(e, s, this._ongoingJobsQueue), l(i), this._clients[n]), () => (l(o), null)) : (this._clients[n] = new h(r, s, this._ongoingJobsQueue), this._clientPromises[n] = Promise.resolve(this._clients[n]), l(i));\n      }\n    });\n  }\n  broadcast(e, t, s) {\n    const i = new Array(this._clientPromises.length);\n    for (let n = 0; n < this._clientPromises.length; ++n) {\n      const o = this._clientPromises[n];\n      i[n] = o.then(i => i?.invoke(e, t, s));\n    }\n    return i;\n  }\n  close() {\n    let e;\n    for (; e = this._ongoingJobsQueue.pop();) e.resolver.reject(s(`Worker closing, aborting job calling '${e.methodName}'`));\n    for (const t of this._clientPromises) t.then(e => e?.close());\n    this._clients.length = 0, this._clientPromises.length = 0, this._inUseClients.length = 0, r(this);\n  }\n  invoke(e, t, s) {\n    return this.apply(e, [t], s);\n  }\n  apply(e, t, s) {\n    const n = i();\n    this._ongoingJobsQueue.push({\n      methodName: e,\n      data: t,\n      invokeOptions: s,\n      resolver: n\n    });\n    for (let i = 0; i < this._clientPromises.length; i++) {\n      const e = this._clients[i];\n      e ? e.jobAdded() : this._clientPromises[i].then(e => e?.jobAdded());\n    }\n    return n.promise;\n  }\n  createInvokeProxy(e) {\n    return l(this, e);\n  }\n  on(t, s) {\n    return Promise.all(this._clientPromises).then(() => e(this._clients.map(e => e.on(t, s))));\n  }\n  openPorts() {\n    return new Promise(e => {\n      const t = new Array(this._clientPromises.length);\n      let s = t.length;\n      for (let i = 0; i < this._clientPromises.length; ++i) {\n        this._clientPromises[i].then(n => {\n          n && (t[i] = n.openPort()), 0 == --s && e(t);\n        });\n      }\n    });\n  }\n  get test() {}\n}\nexport { c as default };","map":{"version":3,"names":["handlesGroup","e","isPromiseLike","t","createAbortError","s","createResolver","i","throwIfAborted","n","o","unregister","r","createInvokeProxy","l","h","c","constructor","_inUseClients","Array","_clients","_clientPromises","_ongoingJobsQueue","destroy","close","closed","length","open","Promise","signal","then","resolve","broadcast","invoke","pop","resolver","reject","methodName","apply","push","data","invokeOptions","jobAdded","promise","on","all","map","openPorts","openPort","test","default"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/core/workers/Connection.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{handlesGroup as e}from\"../handleUtils.js\";import\"../has.js\";import{isPromiseLike as t,createAbortError as s,createResolver as i,throwIfAborted as n}from\"../promiseUtils.js\";import o from\"../Queue.js\";import{unregister as r}from\"./connectionRegistry.js\";import{createInvokeProxy as l}from\"./InvokeHandler.js\";import h from\"./RemoteClient.js\";class c{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new o}destroy(){this.close()}get closed(){return!this._clients?.length}open(e,s){return new Promise(((i,o)=>{let r=!0;const l=e=>{n(s.signal),r&&(r=!1,e())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let n=0;n<e.length;++n){const r=e[n];t(r)?this._clientPromises[n]=r.then((e=>(this._clients[n]=new h(e,s,this._ongoingJobsQueue),l(i),this._clients[n])),(()=>(l(o),null))):(this._clients[n]=new h(r,s,this._ongoingJobsQueue),this._clientPromises[n]=Promise.resolve(this._clients[n]),l(i))}}))}broadcast(e,t,s){const i=new Array(this._clientPromises.length);for(let n=0;n<this._clientPromises.length;++n){const o=this._clientPromises[n];i[n]=o.then((i=>i?.invoke(e,t,s)))}return i}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(s(`Worker closing, aborting job calling '${e.methodName}'`));for(const t of this._clientPromises)t.then((e=>e?.close()));this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,r(this)}invoke(e,t,s){return this.apply(e,[t],s)}apply(e,t,s){const n=i();this._ongoingJobsQueue.push({methodName:e,data:t,invokeOptions:s,resolver:n});for(let i=0;i<this._clientPromises.length;i++){const e=this._clients[i];e?e.jobAdded():this._clientPromises[i].then((e=>e?.jobAdded()))}return n.promise}createInvokeProxy(e){return l(this,e)}on(t,s){return Promise.all(this._clientPromises).then((()=>e(this._clients.map((e=>e.on(t,s))))))}openPorts(){return new Promise((e=>{const t=new Array(this._clientPromises.length);let s=t.length;for(let i=0;i<this._clientPromises.length;++i){this._clientPromises[i].then((n=>{n&&(t[i]=n.openPort()),0==--s&&e(t)}))}}))}get test(){}}export{c as default};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}