{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from \"../../../../../geometry/SpatialReference.js\";\nimport { unquantizeOptimizedGeometry as t, convertToFeature as s } from \"../../../../../layers/graphics/featureConversionUtils.js\";\nimport { OptimizedFeature as a } from \"../../../../../layers/graphics/OptimizedFeature.js\";\nimport { checkProjectionSupport as r } from \"../../../../../layers/graphics/data/projectionSupport.js\";\nimport i from \"../../../../../layers/support/FieldsIndex.js\";\nimport { ComputedAggregateField as o } from \"../aggregation/ComputedAggregateField.js\";\nimport { AAggregateStrategy as n } from \"./AAggregateStrategy.js\";\nimport { ASendState as l } from \"./AProcessorStrategy.js\";\nimport { FeatureTileAppendMessage as d, FeatureTileUpdateMessage as c } from \"../sources/FeatureSourceMessage.js\";\nimport { ComputedAttributeStorage as u } from \"../support/ComputedAttributeStorage.js\";\nimport p from \"../support/FeatureFilterEvaluator.js\";\nimport { FeatureMetadata as f } from \"../support/FeatureMetadata.js\";\nimport { FeatureSetReaderJSON as h } from \"../support/FeatureSetReaderJSON.js\";\nimport m from \"../../../tiling/TileKey.js\";\nclass g extends l {\n  constructor(e, t) {\n    super(e), this.bins = new Map(), this.featureCache = new Map(), this.done = !1, this._store = t;\n  }\n  reset() {\n    this.destroy(), this.done = !1;\n  }\n  destroy() {\n    const e = this.subscription.tile.key.level;\n    for (const t of this.featureCache.keys()) this._store.releaseDisplayIdForObjectId(`${t}.${e}`);\n    this.bins.clear(), this.featureCache.clear(), this.handledChunks.clear();\n  }\n  get tile() {\n    return this.subscription.tile;\n  }\n  *featuresWorldSpace() {\n    for (const e of this.featureCache.values()) {\n      const s = e.clone();\n      s.geometry && t(s.geometry, s.geometry, !1, !1, this.subscription.tile.transform), yield s;\n    }\n  }\n}\nclass y extends n {\n  static async create(t, s, a, i, n, l) {\n    const d = new u({\n        spatialReference: s\n      }),\n      c = await Promise.all(t.fields.map(async e => o.create(d, e))),\n      f = t.featureFilter ? await p.create({\n        geometryType: a.metadata.geometryType,\n        hasM: !1,\n        hasZ: !1,\n        timeInfo: a.metadata.timeInfo,\n        fieldsIndex: a.metadata.fieldsIndex,\n        spatialReference: s,\n        filterJSON: t.featureFilter\n      }) : null;\n    return \"geohash\" === t.index.type && (await r(s, e.WGS84)), new y(t, f, n, c, s, a, i, l);\n  }\n  constructor(e, t, s, a, r, o, n, l) {\n    super(o, n, r, a, l), this._schema = e, this._featureFilter = t, this._arcadeContextInfo = s, this._metadata = f.createFeature({\n      geometryType: \"esriGeometryPolygon\",\n      objectIdField: \"aggregateId\",\n      fieldsIndex: new i(e.fields).toJSON(),\n      globalIdField: null,\n      spatialReference: o.metadata.spatialReference,\n      outSpatialReference: o.metadata.outSpatialReference,\n      subtypeField: null,\n      subtypes: null,\n      timeInfo: null,\n      timeReferenceUnknownClient: null,\n      dateFieldsTimeZone: null,\n      typeIdField: null,\n      types: null\n    });\n  }\n  createState(e) {\n    return new g(e, this._attributeStore);\n  }\n  async *applyOverrideUpdate(e) {\n    for (const t of this._sendStates.values()) {\n      t.reset();\n      const e = new d(t.subscription, h.empty(this._source.metadata), !0, !1, {});\n      yield e;\n    }\n  }\n  displayMap(e, t, s) {\n    const a = new Map(e.map(e => [t(e), e])),\n      r = [];\n    for (const i of this._sendStates.values()) for (const e of i.featuresWorldSpace()) {\n      const {\n          objectId: t,\n          displayId: i\n        } = e,\n        o = a.get(t);\n      if (null != o) {\n        const e = s(i, o, t);\n        r.push(e), a.delete(t);\n      }\n    }\n    return r;\n  }\n  getDisplayFeatures(e) {\n    const t = new Set(e),\n      a = new Set(),\n      r = [];\n    for (const i of this._sendStates.values()) for (const e of i.featuresWorldSpace()) t.has(e.displayId) && !a.has(e.objectId) && (e.geometry && r.push({\n      ...s(e, this._metadata.geometryType, !1, !1),\n      displayId: e.displayId\n    }), a.add(e.objectId));\n    return {\n      features: [],\n      aggregates: r,\n      tracks: []\n    };\n  }\n  getFeatureObjectIdsForAggregate(e) {\n    for (const t of this._sendStates.values()) for (const s of t.bins.values()) if (s.id === e) return Array.from(s.containedObjectIds);\n    return [];\n  }\n  async *updateChunks() {\n    for (const e of this._sendStates.values()) yield* this._update(e, this._source);\n  }\n  forEachAggregateWorldSpace(e) {\n    const t = new Set();\n    for (const s of this._sendStates.values()) for (const a of s.featuresWorldSpace()) t.has(a.objectId) || (e(a), t.add(a.objectId));\n  }\n  _createIndexOptions(e) {\n    switch (this._schema.index.type) {\n      case \"geohash\":\n        return {\n          type: \"geohash\",\n          fields: this.aggregateFields,\n          featureFilter: this._featureFilter,\n          geohashLevel: this._schema.index.fixBinLevel,\n          spatialReference: this.spatialReference,\n          arcadeContextInfo: this._arcadeContextInfo,\n          scale: e.scale,\n          sqlOptions: this._sqlOptions\n        };\n      case \"grid\":\n        {\n          const t = this._schema.index.fixedBinLevel,\n            s = null != t ? e.tileInfoView.getLODInfoAt(t).scale : e.scale;\n          return {\n            type: \"grid\",\n            fields: this.aggregateFields,\n            cellSize: this._schema.index.size,\n            featureFilter: this._featureFilter,\n            spatialReference: this.spatialReference,\n            arcadeContextInfo: this._arcadeContextInfo,\n            scale: s,\n            sqlOptions: this._sqlOptions\n          };\n        }\n    }\n  }\n  async *_update(e, t) {\n    const {\n        handledChunks: s,\n        subscription: r,\n        bins: i,\n        featureCache: o\n      } = e,\n      n = r.tile;\n    if (e.done) return;\n    for (const a of t.chunks()) {\n      if (s.has(a.chunkId)) continue;\n      s.add(a.chunkId);\n      const t = a.queryInfo;\n      if (\"tileId\" in t) {\n        const e = new m(t.tileId);\n        if (e.level !== n.level || e.world !== n.key.world) continue;\n      }\n      a.getAggregateIndex(this._createIndexOptions(e.tile)).putBounded(i, e.tile.extent, e.tile.resolution);\n    }\n    const l = [],\n      d = r.tile.transform,\n      u = r.tile.key.level;\n    for (const c of i.values()) {\n      let e = o.get(c.id);\n      if (e) e.attributes = c.getAttributes();else {\n        const t = c.getGeometry(this.spatialReference, d);\n        e = new a(t, c.getAttributes(), null, c.id), t || (e.centroid = c.getGeometricCentroid(this.spatialReference, d)), e.displayId = this._attributeStore.createDisplayIdForObjectId(`${e.objectId}.${u}`), o.set(c.id, e);\n      }\n      l.push(e);\n    }\n    this.events.emit(\"changed\"), e.done = !t.updateTracking.updating;\n    const p = h.fromOptimizedFeatures(l, this._metadata, d),\n      f = p.getCursor(),\n      g = e.subscription.tile.createArcadeEvaluationOptions(this._arcadeContextInfo);\n    for (; f.next();) this._attributeStore.setAttributeData(f.getDisplayId(), f, g, this._sqlOptions);\n    const y = new c(e.subscription, p, [], e.done, {});\n    yield y;\n  }\n}\nexport { g as BinningState, y as BinningStrategy };","map":{"version":3,"names":["e","unquantizeOptimizedGeometry","t","convertToFeature","s","OptimizedFeature","a","checkProjectionSupport","r","i","ComputedAggregateField","o","AAggregateStrategy","n","ASendState","l","FeatureTileAppendMessage","d","FeatureTileUpdateMessage","c","ComputedAttributeStorage","u","p","FeatureMetadata","f","FeatureSetReaderJSON","h","m","g","constructor","bins","Map","featureCache","done","_store","reset","destroy","subscription","tile","key","level","keys","releaseDisplayIdForObjectId","clear","handledChunks","featuresWorldSpace","values","clone","geometry","transform","y","create","spatialReference","Promise","all","fields","map","featureFilter","geometryType","metadata","hasM","hasZ","timeInfo","fieldsIndex","filterJSON","index","type","WGS84","_schema","_featureFilter","_arcadeContextInfo","_metadata","createFeature","objectIdField","toJSON","globalIdField","outSpatialReference","subtypeField","subtypes","timeReferenceUnknownClient","dateFieldsTimeZone","typeIdField","types","createState","_attributeStore","applyOverrideUpdate","_sendStates","empty","_source","displayMap","objectId","displayId","get","push","delete","getDisplayFeatures","Set","has","add","features","aggregates","tracks","getFeatureObjectIdsForAggregate","id","Array","from","containedObjectIds","updateChunks","_update","forEachAggregateWorldSpace","_createIndexOptions","aggregateFields","geohashLevel","fixBinLevel","arcadeContextInfo","scale","sqlOptions","_sqlOptions","fixedBinLevel","tileInfoView","getLODInfoAt","cellSize","size","chunks","chunkId","queryInfo","tileId","world","getAggregateIndex","putBounded","extent","resolution","attributes","getAttributes","getGeometry","centroid","getGeometricCentroid","createDisplayIdForObjectId","set","events","emit","updateTracking","updating","fromOptimizedFeatures","getCursor","createArcadeEvaluationOptions","next","setAttributeData","getDisplayId","BinningState","BinningStrategy"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/layers/features/processor/BinningStrategy.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../geometry/SpatialReference.js\";import{unquantizeOptimizedGeometry as t,convertToFeature as s}from\"../../../../../layers/graphics/featureConversionUtils.js\";import{OptimizedFeature as a}from\"../../../../../layers/graphics/OptimizedFeature.js\";import{checkProjectionSupport as r}from\"../../../../../layers/graphics/data/projectionSupport.js\";import i from\"../../../../../layers/support/FieldsIndex.js\";import{ComputedAggregateField as o}from\"../aggregation/ComputedAggregateField.js\";import{AAggregateStrategy as n}from\"./AAggregateStrategy.js\";import{ASendState as l}from\"./AProcessorStrategy.js\";import{FeatureTileAppendMessage as d,FeatureTileUpdateMessage as c}from\"../sources/FeatureSourceMessage.js\";import{ComputedAttributeStorage as u}from\"../support/ComputedAttributeStorage.js\";import p from\"../support/FeatureFilterEvaluator.js\";import{FeatureMetadata as f}from\"../support/FeatureMetadata.js\";import{FeatureSetReaderJSON as h}from\"../support/FeatureSetReaderJSON.js\";import m from\"../../../tiling/TileKey.js\";class g extends l{constructor(e,t){super(e),this.bins=new Map,this.featureCache=new Map,this.done=!1,this._store=t}reset(){this.destroy(),this.done=!1}destroy(){const e=this.subscription.tile.key.level;for(const t of this.featureCache.keys())this._store.releaseDisplayIdForObjectId(`${t}.${e}`);this.bins.clear(),this.featureCache.clear(),this.handledChunks.clear()}get tile(){return this.subscription.tile}*featuresWorldSpace(){for(const e of this.featureCache.values()){const s=e.clone();s.geometry&&t(s.geometry,s.geometry,!1,!1,this.subscription.tile.transform),yield s}}}class y extends n{static async create(t,s,a,i,n,l){const d=new u({spatialReference:s}),c=await Promise.all(t.fields.map((async e=>o.create(d,e)))),f=t.featureFilter?await p.create({geometryType:a.metadata.geometryType,hasM:!1,hasZ:!1,timeInfo:a.metadata.timeInfo,fieldsIndex:a.metadata.fieldsIndex,spatialReference:s,filterJSON:t.featureFilter}):null;return\"geohash\"===t.index.type&&await r(s,e.WGS84),new y(t,f,n,c,s,a,i,l)}constructor(e,t,s,a,r,o,n,l){super(o,n,r,a,l),this._schema=e,this._featureFilter=t,this._arcadeContextInfo=s,this._metadata=f.createFeature({geometryType:\"esriGeometryPolygon\",objectIdField:\"aggregateId\",fieldsIndex:new i(e.fields).toJSON(),globalIdField:null,spatialReference:o.metadata.spatialReference,outSpatialReference:o.metadata.outSpatialReference,subtypeField:null,subtypes:null,timeInfo:null,timeReferenceUnknownClient:null,dateFieldsTimeZone:null,typeIdField:null,types:null})}createState(e){return new g(e,this._attributeStore)}async*applyOverrideUpdate(e){for(const t of this._sendStates.values()){t.reset();const e=new d(t.subscription,h.empty(this._source.metadata),!0,!1,{});yield e}}displayMap(e,t,s){const a=new Map(e.map((e=>[t(e),e]))),r=[];for(const i of this._sendStates.values())for(const e of i.featuresWorldSpace()){const{objectId:t,displayId:i}=e,o=a.get(t);if(null!=o){const e=s(i,o,t);r.push(e),a.delete(t)}}return r}getDisplayFeatures(e){const t=new Set(e),a=new Set,r=[];for(const i of this._sendStates.values())for(const e of i.featuresWorldSpace())t.has(e.displayId)&&!a.has(e.objectId)&&(e.geometry&&r.push({...s(e,this._metadata.geometryType,!1,!1),displayId:e.displayId}),a.add(e.objectId));return{features:[],aggregates:r,tracks:[]}}getFeatureObjectIdsForAggregate(e){for(const t of this._sendStates.values())for(const s of t.bins.values())if(s.id===e)return Array.from(s.containedObjectIds);return[]}async*updateChunks(){for(const e of this._sendStates.values())yield*this._update(e,this._source)}forEachAggregateWorldSpace(e){const t=new Set;for(const s of this._sendStates.values())for(const a of s.featuresWorldSpace())t.has(a.objectId)||(e(a),t.add(a.objectId))}_createIndexOptions(e){switch(this._schema.index.type){case\"geohash\":return{type:\"geohash\",fields:this.aggregateFields,featureFilter:this._featureFilter,geohashLevel:this._schema.index.fixBinLevel,spatialReference:this.spatialReference,arcadeContextInfo:this._arcadeContextInfo,scale:e.scale,sqlOptions:this._sqlOptions};case\"grid\":{const t=this._schema.index.fixedBinLevel,s=null!=t?e.tileInfoView.getLODInfoAt(t).scale:e.scale;return{type:\"grid\",fields:this.aggregateFields,cellSize:this._schema.index.size,featureFilter:this._featureFilter,spatialReference:this.spatialReference,arcadeContextInfo:this._arcadeContextInfo,scale:s,sqlOptions:this._sqlOptions}}}}async*_update(e,t){const{handledChunks:s,subscription:r,bins:i,featureCache:o}=e,n=r.tile;if(e.done)return;for(const a of t.chunks()){if(s.has(a.chunkId))continue;s.add(a.chunkId);const t=a.queryInfo;if(\"tileId\"in t){const e=new m(t.tileId);if(e.level!==n.level||e.world!==n.key.world)continue}a.getAggregateIndex(this._createIndexOptions(e.tile)).putBounded(i,e.tile.extent,e.tile.resolution)}const l=[],d=r.tile.transform,u=r.tile.key.level;for(const c of i.values()){let e=o.get(c.id);if(e)e.attributes=c.getAttributes();else{const t=c.getGeometry(this.spatialReference,d);e=new a(t,c.getAttributes(),null,c.id),t||(e.centroid=c.getGeometricCentroid(this.spatialReference,d)),e.displayId=this._attributeStore.createDisplayIdForObjectId(`${e.objectId}.${u}`),o.set(c.id,e)}l.push(e)}this.events.emit(\"changed\"),e.done=!t.updateTracking.updating;const p=h.fromOptimizedFeatures(l,this._metadata,d),f=p.getCursor(),g=e.subscription.tile.createArcadeEvaluationOptions(this._arcadeContextInfo);for(;f.next();)this._attributeStore.setAttributeData(f.getDisplayId(),f,g,this._sqlOptions);const y=new c(e.subscription,p,[],e.done,{});yield y}}export{g as BinningState,y as BinningStrategy};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}