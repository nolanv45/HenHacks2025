{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from \"../../request.js\";\nimport t from \"../../core/Error.js\";\nimport { join as r, getPathExtension as s } from \"../../core/urlUtils.js\";\nasync function o(e, t = {}, s) {\n  await e.load(s);\n  const o = r(e.itemUrl, \"resources\"),\n    {\n      start: a = 1,\n      num: n = 10,\n      sortOrder: c = \"asc\",\n      sortField: l = \"resource\"\n    } = t,\n    i = {\n      query: {\n        start: a,\n        num: n,\n        sortOrder: c,\n        sortField: l,\n        token: e.apiKey\n      },\n      signal: s?.signal\n    },\n    u = await e.portal.request(o, i);\n  return {\n    total: u.total,\n    nextStart: u.nextStart,\n    resources: u.resources.map(({\n      created: t,\n      size: r,\n      resource: s\n    }) => ({\n      created: new Date(t),\n      size: r,\n      resource: e.resourceFromPath(s)\n    }))\n  };\n}\nasync function a(e, s, o, a) {\n  const n = new Map();\n  for (const {\n    resource: r,\n    content: i,\n    compress: u,\n    access: p\n  } of s) {\n    if (!r.hasPath()) throw new t(`portal-item-resource-${o}:invalid-path`, \"Resource does not have a valid path\");\n    const [e, s] = l(r.path),\n      a = `${e}/${u ?? \"\"}/${p ?? \"\"}`;\n    n.has(a) || n.set(a, {\n      prefix: e,\n      compress: u,\n      access: p,\n      files: []\n    });\n    n.get(a).files.push({\n      fileName: s,\n      content: i\n    });\n  }\n  await e.load(a);\n  const c = r(e.userItemUrl, \"add\" === o ? \"addResources\" : \"updateResources\");\n  for (const {\n    prefix: t,\n    compress: r,\n    access: l,\n    files: i\n  } of n.values()) {\n    const s = 25;\n    for (let o = 0; o < i.length; o += s) {\n      const n = i.slice(o, o + s),\n        u = new FormData();\n      t && \".\" !== t && u.append(\"resourcesPrefix\", t), r && u.append(\"compress\", \"true\"), l && u.append(\"access\", l);\n      let p = 0;\n      for (const {\n        fileName: e,\n        content: t\n      } of n) u.append(\"file\" + ++p, t, e);\n      u.append(\"f\", \"json\"), await e.portal.request(c, {\n        method: \"post\",\n        body: u,\n        signal: a?.signal\n      });\n    }\n  }\n}\nasync function n(e, s, o) {\n  if (!s.hasPath()) throw new t(\"portal-item-resources-remove:invalid-path\", \"Resource does not have a valid path\");\n  await e.load(o);\n  const a = r(e.userItemUrl, \"removeResources\");\n  await e.portal.request(a, {\n    method: \"post\",\n    query: {\n      resource: s.path\n    },\n    signal: o?.signal\n  }), s.portalItem = null;\n}\nasync function c(e, t) {\n  await e.load(t);\n  const s = r(e.userItemUrl, \"removeResources\");\n  return e.portal.request(s, {\n    method: \"post\",\n    query: {\n      deleteAll: !0\n    },\n    signal: t?.signal\n  });\n}\nfunction l(e) {\n  const t = e.lastIndexOf(\"/\");\n  return -1 === t ? [\".\", e] : [e.slice(0, t), e.slice(t + 1)];\n}\nfunction i(e) {\n  const [t, r] = u(e),\n    [s, o] = l(t);\n  return [s, o, r];\n}\nfunction u(e) {\n  const t = s(e);\n  return null == t ? [e, \"\"] : [e.slice(0, e.length - t.length - 1), `.${t}`];\n}\nasync function p(t) {\n  if (\"blob\" === t.type) return t.blob;\n  if (\"json\" === t.type) return new Blob([t.jsonString], {\n    type: \"application/json\"\n  });\n  return (await e(t.url, {\n    responseType: \"blob\"\n  })).data;\n}\nfunction f(e, t) {\n  if (!e.hasPath()) return null;\n  const [s,, o] = i(e.path);\n  return e.portalItem.resourceFromPath(r(s, t + o));\n}\nfunction m(e, t) {\n  if (!e.hasPath()) return null;\n  const [s,, o] = i(e.path);\n  return e.portalItem.resourceFromPath(r(s, t + o));\n}\nexport { a as addOrUpdateResources, p as contentToBlob, o as fetchResources, f as getSiblingOfSameType, m as getSiblingOfSameTypeI, c as removeAllResources, n as removeResource, i as splitPrefixFileNameAndExtension };","map":{"version":3,"names":["e","t","join","r","getPathExtension","s","o","load","itemUrl","start","a","num","n","sortOrder","c","sortField","l","i","query","token","apiKey","signal","u","portal","request","total","nextStart","resources","map","created","size","resource","Date","resourceFromPath","Map","content","compress","access","p","hasPath","path","has","set","prefix","files","get","push","fileName","userItemUrl","values","length","slice","FormData","append","method","body","portalItem","deleteAll","lastIndexOf","type","blob","Blob","jsonString","url","responseType","data","f","m","addOrUpdateResources","contentToBlob","fetchResources","getSiblingOfSameType","getSiblingOfSameTypeI","removeAllResources","removeResource","splitPrefixFileNameAndExtension"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/portal/support/resourceUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import t from\"../../core/Error.js\";import{join as r,getPathExtension as s}from\"../../core/urlUtils.js\";async function o(e,t={},s){await e.load(s);const o=r(e.itemUrl,\"resources\"),{start:a=1,num:n=10,sortOrder:c=\"asc\",sortField:l=\"resource\"}=t,i={query:{start:a,num:n,sortOrder:c,sortField:l,token:e.apiKey},signal:s?.signal},u=await e.portal.request(o,i);return{total:u.total,nextStart:u.nextStart,resources:u.resources.map((({created:t,size:r,resource:s})=>({created:new Date(t),size:r,resource:e.resourceFromPath(s)})))}}async function a(e,s,o,a){const n=new Map;for(const{resource:r,content:i,compress:u,access:p}of s){if(!r.hasPath())throw new t(`portal-item-resource-${o}:invalid-path`,\"Resource does not have a valid path\");const[e,s]=l(r.path),a=`${e}/${u??\"\"}/${p??\"\"}`;n.has(a)||n.set(a,{prefix:e,compress:u,access:p,files:[]});n.get(a).files.push({fileName:s,content:i})}await e.load(a);const c=r(e.userItemUrl,\"add\"===o?\"addResources\":\"updateResources\");for(const{prefix:t,compress:r,access:l,files:i}of n.values()){const s=25;for(let o=0;o<i.length;o+=s){const n=i.slice(o,o+s),u=new FormData;t&&\".\"!==t&&u.append(\"resourcesPrefix\",t),r&&u.append(\"compress\",\"true\"),l&&u.append(\"access\",l);let p=0;for(const{fileName:e,content:t}of n)u.append(\"file\"+ ++p,t,e);u.append(\"f\",\"json\"),await e.portal.request(c,{method:\"post\",body:u,signal:a?.signal})}}}async function n(e,s,o){if(!s.hasPath())throw new t(\"portal-item-resources-remove:invalid-path\",\"Resource does not have a valid path\");await e.load(o);const a=r(e.userItemUrl,\"removeResources\");await e.portal.request(a,{method:\"post\",query:{resource:s.path},signal:o?.signal}),s.portalItem=null}async function c(e,t){await e.load(t);const s=r(e.userItemUrl,\"removeResources\");return e.portal.request(s,{method:\"post\",query:{deleteAll:!0},signal:t?.signal})}function l(e){const t=e.lastIndexOf(\"/\");return-1===t?[\".\",e]:[e.slice(0,t),e.slice(t+1)]}function i(e){const[t,r]=u(e),[s,o]=l(t);return[s,o,r]}function u(e){const t=s(e);return null==t?[e,\"\"]:[e.slice(0,e.length-t.length-1),`.${t}`]}async function p(t){if(\"blob\"===t.type)return t.blob;if(\"json\"===t.type)return new Blob([t.jsonString],{type:\"application/json\"});return(await e(t.url,{responseType:\"blob\"})).data}function f(e,t){if(!e.hasPath())return null;const[s,,o]=i(e.path);return e.portalItem.resourceFromPath(r(s,t+o))}function m(e,t){if(!e.hasPath())return null;const[s,,o]=i(e.path);return e.portalItem.resourceFromPath(r(s,t+o))}export{a as addOrUpdateResources,p as contentToBlob,o as fetchResources,f as getSiblingOfSameType,m as getSiblingOfSameTypeI,c as removeAllResources,n as removeResource,i as splitPrefixFileNameAndExtension};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}