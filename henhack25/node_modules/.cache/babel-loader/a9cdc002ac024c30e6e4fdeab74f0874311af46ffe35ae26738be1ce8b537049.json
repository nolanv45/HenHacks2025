{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport \"../../../../core/has.js\";\nimport { secondsFromMilliseconds as t } from \"../../../../core/time.js\";\nimport { fromValues as e } from \"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";\nimport { create as r } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { fromValues as i } from \"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";\nimport { isColorOrColorEmission as a, isHighlightOrOID as s, ShaderOutput as o } from \"../core/shaderLibrary/ShaderOutput.js\";\nimport { olidEnabled as n } from \"../effects/geometry/olidUtils.js\";\nimport { MaterialParameters as l } from \"../lib/Material.js\";\nimport { OITPolygonOffsetLimit as c } from \"../lib/OrderIndependentTransparency.js\";\nimport { RenderSlot as m } from \"../lib/RenderSlot.js\";\nimport { DefaultBufferWriter as h } from \"./DefaultBufferWriter.js\";\nimport { PositionUVLayoutObjectAndLayerId as f, PositionUVLayout as p } from \"./DefaultLayouts.js\";\nimport { TriangleMaterial as u } from \"./TriangleMaterial.js\";\nimport { WaterGLMaterial as d } from \"./WaterGLMaterial.js\";\nimport { WaterTechniqueConfiguration as g } from \"./WaterTechniqueConfiguration.js\";\nclass _ extends u {\n  constructor(t, e) {\n    super(t, v), this.produces = new Map([[m.OPAQUE_MATERIAL, t => a(t) && !this.parameters.transparent || s(t)], [m.TRANSPARENT_MATERIAL, t => a(t) && this.parameters.transparent || s(t)], [m.DRAPED_MATERIAL, t => this.parameters.draped && a(t) || s(t)], [m.DRAPED_WATER, t => t === o.Normal]]), this._configuration = new g(e.spherical, e.doublePrecisionRequiresObfuscation);\n  }\n  getConfiguration(t, e) {\n    return this._configuration.output = t, this._configuration.writeDepth = !0, this._configuration.receiveShadows = e.shadowMap.enabled, this._configuration.hasSlicePlane = this.parameters.hasSlicePlane, this._configuration.transparent = this.parameters.transparent, this._configuration.screenSpaceReflections = null != e.ssr.lastFrameColor, this._configuration.cloudReflections = null != e.clouds.data, this._configuration.draped = this.parameters.draped, this._configuration.oitPass = e.oitPass, this._configuration.enableOffset = e.camera.relativeElevation < c, this._configuration.terrainDepthTest = e.terrainDepthTest && a(t), this._configuration.cullAboveTerrain = e.cullAboveTerrain, this._configuration;\n  }\n  get visible() {\n    return !0;\n  }\n  update(e) {\n    return this.setParameters({\n      timeElapsed: t(e.time) * this.parameters.animationSpeed\n    }, !1), this._animationEnabled(e.camera) && e.dt > 0;\n  }\n  _animationEnabled(t) {\n    const e = Math.min(t.relativeElevation, t.distance);\n    return Math.sqrt(this.parameters.waveTextureRepeat / this.parameters.waveStrength) * e < b;\n  }\n  createGLMaterial(t) {\n    return new d(t);\n  }\n  createBufferWriter() {\n    return new h(n() ? f : p);\n  }\n  get test() {}\n}\nclass v extends l {\n  constructor() {\n    super(...arguments), this.waveStrength = .06, this.waveTextureRepeat = 32, this.waveDirection = e(1, 0), this.waveVelocity = .05, this.flowStrength = .015, this.flowOffset = -.5, this.animationSpeed = .35, this.timeElapsed = 0, this.color = i(0, 0, 0, 0), this.transparent = !0, this.hasSlicePlane = !1, this.draped = !1, this.origin = r(), this.modelTransformation = null;\n  }\n}\nconst b = 35e3;\nexport { v as Parameters, _ as WaterMaterial };","map":{"version":3,"names":["secondsFromMilliseconds","t","fromValues","e","create","r","i","isColorOrColorEmission","a","isHighlightOrOID","s","ShaderOutput","o","olidEnabled","n","MaterialParameters","l","OITPolygonOffsetLimit","c","RenderSlot","m","DefaultBufferWriter","h","PositionUVLayoutObjectAndLayerId","f","PositionUVLayout","p","TriangleMaterial","u","WaterGLMaterial","d","WaterTechniqueConfiguration","g","_","constructor","v","produces","Map","OPAQUE_MATERIAL","parameters","transparent","TRANSPARENT_MATERIAL","DRAPED_MATERIAL","draped","DRAPED_WATER","Normal","_configuration","spherical","doublePrecisionRequiresObfuscation","getConfiguration","output","writeDepth","receiveShadows","shadowMap","enabled","hasSlicePlane","screenSpaceReflections","ssr","lastFrameColor","cloudReflections","clouds","data","oitPass","enableOffset","camera","relativeElevation","terrainDepthTest","cullAboveTerrain","visible","update","setParameters","timeElapsed","time","animationSpeed","_animationEnabled","dt","Math","min","distance","sqrt","waveTextureRepeat","waveStrength","b","createGLMaterial","createBufferWriter","test","arguments","waveDirection","waveVelocity","flowStrength","flowOffset","color","origin","modelTransformation","Parameters","WaterMaterial"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/3d/webgl-engine/materials/WaterMaterial.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{secondsFromMilliseconds as t}from\"../../../../core/time.js\";import{fromValues as e}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{create as r}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{fromValues as i}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{isColorOrColorEmission as a,isHighlightOrOID as s,ShaderOutput as o}from\"../core/shaderLibrary/ShaderOutput.js\";import{olidEnabled as n}from\"../effects/geometry/olidUtils.js\";import{MaterialParameters as l}from\"../lib/Material.js\";import{OITPolygonOffsetLimit as c}from\"../lib/OrderIndependentTransparency.js\";import{RenderSlot as m}from\"../lib/RenderSlot.js\";import{DefaultBufferWriter as h}from\"./DefaultBufferWriter.js\";import{PositionUVLayoutObjectAndLayerId as f,PositionUVLayout as p}from\"./DefaultLayouts.js\";import{TriangleMaterial as u}from\"./TriangleMaterial.js\";import{WaterGLMaterial as d}from\"./WaterGLMaterial.js\";import{WaterTechniqueConfiguration as g}from\"./WaterTechniqueConfiguration.js\";class _ extends u{constructor(t,e){super(t,v),this.produces=new Map([[m.OPAQUE_MATERIAL,t=>a(t)&&!this.parameters.transparent||s(t)],[m.TRANSPARENT_MATERIAL,t=>a(t)&&this.parameters.transparent||s(t)],[m.DRAPED_MATERIAL,t=>this.parameters.draped&&a(t)||s(t)],[m.DRAPED_WATER,t=>t===o.Normal]]),this._configuration=new g(e.spherical,e.doublePrecisionRequiresObfuscation)}getConfiguration(t,e){return this._configuration.output=t,this._configuration.writeDepth=!0,this._configuration.receiveShadows=e.shadowMap.enabled,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.transparent=this.parameters.transparent,this._configuration.screenSpaceReflections=null!=e.ssr.lastFrameColor,this._configuration.cloudReflections=null!=e.clouds.data,this._configuration.draped=this.parameters.draped,this._configuration.oitPass=e.oitPass,this._configuration.enableOffset=e.camera.relativeElevation<c,this._configuration.terrainDepthTest=e.terrainDepthTest&&a(t),this._configuration.cullAboveTerrain=e.cullAboveTerrain,this._configuration}get visible(){return!0}update(e){return this.setParameters({timeElapsed:t(e.time)*this.parameters.animationSpeed},!1),this._animationEnabled(e.camera)&&e.dt>0}_animationEnabled(t){const e=Math.min(t.relativeElevation,t.distance);return Math.sqrt(this.parameters.waveTextureRepeat/this.parameters.waveStrength)*e<b}createGLMaterial(t){return new d(t)}createBufferWriter(){return new h(n()?f:p)}get test(){}}class v extends l{constructor(){super(...arguments),this.waveStrength=.06,this.waveTextureRepeat=32,this.waveDirection=e(1,0),this.waveVelocity=.05,this.flowStrength=.015,this.flowOffset=-.5,this.animationSpeed=.35,this.timeElapsed=0,this.color=i(0,0,0,0),this.transparent=!0,this.hasSlicePlane=!1,this.draped=!1,this.origin=r(),this.modelTransformation=null}}const b=35e3;export{v as Parameters,_ as WaterMaterial};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}