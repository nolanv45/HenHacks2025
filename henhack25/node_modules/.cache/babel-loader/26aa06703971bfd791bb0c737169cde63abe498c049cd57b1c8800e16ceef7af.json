{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { clock as t } from \"../../../core/clock.js\";\nimport { removeMaybe as e } from \"../../../core/maybe.js\";\nimport { InputHandler as i } from \"../InputHandler.js\";\nimport { DefaultParameters as n, euclideanDistance as o } from \"./support.js\";\nclass r extends i {\n  constructor() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : n.maximumClickDelay;\n    let i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : n.movementUntilMouseDrag;\n    let o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : n.movementUntilPenDrag;\n    let r = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : n.movementUntilTouchDrag;\n    let s = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : n.holdDelay;\n    let a = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : t;\n    super(!1), this._maximumClickDelay = e, this._movementUntilMouseDrag = i, this._movementUntilPenDrag = o, this._movementUntilTouchDrag = r, this._holdDelay = s, this._clock = a, this._pointerState = new Map(), this._pointerDrag = this.registerOutgoing(\"pointer-drag\"), this._immediateClick = this.registerOutgoing(\"immediate-click\"), this._pointerHold = this.registerOutgoing(\"hold\"), this.registerIncoming(\"pointer-down\", t => this._handlePointerDown(t)), this.registerIncoming(\"pointer-up\", t => this._handlePointerLoss(t, \"pointer-up\")), this.registerIncoming(\"pointer-capture-lost\", t => this._handlePointerLoss(t, \"pointer-capture-lost\")), this.registerIncoming(\"pointer-cancel\", t => this._handlePointerLoss(t, \"pointer-cancel\")), this._moveHandle = this.registerIncoming(\"pointer-move\", t => this._handlePointerMove(t)), this._moveHandle.pause();\n  }\n  onUninstall() {\n    this._pointerState.forEach(t => {\n      t.holdTimeout = e(t.holdTimeout);\n    }), super.onUninstall();\n  }\n  _handlePointerDown(t) {\n    const e = t.data,\n      i = e.native.pointerId;\n    let n = null;\n    0 === this._pointerState.size && (n = this._clock.setTimeout(() => {\n      const e = this._pointerState.get(i);\n      if (e) {\n        if (!e.isDragging) {\n          const i = e.previousEvent;\n          this._pointerHold.emit(i, void 0, t.modifiers), e.holdEmitted = !0;\n        }\n        e.holdTimeout = null;\n      }\n    }, this._holdDelay));\n    const o = {\n      startEvent: e,\n      previousEvent: e,\n      startTimestamp: t.timestamp,\n      isDragging: !1,\n      downButton: e.native.button,\n      holdTimeout: n,\n      modifiers: new Set()\n    };\n    this._pointerState.set(i, o), this.startCapturingPointer(e.native), this._moveHandle.resume(), this._pointerState.size > 1 && this._startDragging(t);\n  }\n  _handlePointerMove(t) {\n    const e = t.data,\n      i = e.native.pointerId,\n      n = this._pointerState.get(i);\n    if (n) {\n      if (n.isDragging) this._pointerDrag.emit(s(\"update\", n, e), void 0, n.modifiers);else {\n        o(e, n.startEvent) > this._getDragThreshold(e.native.pointerType) && this._startDragging(t);\n      }\n      n.previousEvent = e;\n    }\n  }\n  _getDragThreshold(t) {\n    switch (t) {\n      case \"touch\":\n        return this._movementUntilTouchDrag;\n      case \"pen\":\n        return this._movementUntilPenDrag;\n      default:\n        return this._movementUntilMouseDrag;\n    }\n  }\n  _startDragging(t) {\n    const e = t.data,\n      i = e.native.pointerId;\n    this._pointerState.forEach(n => {\n      null != n.holdTimeout && (n.holdTimeout.remove(), n.holdTimeout = null), n.isDragging || (n.modifiers = t.modifiers, n.isDragging = !0, i === n.startEvent.native.pointerId ? this._pointerDrag.emit(s(\"start\", n, e)) : this._pointerDrag.emit(s(\"start\", n, n.previousEvent), t.timestamp));\n    });\n  }\n  _handlePointerLoss(t, e) {\n    const i = t.data,\n      n = i.native.pointerId,\n      o = this._pointerState.get(n);\n    if (o) {\n      if (null != o.holdTimeout && (o.holdTimeout.remove(), o.holdTimeout = null), o.isDragging) this._pointerDrag.emit(s(\"end\", o, \"pointer-up\" === e ? i : o.previousEvent), void 0, o.modifiers);else if (\"pointer-up\" === e && o.downButton === i.native.button) {\n        t.timestamp - o.startTimestamp <= this._maximumClickDelay && !o.holdEmitted && this._immediateClick.emit(i);\n      }\n      this._pointerState.delete(n), this.stopCapturingPointer(i.native), 0 === this._pointerState.size && this._moveHandle.pause();\n    }\n  }\n}\nfunction s(t, e, i) {\n  return {\n    action: t,\n    startEvent: e.startEvent,\n    previousEvent: e.previousEvent,\n    currentEvent: i\n  };\n}\nexport { r as PointerClickHoldAndDrag };","map":{"version":3,"names":["clock","t","removeMaybe","e","InputHandler","i","DefaultParameters","n","euclideanDistance","o","r","constructor","arguments","length","undefined","maximumClickDelay","movementUntilMouseDrag","movementUntilPenDrag","movementUntilTouchDrag","s","holdDelay","a","_maximumClickDelay","_movementUntilMouseDrag","_movementUntilPenDrag","_movementUntilTouchDrag","_holdDelay","_clock","_pointerState","Map","_pointerDrag","registerOutgoing","_immediateClick","_pointerHold","registerIncoming","_handlePointerDown","_handlePointerLoss","_moveHandle","_handlePointerMove","pause","onUninstall","forEach","holdTimeout","data","native","pointerId","size","setTimeout","get","isDragging","previousEvent","emit","modifiers","holdEmitted","startEvent","startTimestamp","timestamp","downButton","button","Set","set","startCapturingPointer","resume","_startDragging","_getDragThreshold","pointerType","remove","delete","stopCapturingPointer","action","currentEvent","PointerClickHoldAndDrag"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/input/recognizers/PointerClickHoldAndDrag.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{clock as t}from\"../../../core/clock.js\";import{removeMaybe as e}from\"../../../core/maybe.js\";import{InputHandler as i}from\"../InputHandler.js\";import{DefaultParameters as n,euclideanDistance as o}from\"./support.js\";class r extends i{constructor(e=n.maximumClickDelay,i=n.movementUntilMouseDrag,o=n.movementUntilPenDrag,r=n.movementUntilTouchDrag,s=n.holdDelay,a=t){super(!1),this._maximumClickDelay=e,this._movementUntilMouseDrag=i,this._movementUntilPenDrag=o,this._movementUntilTouchDrag=r,this._holdDelay=s,this._clock=a,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing(\"pointer-drag\"),this._immediateClick=this.registerOutgoing(\"immediate-click\"),this._pointerHold=this.registerOutgoing(\"hold\"),this.registerIncoming(\"pointer-down\",(t=>this._handlePointerDown(t))),this.registerIncoming(\"pointer-up\",(t=>this._handlePointerLoss(t,\"pointer-up\"))),this.registerIncoming(\"pointer-capture-lost\",(t=>this._handlePointerLoss(t,\"pointer-capture-lost\"))),this.registerIncoming(\"pointer-cancel\",(t=>this._handlePointerLoss(t,\"pointer-cancel\"))),this._moveHandle=this.registerIncoming(\"pointer-move\",(t=>this._handlePointerMove(t))),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach((t=>{t.holdTimeout=e(t.holdTimeout)})),super.onUninstall()}_handlePointerDown(t){const e=t.data,i=e.native.pointerId;let n=null;0===this._pointerState.size&&(n=this._clock.setTimeout((()=>{const e=this._pointerState.get(i);if(e){if(!e.isDragging){const i=e.previousEvent;this._pointerHold.emit(i,void 0,t.modifiers),e.holdEmitted=!0}e.holdTimeout=null}}),this._holdDelay));const o={startEvent:e,previousEvent:e,startTimestamp:t.timestamp,isDragging:!1,downButton:e.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(i,o),this.startCapturingPointer(e.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_handlePointerMove(t){const e=t.data,i=e.native.pointerId,n=this._pointerState.get(i);if(n){if(n.isDragging)this._pointerDrag.emit(s(\"update\",n,e),void 0,n.modifiers);else{o(e,n.startEvent)>this._getDragThreshold(e.native.pointerType)&&this._startDragging(t)}n.previousEvent=e}}_getDragThreshold(t){switch(t){case\"touch\":return this._movementUntilTouchDrag;case\"pen\":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(t){const e=t.data,i=e.native.pointerId;this._pointerState.forEach((n=>{null!=n.holdTimeout&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=t.modifiers,n.isDragging=!0,i===n.startEvent.native.pointerId?this._pointerDrag.emit(s(\"start\",n,e)):this._pointerDrag.emit(s(\"start\",n,n.previousEvent),t.timestamp))}))}_handlePointerLoss(t,e){const i=t.data,n=i.native.pointerId,o=this._pointerState.get(n);if(o){if(null!=o.holdTimeout&&(o.holdTimeout.remove(),o.holdTimeout=null),o.isDragging)this._pointerDrag.emit(s(\"end\",o,\"pointer-up\"===e?i:o.previousEvent),void 0,o.modifiers);else if(\"pointer-up\"===e&&o.downButton===i.native.button){t.timestamp-o.startTimestamp<=this._maximumClickDelay&&!o.holdEmitted&&this._immediateClick.emit(i)}this._pointerState.delete(n),this.stopCapturingPointer(i.native),0===this._pointerState.size&&this._moveHandle.pause()}}}function s(t,e,i){return{action:t,startEvent:e.startEvent,previousEvent:e.previousEvent,currentEvent:i}}export{r as PointerClickHoldAndDrag};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}