{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport { makeHandle as i } from \"../../../core/handleUtils.js\";\nimport t from \"../../../core/Logger.js\";\nimport { isAbortError as s, waitTick as r } from \"../../../core/promiseUtils.js\";\nimport { property as o } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/RandomLCG.js\";\nimport { subclass as l } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { equals as h } from \"../../../geometry/support/spatialReferenceUtils.js\";\nimport { GraphicsCollection as a } from \"../../../support/GraphicsCollection.js\";\nimport \"../../../core/Error.js\";\nimport \"../../../core/scheduling.js\";\nimport \"../../../core/accessorSupport/tracking/Flags.js\";\nimport \"../../../core/colorUtils.js\";\nimport \"../../../config.js\";\nimport \"../../../symbols/cim/defaultCIMValues.js\";\nimport \"../../../symbols/cim/enums.js\";\nimport \"../../../core/floatRGBA.js\";\nimport \"../../../geometry/Extent.js\";\nimport \"../../../geometry/Geometry.js\";\nimport \"../../../geometry/Multipoint.js\";\nimport \"../../../geometry/Point.js\";\nimport \"../../../geometry/Polygon.js\";\nimport \"../../../geometry/Polyline.js\";\nimport \"../engine/webgl/definitions.js\";\nimport \"../engine/webgl/animations/instructions.js\";\nimport \"../../../core/mathUtils.js\";\nimport \"../../../symbols/Font.js\";\nimport \"../../../core/ObjectPool.js\";\nimport \"../../../geometry/support/Axis.js\";\nimport \"../../../geometry/support/TileClipper.js\";\nimport \"../../../symbols/cim/effects/EffectAddControlPoints.js\";\nimport \"../../../symbols/cim/effects/EffectArrow.js\";\nimport \"../../../symbols/cim/effects/EffectBuffer.js\";\nimport \"../../../symbols/cim/effects/EffectControlMeasureLine.js\";\nimport \"../../../symbols/cim/effects/EffectCut.js\";\nimport \"../../../symbols/cim/effects/EffectDashes.js\";\nimport \"../../../symbols/cim/effects/EffectDonut.js\";\nimport \"../../../symbols/cim/effects/EffectJog.js\";\nimport \"../../../symbols/cim/effects/EffectMove.js\";\nimport \"../../../symbols/cim/effects/EffectOffset.js\";\nimport \"../../../symbols/cim/effects/EffectReverse.js\";\nimport \"../../../symbols/cim/effects/EffectRotate.js\";\nimport \"../../../symbols/cim/effects/EffectScale.js\";\nimport \"../../../symbols/cim/effects/EffectWave.js\";\nimport \"../../../symbols/cim/placements/PlacementAlongLineSameSize.js\";\nimport \"../../../symbols/cim/placements/PlacementAtExtremities.js\";\nimport \"../../../symbols/cim/placements/PlacementAtRatioPositions.js\";\nimport \"../../../symbols/cim/placements/PlacementInsidePolygon.js\";\nimport \"../../../symbols/cim/placements/PlacementOnLine.js\";\nimport \"../../../symbols/cim/placements/PlacementOnVertices.js\";\nimport \"../../../symbols/cim/placements/PlacementPolygonCenter.js\";\nimport \"../../../core/libs/gl-matrix-2/factories/vec2f32.js\";\nimport \"../engine/webgl/alignmentUtils.js\";\nimport \"../../../symbols/support/defaults.js\";\nimport \"../../../symbols/cim/OverrideHelper.js\";\nimport \"../../../layers/effects/EffectView.js\";\nimport \"../../../core/Evented.js\";\nimport \"../engine/transitions/FadeTransition.js\";\nimport \"../engine/webgl/enums.js\";\nimport \"../../../core/libs/gl-matrix-2/factories/vec4f32.js\";\nimport \"../../webgl/checkWebGLError.js\";\nimport \"../../webgl/enums.js\";\nimport \"../../webgl/FramebufferObject.js\";\nimport \"../../webgl/GLObjectType.js\";\nimport \"../../webgl/Texture.js\";\nimport \"../engine/webgl/shaders/BackgroundPrograms.js\";\nimport \"../engine/webgl/DefaultVertexAttributeLayouts.js\";\nimport \"../engine/webgl/AFeatureTile.js\";\nimport \"../engine/webgl/DisplayEntity.js\";\nimport \"../engine/webgl/shaderGraph/techniques/featureTechniqueUtils.js\";\nimport \"../engine/webgl/number.js\";\nimport \"../engine/webgl/PooledUint32Array.js\";\nimport \"../engine/webgl/shaders/TileInfoPrograms.js\";\nimport \"../engine/vectorTiles/style/StyleDefinition.js\";\nimport \"../engine/vectorTiles/enums.js\";\nimport \"../engine/webgl/shaders/BitBlitPrograms.js\";\nimport \"../../../request.js\";\nimport \"../../../core/urlUtils.js\";\nimport \"../../../core/pbf.js\";\nimport \"../engine/webgl/shaders/StencilPrograms.js\";\nimport \"../engine/webgl/shaderGraph/techniques/TechniqueType.js\";\nimport \"../engine/webgl/shaderGraph/techniques/shaders/BlendShader.js\";\nimport \"../engine/webgl/shaderGraph/techniques/shaders/OpacityShader.js\";\nimport \"../engine/webgl/shaders/HighlightPrograms.js\";\nimport \"../engine/webgl/meshing/SimpleMesh.js\";\nimport \"../engine/webgl/Profiler.js\";\nimport \"../engine/webgl/shaderGraph/techniques/TechniqueRegistry.js\";\nimport \"../../../Color.js\";\nimport \"../engine/webgl/shaderGraph/techniques/shaders/constants.js\";\nimport \"../engine/webgl/shaderGraph/techniques/dotDensity/DotDensityMeshWriter.js\";\nimport \"../engine/webgl/shaderGraph/techniques/fill/ComplexFillMeshWriter.js\";\nimport \"../engine/webgl/shaderGraph/techniques/fill/ComplexOutlineFillMeshWriter.js\";\nimport \"../engine/webgl/shaderGraph/techniques/fill/FillMeshWriter.js\";\nimport \"../engine/webgl/shaderGraph/techniques/fill/GradientFillMeshWriter.js\";\nimport \"../engine/webgl/shaderGraph/techniques/fill/OutlineFillMeshWriter.js\";\nimport \"../engine/webgl/shaderGraph/techniques/fill/PatternFillMeshWriter.js\";\nimport \"../engine/webgl/shaderGraph/techniques/fill/PatternOutlineFillMeshWriter.js\";\nimport \"../engine/webgl/shaderGraph/techniques/heatmap/HeatmapMeshWriter.js\";\nimport \"../../../geometry/support/aaBoundingBox.js\";\nimport \"../engine/webgl/shaderGraph/techniques/text/TextMeshWriter.js\";\nimport \"../engine/webgl/shaderGraph/techniques/line/GradientStrokeMeshWriter.js\";\nimport \"../engine/webgl/shaderGraph/techniques/line/LineMeshWriter.js\";\nimport \"../engine/webgl/shaderGraph/techniques/line/TexturedLineMeshWriter.js\";\nimport \"../engine/webgl/shaderGraph/techniques/markers/MarkerMeshWriter.js\";\nimport \"../../../arcade/ArcadeDate.js\";\nimport \"../../../geometry/SpatialReference.js\";\nimport \"../engine/webgl/shaderGraph/techniques/pieChart/PieChartMeshWriter.js\";\nimport \"../../webgl/renderState.js\";\nimport \"../../3d/webgl-engine/core/shaderModules/glsl.js\";\nimport \"../../webgl/testSVGPremultipliedAlpha.js\";\nimport \"../LabelManager.js\";\nimport n from \"./graphics/GraphicsView2D.js\";\nimport \"../../../core/asyncUtils.js\";\nimport \"../../../core/Collection.js\";\nimport \"../../../core/accessorSupport/watch.js\";\nimport \"../../../core/accessorSupport/tracking/SimpleTrackingTarget.js\";\nimport \"../../../chunks/earcut.js\";\nimport \"../../../core/libs/gl-matrix-2/factories/vec3f32.js\";\nimport \"../../../geometry/support/normalizeUtilsCommon.js\";\nimport \"../../../geometry/support/Ellipsoid.js\";\nimport \"../../../kernel.js\";\nimport { getHighlightGraphics as p } from \"./support/util.js\";\nimport \"../navigation/MapViewNavigation.js\";\nimport \"../../../core/support/UpdatingHandles.js\";\nimport \"../engine/webgl/shaderGraph/techniques/shaders/MagnifierShader.js\";\nimport \"../../../core/unitUtils.js\";\nimport \"../../../geometry/ellipsoidUtils.js\";\nimport \"../../../chunks/pe.js\";\nimport \"../../../geometry/projection/projectors.js\";\nimport \"../engine/webgl/shaderGraph/techniques/shaders/GridShader.js\";\nimport \"../../../geometry/support/geodesicConstants.js\";\nimport { BitmapTileLayerView2D as m } from \"./BitmapTileLayerView2D.js\";\nimport { LayerView2DMixin as c } from \"./LayerView2D.js\";\nimport g from \"./graphics/HighlightGraphicContainer.js\";\nimport { createBlankImage as u, resampleImage as f } from \"./support/imageUtils.js\";\nimport d from \"../tiling/TileInfoView.js\";\nimport j from \"../tiling/TileKey.js\";\nimport y from \"../tiling/TileQueue.js\";\nimport w from \"../tiling/TileStrategy.js\";\nimport b from \"../../layers/LayerView.js\";\nimport _ from \"../../layers/RefreshableLayerView.js\";\nimport { isMapServiceLayerView as T, MapServiceLayerViewHelper as G } from \"../../layers/support/MapServiceLayerViewHelper.js\";\nimport { createQueryGeometry as V } from \"../../support/drapedUtils.js\";\nimport { defaultHighlightName as q } from \"../../support/HighlightDefaults.js\";\nimport { TaskPriority as v } from \"../../support/Scheduler.js\";\nconst I = [0, 0];\nlet C = class extends _(m(c(b))) {\n  constructor() {\n    super(...arguments), this._fetchQueue = null, this._highlightGraphics = new a(), this._highlightView = null, this._popupHighlightHelper = null, this._tileStrategy = null, this.layer = null;\n  }\n  get resampling() {\n    return !(\"resampling\" in this.layer) || !1 !== this.layer.resampling;\n  }\n  get tilemapCache() {\n    return \"tilemapCache\" in this.layer ? this.layer.tilemapCache : null;\n  }\n  update(e) {\n    this._fetchQueue.pause(), this._fetchQueue.state = e.state, this._tileStrategy.update(e), this._fetchQueue.resume(), this._highlightView?.processUpdate(e);\n  }\n  attach() {\n    const e = \"tileServers\" in this.layer ? this.layer.tileServers : null,\n      i = this.tilemapCache;\n    if (this._tileInfoView = new d(this.layer.tileInfo, this.layer.fullExtent, i?.effectiveMinLOD, i?.effectiveMaxLOD), this._fetchQueue = new y({\n      tileInfoView: this._tileInfoView,\n      concurrency: e && 10 * e.length || 10,\n      process: (e, i) => this.fetchTile(e, i),\n      scheduler: this.scheduler,\n      priority: v.MAPVIEW_FETCH_QUEUE\n    }), this._tileStrategy = new w({\n      cachePolicy: \"keep\",\n      resampling: this.resampling,\n      acquireTile: e => this.acquireTile(e),\n      releaseTile: e => this.releaseTile(e),\n      tileInfoView: this._tileInfoView\n    }), T(this, this.layer)) {\n      const e = this._highlightView = new n({\n        view: this.view,\n        graphics: this._highlightGraphics,\n        requestUpdateCallback: () => this.requestUpdate(),\n        container: new g(this.view.featuresTilingScheme),\n        defaultPointSymbolEnabled: !1\n      });\n      this.container.addChild(this._highlightView.container), this._popupHighlightHelper = new G({\n        createFetchPopupFeaturesQueryGeometry: (e, i) => V(e, i, this.view),\n        highlightGraphics: this._highlightGraphics,\n        highlightGraphicUpdated: (i, t) => {\n          e.graphicUpdateHandler({\n            graphic: i,\n            property: t\n          });\n        },\n        layerView: this,\n        updatingHandles: this._updatingHandles\n      });\n    }\n    this.requestUpdate(), this.addAttachHandles(this._updatingHandles.add(() => this.resampling, () => {\n      this.doRefresh();\n    })), super.attach();\n  }\n  detach() {\n    super.detach(), this._tileStrategy.destroy(), this._fetchQueue.clear(), this.container.removeAllChildren(), this._popupHighlightHelper?.destroy(), this._highlightView?.destroy(), this._fetchQueue = this._tileStrategy = this._tileInfoView = this._popupHighlightHelper = null;\n  }\n  async fetchPopupFeaturesAtLocation(e, i) {\n    return this._popupHighlightHelper ? this._popupHighlightHelper.fetchPopupFeaturesAtLocation(e, i) : [];\n  }\n  highlight(e, t) {\n    const s = p(e);\n    if (0 === s.length) return i();\n    const r = t?.name ?? q;\n    return this._addHighlightGraphics(s, r), i(() => !this.destroyed && this._removeHighlightGraphics(s, r));\n  }\n  _processHighlight() {\n    const e = this._getHighlights();\n    this._highlightView?.setHighlight(e);\n  }\n  _addHighlightGraphics(e, i) {\n    this._highlightGraphics.addMany(e), this._addHighlights(e.map(e => e.uid), i);\n  }\n  _removeHighlightGraphics(e, i) {\n    this._highlightGraphics.removeMany(e), this._removeHighlights(e.map(e => e.uid), i);\n  }\n  viewChange() {\n    this.requestUpdate();\n  }\n  moveEnd() {\n    this.requestUpdate();\n  }\n  supportsSpatialReference(e) {\n    return h(this.layer.tileInfo?.spatialReference, e);\n  }\n  async doRefresh() {\n    if (this.attached) {\n      if (this.suspended) return this._tileStrategy.clear(), void this.requestUpdate();\n      this._fetchQueue.reset(), this._tileStrategy.refresh(e => this._updatingHandles.addPromise(this._enqueueTileFetch(e)));\n    }\n  }\n  acquireTile(e) {\n    const i = this._bitmapView.createTile(e),\n      t = i.bitmap;\n    return [t.x, t.y] = this._tileInfoView.getTileCoords(I, i.key), t.resolution = this._tileInfoView.getTileResolution(i.key), [t.width, t.height] = this._tileInfoView.tileInfo.size, this._updatingHandles.addPromise(this._enqueueTileFetch(i)), this._bitmapView.addChild(i), this.requestUpdate(), i;\n  }\n  releaseTile(e) {\n    this._fetchQueue.abort(e.key.id), this._bitmapView.removeChild(e), e.once(\"detach\", () => e.destroy()), this.requestUpdate();\n  }\n  async fetchTile(e, i = {}) {\n    return this.tilemapCache ? this._fetchTileWithTilemapCache(e, i) : this._fetchTileWithoutTilemapCache(e, i);\n  }\n  async _fetchTileWithoutTilemapCache(e, i = {}) {\n    const {\n      signal: t,\n      resamplingLevel: r = 0\n    } = i;\n    try {\n      return await this._fetchImage(e, t);\n    } catch (o) {\n      if (s(o)) throw o;\n      if (!this.resampling) return u(this._tileInfoView.tileInfo.size);\n      if (r < 3) {\n        const t = this._tileInfoView.getTileParentId(e.id);\n        if (t) {\n          const s = new j(t),\n            o = await this._fetchTileWithoutTilemapCache(s, {\n              ...i,\n              resamplingLevel: r + 1\n            });\n          return f(this._tileInfoView, o, s, e);\n        }\n      }\n      return u(this._tileInfoView.tileInfo.size);\n    }\n  }\n  async _fetchTileWithTilemapCache(e, i = {}) {\n    const t = this.tilemapCache,\n      {\n        signal: o,\n        resamplingLevel: l = 0\n      } = i,\n      h = new j(0, 0, 0, 0);\n    let a,\n      n = null;\n    try {\n      if (n = await t.fetchAvailabilityUpsample(e.level, e.row, e.col, h, {\n        signal: o\n      }), !this.resampling && h.level !== e.level) return await r(i), u(this._tileInfoView.tileInfo.size);\n      a = await this._fetchImage(h, o);\n    } catch (p) {\n      if (s(p)) throw p;\n      if (this.resampling && \"unknown\" === n && l < 3) {\n        const t = this._tileInfoView.getTileParentId(e.id);\n        if (t) {\n          h.set(t);\n          try {\n            a = await this._fetchTileWithTilemapCache(h, {\n              ...i,\n              resamplingLevel: l + 1\n            });\n          } catch {}\n        }\n      }\n    }\n    return a ? this.resampling ? f(this._tileInfoView, a, h, e) : a : u(this._tileInfoView.tileInfo.size);\n  }\n  async _enqueueTileFetch(e) {\n    if (!this._fetchQueue.has(e.key.id)) {\n      try {\n        const i = await this._fetchQueue.push(e.key);\n        e.bitmap.source = i, e.bitmap.width = this._tileInfoView.tileInfo.size[0], e.bitmap.height = this._tileInfoView.tileInfo.size[1], e.once(\"attach\", () => this.requestUpdate());\n      } catch (i) {\n        s(i) || t.getLogger(this).error(i);\n      }\n      this.requestUpdate();\n    }\n  }\n  async _fetchImage(e, i) {\n    return this.layer.fetchImageBitmapTile(e.level, e.row, e.col, {\n      signal: i\n    });\n  }\n};\ne([o()], C.prototype, \"resampling\", null), e([o()], C.prototype, \"tilemapCache\", null), C = e([l(\"esri.views.2d.layers.TileLayerView2D\")], C);\nconst H = C;\nexport { H as default };","map":{"version":3,"names":["_","e","makeHandle","i","t","isAbortError","s","waitTick","r","property","o","subclass","l","equals","h","GraphicsCollection","a","n","getHighlightGraphics","p","BitmapTileLayerView2D","m","LayerView2DMixin","c","g","createBlankImage","u","resampleImage","f","d","j","y","w","b","isMapServiceLayerView","T","MapServiceLayerViewHelper","G","createQueryGeometry","V","defaultHighlightName","q","TaskPriority","v","I","C","constructor","arguments","_fetchQueue","_highlightGraphics","_highlightView","_popupHighlightHelper","_tileStrategy","layer","resampling","tilemapCache","update","pause","state","resume","processUpdate","attach","tileServers","_tileInfoView","tileInfo","fullExtent","effectiveMinLOD","effectiveMaxLOD","tileInfoView","concurrency","length","process","fetchTile","scheduler","priority","MAPVIEW_FETCH_QUEUE","cachePolicy","acquireTile","releaseTile","view","graphics","requestUpdateCallback","requestUpdate","container","featuresTilingScheme","defaultPointSymbolEnabled","addChild","createFetchPopupFeaturesQueryGeometry","highlightGraphics","highlightGraphicUpdated","graphicUpdateHandler","graphic","layerView","updatingHandles","_updatingHandles","addAttachHandles","add","doRefresh","detach","destroy","clear","removeAllChildren","fetchPopupFeaturesAtLocation","highlight","name","_addHighlightGraphics","destroyed","_removeHighlightGraphics","_processHighlight","_getHighlights","setHighlight","addMany","_addHighlights","map","uid","removeMany","_removeHighlights","viewChange","moveEnd","supportsSpatialReference","spatialReference","attached","suspended","reset","refresh","addPromise","_enqueueTileFetch","_bitmapView","createTile","bitmap","x","getTileCoords","key","resolution","getTileResolution","width","height","size","abort","id","removeChild","once","_fetchTileWithTilemapCache","_fetchTileWithoutTilemapCache","signal","resamplingLevel","_fetchImage","getTileParentId","fetchAvailabilityUpsample","level","row","col","set","has","push","source","getLogger","error","fetchImageBitmapTile","prototype","H","default"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/layers/TileLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{makeHandle as i}from\"../../../core/handleUtils.js\";import t from\"../../../core/Logger.js\";import{isAbortError as s,waitTick as r}from\"../../../core/promiseUtils.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/RandomLCG.js\";import{subclass as l}from\"../../../core/accessorSupport/decorators/subclass.js\";import{equals as h}from\"../../../geometry/support/spatialReferenceUtils.js\";import{GraphicsCollection as a}from\"../../../support/GraphicsCollection.js\";import\"../../../core/Error.js\";import\"../../../core/scheduling.js\";import\"../../../core/accessorSupport/tracking/Flags.js\";import\"../../../core/colorUtils.js\";import\"../../../config.js\";import\"../../../symbols/cim/defaultCIMValues.js\";import\"../../../symbols/cim/enums.js\";import\"../../../core/floatRGBA.js\";import\"../../../geometry/Extent.js\";import\"../../../geometry/Geometry.js\";import\"../../../geometry/Multipoint.js\";import\"../../../geometry/Point.js\";import\"../../../geometry/Polygon.js\";import\"../../../geometry/Polyline.js\";import\"../engine/webgl/definitions.js\";import\"../engine/webgl/animations/instructions.js\";import\"../../../core/mathUtils.js\";import\"../../../symbols/Font.js\";import\"../../../core/ObjectPool.js\";import\"../../../geometry/support/Axis.js\";import\"../../../geometry/support/TileClipper.js\";import\"../../../symbols/cim/effects/EffectAddControlPoints.js\";import\"../../../symbols/cim/effects/EffectArrow.js\";import\"../../../symbols/cim/effects/EffectBuffer.js\";import\"../../../symbols/cim/effects/EffectControlMeasureLine.js\";import\"../../../symbols/cim/effects/EffectCut.js\";import\"../../../symbols/cim/effects/EffectDashes.js\";import\"../../../symbols/cim/effects/EffectDonut.js\";import\"../../../symbols/cim/effects/EffectJog.js\";import\"../../../symbols/cim/effects/EffectMove.js\";import\"../../../symbols/cim/effects/EffectOffset.js\";import\"../../../symbols/cim/effects/EffectReverse.js\";import\"../../../symbols/cim/effects/EffectRotate.js\";import\"../../../symbols/cim/effects/EffectScale.js\";import\"../../../symbols/cim/effects/EffectWave.js\";import\"../../../symbols/cim/placements/PlacementAlongLineSameSize.js\";import\"../../../symbols/cim/placements/PlacementAtExtremities.js\";import\"../../../symbols/cim/placements/PlacementAtRatioPositions.js\";import\"../../../symbols/cim/placements/PlacementInsidePolygon.js\";import\"../../../symbols/cim/placements/PlacementOnLine.js\";import\"../../../symbols/cim/placements/PlacementOnVertices.js\";import\"../../../symbols/cim/placements/PlacementPolygonCenter.js\";import\"../../../core/libs/gl-matrix-2/factories/vec2f32.js\";import\"../engine/webgl/alignmentUtils.js\";import\"../../../symbols/support/defaults.js\";import\"../../../symbols/cim/OverrideHelper.js\";import\"../../../layers/effects/EffectView.js\";import\"../../../core/Evented.js\";import\"../engine/transitions/FadeTransition.js\";import\"../engine/webgl/enums.js\";import\"../../../core/libs/gl-matrix-2/factories/vec4f32.js\";import\"../../webgl/checkWebGLError.js\";import\"../../webgl/enums.js\";import\"../../webgl/FramebufferObject.js\";import\"../../webgl/GLObjectType.js\";import\"../../webgl/Texture.js\";import\"../engine/webgl/shaders/BackgroundPrograms.js\";import\"../engine/webgl/DefaultVertexAttributeLayouts.js\";import\"../engine/webgl/AFeatureTile.js\";import\"../engine/webgl/DisplayEntity.js\";import\"../engine/webgl/shaderGraph/techniques/featureTechniqueUtils.js\";import\"../engine/webgl/number.js\";import\"../engine/webgl/PooledUint32Array.js\";import\"../engine/webgl/shaders/TileInfoPrograms.js\";import\"../engine/vectorTiles/style/StyleDefinition.js\";import\"../engine/vectorTiles/enums.js\";import\"../engine/webgl/shaders/BitBlitPrograms.js\";import\"../../../request.js\";import\"../../../core/urlUtils.js\";import\"../../../core/pbf.js\";import\"../engine/webgl/shaders/StencilPrograms.js\";import\"../engine/webgl/shaderGraph/techniques/TechniqueType.js\";import\"../engine/webgl/shaderGraph/techniques/shaders/BlendShader.js\";import\"../engine/webgl/shaderGraph/techniques/shaders/OpacityShader.js\";import\"../engine/webgl/shaders/HighlightPrograms.js\";import\"../engine/webgl/meshing/SimpleMesh.js\";import\"../engine/webgl/Profiler.js\";import\"../engine/webgl/shaderGraph/techniques/TechniqueRegistry.js\";import\"../../../Color.js\";import\"../engine/webgl/shaderGraph/techniques/shaders/constants.js\";import\"../engine/webgl/shaderGraph/techniques/dotDensity/DotDensityMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/fill/ComplexFillMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/fill/ComplexOutlineFillMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/fill/FillMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/fill/GradientFillMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/fill/OutlineFillMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/fill/PatternFillMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/fill/PatternOutlineFillMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/heatmap/HeatmapMeshWriter.js\";import\"../../../geometry/support/aaBoundingBox.js\";import\"../engine/webgl/shaderGraph/techniques/text/TextMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/line/GradientStrokeMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/line/LineMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/line/TexturedLineMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/markers/MarkerMeshWriter.js\";import\"../../../arcade/ArcadeDate.js\";import\"../../../geometry/SpatialReference.js\";import\"../engine/webgl/shaderGraph/techniques/pieChart/PieChartMeshWriter.js\";import\"../../webgl/renderState.js\";import\"../../3d/webgl-engine/core/shaderModules/glsl.js\";import\"../../webgl/testSVGPremultipliedAlpha.js\";import\"../LabelManager.js\";import n from\"./graphics/GraphicsView2D.js\";import\"../../../core/asyncUtils.js\";import\"../../../core/Collection.js\";import\"../../../core/accessorSupport/watch.js\";import\"../../../core/accessorSupport/tracking/SimpleTrackingTarget.js\";import\"../../../chunks/earcut.js\";import\"../../../core/libs/gl-matrix-2/factories/vec3f32.js\";import\"../../../geometry/support/normalizeUtilsCommon.js\";import\"../../../geometry/support/Ellipsoid.js\";import\"../../../kernel.js\";import{getHighlightGraphics as p}from\"./support/util.js\";import\"../navigation/MapViewNavigation.js\";import\"../../../core/support/UpdatingHandles.js\";import\"../engine/webgl/shaderGraph/techniques/shaders/MagnifierShader.js\";import\"../../../core/unitUtils.js\";import\"../../../geometry/ellipsoidUtils.js\";import\"../../../chunks/pe.js\";import\"../../../geometry/projection/projectors.js\";import\"../engine/webgl/shaderGraph/techniques/shaders/GridShader.js\";import\"../../../geometry/support/geodesicConstants.js\";import{BitmapTileLayerView2D as m}from\"./BitmapTileLayerView2D.js\";import{LayerView2DMixin as c}from\"./LayerView2D.js\";import g from\"./graphics/HighlightGraphicContainer.js\";import{createBlankImage as u,resampleImage as f}from\"./support/imageUtils.js\";import d from\"../tiling/TileInfoView.js\";import j from\"../tiling/TileKey.js\";import y from\"../tiling/TileQueue.js\";import w from\"../tiling/TileStrategy.js\";import b from\"../../layers/LayerView.js\";import _ from\"../../layers/RefreshableLayerView.js\";import{isMapServiceLayerView as T,MapServiceLayerViewHelper as G}from\"../../layers/support/MapServiceLayerViewHelper.js\";import{createQueryGeometry as V}from\"../../support/drapedUtils.js\";import{defaultHighlightName as q}from\"../../support/HighlightDefaults.js\";import{TaskPriority as v}from\"../../support/Scheduler.js\";const I=[0,0];let C=class extends(_(m(c(b)))){constructor(){super(...arguments),this._fetchQueue=null,this._highlightGraphics=new a,this._highlightView=null,this._popupHighlightHelper=null,this._tileStrategy=null,this.layer=null}get resampling(){return!(\"resampling\"in this.layer)||!1!==this.layer.resampling}get tilemapCache(){return\"tilemapCache\"in this.layer?this.layer.tilemapCache:null}update(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume(),this._highlightView?.processUpdate(e)}attach(){const e=\"tileServers\"in this.layer?this.layer.tileServers:null,i=this.tilemapCache;if(this._tileInfoView=new d(this.layer.tileInfo,this.layer.fullExtent,i?.effectiveMinLOD,i?.effectiveMaxLOD),this._fetchQueue=new y({tileInfoView:this._tileInfoView,concurrency:e&&10*e.length||10,process:(e,i)=>this.fetchTile(e,i),scheduler:this.scheduler,priority:v.MAPVIEW_FETCH_QUEUE}),this._tileStrategy=new w({cachePolicy:\"keep\",resampling:this.resampling,acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),tileInfoView:this._tileInfoView}),T(this,this.layer)){const e=this._highlightView=new n({view:this.view,graphics:this._highlightGraphics,requestUpdateCallback:()=>this.requestUpdate(),container:new g(this.view.featuresTilingScheme),defaultPointSymbolEnabled:!1});this.container.addChild(this._highlightView.container),this._popupHighlightHelper=new G({createFetchPopupFeaturesQueryGeometry:(e,i)=>V(e,i,this.view),highlightGraphics:this._highlightGraphics,highlightGraphicUpdated:(i,t)=>{e.graphicUpdateHandler({graphic:i,property:t})},layerView:this,updatingHandles:this._updatingHandles})}this.requestUpdate(),this.addAttachHandles(this._updatingHandles.add((()=>this.resampling),(()=>{this.doRefresh()}))),super.attach()}detach(){super.detach(),this._tileStrategy.destroy(),this._fetchQueue.clear(),this.container.removeAllChildren(),this._popupHighlightHelper?.destroy(),this._highlightView?.destroy(),this._fetchQueue=this._tileStrategy=this._tileInfoView=this._popupHighlightHelper=null}async fetchPopupFeaturesAtLocation(e,i){return this._popupHighlightHelper?this._popupHighlightHelper.fetchPopupFeaturesAtLocation(e,i):[]}highlight(e,t){const s=p(e);if(0===s.length)return i();const r=t?.name??q;return this._addHighlightGraphics(s,r),i((()=>!this.destroyed&&this._removeHighlightGraphics(s,r)))}_processHighlight(){const e=this._getHighlights();this._highlightView?.setHighlight(e)}_addHighlightGraphics(e,i){this._highlightGraphics.addMany(e),this._addHighlights(e.map((e=>e.uid)),i)}_removeHighlightGraphics(e,i){this._highlightGraphics.removeMany(e),this._removeHighlights(e.map((e=>e.uid)),i)}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}supportsSpatialReference(e){return h(this.layer.tileInfo?.spatialReference,e)}async doRefresh(){if(this.attached){if(this.suspended)return this._tileStrategy.clear(),void this.requestUpdate();this._fetchQueue.reset(),this._tileStrategy.refresh((e=>this._updatingHandles.addPromise(this._enqueueTileFetch(e))))}}acquireTile(e){const i=this._bitmapView.createTile(e),t=i.bitmap;return[t.x,t.y]=this._tileInfoView.getTileCoords(I,i.key),t.resolution=this._tileInfoView.getTileResolution(i.key),[t.width,t.height]=this._tileInfoView.tileInfo.size,this._updatingHandles.addPromise(this._enqueueTileFetch(i)),this._bitmapView.addChild(i),this.requestUpdate(),i}releaseTile(e){this._fetchQueue.abort(e.key.id),this._bitmapView.removeChild(e),e.once(\"detach\",(()=>e.destroy())),this.requestUpdate()}async fetchTile(e,i={}){return this.tilemapCache?this._fetchTileWithTilemapCache(e,i):this._fetchTileWithoutTilemapCache(e,i)}async _fetchTileWithoutTilemapCache(e,i={}){const{signal:t,resamplingLevel:r=0}=i;try{return await this._fetchImage(e,t)}catch(o){if(s(o))throw o;if(!this.resampling)return u(this._tileInfoView.tileInfo.size);if(r<3){const t=this._tileInfoView.getTileParentId(e.id);if(t){const s=new j(t),o=await this._fetchTileWithoutTilemapCache(s,{...i,resamplingLevel:r+1});return f(this._tileInfoView,o,s,e)}}return u(this._tileInfoView.tileInfo.size)}}async _fetchTileWithTilemapCache(e,i={}){const t=this.tilemapCache,{signal:o,resamplingLevel:l=0}=i,h=new j(0,0,0,0);let a,n=null;try{if(n=await t.fetchAvailabilityUpsample(e.level,e.row,e.col,h,{signal:o}),!this.resampling&&h.level!==e.level)return await r(i),u(this._tileInfoView.tileInfo.size);a=await this._fetchImage(h,o)}catch(p){if(s(p))throw p;if(this.resampling&&\"unknown\"===n&&l<3){const t=this._tileInfoView.getTileParentId(e.id);if(t){h.set(t);try{a=await this._fetchTileWithTilemapCache(h,{...i,resamplingLevel:l+1})}catch{}}}}return a?this.resampling?f(this._tileInfoView,a,h,e):a:u(this._tileInfoView.tileInfo.size)}async _enqueueTileFetch(e){if(!this._fetchQueue.has(e.key.id)){try{const i=await this._fetchQueue.push(e.key);e.bitmap.source=i,e.bitmap.width=this._tileInfoView.tileInfo.size[0],e.bitmap.height=this._tileInfoView.tileInfo.size[1],e.once(\"attach\",(()=>this.requestUpdate()))}catch(i){s(i)||t.getLogger(this).error(i)}this.requestUpdate()}}async _fetchImage(e,i){return this.layer.fetchImageBitmapTile(e.level,e.row,e.col,{signal:i})}};e([o()],C.prototype,\"resampling\",null),e([o()],C.prototype,\"tilemapCache\",null),C=e([l(\"esri.views.2d.layers.TileLayerView2D\")],C);const H=C;export{H as default};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}