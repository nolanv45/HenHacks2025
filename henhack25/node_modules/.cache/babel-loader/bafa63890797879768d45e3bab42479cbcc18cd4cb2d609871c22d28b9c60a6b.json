{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nconst t = \"esriJSAPIOAuth\";\nclass e {\n  constructor(t, e) {\n    this.oAuthInfo = null, this.storage = null, this.appId = null, this.codeVerifier = null, this.expires = null, this.refreshToken = null, this.ssl = null, this.stateUID = null, this.token = null, this.userId = null, this.oAuthInfo = t, this.storage = e, this._init();\n  }\n  isValid() {\n    let t = !1;\n    if (this.oAuthInfo && this.userId && (this.refreshToken || this.token)) if (null == this.expires && this.refreshToken) t = !0;else if (this.expires) {\n      const e = Date.now();\n      if (this.expires > e) {\n        (this.expires - e) / 1e3 > 60 * this.oAuthInfo.minTimeUntilExpiration && (t = !0);\n      }\n    }\n    return t;\n  }\n  save() {\n    if (!this.storage) return !1;\n    const e = this._load(),\n      s = this.oAuthInfo;\n    if (s?.authNamespace && s.portalUrl) {\n      let r = e[s.authNamespace];\n      r || (r = e[s.authNamespace] = {}), this.appId || (this.appId = s.appId), r[s.portalUrl] = {\n        appId: this.appId,\n        codeVerifier: this.codeVerifier,\n        expires: this.expires,\n        refreshToken: this.refreshToken,\n        ssl: this.ssl,\n        stateUID: this.stateUID,\n        token: this.token,\n        userId: this.userId\n      };\n      try {\n        this.storage.setItem(t, JSON.stringify(e));\n      } catch (i) {\n        return console.warn(i), !1;\n      }\n      return !0;\n    }\n    return !1;\n  }\n  destroy() {\n    const e = this._load(),\n      s = this.oAuthInfo;\n    if (s?.appId && s?.portalUrl && (null == this.expires || this.expires > Date.now()) && (this.refreshToken || this.token)) {\n      const t = s.portalUrl.replace(/^http:/i, \"https:\") + \"/sharing/rest/oauth2/revokeToken\",\n        e = new FormData();\n      if (e.append(\"f\", \"json\"), e.append(\"auth_token\", this.refreshToken || this.token), e.append(\"client_id\", s.appId), e.append(\"token_type_hint\", this.refreshToken ? \"refresh_token\" : \"access_token\"), \"function\" == typeof navigator.sendBeacon) navigator.sendBeacon(t, e);else {\n        const s = new XMLHttpRequest();\n        s.open(\"POST\", t), s.send(e);\n      }\n    }\n    if (s?.authNamespace && s.portalUrl && this.storage) {\n      const r = e[s.authNamespace];\n      if (r) {\n        delete r[s.portalUrl];\n        try {\n          this.storage.setItem(t, JSON.stringify(e));\n        } catch (i) {\n          console.log(i);\n        }\n      }\n    }\n    s && (s._oAuthCred = null, this.oAuthInfo = null);\n  }\n  _init() {\n    const t = this._load(),\n      e = this.oAuthInfo;\n    if (e?.authNamespace && e.portalUrl) {\n      let s = t[e.authNamespace];\n      s && (s = s[e.portalUrl], s && (this.appId = s.appId, this.codeVerifier = s.codeVerifier, this.expires = s.expires, this.refreshToken = s.refreshToken, this.ssl = s.ssl, this.stateUID = s.stateUID, this.token = s.token, this.userId = s.userId));\n    }\n  }\n  _load() {\n    let e = {};\n    if (this.storage) {\n      const i = this.storage.getItem(t);\n      if (i) try {\n        e = JSON.parse(i);\n      } catch (s) {\n        console.warn(s);\n      }\n    }\n    return e;\n  }\n}\ne.prototype.declaredClass = \"esri.identity.OAuthCredential\";\nexport { e as default };","map":{"version":3,"names":["t","e","constructor","oAuthInfo","storage","appId","codeVerifier","expires","refreshToken","ssl","stateUID","token","userId","_init","isValid","Date","now","minTimeUntilExpiration","save","_load","s","authNamespace","portalUrl","r","setItem","JSON","stringify","i","console","warn","destroy","replace","FormData","append","navigator","sendBeacon","XMLHttpRequest","open","send","log","_oAuthCred","getItem","parse","prototype","declaredClass","default"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/identity/OAuthCredential.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nconst t=\"esriJSAPIOAuth\";class e{constructor(t,e){this.oAuthInfo=null,this.storage=null,this.appId=null,this.codeVerifier=null,this.expires=null,this.refreshToken=null,this.ssl=null,this.stateUID=null,this.token=null,this.userId=null,this.oAuthInfo=t,this.storage=e,this._init()}isValid(){let t=!1;if(this.oAuthInfo&&this.userId&&(this.refreshToken||this.token))if(null==this.expires&&this.refreshToken)t=!0;else if(this.expires){const e=Date.now();if(this.expires>e){(this.expires-e)/1e3>60*this.oAuthInfo.minTimeUntilExpiration&&(t=!0)}}return t}save(){if(!this.storage)return!1;const e=this._load(),s=this.oAuthInfo;if(s?.authNamespace&&s.portalUrl){let r=e[s.authNamespace];r||(r=e[s.authNamespace]={}),this.appId||(this.appId=s.appId),r[s.portalUrl]={appId:this.appId,codeVerifier:this.codeVerifier,expires:this.expires,refreshToken:this.refreshToken,ssl:this.ssl,stateUID:this.stateUID,token:this.token,userId:this.userId};try{this.storage.setItem(t,JSON.stringify(e))}catch(i){return console.warn(i),!1}return!0}return!1}destroy(){const e=this._load(),s=this.oAuthInfo;if(s?.appId&&s?.portalUrl&&(null==this.expires||this.expires>Date.now())&&(this.refreshToken||this.token)){const t=s.portalUrl.replace(/^http:/i,\"https:\")+\"/sharing/rest/oauth2/revokeToken\",e=new FormData;if(e.append(\"f\",\"json\"),e.append(\"auth_token\",this.refreshToken||this.token),e.append(\"client_id\",s.appId),e.append(\"token_type_hint\",this.refreshToken?\"refresh_token\":\"access_token\"),\"function\"==typeof navigator.sendBeacon)navigator.sendBeacon(t,e);else{const s=new XMLHttpRequest;s.open(\"POST\",t),s.send(e)}}if(s?.authNamespace&&s.portalUrl&&this.storage){const r=e[s.authNamespace];if(r){delete r[s.portalUrl];try{this.storage.setItem(t,JSON.stringify(e))}catch(i){console.log(i)}}}s&&(s._oAuthCred=null,this.oAuthInfo=null)}_init(){const t=this._load(),e=this.oAuthInfo;if(e?.authNamespace&&e.portalUrl){let s=t[e.authNamespace];s&&(s=s[e.portalUrl],s&&(this.appId=s.appId,this.codeVerifier=s.codeVerifier,this.expires=s.expires,this.refreshToken=s.refreshToken,this.ssl=s.ssl,this.stateUID=s.stateUID,this.token=s.token,this.userId=s.userId))}}_load(){let e={};if(this.storage){const i=this.storage.getItem(t);if(i)try{e=JSON.parse(i)}catch(s){console.warn(s)}}return e}}e.prototype.declaredClass=\"esri.identity.OAuthCredential\";export{e as default};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}