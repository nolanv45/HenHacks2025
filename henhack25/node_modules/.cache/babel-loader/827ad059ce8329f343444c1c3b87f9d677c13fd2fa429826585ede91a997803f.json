{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { findAssociatedFeatureService as e } from \"../../layers/support/associatedFeatureServiceUtils.js\";\nimport { getLayerModuleType as r } from \"../../layers/support/fetchService.js\";\nfunction t(e) {\n  const t = {\n      id: e.id,\n      name: e.name\n    },\n    a = r(e.type);\n  return \"FeatureLayer\" !== a && (t.layerType = a), t;\n}\nasync function a(e, r, a) {\n  if (null == e?.layers || null == e?.tables) {\n    const s = await a.fetchServiceMetadata(r, {\n      customParameters: l(e)?.customParameters\n    });\n    (e = e || {}).layers = e.layers || s?.layers?.map(t), e.tables = e.tables || s?.tables?.map(t);\n  }\n  return e;\n}\nfunction l(e) {\n  if (!e) return null;\n  const {\n    layers: r,\n    tables: t\n  } = e;\n  return r?.length ? r[0] : t?.length ? t[0] : null;\n}\nfunction s(e, r) {\n  if (null == r) return null;\n  return [...(e.layers || []), ...(e.tables || [])].find(e => e.id === r);\n}\nfunction n(e, r) {\n  return [...(e.layers || []), ...(e.tables || [])].filter(({\n    layerType: e\n  }) => e ? r.includes(e) : r.includes(\"ArcGISFeatureLayer\"));\n}\nfunction u(e) {\n  return (e?.layers?.length ?? 0) + (e?.tables?.length ?? 0);\n}\nfunction c(e) {\n  switch (e) {\n    case \"catalog\":\n      return [\"CatalogLayer\"];\n    case \"feature\":\n      return [\"ArcGISFeatureLayer\"];\n    case \"oriented-imagery\":\n      return [\"OrientedImageryLayer\"];\n    case \"subtype-group\":\n      return [\"SubtypeGroupLayer\", \"SubtypeGroupTable\"];\n  }\n  return null;\n}\nfunction i(e) {\n  switch (e) {\n    case \"CatalogLayer\":\n      return \"CatalogLayer\";\n    case \"OrientedImageryLayer\":\n      return \"OrientedImageryLayer\";\n    case \"SubtypeGroupLayer\":\n    case \"SubtypeGroupTable\":\n      return \"SubtypeGroupLayer\";\n  }\n  return \"FeatureLayer\";\n}\nasync function o(r, a, s) {\n  if (!r?.url) return a ?? {};\n  if (a ??= {}, !a.layers) {\n    const e = await s.fetchServiceMetadata(r.url);\n    a.layers = e.layers?.map(t);\n  }\n  const {\n    serverUrl: n,\n    portalItem: u\n  } = await e(r.url, {\n    sceneLayerItem: r,\n    customParameters: l(a)?.customParameters\n  }).catch(() => ({\n    serverUrl: null,\n    portalItem: null\n  }));\n  if (null == n) return a.tables = [], a;\n  if (!a.tables && u) {\n    const e = await u.fetchData().catch(() => null);\n    if (e?.tables) a.tables = e.tables.map(t);else {\n      const r = await s.fetchServiceMetadata(n, {\n        customParameters: l(e)?.customParameters\n      }).catch(() => null);\n      a.tables = r?.tables?.map(t);\n    }\n  }\n  if (a.tables) for (const e of a.tables) e.url = `${n}/${e.id}`;\n  return a;\n}\nexport { t as createSublayerData, l as getFirstLayerOrTable, s as getLayerOrTable, u as getNumLayersAndTables, n as getSublayersByLayerType, c as instanceTypeToLayerTypes, i as layerTypeToLayerModuleType, o as populateSceneServiceItemData, a as preprocessFSItemData };","map":{"version":3,"names":["findAssociatedFeatureService","e","getLayerModuleType","r","t","id","name","a","type","layerType","layers","tables","s","fetchServiceMetadata","customParameters","l","map","length","find","n","filter","includes","u","c","i","o","url","serverUrl","portalItem","sceneLayerItem","catch","fetchData","createSublayerData","getFirstLayerOrTable","getLayerOrTable","getNumLayersAndTables","getSublayersByLayerType","instanceTypeToLayerTypes","layerTypeToLayerModuleType","populateSceneServiceItemData","preprocessFSItemData"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/portal/support/loadUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{findAssociatedFeatureService as e}from\"../../layers/support/associatedFeatureServiceUtils.js\";import{getLayerModuleType as r}from\"../../layers/support/fetchService.js\";function t(e){const t={id:e.id,name:e.name},a=r(e.type);return\"FeatureLayer\"!==a&&(t.layerType=a),t}async function a(e,r,a){if(null==e?.layers||null==e?.tables){const s=await a.fetchServiceMetadata(r,{customParameters:l(e)?.customParameters});(e=e||{}).layers=e.layers||s?.layers?.map(t),e.tables=e.tables||s?.tables?.map(t)}return e}function l(e){if(!e)return null;const{layers:r,tables:t}=e;return r?.length?r[0]:t?.length?t[0]:null}function s(e,r){if(null==r)return null;return[...e.layers||[],...e.tables||[]].find((e=>e.id===r))}function n(e,r){return[...e.layers||[],...e.tables||[]].filter((({layerType:e})=>e?r.includes(e):r.includes(\"ArcGISFeatureLayer\")))}function u(e){return(e?.layers?.length??0)+(e?.tables?.length??0)}function c(e){switch(e){case\"catalog\":return[\"CatalogLayer\"];case\"feature\":return[\"ArcGISFeatureLayer\"];case\"oriented-imagery\":return[\"OrientedImageryLayer\"];case\"subtype-group\":return[\"SubtypeGroupLayer\",\"SubtypeGroupTable\"]}return null}function i(e){switch(e){case\"CatalogLayer\":return\"CatalogLayer\";case\"OrientedImageryLayer\":return\"OrientedImageryLayer\";case\"SubtypeGroupLayer\":case\"SubtypeGroupTable\":return\"SubtypeGroupLayer\"}return\"FeatureLayer\"}async function o(r,a,s){if(!r?.url)return a??{};if(a??={},!a.layers){const e=await s.fetchServiceMetadata(r.url);a.layers=e.layers?.map(t)}const{serverUrl:n,portalItem:u}=await e(r.url,{sceneLayerItem:r,customParameters:l(a)?.customParameters}).catch((()=>({serverUrl:null,portalItem:null})));if(null==n)return a.tables=[],a;if(!a.tables&&u){const e=await u.fetchData().catch((()=>null));if(e?.tables)a.tables=e.tables.map(t);else{const r=await s.fetchServiceMetadata(n,{customParameters:l(e)?.customParameters}).catch((()=>null));a.tables=r?.tables?.map(t)}}if(a.tables)for(const e of a.tables)e.url=`${n}/${e.id}`;return a}export{t as createSublayerData,l as getFirstLayerOrTable,s as getLayerOrTable,u as getNumLayersAndTables,n as getSublayersByLayerType,c as instanceTypeToLayerTypes,i as layerTypeToLayerModuleType,o as populateSceneServiceItemData,a as preprocessFSItemData};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}