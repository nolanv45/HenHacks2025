{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { save as e, saveAs as r } from \"./utils.js\";\nimport { createForItemWrite as t } from \"../../portal/support/jsonContext.js\";\nimport { typeKeyword as o, hasTypeKeyword as a, removeTypeKeyword as s, addTypeKeyword as n } from \"../../portal/support/portalItemUtils.js\";\nimport { saveResources as i } from \"../../webdoc/support/resourceUtils.js\";\nconst u = \"Group Layer\",\n  c = \"group-layer-save\",\n  l = \"group-layer-save-as\",\n  p = o.GROUP_LAYER_MAP;\nfunction m(e) {\n  return {\n    isValid: \"group\" === e.type,\n    errorMessage: \"Layer.type should be 'group'\"\n  };\n}\nfunction y(e) {\n  return {\n    isValid: a(e, p),\n    errorMessage: `Layer.portalItem.typeKeywords should have '${p}'`\n  };\n}\nfunction f(e, r) {\n  return {\n    ...t(e, \"web-map\", !0),\n    initiator: r\n  };\n}\nfunction v(e) {\n  const r = e.layerJSON;\n  return Promise.resolve(r && Object.keys(r).length ? r : null);\n}\nasync function d(e, r) {\n  r.title ||= e.title, s(r, o.METADATA), n(r, p);\n}\nasync function I(r, t) {\n  return e({\n    layer: r,\n    itemType: u,\n    validateLayer: m,\n    validateItem: y,\n    createJSONContext: e => f(e, r),\n    createItemData: v,\n    errorNamePrefix: c,\n    saveResources: async (e, t) => (r.sourceIsPortalItem || (await e.removeAllResources().catch(() => {})), i(r.resourceReferences, t))\n  }, t);\n}\nasync function g(e, t, o) {\n  return r({\n    layer: e,\n    itemType: u,\n    validateLayer: m,\n    createJSONContext: r => f(r, e),\n    createItemData: v,\n    errorNamePrefix: l,\n    newItem: t,\n    setItemProperties: d,\n    saveResources: (r, t) => i(e.resourceReferences, t)\n  }, o);\n}\nexport { I as save, g as saveAs };","map":{"version":3,"names":["save","e","saveAs","r","createForItemWrite","t","typeKeyword","o","hasTypeKeyword","a","removeTypeKeyword","s","addTypeKeyword","n","saveResources","i","u","c","l","p","GROUP_LAYER_MAP","m","isValid","type","errorMessage","y","f","initiator","v","layerJSON","Promise","resolve","Object","keys","length","d","title","METADATA","I","layer","itemType","validateLayer","validateItem","createJSONContext","createItemData","errorNamePrefix","sourceIsPortalItem","removeAllResources","catch","resourceReferences","g","newItem","setItemProperties"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/layers/save/groupLayerUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{save as e,saveAs as r}from\"./utils.js\";import{createForItemWrite as t}from\"../../portal/support/jsonContext.js\";import{typeKeyword as o,hasTypeKeyword as a,removeTypeKeyword as s,addTypeKeyword as n}from\"../../portal/support/portalItemUtils.js\";import{saveResources as i}from\"../../webdoc/support/resourceUtils.js\";const u=\"Group Layer\",c=\"group-layer-save\",l=\"group-layer-save-as\",p=o.GROUP_LAYER_MAP;function m(e){return{isValid:\"group\"===e.type,errorMessage:\"Layer.type should be 'group'\"}}function y(e){return{isValid:a(e,p),errorMessage:`Layer.portalItem.typeKeywords should have '${p}'`}}function f(e,r){return{...t(e,\"web-map\",!0),initiator:r}}function v(e){const r=e.layerJSON;return Promise.resolve(r&&Object.keys(r).length?r:null)}async function d(e,r){r.title||=e.title,s(r,o.METADATA),n(r,p)}async function I(r,t){return e({layer:r,itemType:u,validateLayer:m,validateItem:y,createJSONContext:e=>f(e,r),createItemData:v,errorNamePrefix:c,saveResources:async(e,t)=>(r.sourceIsPortalItem||await e.removeAllResources().catch((()=>{})),i(r.resourceReferences,t))},t)}async function g(e,t,o){return r({layer:e,itemType:u,validateLayer:m,createJSONContext:r=>f(r,e),createItemData:v,errorNamePrefix:l,newItem:t,setItemProperties:d,saveResources:(r,t)=>i(e.resourceReferences,t)},o)}export{I as save,g as saveAs};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}