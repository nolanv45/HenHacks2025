{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../../chunks/tslib.es6.js\";\nimport e from \"../../../../core/Accessor.js\";\nimport s from \"../../../../core/CircularArray.js\";\nimport r from \"../../../../core/Evented.js\";\nimport a from \"../../../../core/ReactiveMap.js\";\nimport { property as o } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/Logger.js\";\nimport \"../../../../core/RandomLCG.js\";\nimport { subclass as i } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nconst n = 10;\nlet l = class extends e {\n  constructor() {\n    super(...arguments), this.events = new r(), this._updatingStrategy = !0, this._tileToEvent = new a(), this._fetchStatus = {\n      outstanding: 0,\n      done: 0\n    };\n  }\n  get hasAllData() {\n    return !this._updatingStrategy && this._hasAllTileData();\n  }\n  get willQueryAllFeatures() {\n    return this._strategyInfo?.willQueryAllFeatures ?? !1;\n  }\n  get willQueryFullResolutionGeometry() {\n    return this._strategyInfo?.willQueryAllFeatures ?? !1;\n  }\n  onEvent(t) {\n    switch (t.type) {\n      case \"subscribe\":\n      case \"unsubscribe\":\n      case \"loaded\":\n      case \"error\":\n        this._handleTileEvent(t);\n        break;\n      case \"updateStrategyStart\":\n        this._updatingStrategy = !0, this._fetchStatus = {\n          done: 0,\n          outstanding: 0\n        }, this._strategyInfo = t.about;\n        break;\n      case \"updateStrategyEnd\":\n        this._updatingStrategy = !1;\n        break;\n      case \"updateFieldsStart\":\n        this._fetchStatus = {\n          done: 0,\n          outstanding: 0\n        };\n        break;\n      case \"updateFieldsEnd\":\n        break;\n      case \"updateFieldsError\":\n        this.events.emit(\"error\", t);\n        break;\n      case \"fetchStart\":\n        this._fetchStatus.outstanding += 1, this.events.emit(\"status\", this._fetchStatus);\n        break;\n      case \"fetchEnd\":\n        this._fetchStatus.done += 1, this.events.emit(\"status\", this._fetchStatus), t.done && (this._fetchStatus = {\n          done: 0,\n          outstanding: 0\n        });\n    }\n  }\n  _hasAllTileData() {\n    for (const t of this._tileToEvent.values()) {\n      const e = t.peekLast();\n      if (\"loaded\" !== e?.type) return !1;\n    }\n    return !0;\n  }\n  _handleTileEvent(t) {\n    switch (t.type) {\n      case \"subscribe\":\n        {\n          const e = new s(n);\n          e.enqueue(t), this._tileToEvent.set(t.tile, e);\n          break;\n        }\n      case \"unsubscribe\":\n        this._tileToEvent.delete(t.tile);\n        break;\n      case \"loaded\":\n        {\n          const e = this._tileToEvent.get(t.tile);\n          if (!e) return;\n          e.enqueue(t), this._tileToEvent.set(t.tile, e);\n          break;\n        }\n      case \"error\":\n        {\n          const e = this._tileToEvent.get(t.tile);\n          if (!e) return;\n          e.enqueue(t), this._tileToEvent.set(t.tile, e), this.events.emit(\"error\", t);\n          break;\n        }\n    }\n  }\n};\nt([o({\n  readOnly: !0\n})], l.prototype, \"hasAllData\", null), t([o()], l.prototype, \"willQueryAllFeatures\", null), t([o()], l.prototype, \"willQueryFullResolutionGeometry\", null), t([o()], l.prototype, \"_updatingStrategy\", void 0), t([o()], l.prototype, \"_strategyInfo\", void 0), t([o()], l.prototype, \"_tileToEvent\", void 0), l = t([i(\"esri.views.2d.layers.features.FeatureSourceEventLog\")], l);\nexport { l as FeatureSourceEventLog };","map":{"version":3,"names":["_","t","e","s","r","a","property","o","subclass","i","n","l","constructor","arguments","events","_updatingStrategy","_tileToEvent","_fetchStatus","outstanding","done","hasAllData","_hasAllTileData","willQueryAllFeatures","_strategyInfo","willQueryFullResolutionGeometry","onEvent","type","_handleTileEvent","about","emit","values","peekLast","enqueue","set","tile","delete","get","readOnly","prototype","FeatureSourceEventLog"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/layers/features/FeatureSourceEventLog.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../core/Accessor.js\";import s from\"../../../../core/CircularArray.js\";import r from\"../../../../core/Evented.js\";import a from\"../../../../core/ReactiveMap.js\";import{property as o}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as i}from\"../../../../core/accessorSupport/decorators/subclass.js\";const n=10;let l=class extends e{constructor(){super(...arguments),this.events=new r,this._updatingStrategy=!0,this._tileToEvent=new a,this._fetchStatus={outstanding:0,done:0}}get hasAllData(){return!this._updatingStrategy&&this._hasAllTileData()}get willQueryAllFeatures(){return this._strategyInfo?.willQueryAllFeatures??!1}get willQueryFullResolutionGeometry(){return this._strategyInfo?.willQueryAllFeatures??!1}onEvent(t){switch(t.type){case\"subscribe\":case\"unsubscribe\":case\"loaded\":case\"error\":this._handleTileEvent(t);break;case\"updateStrategyStart\":this._updatingStrategy=!0,this._fetchStatus={done:0,outstanding:0},this._strategyInfo=t.about;break;case\"updateStrategyEnd\":this._updatingStrategy=!1;break;case\"updateFieldsStart\":this._fetchStatus={done:0,outstanding:0};break;case\"updateFieldsEnd\":break;case\"updateFieldsError\":this.events.emit(\"error\",t);break;case\"fetchStart\":this._fetchStatus.outstanding+=1,this.events.emit(\"status\",this._fetchStatus);break;case\"fetchEnd\":this._fetchStatus.done+=1,this.events.emit(\"status\",this._fetchStatus),t.done&&(this._fetchStatus={done:0,outstanding:0})}}_hasAllTileData(){for(const t of this._tileToEvent.values()){const e=t.peekLast();if(\"loaded\"!==e?.type)return!1}return!0}_handleTileEvent(t){switch(t.type){case\"subscribe\":{const e=new s(n);e.enqueue(t),this._tileToEvent.set(t.tile,e);break}case\"unsubscribe\":this._tileToEvent.delete(t.tile);break;case\"loaded\":{const e=this._tileToEvent.get(t.tile);if(!e)return;e.enqueue(t),this._tileToEvent.set(t.tile,e);break}case\"error\":{const e=this._tileToEvent.get(t.tile);if(!e)return;e.enqueue(t),this._tileToEvent.set(t.tile,e),this.events.emit(\"error\",t);break}}}};t([o({readOnly:!0})],l.prototype,\"hasAllData\",null),t([o()],l.prototype,\"willQueryAllFeatures\",null),t([o()],l.prototype,\"willQueryFullResolutionGeometry\",null),t([o()],l.prototype,\"_updatingStrategy\",void 0),t([o()],l.prototype,\"_strategyInfo\",void 0),t([o()],l.prototype,\"_tileToEvent\",void 0),l=t([i(\"esri.views.2d.layers.features.FeatureSourceEventLog\")],l);export{l as FeatureSourceEventLog};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}