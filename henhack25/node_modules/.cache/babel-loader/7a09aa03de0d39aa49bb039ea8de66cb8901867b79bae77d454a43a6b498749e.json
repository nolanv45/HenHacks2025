{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from \"../../../../core/Logger.js\";\nimport { TextureSamplingMode as t, CompressedTextureFormat as r } from \"../../../webgl/enums.js\";\nimport { Texture as n } from \"../../../webgl/Texture.js\";\nconst o = () => e.getLogger(\"esri.views.3d.webgl-engine.lib.DDSUtil\"),\n  a = 542327876,\n  i = 131072,\n  s = 4;\nfunction l(e) {\n  return e.charCodeAt(0) + (e.charCodeAt(1) << 8) + (e.charCodeAt(2) << 16) + (e.charCodeAt(3) << 24);\n}\nfunction u(e) {\n  return String.fromCharCode(255 & e, e >> 8 & 255, e >> 16 & 255, e >> 24 & 255);\n}\nconst c = l(\"DXT1\"),\n  h = l(\"DXT3\"),\n  m = l(\"DXT5\"),\n  f = 31,\n  d = 0,\n  p = 1,\n  g = 2,\n  D = 3,\n  C = 4,\n  w = 7,\n  T = 20,\n  _ = 21;\nfunction E(e, r, o) {\n  const a = S(o, r.hasMipmap ?? !1);\n  if (null == a) throw new Error(\"DDS texture data is null\");\n  const {\n    textureData: i,\n    internalFormat: s,\n    width: l,\n    height: u\n  } = a;\n  return r.samplingMode = i.levels.length > 1 ? t.LINEAR_MIPMAP_LINEAR : t.LINEAR, r.hasMipmap = i.levels.length > 1, r.internalFormat = s, r.width = l, r.height = u, new n(e, r, i);\n}\nfunction S(e, t) {\n  const n = new Int32Array(e.buffer, e.byteOffset, f);\n  if (n[d] !== a) return o().error(\"Invalid magic number in DDS header\"), null;\n  if (!(n[T] & s)) return o().error(\"Unsupported format, must contain a FourCC code\"), null;\n  const l = n[_];\n  let E, S;\n  switch (l) {\n    case c:\n      E = 8, S = r.COMPRESSED_RGB_S3TC_DXT1_EXT;\n      break;\n    case h:\n      E = 16, S = r.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n      break;\n    case m:\n      E = 16, S = r.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n      break;\n    default:\n      return o().error(\"Unsupported FourCC code:\", u(l)), null;\n  }\n  let b = 1,\n    A = n[C],\n    M = n[D];\n  (3 & A || 3 & M) && (o().warn(\"Rounding up compressed texture size to nearest multiple of 4.\"), A = A + 3 & -4, M = M + 3 & -4);\n  const x = A,\n    R = M;\n  let X, I;\n  n[g] & i && !1 !== t && (b = Math.max(1, n[w]));\n  let v = e.byteOffset + n[p] + 4;\n  const y = [];\n  for (let r = 0; r < b; ++r) I = (A + 3 >> 2) * (M + 3 >> 2) * E, X = new Uint8Array(e.buffer, v, I), y.push(X), v += I, A = Math.max(1, A >> 1), M = Math.max(1, M >> 1);\n  return {\n    textureData: {\n      type: \"compressed\",\n      levels: y\n    },\n    internalFormat: S,\n    width: x,\n    height: R\n  };\n}\nexport { E as createDDSTexture, S as createDDSTextureData };","map":{"version":3,"names":["e","TextureSamplingMode","t","CompressedTextureFormat","r","Texture","n","o","getLogger","a","i","s","l","charCodeAt","u","String","fromCharCode","c","h","m","f","d","p","g","D","C","w","T","_","E","S","hasMipmap","Error","textureData","internalFormat","width","height","samplingMode","levels","length","LINEAR_MIPMAP_LINEAR","LINEAR","Int32Array","buffer","byteOffset","error","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","b","A","M","warn","x","R","X","I","Math","max","v","y","Uint8Array","push","type","createDDSTexture","createDDSTextureData"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/3d/webgl-engine/lib/DDSUtil.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Logger.js\";import{TextureSamplingMode as t,CompressedTextureFormat as r}from\"../../../webgl/enums.js\";import{Texture as n}from\"../../../webgl/Texture.js\";const o=()=>e.getLogger(\"esri.views.3d.webgl-engine.lib.DDSUtil\"),a=542327876,i=131072,s=4;function l(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}function u(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)}const c=l(\"DXT1\"),h=l(\"DXT3\"),m=l(\"DXT5\"),f=31,d=0,p=1,g=2,D=3,C=4,w=7,T=20,_=21;function E(e,r,o){const a=S(o,r.hasMipmap??!1);if(null==a)throw new Error(\"DDS texture data is null\");const{textureData:i,internalFormat:s,width:l,height:u}=a;return r.samplingMode=i.levels.length>1?t.LINEAR_MIPMAP_LINEAR:t.LINEAR,r.hasMipmap=i.levels.length>1,r.internalFormat=s,r.width=l,r.height=u,new n(e,r,i)}function S(e,t){const n=new Int32Array(e.buffer,e.byteOffset,f);if(n[d]!==a)return o().error(\"Invalid magic number in DDS header\"),null;if(!(n[T]&s))return o().error(\"Unsupported format, must contain a FourCC code\"),null;const l=n[_];let E,S;switch(l){case c:E=8,S=r.COMPRESSED_RGB_S3TC_DXT1_EXT;break;case h:E=16,S=r.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case m:E=16,S=r.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;default:return o().error(\"Unsupported FourCC code:\",u(l)),null}let b=1,A=n[C],M=n[D];(3&A||3&M)&&(o().warn(\"Rounding up compressed texture size to nearest multiple of 4.\"),A=A+3&-4,M=M+3&-4);const x=A,R=M;let X,I;n[g]&i&&!1!==t&&(b=Math.max(1,n[w]));let v=e.byteOffset+n[p]+4;const y=[];for(let r=0;r<b;++r)I=(A+3>>2)*(M+3>>2)*E,X=new Uint8Array(e.buffer,v,I),y.push(X),v+=I,A=Math.max(1,A>>1),M=Math.max(1,M>>1);return{textureData:{type:\"compressed\",levels:y},internalFormat:S,width:x,height:R}}export{E as createDDSTexture,S as createDDSTextureData};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}