{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../core/Accessor.js\";\nimport { watch as s, sync as i, initial as r } from \"../../../../core/reactiveUtils.js\";\nimport { property as n } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/Logger.js\";\nimport \"../../../../core/RandomLCG.js\";\nimport { subclass as o } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { getReferenceEllipsoid as a } from \"../../../../geometry/ellipsoidUtils.js\";\nimport { FrustumExtentIntersection as p } from \"../../support/FrustumExtentIntersection.js\";\nimport { TaskPriority as c } from \"../../../support/Scheduler.js\";\nimport { Yield as l } from \"../../../support/Yield.js\";\nconst h = 1.2;\nlet u = class extends t {\n  constructor(e) {\n    super(e), this.suspended = !1, this._extent = null, this._extentIntersectionDirty = !0, this._isVisibleBelowSurfaceInternal = !1, this.graphicsCoreOwner = null, this.updating = !0;\n  }\n  initialize() {\n    const {\n      graphicsCoreOwner: e\n    } = this;\n    this._extentIntersection = new p({\n      renderCoordsHelper: e.view.renderCoordsHelper\n    });\n    const t = e.view,\n      n = t.basemapTerrain,\n      o = t.resourceController.scheduler;\n    this.addHandles([t.on(\"resize\", () => this._viewChange()), s(() => t.state.camera, () => this._viewChange(), i), o.registerTask(c.FRUSTUM_VISIBILITY, this), s(() => n.visibleElevationBounds, () => this._elevationBoundsChange())]), \"local\" === t.viewingMode ? this._isVisibleBelowSurface = !0 : this.addHandles([s(() => [n.baseOpacity, n.wireframe, t.map?.ground?.navigationConstraint?.type], () => this._updateIsVisibleBelowSurface(), r)]);\n  }\n  destroy() {\n    this._set(\"graphicsCoreOwner\", null), this._extent = null, this._extentIntersection = null;\n  }\n  _setDirty() {\n    this.updating || this._set(\"updating\", !0);\n  }\n  setExtent(e) {\n    this._extent = e, this._extentIntersectionDirty = !0, this._setDirty();\n  }\n  _viewChange() {\n    this._setDirty();\n  }\n  _elevationBoundsChange() {\n    this._setDirty(), this._extentIntersectionDirty = !0;\n  }\n  set _isVisibleBelowSurface(e) {\n    this._isVisibleBelowSurfaceInternal = e, this._setDirty(), this._extentIntersectionDirty = !0;\n  }\n  _updateIsVisibleBelowSurface() {\n    const e = this.graphicsCoreOwner.view,\n      t = e.basemapTerrain,\n      s = \"local\" === e.viewingMode,\n      i = \"none\" === e.map.ground?.navigationConstraint?.type;\n    this._isVisibleBelowSurface = s || !t.opaque || i;\n  }\n  _updateExtentIntersection() {\n    if (!this._extentIntersectionDirty) return;\n    this._extentIntersectionDirty = !1;\n    const e = this.graphicsCoreOwner.view;\n    let t;\n    if (this._isVisibleBelowSurfaceInternal) t = -.3 * a(e.spatialReference).radius;else {\n      const {\n        min: s,\n        max: i\n      } = e.basemapTerrain.visibleElevationBounds;\n      t = s - Math.max(1, (i - s) * (h - 1));\n    }\n    this._extentIntersection.update(this._extent, e.spatialReference, t);\n  }\n  get running() {\n    return this.updating;\n  }\n  runTask(e) {\n    if (this._set(\"updating\", !1), !this._extent) return this._set(\"suspended\", !1), l;\n    this._updateExtentIntersection();\n    const t = this.graphicsCoreOwner.view.frustum,\n      s = a(this.graphicsCoreOwner.view.spatialReference).radius;\n    this._set(\"suspended\", !this._extentIntersection.isVisibleInFrustum(t, s)), e.madeProgress();\n  }\n};\ne([n({\n  readOnly: !0\n})], u.prototype, \"suspended\", void 0), e([n({\n  constructOnly: !0\n})], u.prototype, \"graphicsCoreOwner\", void 0), e([n({\n  readOnly: !0\n})], u.prototype, \"updating\", void 0), u = e([o(\"esri.views.3d.layers.graphics.Graphics3DFrustumVisibility\")], u);\nexport { u as Graphics3DFrustumVisibility };","map":{"version":3,"names":["_","e","t","watch","s","sync","i","initial","r","property","n","subclass","o","getReferenceEllipsoid","a","FrustumExtentIntersection","p","TaskPriority","c","Yield","l","h","u","constructor","suspended","_extent","_extentIntersectionDirty","_isVisibleBelowSurfaceInternal","graphicsCoreOwner","updating","initialize","_extentIntersection","renderCoordsHelper","view","basemapTerrain","resourceController","scheduler","addHandles","on","_viewChange","state","camera","registerTask","FRUSTUM_VISIBILITY","visibleElevationBounds","_elevationBoundsChange","viewingMode","_isVisibleBelowSurface","baseOpacity","wireframe","map","ground","navigationConstraint","type","_updateIsVisibleBelowSurface","destroy","_set","_setDirty","setExtent","opaque","_updateExtentIntersection","spatialReference","radius","min","max","Math","update","running","runTask","frustum","isVisibleInFrustum","madeProgress","readOnly","prototype","constructOnly","Graphics3DFrustumVisibility"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DFrustumVisibility.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import{watch as s,sync as i,initial as r}from\"../../../../core/reactiveUtils.js\";import{property as n}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as o}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{getReferenceEllipsoid as a}from\"../../../../geometry/ellipsoidUtils.js\";import{FrustumExtentIntersection as p}from\"../../support/FrustumExtentIntersection.js\";import{TaskPriority as c}from\"../../../support/Scheduler.js\";import{Yield as l}from\"../../../support/Yield.js\";const h=1.2;let u=class extends t{constructor(e){super(e),this.suspended=!1,this._extent=null,this._extentIntersectionDirty=!0,this._isVisibleBelowSurfaceInternal=!1,this.graphicsCoreOwner=null,this.updating=!0}initialize(){const{graphicsCoreOwner:e}=this;this._extentIntersection=new p({renderCoordsHelper:e.view.renderCoordsHelper});const t=e.view,n=t.basemapTerrain,o=t.resourceController.scheduler;this.addHandles([t.on(\"resize\",(()=>this._viewChange())),s((()=>t.state.camera),(()=>this._viewChange()),i),o.registerTask(c.FRUSTUM_VISIBILITY,this),s((()=>n.visibleElevationBounds),(()=>this._elevationBoundsChange()))]),\"local\"===t.viewingMode?this._isVisibleBelowSurface=!0:this.addHandles([s((()=>[n.baseOpacity,n.wireframe,t.map?.ground?.navigationConstraint?.type]),(()=>this._updateIsVisibleBelowSurface()),r)])}destroy(){this._set(\"graphicsCoreOwner\",null),this._extent=null,this._extentIntersection=null}_setDirty(){this.updating||this._set(\"updating\",!0)}setExtent(e){this._extent=e,this._extentIntersectionDirty=!0,this._setDirty()}_viewChange(){this._setDirty()}_elevationBoundsChange(){this._setDirty(),this._extentIntersectionDirty=!0}set _isVisibleBelowSurface(e){this._isVisibleBelowSurfaceInternal=e,this._setDirty(),this._extentIntersectionDirty=!0}_updateIsVisibleBelowSurface(){const e=this.graphicsCoreOwner.view,t=e.basemapTerrain,s=\"local\"===e.viewingMode,i=\"none\"===e.map.ground?.navigationConstraint?.type;this._isVisibleBelowSurface=s||!t.opaque||i}_updateExtentIntersection(){if(!this._extentIntersectionDirty)return;this._extentIntersectionDirty=!1;const e=this.graphicsCoreOwner.view;let t;if(this._isVisibleBelowSurfaceInternal)t=-.3*a(e.spatialReference).radius;else{const{min:s,max:i}=e.basemapTerrain.visibleElevationBounds;t=s-Math.max(1,(i-s)*(h-1))}this._extentIntersection.update(this._extent,e.spatialReference,t)}get running(){return this.updating}runTask(e){if(this._set(\"updating\",!1),!this._extent)return this._set(\"suspended\",!1),l;this._updateExtentIntersection();const t=this.graphicsCoreOwner.view.frustum,s=a(this.graphicsCoreOwner.view.spatialReference).radius;this._set(\"suspended\",!this._extentIntersection.isVisibleInFrustum(t,s)),e.madeProgress()}};e([n({readOnly:!0})],u.prototype,\"suspended\",void 0),e([n({constructOnly:!0})],u.prototype,\"graphicsCoreOwner\",void 0),e([n({readOnly:!0})],u.prototype,\"updating\",void 0),u=e([o(\"esri.views.3d.layers.graphics.Graphics3DFrustumVisibility\")],u);export{u as Graphics3DFrustumVisibility};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}