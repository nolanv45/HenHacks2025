{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport t from \"../../../../core/Handles.js\";\nimport { watch as e, initial as i } from \"../../../../core/reactiveUtils.js\";\nimport { addFrameTask as a } from \"../../../../core/scheduling.js\";\nimport { translateBy as s, scaleAndRotateBy as n } from \"../../viewpointUtils.js\";\nimport { InputHandler as r } from \"../../../input/InputHandler.js\";\nimport { resetTransformation as o, extractTransformation as h, isZeroTransformation as l } from \"../../../navigation/gamepadAndKeyboardUtils.js\";\nclass m extends r {\n  constructor(e) {\n    super(!0), this._view = e, this._frameTask = null, this._watchHandles = new t(), this._currentDevice = null, this._transformation = {\n      translation: [0, 0, 0],\n      heading: 0,\n      tilt: 0,\n      zoom: 0\n    }, this._handle = this.registerIncoming(\"gamepad\", t => this._handleGamePadEvent(t)), this._handle.pause();\n  }\n  onInstall(t) {\n    super.onInstall(t), this._watchHandles.add([e(() => this._view.navigation.gamepad?.enabled, t => {\n      t ? (this._handle.resume(), this._frameTask || (this._frameTask = a({\n        update: t => this._frameUpdate(t.deltaTime)\n      }))) : (this._handle.pause(), this._frameTask && (this._frameTask.remove(), this._frameTask = null));\n    }, i)]);\n  }\n  onUninstall() {\n    this._watchHandles.removeAll(), this._frameTask && (this._frameTask.remove(), this._frameTask = null), super.onUninstall();\n  }\n  _handleGamePadEvent(t) {\n    const e = this._view.navigation.gamepad.device;\n    e && t.data.device !== e || this._currentDevice && this._currentDevice !== t.data.device || (\"end\" === t.data.action ? (this._currentDevice = null, o(this._transformation)) : (this._currentDevice = t.data.device, h(t.data, this._view.navigation.gamepad, this._transformation)), this._frameTask?.resume());\n  }\n  _frameUpdate(t) {\n    const e = this._transformation;\n    if (l(e)) return void this._frameTask?.pause();\n    const i = this._view.viewpoint.clone(),\n      a = this._view.navigation.gamepad.velocityFactor,\n      r = _ * a * t;\n    s(i, i, [e.translation[0] * r, -e.translation[1] * r]);\n    const o = 1 + e.translation[2] * c * t,\n      h = this._view.constraints.rotationEnabled ? -e.heading * d * t : 0,\n      m = this._view.size,\n      v = [m[0] / 2, m[1]];\n    n(i, i, o, h, v, m);\n    const p = this._view.constraints.constrain(i, this._view.viewpoint);\n    this._view.viewpoint = p;\n  }\n}\nconst d = .06,\n  _ = .7,\n  c = 6e-4;\nexport { m as GamepadNavigation };","map":{"version":3,"names":["t","watch","e","initial","i","addFrameTask","a","translateBy","s","scaleAndRotateBy","n","InputHandler","r","resetTransformation","o","extractTransformation","h","isZeroTransformation","l","m","constructor","_view","_frameTask","_watchHandles","_currentDevice","_transformation","translation","heading","tilt","zoom","_handle","registerIncoming","_handleGamePadEvent","pause","onInstall","add","navigation","gamepad","enabled","resume","update","_frameUpdate","deltaTime","remove","onUninstall","removeAll","device","data","action","viewpoint","clone","velocityFactor","_","c","constraints","rotationEnabled","d","size","v","p","constrain","GamepadNavigation"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/input/handlers/GamepadNavigation.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/Handles.js\";import{watch as e,initial as i}from\"../../../../core/reactiveUtils.js\";import{addFrameTask as a}from\"../../../../core/scheduling.js\";import{translateBy as s,scaleAndRotateBy as n}from\"../../viewpointUtils.js\";import{InputHandler as r}from\"../../../input/InputHandler.js\";import{resetTransformation as o,extractTransformation as h,isZeroTransformation as l}from\"../../../navigation/gamepadAndKeyboardUtils.js\";class m extends r{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new t,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming(\"gamepad\",(t=>this._handleGamePadEvent(t))),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([e((()=>this._view.navigation.gamepad?.enabled),(t=>{t?(this._handle.resume(),this._frameTask||(this._frameTask=a({update:t=>this._frameUpdate(t.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))}),i)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const e=this._view.navigation.gamepad.device;e&&t.data.device!==e||this._currentDevice&&this._currentDevice!==t.data.device||(\"end\"===t.data.action?(this._currentDevice=null,o(this._transformation)):(this._currentDevice=t.data.device,h(t.data,this._view.navigation.gamepad,this._transformation)),this._frameTask?.resume())}_frameUpdate(t){const e=this._transformation;if(l(e))return void this._frameTask?.pause();const i=this._view.viewpoint.clone(),a=this._view.navigation.gamepad.velocityFactor,r=_*a*t;s(i,i,[e.translation[0]*r,-e.translation[1]*r]);const o=1+e.translation[2]*c*t,h=this._view.constraints.rotationEnabled?-e.heading*d*t:0,m=this._view.size,v=[m[0]/2,m[1]];n(i,i,o,h,v,m);const p=this._view.constraints.constrain(i,this._view.viewpoint);this._view.viewpoint=p}}const d=.06,_=.7,c=6e-4;export{m as GamepadNavigation};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}