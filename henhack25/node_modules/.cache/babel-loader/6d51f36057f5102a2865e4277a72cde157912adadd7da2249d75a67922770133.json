{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from \"../../../../../../../core/Evented.js\";\nimport has from \"../../../../../../../core/has.js\";\nimport { create as s } from \"../../../../../../../geometry/support/aaBoundingBox.js\";\nimport { FeatureStoreQueryAdapter as t } from \"../../../FeatureStoreQueryAdapter.js\";\nimport { OverrideState as r } from \"./Overrides.js\";\nclass o {\n  constructor(s) {\n    this._metadata = s, this._chunks = new Map(), this._chunksToRemove = [], this._overrides = new r(), this.events = new e(), this.featureAdapter = new t();\n  }\n  destroy() {\n    this.clear();\n  }\n  clear() {\n    for (const e of this._chunks.values()) this._chunksToRemove.push(e);\n    this._chunks.clear(), this._overrides.clearWeakOverrides();\n  }\n  *chunks() {\n    this._overrides && (yield this._overrides.asChunk(this._metadata)), yield* this._chunks.values();\n  }\n  insert(e) {\n    has(\"esri-2d-update-debug\") && console.debug(`Chunk[${e.chunkId}] SourceChunkStore.insert`), this._overrides.onChunkInsert(e), this._chunks.set(e.chunkId, e), this.events.emit(\"changed\");\n  }\n  remove(e) {\n    has(\"esri-2d-update-debug\") && console.debug(`Chunk[${e.chunkId}] SourceChunkStore.remove`), this._chunks.delete(e.chunkId), this._chunksToRemove.push(e);\n  }\n  cleanup() {\n    const e = this._chunksToRemove;\n    return this._chunksToRemove = [], this._overrides.cleanup(this._chunks.values()), e;\n  }\n  applyOverride(e) {\n    this._overrides.apply(e, this), this.events.emit(\"changed\");\n    for (const s of this._chunks.values()) s.invalidate();\n  }\n  takeOverrideUpdate() {\n    return this._overrides.takeOverrideUpdate();\n  }\n  refresh() {\n    this.events.emit(\"refresh\");\n  }\n  forEach(e) {\n    const s = new Set();\n    for (const t of this.chunks()) {\n      const r = t.reader.getCursor();\n      for (; r.next();) {\n        const t = r.getObjectId();\n        s.has(t) || (e(r.copy()), s.add(t));\n      }\n    }\n  }\n  forEachUnsafe(e) {\n    const s = new Set();\n    for (const t of this.chunks()) {\n      const r = t.reader.getCursor();\n      for (; r.next();) {\n        const t = r.getObjectId();\n        s.has(t) || (e(r), s.add(t));\n      }\n    }\n  }\n  forEachInBounds(e, s) {\n    const t = new Set();\n    for (const r of this.chunks()) {\n      const o = r.queryFeaturesInBounds(e);\n      for (; o.next();) {\n        const e = o.getObjectId();\n        t.has(e) || (s(o.copy()), t.add(e));\n      }\n    }\n  }\n  forEachBounds(e, t) {\n    const r = s();\n    for (const s of e) {\n      s.getBounds(r) && t(r);\n    }\n  }\n}\nexport { o as FeatureSourceChunkStore };","map":{"version":3,"names":["e","has","create","s","FeatureStoreQueryAdapter","t","OverrideState","r","o","constructor","_metadata","_chunks","Map","_chunksToRemove","_overrides","events","featureAdapter","destroy","clear","values","push","clearWeakOverrides","chunks","asChunk","insert","console","debug","chunkId","onChunkInsert","set","emit","remove","delete","cleanup","applyOverride","apply","invalidate","takeOverrideUpdate","refresh","forEach","Set","reader","getCursor","next","getObjectId","copy","add","forEachUnsafe","forEachInBounds","queryFeaturesInBounds","forEachBounds","getBounds","FeatureSourceChunkStore"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/layers/features/sources/strategies/chunks/SourceChunkStore.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../../../core/Evented.js\";import has from\"../../../../../../../core/has.js\";import{create as s}from\"../../../../../../../geometry/support/aaBoundingBox.js\";import{FeatureStoreQueryAdapter as t}from\"../../../FeatureStoreQueryAdapter.js\";import{OverrideState as r}from\"./Overrides.js\";class o{constructor(s){this._metadata=s,this._chunks=new Map,this._chunksToRemove=[],this._overrides=new r,this.events=new e,this.featureAdapter=new t}destroy(){this.clear()}clear(){for(const e of this._chunks.values())this._chunksToRemove.push(e);this._chunks.clear(),this._overrides.clearWeakOverrides()}*chunks(){this._overrides&&(yield this._overrides.asChunk(this._metadata)),yield*this._chunks.values()}insert(e){has(\"esri-2d-update-debug\")&&console.debug(`Chunk[${e.chunkId}] SourceChunkStore.insert`),this._overrides.onChunkInsert(e),this._chunks.set(e.chunkId,e),this.events.emit(\"changed\")}remove(e){has(\"esri-2d-update-debug\")&&console.debug(`Chunk[${e.chunkId}] SourceChunkStore.remove`),this._chunks.delete(e.chunkId),this._chunksToRemove.push(e)}cleanup(){const e=this._chunksToRemove;return this._chunksToRemove=[],this._overrides.cleanup(this._chunks.values()),e}applyOverride(e){this._overrides.apply(e,this),this.events.emit(\"changed\");for(const s of this._chunks.values())s.invalidate()}takeOverrideUpdate(){return this._overrides.takeOverrideUpdate()}refresh(){this.events.emit(\"refresh\")}forEach(e){const s=new Set;for(const t of this.chunks()){const r=t.reader.getCursor();for(;r.next();){const t=r.getObjectId();s.has(t)||(e(r.copy()),s.add(t))}}}forEachUnsafe(e){const s=new Set;for(const t of this.chunks()){const r=t.reader.getCursor();for(;r.next();){const t=r.getObjectId();s.has(t)||(e(r),s.add(t))}}}forEachInBounds(e,s){const t=new Set;for(const r of this.chunks()){const o=r.queryFeaturesInBounds(e);for(;o.next();){const e=o.getObjectId();t.has(e)||(s(o.copy()),t.add(e))}}}forEachBounds(e,t){const r=s();for(const s of e){s.getBounds(r)&&t(r)}}}export{o as FeatureSourceChunkStore};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}