{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from \"../../Graphic.js\";\nimport t from \"../../core/Collection.js\";\nimport a from \"../../core/Error.js\";\nimport { clone as r } from \"../../core/lang.js\";\nimport s from \"../../core/Logger.js\";\nimport { createResolver as i } from \"../../core/promiseUtils.js\";\nimport { dataComponents as n } from \"../../core/urlUtils.js\";\nimport { generateBracedUUID as o } from \"../../core/uuid.js\";\nimport { normalizeCentralMeridian as l } from \"../../geometry/support/normalizeUtils.js\";\nimport { isGeographic as d, equals as u, isWGS84 as p, isWebMercator as c } from \"../../geometry/support/spatialReferenceUtils.js\";\nimport { isEditBusLayer as h, emitApplyEditsEvent as m } from \"../mixins/EditBusLayer.js\";\nimport { isValidFieldValue as f } from \"../support/fieldUtils.js\";\nimport { isGlbSupportedEditFormat as y } from \"../support/infoFor3D.js\";\nimport { getEffectiveEditingEnabled as g, getEffectiveLayerCapabilities as b } from \"../support/layerUtils.js\";\nfunction w(e) {\n  return null != e?.applyEdits;\n}\nfunction F(e) {\n  return \"object\" == typeof e && null != e && \"objectId\" in e && !!e.objectId;\n}\nfunction A(e) {\n  return e.every(F);\n}\nfunction v(e) {\n  return \"object\" == typeof e && null != e && \"globalId\" in e && !!e.globalId;\n}\nfunction I(e) {\n  return e.every(v);\n}\nasync function $(e, t, a, s = {}) {\n  let n;\n  const o = \"gdbVersion\" in e ? e.gdbVersion : null,\n    l = s.gdbVersion ?? o;\n  if (h(e) && e.url) n = m(e.url, e.layerId, l, \"original-and-current-features\" === s.returnServiceEditsOption);else {\n    n = i(), n.promise.then(t => {\n      (t.addedFeatures.length || t.updatedFeatures.length || t.deletedFeatures.length || t.addedAttachments.length || t.updatedAttachments.length || t.deletedAttachments.length) && e.emit(\"edits\", t);\n    });\n    const t = {\n      result: n.promise\n    };\n    e.emit(\"apply-edits\", t);\n  }\n  try {\n    const {\n        results: i,\n        edits: o\n      } = await E(e, t, a, s),\n      l = e => e.filter(e => !e.error).map(r),\n      d = {\n        edits: o,\n        addedFeatures: l(i.addFeatureResults),\n        updatedFeatures: l(i.updateFeatureResults),\n        deletedFeatures: l(i.deleteFeatureResults),\n        addedAttachments: l(i.addAttachmentResults),\n        updatedAttachments: l(i.updateAttachmentResults),\n        deletedAttachments: l(i.deleteAttachmentResults),\n        exceededTransferLimit: !1,\n        historicMoment: i.editMoment ? new Date(i.editMoment) : null,\n        globalIdToObjectId: s.globalIdToObjectId\n      };\n    return i.editedFeatureResults?.length && (d.editedFeatures = i.editedFeatureResults), n.resolve(d), i;\n  } catch (d) {\n    throw n.reject(d), d;\n  }\n}\nasync function E(e, t, r, s) {\n  if (await e.load(), !w(t)) throw new a(`${e.type}-layer:no-editing-support`, \"Layer source does not support applyEdits capability\", {\n    layer: e\n  });\n  if (!g(e)) throw new a(`${e.type}-layer:editing-disabled`, \"Editing is disabled for layer\", {\n    layer: e\n  });\n  const {\n    edits: i,\n    options: n\n  } = await S(e, r, s);\n  return i.addFeatures?.length || i.updateFeatures?.length || i.deleteFeatures?.length || i.addAttachments?.length || i.updateAttachments?.length || i.deleteAttachments?.length ? {\n    edits: i,\n    results: await t.applyEdits(i, n)\n  } : {\n    edits: i,\n    results: {\n      addFeatureResults: [],\n      updateFeatureResults: [],\n      deleteFeatureResults: [],\n      addAttachmentResults: [],\n      updateAttachmentResults: [],\n      deleteAttachmentResults: []\n    }\n  };\n}\nasync function S(e, t, r) {\n  const i = b(e),\n    n = t && (t.addFeatures || t.updateFeatures || t.deleteFeatures),\n    o = t && (t.addAttachments || t.updateAttachments || t.deleteAttachments),\n    l = null != e.infoFor3D;\n  if (V(t, i, r, !!n, !!o, `${e.type}-layer`), !i.data.isVersioned && r?.gdbVersion) throw new a(`${e.type}-layer:invalid-parameter`, \"'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isVersioned'\");\n  if (!i.editing.supportsRollbackOnFailure && r?.rollbackOnFailureEnabled) throw new a(`${e.type}-layer:invalid-parameter`, \"This layer does not support 'rollbackOnFailureEnabled' parameter. See: 'capabilities.editing.supportsRollbackOnFailure'\");\n  const d = {\n    ...r\n  };\n  if (null != d.rollbackOnFailureEnabled || i.editing.supportsRollbackOnFailure || (d.rollbackOnFailureEnabled = !0), d.rollbackOnFailureEnabled || \"original-and-current-features\" !== d.returnServiceEditsOption || (!1 === d.rollbackOnFailureEnabled && s.getLogger(\"esri.layers.graphics.editingSupport\").warn(`${e.type}-layer:invalid-parameter`, \"'original-and-current-features' is valid for 'returnServiceEditsOption' only when 'rollBackOnFailure' is true, but 'rollBackOnFailure' was set to false. 'rollBackOnFailure' has been overwritten and set to true.\"), d.rollbackOnFailureEnabled = !0), !i.editing.supportsReturnServiceEditsInSourceSpatialReference && d.returnServiceEditsInSourceSR) throw new a(`${e.type}-layer:invalid-parameter`, \"This layer does not support 'returnServiceEditsInSourceSR' parameter. See: 'capabilities.editing.supportsReturnServiceEditsInSourceSpatialReference'\");\n  if (d.returnServiceEditsInSourceSR && \"original-and-current-features\" !== d.returnServiceEditsOption) throw new a(`${e.type}-layer:invalid-parameter`, \"'returnServiceEditsInSourceSR' is valid only when 'returnServiceEditsOption' is set to 'original-and-current-features'\");\n  const u = G(t, i, `${e.type}-layer`),\n    p = r?.globalIdUsed || l,\n    c = e.fields.filter(e => \"big-integer\" === e.type || \"oid\" === e.type && (e.length || 0) >= 8);\n  if (p) {\n    const {\n      globalIdField: t\n    } = e;\n    if (null == t) throw new a(`${e.type}-layer:invalid-parameter`, \"Layer does not specify a global id field.\");\n    u.addFeatures.forEach(e => B(e, t));\n  }\n  u.addFeatures.forEach(t => O(t, e, p, c)), u.updateFeatures.forEach(t => k(t, e, p, c)), u.deleteFeatures.forEach(t => U(t, e, p, c)), u.addAttachments.forEach(t => L(t, e)), u.updateAttachments.forEach(t => L(t, e)), l && (await x(u, e));\n  return {\n    edits: await T(u),\n    options: d\n  };\n}\nfunction R(e, t, r, s) {\n  if (r) {\n    if (\"attributes\" in e && !e.attributes[t.globalIdField]) throw new a(`${t.type}-layer:invalid-parameter`, `Feature should have '${t.globalIdField}' when 'globalIdUsed' is true`);\n    if (!(\"attributes\" in e) && !e.globalId) throw new a(`${t.type}-layer:invalid-parameter`, \"`'globalId' of the feature should be passed when 'globalIdUsed' is true\");\n  }\n  if (s.length && \"attributes\" in e) for (const i of s) {\n    const r = e.attributes[i.name];\n    if (void 0 !== r && !f(i, r)) throw new a(`${t.type}-layer:invalid-parameter`, `Big-integer field '${i.name}' of the feature must be less than ${Number.MAX_SAFE_INTEGER}`, {\n      feature: e\n    });\n  }\n  if (\"geometry\" in e && null != e.geometry) {\n    if (e.geometry.hasZ && !1 === t.capabilities?.data.supportsZ) throw new a(`${t.type}-layer:z-unsupported`, \"Layer does not support z values while feature has z values.\");\n    if (e.geometry.hasM && !1 === t.capabilities?.data.supportsM) throw new a(`${t.type}-layer:m-unsupported`, \"Layer does not support m values while feature has m values.\");\n  }\n}\nfunction j(e, t) {\n  if (\"geometry\" in e && \"mesh\" === e.geometry?.type && null != t.infoFor3D && null != t.spatialReference) {\n    const {\n        geometry: r\n      } = e,\n      {\n        spatialReference: s,\n        vertexSpace: i\n      } = r,\n      n = t.spatialReference,\n      o = \"local\" === i.type,\n      l = d(n),\n      h = u(n, s),\n      m = h || p(n) && (p(s) || c(s));\n    if (!(o && l && m || !o && !l && h)) throw new a(`${t.type}-layer:mesh-unsupported`, `Uploading a mesh with a ${i.type} vertex space and a spatial reference wkid:${s.wkid} to a layer with a spatial reference wkid:${n.wkid} is not supported.`);\n  }\n}\nfunction O(e, t, a, r) {\n  R(e, t, a, r), j(e, t);\n}\nfunction U(e, t, a, r) {\n  R(e, t, a, r);\n}\nfunction k(e, t, r, s) {\n  R(e, t, r, s), j(e, t);\n  const i = b(t);\n  if (\"geometry\" in e && null != e.geometry && !i?.editing.supportsGeometryUpdate) throw new a(`${t.type}-layer:unsupported-operation`, \"Layer does not support geometry updates.\");\n}\nfunction L(e, t) {\n  const {\n    feature: r,\n    attachment: s\n  } = e;\n  if (!r || \"attributes\" in r && !r.attributes[t.globalIdField]) throw new a(`${t.type}-layer:invalid-parameter`, \"Attachment should have reference to a feature with 'globalId'\");\n  if (!(\"attributes\" in r) && !r.globalId) throw new a(`${t.type}-layer:invalid-parameter`, \"Attachment should have reference to 'globalId' of the parent feature\");\n  if (!s.globalId) throw new a(`${t.type}-layer:invalid-parameter`, \"Attachment should have 'globalId'\");\n  if (!s.data && !s.uploadId) throw new a(`${t.type}-layer:invalid-parameter`, \"Attachment should have 'data' or 'uploadId'\");\n  if (!(s.data instanceof File && !!s.data.name) && !s.name) throw new a(`${t.type}-layer:invalid-parameter`, \"'name' is required when attachment is specified as Base64 encoded string using 'data'\");\n  if (!t.capabilities?.editing.supportsUploadWithItemId && s.uploadId) throw new a(`${t.type}-layer:invalid-parameter`, \"This layer does not support 'uploadId' parameter. See: 'capabilities.editing.supportsUploadWithItemId'\");\n  if (\"string\" == typeof s.data) {\n    const e = n(s.data);\n    if (e && !e.isBase64) throw new a(`${t.type}-layer:invalid-parameter`, \"Attachment 'data' should be a Blob, File or Base64 encoded string\");\n  }\n}\nfunction B(e, t) {\n  const {\n    attributes: a\n  } = e;\n  null == a[t] && (a[t] = o());\n}\nasync function T(e) {\n  const t = e.addFeatures ?? [],\n    a = e.updateFeatures ?? [],\n    r = t.concat(a).map(e => e.geometry),\n    s = await l(r),\n    i = t.length,\n    n = a.length;\n  return s.slice(0, i).forEach((e, a) => t[a].geometry = e), s.slice(i, i + n).forEach((e, t) => a[t].geometry = e), e;\n}\nfunction D(e) {\n  return {\n    addFeatures: Array.from(e?.addFeatures ?? []),\n    updateFeatures: Array.from(e?.updateFeatures ?? []),\n    deleteFeatures: e && t.isCollection(e.deleteFeatures) ? e.deleteFeatures.toArray() : e.deleteFeatures || [],\n    addAttachments: e.addAttachments || [],\n    updateAttachments: e.updateAttachments || [],\n    deleteAttachments: e.deleteAttachments || []\n  };\n}\nfunction G(e, t, r) {\n  const s = D(e);\n  if (s.addFeatures?.length && !t.operations.supportsAdd) throw new a(`${r}:unsupported-operation`, \"Layer does not support adding features.\");\n  if (s.updateFeatures?.length && !t.operations.supportsUpdate) throw new a(`${r}:unsupported-operation`, \"Layer does not support updating features.\");\n  if (s.deleteFeatures?.length && !t.operations.supportsDelete) throw new a(`${r}:unsupported-operation`, \"Layer does not support deleting features.\");\n  return s.addFeatures = s.addFeatures.map(M), s.updateFeatures = s.updateFeatures.map(M), s.addAssetFeatures = [], s;\n}\nfunction V(e, t, r, s, i, n) {\n  if (!e || !s && !i) throw new a(`${n}:missing-parameters`, \"'addFeatures', 'updateFeatures', 'deleteFeatures', 'addAttachments', 'updateAttachments' or 'deleteAttachments' parameter is required\");\n  if (!t.editing.supportsGlobalId && r?.globalIdUsed) throw new a(`${n}:invalid-parameter`, \"This layer does not support 'globalIdUsed' parameter. See: 'capabilities.editing.supportsGlobalId'\");\n  if (!t.editing.supportsGlobalId && i) throw new a(`${n}:invalid-parameter`, \"'addAttachments', 'updateAttachments' and 'deleteAttachments' are applicable only if the layer supports global ids. See: 'capabilities.editing.supportsGlobalId'\");\n  if (!r?.globalIdUsed && i) throw new a(`${n}:invalid-parameter`, \"When 'addAttachments', 'updateAttachments' or 'deleteAttachments' is specified, globalIdUsed should be set to true\");\n}\nfunction M(t) {\n  const a = new e();\n  return t.attributes || (t.attributes = {}), a.geometry = t.geometry, a.attributes = t.attributes, a;\n}\nasync function x(e, t) {\n  const {\n    infoFor3D: r\n  } = t;\n  if (null == r) return;\n  if (!y(r)) throw new a(`${t.type}-layer:binary-gltf-asset-not-supported`, \"3DObjectFeatureLayer requires binary glTF (.glb) support for updating mesh geometry.\");\n  e.addAssetFeatures ??= [];\n  const {\n    addAssetFeatures: s\n  } = e;\n  for (const a of e.addFeatures ?? []) z(a) && s.push(a);\n  for (const a of e.updateFeatures ?? []) z(a) && s.push(a);\n}\nfunction z(e) {\n  return \"mesh\" === e?.geometry?.type;\n}\nfunction q(e, t, r, s) {\n  if (!w(t)) throw new a(`${e.type}-layer:no-editing-support`, \"Layer source does not support applyEdits capability\", {\n    layer: e\n  });\n  if (!t.uploadAssets) throw new a(`${e.type}-layer:no-asset-upload-support`, \"Layer source does not support uploadAssets capability\", {\n    layer: e\n  });\n  return t.uploadAssets(r, s);\n}\nexport { $ as applyEdits, V as checkEditingCapabilities, I as isFeatureIdentifierArrayWithGlobalId, A as isFeatureIdentifierArrayWithObjectId, v as isFeatureIdentifierWithGlobalId, F as isFeatureIdentifierWithObjectId, D as normalizeCollections, G as normalizeEdits, T as normalizeGeometries, M as shallowCloneFeature, q as uploadAssets };","map":{"version":3,"names":["e","t","a","clone","r","s","createResolver","i","dataComponents","n","generateBracedUUID","o","normalizeCentralMeridian","l","isGeographic","d","equals","u","isWGS84","p","isWebMercator","c","isEditBusLayer","h","emitApplyEditsEvent","m","isValidFieldValue","f","isGlbSupportedEditFormat","y","getEffectiveEditingEnabled","g","getEffectiveLayerCapabilities","b","w","applyEdits","F","objectId","A","every","v","globalId","I","$","gdbVersion","url","layerId","returnServiceEditsOption","promise","then","addedFeatures","length","updatedFeatures","deletedFeatures","addedAttachments","updatedAttachments","deletedAttachments","emit","result","results","edits","E","filter","error","map","addFeatureResults","updateFeatureResults","deleteFeatureResults","addAttachmentResults","updateAttachmentResults","deleteAttachmentResults","exceededTransferLimit","historicMoment","editMoment","Date","globalIdToObjectId","editedFeatureResults","editedFeatures","resolve","reject","load","type","layer","options","S","addFeatures","updateFeatures","deleteFeatures","addAttachments","updateAttachments","deleteAttachments","infoFor3D","V","data","isVersioned","editing","supportsRollbackOnFailure","rollbackOnFailureEnabled","getLogger","warn","supportsReturnServiceEditsInSourceSpatialReference","returnServiceEditsInSourceSR","G","globalIdUsed","fields","globalIdField","forEach","B","O","k","U","L","x","T","R","attributes","name","Number","MAX_SAFE_INTEGER","feature","geometry","hasZ","capabilities","supportsZ","hasM","supportsM","j","spatialReference","vertexSpace","wkid","supportsGeometryUpdate","attachment","uploadId","File","supportsUploadWithItemId","isBase64","concat","slice","D","Array","from","isCollection","toArray","operations","supportsAdd","supportsUpdate","supportsDelete","M","addAssetFeatures","supportsGlobalId","z","push","q","uploadAssets","checkEditingCapabilities","isFeatureIdentifierArrayWithGlobalId","isFeatureIdentifierArrayWithObjectId","isFeatureIdentifierWithGlobalId","isFeatureIdentifierWithObjectId","normalizeCollections","normalizeEdits","normalizeGeometries","shallowCloneFeature"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/layers/graphics/editingSupport.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../Graphic.js\";import t from\"../../core/Collection.js\";import a from\"../../core/Error.js\";import{clone as r}from\"../../core/lang.js\";import s from\"../../core/Logger.js\";import{createResolver as i}from\"../../core/promiseUtils.js\";import{dataComponents as n}from\"../../core/urlUtils.js\";import{generateBracedUUID as o}from\"../../core/uuid.js\";import{normalizeCentralMeridian as l}from\"../../geometry/support/normalizeUtils.js\";import{isGeographic as d,equals as u,isWGS84 as p,isWebMercator as c}from\"../../geometry/support/spatialReferenceUtils.js\";import{isEditBusLayer as h,emitApplyEditsEvent as m}from\"../mixins/EditBusLayer.js\";import{isValidFieldValue as f}from\"../support/fieldUtils.js\";import{isGlbSupportedEditFormat as y}from\"../support/infoFor3D.js\";import{getEffectiveEditingEnabled as g,getEffectiveLayerCapabilities as b}from\"../support/layerUtils.js\";function w(e){return null!=e?.applyEdits}function F(e){return\"object\"==typeof e&&null!=e&&\"objectId\"in e&&!!e.objectId}function A(e){return e.every(F)}function v(e){return\"object\"==typeof e&&null!=e&&\"globalId\"in e&&!!e.globalId}function I(e){return e.every(v)}async function $(e,t,a,s={}){let n;const o=\"gdbVersion\"in e?e.gdbVersion:null,l=s.gdbVersion??o;if(h(e)&&e.url)n=m(e.url,e.layerId,l,\"original-and-current-features\"===s.returnServiceEditsOption);else{n=i(),n.promise.then((t=>{(t.addedFeatures.length||t.updatedFeatures.length||t.deletedFeatures.length||t.addedAttachments.length||t.updatedAttachments.length||t.deletedAttachments.length)&&e.emit(\"edits\",t)}));const t={result:n.promise};e.emit(\"apply-edits\",t)}try{const{results:i,edits:o}=await E(e,t,a,s),l=e=>e.filter((e=>!e.error)).map(r),d={edits:o,addedFeatures:l(i.addFeatureResults),updatedFeatures:l(i.updateFeatureResults),deletedFeatures:l(i.deleteFeatureResults),addedAttachments:l(i.addAttachmentResults),updatedAttachments:l(i.updateAttachmentResults),deletedAttachments:l(i.deleteAttachmentResults),exceededTransferLimit:!1,historicMoment:i.editMoment?new Date(i.editMoment):null,globalIdToObjectId:s.globalIdToObjectId};return i.editedFeatureResults?.length&&(d.editedFeatures=i.editedFeatureResults),n.resolve(d),i}catch(d){throw n.reject(d),d}}async function E(e,t,r,s){if(await e.load(),!w(t))throw new a(`${e.type}-layer:no-editing-support`,\"Layer source does not support applyEdits capability\",{layer:e});if(!g(e))throw new a(`${e.type}-layer:editing-disabled`,\"Editing is disabled for layer\",{layer:e});const{edits:i,options:n}=await S(e,r,s);return i.addFeatures?.length||i.updateFeatures?.length||i.deleteFeatures?.length||i.addAttachments?.length||i.updateAttachments?.length||i.deleteAttachments?.length?{edits:i,results:await t.applyEdits(i,n)}:{edits:i,results:{addFeatureResults:[],updateFeatureResults:[],deleteFeatureResults:[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}}async function S(e,t,r){const i=b(e),n=t&&(t.addFeatures||t.updateFeatures||t.deleteFeatures),o=t&&(t.addAttachments||t.updateAttachments||t.deleteAttachments),l=null!=e.infoFor3D;if(V(t,i,r,!!n,!!o,`${e.type}-layer`),!i.data.isVersioned&&r?.gdbVersion)throw new a(`${e.type}-layer:invalid-parameter`,\"'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isVersioned'\");if(!i.editing.supportsRollbackOnFailure&&r?.rollbackOnFailureEnabled)throw new a(`${e.type}-layer:invalid-parameter`,\"This layer does not support 'rollbackOnFailureEnabled' parameter. See: 'capabilities.editing.supportsRollbackOnFailure'\");const d={...r};if(null!=d.rollbackOnFailureEnabled||i.editing.supportsRollbackOnFailure||(d.rollbackOnFailureEnabled=!0),d.rollbackOnFailureEnabled||\"original-and-current-features\"!==d.returnServiceEditsOption||(!1===d.rollbackOnFailureEnabled&&s.getLogger(\"esri.layers.graphics.editingSupport\").warn(`${e.type}-layer:invalid-parameter`,\"'original-and-current-features' is valid for 'returnServiceEditsOption' only when 'rollBackOnFailure' is true, but 'rollBackOnFailure' was set to false. 'rollBackOnFailure' has been overwritten and set to true.\"),d.rollbackOnFailureEnabled=!0),!i.editing.supportsReturnServiceEditsInSourceSpatialReference&&d.returnServiceEditsInSourceSR)throw new a(`${e.type}-layer:invalid-parameter`,\"This layer does not support 'returnServiceEditsInSourceSR' parameter. See: 'capabilities.editing.supportsReturnServiceEditsInSourceSpatialReference'\");if(d.returnServiceEditsInSourceSR&&\"original-and-current-features\"!==d.returnServiceEditsOption)throw new a(`${e.type}-layer:invalid-parameter`,\"'returnServiceEditsInSourceSR' is valid only when 'returnServiceEditsOption' is set to 'original-and-current-features'\");const u=G(t,i,`${e.type}-layer`),p=r?.globalIdUsed||l,c=e.fields.filter((e=>\"big-integer\"===e.type||\"oid\"===e.type&&(e.length||0)>=8));if(p){const{globalIdField:t}=e;if(null==t)throw new a(`${e.type}-layer:invalid-parameter`,\"Layer does not specify a global id field.\");u.addFeatures.forEach((e=>B(e,t)))}u.addFeatures.forEach((t=>O(t,e,p,c))),u.updateFeatures.forEach((t=>k(t,e,p,c))),u.deleteFeatures.forEach((t=>U(t,e,p,c))),u.addAttachments.forEach((t=>L(t,e))),u.updateAttachments.forEach((t=>L(t,e))),l&&await x(u,e);return{edits:await T(u),options:d}}function R(e,t,r,s){if(r){if(\"attributes\"in e&&!e.attributes[t.globalIdField])throw new a(`${t.type}-layer:invalid-parameter`,`Feature should have '${t.globalIdField}' when 'globalIdUsed' is true`);if(!(\"attributes\"in e)&&!e.globalId)throw new a(`${t.type}-layer:invalid-parameter`,\"`'globalId' of the feature should be passed when 'globalIdUsed' is true\")}if(s.length&&\"attributes\"in e)for(const i of s){const r=e.attributes[i.name];if(void 0!==r&&!f(i,r))throw new a(`${t.type}-layer:invalid-parameter`,`Big-integer field '${i.name}' of the feature must be less than ${Number.MAX_SAFE_INTEGER}`,{feature:e})}if(\"geometry\"in e&&null!=e.geometry){if(e.geometry.hasZ&&!1===t.capabilities?.data.supportsZ)throw new a(`${t.type}-layer:z-unsupported`,\"Layer does not support z values while feature has z values.\");if(e.geometry.hasM&&!1===t.capabilities?.data.supportsM)throw new a(`${t.type}-layer:m-unsupported`,\"Layer does not support m values while feature has m values.\")}}function j(e,t){if(\"geometry\"in e&&\"mesh\"===e.geometry?.type&&null!=t.infoFor3D&&null!=t.spatialReference){const{geometry:r}=e,{spatialReference:s,vertexSpace:i}=r,n=t.spatialReference,o=\"local\"===i.type,l=d(n),h=u(n,s),m=h||p(n)&&(p(s)||c(s));if(!(o&&l&&m||!o&&!l&&h))throw new a(`${t.type}-layer:mesh-unsupported`,`Uploading a mesh with a ${i.type} vertex space and a spatial reference wkid:${s.wkid} to a layer with a spatial reference wkid:${n.wkid} is not supported.`)}}function O(e,t,a,r){R(e,t,a,r),j(e,t)}function U(e,t,a,r){R(e,t,a,r)}function k(e,t,r,s){R(e,t,r,s),j(e,t);const i=b(t);if(\"geometry\"in e&&null!=e.geometry&&!i?.editing.supportsGeometryUpdate)throw new a(`${t.type}-layer:unsupported-operation`,\"Layer does not support geometry updates.\")}function L(e,t){const{feature:r,attachment:s}=e;if(!r||\"attributes\"in r&&!r.attributes[t.globalIdField])throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have reference to a feature with 'globalId'\");if(!(\"attributes\"in r)&&!r.globalId)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have reference to 'globalId' of the parent feature\");if(!s.globalId)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have 'globalId'\");if(!s.data&&!s.uploadId)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have 'data' or 'uploadId'\");if(!(s.data instanceof File&&!!s.data.name)&&!s.name)throw new a(`${t.type}-layer:invalid-parameter`,\"'name' is required when attachment is specified as Base64 encoded string using 'data'\");if(!t.capabilities?.editing.supportsUploadWithItemId&&s.uploadId)throw new a(`${t.type}-layer:invalid-parameter`,\"This layer does not support 'uploadId' parameter. See: 'capabilities.editing.supportsUploadWithItemId'\");if(\"string\"==typeof s.data){const e=n(s.data);if(e&&!e.isBase64)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment 'data' should be a Blob, File or Base64 encoded string\")}}function B(e,t){const{attributes:a}=e;null==a[t]&&(a[t]=o())}async function T(e){const t=e.addFeatures??[],a=e.updateFeatures??[],r=t.concat(a).map((e=>e.geometry)),s=await l(r),i=t.length,n=a.length;return s.slice(0,i).forEach(((e,a)=>t[a].geometry=e)),s.slice(i,i+n).forEach(((e,t)=>a[t].geometry=e)),e}function D(e){return{addFeatures:Array.from(e?.addFeatures??[]),updateFeatures:Array.from(e?.updateFeatures??[]),deleteFeatures:e&&t.isCollection(e.deleteFeatures)?e.deleteFeatures.toArray():e.deleteFeatures||[],addAttachments:e.addAttachments||[],updateAttachments:e.updateAttachments||[],deleteAttachments:e.deleteAttachments||[]}}function G(e,t,r){const s=D(e);if(s.addFeatures?.length&&!t.operations.supportsAdd)throw new a(`${r}:unsupported-operation`,\"Layer does not support adding features.\");if(s.updateFeatures?.length&&!t.operations.supportsUpdate)throw new a(`${r}:unsupported-operation`,\"Layer does not support updating features.\");if(s.deleteFeatures?.length&&!t.operations.supportsDelete)throw new a(`${r}:unsupported-operation`,\"Layer does not support deleting features.\");return s.addFeatures=s.addFeatures.map(M),s.updateFeatures=s.updateFeatures.map(M),s.addAssetFeatures=[],s}function V(e,t,r,s,i,n){if(!e||!s&&!i)throw new a(`${n}:missing-parameters`,\"'addFeatures', 'updateFeatures', 'deleteFeatures', 'addAttachments', 'updateAttachments' or 'deleteAttachments' parameter is required\");if(!t.editing.supportsGlobalId&&r?.globalIdUsed)throw new a(`${n}:invalid-parameter`,\"This layer does not support 'globalIdUsed' parameter. See: 'capabilities.editing.supportsGlobalId'\");if(!t.editing.supportsGlobalId&&i)throw new a(`${n}:invalid-parameter`,\"'addAttachments', 'updateAttachments' and 'deleteAttachments' are applicable only if the layer supports global ids. See: 'capabilities.editing.supportsGlobalId'\");if(!r?.globalIdUsed&&i)throw new a(`${n}:invalid-parameter`,\"When 'addAttachments', 'updateAttachments' or 'deleteAttachments' is specified, globalIdUsed should be set to true\")}function M(t){const a=new e;return t.attributes||(t.attributes={}),a.geometry=t.geometry,a.attributes=t.attributes,a}async function x(e,t){const{infoFor3D:r}=t;if(null==r)return;if(!y(r))throw new a(`${t.type}-layer:binary-gltf-asset-not-supported`,\"3DObjectFeatureLayer requires binary glTF (.glb) support for updating mesh geometry.\");e.addAssetFeatures??=[];const{addAssetFeatures:s}=e;for(const a of e.addFeatures??[])z(a)&&s.push(a);for(const a of e.updateFeatures??[])z(a)&&s.push(a)}function z(e){return\"mesh\"===e?.geometry?.type}function q(e,t,r,s){if(!w(t))throw new a(`${e.type}-layer:no-editing-support`,\"Layer source does not support applyEdits capability\",{layer:e});if(!t.uploadAssets)throw new a(`${e.type}-layer:no-asset-upload-support`,\"Layer source does not support uploadAssets capability\",{layer:e});return t.uploadAssets(r,s)}export{$ as applyEdits,V as checkEditingCapabilities,I as isFeatureIdentifierArrayWithGlobalId,A as isFeatureIdentifierArrayWithObjectId,v as isFeatureIdentifierWithGlobalId,F as isFeatureIdentifierWithObjectId,D as normalizeCollections,G as normalizeEdits,T as normalizeGeometries,M as shallowCloneFeature,q as uploadAssets};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}