{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport \"../../../Graphic.js\";\nimport t from \"../../../core/Collection.js\";\nimport i from \"../../../core/Error.js\";\nimport \"../../../core/has.js\";\nimport s from \"../../../core/Logger.js\";\nimport { getOrCreateMapValue as r } from \"../../../core/MapUtils.js\";\nimport { isAbortError as o } from \"../../../core/promiseUtils.js\";\nimport { watch as n, on as l, syncAndInitial as m } from \"../../../core/reactiveUtils.js\";\nimport { property as a } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/RandomLCG.js\";\nimport { subclass as c } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport p from \"../../../geometry/Extent.js\";\nimport { create as h } from \"../../../geometry/support/aaBoundingRect.js\";\nimport { ringsContainsCoords as d } from \"../../../geometry/support/contains.js\";\nimport { extentIntersectsPolygon as g } from \"../../../geometry/support/intersectsBase.js\";\nimport { MediaElementView as u } from \"../../../layers/support/MediaElementView.js\";\nimport \"../../../renderers/SimpleRenderer.js\";\nimport \"../../../symbols/SimpleFillSymbol.js\";\nimport \"../../../core/scheduling.js\";\nimport \"../../../core/accessorSupport/tracking/Flags.js\";\nimport \"../../../core/colorUtils.js\";\nimport \"../../../config.js\";\nimport \"../../../symbols/cim/defaultCIMValues.js\";\nimport \"../../../symbols/cim/enums.js\";\nimport \"../../../core/floatRGBA.js\";\nimport \"../../../geometry/Geometry.js\";\nimport \"../../../geometry/Multipoint.js\";\nimport \"../../../geometry/Point.js\";\nimport \"../../../geometry/Polygon.js\";\nimport \"../../../geometry/Polyline.js\";\nimport \"../engine/webgl/definitions.js\";\nimport \"../engine/webgl/animations/instructions.js\";\nimport \"../../../symbols/Font.js\";\nimport \"../../../core/mathUtils.js\";\nimport \"../../../core/ObjectPool.js\";\nimport \"../../../geometry/support/Axis.js\";\nimport \"../../../geometry/support/spatialReferenceUtils.js\";\nimport \"../../../geometry/support/TileClipper.js\";\nimport \"../../../symbols/cim/effects/EffectAddControlPoints.js\";\nimport \"../../../symbols/cim/effects/EffectArrow.js\";\nimport \"../../../symbols/cim/effects/EffectBuffer.js\";\nimport \"../../../symbols/cim/effects/EffectControlMeasureLine.js\";\nimport \"../../../symbols/cim/effects/EffectCut.js\";\nimport \"../../../symbols/cim/effects/EffectDashes.js\";\nimport \"../../../symbols/cim/effects/EffectDonut.js\";\nimport \"../../../symbols/cim/effects/EffectJog.js\";\nimport \"../../../symbols/cim/effects/EffectMove.js\";\nimport \"../../../symbols/cim/effects/EffectOffset.js\";\nimport \"../../../symbols/cim/effects/EffectReverse.js\";\nimport \"../../../symbols/cim/effects/EffectRotate.js\";\nimport \"../../../symbols/cim/effects/EffectScale.js\";\nimport \"../../../symbols/cim/effects/EffectWave.js\";\nimport \"../../../symbols/cim/placements/PlacementAlongLineSameSize.js\";\nimport \"../../../symbols/cim/placements/PlacementAtExtremities.js\";\nimport \"../../../symbols/cim/placements/PlacementAtRatioPositions.js\";\nimport \"../../../symbols/cim/placements/PlacementInsidePolygon.js\";\nimport \"../../../symbols/cim/placements/PlacementOnLine.js\";\nimport \"../../../symbols/cim/placements/PlacementOnVertices.js\";\nimport \"../../../symbols/cim/placements/PlacementPolygonCenter.js\";\nimport \"../../../core/libs/gl-matrix-2/factories/vec2f32.js\";\nimport \"../engine/webgl/alignmentUtils.js\";\nimport \"../../../symbols/support/defaults.js\";\nimport \"../../../symbols/cim/OverrideHelper.js\";\nimport \"../../../layers/effects/EffectView.js\";\nimport \"../../../core/Evented.js\";\nimport \"../engine/transitions/FadeTransition.js\";\nimport \"../engine/webgl/enums.js\";\nimport \"../../../core/libs/gl-matrix-2/factories/vec4f32.js\";\nimport \"../../webgl/checkWebGLError.js\";\nimport \"../../webgl/enums.js\";\nimport \"../../webgl/FramebufferObject.js\";\nimport \"../../webgl/GLObjectType.js\";\nimport \"../../webgl/Texture.js\";\nimport \"../engine/webgl/shaders/BackgroundPrograms.js\";\nimport \"../engine/webgl/DefaultVertexAttributeLayouts.js\";\nimport \"../engine/webgl/AFeatureTile.js\";\nimport \"../engine/webgl/DisplayEntity.js\";\nimport \"../engine/webgl/shaderGraph/techniques/featureTechniqueUtils.js\";\nimport \"../engine/webgl/number.js\";\nimport \"../engine/webgl/PooledUint32Array.js\";\nimport \"../engine/webgl/shaders/TileInfoPrograms.js\";\nimport \"../engine/vectorTiles/style/StyleDefinition.js\";\nimport \"../engine/vectorTiles/enums.js\";\nimport \"../engine/webgl/shaders/BitBlitPrograms.js\";\nimport \"../../../request.js\";\nimport \"../../../core/urlUtils.js\";\nimport \"../../../core/pbf.js\";\nimport \"../engine/webgl/shaders/StencilPrograms.js\";\nimport \"../engine/webgl/shaderGraph/techniques/TechniqueType.js\";\nimport \"../engine/webgl/shaderGraph/techniques/shaders/BlendShader.js\";\nimport \"../engine/webgl/shaderGraph/techniques/shaders/OpacityShader.js\";\nimport \"../engine/webgl/shaders/HighlightPrograms.js\";\nimport \"../engine/webgl/meshing/SimpleMesh.js\";\nimport \"../engine/webgl/Profiler.js\";\nimport \"../engine/webgl/shaderGraph/techniques/TechniqueRegistry.js\";\nimport \"../../../Color.js\";\nimport \"../engine/webgl/shaderGraph/techniques/shaders/constants.js\";\nimport \"../engine/webgl/shaderGraph/techniques/dotDensity/DotDensityMeshWriter.js\";\nimport \"../engine/webgl/shaderGraph/techniques/fill/ComplexFillMeshWriter.js\";\nimport \"../engine/webgl/shaderGraph/techniques/fill/ComplexOutlineFillMeshWriter.js\";\nimport \"../engine/webgl/shaderGraph/techniques/fill/FillMeshWriter.js\";\nimport \"../engine/webgl/shaderGraph/techniques/fill/GradientFillMeshWriter.js\";\nimport \"../engine/webgl/shaderGraph/techniques/fill/OutlineFillMeshWriter.js\";\nimport \"../engine/webgl/shaderGraph/techniques/fill/PatternFillMeshWriter.js\";\nimport \"../engine/webgl/shaderGraph/techniques/fill/PatternOutlineFillMeshWriter.js\";\nimport \"../engine/webgl/shaderGraph/techniques/heatmap/HeatmapMeshWriter.js\";\nimport \"../../../geometry/support/aaBoundingBox.js\";\nimport \"../engine/webgl/shaderGraph/techniques/text/TextMeshWriter.js\";\nimport \"../engine/webgl/shaderGraph/techniques/line/GradientStrokeMeshWriter.js\";\nimport \"../engine/webgl/shaderGraph/techniques/line/LineMeshWriter.js\";\nimport \"../engine/webgl/shaderGraph/techniques/line/TexturedLineMeshWriter.js\";\nimport \"../engine/webgl/shaderGraph/techniques/markers/MarkerMeshWriter.js\";\nimport \"../../../arcade/ArcadeDate.js\";\nimport \"../../../geometry/SpatialReference.js\";\nimport \"../engine/webgl/shaderGraph/techniques/pieChart/PieChartMeshWriter.js\";\nimport \"../../webgl/renderState.js\";\nimport \"../../3d/webgl-engine/core/shaderModules/glsl.js\";\nimport \"../../webgl/testSVGPremultipliedAlpha.js\";\nimport \"../LabelManager.js\";\nimport \"./graphics/GraphicsView2D.js\";\nimport \"../../../chunks/earcut.js\";\nimport \"../../../core/libs/gl-matrix-2/factories/vec3f32.js\";\nimport \"../../../geometry/support/normalizeUtilsCommon.js\";\nimport \"../../../geometry/support/Ellipsoid.js\";\nimport \"../../../kernel.js\";\nimport \"./support/util.js\";\nimport \"../navigation/MapViewNavigation.js\";\nimport \"../../../core/asyncUtils.js\";\nimport \"../../../core/support/UpdatingHandles.js\";\nimport \"../engine/webgl/shaderGraph/techniques/shaders/MagnifierShader.js\";\nimport \"../../../core/unitUtils.js\";\nimport \"../../../geometry/ellipsoidUtils.js\";\nimport \"../../../chunks/pe.js\";\nimport \"../../../geometry/projection/projectors.js\";\nimport \"../engine/webgl/shaderGraph/techniques/shaders/GridShader.js\";\nimport \"../../../geometry/support/geodesicConstants.js\";\nimport \"../tiling/TileInfoView.js\";\nimport \"../tiling/TileKey.js\";\nimport f from \"../tiling/TileQueue.js\";\nimport y from \"../tiling/TileStrategy.js\";\nimport j from \"../engine/webgl/Overlay.js\";\nimport b from \"../engine/webgl/OverlayContainer.js\";\nimport { LayerView2DMixin as w } from \"./LayerView2D.js\";\nimport _ from \"../../layers/LayerView.js\";\nimport v from \"../../layers/MediaLayerView.js\";\nimport { TaskPriority as E } from \"../../support/Scheduler.js\";\nlet G = class extends w(v(_)) {\n  constructor() {\n    super(...arguments), this._overlayContainer = null, this._fetchQueue = null, this._tileStrategy = null, this._elementReferences = new Map(), this._debugGraphicsView = null, this._interaction = null, this.layer = null, this.elements = new t();\n  }\n  initialize() {\n    this.addHandles([n(() => [this.interactive, this.suspended], async () => {\n      if (this.interactive && !this._interaction) {\n        const {\n          MediaLayerInteraction: e\n        } = await import(\"./support/MediaLayerInteraction.js\");\n        this._interaction = new e({\n          view: this.view,\n          layer: this.layer\n        }), this.selectedElement !== this._interaction.selectedElement && (this._interaction.selectedElement = this.selectedElement), this.interactionOptions !== this._interaction.options && (this._interaction.options = this.interactionOptions);\n      }\n      this._interaction && (this._interaction.enabled = !this.suspended && this.interactive);\n    }, m), n(() => this.interactionOptions, e => {\n      this._interaction && (this._interaction.options = e);\n    }, m), n(() => this.selectedElement, e => {\n      this._interaction && (this._interaction.selectedElement = e);\n    }, m)]);\n  }\n  attach() {\n    this.addAttachHandles([l(() => this.layer.effectiveSource, \"refresh\", () => {\n      this._tileStrategy.refresh(e => this._updateTile(e)), this.requestUpdate();\n    }), l(() => this.layer.effectiveSource, \"change\", _ref => {\n      let {\n        element: e\n      } = _ref;\n      return this._elementUpdateHandler(e);\n    })]), this._overlayContainer = new b(), this.container.addChild(this._overlayContainer), this._fetchQueue = new f({\n      tileInfoView: this.view.featuresTilingScheme,\n      concurrency: 10,\n      process: (e, t) => this._queryElements(e, t),\n      scheduler: this.scheduler,\n      priority: E.MAPVIEW_FETCH_QUEUE\n    }), this._tileStrategy = new y({\n      cachePolicy: \"purge\",\n      resampling: !0,\n      acquireTile: e => this._acquireTile(e),\n      releaseTile: e => this._releaseTile(e),\n      tileInfoView: this.view.featuresTilingScheme\n    }), this.requestUpdate();\n  }\n  detach() {\n    this.elements.removeAll(), this._tileStrategy.destroy(), this._fetchQueue.destroy(), this._overlayContainer.removeAllChildren(), this.container.removeAllChildren(), this._elementReferences.clear(), this._debugGraphicsView?.destroy();\n  }\n  supportsSpatialReference(e) {\n    return !0;\n  }\n  viewChange() {\n    this.requestUpdate();\n  }\n  moveEnd() {\n    this.requestUpdate();\n  }\n  update(e) {\n    this._tileStrategy.update(e), this._debugGraphicsView?.update(e);\n  }\n  async hitTest(e, t) {\n    const i = [],\n      s = e.normalize(),\n      r = [s.x, s.y];\n    for (const {\n      elementView: {\n        normalizedCoords: o,\n        element: n\n      }\n    } of this._elementReferences.values()) null != o && d(o.rings, r) && i.push({\n      type: \"media\",\n      element: n,\n      layer: this.layer,\n      mapPoint: e,\n      sourcePoint: n.toSource(e)\n    });\n    return i.reverse();\n  }\n  canResume() {\n    return null != this.layer.source && super.canResume();\n  }\n  async doRefresh() {\n    this._fetchQueue.reset(), this._tileStrategy.refresh(e => this._updateTile(e));\n  }\n  _acquireTile(e) {\n    const t = new C(e.clone());\n    return this._updateTile(t), t;\n  }\n  _updateTile(e) {\n    this._updatingHandles.addPromise(this._fetchQueue.push(e.key).then(t => {\n      const [i, s] = e.setElements(t);\n      this._referenceElements(e, i), this._dereferenceElements(e, s), this.requestUpdate();\n    }, e => {\n      o(e) || s.getLogger(this).error(e);\n    }));\n  }\n  _releaseTile(e) {\n    this._fetchQueue.abort(e.key.id), e.elements && this._dereferenceElements(e, e.elements), this.requestUpdate();\n  }\n  async _queryElements(e, t) {\n    const i = this.layer.effectiveSource;\n    if (null == i) return [];\n    this.view.featuresTilingScheme.getTileBounds(S, e, !0);\n    const s = new p({\n      xmin: S[0],\n      ymin: S[1],\n      xmax: S[2],\n      ymax: S[3],\n      spatialReference: this.view.spatialReference\n    });\n    return i.queryElements(s, t);\n  }\n  _referenceElements(e, t) {\n    if (null != this.layer.source) for (const i of t) this._referenceElement(e, i);\n  }\n  _referenceElement(e, t) {\n    r(this._elementReferences, t.uid, () => {\n      const e = new u({\n          element: t,\n          spatialReference: this.view.spatialReference\n        }),\n        r = new j(e);\n      return this._overlayContainer.addChild(r), this.elements.add(t), this._updatingHandles.addPromise(t.load().catch(e => {\n        s.getLogger(\"esri.views.2d.layers.MediaLayerView2D\").error(new i(\"element-load-error\", \"Element cannot be displayed\", {\n          element: t,\n          error: e\n        }));\n      })), {\n        debugGraphic: null,\n        elementView: e,\n        overlay: r,\n        tiles: new Set()\n      };\n    }).tiles.add(e);\n  }\n  _dereferenceElements(e, t) {\n    for (const i of t) this._dereferenceElement(e, i);\n  }\n  _dereferenceElement(e, t) {\n    const i = this._elementReferences.get(t.uid);\n    i.tiles.delete(e), i.tiles.size || (this._overlayContainer.removeChild(i.overlay), i.overlay.destroy(), i.elementView.destroy(), this._elementReferences.delete(t.uid), this.elements.remove(t), this._debugGraphicsView?.graphics.remove(i.debugGraphic));\n  }\n  _elementUpdateHandler(e) {\n    let t = this._elementReferences.get(e.uid);\n    if (t) {\n      const i = t.elementView.normalizedCoords;\n      if (null == i) return this._overlayContainer.removeChild(t.overlay), t.overlay.destroy(), t.elementView.destroy(), this._elementReferences.delete(e.uid), this.elements.remove(e), void this._debugGraphicsView?.graphics.remove(t.debugGraphic);\n      const s = [],\n        r = [];\n      for (const e of this._tileStrategy.tiles) {\n        const o = T(this.view.featuresTilingScheme, e, i);\n        t.tiles.has(e) ? o || r.push(e) : o && s.push(e);\n      }\n      for (const t of s) this._referenceElement(t, e);\n      for (const t of r) this._dereferenceElement(t, e);\n      return t = this._elementReferences.get(e.uid), void (t?.debugGraphic && (t.debugGraphic.geometry = t.elementView.normalizedCoords, this._debugGraphicsView.graphicUpdateHandler({\n        graphic: t.debugGraphic,\n        property: \"geometry\"\n      })));\n    }\n    const i = new u({\n      element: e,\n      spatialReference: this.view.spatialReference\n    }).normalizedCoords;\n    if (null != i) for (const s of this._tileStrategy.tiles) {\n      T(this.view.featuresTilingScheme, s, i) && this._referenceElement(s, e);\n    }\n  }\n};\ne([a()], G.prototype, \"layer\", void 0), e([a({\n  readOnly: !0\n})], G.prototype, \"elements\", void 0), G = e([c(\"esri.views.2d.layers.MediaLayerView2D\")], G);\nconst S = h(),\n  q = {\n    xmin: 0,\n    ymin: 0,\n    xmax: 0,\n    ymax: 0\n  };\nfunction T(e, t, i) {\n  return e.getTileBounds(S, t.key, !0), q.xmin = S[0], q.ymin = S[1], q.xmax = S[2], q.ymax = S[3], g(q, i);\n}\nclass C {\n  constructor(e) {\n    this.key = e, this.elements = null, this.isReady = !1, this.visible = !0;\n  }\n  setElements(e) {\n    const t = [],\n      i = new Set(this.elements);\n    this.elements = e;\n    for (const s of e) i.has(s) ? i.delete(s) : t.push(s);\n    return this.isReady = !0, [t, Array.from(i)];\n  }\n  destroy() {}\n}\nconst M = G;\nexport { M as default };","map":{"version":3,"names":["_","e","t","i","s","getOrCreateMapValue","r","isAbortError","o","watch","n","on","l","syncAndInitial","m","property","a","subclass","c","p","create","h","ringsContainsCoords","d","extentIntersectsPolygon","g","MediaElementView","u","f","y","j","b","LayerView2DMixin","w","v","TaskPriority","E","G","constructor","arguments","_overlayContainer","_fetchQueue","_tileStrategy","_elementReferences","Map","_debugGraphicsView","_interaction","layer","elements","initialize","addHandles","interactive","suspended","MediaLayerInteraction","view","selectedElement","interactionOptions","options","enabled","attach","addAttachHandles","effectiveSource","refresh","_updateTile","requestUpdate","_ref","element","_elementUpdateHandler","container","addChild","tileInfoView","featuresTilingScheme","concurrency","process","_queryElements","scheduler","priority","MAPVIEW_FETCH_QUEUE","cachePolicy","resampling","acquireTile","_acquireTile","releaseTile","_releaseTile","detach","removeAll","destroy","removeAllChildren","clear","supportsSpatialReference","viewChange","moveEnd","update","hitTest","normalize","x","elementView","normalizedCoords","values","rings","push","type","mapPoint","sourcePoint","toSource","reverse","canResume","source","doRefresh","reset","C","clone","_updatingHandles","addPromise","key","then","setElements","_referenceElements","_dereferenceElements","getLogger","error","abort","id","getTileBounds","S","xmin","ymin","xmax","ymax","spatialReference","queryElements","_referenceElement","uid","add","load","catch","debugGraphic","overlay","tiles","Set","_dereferenceElement","get","delete","size","removeChild","remove","graphics","T","has","geometry","graphicUpdateHandler","graphic","prototype","readOnly","q","isReady","visible","Array","from","M","default"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/layers/MediaLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../Graphic.js\";import t from\"../../../core/Collection.js\";import i from\"../../../core/Error.js\";import\"../../../core/has.js\";import s from\"../../../core/Logger.js\";import{getOrCreateMapValue as r}from\"../../../core/MapUtils.js\";import{isAbortError as o}from\"../../../core/promiseUtils.js\";import{watch as n,on as l,syncAndInitial as m}from\"../../../core/reactiveUtils.js\";import{property as a}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/RandomLCG.js\";import{subclass as c}from\"../../../core/accessorSupport/decorators/subclass.js\";import p from\"../../../geometry/Extent.js\";import{create as h}from\"../../../geometry/support/aaBoundingRect.js\";import{ringsContainsCoords as d}from\"../../../geometry/support/contains.js\";import{extentIntersectsPolygon as g}from\"../../../geometry/support/intersectsBase.js\";import{MediaElementView as u}from\"../../../layers/support/MediaElementView.js\";import\"../../../renderers/SimpleRenderer.js\";import\"../../../symbols/SimpleFillSymbol.js\";import\"../../../core/scheduling.js\";import\"../../../core/accessorSupport/tracking/Flags.js\";import\"../../../core/colorUtils.js\";import\"../../../config.js\";import\"../../../symbols/cim/defaultCIMValues.js\";import\"../../../symbols/cim/enums.js\";import\"../../../core/floatRGBA.js\";import\"../../../geometry/Geometry.js\";import\"../../../geometry/Multipoint.js\";import\"../../../geometry/Point.js\";import\"../../../geometry/Polygon.js\";import\"../../../geometry/Polyline.js\";import\"../engine/webgl/definitions.js\";import\"../engine/webgl/animations/instructions.js\";import\"../../../symbols/Font.js\";import\"../../../core/mathUtils.js\";import\"../../../core/ObjectPool.js\";import\"../../../geometry/support/Axis.js\";import\"../../../geometry/support/spatialReferenceUtils.js\";import\"../../../geometry/support/TileClipper.js\";import\"../../../symbols/cim/effects/EffectAddControlPoints.js\";import\"../../../symbols/cim/effects/EffectArrow.js\";import\"../../../symbols/cim/effects/EffectBuffer.js\";import\"../../../symbols/cim/effects/EffectControlMeasureLine.js\";import\"../../../symbols/cim/effects/EffectCut.js\";import\"../../../symbols/cim/effects/EffectDashes.js\";import\"../../../symbols/cim/effects/EffectDonut.js\";import\"../../../symbols/cim/effects/EffectJog.js\";import\"../../../symbols/cim/effects/EffectMove.js\";import\"../../../symbols/cim/effects/EffectOffset.js\";import\"../../../symbols/cim/effects/EffectReverse.js\";import\"../../../symbols/cim/effects/EffectRotate.js\";import\"../../../symbols/cim/effects/EffectScale.js\";import\"../../../symbols/cim/effects/EffectWave.js\";import\"../../../symbols/cim/placements/PlacementAlongLineSameSize.js\";import\"../../../symbols/cim/placements/PlacementAtExtremities.js\";import\"../../../symbols/cim/placements/PlacementAtRatioPositions.js\";import\"../../../symbols/cim/placements/PlacementInsidePolygon.js\";import\"../../../symbols/cim/placements/PlacementOnLine.js\";import\"../../../symbols/cim/placements/PlacementOnVertices.js\";import\"../../../symbols/cim/placements/PlacementPolygonCenter.js\";import\"../../../core/libs/gl-matrix-2/factories/vec2f32.js\";import\"../engine/webgl/alignmentUtils.js\";import\"../../../symbols/support/defaults.js\";import\"../../../symbols/cim/OverrideHelper.js\";import\"../../../layers/effects/EffectView.js\";import\"../../../core/Evented.js\";import\"../engine/transitions/FadeTransition.js\";import\"../engine/webgl/enums.js\";import\"../../../core/libs/gl-matrix-2/factories/vec4f32.js\";import\"../../webgl/checkWebGLError.js\";import\"../../webgl/enums.js\";import\"../../webgl/FramebufferObject.js\";import\"../../webgl/GLObjectType.js\";import\"../../webgl/Texture.js\";import\"../engine/webgl/shaders/BackgroundPrograms.js\";import\"../engine/webgl/DefaultVertexAttributeLayouts.js\";import\"../engine/webgl/AFeatureTile.js\";import\"../engine/webgl/DisplayEntity.js\";import\"../engine/webgl/shaderGraph/techniques/featureTechniqueUtils.js\";import\"../engine/webgl/number.js\";import\"../engine/webgl/PooledUint32Array.js\";import\"../engine/webgl/shaders/TileInfoPrograms.js\";import\"../engine/vectorTiles/style/StyleDefinition.js\";import\"../engine/vectorTiles/enums.js\";import\"../engine/webgl/shaders/BitBlitPrograms.js\";import\"../../../request.js\";import\"../../../core/urlUtils.js\";import\"../../../core/pbf.js\";import\"../engine/webgl/shaders/StencilPrograms.js\";import\"../engine/webgl/shaderGraph/techniques/TechniqueType.js\";import\"../engine/webgl/shaderGraph/techniques/shaders/BlendShader.js\";import\"../engine/webgl/shaderGraph/techniques/shaders/OpacityShader.js\";import\"../engine/webgl/shaders/HighlightPrograms.js\";import\"../engine/webgl/meshing/SimpleMesh.js\";import\"../engine/webgl/Profiler.js\";import\"../engine/webgl/shaderGraph/techniques/TechniqueRegistry.js\";import\"../../../Color.js\";import\"../engine/webgl/shaderGraph/techniques/shaders/constants.js\";import\"../engine/webgl/shaderGraph/techniques/dotDensity/DotDensityMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/fill/ComplexFillMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/fill/ComplexOutlineFillMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/fill/FillMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/fill/GradientFillMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/fill/OutlineFillMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/fill/PatternFillMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/fill/PatternOutlineFillMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/heatmap/HeatmapMeshWriter.js\";import\"../../../geometry/support/aaBoundingBox.js\";import\"../engine/webgl/shaderGraph/techniques/text/TextMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/line/GradientStrokeMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/line/LineMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/line/TexturedLineMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/markers/MarkerMeshWriter.js\";import\"../../../arcade/ArcadeDate.js\";import\"../../../geometry/SpatialReference.js\";import\"../engine/webgl/shaderGraph/techniques/pieChart/PieChartMeshWriter.js\";import\"../../webgl/renderState.js\";import\"../../3d/webgl-engine/core/shaderModules/glsl.js\";import\"../../webgl/testSVGPremultipliedAlpha.js\";import\"../LabelManager.js\";import\"./graphics/GraphicsView2D.js\";import\"../../../chunks/earcut.js\";import\"../../../core/libs/gl-matrix-2/factories/vec3f32.js\";import\"../../../geometry/support/normalizeUtilsCommon.js\";import\"../../../geometry/support/Ellipsoid.js\";import\"../../../kernel.js\";import\"./support/util.js\";import\"../navigation/MapViewNavigation.js\";import\"../../../core/asyncUtils.js\";import\"../../../core/support/UpdatingHandles.js\";import\"../engine/webgl/shaderGraph/techniques/shaders/MagnifierShader.js\";import\"../../../core/unitUtils.js\";import\"../../../geometry/ellipsoidUtils.js\";import\"../../../chunks/pe.js\";import\"../../../geometry/projection/projectors.js\";import\"../engine/webgl/shaderGraph/techniques/shaders/GridShader.js\";import\"../../../geometry/support/geodesicConstants.js\";import\"../tiling/TileInfoView.js\";import\"../tiling/TileKey.js\";import f from\"../tiling/TileQueue.js\";import y from\"../tiling/TileStrategy.js\";import j from\"../engine/webgl/Overlay.js\";import b from\"../engine/webgl/OverlayContainer.js\";import{LayerView2DMixin as w}from\"./LayerView2D.js\";import _ from\"../../layers/LayerView.js\";import v from\"../../layers/MediaLayerView.js\";import{TaskPriority as E}from\"../../support/Scheduler.js\";let G=class extends(w(v(_))){constructor(){super(...arguments),this._overlayContainer=null,this._fetchQueue=null,this._tileStrategy=null,this._elementReferences=new Map,this._debugGraphicsView=null,this._interaction=null,this.layer=null,this.elements=new t}initialize(){this.addHandles([n((()=>[this.interactive,this.suspended]),(async()=>{if(this.interactive&&!this._interaction){const{MediaLayerInteraction:e}=await import(\"./support/MediaLayerInteraction.js\");this._interaction=new e({view:this.view,layer:this.layer}),this.selectedElement!==this._interaction.selectedElement&&(this._interaction.selectedElement=this.selectedElement),this.interactionOptions!==this._interaction.options&&(this._interaction.options=this.interactionOptions)}this._interaction&&(this._interaction.enabled=!this.suspended&&this.interactive)}),m),n((()=>this.interactionOptions),(e=>{this._interaction&&(this._interaction.options=e)}),m),n((()=>this.selectedElement),(e=>{this._interaction&&(this._interaction.selectedElement=e)}),m)])}attach(){this.addAttachHandles([l((()=>this.layer.effectiveSource),\"refresh\",(()=>{this._tileStrategy.refresh((e=>this._updateTile(e))),this.requestUpdate()})),l((()=>this.layer.effectiveSource),\"change\",(({element:e})=>this._elementUpdateHandler(e)))]),this._overlayContainer=new b,this.container.addChild(this._overlayContainer),this._fetchQueue=new f({tileInfoView:this.view.featuresTilingScheme,concurrency:10,process:(e,t)=>this._queryElements(e,t),scheduler:this.scheduler,priority:E.MAPVIEW_FETCH_QUEUE}),this._tileStrategy=new y({cachePolicy:\"purge\",resampling:!0,acquireTile:e=>this._acquireTile(e),releaseTile:e=>this._releaseTile(e),tileInfoView:this.view.featuresTilingScheme}),this.requestUpdate()}detach(){this.elements.removeAll(),this._tileStrategy.destroy(),this._fetchQueue.destroy(),this._overlayContainer.removeAllChildren(),this.container.removeAllChildren(),this._elementReferences.clear(),this._debugGraphicsView?.destroy()}supportsSpatialReference(e){return!0}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}update(e){this._tileStrategy.update(e),this._debugGraphicsView?.update(e)}async hitTest(e,t){const i=[],s=e.normalize(),r=[s.x,s.y];for(const{elementView:{normalizedCoords:o,element:n}}of this._elementReferences.values())null!=o&&d(o.rings,r)&&i.push({type:\"media\",element:n,layer:this.layer,mapPoint:e,sourcePoint:n.toSource(e)});return i.reverse()}canResume(){return null!=this.layer.source&&super.canResume()}async doRefresh(){this._fetchQueue.reset(),this._tileStrategy.refresh((e=>this._updateTile(e)))}_acquireTile(e){const t=new C(e.clone());return this._updateTile(t),t}_updateTile(e){this._updatingHandles.addPromise(this._fetchQueue.push(e.key).then((t=>{const[i,s]=e.setElements(t);this._referenceElements(e,i),this._dereferenceElements(e,s),this.requestUpdate()}),(e=>{o(e)||s.getLogger(this).error(e)})))}_releaseTile(e){this._fetchQueue.abort(e.key.id),e.elements&&this._dereferenceElements(e,e.elements),this.requestUpdate()}async _queryElements(e,t){const i=this.layer.effectiveSource;if(null==i)return[];this.view.featuresTilingScheme.getTileBounds(S,e,!0);const s=new p({xmin:S[0],ymin:S[1],xmax:S[2],ymax:S[3],spatialReference:this.view.spatialReference});return i.queryElements(s,t)}_referenceElements(e,t){if(null!=this.layer.source)for(const i of t)this._referenceElement(e,i)}_referenceElement(e,t){r(this._elementReferences,t.uid,(()=>{const e=new u({element:t,spatialReference:this.view.spatialReference}),r=new j(e);return this._overlayContainer.addChild(r),this.elements.add(t),this._updatingHandles.addPromise(t.load().catch((e=>{s.getLogger(\"esri.views.2d.layers.MediaLayerView2D\").error(new i(\"element-load-error\",\"Element cannot be displayed\",{element:t,error:e}))}))),{debugGraphic:null,elementView:e,overlay:r,tiles:new Set}})).tiles.add(e)}_dereferenceElements(e,t){for(const i of t)this._dereferenceElement(e,i)}_dereferenceElement(e,t){const i=this._elementReferences.get(t.uid);i.tiles.delete(e),i.tiles.size||(this._overlayContainer.removeChild(i.overlay),i.overlay.destroy(),i.elementView.destroy(),this._elementReferences.delete(t.uid),this.elements.remove(t),this._debugGraphicsView?.graphics.remove(i.debugGraphic))}_elementUpdateHandler(e){let t=this._elementReferences.get(e.uid);if(t){const i=t.elementView.normalizedCoords;if(null==i)return this._overlayContainer.removeChild(t.overlay),t.overlay.destroy(),t.elementView.destroy(),this._elementReferences.delete(e.uid),this.elements.remove(e),void this._debugGraphicsView?.graphics.remove(t.debugGraphic);const s=[],r=[];for(const e of this._tileStrategy.tiles){const o=T(this.view.featuresTilingScheme,e,i);t.tiles.has(e)?o||r.push(e):o&&s.push(e)}for(const t of s)this._referenceElement(t,e);for(const t of r)this._dereferenceElement(t,e);return t=this._elementReferences.get(e.uid),void(t?.debugGraphic&&(t.debugGraphic.geometry=t.elementView.normalizedCoords,this._debugGraphicsView.graphicUpdateHandler({graphic:t.debugGraphic,property:\"geometry\"})))}const i=new u({element:e,spatialReference:this.view.spatialReference}).normalizedCoords;if(null!=i)for(const s of this._tileStrategy.tiles){T(this.view.featuresTilingScheme,s,i)&&this._referenceElement(s,e)}}};e([a()],G.prototype,\"layer\",void 0),e([a({readOnly:!0})],G.prototype,\"elements\",void 0),G=e([c(\"esri.views.2d.layers.MediaLayerView2D\")],G);const S=h(),q={xmin:0,ymin:0,xmax:0,ymax:0};function T(e,t,i){return e.getTileBounds(S,t.key,!0),q.xmin=S[0],q.ymin=S[1],q.xmax=S[2],q.ymax=S[3],g(q,i)}class C{constructor(e){this.key=e,this.elements=null,this.isReady=!1,this.visible=!0}setElements(e){const t=[],i=new Set(this.elements);this.elements=e;for(const s of e)i.has(s)?i.delete(s):t.push(s);return this.isReady=!0,[t,Array.from(i)]}destroy(){}}const M=G;export{M as default};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}