{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from \"../../core/Logger.js\";\nimport { disposeMaybe as t } from \"../../core/maybe.js\";\nimport { baseTypedArrayMemory as i } from \"../../core/memoryEstimations.js\";\nimport { ResourceType as r } from \"./enums.js\";\nimport { bindVertexBufferLayout as s } from \"./Util.js\";\nconst n = () => e.getLogger(\"esri.views.webgl.VertexArrayObject\");\nlet o = class {\n  constructor(e, t, i, r, s = null) {\n    this._context = e, this._locations = t, this._layout = i, this._buffers = r, this._indexBuffer = s, this._glName = null, this._initialized = !1;\n  }\n  get glName() {\n    return this._glName;\n  }\n  get context() {\n    return this._context;\n  }\n  get vertexBuffers() {\n    return this._buffers;\n  }\n  get indexBuffer() {\n    return this._indexBuffer;\n  }\n  get byteSize() {\n    return Array.from(this._buffers.values()).reduce((e, t) => e + t.usedMemory, null != this._indexBuffer ? this._indexBuffer.usedMemory : 0);\n  }\n  get layout() {\n    return this._layout;\n  }\n  get locations() {\n    return this._locations;\n  }\n  get usedMemory() {\n    return this.byteSize + (this._buffers.size + (this._indexBuffer ? 1 : 0)) * i;\n  }\n  get cachedMemory() {\n    return this.usedMemory;\n  }\n  dispose() {\n    this._context ? (this._context.getBoundVAO() === this && this._context.bindVAO(null), this._buffers.forEach(e => e.dispose()), this._buffers.clear(), this._indexBuffer = t(this._indexBuffer), this.disposeVAOOnly()) : (this._glName || this._buffers.size > 0) && n().warn(\"Leaked WebGL VAO\");\n  }\n  disposeVAOOnly() {\n    this._glName && (this._context.gl.deleteVertexArray(this._glName), this._glName = null, this._context.instanceCounter.decrement(r.VertexArrayObject, this)), this._context = null;\n  }\n  initialize() {\n    if (this._initialized) return;\n    const {\n        gl: e\n      } = this._context,\n      t = e.createVertexArray();\n    e.bindVertexArray(t), this._bindLayout(), e.bindVertexArray(null), this._glName = t, this._context.instanceCounter.increment(r.VertexArrayObject, this), this._initialized = !0;\n  }\n  bind() {\n    this.initialize(), this._context.gl.bindVertexArray(this.glName);\n  }\n  _bindLayout() {\n    const {\n      _buffers: e,\n      _layout: t,\n      _indexBuffer: i\n    } = this;\n    e || n().error(\"Vertex buffer dictionary is empty!\");\n    const r = this._context.gl;\n    this._buffers.forEach((e, i) => {\n      const r = t.get(i);\n      r ? s(this._context, this._locations, e, r) : n().error(\"Vertex element descriptor is empty!\");\n    }), null != i && r.bindBuffer(r.ELEMENT_ARRAY_BUFFER, i.glName);\n  }\n  unbind() {\n    this.initialize(), this._context.gl.bindVertexArray(null);\n  }\n};\nexport { o as VertexArrayObject };","map":{"version":3,"names":["e","disposeMaybe","t","baseTypedArrayMemory","i","ResourceType","r","bindVertexBufferLayout","s","n","getLogger","o","constructor","_context","_locations","_layout","_buffers","_indexBuffer","_glName","_initialized","glName","context","vertexBuffers","indexBuffer","byteSize","Array","from","values","reduce","usedMemory","layout","locations","size","cachedMemory","dispose","getBoundVAO","bindVAO","forEach","clear","disposeVAOOnly","warn","gl","deleteVertexArray","instanceCounter","decrement","VertexArrayObject","initialize","createVertexArray","bindVertexArray","_bindLayout","increment","bind","error","get","bindBuffer","ELEMENT_ARRAY_BUFFER","unbind"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/webgl/VertexArrayObject.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Logger.js\";import{disposeMaybe as t}from\"../../core/maybe.js\";import{baseTypedArrayMemory as i}from\"../../core/memoryEstimations.js\";import{ResourceType as r}from\"./enums.js\";import{bindVertexBufferLayout as s}from\"./Util.js\";const n=()=>e.getLogger(\"esri.views.webgl.VertexArrayObject\");let o=class{constructor(e,t,i,r,s=null){this._context=e,this._locations=t,this._layout=i,this._buffers=r,this._indexBuffer=s,this._glName=null,this._initialized=!1}get glName(){return this._glName}get context(){return this._context}get vertexBuffers(){return this._buffers}get indexBuffer(){return this._indexBuffer}get byteSize(){return Array.from(this._buffers.values()).reduce(((e,t)=>e+t.usedMemory),null!=this._indexBuffer?this._indexBuffer.usedMemory:0)}get layout(){return this._layout}get locations(){return this._locations}get usedMemory(){return this.byteSize+(this._buffers.size+(this._indexBuffer?1:0))*i}get cachedMemory(){return this.usedMemory}dispose(){this._context?(this._context.getBoundVAO()===this&&this._context.bindVAO(null),this._buffers.forEach((e=>e.dispose())),this._buffers.clear(),this._indexBuffer=t(this._indexBuffer),this.disposeVAOOnly()):(this._glName||this._buffers.size>0)&&n().warn(\"Leaked WebGL VAO\")}disposeVAOOnly(){this._glName&&(this._context.gl.deleteVertexArray(this._glName),this._glName=null,this._context.instanceCounter.decrement(r.VertexArrayObject,this)),this._context=null}initialize(){if(this._initialized)return;const{gl:e}=this._context,t=e.createVertexArray();e.bindVertexArray(t),this._bindLayout(),e.bindVertexArray(null),this._glName=t,this._context.instanceCounter.increment(r.VertexArrayObject,this),this._initialized=!0}bind(){this.initialize(),this._context.gl.bindVertexArray(this.glName)}_bindLayout(){const{_buffers:e,_layout:t,_indexBuffer:i}=this;e||n().error(\"Vertex buffer dictionary is empty!\");const r=this._context.gl;this._buffers.forEach(((e,i)=>{const r=t.get(i);r?s(this._context,this._locations,e,r):n().error(\"Vertex element descriptor is empty!\")})),null!=i&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,i.glName)}unbind(){this.initialize(),this._context.gl.bindVertexArray(null)}};export{o as VertexArrayObject};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}