{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../core/Accessor.js\";\nimport i from \"../../../../core/Logger.js\";\nimport { assertIsSome as s } from \"../../../../core/maybe.js\";\nimport { debounce as r, isAbortError as a } from \"../../../../core/promiseUtils.js\";\nimport { property as o } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/RandomLCG.js\";\nimport { subclass as l } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { UpdatingHandles as n } from \"../../../../core/support/UpdatingHandles.js\";\nimport h from \"../../../../geometry/Extent.js\";\nimport c from \"../../../../geometry/Point.js\";\nimport u from \"../../../../layers/support/PixelBlock.js\";\nimport p from \"../../../../layers/support/TileInfo.js\";\nimport { update as d, unregister as y, getRasterId as m, register as g } from \"../../../../layers/support/rasterDatasets/RawBlockCache.js\";\nimport { getWorldWidth as _, computeProjectedScales as f } from \"../../../../layers/support/rasterFunctions/rasterProjectionHelper.js\";\nimport b from \"../../tiling/TileInfoView.js\";\nimport \"../../tiling/TileKey.js\";\nimport w from \"../../tiling/TileQueue.js\";\nimport I from \"../../tiling/TileStrategy.js\";\nimport { tileSize as P } from \"../../engine/webgl/definitions.js\";\nimport { TaskPriority as R } from \"../../../support/Scheduler.js\";\nimport { getWebGLCapabilities as C } from \"../../../webgl/capabilities.js\";\nconst S = [0, 0];\nlet v = class extends t {\n  constructor() {\n    super(...arguments), this._updatingHandles = new n(), this._emptyTilePixelBlock = null, this._tileStrategy = null, this._tileInfoView = null, this._fetchQueue = null, this._blockCacheRegistryUrl = null, this._blockCacheRegistryId = null, this._srcResolutions = [], this.previousLOD = null, this._needBlockCacheUpdate = !1, this._globalSymbolizerParams = null, this._symbolizerParams = null, this._abortController = null, this._isCustomTilingScheme = !1, this._maxIndexedColormapSize = 0, this._rasterFunctionState = \"na\", this._globalUpdateRequested = !1, this.attached = !1, this.timeExtent = null, this.redrawOrRefetch = r(async (e = {}) => {\n      const t = this._rasterFunctionState;\n      if (e.reprocess && (await this._updatingHandles.addPromise(this.layer.updateRasterFunction()), this.updateRasterFunctionParameters()), !this.previousLOD || this.layerView.suspended) return;\n      const i = this._rasterFunctionState,\n        {\n          type: s\n        } = this;\n      return e.refetch || \"raster\" !== s && !!e.reprocess || \"cpu\" === i || \"cpu\" === t ? this._updatingHandles.addPromise(this.doRefresh()) : this._updatingHandles.addPromise(this._redrawImage(e.signal));\n    });\n  }\n  destroy() {\n    this._updatingHandles.destroy();\n  }\n  get useWebGLForProcessing() {\n    return this._get(\"useWebGLForProcessing\") ?? !0;\n  }\n  set useWebGLForProcessing(e) {\n    this._set(\"useWebGLForProcessing\", e);\n  }\n  get useProgressiveUpdate() {\n    return this._get(\"useProgressiveUpdate\") ?? !0;\n  }\n  set useProgressiveUpdate(e) {\n    if (this._tileStrategy && this.useProgressiveUpdate !== e) {\n      this._tileStrategy.destroy(), this.container.removeAllChildren();\n      const t = this._getCacheSize(e);\n      this._tileStrategy = new I({\n        cachePolicy: \"purge\",\n        acquireTile: e => this.acquireTile(e),\n        releaseTile: e => this.releaseTile(e),\n        cacheSize: t,\n        tileInfoView: this._tileInfoView\n      }), this._set(\"useProgressiveUpdate\", e), this.layerView.requestUpdate();\n    }\n  }\n  update(e) {\n    this._fetchQueue.pause(), this._fetchQueue.state = e.state, this._tileStrategy.update(e), this._fetchQueue.resume();\n    const {\n        extent: t,\n        resolution: i,\n        scale: s\n      } = e.state,\n      r = this._tileInfoView.getClosestInfoForScale(s);\n    if (this.layer.raster) {\n      if (!this.useProgressiveUpdate || this._needBlockCacheUpdate) {\n        const e = this._srcResolutions[r.level],\n          s = \"toJSON\" in t ? t : h.fromJSON(t);\n        d(this._blockCacheRegistryUrl, this._blockCacheRegistryId, s, i, e, this.layer.raster.ioConfig.sampling);\n      }\n      this._needBlockCacheUpdate = !1, this.previousLOD?.level !== r.level && (this.previousLOD = r, null == this._symbolizerParams || this.layerView.hasTilingEffects || this._updateSymbolizerParams(), this._tileStrategy.updateCacheSize(0));\n    }\n  }\n  moveEnd() {\n    !this.layerView.hasTilingEffects && this.useProgressiveUpdate || (this._abortController && this._abortController.abort(), this._abortController = new AbortController(), 0 === this._fetchQueue.length && this._redrawImage(this._abortController.signal).then(() => {\n      this._globalUpdateRequested = !1, this.layerView.requestUpdate();\n    }));\n    const e = this._getCacheSize(this.useProgressiveUpdate);\n    this._tileStrategy.updateCacheSize(e), this.layerView.requestUpdate();\n  }\n  get updating() {\n    return this._globalUpdateRequested || this._updatingHandles?.updating;\n  }\n  attach() {\n    const e = C();\n    this._maxIndexedColormapSize = 4 * (e.maxTextureSize || 4096), this._initializeTileInfo(), this._tileInfoView = new b(this.layerView.tileInfo, this.layerView.fullExtent);\n    const t = this._computeFetchConcurrency();\n    this._fetchQueue = new w({\n      tileInfoView: this._tileInfoView,\n      concurrency: t,\n      process: (e, t) => this._fetchTile(e, t),\n      priority: R.MAPVIEW_FETCH_QUEUE,\n      scheduler: this.scheduler\n    });\n    const i = this._getCacheSize(this.useProgressiveUpdate);\n    this._tileStrategy = new I({\n      cachePolicy: \"purge\",\n      acquireTile: e => this.acquireTile(e),\n      releaseTile: e => this.releaseTile(e),\n      cacheSize: i,\n      tileInfoView: this._tileInfoView\n    }), this._updateBlockCacheRegistry();\n  }\n  detach() {\n    this._tileStrategy.destroy(), this._fetchQueue.clear(), this.container.removeAllChildren(), this._fetchQueue = this._tileStrategy = this._tileInfoView = null, y(this._blockCacheRegistryUrl, this._blockCacheRegistryId), this._blockCacheRegistryUrl = this._blockCacheRegistryId = null;\n  }\n  acquireTile(e) {\n    const t = this.container.createTile(e);\n    return this._updatingHandles.addPromise(this._enqueueTileFetch(t)), this.layerView.requestUpdate(), this._needBlockCacheUpdate = !0, this._globalUpdateRequested = this.layerView.hasTilingEffects || !this.useProgressiveUpdate, t;\n  }\n  releaseTile(e) {\n    this._fetchQueue.abort(e.key.id), this.container.removeChild(e), e.once(\"detach\", () => {\n      e.destroy(), this.layerView.requestUpdate();\n    }), this.layerView.requestUpdate();\n  }\n  createEmptyTilePixelBlock(e = null) {\n    const t = null == e || e.join(\",\") === this._tileInfoView.tileInfo.size.join(\",\");\n    if (t && null != this._emptyTilePixelBlock) return this._emptyTilePixelBlock;\n    e = e || this._tileInfoView.tileInfo.size;\n    const [i, s] = e,\n      r = new u({\n        width: i,\n        height: s,\n        pixels: [new Uint8Array(i * s)],\n        mask: new Uint8Array(i * s),\n        pixelType: \"u8\"\n      });\n    return t && (this._emptyTilePixelBlock = r), r;\n  }\n  _getBandIds() {\n    if (!(\"rasterFunctionChain\" in this.container) || !this.container.rasterFunctionChain) return this.layer.bandIds;\n    const {\n        bandIds: e,\n        raster: t\n      } = this.layer,\n      i = \"rasterFunction\" in t ? t.rasterFunction.rawInputBandIds : null;\n    return e?.length && i?.length && 1 !== t.rasterInfo.bandCount ? e.map(e => i[Math.min(e, i.length - 1)]) : \"rasterFunction\" in t ? i : e;\n  }\n  updateRasterFunctionParameters() {}\n  _fetchTile(e, t) {\n    const i = this._getFetchOptions(e.level, t.signal);\n    return this.fetchTile(e, i);\n  }\n  _getFetchOptions(e, t) {\n    const i = this.canUseWebGLForProcessing(),\n      {\n        layerView: s\n      } = this,\n      {\n        tileInfo: r\n      } = s,\n      a = !r.isWrappable && null != _(s.view.spatialReference),\n      o = i && this.layer.raster.hasUniqueSourceStorageInfo;\n    return {\n      allowPartialFill: !0,\n      datumTransformation: s.datumTransformation,\n      interpolation: i ? \"nearest\" : this.layer.interpolation,\n      registryId: this._blockCacheRegistryId,\n      requestRawData: o,\n      skipRasterFunction: \"raster\" === this.type && null != this.container.rasterFunctionChain,\n      signal: t,\n      srcResolution: this._srcResolutions[e],\n      timeExtent: s.timeExtent,\n      tileInfo: r,\n      disableWrapAround: a\n    };\n  }\n  _getCacheSize(e) {\n    return e ? 40 : 0;\n  }\n  _initializeTileInfo() {\n    const {\n        layerView: e\n      } = this,\n      t = e.view.spatialReference;\n    if (this._canUseLayerLODs()) {\n      const {\n          origin: i,\n          lods: s\n        } = this.layer.tileInfo,\n        r = s.map(({\n          scale: e\n        }) => e),\n        a = p.create({\n          spatialReference: t,\n          size: P,\n          scales: r,\n          origin: i\n        });\n      return e.set(\"tileInfo\", a), void (this._srcResolutions = s.map(({\n        resolution: e\n      }) => ({\n        x: e,\n        y: e\n      })));\n    }\n    const {\n        scales: i,\n        srcResolutions: r,\n        isCustomTilingScheme: a\n      } = f(this.layer.serviceRasterInfo, t, {\n        tileSize: P,\n        alignGlobalDatasetWithAGOL: !0,\n        limitToSrcResolution: !1\n      }),\n      o = p.create({\n        spatialReference: t,\n        size: P,\n        scales: i\n      }),\n      l = 0 === o.origin.x;\n    s(e.fullExtent);\n    const {\n      xmin: n,\n      ymax: h\n    } = e.fullExtent;\n    (l || a && o.origin.x > n) && (o.origin = new c({\n      x: n,\n      y: h,\n      spatialReference: t\n    })), this._isCustomTilingScheme = a, e.set(\"tileInfo\", o), this._srcResolutions = r ?? [];\n  }\n  _canUseLayerLODs() {\n    const {\n      layer: e,\n      layerView: t\n    } = this;\n    if (\"Map\" !== e.raster.tileType) return !1;\n    const {\n        lods: i\n      } = e.tileInfo,\n      s = t.view.constraints?.effectiveLODs;\n    return s?.length === i.length && s.every(({\n      scale: e\n    }, t) => Math.abs(e - i[t].scale) < .001);\n  }\n  _computeFetchConcurrency() {\n    const {\n        blockBoundary: e\n      } = this.layer.serviceRasterInfo.storageInfo,\n      t = e[e.length - 1];\n    return (t.maxCol - t.minCol + 1) * (t.maxRow - t.minRow + 1) > 64 ? 2 : 10;\n  }\n  async _enqueueTileFetch(e, t) {\n    if (!this._fetchQueue.has(e.key.id)) {\n      try {\n        const t = await this._fetchQueue.push(e.key),\n          r = this._getBandIds();\n        let o = !this.useProgressiveUpdate || this.layerView.hasTilingEffects && !this._globalSymbolizerParams;\n        if (this._globalUpdateRequested && !this.layerView.moving && 0 === this._fetchQueue.length) {\n          o = !1;\n          try {\n            await this._redrawImage(this._abortController?.signal);\n          } catch (s) {\n            a(s) && i.getLogger(this).error(s);\n          }\n          this._globalUpdateRequested = !1;\n        }\n        !this.canUseWebGLForProcessing() && \"rasterVF\" !== this.type || this.layerView.hasTilingEffects || null != this._symbolizerParams || this._updateSymbolizerParams();\n        const l = this._tileInfoView.getTileCoords(S, e.key),\n          n = this._tileInfoView.getTileResolution(e.key);\n        await this.updateTileSource(e, {\n          source: t,\n          symbolizerParams: this._symbolizerParams,\n          globalSymbolizerParams: this._globalSymbolizerParams,\n          suspended: o,\n          bandIds: r,\n          coords: l,\n          resolution: n\n        }), e.once(\"attach\", () => this.layerView.requestUpdate()), this.container.addChild(e);\n      } catch (s) {\n        a(s) || i.getLogger(this).error(s);\n      }\n      this.layerView.requestUpdate();\n    }\n  }\n  async _redrawImage(e) {\n    if (0 === this.container.children.length) return;\n    await this.layer.updateRenderer(), this.layerView.hasTilingEffects ? await this._updateGlobalSymbolizerParams(e) : (this._updateSymbolizerParams(), this._globalSymbolizerParams = null);\n    const t = this.container.children.map(async e => this.updateTileSymbolizerParameters(e, {\n      local: this._symbolizerParams,\n      global: this._globalSymbolizerParams\n    }));\n    await Promise.allSettled(t), this.container.requestRender();\n  }\n  async _updateGlobalSymbolizerParams(e) {\n    const t = this._getFetchOptions(this.previousLOD.level, e),\n      i = await this.layer.fetchPixels(this.layerView.view.extent, this.layerView.view.width, this.layerView.view.height, {\n        ...t,\n        interpolation: \"nearest\",\n        requestRawData: !1,\n        skipRasterFunction: !1\n      });\n    if (!i?.pixelBlock) return;\n    const {\n        resolution: s\n      } = this.previousLOD,\n      r = this._getBandIds(),\n      a = this.layer.symbolizer.generateWebGLParameters({\n        pixelBlock: i.pixelBlock.extractBands(r),\n        isGCS: this.layerView.view.spatialReference.isGeographic,\n        resolution: {\n          x: s,\n          y: s\n        },\n        bandIds: r\n      });\n    !this.canUseWebGLForProcessing() && a && \"stretch\" === a.type && this.layer.renderer && \"raster-stretch\" === this.layer.renderer.type && (a.factor = a.factor.map(e => 255 * e), a.minOutput = Math.round(255 * a.minOutput), a.maxOutput = Math.round(255 * a.maxOutput)), this._globalSymbolizerParams = a;\n  }\n  _updateSymbolizerParams() {\n    const {\n        resolution: e\n      } = this.previousLOD,\n      t = this._getBandIds();\n    this._symbolizerParams = this.layer.symbolizer.generateWebGLParameters({\n      pixelBlock: null,\n      isGCS: this.layerView.view.spatialReference.isGeographic,\n      resolution: {\n        x: e,\n        y: e\n      },\n      bandIds: t\n    });\n  }\n  _updateBlockCacheRegistry(e = !1) {\n    const {\n        layer: t,\n        layerView: i\n      } = this,\n      {\n        raster: s\n      } = t,\n      {\n        multidimensionalDefinition: r\n      } = t.normalizeRasterFetchOptions({\n        multidimensionalDefinition: t.multidimensionalDefinition,\n        timeExtent: i.timeExtent\n      }),\n      a = s.rasterInfo.multidimensionalInfo ? s.getSliceIndex(r) : null,\n      o = m(s.rasterId, a);\n    if (o !== this._blockCacheRegistryUrl) {\n      if (null != this._blockCacheRegistryUrl && y(this._blockCacheRegistryUrl, this._blockCacheRegistryId), this._blockCacheRegistryId = g(o, s.rasterInfo), e) {\n        const {\n            view: e\n          } = i,\n          t = this._tileInfoView.getClosestInfoForScale(e.scale),\n          r = this._srcResolutions[t.level];\n        d(o, this._blockCacheRegistryId, e.extent, e.resolution, r, s.ioConfig.sampling);\n      }\n      this._blockCacheRegistryUrl = o;\n    }\n  }\n  async doRefresh() {\n    if (!this.attached || !this.previousLOD || this.layerView.suspended) return;\n    await this.layer.updateRenderer(), this.layerView.hasTilingEffects || this._updateSymbolizerParams(), this._updateBlockCacheRegistry(!0), this._fetchQueue.reset();\n    const e = [];\n    this._globalUpdateRequested = this.layerView.hasTilingEffects || !this.useProgressiveUpdate, this._tileStrategy.refresh(t => e.push(this._enqueueTileFetch(t))), await this._updatingHandles.addPromise(Promise.allSettled(e));\n  }\n};\ne([o()], v.prototype, \"_globalUpdateRequested\", void 0), e([o()], v.prototype, \"attached\", void 0), e([o()], v.prototype, \"container\", void 0), e([o()], v.prototype, \"layer\", void 0), e([o()], v.prototype, \"layerView\", void 0), e([o()], v.prototype, \"scheduler\", void 0), e([o()], v.prototype, \"type\", void 0), e([o()], v.prototype, \"useWebGLForProcessing\", null), e([o()], v.prototype, \"useProgressiveUpdate\", null), e([o()], v.prototype, \"timeExtent\", void 0), e([o()], v.prototype, \"updating\", null), v = e([l(\"esri.views.2d.layers.imagery.BaseImageryTileSubView2D\")], v);\nexport { v as BaseImageryTileSubView2D };","map":{"version":3,"names":["_","e","t","i","assertIsSome","s","debounce","r","isAbortError","a","property","o","subclass","l","UpdatingHandles","n","h","c","u","p","update","d","unregister","y","getRasterId","m","register","g","getWorldWidth","computeProjectedScales","f","b","w","I","tileSize","P","TaskPriority","R","getWebGLCapabilities","C","S","v","constructor","arguments","_updatingHandles","_emptyTilePixelBlock","_tileStrategy","_tileInfoView","_fetchQueue","_blockCacheRegistryUrl","_blockCacheRegistryId","_srcResolutions","previousLOD","_needBlockCacheUpdate","_globalSymbolizerParams","_symbolizerParams","_abortController","_isCustomTilingScheme","_maxIndexedColormapSize","_rasterFunctionState","_globalUpdateRequested","attached","timeExtent","redrawOrRefetch","reprocess","addPromise","layer","updateRasterFunction","updateRasterFunctionParameters","layerView","suspended","type","refetch","doRefresh","_redrawImage","signal","destroy","useWebGLForProcessing","_get","_set","useProgressiveUpdate","container","removeAllChildren","_getCacheSize","cachePolicy","acquireTile","releaseTile","cacheSize","tileInfoView","requestUpdate","pause","state","resume","extent","resolution","scale","getClosestInfoForScale","raster","level","fromJSON","ioConfig","sampling","hasTilingEffects","_updateSymbolizerParams","updateCacheSize","moveEnd","abort","AbortController","length","then","updating","attach","maxTextureSize","_initializeTileInfo","tileInfo","fullExtent","_computeFetchConcurrency","concurrency","process","_fetchTile","priority","MAPVIEW_FETCH_QUEUE","scheduler","_updateBlockCacheRegistry","detach","clear","createTile","_enqueueTileFetch","key","id","removeChild","once","createEmptyTilePixelBlock","join","size","width","height","pixels","Uint8Array","mask","pixelType","_getBandIds","rasterFunctionChain","bandIds","rasterFunction","rawInputBandIds","rasterInfo","bandCount","map","Math","min","_getFetchOptions","fetchTile","canUseWebGLForProcessing","isWrappable","view","spatialReference","hasUniqueSourceStorageInfo","allowPartialFill","datumTransformation","interpolation","registryId","requestRawData","skipRasterFunction","srcResolution","disableWrapAround","_canUseLayerLODs","origin","lods","create","scales","set","x","srcResolutions","isCustomTilingScheme","serviceRasterInfo","alignGlobalDatasetWithAGOL","limitToSrcResolution","xmin","ymax","tileType","constraints","effectiveLODs","every","abs","blockBoundary","storageInfo","maxCol","minCol","maxRow","minRow","has","push","moving","getLogger","error","getTileCoords","getTileResolution","updateTileSource","source","symbolizerParams","globalSymbolizerParams","coords","addChild","children","updateRenderer","_updateGlobalSymbolizerParams","updateTileSymbolizerParameters","local","global","Promise","allSettled","requestRender","fetchPixels","pixelBlock","symbolizer","generateWebGLParameters","extractBands","isGCS","isGeographic","renderer","factor","minOutput","round","maxOutput","multidimensionalDefinition","normalizeRasterFetchOptions","multidimensionalInfo","getSliceIndex","rasterId","reset","refresh","prototype","BaseImageryTileSubView2D"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/layers/imagery/BaseImageryTileSubView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import i from\"../../../../core/Logger.js\";import{assertIsSome as s}from\"../../../../core/maybe.js\";import{debounce as r,isAbortError as a}from\"../../../../core/promiseUtils.js\";import{property as o}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/RandomLCG.js\";import{subclass as l}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{UpdatingHandles as n}from\"../../../../core/support/UpdatingHandles.js\";import h from\"../../../../geometry/Extent.js\";import c from\"../../../../geometry/Point.js\";import u from\"../../../../layers/support/PixelBlock.js\";import p from\"../../../../layers/support/TileInfo.js\";import{update as d,unregister as y,getRasterId as m,register as g}from\"../../../../layers/support/rasterDatasets/RawBlockCache.js\";import{getWorldWidth as _,computeProjectedScales as f}from\"../../../../layers/support/rasterFunctions/rasterProjectionHelper.js\";import b from\"../../tiling/TileInfoView.js\";import\"../../tiling/TileKey.js\";import w from\"../../tiling/TileQueue.js\";import I from\"../../tiling/TileStrategy.js\";import{tileSize as P}from\"../../engine/webgl/definitions.js\";import{TaskPriority as R}from\"../../../support/Scheduler.js\";import{getWebGLCapabilities as C}from\"../../../webgl/capabilities.js\";const S=[0,0];let v=class extends t{constructor(){super(...arguments),this._updatingHandles=new n,this._emptyTilePixelBlock=null,this._tileStrategy=null,this._tileInfoView=null,this._fetchQueue=null,this._blockCacheRegistryUrl=null,this._blockCacheRegistryId=null,this._srcResolutions=[],this.previousLOD=null,this._needBlockCacheUpdate=!1,this._globalSymbolizerParams=null,this._symbolizerParams=null,this._abortController=null,this._isCustomTilingScheme=!1,this._maxIndexedColormapSize=0,this._rasterFunctionState=\"na\",this._globalUpdateRequested=!1,this.attached=!1,this.timeExtent=null,this.redrawOrRefetch=r((async(e={})=>{const t=this._rasterFunctionState;if(e.reprocess&&(await this._updatingHandles.addPromise(this.layer.updateRasterFunction()),this.updateRasterFunctionParameters()),!this.previousLOD||this.layerView.suspended)return;const i=this._rasterFunctionState,{type:s}=this;return e.refetch||\"raster\"!==s&&!!e.reprocess||\"cpu\"===i||\"cpu\"===t?this._updatingHandles.addPromise(this.doRefresh()):this._updatingHandles.addPromise(this._redrawImage(e.signal))}))}destroy(){this._updatingHandles.destroy()}get useWebGLForProcessing(){return this._get(\"useWebGLForProcessing\")??!0}set useWebGLForProcessing(e){this._set(\"useWebGLForProcessing\",e)}get useProgressiveUpdate(){return this._get(\"useProgressiveUpdate\")??!0}set useProgressiveUpdate(e){if(this._tileStrategy&&this.useProgressiveUpdate!==e){this._tileStrategy.destroy(),this.container.removeAllChildren();const t=this._getCacheSize(e);this._tileStrategy=new I({cachePolicy:\"purge\",acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),cacheSize:t,tileInfoView:this._tileInfoView}),this._set(\"useProgressiveUpdate\",e),this.layerView.requestUpdate()}}update(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume();const{extent:t,resolution:i,scale:s}=e.state,r=this._tileInfoView.getClosestInfoForScale(s);if(this.layer.raster){if(!this.useProgressiveUpdate||this._needBlockCacheUpdate){const e=this._srcResolutions[r.level],s=\"toJSON\"in t?t:h.fromJSON(t);d(this._blockCacheRegistryUrl,this._blockCacheRegistryId,s,i,e,this.layer.raster.ioConfig.sampling)}this._needBlockCacheUpdate=!1,this.previousLOD?.level!==r.level&&(this.previousLOD=r,null==this._symbolizerParams||this.layerView.hasTilingEffects||this._updateSymbolizerParams(),this._tileStrategy.updateCacheSize(0))}}moveEnd(){!this.layerView.hasTilingEffects&&this.useProgressiveUpdate||(this._abortController&&this._abortController.abort(),this._abortController=new AbortController,0===this._fetchQueue.length&&this._redrawImage(this._abortController.signal).then((()=>{this._globalUpdateRequested=!1,this.layerView.requestUpdate()})));const e=this._getCacheSize(this.useProgressiveUpdate);this._tileStrategy.updateCacheSize(e),this.layerView.requestUpdate()}get updating(){return this._globalUpdateRequested||this._updatingHandles?.updating}attach(){const e=C();this._maxIndexedColormapSize=4*(e.maxTextureSize||4096),this._initializeTileInfo(),this._tileInfoView=new b(this.layerView.tileInfo,this.layerView.fullExtent);const t=this._computeFetchConcurrency();this._fetchQueue=new w({tileInfoView:this._tileInfoView,concurrency:t,process:(e,t)=>this._fetchTile(e,t),priority:R.MAPVIEW_FETCH_QUEUE,scheduler:this.scheduler});const i=this._getCacheSize(this.useProgressiveUpdate);this._tileStrategy=new I({cachePolicy:\"purge\",acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),cacheSize:i,tileInfoView:this._tileInfoView}),this._updateBlockCacheRegistry()}detach(){this._tileStrategy.destroy(),this._fetchQueue.clear(),this.container.removeAllChildren(),this._fetchQueue=this._tileStrategy=this._tileInfoView=null,y(this._blockCacheRegistryUrl,this._blockCacheRegistryId),this._blockCacheRegistryUrl=this._blockCacheRegistryId=null}acquireTile(e){const t=this.container.createTile(e);return this._updatingHandles.addPromise(this._enqueueTileFetch(t)),this.layerView.requestUpdate(),this._needBlockCacheUpdate=!0,this._globalUpdateRequested=this.layerView.hasTilingEffects||!this.useProgressiveUpdate,t}releaseTile(e){this._fetchQueue.abort(e.key.id),this.container.removeChild(e),e.once(\"detach\",(()=>{e.destroy(),this.layerView.requestUpdate()})),this.layerView.requestUpdate()}createEmptyTilePixelBlock(e=null){const t=null==e||e.join(\",\")===this._tileInfoView.tileInfo.size.join(\",\");if(t&&null!=this._emptyTilePixelBlock)return this._emptyTilePixelBlock;e=e||this._tileInfoView.tileInfo.size;const[i,s]=e,r=new u({width:i,height:s,pixels:[new Uint8Array(i*s)],mask:new Uint8Array(i*s),pixelType:\"u8\"});return t&&(this._emptyTilePixelBlock=r),r}_getBandIds(){if(!(\"rasterFunctionChain\"in this.container)||!this.container.rasterFunctionChain)return this.layer.bandIds;const{bandIds:e,raster:t}=this.layer,i=\"rasterFunction\"in t?t.rasterFunction.rawInputBandIds:null;return e?.length&&i?.length&&1!==t.rasterInfo.bandCount?e.map((e=>i[Math.min(e,i.length-1)])):\"rasterFunction\"in t?i:e}updateRasterFunctionParameters(){}_fetchTile(e,t){const i=this._getFetchOptions(e.level,t.signal);return this.fetchTile(e,i)}_getFetchOptions(e,t){const i=this.canUseWebGLForProcessing(),{layerView:s}=this,{tileInfo:r}=s,a=!r.isWrappable&&null!=_(s.view.spatialReference),o=i&&this.layer.raster.hasUniqueSourceStorageInfo;return{allowPartialFill:!0,datumTransformation:s.datumTransformation,interpolation:i?\"nearest\":this.layer.interpolation,registryId:this._blockCacheRegistryId,requestRawData:o,skipRasterFunction:\"raster\"===this.type&&null!=this.container.rasterFunctionChain,signal:t,srcResolution:this._srcResolutions[e],timeExtent:s.timeExtent,tileInfo:r,disableWrapAround:a}}_getCacheSize(e){return e?40:0}_initializeTileInfo(){const{layerView:e}=this,t=e.view.spatialReference;if(this._canUseLayerLODs()){const{origin:i,lods:s}=this.layer.tileInfo,r=s.map((({scale:e})=>e)),a=p.create({spatialReference:t,size:P,scales:r,origin:i});return e.set(\"tileInfo\",a),void(this._srcResolutions=s.map((({resolution:e})=>({x:e,y:e}))))}const{scales:i,srcResolutions:r,isCustomTilingScheme:a}=f(this.layer.serviceRasterInfo,t,{tileSize:P,alignGlobalDatasetWithAGOL:!0,limitToSrcResolution:!1}),o=p.create({spatialReference:t,size:P,scales:i}),l=0===o.origin.x;s(e.fullExtent);const{xmin:n,ymax:h}=e.fullExtent;(l||a&&o.origin.x>n)&&(o.origin=new c({x:n,y:h,spatialReference:t})),this._isCustomTilingScheme=a,e.set(\"tileInfo\",o),this._srcResolutions=r??[]}_canUseLayerLODs(){const{layer:e,layerView:t}=this;if(\"Map\"!==e.raster.tileType)return!1;const{lods:i}=e.tileInfo,s=t.view.constraints?.effectiveLODs;return s?.length===i.length&&s.every((({scale:e},t)=>Math.abs(e-i[t].scale)<.001))}_computeFetchConcurrency(){const{blockBoundary:e}=this.layer.serviceRasterInfo.storageInfo,t=e[e.length-1];return(t.maxCol-t.minCol+1)*(t.maxRow-t.minRow+1)>64?2:10}async _enqueueTileFetch(e,t){if(!this._fetchQueue.has(e.key.id)){try{const t=await this._fetchQueue.push(e.key),r=this._getBandIds();let o=!this.useProgressiveUpdate||this.layerView.hasTilingEffects&&!this._globalSymbolizerParams;if(this._globalUpdateRequested&&!this.layerView.moving&&0===this._fetchQueue.length){o=!1;try{await this._redrawImage(this._abortController?.signal)}catch(s){a(s)&&i.getLogger(this).error(s)}this._globalUpdateRequested=!1}!this.canUseWebGLForProcessing()&&\"rasterVF\"!==this.type||this.layerView.hasTilingEffects||null!=this._symbolizerParams||this._updateSymbolizerParams();const l=this._tileInfoView.getTileCoords(S,e.key),n=this._tileInfoView.getTileResolution(e.key);await this.updateTileSource(e,{source:t,symbolizerParams:this._symbolizerParams,globalSymbolizerParams:this._globalSymbolizerParams,suspended:o,bandIds:r,coords:l,resolution:n}),e.once(\"attach\",(()=>this.layerView.requestUpdate())),this.container.addChild(e)}catch(s){a(s)||i.getLogger(this).error(s)}this.layerView.requestUpdate()}}async _redrawImage(e){if(0===this.container.children.length)return;await this.layer.updateRenderer(),this.layerView.hasTilingEffects?await this._updateGlobalSymbolizerParams(e):(this._updateSymbolizerParams(),this._globalSymbolizerParams=null);const t=this.container.children.map((async e=>this.updateTileSymbolizerParameters(e,{local:this._symbolizerParams,global:this._globalSymbolizerParams})));await Promise.allSettled(t),this.container.requestRender()}async _updateGlobalSymbolizerParams(e){const t=this._getFetchOptions(this.previousLOD.level,e),i=await this.layer.fetchPixels(this.layerView.view.extent,this.layerView.view.width,this.layerView.view.height,{...t,interpolation:\"nearest\",requestRawData:!1,skipRasterFunction:!1});if(!i?.pixelBlock)return;const{resolution:s}=this.previousLOD,r=this._getBandIds(),a=this.layer.symbolizer.generateWebGLParameters({pixelBlock:i.pixelBlock.extractBands(r),isGCS:this.layerView.view.spatialReference.isGeographic,resolution:{x:s,y:s},bandIds:r});!this.canUseWebGLForProcessing()&&a&&\"stretch\"===a.type&&this.layer.renderer&&\"raster-stretch\"===this.layer.renderer.type&&(a.factor=a.factor.map((e=>255*e)),a.minOutput=Math.round(255*a.minOutput),a.maxOutput=Math.round(255*a.maxOutput)),this._globalSymbolizerParams=a}_updateSymbolizerParams(){const{resolution:e}=this.previousLOD,t=this._getBandIds();this._symbolizerParams=this.layer.symbolizer.generateWebGLParameters({pixelBlock:null,isGCS:this.layerView.view.spatialReference.isGeographic,resolution:{x:e,y:e},bandIds:t})}_updateBlockCacheRegistry(e=!1){const{layer:t,layerView:i}=this,{raster:s}=t,{multidimensionalDefinition:r}=t.normalizeRasterFetchOptions({multidimensionalDefinition:t.multidimensionalDefinition,timeExtent:i.timeExtent}),a=s.rasterInfo.multidimensionalInfo?s.getSliceIndex(r):null,o=m(s.rasterId,a);if(o!==this._blockCacheRegistryUrl){if(null!=this._blockCacheRegistryUrl&&y(this._blockCacheRegistryUrl,this._blockCacheRegistryId),this._blockCacheRegistryId=g(o,s.rasterInfo),e){const{view:e}=i,t=this._tileInfoView.getClosestInfoForScale(e.scale),r=this._srcResolutions[t.level];d(o,this._blockCacheRegistryId,e.extent,e.resolution,r,s.ioConfig.sampling)}this._blockCacheRegistryUrl=o}}async doRefresh(){if(!this.attached||!this.previousLOD||this.layerView.suspended)return;await this.layer.updateRenderer(),this.layerView.hasTilingEffects||this._updateSymbolizerParams(),this._updateBlockCacheRegistry(!0),this._fetchQueue.reset();const e=[];this._globalUpdateRequested=this.layerView.hasTilingEffects||!this.useProgressiveUpdate,this._tileStrategy.refresh((t=>e.push(this._enqueueTileFetch(t)))),await this._updatingHandles.addPromise(Promise.allSettled(e))}};e([o()],v.prototype,\"_globalUpdateRequested\",void 0),e([o()],v.prototype,\"attached\",void 0),e([o()],v.prototype,\"container\",void 0),e([o()],v.prototype,\"layer\",void 0),e([o()],v.prototype,\"layerView\",void 0),e([o()],v.prototype,\"scheduler\",void 0),e([o()],v.prototype,\"type\",void 0),e([o()],v.prototype,\"useWebGLForProcessing\",null),e([o()],v.prototype,\"useProgressiveUpdate\",null),e([o()],v.prototype,\"timeExtent\",void 0),e([o()],v.prototype,\"updating\",null),v=e([l(\"esri.views.2d.layers.imagery.BaseImageryTileSubView2D\")],v);export{v as BaseImageryTileSubView2D};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}