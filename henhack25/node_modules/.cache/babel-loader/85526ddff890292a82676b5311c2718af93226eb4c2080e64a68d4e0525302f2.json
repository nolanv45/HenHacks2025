{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from \"../../request.js\";\nimport { generateLowercaseBracedUUID as r } from \"../../core/uuid.js\";\nconst t = r(),\n  n = new Map(),\n  s = new Map(),\n  a = new Map();\nasync function o(r, t, s) {\n  if (!r || !s) return !1;\n  if (!t) return !0;\n  const a = new URL(r).host;\n  let o = n.get(a);\n  if (!o) {\n    const t = r.replace(/\\/FeatureServer/i, \"/VersionManagementServer\").replace(/\\/\\d*$/, \"\");\n    o = (await e(t, {\n      responseType: \"json\",\n      query: {\n        f: \"json\"\n      }\n    })).data.defaultVersionName;\n  }\n  return o === t;\n}\nasync function i(e, r) {\n  let n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;\n  if (!e || !r) return !0;\n  const a = e.replace(/\\/FeatureServer/i, \"/VersionManagementServer\").replace(/\\/\\d*$/, \"\"),\n    o = s.get(a)?.entries();\n  if (o) for (const [s, i] of o) if (i.name === r) {\n    const e = !i.stack?.hasForwardEdits();\n    if (!e && n) {\n      const [{\n          deleteForwardEdits: e\n        }, {\n          default: r\n        }] = await Promise.all([import(\"../../rest/versionManagement/gdbVersion/deleteForwardEdits.js\"), import(\"../../rest/versionManagement/gdbVersion/support/DeleteForwardEditsParameters.js\")]),\n        n = await e(a, s, new r({\n          sessionId: t,\n          moment: i.moment\n        }));\n      return n.success && i.stack?.clearForwardEdits(), n.success;\n    }\n    return e;\n  }\n  return !0;\n}\nfunction c(e, r) {\n  if (!e) return !1;\n  const t = e.replace(/\\/FeatureServer/i, \"/VersionManagementServer\").replace(/\\/\\d*$/, \"\"),\n    n = s.get(t)?.entries();\n  if (n) for (const [s, a] of n) if (a.name === r) {\n    return \"edit\" === a.lockType;\n  }\n  return !1;\n}\nexport { t as currentSessionId, n as defaultVersionNameLookup, o as isHistoricVersion, i as isSafeToEditVersion, c as isVersionInEditSession, s as versionCollection, a as versionCollectionCount };","map":{"version":3,"names":["e","generateLowercaseBracedUUID","r","t","n","Map","s","a","o","URL","host","get","replace","responseType","query","f","data","defaultVersionName","i","arguments","length","undefined","entries","name","stack","hasForwardEdits","deleteForwardEdits","default","Promise","all","sessionId","moment","success","clearForwardEdits","c","lockType","currentSessionId","defaultVersionNameLookup","isHistoricVersion","isSafeToEditVersion","isVersionInEditSession","versionCollection","versionCollectionCount"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/versionManagement/support/versionManagementUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import{generateLowercaseBracedUUID as r}from\"../../core/uuid.js\";const t=r(),n=new Map,s=new Map,a=new Map;async function o(r,t,s){if(!r||!s)return!1;if(!t)return!0;const a=new URL(r).host;let o=n.get(a);if(!o){const t=r.replace(/\\/FeatureServer/i,\"/VersionManagementServer\").replace(/\\/\\d*$/,\"\");o=(await e(t,{responseType:\"json\",query:{f:\"json\"}})).data.defaultVersionName}return o===t}async function i(e,r,n=!1){if(!e||!r)return!0;const a=e.replace(/\\/FeatureServer/i,\"/VersionManagementServer\").replace(/\\/\\d*$/,\"\"),o=s.get(a)?.entries();if(o)for(const[s,i]of o)if(i.name===r){const e=!i.stack?.hasForwardEdits();if(!e&&n){const[{deleteForwardEdits:e},{default:r}]=await Promise.all([import(\"../../rest/versionManagement/gdbVersion/deleteForwardEdits.js\"),import(\"../../rest/versionManagement/gdbVersion/support/DeleteForwardEditsParameters.js\")]),n=await e(a,s,new r({sessionId:t,moment:i.moment}));return n.success&&i.stack?.clearForwardEdits(),n.success}return e}return!0}function c(e,r){if(!e)return!1;const t=e.replace(/\\/FeatureServer/i,\"/VersionManagementServer\").replace(/\\/\\d*$/,\"\"),n=s.get(t)?.entries();if(n)for(const[s,a]of n)if(a.name===r){return\"edit\"===a.lockType}return!1}export{t as currentSessionId,n as defaultVersionNameLookup,o as isHistoricVersion,i as isSafeToEditVersion,c as isVersionInEditSession,s as versionCollection,a as versionCollectionCount};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,OAAOA,CAAC,MAAK,kBAAkB;AAAC,SAAOC,2BAA2B,IAAIC,CAAC,QAAK,oBAAoB;AAAC,MAAMC,CAAC,GAACD,CAAC,CAAC,CAAC;EAACE,CAAC,GAAC,IAAIC,GAAG,CAAD,CAAC;EAACC,CAAC,GAAC,IAAID,GAAG,CAAD,CAAC;EAACE,CAAC,GAAC,IAAIF,GAAG,CAAD,CAAC;AAAC,eAAeG,CAACA,CAACN,CAAC,EAACC,CAAC,EAACG,CAAC,EAAC;EAAC,IAAG,CAACJ,CAAC,IAAE,CAACI,CAAC,EAAC,OAAM,CAAC,CAAC;EAAC,IAAG,CAACH,CAAC,EAAC,OAAM,CAAC,CAAC;EAAC,MAAMI,CAAC,GAAC,IAAIE,GAAG,CAACP,CAAC,CAAC,CAACQ,IAAI;EAAC,IAAIF,CAAC,GAACJ,CAAC,CAACO,GAAG,CAACJ,CAAC,CAAC;EAAC,IAAG,CAACC,CAAC,EAAC;IAAC,MAAML,CAAC,GAACD,CAAC,CAACU,OAAO,CAAC,kBAAkB,EAAC,0BAA0B,CAAC,CAACA,OAAO,CAAC,QAAQ,EAAC,EAAE,CAAC;IAACJ,CAAC,GAAC,CAAC,MAAMR,CAAC,CAACG,CAAC,EAAC;MAACU,YAAY,EAAC,MAAM;MAACC,KAAK,EAAC;QAACC,CAAC,EAAC;MAAM;IAAC,CAAC,CAAC,EAAEC,IAAI,CAACC,kBAAkB;EAAA;EAAC,OAAOT,CAAC,KAAGL,CAAC;AAAA;AAAC,eAAee,CAACA,CAAClB,CAAC,EAACE,CAAC,EAAM;EAAA,IAALE,CAAC,GAAAe,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,CAAC,CAAC;EAAE,IAAG,CAACnB,CAAC,IAAE,CAACE,CAAC,EAAC,OAAM,CAAC,CAAC;EAAC,MAAMK,CAAC,GAACP,CAAC,CAACY,OAAO,CAAC,kBAAkB,EAAC,0BAA0B,CAAC,CAACA,OAAO,CAAC,QAAQ,EAAC,EAAE,CAAC;IAACJ,CAAC,GAACF,CAAC,CAACK,GAAG,CAACJ,CAAC,CAAC,EAAEe,OAAO,CAAC,CAAC;EAAC,IAAGd,CAAC,EAAC,KAAI,MAAK,CAACF,CAAC,EAACY,CAAC,CAAC,IAAGV,CAAC,EAAC,IAAGU,CAAC,CAACK,IAAI,KAAGrB,CAAC,EAAC;IAAC,MAAMF,CAAC,GAAC,CAACkB,CAAC,CAACM,KAAK,EAAEC,eAAe,CAAC,CAAC;IAAC,IAAG,CAACzB,CAAC,IAAEI,CAAC,EAAC;MAAC,MAAK,CAAC;UAACsB,kBAAkB,EAAC1B;QAAC,CAAC,EAAC;UAAC2B,OAAO,EAACzB;QAAC,CAAC,CAAC,GAAC,MAAM0B,OAAO,CAACC,GAAG,CAAC,CAAC,MAAM,CAAC,+DAA+D,CAAC,EAAC,MAAM,CAAC,iFAAiF,CAAC,CAAC,CAAC;QAACzB,CAAC,GAAC,MAAMJ,CAAC,CAACO,CAAC,EAACD,CAAC,EAAC,IAAIJ,CAAC,CAAC;UAAC4B,SAAS,EAAC3B,CAAC;UAAC4B,MAAM,EAACb,CAAC,CAACa;QAAM,CAAC,CAAC,CAAC;MAAC,OAAO3B,CAAC,CAAC4B,OAAO,IAAEd,CAAC,CAACM,KAAK,EAAES,iBAAiB,CAAC,CAAC,EAAC7B,CAAC,CAAC4B,OAAO;IAAA;IAAC,OAAOhC,CAAC;EAAA;EAAC,OAAM,CAAC,CAAC;AAAA;AAAC,SAASkC,CAACA,CAAClC,CAAC,EAACE,CAAC,EAAC;EAAC,IAAG,CAACF,CAAC,EAAC,OAAM,CAAC,CAAC;EAAC,MAAMG,CAAC,GAACH,CAAC,CAACY,OAAO,CAAC,kBAAkB,EAAC,0BAA0B,CAAC,CAACA,OAAO,CAAC,QAAQ,EAAC,EAAE,CAAC;IAACR,CAAC,GAACE,CAAC,CAACK,GAAG,CAACR,CAAC,CAAC,EAAEmB,OAAO,CAAC,CAAC;EAAC,IAAGlB,CAAC,EAAC,KAAI,MAAK,CAACE,CAAC,EAACC,CAAC,CAAC,IAAGH,CAAC,EAAC,IAAGG,CAAC,CAACgB,IAAI,KAAGrB,CAAC,EAAC;IAAC,OAAM,MAAM,KAAGK,CAAC,CAAC4B,QAAQ;EAAA;EAAC,OAAM,CAAC,CAAC;AAAA;AAAC,SAAOhC,CAAC,IAAIiC,gBAAgB,EAAChC,CAAC,IAAIiC,wBAAwB,EAAC7B,CAAC,IAAI8B,iBAAiB,EAACpB,CAAC,IAAIqB,mBAAmB,EAACL,CAAC,IAAIM,sBAAsB,EAAClC,CAAC,IAAImC,iBAAiB,EAAClC,CAAC,IAAImC,sBAAsB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}