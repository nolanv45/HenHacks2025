{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from \"../../../../../core/Error.js\";\nimport o from \"../../../../../core/Logger.js\";\nimport { toPt as r } from \"../../../../../core/screenUtils.js\";\nimport { getWebGLCapabilities as t } from \"../../../../webgl/capabilities.js\";\nconst l = 8,\n  s = l - 2,\n  n = () => o.getLogger(\"esri.views.2d.layers.features.support.rendererUtils\");\nfunction u(e) {\n  return e.map(e => a(e) ? i(e.clone()) : e);\n}\nfunction a(e) {\n  return (\"size\" === e.type || \"color\" === e.type || \"opacity\" === e.type) && null != e.stops;\n}\nfunction i(e) {\n  return e.stops = b(e.type, e.stops ?? []), e;\n}\nfunction p(e, o, r) {\n  return (1 - r) * e + r * o;\n}\nfunction c(e, o) {\n  const [t, ...l] = o,\n    n = l.pop(),\n    u = l[0].value,\n    a = l[l.length - 1].value,\n    i = (a - u) / s,\n    c = [];\n  for (let s = u; s < a; s += i) {\n    let t = 0;\n    for (; s >= l[t].value;) t++;\n    const n = l[t],\n      u = o[t - 1],\n      a = s - u.value,\n      i = n.value === u.value ? 1 : a / (n.value - u.value);\n    if (\"color\" === e) {\n      const e = l[t],\n        r = o[t - 1],\n        n = e.color.clone();\n      n.r = p(r.color.r, n.r, i), n.g = p(r.color.g, n.g, i), n.b = p(r.color.b, n.b, i), n.a = p(r.color.a, n.a, i), c.push({\n        value: s,\n        color: n,\n        label: e.label\n      });\n    } else if (\"size\" === e) {\n      const e = l[t],\n        n = o[t - 1],\n        u = r(e.size),\n        a = p(r(n.size), u, i);\n      c.push({\n        value: s,\n        size: a,\n        label: e.label\n      });\n    } else {\n      const e = l[t],\n        r = p(o[t - 1].opacity, e.opacity, i);\n      c.push({\n        value: s,\n        opacity: r,\n        label: e.label\n      });\n    }\n  }\n  return [t, ...c, n];\n}\nfunction f(e) {\n  const [o, ...r] = e,\n    t = r.pop();\n  for (; r.length > s;) {\n    let e = 0,\n      o = 0;\n    for (let t = 1; t < r.length; t++) {\n      const l = r[t - 1],\n        s = r[t],\n        n = Math.abs(s.value - l.value);\n      n > o && (o = n, e = t);\n    }\n    r.splice(e, 1);\n  }\n  return [o, ...r, t];\n}\nfunction b(e, o) {\n  return o.length <= l ? o : (n().warn(`Found ${o.length} Visual Variable stops, but MapView only supports ${l}. Displayed stops will be simplified.`), o.length > 2 * l ? c(e, o) : f(o));\n}\nfunction g() {\n  const {\n    supportsColorBufferFloat: e,\n    supportsColorBufferFloatBlend: o,\n    supportsColorBufferHalfFloat: r\n  } = t();\n  return e && o || r;\n}\nfunction m(o) {\n  if (!o) return !0;\n  switch (o.type) {\n    case \"dot-density\":\n      break;\n    case \"heatmap\":\n      if (!g()) {\n        const o = t(),\n          r = [\"supportsColorBufferFloat\", \"supportsColorBufferFloatBlend\", \"supportsColorBufferHalfFloat\"].filter(e => !o[e]).join(\", \");\n        return n().errorOnce(new e(\"webgl-missing-extension\", `Missing WebGL2 requirements for Heatmap: ${r}`)), !1;\n      }\n  }\n  return !0;\n}\nexport { m as isRendererSupported, u as simplifyVisualVariables };","map":{"version":3,"names":["e","o","toPt","r","getWebGLCapabilities","t","l","s","n","getLogger","u","map","a","i","clone","type","stops","b","p","c","pop","value","length","color","g","push","label","size","opacity","f","Math","abs","splice","warn","supportsColorBufferFloat","supportsColorBufferFloatBlend","supportsColorBufferHalfFloat","m","filter","join","errorOnce","isRendererSupported","simplifyVisualVariables"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/layers/features/support/rendererUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/Error.js\";import o from\"../../../../../core/Logger.js\";import{toPt as r}from\"../../../../../core/screenUtils.js\";import{getWebGLCapabilities as t}from\"../../../../webgl/capabilities.js\";const l=8,s=l-2,n=()=>o.getLogger(\"esri.views.2d.layers.features.support.rendererUtils\");function u(e){return e.map((e=>a(e)?i(e.clone()):e))}function a(e){return(\"size\"===e.type||\"color\"===e.type||\"opacity\"===e.type)&&null!=e.stops}function i(e){return e.stops=b(e.type,e.stops??[]),e}function p(e,o,r){return(1-r)*e+r*o}function c(e,o){const[t,...l]=o,n=l.pop(),u=l[0].value,a=l[l.length-1].value,i=(a-u)/s,c=[];for(let s=u;s<a;s+=i){let t=0;for(;s>=l[t].value;)t++;const n=l[t],u=o[t-1],a=s-u.value,i=n.value===u.value?1:a/(n.value-u.value);if(\"color\"===e){const e=l[t],r=o[t-1],n=e.color.clone();n.r=p(r.color.r,n.r,i),n.g=p(r.color.g,n.g,i),n.b=p(r.color.b,n.b,i),n.a=p(r.color.a,n.a,i),c.push({value:s,color:n,label:e.label})}else if(\"size\"===e){const e=l[t],n=o[t-1],u=r(e.size),a=p(r(n.size),u,i);c.push({value:s,size:a,label:e.label})}else{const e=l[t],r=p(o[t-1].opacity,e.opacity,i);c.push({value:s,opacity:r,label:e.label})}}return[t,...c,n]}function f(e){const[o,...r]=e,t=r.pop();for(;r.length>s;){let e=0,o=0;for(let t=1;t<r.length;t++){const l=r[t-1],s=r[t],n=Math.abs(s.value-l.value);n>o&&(o=n,e=t)}r.splice(e,1)}return[o,...r,t]}function b(e,o){return o.length<=l?o:(n().warn(`Found ${o.length} Visual Variable stops, but MapView only supports ${l}. Displayed stops will be simplified.`),o.length>2*l?c(e,o):f(o))}function g(){const{supportsColorBufferFloat:e,supportsColorBufferFloatBlend:o,supportsColorBufferHalfFloat:r}=t();return e&&o||r}function m(o){if(!o)return!0;switch(o.type){case\"dot-density\":break;case\"heatmap\":if(!g()){const o=t(),r=[\"supportsColorBufferFloat\",\"supportsColorBufferFloatBlend\",\"supportsColorBufferHalfFloat\"].filter((e=>!o[e])).join(\", \");return n().errorOnce(new e(\"webgl-missing-extension\",`Missing WebGL2 requirements for Heatmap: ${r}`)),!1}}return!0}export{m as isRendererSupported,u as simplifyVisualVariables};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,OAAOA,CAAC,MAAK,8BAA8B;AAAC,OAAOC,CAAC,MAAK,+BAA+B;AAAC,SAAOC,IAAI,IAAIC,CAAC,QAAK,oCAAoC;AAAC,SAAOC,oBAAoB,IAAIC,CAAC,QAAK,mCAAmC;AAAC,MAAMC,CAAC,GAAC,CAAC;EAACC,CAAC,GAACD,CAAC,GAAC,CAAC;EAACE,CAAC,GAACA,CAAA,KAAIP,CAAC,CAACQ,SAAS,CAAC,qDAAqD,CAAC;AAAC,SAASC,CAACA,CAACV,CAAC,EAAC;EAAC,OAAOA,CAAC,CAACW,GAAG,CAAEX,CAAC,IAAEY,CAAC,CAACZ,CAAC,CAAC,GAACa,CAAC,CAACb,CAAC,CAACc,KAAK,CAAC,CAAC,CAAC,GAACd,CAAE,CAAC;AAAA;AAAC,SAASY,CAACA,CAACZ,CAAC,EAAC;EAAC,OAAM,CAAC,MAAM,KAAGA,CAAC,CAACe,IAAI,IAAE,OAAO,KAAGf,CAAC,CAACe,IAAI,IAAE,SAAS,KAAGf,CAAC,CAACe,IAAI,KAAG,IAAI,IAAEf,CAAC,CAACgB,KAAK;AAAA;AAAC,SAASH,CAACA,CAACb,CAAC,EAAC;EAAC,OAAOA,CAAC,CAACgB,KAAK,GAACC,CAAC,CAACjB,CAAC,CAACe,IAAI,EAACf,CAAC,CAACgB,KAAK,IAAE,EAAE,CAAC,EAAChB,CAAC;AAAA;AAAC,SAASkB,CAACA,CAAClB,CAAC,EAACC,CAAC,EAACE,CAAC,EAAC;EAAC,OAAM,CAAC,CAAC,GAACA,CAAC,IAAEH,CAAC,GAACG,CAAC,GAACF,CAAC;AAAA;AAAC,SAASkB,CAACA,CAACnB,CAAC,EAACC,CAAC,EAAC;EAAC,MAAK,CAACI,CAAC,EAAC,GAAGC,CAAC,CAAC,GAACL,CAAC;IAACO,CAAC,GAACF,CAAC,CAACc,GAAG,CAAC,CAAC;IAACV,CAAC,GAACJ,CAAC,CAAC,CAAC,CAAC,CAACe,KAAK;IAACT,CAAC,GAACN,CAAC,CAACA,CAAC,CAACgB,MAAM,GAAC,CAAC,CAAC,CAACD,KAAK;IAACR,CAAC,GAAC,CAACD,CAAC,GAACF,CAAC,IAAEH,CAAC;IAACY,CAAC,GAAC,EAAE;EAAC,KAAI,IAAIZ,CAAC,GAACG,CAAC,EAACH,CAAC,GAACK,CAAC,EAACL,CAAC,IAAEM,CAAC,EAAC;IAAC,IAAIR,CAAC,GAAC,CAAC;IAAC,OAAKE,CAAC,IAAED,CAAC,CAACD,CAAC,CAAC,CAACgB,KAAK,GAAEhB,CAAC,EAAE;IAAC,MAAMG,CAAC,GAACF,CAAC,CAACD,CAAC,CAAC;MAACK,CAAC,GAACT,CAAC,CAACI,CAAC,GAAC,CAAC,CAAC;MAACO,CAAC,GAACL,CAAC,GAACG,CAAC,CAACW,KAAK;MAACR,CAAC,GAACL,CAAC,CAACa,KAAK,KAAGX,CAAC,CAACW,KAAK,GAAC,CAAC,GAACT,CAAC,IAAEJ,CAAC,CAACa,KAAK,GAACX,CAAC,CAACW,KAAK,CAAC;IAAC,IAAG,OAAO,KAAGrB,CAAC,EAAC;MAAC,MAAMA,CAAC,GAACM,CAAC,CAACD,CAAC,CAAC;QAACF,CAAC,GAACF,CAAC,CAACI,CAAC,GAAC,CAAC,CAAC;QAACG,CAAC,GAACR,CAAC,CAACuB,KAAK,CAACT,KAAK,CAAC,CAAC;MAACN,CAAC,CAACL,CAAC,GAACe,CAAC,CAACf,CAAC,CAACoB,KAAK,CAACpB,CAAC,EAACK,CAAC,CAACL,CAAC,EAACU,CAAC,CAAC,EAACL,CAAC,CAACgB,CAAC,GAACN,CAAC,CAACf,CAAC,CAACoB,KAAK,CAACC,CAAC,EAAChB,CAAC,CAACgB,CAAC,EAACX,CAAC,CAAC,EAACL,CAAC,CAACS,CAAC,GAACC,CAAC,CAACf,CAAC,CAACoB,KAAK,CAACN,CAAC,EAACT,CAAC,CAACS,CAAC,EAACJ,CAAC,CAAC,EAACL,CAAC,CAACI,CAAC,GAACM,CAAC,CAACf,CAAC,CAACoB,KAAK,CAACX,CAAC,EAACJ,CAAC,CAACI,CAAC,EAACC,CAAC,CAAC,EAACM,CAAC,CAACM,IAAI,CAAC;QAACJ,KAAK,EAACd,CAAC;QAACgB,KAAK,EAACf,CAAC;QAACkB,KAAK,EAAC1B,CAAC,CAAC0B;MAAK,CAAC,CAAC;IAAA,CAAC,MAAK,IAAG,MAAM,KAAG1B,CAAC,EAAC;MAAC,MAAMA,CAAC,GAACM,CAAC,CAACD,CAAC,CAAC;QAACG,CAAC,GAACP,CAAC,CAACI,CAAC,GAAC,CAAC,CAAC;QAACK,CAAC,GAACP,CAAC,CAACH,CAAC,CAAC2B,IAAI,CAAC;QAACf,CAAC,GAACM,CAAC,CAACf,CAAC,CAACK,CAAC,CAACmB,IAAI,CAAC,EAACjB,CAAC,EAACG,CAAC,CAAC;MAACM,CAAC,CAACM,IAAI,CAAC;QAACJ,KAAK,EAACd,CAAC;QAACoB,IAAI,EAACf,CAAC;QAACc,KAAK,EAAC1B,CAAC,CAAC0B;MAAK,CAAC,CAAC;IAAA,CAAC,MAAI;MAAC,MAAM1B,CAAC,GAACM,CAAC,CAACD,CAAC,CAAC;QAACF,CAAC,GAACe,CAAC,CAACjB,CAAC,CAACI,CAAC,GAAC,CAAC,CAAC,CAACuB,OAAO,EAAC5B,CAAC,CAAC4B,OAAO,EAACf,CAAC,CAAC;MAACM,CAAC,CAACM,IAAI,CAAC;QAACJ,KAAK,EAACd,CAAC;QAACqB,OAAO,EAACzB,CAAC;QAACuB,KAAK,EAAC1B,CAAC,CAAC0B;MAAK,CAAC,CAAC;IAAA;EAAC;EAAC,OAAM,CAACrB,CAAC,EAAC,GAAGc,CAAC,EAACX,CAAC,CAAC;AAAA;AAAC,SAASqB,CAACA,CAAC7B,CAAC,EAAC;EAAC,MAAK,CAACC,CAAC,EAAC,GAAGE,CAAC,CAAC,GAACH,CAAC;IAACK,CAAC,GAACF,CAAC,CAACiB,GAAG,CAAC,CAAC;EAAC,OAAKjB,CAAC,CAACmB,MAAM,GAACf,CAAC,GAAE;IAAC,IAAIP,CAAC,GAAC,CAAC;MAACC,CAAC,GAAC,CAAC;IAAC,KAAI,IAAII,CAAC,GAAC,CAAC,EAACA,CAAC,GAACF,CAAC,CAACmB,MAAM,EAACjB,CAAC,EAAE,EAAC;MAAC,MAAMC,CAAC,GAACH,CAAC,CAACE,CAAC,GAAC,CAAC,CAAC;QAACE,CAAC,GAACJ,CAAC,CAACE,CAAC,CAAC;QAACG,CAAC,GAACsB,IAAI,CAACC,GAAG,CAACxB,CAAC,CAACc,KAAK,GAACf,CAAC,CAACe,KAAK,CAAC;MAACb,CAAC,GAACP,CAAC,KAAGA,CAAC,GAACO,CAAC,EAACR,CAAC,GAACK,CAAC,CAAC;IAAA;IAACF,CAAC,CAAC6B,MAAM,CAAChC,CAAC,EAAC,CAAC,CAAC;EAAA;EAAC,OAAM,CAACC,CAAC,EAAC,GAAGE,CAAC,EAACE,CAAC,CAAC;AAAA;AAAC,SAASY,CAACA,CAACjB,CAAC,EAACC,CAAC,EAAC;EAAC,OAAOA,CAAC,CAACqB,MAAM,IAAEhB,CAAC,GAACL,CAAC,IAAEO,CAAC,CAAC,CAAC,CAACyB,IAAI,CAAC,SAAShC,CAAC,CAACqB,MAAM,qDAAqDhB,CAAC,uCAAuC,CAAC,EAACL,CAAC,CAACqB,MAAM,GAAC,CAAC,GAAChB,CAAC,GAACa,CAAC,CAACnB,CAAC,EAACC,CAAC,CAAC,GAAC4B,CAAC,CAAC5B,CAAC,CAAC,CAAC;AAAA;AAAC,SAASuB,CAACA,CAAA,EAAE;EAAC,MAAK;IAACU,wBAAwB,EAAClC,CAAC;IAACmC,6BAA6B,EAAClC,CAAC;IAACmC,4BAA4B,EAACjC;EAAC,CAAC,GAACE,CAAC,CAAC,CAAC;EAAC,OAAOL,CAAC,IAAEC,CAAC,IAAEE,CAAC;AAAA;AAAC,SAASkC,CAACA,CAACpC,CAAC,EAAC;EAAC,IAAG,CAACA,CAAC,EAAC,OAAM,CAAC,CAAC;EAAC,QAAOA,CAAC,CAACc,IAAI;IAAE,KAAI,aAAa;MAAC;IAAM,KAAI,SAAS;MAAC,IAAG,CAACS,CAAC,CAAC,CAAC,EAAC;QAAC,MAAMvB,CAAC,GAACI,CAAC,CAAC,CAAC;UAACF,CAAC,GAAC,CAAC,0BAA0B,EAAC,+BAA+B,EAAC,8BAA8B,CAAC,CAACmC,MAAM,CAAEtC,CAAC,IAAE,CAACC,CAAC,CAACD,CAAC,CAAE,CAAC,CAACuC,IAAI,CAAC,IAAI,CAAC;QAAC,OAAO/B,CAAC,CAAC,CAAC,CAACgC,SAAS,CAAC,IAAIxC,CAAC,CAAC,yBAAyB,EAAC,4CAA4CG,CAAC,EAAE,CAAC,CAAC,EAAC,CAAC,CAAC;MAAA;EAAC;EAAC,OAAM,CAAC,CAAC;AAAA;AAAC,SAAOkC,CAAC,IAAII,mBAAmB,EAAC/B,CAAC,IAAIgC,uBAAuB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}