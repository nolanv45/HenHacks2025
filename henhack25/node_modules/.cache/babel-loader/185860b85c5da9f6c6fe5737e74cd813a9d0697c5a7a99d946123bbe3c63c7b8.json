{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { remove as e } from \"../arrayUtils.js\";\nimport { makeHandle as t } from \"../handleUtils.js\";\nimport s from \"../Logger.js\";\nimport { throwIfAborted as r } from \"../promiseUtils.js\";\nimport { open as i } from \"./workers.js\";\nclass h {\n  constructor(e, t, r, h) {\n    let o = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n    this._mainMethod = t, this._transferLists = r, this._listeners = [], this._promise = i(e, {\n      ...o,\n      schedule: h\n    }).then(e => {\n      if (void 0 === this._thread) {\n        this._thread = e, this._promise = null, o.hasInitialize && this.broadcast({}, \"initialize\");\n        for (const e of this._listeners) this._connectListener(e);\n      } else e.close();\n    }), this._promise.catch(t => s.getLogger(\"esri.core.workers.WorkerHandle\").error(`Failed to initialize ${e} worker: ${t}`));\n  }\n  on(s, r) {\n    const i = {\n      removed: !1,\n      eventName: s,\n      callback: r,\n      threadHandle: null\n    };\n    return this._listeners.push(i), this._connectListener(i), t(() => {\n      i.removed = !0, e(this._listeners, i), this._thread && null != i.threadHandle && i.threadHandle.remove();\n    });\n  }\n  destroy() {\n    this._thread && (this._thread.close(), this._thread = null), this._promise = null, this._listeners.length = 0, this._transferLists = {};\n  }\n  invoke(e, t) {\n    return this.invokeMethod(this._mainMethod, e, t);\n  }\n  invokeMethod(e, t, s) {\n    if (this._thread) {\n      const r = this._transferLists[e],\n        i = r ? r(t) : [];\n      return this._thread.invoke(e, t, {\n        transferList: i,\n        signal: s\n      });\n    }\n    return this._promise ? this._promise.then(() => (r(s), this.invokeMethod(e, t, s))) : Promise.reject(null);\n  }\n  broadcast(e, t) {\n    return this._thread ? Promise.all(this._thread.broadcast(t, e)).then(() => {}) : this._promise ? this._promise.then(() => this.broadcast(e, t)) : Promise.reject();\n  }\n  get promise() {\n    return this._promise;\n  }\n  _connectListener(e) {\n    this._thread && this._thread.on(e.eventName, e.callback).then(t => {\n      e.removed || (e.threadHandle = t);\n    });\n  }\n}\nexport { h as WorkerHandle };","map":{"version":3,"names":["remove","e","makeHandle","t","s","throwIfAborted","r","open","i","h","constructor","o","arguments","length","undefined","_mainMethod","_transferLists","_listeners","_promise","schedule","then","_thread","hasInitialize","broadcast","_connectListener","close","catch","getLogger","error","on","removed","eventName","callback","threadHandle","push","destroy","invoke","invokeMethod","transferList","signal","Promise","reject","all","promise","WorkerHandle"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/core/workers/WorkerHandle.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{remove as e}from\"../arrayUtils.js\";import{makeHandle as t}from\"../handleUtils.js\";import s from\"../Logger.js\";import{throwIfAborted as r}from\"../promiseUtils.js\";import{open as i}from\"./workers.js\";class h{constructor(e,t,r,h,o={}){this._mainMethod=t,this._transferLists=r,this._listeners=[],this._promise=i(e,{...o,schedule:h}).then((e=>{if(void 0===this._thread){this._thread=e,this._promise=null,o.hasInitialize&&this.broadcast({},\"initialize\");for(const e of this._listeners)this._connectListener(e)}else e.close()})),this._promise.catch((t=>s.getLogger(\"esri.core.workers.WorkerHandle\").error(`Failed to initialize ${e} worker: ${t}`)))}on(s,r){const i={removed:!1,eventName:s,callback:r,threadHandle:null};return this._listeners.push(i),this._connectListener(i),t((()=>{i.removed=!0,e(this._listeners,i),this._thread&&null!=i.threadHandle&&i.threadHandle.remove()}))}destroy(){this._thread&&(this._thread.close(),this._thread=null),this._promise=null,this._listeners.length=0,this._transferLists={}}invoke(e,t){return this.invokeMethod(this._mainMethod,e,t)}invokeMethod(e,t,s){if(this._thread){const r=this._transferLists[e],i=r?r(t):[];return this._thread.invoke(e,t,{transferList:i,signal:s})}return this._promise?this._promise.then((()=>(r(s),this.invokeMethod(e,t,s)))):Promise.reject(null)}broadcast(e,t){return this._thread?Promise.all(this._thread.broadcast(t,e)).then((()=>{})):this._promise?this._promise.then((()=>this.broadcast(e,t))):Promise.reject()}get promise(){return this._promise}_connectListener(e){this._thread&&this._thread.on(e.eventName,e.callback).then((t=>{e.removed||(e.threadHandle=t)}))}}export{h as WorkerHandle};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}