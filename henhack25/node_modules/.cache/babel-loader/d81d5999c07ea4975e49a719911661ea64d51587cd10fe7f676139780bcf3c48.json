{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../core/Accessor.js\";\nimport { isSome as r } from \"../../../core/arrayUtils.js\";\nimport s from \"../../../core/Error.js\";\nimport has from \"../../../core/has.js\";\nimport { getOrCreateMapValue as i } from \"../../../core/MapUtils.js\";\nimport { debounce as o, throwIfAborted as a } from \"../../../core/promiseUtils.js\";\nimport { on as n } from \"../../../core/reactiveUtils.js\";\nimport { sqlAnd as l } from \"../../../core/sql.js\";\nimport { getMetersPerUnitForSR as p } from \"../../../core/unitUtils.js\";\nimport { property as c } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/Logger.js\";\nimport { subclass as u } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport y from \"../../../geometry/Extent.js\";\nimport { getResolutionForScale as h } from \"../../../geometry/support/scaleUtils.js\";\nimport { collectFields as m } from \"../../../layers/support/fieldUtils.js\";\nimport { getLayerFloorFilterClause as d } from \"../../../layers/support/floorFilterUtils.js\";\nimport { calculateTolerance as f } from \"../../../renderers/support/clickToleranceUtils.js\";\nimport { identify as g } from \"../../../rest/identify.js\";\nimport w from \"../../../rest/support/IdentifyParameters.js\";\nimport { loadArcade as b } from \"../../../support/arcadeOnDemand.js\";\nimport v from \"../../../symbols/SimpleMarkerSymbol.js\";\nimport { getRequiredFields as x, getFetchPopupTemplate as j } from \"./popupUtils.js\";\nlet F = null;\nfunction P(e, t) {\n  return \"tile\" === t.type || \"map-image\" === t.type;\n}\nlet S = class extends t {\n  constructor(e) {\n    super(e), this._featuresResolutions = new WeakMap(), this.highlightGraphics = null, this.highlightGraphicUpdated = null, this.updateHighlightedFeatures = o(async e => {\n      this.destroyed || this.updatingHandles.addPromise(this._updateHighlightedFeaturesGeometries(e).catch(() => {}));\n    });\n  }\n  initialize() {\n    const e = e => {\n      for (const t of e) {\n        const {\n          sourceLayer: e\n        } = t;\n        null != e && \"geometryType\" in e && \"point\" === e.geometryType && (t.visible = !1);\n      }\n      this.updatingHandles.addPromise(this._updateHighlightedFeaturesSymbols(e).catch(() => {})), this.updateHighlightedFeatures(this._highlightGeometriesResolution);\n    };\n    this.addHandles([n(() => this.highlightGraphics, \"change\", t => e(t.added), {\n      onListenerAdd: t => e(t)\n    })]);\n  }\n  async fetchPopupFeaturesAtLocation(e, t) {\n    const {\n      layerView: {\n        layer: r,\n        view: {\n          scale: i\n        }\n      }\n    } = this;\n    if (!e) throw new s(\"fetchPopupFeatures:invalid-area\", \"Nothing to fetch without area\", {\n      layer: r\n    });\n    const o = U(r.sublayers, i, t);\n    if (!o.length) return [];\n    const a = await G(r, o);\n    if (!((r.capabilities?.operations?.supportsIdentify ?? !0) && r.version >= 10.5) && !a) throw new s(\"fetchPopupFeatures:not-supported\", \"query operation is disabled for this service\", {\n      layer: r\n    });\n    return a ? this._fetchPopupFeaturesUsingQueries(e, o, t) : this._fetchPopupFeaturesUsingIdentify(e, o, t);\n  }\n  clearHighlights() {\n    this.highlightGraphics?.removeAll();\n  }\n  async _updateHighlightedFeaturesSymbols(e) {\n    const {\n      layerView: {\n        view: t\n      },\n      highlightGraphics: r,\n      highlightGraphicUpdated: s\n    } = this;\n    if (r && s) for (const i of e) {\n      const e = i.sourceLayer && \"renderer\" in i.sourceLayer && i.sourceLayer.renderer;\n      i.sourceLayer && \"geometryType\" in i.sourceLayer && \"point\" === i.sourceLayer.geometryType && e && \"getSymbolAsync\" in e && e.getSymbolAsync(i).then(async o => {\n        o ||= new v();\n        let a = null;\n        const n = \"visualVariables\" in e ? e.visualVariables?.find(e => \"size\" === e.type) : void 0;\n        n && (F || (F = (await import(\"../../../renderers/visualVariables/support/visualVariableUtils.js\")).getSize), a = F(n, i, {\n          view: t.type,\n          scale: t.scale,\n          shape: \"simple-marker\" === o.type ? o.style : null\n        })), a ||= \"width\" in o && \"height\" in o && null != o.width && null != o.height ? Math.max(o.width, o.height) : \"size\" in o ? o.size : 16, r.includes(i) && (i.symbol = new v({\n          style: \"square\",\n          size: a,\n          xoffset: \"xoffset\" in o ? o.xoffset : 0,\n          yoffset: \"yoffset\" in o ? o.yoffset : 0\n        }), s(i, \"symbol\"), i.visible = !0);\n      });\n    }\n  }\n  async _updateHighlightedFeaturesGeometries(e) {\n    const {\n      layerView: {\n        layer: t,\n        view: r\n      },\n      highlightGraphics: s,\n      highlightGraphicUpdated: o\n    } = this;\n    if (this._highlightGeometriesResolution = e, !o || !s?.length || !t.capabilities.operations.supportsQuery) return;\n    const a = this._getTargetResolution(e),\n      n = new Map();\n    for (const c of s) if (!this._featuresResolutions.has(c) || this._featuresResolutions.get(c) > a) {\n      const e = c.sourceLayer;\n      i(n, e, () => new Map()).set(c.getObjectId(), c);\n    }\n    const l = Array.from(n, _ref => {\n        let [e, t] = _ref;\n        const s = e.createQuery();\n        return s.objectIds = [...t.keys()], s.outFields = [e.objectIdField], s.returnGeometry = !0, s.maxAllowableOffset = a, s.outSpatialReference = r.spatialReference, e.queryFeatures(s);\n      }),\n      p = await Promise.all(l);\n    if (!this.destroyed) for (const {\n      features: i\n    } of p) for (const e of i) {\n      const t = e.sourceLayer,\n        r = n.get(t).get(e.getObjectId());\n      r && s.includes(r) && (r.geometry = e.geometry, o(r, \"geometry\"), this._featuresResolutions.set(r, a));\n    }\n  }\n  _getTargetResolution(e) {\n    const t = e * p(this.layerView.view.spatialReference),\n      r = t / 16;\n    return r <= 10 ? 0 : e / t * r;\n  }\n  async _fetchPopupFeaturesUsingIdentify(e, t, r) {\n    const s = await this._createIdentifyParameters(e, t, r);\n    if (null == s) return [];\n    const {\n      results: i\n    } = await g(this.layerView.layer.parsedUrl, s, r);\n    return i.map(e => e.feature);\n  }\n  async _createIdentifyParameters(e, t, r) {\n    const {\n      floors: s,\n      layer: i,\n      timeExtent: o,\n      view: {\n        spatialReference: a,\n        scale: n\n      }\n    } = this.layerView;\n    if (!t.length) return null;\n    await Promise.all(t.map(_ref2 => {\n      let {\n        sublayer: e\n      } = _ref2;\n      return e.load(r).catch(() => {});\n    }));\n    const l = Math.min(has(\"mapservice-popup-identify-max-tolerance\"), i.allSublayers.reduce((e, t) => t.renderer ? f({\n        renderer: t.renderer,\n        pointerType: r?.pointerType\n      }) : e, 2)),\n      p = this.createFetchPopupFeaturesQueryGeometry(e, l),\n      c = h(n, a),\n      u = Math.round(p.width / c),\n      m = new y({\n        xmin: p.center.x - c * u,\n        ymin: p.center.y - c * u,\n        xmax: p.center.x + c * u,\n        ymax: p.center.y + c * u,\n        spatialReference: p.spatialReference\n      });\n    return new w({\n      floors: s,\n      gdbVersion: \"gdbVersion\" in i ? i.gdbVersion : void 0,\n      geometry: e,\n      height: u,\n      layerOption: \"popup\",\n      mapExtent: m,\n      returnGeometry: !0,\n      spatialReference: a,\n      sublayers: i.sublayers,\n      timeExtent: o,\n      tolerance: l,\n      width: u\n    });\n  }\n  async _fetchPopupFeaturesUsingQueries(e, t, s) {\n    const {\n        layerView: {\n          floors: i,\n          timeExtent: o\n        }\n      } = this,\n      n = t.map(async _ref3 => {\n        let {\n          sublayer: t,\n          popupTemplate: r\n        } = _ref3;\n        if (await t.load(s).catch(() => {}), t.capabilities && !t.capabilities.operations.supportsQuery) return [];\n        const n = t.createQuery(),\n          p = f({\n            renderer: t.renderer,\n            pointerType: s?.pointerType\n          }),\n          c = this.createFetchPopupFeaturesQueryGeometry(e, p),\n          u = new Set(),\n          [y] = await Promise.all([x(t, r), t.renderer?.collectRequiredFields(u, t.fieldsIndex)]);\n        a(s), m(u, t.fieldsIndex, y);\n        const h = Array.from(u).sort();\n        n.geometry = c, n.outFields = h, n.timeExtent = o;\n        const g = d(i, t);\n        if (n.where = l(n.where, g), t.capabilities?.query.supportsOrderBy && t.orderBy?.[0]) {\n          const e = t.orderBy[0],\n            r = !e.valueExpression && e.field,\n            s = \"ascending\" === e.order ? \"asc\" : \"desc\";\n          r && (n.orderByFields = [`${r} ${s}`]);\n        }\n        const w = this._getTargetResolution(c.width / p),\n          b = await _(r);\n        a(s);\n        const v = \"point\" === t.geometryType || b && b.arcadeUtils.hasGeometryOperations(r);\n        v || (n.maxAllowableOffset = w);\n        let {\n          features: j\n        } = await t.queryFeatures(n, s);\n        const F = v ? 0 : w;\n        j = await R(t, j, s);\n        for (const e of j) this._featuresResolutions.set(e, F);\n        return j;\n      });\n    return (await Promise.allSettled(n)).reduce((e, t) => \"fulfilled\" === t.status ? [...e, ...t.value] : e, []).filter(r);\n  }\n};\nfunction U(e, t, r) {\n  const s = [];\n  if (!e) return s;\n  const i = e => {\n    const o = 0 === e.minScale || t <= e.minScale,\n      a = 0 === e.maxScale || t >= e.maxScale;\n    if (e.visible && o && a) if (e.sublayers) e.sublayers.forEach(i);else if (e.popupEnabled) {\n      const t = j(e, {\n        ...r,\n        defaultPopupTemplateEnabled: !1\n      });\n      null != t && s.unshift({\n        sublayer: e,\n        popupTemplate: t\n      });\n    }\n  };\n  return e.map(i), s;\n}\nfunction _(e) {\n  return e.expressionInfos?.length || Array.isArray(e.content) && e.content.some(e => \"expression\" === e.type) ? b() : Promise.resolve();\n}\nasync function G(e, t) {\n  if (e.capabilities?.operations?.supportsQuery) return !0;\n  try {\n    return await Promise.any(t.map(_ref4 => {\n      let {\n        sublayer: e\n      } = _ref4;\n      return e.load().then(() => e.capabilities.operations.supportsQuery);\n    }));\n  } catch {\n    return !1;\n  }\n}\nasync function R(e, t, r) {\n  const s = e.renderer;\n  return s && \"defaultSymbol\" in s && !s.defaultSymbol && (t = s.valueExpression ? await Promise.all(t.map(e => s.getSymbolAsync(e, r).then(t => t ? e : null))).then(e => e.filter(e => null != e)) : t.filter(e => null != s.getSymbol(e))), t;\n}\ne([c({\n  constructOnly: !0\n})], S.prototype, \"createFetchPopupFeaturesQueryGeometry\", void 0), e([c({\n  constructOnly: !0\n})], S.prototype, \"layerView\", void 0), e([c({\n  constructOnly: !0\n})], S.prototype, \"highlightGraphics\", void 0), e([c({\n  constructOnly: !0\n})], S.prototype, \"highlightGraphicUpdated\", void 0), e([c({\n  constructOnly: !0\n})], S.prototype, \"updatingHandles\", void 0), S = e([u(\"esri.views.layers.support.MapServiceLayerViewHelper\")], S);\nexport { S as MapServiceLayerViewHelper, U as collectPopupProviders, P as isMapServiceLayerView };","map":{"version":3,"names":["_","e","t","isSome","r","s","has","getOrCreateMapValue","i","debounce","o","throwIfAborted","a","on","n","sqlAnd","l","getMetersPerUnitForSR","p","property","c","subclass","u","y","getResolutionForScale","h","collectFields","m","getLayerFloorFilterClause","d","calculateTolerance","f","identify","g","w","loadArcade","b","v","getRequiredFields","x","getFetchPopupTemplate","j","F","P","type","S","constructor","_featuresResolutions","WeakMap","highlightGraphics","highlightGraphicUpdated","updateHighlightedFeatures","destroyed","updatingHandles","addPromise","_updateHighlightedFeaturesGeometries","catch","initialize","sourceLayer","geometryType","visible","_updateHighlightedFeaturesSymbols","_highlightGeometriesResolution","addHandles","added","onListenerAdd","fetchPopupFeaturesAtLocation","layerView","layer","view","scale","U","sublayers","length","G","capabilities","operations","supportsIdentify","version","_fetchPopupFeaturesUsingQueries","_fetchPopupFeaturesUsingIdentify","clearHighlights","removeAll","renderer","getSymbolAsync","then","visualVariables","find","getSize","shape","style","width","height","Math","max","size","includes","symbol","xoffset","yoffset","supportsQuery","_getTargetResolution","Map","get","set","getObjectId","Array","from","_ref","createQuery","objectIds","keys","outFields","objectIdField","returnGeometry","maxAllowableOffset","outSpatialReference","spatialReference","queryFeatures","Promise","all","features","geometry","_createIdentifyParameters","results","parsedUrl","map","feature","floors","timeExtent","_ref2","sublayer","load","min","allSublayers","reduce","pointerType","createFetchPopupFeaturesQueryGeometry","round","xmin","center","ymin","xmax","ymax","gdbVersion","layerOption","mapExtent","tolerance","_ref3","popupTemplate","Set","collectRequiredFields","fieldsIndex","sort","where","query","supportsOrderBy","orderBy","valueExpression","field","order","orderByFields","arcadeUtils","hasGeometryOperations","R","allSettled","status","value","filter","minScale","maxScale","forEach","popupEnabled","defaultPopupTemplateEnabled","unshift","expressionInfos","isArray","content","some","resolve","any","_ref4","defaultSymbol","getSymbol","constructOnly","prototype","MapServiceLayerViewHelper","collectPopupProviders","isMapServiceLayerView"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/layers/support/MapServiceLayerViewHelper.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import{isSome as r}from\"../../../core/arrayUtils.js\";import s from\"../../../core/Error.js\";import has from\"../../../core/has.js\";import{getOrCreateMapValue as i}from\"../../../core/MapUtils.js\";import{debounce as o,throwIfAborted as a}from\"../../../core/promiseUtils.js\";import{on as n}from\"../../../core/reactiveUtils.js\";import{sqlAnd as l}from\"../../../core/sql.js\";import{getMetersPerUnitForSR as p}from\"../../../core/unitUtils.js\";import{property as c}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/Logger.js\";import{subclass as u}from\"../../../core/accessorSupport/decorators/subclass.js\";import y from\"../../../geometry/Extent.js\";import{getResolutionForScale as h}from\"../../../geometry/support/scaleUtils.js\";import{collectFields as m}from\"../../../layers/support/fieldUtils.js\";import{getLayerFloorFilterClause as d}from\"../../../layers/support/floorFilterUtils.js\";import{calculateTolerance as f}from\"../../../renderers/support/clickToleranceUtils.js\";import{identify as g}from\"../../../rest/identify.js\";import w from\"../../../rest/support/IdentifyParameters.js\";import{loadArcade as b}from\"../../../support/arcadeOnDemand.js\";import v from\"../../../symbols/SimpleMarkerSymbol.js\";import{getRequiredFields as x,getFetchPopupTemplate as j}from\"./popupUtils.js\";let F=null;function P(e,t){return\"tile\"===t.type||\"map-image\"===t.type}let S=class extends t{constructor(e){super(e),this._featuresResolutions=new WeakMap,this.highlightGraphics=null,this.highlightGraphicUpdated=null,this.updateHighlightedFeatures=o((async e=>{this.destroyed||this.updatingHandles.addPromise(this._updateHighlightedFeaturesGeometries(e).catch((()=>{})))}))}initialize(){const e=e=>{for(const t of e){const{sourceLayer:e}=t;null!=e&&\"geometryType\"in e&&\"point\"===e.geometryType&&(t.visible=!1)}this.updatingHandles.addPromise(this._updateHighlightedFeaturesSymbols(e).catch((()=>{}))),this.updateHighlightedFeatures(this._highlightGeometriesResolution)};this.addHandles([n((()=>this.highlightGraphics),\"change\",(t=>e(t.added)),{onListenerAdd:t=>e(t)})])}async fetchPopupFeaturesAtLocation(e,t){const{layerView:{layer:r,view:{scale:i}}}=this;if(!e)throw new s(\"fetchPopupFeatures:invalid-area\",\"Nothing to fetch without area\",{layer:r});const o=U(r.sublayers,i,t);if(!o.length)return[];const a=await G(r,o);if(!((r.capabilities?.operations?.supportsIdentify??!0)&&r.version>=10.5)&&!a)throw new s(\"fetchPopupFeatures:not-supported\",\"query operation is disabled for this service\",{layer:r});return a?this._fetchPopupFeaturesUsingQueries(e,o,t):this._fetchPopupFeaturesUsingIdentify(e,o,t)}clearHighlights(){this.highlightGraphics?.removeAll()}async _updateHighlightedFeaturesSymbols(e){const{layerView:{view:t},highlightGraphics:r,highlightGraphicUpdated:s}=this;if(r&&s)for(const i of e){const e=i.sourceLayer&&\"renderer\"in i.sourceLayer&&i.sourceLayer.renderer;i.sourceLayer&&\"geometryType\"in i.sourceLayer&&\"point\"===i.sourceLayer.geometryType&&e&&\"getSymbolAsync\"in e&&e.getSymbolAsync(i).then((async o=>{o||=new v;let a=null;const n=\"visualVariables\"in e?e.visualVariables?.find((e=>\"size\"===e.type)):void 0;n&&(F||(F=(await import(\"../../../renderers/visualVariables/support/visualVariableUtils.js\")).getSize),a=F(n,i,{view:t.type,scale:t.scale,shape:\"simple-marker\"===o.type?o.style:null})),a||=\"width\"in o&&\"height\"in o&&null!=o.width&&null!=o.height?Math.max(o.width,o.height):\"size\"in o?o.size:16,r.includes(i)&&(i.symbol=new v({style:\"square\",size:a,xoffset:\"xoffset\"in o?o.xoffset:0,yoffset:\"yoffset\"in o?o.yoffset:0}),s(i,\"symbol\"),i.visible=!0)}))}}async _updateHighlightedFeaturesGeometries(e){const{layerView:{layer:t,view:r},highlightGraphics:s,highlightGraphicUpdated:o}=this;if(this._highlightGeometriesResolution=e,!o||!s?.length||!t.capabilities.operations.supportsQuery)return;const a=this._getTargetResolution(e),n=new Map;for(const c of s)if(!this._featuresResolutions.has(c)||this._featuresResolutions.get(c)>a){const e=c.sourceLayer;i(n,e,(()=>new Map)).set(c.getObjectId(),c)}const l=Array.from(n,(([e,t])=>{const s=e.createQuery();return s.objectIds=[...t.keys()],s.outFields=[e.objectIdField],s.returnGeometry=!0,s.maxAllowableOffset=a,s.outSpatialReference=r.spatialReference,e.queryFeatures(s)})),p=await Promise.all(l);if(!this.destroyed)for(const{features:i}of p)for(const e of i){const t=e.sourceLayer,r=n.get(t).get(e.getObjectId());r&&s.includes(r)&&(r.geometry=e.geometry,o(r,\"geometry\"),this._featuresResolutions.set(r,a))}}_getTargetResolution(e){const t=e*p(this.layerView.view.spatialReference),r=t/16;return r<=10?0:e/t*r}async _fetchPopupFeaturesUsingIdentify(e,t,r){const s=await this._createIdentifyParameters(e,t,r);if(null==s)return[];const{results:i}=await g(this.layerView.layer.parsedUrl,s,r);return i.map((e=>e.feature))}async _createIdentifyParameters(e,t,r){const{floors:s,layer:i,timeExtent:o,view:{spatialReference:a,scale:n}}=this.layerView;if(!t.length)return null;await Promise.all(t.map((({sublayer:e})=>e.load(r).catch((()=>{})))));const l=Math.min(has(\"mapservice-popup-identify-max-tolerance\"),i.allSublayers.reduce(((e,t)=>t.renderer?f({renderer:t.renderer,pointerType:r?.pointerType}):e),2)),p=this.createFetchPopupFeaturesQueryGeometry(e,l),c=h(n,a),u=Math.round(p.width/c),m=new y({xmin:p.center.x-c*u,ymin:p.center.y-c*u,xmax:p.center.x+c*u,ymax:p.center.y+c*u,spatialReference:p.spatialReference});return new w({floors:s,gdbVersion:\"gdbVersion\"in i?i.gdbVersion:void 0,geometry:e,height:u,layerOption:\"popup\",mapExtent:m,returnGeometry:!0,spatialReference:a,sublayers:i.sublayers,timeExtent:o,tolerance:l,width:u})}async _fetchPopupFeaturesUsingQueries(e,t,s){const{layerView:{floors:i,timeExtent:o}}=this,n=t.map((async({sublayer:t,popupTemplate:r})=>{if(await t.load(s).catch((()=>{})),t.capabilities&&!t.capabilities.operations.supportsQuery)return[];const n=t.createQuery(),p=f({renderer:t.renderer,pointerType:s?.pointerType}),c=this.createFetchPopupFeaturesQueryGeometry(e,p),u=new Set,[y]=await Promise.all([x(t,r),t.renderer?.collectRequiredFields(u,t.fieldsIndex)]);a(s),m(u,t.fieldsIndex,y);const h=Array.from(u).sort();n.geometry=c,n.outFields=h,n.timeExtent=o;const g=d(i,t);if(n.where=l(n.where,g),t.capabilities?.query.supportsOrderBy&&t.orderBy?.[0]){const e=t.orderBy[0],r=!e.valueExpression&&e.field,s=\"ascending\"===e.order?\"asc\":\"desc\";r&&(n.orderByFields=[`${r} ${s}`])}const w=this._getTargetResolution(c.width/p),b=await _(r);a(s);const v=\"point\"===t.geometryType||b&&b.arcadeUtils.hasGeometryOperations(r);v||(n.maxAllowableOffset=w);let{features:j}=await t.queryFeatures(n,s);const F=v?0:w;j=await R(t,j,s);for(const e of j)this._featuresResolutions.set(e,F);return j}));return(await Promise.allSettled(n)).reduce(((e,t)=>\"fulfilled\"===t.status?[...e,...t.value]:e),[]).filter(r)}};function U(e,t,r){const s=[];if(!e)return s;const i=e=>{const o=0===e.minScale||t<=e.minScale,a=0===e.maxScale||t>=e.maxScale;if(e.visible&&o&&a)if(e.sublayers)e.sublayers.forEach(i);else if(e.popupEnabled){const t=j(e,{...r,defaultPopupTemplateEnabled:!1});null!=t&&s.unshift({sublayer:e,popupTemplate:t})}};return e.map(i),s}function _(e){return e.expressionInfos?.length||Array.isArray(e.content)&&e.content.some((e=>\"expression\"===e.type))?b():Promise.resolve()}async function G(e,t){if(e.capabilities?.operations?.supportsQuery)return!0;try{return await Promise.any(t.map((({sublayer:e})=>e.load().then((()=>e.capabilities.operations.supportsQuery)))))}catch{return!1}}async function R(e,t,r){const s=e.renderer;return s&&\"defaultSymbol\"in s&&!s.defaultSymbol&&(t=s.valueExpression?await Promise.all(t.map((e=>s.getSymbolAsync(e,r).then((t=>t?e:null))))).then((e=>e.filter((e=>null!=e)))):t.filter((e=>null!=s.getSymbol(e)))),t}e([c({constructOnly:!0})],S.prototype,\"createFetchPopupFeaturesQueryGeometry\",void 0),e([c({constructOnly:!0})],S.prototype,\"layerView\",void 0),e([c({constructOnly:!0})],S.prototype,\"highlightGraphics\",void 0),e([c({constructOnly:!0})],S.prototype,\"highlightGraphicUpdated\",void 0),e([c({constructOnly:!0})],S.prototype,\"updatingHandles\",void 0),S=e([u(\"esri.views.layers.support.MapServiceLayerViewHelper\")],S);export{S as MapServiceLayerViewHelper,U as collectPopupProviders,P as isMapServiceLayerView};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}