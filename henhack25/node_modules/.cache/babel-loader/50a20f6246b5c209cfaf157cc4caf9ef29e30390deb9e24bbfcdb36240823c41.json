{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../../../chunks/tslib.es6.js\";\nimport e from \"../../../../../core/Accessor.js\";\nimport { multiplyOpacityToUnitRGBA as a } from \"../../../../../core/colorUtils.js\";\nimport { cyclicalPI as o } from \"../../../../../core/Cyclical.js\";\nimport i from \"../../../../../core/Evented.js\";\nimport \"../../../../../core/has.js\";\nimport { clamp as r, rad2deg as s } from \"../../../../../core/mathUtils.js\";\nimport { destroyMaybe as n } from \"../../../../../core/maybe.js\";\nimport { watch as l, initial as c } from \"../../../../../core/reactiveUtils.js\";\nimport { addFrameTask as d } from \"../../../../../core/scheduling.js\";\nimport { createScreenPointArray as h } from \"../../../../../core/screenUtils.js\";\nimport { property as u } from \"../../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../../core/Logger.js\";\nimport \"../../../../../core/RandomLCG.js\";\nimport { subclass as p } from \"../../../../../core/accessorSupport/decorators/subclass.js\";\nimport { fromRotation as m, fromScaling as g, multiply as f, scale as _, rotate as D } from \"../../../../../core/libs/gl-matrix-2/math/mat4.js\";\nimport { create as S } from \"../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";\nimport { i as v, d as M, l as b, s as j, e as y, g as R } from \"../../../../../chunks/vec32.js\";\nimport { clone as w, fromValues as A } from \"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { fromPositionAndNormal as T, create as I, getNormal as O } from \"../../../../../geometry/support/plane.js\";\nimport { wrap as C, distance2 as E } from \"../../../../../geometry/support/ray.js\";\nimport { sv3d as k, sm4d as F } from \"../../../../../geometry/support/vectorStacks.js\";\nimport { Manipulator3D as P } from \"../../Manipulator3D.js\";\nimport { calculateInputRotationTransform as U } from \"../../manipulatorUtils.js\";\nimport { RenderObject as L } from \"../../RenderObject.js\";\nimport { screenToRenderPlane as x } from \"../dragEventPipeline3D.js\";\nimport { ManipulatorType as N } from \"../ManipulatorType.js\";\nimport { ringIndicatorDelayMs as H, rotateIndicatorDirectionBuffer as G, scaleIndicatorDirectionBuffer as z, rotateIndicatorArrowPlacementPercentage as B, ringThickness as q, dragThresholdPx as J, ringRadius as K, innerIndicatorRadius as Q, outerIndicatorRadius as V, ringHeight as W, rotateIndicatorArrowTipRadius as X, rotateIndicatorArrowTipLength as Y, scaleIndicatorOffset1 as Z, scaleIndicatorOffset2 as $, indicatorThickness as tt, geometrySegments as et, rotateIndicatorArcLength as at, ringResetAnimationSpeedFactor as ot, scaleIndicatorArcLength as it } from \"../manipulations/config.js\";\nimport { CullFaceOptions as rt } from \"../../../webgl-engine/lib/basicInterfaces.js\";\nimport { createExtrudedTriangle as st, transformInPlace as nt, createPathExtrusionGeometry as lt } from \"../../../webgl-engine/lib/GeometryUtil.js\";\nimport { RenderOccludedFlag as ct } from \"../../../webgl-engine/lib/Material.js\";\nimport { ColorMaterial as dt } from \"../../../webgl-engine/materials/ColorMaterial.js\";\nimport { createManipulatorDragEventPipeline as ht } from \"../../../../interactive/dragEventPipeline.js\";\nimport { ManipulatorStateCustomFlags as ut, ManipulatorStateFlags as pt } from \"../../../../interactive/interfaces.js\";\nvar mt;\n!function (t) {\n  t.ScaleIn = ut.Custom2, t.ScaleOut = ut.Custom3, t.RotateLeft = ut.Custom4, t.RotateRight = ut.Custom5, t.Unlocked = ut.Custom7, t.DelayedFocused = ut.Custom8, t.TouchInput = ut.Custom12;\n}(mt || (mt = {}));\nlet gt = class extends e {\n  get angle() {\n    return this.adapter.angle;\n  }\n  get scale() {\n    return this.adapter.scale;\n  }\n  set location(t) {\n    this._ringManipulator.location = t;\n  }\n  set elevationAlignedLocation(t) {\n    this._ringManipulator.elevationAlignedLocation = t;\n  }\n  get grabbing() {\n    return this._ringManipulator.grabbing;\n  }\n  set interactive(t) {\n    this._ringManipulator.interactive = t;\n  }\n  get updating() {\n    return !!this._activeAnimation;\n  }\n  constructor(t) {\n    super(t), this.mode = null, this._scaleRotateDragData = null, this._activeAnimation = null, this._ringIndicatorDelayMs = H, this.events = new i(), this.getFocused = () => this._ringManipulator.focused, this.getScale = () => \"scale\" === this._scaleRotateDragData?.mode ? this.adapter.scale : 1;\n  }\n  initialize() {\n    this._createManipulator(), this._updateDragState(), this._updateManipulatorTransform(), this.addHandles([l(() => {\n      const {\n        adapter: t\n      } = this;\n      return [t.angle, t.scale];\n    }, () => this._updateManipulatorTransform())]);\n  }\n  destroy() {\n    this._activeAnimation?.frameTask.remove(), this._activeAnimation = null, this.tool.manipulators.remove(this._ringManipulator), this._ringManipulator = null;\n  }\n  startAnimation(t) {\n    this.cancelActiveAnimation(), t.start();\n    const e = d({\n      update: ({\n        deltaTime: e\n      }) => {\n        t.update(e) && this.cancelActiveAnimation();\n      }\n    });\n    this._activeAnimation = {\n      ...t,\n      frameTask: e\n    };\n  }\n  cancelActiveAnimation() {\n    this._activeAnimation?.frameTask.remove(), this._activeAnimation = n(this._activeAnimation);\n  }\n  forEachManipulator(t) {\n    t(this._ringManipulator, N.SCALE_ROTATE);\n  }\n  _createManipulator() {\n    const t = this._createRingManipulator();\n    this._ringManipulator = t, this.tool.manipulators.add(t);\n    const e = this.tool.object,\n      a = ht(t, (t, a, i) => {\n        this._scaleRotateDragData = null;\n        const n = this.adapter.startInteraction(),\n          l = {\n            mode: \"none\",\n            origin: w(t.renderLocation),\n            initialAngle: this.adapter.angle,\n            angle: 0,\n            angleDir: 0,\n            scaleDir: 0\n          };\n        this._scaleRotateDragData = l, this._updateDragState();\n        const c = k.get();\n        this.tool.view.renderCoordsHelper.worldUpAtPosition(t.renderLocation, c), a.next(x(this.tool.view, T(t.renderLocation, c, I()))).next(t => {\n          const a = O(t.plane),\n            i = U(t.renderStart, t.renderEnd, l.origin, a),\n            c = o.shortestSignedDiff(l.angle, i);\n          l.angleDir = r(l.angleDir + c, -.3, G), l.angle = i;\n          const d = ft(l, t),\n            h = d - this.adapter.scale;\n          if (l.scaleDir = r(l.scaleDir + h, -.2, z), this._onScaleChanged(), \"none\" === l.mode) {\n            const a = this.mode || _t(t, t.plane, l.origin, this.tool.view.state.camera);\n            if (null != a) {\n              switch (a) {\n                case \"rotate\":\n                  this.tool.events.emit(\"rotate-start\", {\n                    object: e,\n                    angle: 0\n                  }), this.tool.events.emit(\"record-undo\", {\n                    updates: [this.adapter.createUndoRecord()]\n                  });\n                  break;\n                case \"scale\":\n                  this.tool.events.emit(\"scale-start\", {\n                    object: e,\n                    xScale: 1,\n                    yScale: 1\n                  }), this.tool.events.emit(\"record-undo\", {\n                    updates: [this.adapter.createUndoRecord()]\n                  });\n              }\n              l.mode = a;\n            }\n          }\n          switch (l.mode) {\n            case \"rotate\":\n              n.state.angle = l.initialAngle + i;\n              break;\n            case \"scale\":\n              n.state.scale = d, this._onScaleChanged();\n          }\n          switch (this._updateDragState(), this._updateManipulatorTransform(), t.action) {\n            case \"start\":\n            case \"update\":\n              switch (l.mode) {\n                case \"rotate\":\n                  this.tool.events.emit(\"rotate\", {\n                    object: e,\n                    angle: s(l.angle)\n                  });\n                  break;\n                case \"scale\":\n                  this.tool.events.emit(\"scale\", {\n                    object: e,\n                    xScale: d,\n                    yScale: d\n                  });\n              }\n              break;\n            case \"end\":\n              switch (l.mode) {\n                case \"rotate\":\n                  this.tool.events.emit(\"rotate-stop\", {\n                    object: e,\n                    angle: s(l.angle)\n                  });\n                  break;\n                case \"scale\":\n                  this.tool.events.emit(\"scale-stop\", {\n                    object: e,\n                    xScale: d,\n                    yScale: d\n                  });\n              }\n          }\n          return \"end\" === t.action && (this.startAnimation(vt(this, () => this._onScaleChanged())), this._scaleRotateDragData = null, this._updateDragState(), n.done()), t;\n        }), i.next(() => {\n          if (n.cancel(), null != this._scaleRotateDragData) {\n            switch (this._scaleRotateDragData.mode) {\n              case \"none\":\n                break;\n              case \"rotate\":\n                this.tool.events.emit(\"rotate-stop\", {\n                  object: e,\n                  angle: 0\n                });\n                break;\n              case \"scale\":\n                this.tool.events.emit(\"scale-stop\", {\n                  object: e,\n                  xScale: 1,\n                  yScale: 1\n                });\n            }\n            this.startAnimation(vt(this, () => this._onScaleChanged())), this._scaleRotateDragData = null, this._updateDragState();\n          }\n        });\n      });\n    this.addHandles([a, t.events.on(\"focus-changed\", t => {\n      \"focus\" === t.action ? this.startAnimation(Mt(this, () => this._updateDelayedFocusedState(), {\n        delayMs: this._ringIndicatorDelayMs\n      })) : this._updateDelayedFocusedState();\n    }), t.events.on(\"immediate-click\", t => {\n      t.stopPropagation();\n    }), l(() => this.tool.object.visible, t => this._ringManipulator.available = t, c)]);\n  }\n  _onScaleChanged() {\n    this.events.emit(\"scale-changed\"), this._updateManipulatorTransform();\n  }\n  _updateDelayedFocusedState() {\n    this._ringManipulator.updateStateEnabled(mt.DelayedFocused, this.getFocused());\n  }\n  _updateDragState() {\n    if (this._ringManipulator.updateStateEnabled(mt.Unlocked, !(null != this._scaleRotateDragData && \"none\" !== this._scaleRotateDragData?.mode)), null != this._scaleRotateDragData) switch (this._scaleRotateDragData.mode) {\n      case \"rotate\":\n        this._ringManipulator.updateStateEnabled(mt.ScaleIn | mt.ScaleOut, !1), this._ringManipulator.updateStateEnabled(mt.RotateLeft, this._scaleRotateDragData.angleDir < 0), this._ringManipulator.updateStateEnabled(mt.RotateRight, this._scaleRotateDragData.angleDir >= 0);\n        break;\n      case \"scale\":\n        this._ringManipulator.updateStateEnabled(mt.RotateLeft | mt.RotateRight, !1), this._ringManipulator.updateStateEnabled(mt.ScaleIn, this._scaleRotateDragData.scaleDir < 0), this._ringManipulator.updateStateEnabled(mt.ScaleOut, this._scaleRotateDragData.scaleDir >= 0);\n    } else this._ringManipulator.updateStateEnabled(mt.ScaleIn | mt.ScaleOut | mt.RotateLeft | mt.RotateRight, !1);\n  }\n  _updateManipulatorTransform() {\n    const t = m(F.get(), this.adapter.angle, A(0, 0, 1));\n    if (null == t) return;\n    const e = this.getScale(),\n      a = g(F.get(), v(k.get(), e, e, e));\n    this._ringManipulator.modelTransform = f(F.get(), a, t);\n  }\n  _createRingManipulator() {\n    const t = (t, e, a) => {\n        const o = [],\n          i = Math.ceil(et * (e - t) / (2 * Math.PI));\n        for (let r = 0; r < i + 1; r++) {\n          const s = t + r * (e - t) / i;\n          o.push(A(a * Math.cos(s), a * Math.sin(s), 0));\n        }\n        return o;\n      },\n      e = e => t(0, 2 * Math.PI, e),\n      a = t => [[-t / 2, 0], [t / 2, 0], [t / 2, W / 2], [-t / 2, W / 2]],\n      o = this._createMaterial(1),\n      i = (t, e, i = o) => lt(i, a(e), t, [], [], !1),\n      r = e(K),\n      s = i(r, q),\n      n = {\n        left: new Array(),\n        right: new Array()\n      },\n      l = [];\n    for (let w = 0; w < 2; w++) {\n      const e = w * Math.PI - Math.PI / 4,\n        a = Math.PI / 2 - at,\n        r = e + a,\n        s = e + Math.PI / 2 - a,\n        c = t(r, s, Q),\n        d = i(c, tt);\n      l.push(c), l.push(t(r, s, V - q / 2)), n.left.push(d), n.right.push(d.instantiate());\n      for (let t = 0; t < 2; t++) {\n        const e = 0 === t,\n          a = S();\n        if (e) {\n          _(a, a, [1, -1, 1]), D(a, a, -r, [0, 0, 1]);\n          const t = Math.round(B * (c.length - 1));\n          a[12] = c[t][0], a[13] = c[t][1], a[14] = c[t][2];\n        } else {\n          D(a, a, s, [0, 0, 1]);\n          const t = Math.round((1 - B) * (c.length - 1));\n          a[12] = c[t][0], a[13] = c[t][1], a[14] = c[t][2];\n        }\n        const i = st(o, Y, 0, X, W);\n        nt(i, a), (e ? n.left : n.right).push(i);\n      }\n    }\n    const c = [];\n    for (let _ = 0; _ < 2; _++) {\n      const e = _ * Math.PI - Math.PI / 4,\n        a = Math.PI / 2 - it,\n        o = e + a,\n        r = e + Math.PI / 2 - a,\n        s = t(o, r, V);\n      c.push(i(s, tt));\n    }\n    const d = this._createMaterial(.66),\n      h = this._createMaterial(.5),\n      u = this._createMaterial(.33),\n      p = e(K + Z),\n      m = e(K + $),\n      g = i(p, tt, d),\n      f = i(m, tt, u),\n      v = e(K - Z),\n      M = e(K - $),\n      b = i(v, tt, d),\n      j = i(M, tt, u);\n    let y = [new L(s, mt.DelayedFocused), new L(s.instantiate({\n      material: h\n    }), pt.None)];\n    this.mode && \"scale\" !== this.mode || (y = y.concat([...c.map(t => new L(t, mt.DelayedFocused | mt.Unlocked)), new L(g, mt.DelayedFocused | mt.ScaleIn), new L(f, mt.DelayedFocused | mt.ScaleIn), new L(b, mt.DelayedFocused | mt.ScaleOut), new L(j, mt.DelayedFocused | mt.ScaleOut)])), this.mode && \"rotate\" !== this.mode || (y = y.concat([...n.right.map(t => new L(t.instantiate(), mt.DelayedFocused | mt.Unlocked)), ...n.left.map(t => new L(t, mt.DelayedFocused | mt.RotateLeft)), ...n.right.map(t => new L(t, mt.DelayedFocused | mt.RotateRight))]));\n    const R = [r, ...l];\n    return new P({\n      view: this.tool.view,\n      renderObjects: y,\n      autoScaleRenderObjects: !1,\n      worldOriented: !0,\n      radius: q,\n      focusMultiplier: 1,\n      touchMultiplier: 1.5,\n      elevationInfo: this.tool.object.elevationInfo,\n      collisionType: {\n        type: \"ribbon\",\n        paths: R,\n        direction: A(0, 0, 1)\n      }\n    });\n  }\n  _createMaterial(t) {\n    const e = new dt({\n      cullFace: rt.Back,\n      renderOccluded: ct.Transparent,\n      isDecoration: !0\n    });\n    return this.addHandles(l(() => a(this.tool.view.effectiveTheme.accentColor, t), t => e.setParameters({\n      color: t\n    }), c)), e;\n  }\n  get test() {}\n};\nfunction ft(t, e) {\n  const a = M(k.get(), e.renderStart, t.origin),\n    o = M(k.get(), e.renderEnd, t.origin),\n    i = b(a),\n    r = b(o);\n  return 0 === i ? 0 : r / i;\n}\nfunction _t(t, e, a, o) {\n  const {\n      renderStart: i,\n      renderEnd: r\n    } = t,\n    s = Dt(i, o, k.get()),\n    n = Dt(r, o, k.get());\n  if (j(s, n) < J * J) return null;\n  const l = M(k.get(), i, a),\n    c = y(k.get(), l, O(e)),\n    d = i,\n    h = R(k.get(), d, c),\n    u = Dt(a, o, k.get()),\n    p = s,\n    m = Dt(h, o, k.get()),\n    g = M(k.get(), m, p),\n    f = M(k.get(), s, u),\n    _ = C(p, g),\n    D = C(u, f);\n  return E(_, n) < E(D, n) ? \"rotate\" : \"scale\";\n}\nfunction Dt(t, e, a) {\n  return e.projectToScreen(t, bt), v(a, bt[0], bt[1], 0);\n}\nvar St;\nfunction vt(t, e) {\n  let a = null,\n    o = 1;\n  const i = () => o;\n  return {\n    start: () => {\n      o = t.getScale(), a = t.getScale, t.getScale = i, e();\n    },\n    update: t => (o += ((o + 1) / 2 - o) * Math.min(t * ot, 1), e(), Math.abs(o - 1) < .01 ? St.STOP : St.CONTINUE),\n    destroy: () => {\n      a && (t.getScale = a), e();\n    }\n  };\n}\nfunction Mt(t, e, a) {\n  let o = 0,\n    i = null;\n  const r = () => !1;\n  return {\n    start: () => {\n      i = t.getFocused, t.getFocused = r, o = 0, e();\n    },\n    update: t => (o += t, !i?.() || o >= a.delayMs ? St.STOP : St.CONTINUE),\n    destroy: () => {\n      i && (t.getFocused = i), e();\n    }\n  };\n}\nt([u({\n  constructOnly: !0\n})], gt.prototype, \"tool\", void 0), t([u({\n  constructOnly: !0\n})], gt.prototype, \"adapter\", void 0), t([u({\n  constructOnly: !0\n})], gt.prototype, \"sketchOptions\", void 0), t([u()], gt.prototype, \"mode\", void 0), t([u()], gt.prototype, \"_activeAnimation\", void 0), t([u()], gt.prototype, \"updating\", null), gt = t([p(\"esri.views.3d.interactive.editingTools.transform.ScaleRotateTransform\")], gt), function (t) {\n  t[t.CONTINUE = 0] = \"CONTINUE\", t[t.STOP = 1] = \"STOP\";\n}(St || (St = {}));\nconst bt = h();\nexport { gt as ScaleRotateTransform };","map":{"version":3,"names":["_","t","e","multiplyOpacityToUnitRGBA","a","cyclicalPI","o","i","clamp","r","rad2deg","s","destroyMaybe","n","watch","l","initial","c","addFrameTask","d","createScreenPointArray","h","property","u","subclass","p","fromRotation","m","fromScaling","g","multiply","f","scale","rotate","D","create","S","v","M","b","j","y","R","clone","w","fromValues","A","fromPositionAndNormal","T","I","getNormal","O","wrap","C","distance2","E","sv3d","k","sm4d","F","Manipulator3D","P","calculateInputRotationTransform","U","RenderObject","L","screenToRenderPlane","x","ManipulatorType","N","ringIndicatorDelayMs","H","rotateIndicatorDirectionBuffer","G","scaleIndicatorDirectionBuffer","z","rotateIndicatorArrowPlacementPercentage","B","ringThickness","q","dragThresholdPx","J","ringRadius","K","innerIndicatorRadius","Q","outerIndicatorRadius","V","ringHeight","W","rotateIndicatorArrowTipRadius","X","rotateIndicatorArrowTipLength","Y","scaleIndicatorOffset1","Z","scaleIndicatorOffset2","$","indicatorThickness","tt","geometrySegments","et","rotateIndicatorArcLength","at","ringResetAnimationSpeedFactor","ot","scaleIndicatorArcLength","it","CullFaceOptions","rt","createExtrudedTriangle","st","transformInPlace","nt","createPathExtrusionGeometry","lt","RenderOccludedFlag","ct","ColorMaterial","dt","createManipulatorDragEventPipeline","ht","ManipulatorStateCustomFlags","ut","ManipulatorStateFlags","pt","mt","ScaleIn","Custom2","ScaleOut","Custom3","RotateLeft","Custom4","RotateRight","Custom5","Unlocked","Custom7","DelayedFocused","Custom8","TouchInput","Custom12","gt","angle","adapter","location","_ringManipulator","elevationAlignedLocation","grabbing","interactive","updating","_activeAnimation","constructor","mode","_scaleRotateDragData","_ringIndicatorDelayMs","events","getFocused","focused","getScale","initialize","_createManipulator","_updateDragState","_updateManipulatorTransform","addHandles","destroy","frameTask","remove","tool","manipulators","startAnimation","cancelActiveAnimation","start","update","deltaTime","forEachManipulator","SCALE_ROTATE","_createRingManipulator","add","object","startInteraction","origin","renderLocation","initialAngle","angleDir","scaleDir","get","view","renderCoordsHelper","worldUpAtPosition","next","plane","renderStart","renderEnd","shortestSignedDiff","ft","_onScaleChanged","_t","state","camera","emit","updates","createUndoRecord","xScale","yScale","action","vt","done","cancel","on","Mt","_updateDelayedFocusedState","delayMs","stopPropagation","visible","available","updateStateEnabled","modelTransform","Math","ceil","PI","push","cos","sin","_createMaterial","left","Array","right","instantiate","round","length","material","None","concat","map","renderObjects","autoScaleRenderObjects","worldOriented","radius","focusMultiplier","touchMultiplier","elevationInfo","collisionType","type","paths","direction","cullFace","Back","renderOccluded","Transparent","isDecoration","effectiveTheme","accentColor","setParameters","color","test","Dt","projectToScreen","bt","St","min","abs","STOP","CONTINUE","constructOnly","prototype","ScaleRotateTransform"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/ScaleRotateTransform.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../../chunks/tslib.es6.js\";import e from\"../../../../../core/Accessor.js\";import{multiplyOpacityToUnitRGBA as a}from\"../../../../../core/colorUtils.js\";import{cyclicalPI as o}from\"../../../../../core/Cyclical.js\";import i from\"../../../../../core/Evented.js\";import\"../../../../../core/has.js\";import{clamp as r,rad2deg as s}from\"../../../../../core/mathUtils.js\";import{destroyMaybe as n}from\"../../../../../core/maybe.js\";import{watch as l,initial as c}from\"../../../../../core/reactiveUtils.js\";import{addFrameTask as d}from\"../../../../../core/scheduling.js\";import{createScreenPointArray as h}from\"../../../../../core/screenUtils.js\";import{property as u}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/RandomLCG.js\";import{subclass as p}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{fromRotation as m,fromScaling as g,multiply as f,scale as _,rotate as D}from\"../../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as S}from\"../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{i as v,d as M,l as b,s as j,e as y,g as R}from\"../../../../../chunks/vec32.js\";import{clone as w,fromValues as A}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{fromPositionAndNormal as T,create as I,getNormal as O}from\"../../../../../geometry/support/plane.js\";import{wrap as C,distance2 as E}from\"../../../../../geometry/support/ray.js\";import{sv3d as k,sm4d as F}from\"../../../../../geometry/support/vectorStacks.js\";import{Manipulator3D as P}from\"../../Manipulator3D.js\";import{calculateInputRotationTransform as U}from\"../../manipulatorUtils.js\";import{RenderObject as L}from\"../../RenderObject.js\";import{screenToRenderPlane as x}from\"../dragEventPipeline3D.js\";import{ManipulatorType as N}from\"../ManipulatorType.js\";import{ringIndicatorDelayMs as H,rotateIndicatorDirectionBuffer as G,scaleIndicatorDirectionBuffer as z,rotateIndicatorArrowPlacementPercentage as B,ringThickness as q,dragThresholdPx as J,ringRadius as K,innerIndicatorRadius as Q,outerIndicatorRadius as V,ringHeight as W,rotateIndicatorArrowTipRadius as X,rotateIndicatorArrowTipLength as Y,scaleIndicatorOffset1 as Z,scaleIndicatorOffset2 as $,indicatorThickness as tt,geometrySegments as et,rotateIndicatorArcLength as at,ringResetAnimationSpeedFactor as ot,scaleIndicatorArcLength as it}from\"../manipulations/config.js\";import{CullFaceOptions as rt}from\"../../../webgl-engine/lib/basicInterfaces.js\";import{createExtrudedTriangle as st,transformInPlace as nt,createPathExtrusionGeometry as lt}from\"../../../webgl-engine/lib/GeometryUtil.js\";import{RenderOccludedFlag as ct}from\"../../../webgl-engine/lib/Material.js\";import{ColorMaterial as dt}from\"../../../webgl-engine/materials/ColorMaterial.js\";import{createManipulatorDragEventPipeline as ht}from\"../../../../interactive/dragEventPipeline.js\";import{ManipulatorStateCustomFlags as ut,ManipulatorStateFlags as pt}from\"../../../../interactive/interfaces.js\";var mt;!function(t){t.ScaleIn=ut.Custom2,t.ScaleOut=ut.Custom3,t.RotateLeft=ut.Custom4,t.RotateRight=ut.Custom5,t.Unlocked=ut.Custom7,t.DelayedFocused=ut.Custom8,t.TouchInput=ut.Custom12}(mt||(mt={}));let gt=class extends e{get angle(){return this.adapter.angle}get scale(){return this.adapter.scale}set location(t){this._ringManipulator.location=t}set elevationAlignedLocation(t){this._ringManipulator.elevationAlignedLocation=t}get grabbing(){return this._ringManipulator.grabbing}set interactive(t){this._ringManipulator.interactive=t}get updating(){return!!this._activeAnimation}constructor(t){super(t),this.mode=null,this._scaleRotateDragData=null,this._activeAnimation=null,this._ringIndicatorDelayMs=H,this.events=new i,this.getFocused=()=>this._ringManipulator.focused,this.getScale=()=>\"scale\"===this._scaleRotateDragData?.mode?this.adapter.scale:1}initialize(){this._createManipulator(),this._updateDragState(),this._updateManipulatorTransform(),this.addHandles([l((()=>{const{adapter:t}=this;return[t.angle,t.scale]}),(()=>this._updateManipulatorTransform()))])}destroy(){this._activeAnimation?.frameTask.remove(),this._activeAnimation=null,this.tool.manipulators.remove(this._ringManipulator),this._ringManipulator=null}startAnimation(t){this.cancelActiveAnimation(),t.start();const e=d({update:({deltaTime:e})=>{t.update(e)&&this.cancelActiveAnimation()}});this._activeAnimation={...t,frameTask:e}}cancelActiveAnimation(){this._activeAnimation?.frameTask.remove(),this._activeAnimation=n(this._activeAnimation)}forEachManipulator(t){t(this._ringManipulator,N.SCALE_ROTATE)}_createManipulator(){const t=this._createRingManipulator();this._ringManipulator=t,this.tool.manipulators.add(t);const e=this.tool.object,a=ht(t,((t,a,i)=>{this._scaleRotateDragData=null;const n=this.adapter.startInteraction(),l={mode:\"none\",origin:w(t.renderLocation),initialAngle:this.adapter.angle,angle:0,angleDir:0,scaleDir:0};this._scaleRotateDragData=l,this._updateDragState();const c=k.get();this.tool.view.renderCoordsHelper.worldUpAtPosition(t.renderLocation,c),a.next(x(this.tool.view,T(t.renderLocation,c,I()))).next((t=>{const a=O(t.plane),i=U(t.renderStart,t.renderEnd,l.origin,a),c=o.shortestSignedDiff(l.angle,i);l.angleDir=r(l.angleDir+c,-.3,G),l.angle=i;const d=ft(l,t),h=d-this.adapter.scale;if(l.scaleDir=r(l.scaleDir+h,-.2,z),this._onScaleChanged(),\"none\"===l.mode){const a=this.mode||_t(t,t.plane,l.origin,this.tool.view.state.camera);if(null!=a){switch(a){case\"rotate\":this.tool.events.emit(\"rotate-start\",{object:e,angle:0}),this.tool.events.emit(\"record-undo\",{updates:[this.adapter.createUndoRecord()]});break;case\"scale\":this.tool.events.emit(\"scale-start\",{object:e,xScale:1,yScale:1}),this.tool.events.emit(\"record-undo\",{updates:[this.adapter.createUndoRecord()]})}l.mode=a}}switch(l.mode){case\"rotate\":n.state.angle=l.initialAngle+i;break;case\"scale\":n.state.scale=d,this._onScaleChanged()}switch(this._updateDragState(),this._updateManipulatorTransform(),t.action){case\"start\":case\"update\":switch(l.mode){case\"rotate\":this.tool.events.emit(\"rotate\",{object:e,angle:s(l.angle)});break;case\"scale\":this.tool.events.emit(\"scale\",{object:e,xScale:d,yScale:d})}break;case\"end\":switch(l.mode){case\"rotate\":this.tool.events.emit(\"rotate-stop\",{object:e,angle:s(l.angle)});break;case\"scale\":this.tool.events.emit(\"scale-stop\",{object:e,xScale:d,yScale:d})}}return\"end\"===t.action&&(this.startAnimation(vt(this,(()=>this._onScaleChanged()))),this._scaleRotateDragData=null,this._updateDragState(),n.done()),t})),i.next((()=>{if(n.cancel(),null!=this._scaleRotateDragData){switch(this._scaleRotateDragData.mode){case\"none\":break;case\"rotate\":this.tool.events.emit(\"rotate-stop\",{object:e,angle:0});break;case\"scale\":this.tool.events.emit(\"scale-stop\",{object:e,xScale:1,yScale:1})}this.startAnimation(vt(this,(()=>this._onScaleChanged()))),this._scaleRotateDragData=null,this._updateDragState()}}))}));this.addHandles([a,t.events.on(\"focus-changed\",(t=>{\"focus\"===t.action?this.startAnimation(Mt(this,(()=>this._updateDelayedFocusedState()),{delayMs:this._ringIndicatorDelayMs})):this._updateDelayedFocusedState()})),t.events.on(\"immediate-click\",(t=>{t.stopPropagation()})),l((()=>this.tool.object.visible),(t=>this._ringManipulator.available=t),c)])}_onScaleChanged(){this.events.emit(\"scale-changed\"),this._updateManipulatorTransform()}_updateDelayedFocusedState(){this._ringManipulator.updateStateEnabled(mt.DelayedFocused,this.getFocused())}_updateDragState(){if(this._ringManipulator.updateStateEnabled(mt.Unlocked,!(null!=this._scaleRotateDragData&&\"none\"!==this._scaleRotateDragData?.mode)),null!=this._scaleRotateDragData)switch(this._scaleRotateDragData.mode){case\"rotate\":this._ringManipulator.updateStateEnabled(mt.ScaleIn|mt.ScaleOut,!1),this._ringManipulator.updateStateEnabled(mt.RotateLeft,this._scaleRotateDragData.angleDir<0),this._ringManipulator.updateStateEnabled(mt.RotateRight,this._scaleRotateDragData.angleDir>=0);break;case\"scale\":this._ringManipulator.updateStateEnabled(mt.RotateLeft|mt.RotateRight,!1),this._ringManipulator.updateStateEnabled(mt.ScaleIn,this._scaleRotateDragData.scaleDir<0),this._ringManipulator.updateStateEnabled(mt.ScaleOut,this._scaleRotateDragData.scaleDir>=0)}else this._ringManipulator.updateStateEnabled(mt.ScaleIn|mt.ScaleOut|mt.RotateLeft|mt.RotateRight,!1)}_updateManipulatorTransform(){const t=m(F.get(),this.adapter.angle,A(0,0,1));if(null==t)return;const e=this.getScale(),a=g(F.get(),v(k.get(),e,e,e));this._ringManipulator.modelTransform=f(F.get(),a,t)}_createRingManipulator(){const t=(t,e,a)=>{const o=[],i=Math.ceil(et*(e-t)/(2*Math.PI));for(let r=0;r<i+1;r++){const s=t+r*(e-t)/i;o.push(A(a*Math.cos(s),a*Math.sin(s),0))}return o},e=e=>t(0,2*Math.PI,e),a=t=>[[-t/2,0],[t/2,0],[t/2,W/2],[-t/2,W/2]],o=this._createMaterial(1),i=(t,e,i=o)=>lt(i,a(e),t,[],[],!1),r=e(K),s=i(r,q),n={left:new Array,right:new Array},l=[];for(let w=0;w<2;w++){const e=w*Math.PI-Math.PI/4,a=Math.PI/2-at,r=e+a,s=e+Math.PI/2-a,c=t(r,s,Q),d=i(c,tt);l.push(c),l.push(t(r,s,V-q/2)),n.left.push(d),n.right.push(d.instantiate());for(let t=0;t<2;t++){const e=0===t,a=S();if(e){_(a,a,[1,-1,1]),D(a,a,-r,[0,0,1]);const t=Math.round(B*(c.length-1));a[12]=c[t][0],a[13]=c[t][1],a[14]=c[t][2]}else{D(a,a,s,[0,0,1]);const t=Math.round((1-B)*(c.length-1));a[12]=c[t][0],a[13]=c[t][1],a[14]=c[t][2]}const i=st(o,Y,0,X,W);nt(i,a),(e?n.left:n.right).push(i)}}const c=[];for(let _=0;_<2;_++){const e=_*Math.PI-Math.PI/4,a=Math.PI/2-it,o=e+a,r=e+Math.PI/2-a,s=t(o,r,V);c.push(i(s,tt))}const d=this._createMaterial(.66),h=this._createMaterial(.5),u=this._createMaterial(.33),p=e(K+Z),m=e(K+$),g=i(p,tt,d),f=i(m,tt,u),v=e(K-Z),M=e(K-$),b=i(v,tt,d),j=i(M,tt,u);let y=[new L(s,mt.DelayedFocused),new L(s.instantiate({material:h}),pt.None)];this.mode&&\"scale\"!==this.mode||(y=y.concat([...c.map((t=>new L(t,mt.DelayedFocused|mt.Unlocked))),new L(g,mt.DelayedFocused|mt.ScaleIn),new L(f,mt.DelayedFocused|mt.ScaleIn),new L(b,mt.DelayedFocused|mt.ScaleOut),new L(j,mt.DelayedFocused|mt.ScaleOut)])),this.mode&&\"rotate\"!==this.mode||(y=y.concat([...n.right.map((t=>new L(t.instantiate(),mt.DelayedFocused|mt.Unlocked))),...n.left.map((t=>new L(t,mt.DelayedFocused|mt.RotateLeft))),...n.right.map((t=>new L(t,mt.DelayedFocused|mt.RotateRight)))]));const R=[r,...l];return new P({view:this.tool.view,renderObjects:y,autoScaleRenderObjects:!1,worldOriented:!0,radius:q,focusMultiplier:1,touchMultiplier:1.5,elevationInfo:this.tool.object.elevationInfo,collisionType:{type:\"ribbon\",paths:R,direction:A(0,0,1)}})}_createMaterial(t){const e=new dt({cullFace:rt.Back,renderOccluded:ct.Transparent,isDecoration:!0});return this.addHandles(l((()=>a(this.tool.view.effectiveTheme.accentColor,t)),(t=>e.setParameters({color:t})),c)),e}get test(){}};function ft(t,e){const a=M(k.get(),e.renderStart,t.origin),o=M(k.get(),e.renderEnd,t.origin),i=b(a),r=b(o);return 0===i?0:r/i}function _t(t,e,a,o){const{renderStart:i,renderEnd:r}=t,s=Dt(i,o,k.get()),n=Dt(r,o,k.get());if(j(s,n)<J*J)return null;const l=M(k.get(),i,a),c=y(k.get(),l,O(e)),d=i,h=R(k.get(),d,c),u=Dt(a,o,k.get()),p=s,m=Dt(h,o,k.get()),g=M(k.get(),m,p),f=M(k.get(),s,u),_=C(p,g),D=C(u,f);return E(_,n)<E(D,n)?\"rotate\":\"scale\"}function Dt(t,e,a){return e.projectToScreen(t,bt),v(a,bt[0],bt[1],0)}var St;function vt(t,e){let a=null,o=1;const i=()=>o;return{start:()=>{o=t.getScale(),a=t.getScale,t.getScale=i,e()},update:t=>(o+=((o+1)/2-o)*Math.min(t*ot,1),e(),Math.abs(o-1)<.01?St.STOP:St.CONTINUE),destroy:()=>{a&&(t.getScale=a),e()}}}function Mt(t,e,a){let o=0,i=null;const r=()=>!1;return{start:()=>{i=t.getFocused,t.getFocused=r,o=0,e()},update:t=>(o+=t,!i?.()||o>=a.delayMs?St.STOP:St.CONTINUE),destroy:()=>{i&&(t.getFocused=i),e()}}}t([u({constructOnly:!0})],gt.prototype,\"tool\",void 0),t([u({constructOnly:!0})],gt.prototype,\"adapter\",void 0),t([u({constructOnly:!0})],gt.prototype,\"sketchOptions\",void 0),t([u()],gt.prototype,\"mode\",void 0),t([u()],gt.prototype,\"_activeAnimation\",void 0),t([u()],gt.prototype,\"updating\",null),gt=t([p(\"esri.views.3d.interactive.editingTools.transform.ScaleRotateTransform\")],gt),function(t){t[t.CONTINUE=0]=\"CONTINUE\",t[t.STOP=1]=\"STOP\"}(St||(St={}));const bt=h();export{gt as ScaleRotateTransform};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAC,QAAK,oCAAoC;AAAC,OAAOC,CAAC,MAAK,iCAAiC;AAAC,SAAOC,yBAAyB,IAAIC,CAAC,QAAK,mCAAmC;AAAC,SAAOC,UAAU,IAAIC,CAAC,QAAK,iCAAiC;AAAC,OAAOC,CAAC,MAAK,gCAAgC;AAAC,OAAM,4BAA4B;AAAC,SAAOC,KAAK,IAAIC,CAAC,EAACC,OAAO,IAAIC,CAAC,QAAK,kCAAkC;AAAC,SAAOC,YAAY,IAAIC,CAAC,QAAK,8BAA8B;AAAC,SAAOC,KAAK,IAAIC,CAAC,EAACC,OAAO,IAAIC,CAAC,QAAK,sCAAsC;AAAC,SAAOC,YAAY,IAAIC,CAAC,QAAK,mCAAmC;AAAC,SAAOC,sBAAsB,IAAIC,CAAC,QAAK,oCAAoC;AAAC,SAAOC,QAAQ,IAAIC,CAAC,QAAK,4DAA4D;AAAC,OAAM,+BAA+B;AAAC,OAAM,kCAAkC;AAAC,SAAOC,QAAQ,IAAIC,CAAC,QAAK,4DAA4D;AAAC,SAAOC,YAAY,IAAIC,CAAC,EAACC,WAAW,IAAIC,CAAC,EAACC,QAAQ,IAAIC,CAAC,EAACC,KAAK,IAAIhC,CAAC,EAACiC,MAAM,IAAIC,CAAC,QAAK,mDAAmD;AAAC,SAAOC,MAAM,IAAIC,CAAC,QAAK,2DAA2D;AAAC,SAAO7B,CAAC,IAAI8B,CAAC,EAAClB,CAAC,IAAImB,CAAC,EAACvB,CAAC,IAAIwB,CAAC,EAAC5B,CAAC,IAAI6B,CAAC,EAACtC,CAAC,IAAIuC,CAAC,EAACZ,CAAC,IAAIa,CAAC,QAAK,gCAAgC;AAAC,SAAOC,KAAK,IAAIC,CAAC,EAACC,UAAU,IAAIC,CAAC,QAAK,2DAA2D;AAAC,SAAOC,qBAAqB,IAAIC,CAAC,EAACb,MAAM,IAAIc,CAAC,EAACC,SAAS,IAAIC,CAAC,QAAK,0CAA0C;AAAC,SAAOC,IAAI,IAAIC,CAAC,EAACC,SAAS,IAAIC,CAAC,QAAK,wCAAwC;AAAC,SAAOC,IAAI,IAAIC,CAAC,EAACC,IAAI,IAAIC,CAAC,QAAK,iDAAiD;AAAC,SAAOC,aAAa,IAAIC,CAAC,QAAK,wBAAwB;AAAC,SAAOC,+BAA+B,IAAIC,CAAC,QAAK,2BAA2B;AAAC,SAAOC,YAAY,IAAIC,CAAC,QAAK,uBAAuB;AAAC,SAAOC,mBAAmB,IAAIC,CAAC,QAAK,2BAA2B;AAAC,SAAOC,eAAe,IAAIC,CAAC,QAAK,uBAAuB;AAAC,SAAOC,oBAAoB,IAAIC,CAAC,EAACC,8BAA8B,IAAIC,CAAC,EAACC,6BAA6B,IAAIC,CAAC,EAACC,uCAAuC,IAAIC,CAAC,EAACC,aAAa,IAAIC,CAAC,EAACC,eAAe,IAAIC,CAAC,EAACC,UAAU,IAAIC,CAAC,EAACC,oBAAoB,IAAIC,CAAC,EAACC,oBAAoB,IAAIC,CAAC,EAACC,UAAU,IAAIC,CAAC,EAACC,6BAA6B,IAAIC,CAAC,EAACC,6BAA6B,IAAIC,CAAC,EAACC,qBAAqB,IAAIC,CAAC,EAACC,qBAAqB,IAAIC,CAAC,EAACC,kBAAkB,IAAIC,EAAE,EAACC,gBAAgB,IAAIC,EAAE,EAACC,wBAAwB,IAAIC,EAAE,EAACC,6BAA6B,IAAIC,EAAE,EAACC,uBAAuB,IAAIC,EAAE,QAAK,4BAA4B;AAAC,SAAOC,eAAe,IAAIC,EAAE,QAAK,8CAA8C;AAAC,SAAOC,sBAAsB,IAAIC,EAAE,EAACC,gBAAgB,IAAIC,EAAE,EAACC,2BAA2B,IAAIC,EAAE,QAAK,2CAA2C;AAAC,SAAOC,kBAAkB,IAAIC,EAAE,QAAK,uCAAuC;AAAC,SAAOC,aAAa,IAAIC,EAAE,QAAK,kDAAkD;AAAC,SAAOC,kCAAkC,IAAIC,EAAE,QAAK,8CAA8C;AAAC,SAAOC,2BAA2B,IAAIC,EAAE,EAACC,qBAAqB,IAAIC,EAAE,QAAK,uCAAuC;AAAC,IAAIC,EAAE;AAAC,CAAC,UAAS7H,CAAC,EAAC;EAACA,CAAC,CAAC8H,OAAO,GAACJ,EAAE,CAACK,OAAO,EAAC/H,CAAC,CAACgI,QAAQ,GAACN,EAAE,CAACO,OAAO,EAACjI,CAAC,CAACkI,UAAU,GAACR,EAAE,CAACS,OAAO,EAACnI,CAAC,CAACoI,WAAW,GAACV,EAAE,CAACW,OAAO,EAACrI,CAAC,CAACsI,QAAQ,GAACZ,EAAE,CAACa,OAAO,EAACvI,CAAC,CAACwI,cAAc,GAACd,EAAE,CAACe,OAAO,EAACzI,CAAC,CAAC0I,UAAU,GAAChB,EAAE,CAACiB,QAAQ;AAAA,CAAC,CAACd,EAAE,KAAGA,EAAE,GAAC,CAAC,CAAC,CAAC,CAAC;AAAC,IAAIe,EAAE,GAAC,cAAc3I,CAAC;EAAC,IAAI4I,KAAKA,CAAA,EAAE;IAAC,OAAO,IAAI,CAACC,OAAO,CAACD,KAAK;EAAA;EAAC,IAAI9G,KAAKA,CAAA,EAAE;IAAC,OAAO,IAAI,CAAC+G,OAAO,CAAC/G,KAAK;EAAA;EAAC,IAAIgH,QAAQA,CAAC/I,CAAC,EAAC;IAAC,IAAI,CAACgJ,gBAAgB,CAACD,QAAQ,GAAC/I,CAAC;EAAA;EAAC,IAAIiJ,wBAAwBA,CAACjJ,CAAC,EAAC;IAAC,IAAI,CAACgJ,gBAAgB,CAACC,wBAAwB,GAACjJ,CAAC;EAAA;EAAC,IAAIkJ,QAAQA,CAAA,EAAE;IAAC,OAAO,IAAI,CAACF,gBAAgB,CAACE,QAAQ;EAAA;EAAC,IAAIC,WAAWA,CAACnJ,CAAC,EAAC;IAAC,IAAI,CAACgJ,gBAAgB,CAACG,WAAW,GAACnJ,CAAC;EAAA;EAAC,IAAIoJ,QAAQA,CAAA,EAAE;IAAC,OAAM,CAAC,CAAC,IAAI,CAACC,gBAAgB;EAAA;EAACC,WAAWA,CAACtJ,CAAC,EAAC;IAAC,KAAK,CAACA,CAAC,CAAC,EAAC,IAAI,CAACuJ,IAAI,GAAC,IAAI,EAAC,IAAI,CAACC,oBAAoB,GAAC,IAAI,EAAC,IAAI,CAACH,gBAAgB,GAAC,IAAI,EAAC,IAAI,CAACI,qBAAqB,GAACnF,CAAC,EAAC,IAAI,CAACoF,MAAM,GAAC,IAAIpJ,CAAC,CAAD,CAAC,EAAC,IAAI,CAACqJ,UAAU,GAAC,MAAI,IAAI,CAACX,gBAAgB,CAACY,OAAO,EAAC,IAAI,CAACC,QAAQ,GAAC,MAAI,OAAO,KAAG,IAAI,CAACL,oBAAoB,EAAED,IAAI,GAAC,IAAI,CAACT,OAAO,CAAC/G,KAAK,GAAC,CAAC;EAAA;EAAC+H,UAAUA,CAAA,EAAE;IAAC,IAAI,CAACC,kBAAkB,CAAC,CAAC,EAAC,IAAI,CAACC,gBAAgB,CAAC,CAAC,EAAC,IAAI,CAACC,2BAA2B,CAAC,CAAC,EAAC,IAAI,CAACC,UAAU,CAAC,CAACpJ,CAAC,CAAE,MAAI;MAAC,MAAK;QAACgI,OAAO,EAAC9I;MAAC,CAAC,GAAC,IAAI;MAAC,OAAM,CAACA,CAAC,CAAC6I,KAAK,EAAC7I,CAAC,CAAC+B,KAAK,CAAC;IAAA,CAAC,EAAG,MAAI,IAAI,CAACkI,2BAA2B,CAAC,CAAE,CAAC,CAAC,CAAC;EAAA;EAACE,OAAOA,CAAA,EAAE;IAAC,IAAI,CAACd,gBAAgB,EAAEe,SAAS,CAACC,MAAM,CAAC,CAAC,EAAC,IAAI,CAAChB,gBAAgB,GAAC,IAAI,EAAC,IAAI,CAACiB,IAAI,CAACC,YAAY,CAACF,MAAM,CAAC,IAAI,CAACrB,gBAAgB,CAAC,EAAC,IAAI,CAACA,gBAAgB,GAAC,IAAI;EAAA;EAACwB,cAAcA,CAACxK,CAAC,EAAC;IAAC,IAAI,CAACyK,qBAAqB,CAAC,CAAC,EAACzK,CAAC,CAAC0K,KAAK,CAAC,CAAC;IAAC,MAAMzK,CAAC,GAACiB,CAAC,CAAC;MAACyJ,MAAM,EAACA,CAAC;QAACC,SAAS,EAAC3K;MAAC,CAAC,KAAG;QAACD,CAAC,CAAC2K,MAAM,CAAC1K,CAAC,CAAC,IAAE,IAAI,CAACwK,qBAAqB,CAAC,CAAC;MAAA;IAAC,CAAC,CAAC;IAAC,IAAI,CAACpB,gBAAgB,GAAC;MAAC,GAAGrJ,CAAC;MAACoK,SAAS,EAACnK;IAAC,CAAC;EAAA;EAACwK,qBAAqBA,CAAA,EAAE;IAAC,IAAI,CAACpB,gBAAgB,EAAEe,SAAS,CAACC,MAAM,CAAC,CAAC,EAAC,IAAI,CAAChB,gBAAgB,GAACzI,CAAC,CAAC,IAAI,CAACyI,gBAAgB,CAAC;EAAA;EAACwB,kBAAkBA,CAAC7K,CAAC,EAAC;IAACA,CAAC,CAAC,IAAI,CAACgJ,gBAAgB,EAAC5E,CAAC,CAAC0G,YAAY,CAAC;EAAA;EAACf,kBAAkBA,CAAA,EAAE;IAAC,MAAM/J,CAAC,GAAC,IAAI,CAAC+K,sBAAsB,CAAC,CAAC;IAAC,IAAI,CAAC/B,gBAAgB,GAAChJ,CAAC,EAAC,IAAI,CAACsK,IAAI,CAACC,YAAY,CAACS,GAAG,CAAChL,CAAC,CAAC;IAAC,MAAMC,CAAC,GAAC,IAAI,CAACqK,IAAI,CAACW,MAAM;MAAC9K,CAAC,GAACqH,EAAE,CAACxH,CAAC,EAAE,CAACA,CAAC,EAACG,CAAC,EAACG,CAAC,KAAG;QAAC,IAAI,CAACkJ,oBAAoB,GAAC,IAAI;QAAC,MAAM5I,CAAC,GAAC,IAAI,CAACkI,OAAO,CAACoC,gBAAgB,CAAC,CAAC;UAACpK,CAAC,GAAC;YAACyI,IAAI,EAAC,MAAM;YAAC4B,MAAM,EAACxI,CAAC,CAAC3C,CAAC,CAACoL,cAAc,CAAC;YAACC,YAAY,EAAC,IAAI,CAACvC,OAAO,CAACD,KAAK;YAACA,KAAK,EAAC,CAAC;YAACyC,QAAQ,EAAC,CAAC;YAACC,QAAQ,EAAC;UAAC,CAAC;QAAC,IAAI,CAAC/B,oBAAoB,GAAC1I,CAAC,EAAC,IAAI,CAACkJ,gBAAgB,CAAC,CAAC;QAAC,MAAMhJ,CAAC,GAACwC,CAAC,CAACgI,GAAG,CAAC,CAAC;QAAC,IAAI,CAAClB,IAAI,CAACmB,IAAI,CAACC,kBAAkB,CAACC,iBAAiB,CAAC3L,CAAC,CAACoL,cAAc,EAACpK,CAAC,CAAC,EAACb,CAAC,CAACyL,IAAI,CAAC1H,CAAC,CAAC,IAAI,CAACoG,IAAI,CAACmB,IAAI,EAAC1I,CAAC,CAAC/C,CAAC,CAACoL,cAAc,EAACpK,CAAC,EAACgC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC4I,IAAI,CAAE5L,CAAC,IAAE;UAAC,MAAMG,CAAC,GAAC+C,CAAC,CAAClD,CAAC,CAAC6L,KAAK,CAAC;YAACvL,CAAC,GAACwD,CAAC,CAAC9D,CAAC,CAAC8L,WAAW,EAAC9L,CAAC,CAAC+L,SAAS,EAACjL,CAAC,CAACqK,MAAM,EAAChL,CAAC,CAAC;YAACa,CAAC,GAACX,CAAC,CAAC2L,kBAAkB,CAAClL,CAAC,CAAC+H,KAAK,EAACvI,CAAC,CAAC;UAACQ,CAAC,CAACwK,QAAQ,GAAC9K,CAAC,CAACM,CAAC,CAACwK,QAAQ,GAACtK,CAAC,EAAC,CAAC,EAAE,EAACwD,CAAC,CAAC,EAAC1D,CAAC,CAAC+H,KAAK,GAACvI,CAAC;UAAC,MAAMY,CAAC,GAAC+K,EAAE,CAACnL,CAAC,EAACd,CAAC,CAAC;YAACoB,CAAC,GAACF,CAAC,GAAC,IAAI,CAAC4H,OAAO,CAAC/G,KAAK;UAAC,IAAGjB,CAAC,CAACyK,QAAQ,GAAC/K,CAAC,CAACM,CAAC,CAACyK,QAAQ,GAACnK,CAAC,EAAC,CAAC,EAAE,EAACsD,CAAC,CAAC,EAAC,IAAI,CAACwH,eAAe,CAAC,CAAC,EAAC,MAAM,KAAGpL,CAAC,CAACyI,IAAI,EAAC;YAAC,MAAMpJ,CAAC,GAAC,IAAI,CAACoJ,IAAI,IAAE4C,EAAE,CAACnM,CAAC,EAACA,CAAC,CAAC6L,KAAK,EAAC/K,CAAC,CAACqK,MAAM,EAAC,IAAI,CAACb,IAAI,CAACmB,IAAI,CAACW,KAAK,CAACC,MAAM,CAAC;YAAC,IAAG,IAAI,IAAElM,CAAC,EAAC;cAAC,QAAOA,CAAC;gBAAE,KAAI,QAAQ;kBAAC,IAAI,CAACmK,IAAI,CAACZ,MAAM,CAAC4C,IAAI,CAAC,cAAc,EAAC;oBAACrB,MAAM,EAAChL,CAAC;oBAAC4I,KAAK,EAAC;kBAAC,CAAC,CAAC,EAAC,IAAI,CAACyB,IAAI,CAACZ,MAAM,CAAC4C,IAAI,CAAC,aAAa,EAAC;oBAACC,OAAO,EAAC,CAAC,IAAI,CAACzD,OAAO,CAAC0D,gBAAgB,CAAC,CAAC;kBAAC,CAAC,CAAC;kBAAC;gBAAM,KAAI,OAAO;kBAAC,IAAI,CAAClC,IAAI,CAACZ,MAAM,CAAC4C,IAAI,CAAC,aAAa,EAAC;oBAACrB,MAAM,EAAChL,CAAC;oBAACwM,MAAM,EAAC,CAAC;oBAACC,MAAM,EAAC;kBAAC,CAAC,CAAC,EAAC,IAAI,CAACpC,IAAI,CAACZ,MAAM,CAAC4C,IAAI,CAAC,aAAa,EAAC;oBAACC,OAAO,EAAC,CAAC,IAAI,CAACzD,OAAO,CAAC0D,gBAAgB,CAAC,CAAC;kBAAC,CAAC,CAAC;cAAA;cAAC1L,CAAC,CAACyI,IAAI,GAACpJ,CAAC;YAAA;UAAC;UAAC,QAAOW,CAAC,CAACyI,IAAI;YAAE,KAAI,QAAQ;cAAC3I,CAAC,CAACwL,KAAK,CAACvD,KAAK,GAAC/H,CAAC,CAACuK,YAAY,GAAC/K,CAAC;cAAC;YAAM,KAAI,OAAO;cAACM,CAAC,CAACwL,KAAK,CAACrK,KAAK,GAACb,CAAC,EAAC,IAAI,CAACgL,eAAe,CAAC,CAAC;UAAA;UAAC,QAAO,IAAI,CAAClC,gBAAgB,CAAC,CAAC,EAAC,IAAI,CAACC,2BAA2B,CAAC,CAAC,EAACjK,CAAC,CAAC2M,MAAM;YAAE,KAAI,OAAO;YAAC,KAAI,QAAQ;cAAC,QAAO7L,CAAC,CAACyI,IAAI;gBAAE,KAAI,QAAQ;kBAAC,IAAI,CAACe,IAAI,CAACZ,MAAM,CAAC4C,IAAI,CAAC,QAAQ,EAAC;oBAACrB,MAAM,EAAChL,CAAC;oBAAC4I,KAAK,EAACnI,CAAC,CAACI,CAAC,CAAC+H,KAAK;kBAAC,CAAC,CAAC;kBAAC;gBAAM,KAAI,OAAO;kBAAC,IAAI,CAACyB,IAAI,CAACZ,MAAM,CAAC4C,IAAI,CAAC,OAAO,EAAC;oBAACrB,MAAM,EAAChL,CAAC;oBAACwM,MAAM,EAACvL,CAAC;oBAACwL,MAAM,EAACxL;kBAAC,CAAC,CAAC;cAAA;cAAC;YAAM,KAAI,KAAK;cAAC,QAAOJ,CAAC,CAACyI,IAAI;gBAAE,KAAI,QAAQ;kBAAC,IAAI,CAACe,IAAI,CAACZ,MAAM,CAAC4C,IAAI,CAAC,aAAa,EAAC;oBAACrB,MAAM,EAAChL,CAAC;oBAAC4I,KAAK,EAACnI,CAAC,CAACI,CAAC,CAAC+H,KAAK;kBAAC,CAAC,CAAC;kBAAC;gBAAM,KAAI,OAAO;kBAAC,IAAI,CAACyB,IAAI,CAACZ,MAAM,CAAC4C,IAAI,CAAC,YAAY,EAAC;oBAACrB,MAAM,EAAChL,CAAC;oBAACwM,MAAM,EAACvL,CAAC;oBAACwL,MAAM,EAACxL;kBAAC,CAAC,CAAC;cAAA;UAAC;UAAC,OAAM,KAAK,KAAGlB,CAAC,CAAC2M,MAAM,KAAG,IAAI,CAACnC,cAAc,CAACoC,EAAE,CAAC,IAAI,EAAE,MAAI,IAAI,CAACV,eAAe,CAAC,CAAE,CAAC,CAAC,EAAC,IAAI,CAAC1C,oBAAoB,GAAC,IAAI,EAAC,IAAI,CAACQ,gBAAgB,CAAC,CAAC,EAACpJ,CAAC,CAACiM,IAAI,CAAC,CAAC,CAAC,EAAC7M,CAAC;QAAA,CAAE,CAAC,EAACM,CAAC,CAACsL,IAAI,CAAE,MAAI;UAAC,IAAGhL,CAAC,CAACkM,MAAM,CAAC,CAAC,EAAC,IAAI,IAAE,IAAI,CAACtD,oBAAoB,EAAC;YAAC,QAAO,IAAI,CAACA,oBAAoB,CAACD,IAAI;cAAE,KAAI,MAAM;gBAAC;cAAM,KAAI,QAAQ;gBAAC,IAAI,CAACe,IAAI,CAACZ,MAAM,CAAC4C,IAAI,CAAC,aAAa,EAAC;kBAACrB,MAAM,EAAChL,CAAC;kBAAC4I,KAAK,EAAC;gBAAC,CAAC,CAAC;gBAAC;cAAM,KAAI,OAAO;gBAAC,IAAI,CAACyB,IAAI,CAACZ,MAAM,CAAC4C,IAAI,CAAC,YAAY,EAAC;kBAACrB,MAAM,EAAChL,CAAC;kBAACwM,MAAM,EAAC,CAAC;kBAACC,MAAM,EAAC;gBAAC,CAAC,CAAC;YAAA;YAAC,IAAI,CAAClC,cAAc,CAACoC,EAAE,CAAC,IAAI,EAAE,MAAI,IAAI,CAACV,eAAe,CAAC,CAAE,CAAC,CAAC,EAAC,IAAI,CAAC1C,oBAAoB,GAAC,IAAI,EAAC,IAAI,CAACQ,gBAAgB,CAAC,CAAC;UAAA;QAAC,CAAE,CAAC;MAAA,CAAE,CAAC;IAAC,IAAI,CAACE,UAAU,CAAC,CAAC/J,CAAC,EAACH,CAAC,CAAC0J,MAAM,CAACqD,EAAE,CAAC,eAAe,EAAE/M,CAAC,IAAE;MAAC,OAAO,KAAGA,CAAC,CAAC2M,MAAM,GAAC,IAAI,CAACnC,cAAc,CAACwC,EAAE,CAAC,IAAI,EAAE,MAAI,IAAI,CAACC,0BAA0B,CAAC,CAAC,EAAE;QAACC,OAAO,EAAC,IAAI,CAACzD;MAAqB,CAAC,CAAC,CAAC,GAAC,IAAI,CAACwD,0BAA0B,CAAC,CAAC;IAAA,CAAE,CAAC,EAACjN,CAAC,CAAC0J,MAAM,CAACqD,EAAE,CAAC,iBAAiB,EAAE/M,CAAC,IAAE;MAACA,CAAC,CAACmN,eAAe,CAAC,CAAC;IAAA,CAAE,CAAC,EAACrM,CAAC,CAAE,MAAI,IAAI,CAACwJ,IAAI,CAACW,MAAM,CAACmC,OAAO,EAAGpN,CAAC,IAAE,IAAI,CAACgJ,gBAAgB,CAACqE,SAAS,GAACrN,CAAC,EAAEgB,CAAC,CAAC,CAAC,CAAC;EAAA;EAACkL,eAAeA,CAAA,EAAE;IAAC,IAAI,CAACxC,MAAM,CAAC4C,IAAI,CAAC,eAAe,CAAC,EAAC,IAAI,CAACrC,2BAA2B,CAAC,CAAC;EAAA;EAACgD,0BAA0BA,CAAA,EAAE;IAAC,IAAI,CAACjE,gBAAgB,CAACsE,kBAAkB,CAACzF,EAAE,CAACW,cAAc,EAAC,IAAI,CAACmB,UAAU,CAAC,CAAC,CAAC;EAAA;EAACK,gBAAgBA,CAAA,EAAE;IAAC,IAAG,IAAI,CAAChB,gBAAgB,CAACsE,kBAAkB,CAACzF,EAAE,CAACS,QAAQ,EAAC,EAAE,IAAI,IAAE,IAAI,CAACkB,oBAAoB,IAAE,MAAM,KAAG,IAAI,CAACA,oBAAoB,EAAED,IAAI,CAAC,CAAC,EAAC,IAAI,IAAE,IAAI,CAACC,oBAAoB,EAAC,QAAO,IAAI,CAACA,oBAAoB,CAACD,IAAI;MAAE,KAAI,QAAQ;QAAC,IAAI,CAACP,gBAAgB,CAACsE,kBAAkB,CAACzF,EAAE,CAACC,OAAO,GAACD,EAAE,CAACG,QAAQ,EAAC,CAAC,CAAC,CAAC,EAAC,IAAI,CAACgB,gBAAgB,CAACsE,kBAAkB,CAACzF,EAAE,CAACK,UAAU,EAAC,IAAI,CAACsB,oBAAoB,CAAC8B,QAAQ,GAAC,CAAC,CAAC,EAAC,IAAI,CAACtC,gBAAgB,CAACsE,kBAAkB,CAACzF,EAAE,CAACO,WAAW,EAAC,IAAI,CAACoB,oBAAoB,CAAC8B,QAAQ,IAAE,CAAC,CAAC;QAAC;MAAM,KAAI,OAAO;QAAC,IAAI,CAACtC,gBAAgB,CAACsE,kBAAkB,CAACzF,EAAE,CAACK,UAAU,GAACL,EAAE,CAACO,WAAW,EAAC,CAAC,CAAC,CAAC,EAAC,IAAI,CAACY,gBAAgB,CAACsE,kBAAkB,CAACzF,EAAE,CAACC,OAAO,EAAC,IAAI,CAAC0B,oBAAoB,CAAC+B,QAAQ,GAAC,CAAC,CAAC,EAAC,IAAI,CAACvC,gBAAgB,CAACsE,kBAAkB,CAACzF,EAAE,CAACG,QAAQ,EAAC,IAAI,CAACwB,oBAAoB,CAAC+B,QAAQ,IAAE,CAAC,CAAC;IAAA,CAAC,MAAK,IAAI,CAACvC,gBAAgB,CAACsE,kBAAkB,CAACzF,EAAE,CAACC,OAAO,GAACD,EAAE,CAACG,QAAQ,GAACH,EAAE,CAACK,UAAU,GAACL,EAAE,CAACO,WAAW,EAAC,CAAC,CAAC,CAAC;EAAA;EAAC6B,2BAA2BA,CAAA,EAAE;IAAC,MAAMjK,CAAC,GAAC0B,CAAC,CAACgC,CAAC,CAAC8H,GAAG,CAAC,CAAC,EAAC,IAAI,CAAC1C,OAAO,CAACD,KAAK,EAAChG,CAAC,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,CAAC,CAAC;IAAC,IAAG,IAAI,IAAE7C,CAAC,EAAC;IAAO,MAAMC,CAAC,GAAC,IAAI,CAAC4J,QAAQ,CAAC,CAAC;MAAC1J,CAAC,GAACyB,CAAC,CAAC8B,CAAC,CAAC8H,GAAG,CAAC,CAAC,EAACpJ,CAAC,CAACoB,CAAC,CAACgI,GAAG,CAAC,CAAC,EAACvL,CAAC,EAACA,CAAC,EAACA,CAAC,CAAC,CAAC;IAAC,IAAI,CAAC+I,gBAAgB,CAACuE,cAAc,GAACzL,CAAC,CAAC4B,CAAC,CAAC8H,GAAG,CAAC,CAAC,EAACrL,CAAC,EAACH,CAAC,CAAC;EAAA;EAAC+K,sBAAsBA,CAAA,EAAE;IAAC,MAAM/K,CAAC,GAACA,CAACA,CAAC,EAACC,CAAC,EAACE,CAAC,KAAG;QAAC,MAAME,CAAC,GAAC,EAAE;UAACC,CAAC,GAACkN,IAAI,CAACC,IAAI,CAACrH,EAAE,IAAEnG,CAAC,GAACD,CAAC,CAAC,IAAE,CAAC,GAACwN,IAAI,CAACE,EAAE,CAAC,CAAC;QAAC,KAAI,IAAIlN,CAAC,GAAC,CAAC,EAACA,CAAC,GAACF,CAAC,GAAC,CAAC,EAACE,CAAC,EAAE,EAAC;UAAC,MAAME,CAAC,GAACV,CAAC,GAACQ,CAAC,IAAEP,CAAC,GAACD,CAAC,CAAC,GAACM,CAAC;UAACD,CAAC,CAACsN,IAAI,CAAC9K,CAAC,CAAC1C,CAAC,GAACqN,IAAI,CAACI,GAAG,CAAClN,CAAC,CAAC,EAACP,CAAC,GAACqN,IAAI,CAACK,GAAG,CAACnN,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC;QAAA;QAAC,OAAOL,CAAC;MAAA,CAAC;MAACJ,CAAC,GAACA,CAAC,IAAED,CAAC,CAAC,CAAC,EAAC,CAAC,GAACwN,IAAI,CAACE,EAAE,EAACzN,CAAC,CAAC;MAACE,CAAC,GAACH,CAAC,IAAE,CAAC,CAAC,CAACA,CAAC,GAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAACA,CAAC,GAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAACA,CAAC,GAAC,CAAC,EAACwF,CAAC,GAAC,CAAC,CAAC,EAAC,CAAC,CAACxF,CAAC,GAAC,CAAC,EAACwF,CAAC,GAAC,CAAC,CAAC,CAAC;MAACnF,CAAC,GAAC,IAAI,CAACyN,eAAe,CAAC,CAAC,CAAC;MAACxN,CAAC,GAACA,CAACN,CAAC,EAACC,CAAC,EAACK,CAAC,GAACD,CAAC,KAAG6G,EAAE,CAAC5G,CAAC,EAACH,CAAC,CAACF,CAAC,CAAC,EAACD,CAAC,EAAC,EAAE,EAAC,EAAE,EAAC,CAAC,CAAC,CAAC;MAACQ,CAAC,GAACP,CAAC,CAACiF,CAAC,CAAC;MAACxE,CAAC,GAACJ,CAAC,CAACE,CAAC,EAACsE,CAAC,CAAC;MAAClE,CAAC,GAAC;QAACmN,IAAI,EAAC,IAAIC,KAAK,CAAD,CAAC;QAACC,KAAK,EAAC,IAAID,KAAK,CAAD;MAAC,CAAC;MAAClN,CAAC,GAAC,EAAE;IAAC,KAAI,IAAI6B,CAAC,GAAC,CAAC,EAACA,CAAC,GAAC,CAAC,EAACA,CAAC,EAAE,EAAC;MAAC,MAAM1C,CAAC,GAAC0C,CAAC,GAAC6K,IAAI,CAACE,EAAE,GAACF,IAAI,CAACE,EAAE,GAAC,CAAC;QAACvN,CAAC,GAACqN,IAAI,CAACE,EAAE,GAAC,CAAC,GAACpH,EAAE;QAAC9F,CAAC,GAACP,CAAC,GAACE,CAAC;QAACO,CAAC,GAACT,CAAC,GAACuN,IAAI,CAACE,EAAE,GAAC,CAAC,GAACvN,CAAC;QAACa,CAAC,GAAChB,CAAC,CAACQ,CAAC,EAACE,CAAC,EAAC0E,CAAC,CAAC;QAAClE,CAAC,GAACZ,CAAC,CAACU,CAAC,EAACkF,EAAE,CAAC;MAACpF,CAAC,CAAC6M,IAAI,CAAC3M,CAAC,CAAC,EAACF,CAAC,CAAC6M,IAAI,CAAC3N,CAAC,CAACQ,CAAC,EAACE,CAAC,EAAC4E,CAAC,GAACR,CAAC,GAAC,CAAC,CAAC,CAAC,EAAClE,CAAC,CAACmN,IAAI,CAACJ,IAAI,CAACzM,CAAC,CAAC,EAACN,CAAC,CAACqN,KAAK,CAACN,IAAI,CAACzM,CAAC,CAACgN,WAAW,CAAC,CAAC,CAAC;MAAC,KAAI,IAAIlO,CAAC,GAAC,CAAC,EAACA,CAAC,GAAC,CAAC,EAACA,CAAC,EAAE,EAAC;QAAC,MAAMC,CAAC,GAAC,CAAC,KAAGD,CAAC;UAACG,CAAC,GAACgC,CAAC,CAAC,CAAC;QAAC,IAAGlC,CAAC,EAAC;UAACF,CAAC,CAACI,CAAC,EAACA,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC,EAAC8B,CAAC,CAAC9B,CAAC,EAACA,CAAC,EAAC,CAACK,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,CAAC,CAAC;UAAC,MAAMR,CAAC,GAACwN,IAAI,CAACW,KAAK,CAACvJ,CAAC,IAAE5D,CAAC,CAACoN,MAAM,GAAC,CAAC,CAAC,CAAC;UAACjO,CAAC,CAAC,EAAE,CAAC,GAACa,CAAC,CAAChB,CAAC,CAAC,CAAC,CAAC,CAAC,EAACG,CAAC,CAAC,EAAE,CAAC,GAACa,CAAC,CAAChB,CAAC,CAAC,CAAC,CAAC,CAAC,EAACG,CAAC,CAAC,EAAE,CAAC,GAACa,CAAC,CAAChB,CAAC,CAAC,CAAC,CAAC,CAAC;QAAA,CAAC,MAAI;UAACiC,CAAC,CAAC9B,CAAC,EAACA,CAAC,EAACO,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,CAAC,CAAC;UAAC,MAAMV,CAAC,GAACwN,IAAI,CAACW,KAAK,CAAC,CAAC,CAAC,GAACvJ,CAAC,KAAG5D,CAAC,CAACoN,MAAM,GAAC,CAAC,CAAC,CAAC;UAACjO,CAAC,CAAC,EAAE,CAAC,GAACa,CAAC,CAAChB,CAAC,CAAC,CAAC,CAAC,CAAC,EAACG,CAAC,CAAC,EAAE,CAAC,GAACa,CAAC,CAAChB,CAAC,CAAC,CAAC,CAAC,CAAC,EAACG,CAAC,CAAC,EAAE,CAAC,GAACa,CAAC,CAAChB,CAAC,CAAC,CAAC,CAAC,CAAC;QAAA;QAAC,MAAMM,CAAC,GAACwG,EAAE,CAACzG,CAAC,EAACuF,CAAC,EAAC,CAAC,EAACF,CAAC,EAACF,CAAC,CAAC;QAACwB,EAAE,CAAC1G,CAAC,EAACH,CAAC,CAAC,EAAC,CAACF,CAAC,GAACW,CAAC,CAACmN,IAAI,GAACnN,CAAC,CAACqN,KAAK,EAAEN,IAAI,CAACrN,CAAC,CAAC;MAAA;IAAC;IAAC,MAAMU,CAAC,GAAC,EAAE;IAAC,KAAI,IAAIjB,CAAC,GAAC,CAAC,EAACA,CAAC,GAAC,CAAC,EAACA,CAAC,EAAE,EAAC;MAAC,MAAME,CAAC,GAACF,CAAC,GAACyN,IAAI,CAACE,EAAE,GAACF,IAAI,CAACE,EAAE,GAAC,CAAC;QAACvN,CAAC,GAACqN,IAAI,CAACE,EAAE,GAAC,CAAC,GAAChH,EAAE;QAACrG,CAAC,GAACJ,CAAC,GAACE,CAAC;QAACK,CAAC,GAACP,CAAC,GAACuN,IAAI,CAACE,EAAE,GAAC,CAAC,GAACvN,CAAC;QAACO,CAAC,GAACV,CAAC,CAACK,CAAC,EAACG,CAAC,EAAC8E,CAAC,CAAC;MAACtE,CAAC,CAAC2M,IAAI,CAACrN,CAAC,CAACI,CAAC,EAACwF,EAAE,CAAC,CAAC;IAAA;IAAC,MAAMhF,CAAC,GAAC,IAAI,CAAC4M,eAAe,CAAC,GAAG,CAAC;MAAC1M,CAAC,GAAC,IAAI,CAAC0M,eAAe,CAAC,EAAE,CAAC;MAACxM,CAAC,GAAC,IAAI,CAACwM,eAAe,CAAC,GAAG,CAAC;MAACtM,CAAC,GAACvB,CAAC,CAACiF,CAAC,GAACY,CAAC,CAAC;MAACpE,CAAC,GAACzB,CAAC,CAACiF,CAAC,GAACc,CAAC,CAAC;MAACpE,CAAC,GAACtB,CAAC,CAACkB,CAAC,EAAC0E,EAAE,EAAChF,CAAC,CAAC;MAACY,CAAC,GAACxB,CAAC,CAACoB,CAAC,EAACwE,EAAE,EAAC5E,CAAC,CAAC;MAACc,CAAC,GAACnC,CAAC,CAACiF,CAAC,GAACY,CAAC,CAAC;MAACzD,CAAC,GAACpC,CAAC,CAACiF,CAAC,GAACc,CAAC,CAAC;MAAC1D,CAAC,GAAChC,CAAC,CAAC8B,CAAC,EAAC8D,EAAE,EAAChF,CAAC,CAAC;MAACqB,CAAC,GAACjC,CAAC,CAAC+B,CAAC,EAAC6D,EAAE,EAAC5E,CAAC,CAAC;IAAC,IAAIkB,CAAC,GAAC,CAAC,IAAIwB,CAAC,CAACtD,CAAC,EAACmH,EAAE,CAACW,cAAc,CAAC,EAAC,IAAIxE,CAAC,CAACtD,CAAC,CAACwN,WAAW,CAAC;MAACG,QAAQ,EAACjN;IAAC,CAAC,CAAC,EAACwG,EAAE,CAAC0G,IAAI,CAAC,CAAC;IAAC,IAAI,CAAC/E,IAAI,IAAE,OAAO,KAAG,IAAI,CAACA,IAAI,KAAG/G,CAAC,GAACA,CAAC,CAAC+L,MAAM,CAAC,CAAC,GAAGvN,CAAC,CAACwN,GAAG,CAAExO,CAAC,IAAE,IAAIgE,CAAC,CAAChE,CAAC,EAAC6H,EAAE,CAACW,cAAc,GAACX,EAAE,CAACS,QAAQ,CAAE,CAAC,EAAC,IAAItE,CAAC,CAACpC,CAAC,EAACiG,EAAE,CAACW,cAAc,GAACX,EAAE,CAACC,OAAO,CAAC,EAAC,IAAI9D,CAAC,CAAClC,CAAC,EAAC+F,EAAE,CAACW,cAAc,GAACX,EAAE,CAACC,OAAO,CAAC,EAAC,IAAI9D,CAAC,CAAC1B,CAAC,EAACuF,EAAE,CAACW,cAAc,GAACX,EAAE,CAACG,QAAQ,CAAC,EAAC,IAAIhE,CAAC,CAACzB,CAAC,EAACsF,EAAE,CAACW,cAAc,GAACX,EAAE,CAACG,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAC,IAAI,CAACuB,IAAI,IAAE,QAAQ,KAAG,IAAI,CAACA,IAAI,KAAG/G,CAAC,GAACA,CAAC,CAAC+L,MAAM,CAAC,CAAC,GAAG3N,CAAC,CAACqN,KAAK,CAACO,GAAG,CAAExO,CAAC,IAAE,IAAIgE,CAAC,CAAChE,CAAC,CAACkO,WAAW,CAAC,CAAC,EAACrG,EAAE,CAACW,cAAc,GAACX,EAAE,CAACS,QAAQ,CAAE,CAAC,EAAC,GAAG1H,CAAC,CAACmN,IAAI,CAACS,GAAG,CAAExO,CAAC,IAAE,IAAIgE,CAAC,CAAChE,CAAC,EAAC6H,EAAE,CAACW,cAAc,GAACX,EAAE,CAACK,UAAU,CAAE,CAAC,EAAC,GAAGtH,CAAC,CAACqN,KAAK,CAACO,GAAG,CAAExO,CAAC,IAAE,IAAIgE,CAAC,CAAChE,CAAC,EAAC6H,EAAE,CAACW,cAAc,GAACX,EAAE,CAACO,WAAW,CAAE,CAAC,CAAC,CAAC,CAAC;IAAC,MAAM3F,CAAC,GAAC,CAACjC,CAAC,EAAC,GAAGM,CAAC,CAAC;IAAC,OAAO,IAAI8C,CAAC,CAAC;MAAC6H,IAAI,EAAC,IAAI,CAACnB,IAAI,CAACmB,IAAI;MAACgD,aAAa,EAACjM,CAAC;MAACkM,sBAAsB,EAAC,CAAC,CAAC;MAACC,aAAa,EAAC,CAAC,CAAC;MAACC,MAAM,EAAC9J,CAAC;MAAC+J,eAAe,EAAC,CAAC;MAACC,eAAe,EAAC,GAAG;MAACC,aAAa,EAAC,IAAI,CAACzE,IAAI,CAACW,MAAM,CAAC8D,aAAa;MAACC,aAAa,EAAC;QAACC,IAAI,EAAC,QAAQ;QAACC,KAAK,EAACzM,CAAC;QAAC0M,SAAS,EAACtM,CAAC,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC;MAAC;IAAC,CAAC,CAAC;EAAA;EAACiL,eAAeA,CAAC9N,CAAC,EAAC;IAAC,MAAMC,CAAC,GAAC,IAAIqH,EAAE,CAAC;MAAC8H,QAAQ,EAACxI,EAAE,CAACyI,IAAI;MAACC,cAAc,EAAClI,EAAE,CAACmI,WAAW;MAACC,YAAY,EAAC,CAAC;IAAC,CAAC,CAAC;IAAC,OAAO,IAAI,CAACtF,UAAU,CAACpJ,CAAC,CAAE,MAAIX,CAAC,CAAC,IAAI,CAACmK,IAAI,CAACmB,IAAI,CAACgE,cAAc,CAACC,WAAW,EAAC1P,CAAC,CAAC,EAAGA,CAAC,IAAEC,CAAC,CAAC0P,aAAa,CAAC;MAACC,KAAK,EAAC5P;IAAC,CAAC,CAAC,EAAEgB,CAAC,CAAC,CAAC,EAACf,CAAC;EAAA;EAAC,IAAI4P,IAAIA,CAAA,EAAE,CAAC;AAAC,CAAC;AAAC,SAAS5D,EAAEA,CAACjM,CAAC,EAACC,CAAC,EAAC;EAAC,MAAME,CAAC,GAACkC,CAAC,CAACmB,CAAC,CAACgI,GAAG,CAAC,CAAC,EAACvL,CAAC,CAAC6L,WAAW,EAAC9L,CAAC,CAACmL,MAAM,CAAC;IAAC9K,CAAC,GAACgC,CAAC,CAACmB,CAAC,CAACgI,GAAG,CAAC,CAAC,EAACvL,CAAC,CAAC8L,SAAS,EAAC/L,CAAC,CAACmL,MAAM,CAAC;IAAC7K,CAAC,GAACgC,CAAC,CAACnC,CAAC,CAAC;IAACK,CAAC,GAAC8B,CAAC,CAACjC,CAAC,CAAC;EAAC,OAAO,CAAC,KAAGC,CAAC,GAAC,CAAC,GAACE,CAAC,GAACF,CAAC;AAAA;AAAC,SAAS6L,EAAEA,CAACnM,CAAC,EAACC,CAAC,EAACE,CAAC,EAACE,CAAC,EAAC;EAAC,MAAK;MAACyL,WAAW,EAACxL,CAAC;MAACyL,SAAS,EAACvL;IAAC,CAAC,GAACR,CAAC;IAACU,CAAC,GAACoP,EAAE,CAACxP,CAAC,EAACD,CAAC,EAACmD,CAAC,CAACgI,GAAG,CAAC,CAAC,CAAC;IAAC5K,CAAC,GAACkP,EAAE,CAACtP,CAAC,EAACH,CAAC,EAACmD,CAAC,CAACgI,GAAG,CAAC,CAAC,CAAC;EAAC,IAAGjJ,CAAC,CAAC7B,CAAC,EAACE,CAAC,CAAC,GAACoE,CAAC,GAACA,CAAC,EAAC,OAAO,IAAI;EAAC,MAAMlE,CAAC,GAACuB,CAAC,CAACmB,CAAC,CAACgI,GAAG,CAAC,CAAC,EAAClL,CAAC,EAACH,CAAC,CAAC;IAACa,CAAC,GAACwB,CAAC,CAACgB,CAAC,CAACgI,GAAG,CAAC,CAAC,EAAC1K,CAAC,EAACoC,CAAC,CAACjD,CAAC,CAAC,CAAC;IAACiB,CAAC,GAACZ,CAAC;IAACc,CAAC,GAACqB,CAAC,CAACe,CAAC,CAACgI,GAAG,CAAC,CAAC,EAACtK,CAAC,EAACF,CAAC,CAAC;IAACM,CAAC,GAACwO,EAAE,CAAC3P,CAAC,EAACE,CAAC,EAACmD,CAAC,CAACgI,GAAG,CAAC,CAAC,CAAC;IAAChK,CAAC,GAACd,CAAC;IAACgB,CAAC,GAACoO,EAAE,CAAC1O,CAAC,EAACf,CAAC,EAACmD,CAAC,CAACgI,GAAG,CAAC,CAAC,CAAC;IAAC5J,CAAC,GAACS,CAAC,CAACmB,CAAC,CAACgI,GAAG,CAAC,CAAC,EAAC9J,CAAC,EAACF,CAAC,CAAC;IAACM,CAAC,GAACO,CAAC,CAACmB,CAAC,CAACgI,GAAG,CAAC,CAAC,EAAC9K,CAAC,EAACY,CAAC,CAAC;IAACvB,CAAC,GAACqD,CAAC,CAAC5B,CAAC,EAACI,CAAC,CAAC;IAACK,CAAC,GAACmB,CAAC,CAAC9B,CAAC,EAACQ,CAAC,CAAC;EAAC,OAAOwB,CAAC,CAACvD,CAAC,EAACa,CAAC,CAAC,GAAC0C,CAAC,CAACrB,CAAC,EAACrB,CAAC,CAAC,GAAC,QAAQ,GAAC,OAAO;AAAA;AAAC,SAASkP,EAAEA,CAAC9P,CAAC,EAACC,CAAC,EAACE,CAAC,EAAC;EAAC,OAAOF,CAAC,CAAC8P,eAAe,CAAC/P,CAAC,EAACgQ,EAAE,CAAC,EAAC5N,CAAC,CAACjC,CAAC,EAAC6P,EAAE,CAAC,CAAC,CAAC,EAACA,EAAE,CAAC,CAAC,CAAC,EAAC,CAAC,CAAC;AAAA;AAAC,IAAIC,EAAE;AAAC,SAASrD,EAAEA,CAAC5M,CAAC,EAACC,CAAC,EAAC;EAAC,IAAIE,CAAC,GAAC,IAAI;IAACE,CAAC,GAAC,CAAC;EAAC,MAAMC,CAAC,GAACA,CAAA,KAAID,CAAC;EAAC,OAAM;IAACqK,KAAK,EAACA,CAAA,KAAI;MAACrK,CAAC,GAACL,CAAC,CAAC6J,QAAQ,CAAC,CAAC,EAAC1J,CAAC,GAACH,CAAC,CAAC6J,QAAQ,EAAC7J,CAAC,CAAC6J,QAAQ,GAACvJ,CAAC,EAACL,CAAC,CAAC,CAAC;IAAA,CAAC;IAAC0K,MAAM,EAAC3K,CAAC,KAAGK,CAAC,IAAE,CAAC,CAACA,CAAC,GAAC,CAAC,IAAE,CAAC,GAACA,CAAC,IAAEmN,IAAI,CAAC0C,GAAG,CAAClQ,CAAC,GAACwG,EAAE,EAAC,CAAC,CAAC,EAACvG,CAAC,CAAC,CAAC,EAACuN,IAAI,CAAC2C,GAAG,CAAC9P,CAAC,GAAC,CAAC,CAAC,GAAC,GAAG,GAAC4P,EAAE,CAACG,IAAI,GAACH,EAAE,CAACI,QAAQ,CAAC;IAAClG,OAAO,EAACA,CAAA,KAAI;MAAChK,CAAC,KAAGH,CAAC,CAAC6J,QAAQ,GAAC1J,CAAC,CAAC,EAACF,CAAC,CAAC,CAAC;IAAA;EAAC,CAAC;AAAA;AAAC,SAAS+M,EAAEA,CAAChN,CAAC,EAACC,CAAC,EAACE,CAAC,EAAC;EAAC,IAAIE,CAAC,GAAC,CAAC;IAACC,CAAC,GAAC,IAAI;EAAC,MAAME,CAAC,GAACA,CAAA,KAAI,CAAC,CAAC;EAAC,OAAM;IAACkK,KAAK,EAACA,CAAA,KAAI;MAACpK,CAAC,GAACN,CAAC,CAAC2J,UAAU,EAAC3J,CAAC,CAAC2J,UAAU,GAACnJ,CAAC,EAACH,CAAC,GAAC,CAAC,EAACJ,CAAC,CAAC,CAAC;IAAA,CAAC;IAAC0K,MAAM,EAAC3K,CAAC,KAAGK,CAAC,IAAEL,CAAC,EAAC,CAACM,CAAC,GAAG,CAAC,IAAED,CAAC,IAAEF,CAAC,CAAC+M,OAAO,GAAC+C,EAAE,CAACG,IAAI,GAACH,EAAE,CAACI,QAAQ,CAAC;IAAClG,OAAO,EAACA,CAAA,KAAI;MAAC7J,CAAC,KAAGN,CAAC,CAAC2J,UAAU,GAACrJ,CAAC,CAAC,EAACL,CAAC,CAAC,CAAC;IAAA;EAAC,CAAC;AAAA;AAACD,CAAC,CAAC,CAACsB,CAAC,CAAC;EAACgP,aAAa,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAAC1H,EAAE,CAAC2H,SAAS,EAAC,MAAM,EAAC,KAAK,CAAC,CAAC,EAACvQ,CAAC,CAAC,CAACsB,CAAC,CAAC;EAACgP,aAAa,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAAC1H,EAAE,CAAC2H,SAAS,EAAC,SAAS,EAAC,KAAK,CAAC,CAAC,EAACvQ,CAAC,CAAC,CAACsB,CAAC,CAAC;EAACgP,aAAa,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAAC1H,EAAE,CAAC2H,SAAS,EAAC,eAAe,EAAC,KAAK,CAAC,CAAC,EAACvQ,CAAC,CAAC,CAACsB,CAAC,CAAC,CAAC,CAAC,EAACsH,EAAE,CAAC2H,SAAS,EAAC,MAAM,EAAC,KAAK,CAAC,CAAC,EAACvQ,CAAC,CAAC,CAACsB,CAAC,CAAC,CAAC,CAAC,EAACsH,EAAE,CAAC2H,SAAS,EAAC,kBAAkB,EAAC,KAAK,CAAC,CAAC,EAACvQ,CAAC,CAAC,CAACsB,CAAC,CAAC,CAAC,CAAC,EAACsH,EAAE,CAAC2H,SAAS,EAAC,UAAU,EAAC,IAAI,CAAC,EAAC3H,EAAE,GAAC5I,CAAC,CAAC,CAACwB,CAAC,CAAC,uEAAuE,CAAC,CAAC,EAACoH,EAAE,CAAC,EAAC,UAAS5I,CAAC,EAAC;EAACA,CAAC,CAACA,CAAC,CAACqQ,QAAQ,GAAC,CAAC,CAAC,GAAC,UAAU,EAACrQ,CAAC,CAACA,CAAC,CAACoQ,IAAI,GAAC,CAAC,CAAC,GAAC,MAAM;AAAA,CAAC,CAACH,EAAE,KAAGA,EAAE,GAAC,CAAC,CAAC,CAAC,CAAC;AAAC,MAAMD,EAAE,GAAC5O,CAAC,CAAC,CAAC;AAAC,SAAOwH,EAAE,IAAI4H,oBAAoB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}