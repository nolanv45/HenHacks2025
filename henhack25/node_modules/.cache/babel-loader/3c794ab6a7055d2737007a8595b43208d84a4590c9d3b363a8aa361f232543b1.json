{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport { watch as r, sync as t } from \"../../core/reactiveUtils.js\";\nimport { property as s } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/has.js\";\nimport \"../../core/Logger.js\";\nimport \"../../core/RandomLCG.js\";\nimport { subclass as i } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport a from \"../support/AggregateField.js\";\nimport { featureReductionProperty as o } from \"../support/featureReductionUtils.js\";\nimport u from \"../../renderers/SimpleRenderer.js\";\nimport n from \"../../renderers/visualVariables/SizeVariable.js\";\nimport l from \"../../renderers/visualVariables/support/SizeStop.js\";\nimport { createInferredClusterRenderer as c } from \"../../views/2d/layers/support/clusterUtils.js\";\nconst d = d => {\n  let f = class extends d {\n    constructor() {\n      super(...arguments), this.addHandles(r(() => this.renderer, () => {\n        if (this.featureReduction) {\n          const e = this._normalizeFeatureReduction(this.featureReduction);\n          this._set(\"featureReduction\", e);\n        }\n      }, t));\n    }\n    set featureReduction(e) {\n      const r = this._normalizeFeatureReduction(e);\n      this._set(\"featureReduction\", r);\n    }\n    set renderer(e) {}\n    _withClusterVariable(e, r, t) {\n      const s = e.clone();\n      if (\"visualVariables\" in s) {\n        s.visualVariables || (s.visualVariables = []);\n        s.visualVariables.some(e => \"size\" === e.type) || s.visualVariables.push(new n({\n          field: \"cluster_count\",\n          stops: [new l({\n            value: 1\n          }), new l({\n            useMinValue: !0,\n            size: r\n          }), new l({\n            useMaxValue: !0,\n            size: t\n          })]\n        }));\n      }\n      return s;\n    }\n    _normalizeFeatureReduction(e) {\n      if (\"cluster\" !== e?.type) return e;\n      const r = e.clone(),\n        t = [new a({\n          name: \"cluster_count\",\n          alias: \"cluster_count\",\n          isAutoGenerated: !0,\n          statisticType: \"count\"\n        })],\n        s = (r.fields ?? []).filter(e => !e.isAutoGenerated),\n        i = e.renderer && !e.renderer.authoringInfo?.isAutoGenerated,\n        {\n          clusterMinSize: o,\n          clusterMaxSize: n\n        } = r;\n      if (i) {\n        r.fields = [...t, ...s];\n        const e = this._withClusterVariable(r.renderer, o, n);\n        return r.effectiveFeatureRenderer = e, r.effectiveClusterRenderer = e, r;\n      }\n      if (e.symbol) {\n        if (r.fields = [...t, ...s], r.renderer = null, !this.renderer) return r.effectiveFeatureRenderer = null, r.effectiveClusterRenderer = null, r;\n        const i = c(t, this.renderer),\n          a = this._withClusterVariable(i, o, n),\n          l = \"visualVariables\" in a && a.visualVariables ? a.visualVariables : [],\n          d = new u({\n            symbol: e.symbol,\n            visualVariables: l\n          });\n        return r.fields = [...t, ...s], r.effectiveFeatureRenderer = a, r.effectiveClusterRenderer = d, r;\n      }\n      if (!this.renderer) return e;\n      const l = c(t, this.renderer);\n      r.fields = [...t, ...s], r.renderer = l;\n      const d = this._withClusterVariable(l, o, n);\n      return r.effectiveFeatureRenderer = d, r.effectiveClusterRenderer = d, r;\n    }\n  };\n  return e([s(o)], f.prototype, \"featureReduction\", null), f = e([i(\"esri.layers.mixins.FeatureReductionLayer\")], f), f;\n};\nexport { d as FeatureReductionLayer };","map":{"version":3,"names":["_","e","watch","r","sync","t","property","s","subclass","i","a","featureReductionProperty","o","u","n","l","createInferredClusterRenderer","c","d","f","constructor","arguments","addHandles","renderer","featureReduction","_normalizeFeatureReduction","_set","_withClusterVariable","clone","visualVariables","some","type","push","field","stops","value","useMinValue","size","useMaxValue","name","alias","isAutoGenerated","statisticType","fields","filter","authoringInfo","clusterMinSize","clusterMaxSize","effectiveFeatureRenderer","effectiveClusterRenderer","symbol","prototype","FeatureReductionLayer"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/layers/mixins/FeatureReductionLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{watch as r,sync as t}from\"../../core/reactiveUtils.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as i}from\"../../core/accessorSupport/decorators/subclass.js\";import a from\"../support/AggregateField.js\";import{featureReductionProperty as o}from\"../support/featureReductionUtils.js\";import u from\"../../renderers/SimpleRenderer.js\";import n from\"../../renderers/visualVariables/SizeVariable.js\";import l from\"../../renderers/visualVariables/support/SizeStop.js\";import{createInferredClusterRenderer as c}from\"../../views/2d/layers/support/clusterUtils.js\";const d=d=>{let f=class extends d{constructor(...e){super(...e),this.addHandles(r((()=>this.renderer),(()=>{if(this.featureReduction){const e=this._normalizeFeatureReduction(this.featureReduction);this._set(\"featureReduction\",e)}}),t))}set featureReduction(e){const r=this._normalizeFeatureReduction(e);this._set(\"featureReduction\",r)}set renderer(e){}_withClusterVariable(e,r,t){const s=e.clone();if(\"visualVariables\"in s){s.visualVariables||(s.visualVariables=[]);s.visualVariables.some((e=>\"size\"===e.type))||s.visualVariables.push(new n({field:\"cluster_count\",stops:[new l({value:1}),new l({useMinValue:!0,size:r}),new l({useMaxValue:!0,size:t})]}))}return s}_normalizeFeatureReduction(e){if(\"cluster\"!==e?.type)return e;const r=e.clone(),t=[new a({name:\"cluster_count\",alias:\"cluster_count\",isAutoGenerated:!0,statisticType:\"count\"})],s=(r.fields??[]).filter((e=>!e.isAutoGenerated)),i=e.renderer&&!e.renderer.authoringInfo?.isAutoGenerated,{clusterMinSize:o,clusterMaxSize:n}=r;if(i){r.fields=[...t,...s];const e=this._withClusterVariable(r.renderer,o,n);return r.effectiveFeatureRenderer=e,r.effectiveClusterRenderer=e,r}if(e.symbol){if(r.fields=[...t,...s],r.renderer=null,!this.renderer)return r.effectiveFeatureRenderer=null,r.effectiveClusterRenderer=null,r;const i=c(t,this.renderer),a=this._withClusterVariable(i,o,n),l=\"visualVariables\"in a&&a.visualVariables?a.visualVariables:[],d=new u({symbol:e.symbol,visualVariables:l});return r.fields=[...t,...s],r.effectiveFeatureRenderer=a,r.effectiveClusterRenderer=d,r}if(!this.renderer)return e;const l=c(t,this.renderer);r.fields=[...t,...s],r.renderer=l;const d=this._withClusterVariable(l,o,n);return r.effectiveFeatureRenderer=d,r.effectiveClusterRenderer=d,r}};return e([s(o)],f.prototype,\"featureReduction\",null),f=e([i(\"esri.layers.mixins.FeatureReductionLayer\")],f),f};export{d as FeatureReductionLayer};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}