{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport t from \"../../../../../core/Error.js\";\nimport has from \"../../../../../core/has.js\";\nimport e from \"../../../../../core/Logger.js\";\nimport { diff as i } from \"../../../../../core/accessorSupport/diffUtils.js\";\nimport { collectExpressionDependencies as s } from \"../../../../../support/arcadeOnDemand.js\";\nimport { attributeStoreInitialSize as r, maxHighlightReasons as a, AttributeDataType as n } from \"../../../engine/webgl/definitions.js\";\nimport { getDisplayIdTexel as o } from \"../../../engine/webgl/DisplayId.js\";\nimport { getPixelArrayCtor as l } from \"../../../engine/webgl/Utils.js\";\nimport { nanMagicNumber as h } from \"../../../engine/webgl/shaderGraph/techniques/shaders/constants.js\";\nimport { createDebugLogger as d, DEBUG_ATTR_UPDATES as c } from \"../../../engine/webgl/util/debug.js\";\nimport { DisplayIdGenerator as u } from \"./DisplayIdGenerator.js\";\nimport p from \"./FeatureFilterEvaluator.js\";\nimport { PixelType as g } from \"../../../../webgl/enums.js\";\nfunction _(t, e) {\n  if (!t || !e) return t;\n  switch (e) {\n    case \"radius\":\n    case \"distance\":\n      return 2 * t;\n    case \"diameter\":\n    case \"width\":\n      return t;\n    case \"area\":\n      return Math.sqrt(t);\n  }\n  return t;\n}\nconst y = () => e.getLogger(\"esri.views.layers.2d.features.support.AttributeStore\"),\n  m = d(c, y()),\n  f = {\n    sharedArrayBuffer: has(\"esri-shared-array-buffer\"),\n    atomics: has(\"esri-atomics\")\n  };\nclass b {\n  constructor(t, e, i) {\n    this.size = 0, this.texelSize = 4, this.dirtyStart = 0, this.dirtyEnd = 0;\n    const {\n      pixelType: s,\n      layout: r,\n      textureOnly: a\n    } = e;\n    this.textureOnly = a || !1, this.pixelType = s, this.layout = r, this._resetRange(), this.size = t, this.isLocal = i, a || (this.data = this._initData(s, t));\n  }\n  get buffer() {\n    return this.data?.buffer;\n  }\n  unsetComponentAllTexels(t, e) {\n    const i = this.data;\n    for (let s = 0; s < this.size * this.size; s++) i[s * this.texelSize + t] &= ~e;\n    this.dirtyStart = 0, this.dirtyEnd = this.size * this.size - 1;\n  }\n  setComponentAllTexels(t, e) {\n    const i = this.data;\n    for (let s = 0; s < this.size * this.size; s++) i[s * this.texelSize + t] |= 255 & e;\n    this.dirtyStart = 0, this.dirtyEnd = this.size * this.size - 1;\n  }\n  setComponent(t, e, i) {\n    const s = this.data;\n    for (const r of i) s[r * this.texelSize + t] |= e, this.dirtyStart = Math.min(this.dirtyStart, r), this.dirtyEnd = Math.max(this.dirtyEnd, r);\n  }\n  setComponentTexel(t, e, i) {\n    this.data[i * this.texelSize + t] |= e, this.dirtyStart = Math.min(this.dirtyStart, i), this.dirtyEnd = Math.max(this.dirtyEnd, i);\n  }\n  unsetComponentTexel(t, e, i) {\n    this.data[i * this.texelSize + t] &= ~e, this.dirtyStart = Math.min(this.dirtyStart, i), this.dirtyEnd = Math.max(this.dirtyEnd, i);\n  }\n  getData(t, e) {\n    const i = o(t);\n    return this.data[i * this.texelSize + e];\n  }\n  setData(t, e, i) {\n    const s = o(t),\n      r = 1 << e;\n    this.layout & r ? null != this.data && (this.data[s * this.texelSize + e] = i, this.dirtyStart = Math.min(this.dirtyStart, s), this.dirtyEnd = Math.max(this.dirtyEnd, s)) : y().error(\"mapview-attributes-store\", \"Tried to set a value for a texel's readonly component\");\n  }\n  expand(t) {\n    if (this.size = t, !this.textureOnly) {\n      const e = this._initData(this.pixelType, t),\n        i = this.data;\n      e.set(i), this.data = e;\n    }\n  }\n  toMessage() {\n    const t = this.dirtyStart,\n      e = this.dirtyEnd,\n      i = this.texelSize;\n    if (t > e) return null;\n    this._resetRange();\n    const s = !this.isLocal,\n      r = this.pixelType,\n      a = this.layout,\n      n = this.data;\n    return {\n      start: t,\n      end: e,\n      data: s && n.slice(t * i, (e + 1) * i) || null,\n      pixelType: r,\n      layout: a\n    };\n  }\n  _initData(t, e) {\n    const i = ArrayBuffer,\n      s = l(t),\n      r = new s(new i(e * e * 4 * s.BYTES_PER_ELEMENT));\n    for (let a = 0; a < r.length; a += 4) r[a + 1] = 255;\n    return r;\n  }\n  _resetRange() {\n    this.dirtyStart = 2147483647, this.dirtyEnd = 0;\n  }\n}\nclass x {\n  constructor(t) {\n    this._client = t, this._filters = [], this._blocks = new Array(), this._attributeComputeInfo = null, this._abortController = new AbortController(), this._size = r, this._idsToHighlight = new Map(), this._arcadeDependencies = new Set(), this._initialized = !1, this.version = 0, this._idGenerator = new u(), this._epoch = 1;\n  }\n  destroy() {\n    this._abortController.abort();\n  }\n  _initialize() {\n    if (null != this._blockDescriptors) return;\n    const t = g.FLOAT;\n    m(`Creating AttributeStore ${f.sharedArrayBuffer ? \"with\" : \"without\"} shared memory`), this._blockDescriptors = [{\n      pixelType: g.UNSIGNED_BYTE,\n      layout: 1\n    }, {\n      pixelType: g.UNSIGNED_BYTE,\n      layout: 15,\n      textureOnly: !0\n    }, {\n      pixelType: g.UNSIGNED_BYTE,\n      layout: 15,\n      textureOnly: !0\n    }, {\n      pixelType: t,\n      layout: 15\n    }, {\n      pixelType: t,\n      layout: 15\n    }, {\n      pixelType: t,\n      layout: 15\n    }, {\n      pixelType: t,\n      layout: 15\n    }, {\n      pixelType: g.FLOAT,\n      layout: 15\n    }], this._blocks = this._blockDescriptors.map(() => null);\n  }\n  get hasHighlight() {\n    return this._idsToHighlight.size > 0;\n  }\n  createDisplayIdForObjectId(t) {\n    return this._idGenerator.createIdForObjectId(t);\n  }\n  releaseDisplayIdForObjectId(t) {\n    return this._idGenerator.releaseIdForObjectId(t);\n  }\n  getDisplayIdForObjectId(t) {\n    return this._idGenerator.getDisplayIdForObjectId(t);\n  }\n  incrementDisplayIdGeneration() {\n    this._idGenerator.incrementGeneration();\n  }\n  hasArcadeDependency(t) {\n    return this._arcadeDependencies.has(t);\n  }\n  releaseAllIds() {\n    this._idGenerator.releaseAll();\n  }\n  async update(t, e, s, r = 0) {\n    const a = i(this._schema, t);\n    if (this.version = r, a && (has(\"esri-2d-update-debug\") && console.debug(`Version[${r}] AttributeStore.update`, {\n      changed: a\n    }), this._schema = t, this._attributeComputeInfo = null, this._initialize(), null != t)) if (s && (this._filters = await Promise.all(t.filters.map(t => t ? p.create({\n      geometryType: s.geometryType,\n      hasM: !1,\n      hasZ: !1,\n      timeInfo: s.timeInfo,\n      fieldsIndex: s.fieldsIndex,\n      spatialReference: s.outSpatialReference,\n      filterJSON: t\n    }) : null))), \"multi\" !== t.type) this._attributeComputeInfo = {\n      type: \"feature\",\n      map: new Map()\n    }, await Promise.all(t.bindings.map(async t => {\n      const i = await this._bind(e, t);\n      this._updateReferences(i);\n    }));else {\n      this._attributeComputeInfo = {\n        type: \"multi\",\n        keyField: t.keyField,\n        map: new Map()\n      };\n      for (const i in t.bindings) {\n        const s = t.bindings[i];\n        await Promise.all(s.map(async t => {\n          const s = await this._bind(e, t, parseInt(i, 10));\n          this._updateReferences(s);\n        }));\n      }\n    }\n  }\n  setHighlight(t, e) {\n    const i = this._getBlock(0);\n    i.unsetComponentAllTexels(0, (1 << a) - 1);\n    for (const {\n      displayId: s,\n      highlightFlags: r\n    } of t) {\n      if (null == s) continue;\n      const t = o(s);\n      i.setComponent(0, r, [t]);\n    }\n    this._idsToHighlight.clear();\n    for (const {\n      objectId: s,\n      highlightFlags: r\n    } of t) this._idsToHighlight.set(s, r);\n    for (const {\n      objectId: s,\n      highlightFlags: r\n    } of e) this._idsToHighlight.set(s, r);\n  }\n  setData(t, e, i, s) {\n    const r = o(t);\n    this._ensureSizeForTexel(r), this._getBlock(e).setData(t, i, s);\n  }\n  getData(t, e, i) {\n    return this._getBlock(e).getData(t, i);\n  }\n  getHighlightFlags(t) {\n    return this._idsToHighlight.get(t) || 0;\n  }\n  unsetAttributeData(t) {\n    const e = o(t);\n    this._getBlock(0).setData(e, 0, 0);\n  }\n  setAttributeData(t, e, i, s) {\n    const r = o(t);\n    this._ensureSizeForTexel(r), this._getBlock(0).setData(r, 0, this.getFilterFlags(e, s));\n    const a = this._attributeComputeInfo,\n      l = 1,\n      d = 4;\n    let c = null;\n    a && (c = \"multi\" === a.type ? a.map.get(e.readAttribute(a.keyField)) : a.map, c?.size && c.forEach((t, s) => {\n      const a = s * l % d,\n        o = Math.floor(s * l / d),\n        c = this._getBlock(o + n.VV);\n      let u = t.field?.read(e, i);\n      t.valueRepresentation && (u = _(u, t.valueRepresentation));\n      (null === u || isNaN(u) || u === 1 / 0 || u === -1 / 0) && (u = h), c.setData(r, a, u);\n    }));\n  }\n  get epoch() {\n    return this._epoch;\n  }\n  sendUpdates() {\n    const t = this._blocks.map(t => null != t ? t.toMessage() : null),\n      e = this._getInitArgs();\n    has(\"esri-2d-log-updating\") && console.log(\"AttributeStore: _doSendUpdate.start\"), this._client.update({\n      initArgs: e,\n      blockData: t,\n      version: this.version,\n      sendUpdateEpoch: this._epoch\n    }), this._epoch += 1, has(\"esri-2d-log-updating\") && console.log(\"AttributeStore: _doSendUpdate.end\");\n  }\n  _ensureSizeForTexel(t) {\n    for (; t >= this._size * this._size;) if (this._expand()) return;\n  }\n  async _bind(t, e, i) {\n    const s = await t.createComputedField(e),\n      {\n        valueRepresentation: r\n      } = e,\n      a = this._attributeComputeInfo;\n    if (\"multi\" === a.type) {\n      const t = a.map.get(i) ?? new Map();\n      t.set(e.binding, {\n        field: s,\n        valueRepresentation: r\n      }), a.map.set(i, t);\n    } else a.map.set(e.binding, {\n      field: s,\n      valueRepresentation: r\n    });\n    return s;\n  }\n  _getInitArgs() {\n    return this._initialized ? null : (this._initialized = !0, this._getBlock(n.Animation), this._getBlock(n.GPGPU), this._getBlock(n.LocalTimeOrigin), {\n      blockSize: this._size,\n      blockDescriptors: this._blocks.map(t => null != t ? {\n        textureOnly: t.textureOnly,\n        buffer: t.buffer,\n        pixelType: t.pixelType\n      } : null)\n    });\n  }\n  _getBlock(t) {\n    const e = this._blocks[t];\n    if (null != e) return e;\n    m(`Initializing AttributeBlock at index ${t}`);\n    const i = new b(this._size, this._blockDescriptors[t], this._client.isLocal);\n    return this._blocks[t] = i, this._initialized = !1, i;\n  }\n  _expand() {\n    if (this._size < this._schema.capabilities.maxTextureSize) {\n      const t = this._size <<= 1;\n      m(\"Expanding block size to\", t, this._blocks);\n      for (const e of this._blocks) e?.expand(t);\n      return this._initialized = !1, this._size = t, 0;\n    }\n    return y().error(new t(\"mapview-limitations\", \"Maximum number of onscreen features exceeded.\")), -1;\n  }\n  _updateReferences(t) {\n    s(this._arcadeDependencies, t);\n  }\n  isVisible(t) {\n    return !!(this._getBlock(0).getData(t, 0) & 1 << a);\n  }\n  getFilterFlags(t, e) {\n    let i = 0;\n    for (let r = 0; r < this._filters.length; r++) {\n      const s = !!(1 << r),\n        a = this._filters[r];\n      i |= (!s || null == a || a.check(t, e) ? 1 : 0) << r;\n    }\n    let s = 0;\n    if (this._idsToHighlight.size) {\n      const e = t.getObjectId();\n      s = this.getHighlightFlags(e);\n    }\n    return i << a | s;\n  }\n}\nexport { x as AttributeStore, _ as getVisualVariableSizeValueRepresentationRatio };","map":{"version":3,"names":["t","has","e","diff","i","collectExpressionDependencies","s","attributeStoreInitialSize","r","maxHighlightReasons","a","AttributeDataType","n","getDisplayIdTexel","o","getPixelArrayCtor","l","nanMagicNumber","h","createDebugLogger","d","DEBUG_ATTR_UPDATES","c","DisplayIdGenerator","u","p","PixelType","g","_","Math","sqrt","y","getLogger","m","f","sharedArrayBuffer","atomics","b","constructor","size","texelSize","dirtyStart","dirtyEnd","pixelType","layout","textureOnly","_resetRange","isLocal","data","_initData","buffer","unsetComponentAllTexels","setComponentAllTexels","setComponent","min","max","setComponentTexel","unsetComponentTexel","getData","setData","error","expand","set","toMessage","start","end","slice","ArrayBuffer","BYTES_PER_ELEMENT","length","x","_client","_filters","_blocks","Array","_attributeComputeInfo","_abortController","AbortController","_size","_idsToHighlight","Map","_arcadeDependencies","Set","_initialized","version","_idGenerator","_epoch","destroy","abort","_initialize","_blockDescriptors","FLOAT","UNSIGNED_BYTE","map","hasHighlight","createDisplayIdForObjectId","createIdForObjectId","releaseDisplayIdForObjectId","releaseIdForObjectId","getDisplayIdForObjectId","incrementDisplayIdGeneration","incrementGeneration","hasArcadeDependency","releaseAllIds","releaseAll","update","_schema","console","debug","changed","Promise","all","filters","create","geometryType","hasM","hasZ","timeInfo","fieldsIndex","spatialReference","outSpatialReference","filterJSON","type","bindings","_bind","_updateReferences","keyField","parseInt","setHighlight","_getBlock","displayId","highlightFlags","clear","objectId","_ensureSizeForTexel","getHighlightFlags","get","unsetAttributeData","setAttributeData","getFilterFlags","readAttribute","forEach","floor","VV","field","read","valueRepresentation","isNaN","epoch","sendUpdates","_getInitArgs","log","initArgs","blockData","sendUpdateEpoch","_expand","createComputedField","binding","Animation","GPGPU","LocalTimeOrigin","blockSize","blockDescriptors","capabilities","maxTextureSize","isVisible","check","getObjectId","AttributeStore","getVisualVariableSizeValueRepresentationRatio"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/layers/features/support/AttributeStore.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport t from\"../../../../../core/Error.js\";import has from\"../../../../../core/has.js\";import e from\"../../../../../core/Logger.js\";import{diff as i}from\"../../../../../core/accessorSupport/diffUtils.js\";import{collectExpressionDependencies as s}from\"../../../../../support/arcadeOnDemand.js\";import{attributeStoreInitialSize as r,maxHighlightReasons as a,AttributeDataType as n}from\"../../../engine/webgl/definitions.js\";import{getDisplayIdTexel as o}from\"../../../engine/webgl/DisplayId.js\";import{getPixelArrayCtor as l}from\"../../../engine/webgl/Utils.js\";import{nanMagicNumber as h}from\"../../../engine/webgl/shaderGraph/techniques/shaders/constants.js\";import{createDebugLogger as d,DEBUG_ATTR_UPDATES as c}from\"../../../engine/webgl/util/debug.js\";import{DisplayIdGenerator as u}from\"./DisplayIdGenerator.js\";import p from\"./FeatureFilterEvaluator.js\";import{PixelType as g}from\"../../../../webgl/enums.js\";function _(t,e){if(!t||!e)return t;switch(e){case\"radius\":case\"distance\":return 2*t;case\"diameter\":case\"width\":return t;case\"area\":return Math.sqrt(t)}return t}const y=()=>e.getLogger(\"esri.views.layers.2d.features.support.AttributeStore\"),m=d(c,y()),f={sharedArrayBuffer:has(\"esri-shared-array-buffer\"),atomics:has(\"esri-atomics\")};class b{constructor(t,e,i){this.size=0,this.texelSize=4,this.dirtyStart=0,this.dirtyEnd=0;const{pixelType:s,layout:r,textureOnly:a}=e;this.textureOnly=a||!1,this.pixelType=s,this.layout=r,this._resetRange(),this.size=t,this.isLocal=i,a||(this.data=this._initData(s,t))}get buffer(){return this.data?.buffer}unsetComponentAllTexels(t,e){const i=this.data;for(let s=0;s<this.size*this.size;s++)i[s*this.texelSize+t]&=~e;this.dirtyStart=0,this.dirtyEnd=this.size*this.size-1}setComponentAllTexels(t,e){const i=this.data;for(let s=0;s<this.size*this.size;s++)i[s*this.texelSize+t]|=255&e;this.dirtyStart=0,this.dirtyEnd=this.size*this.size-1}setComponent(t,e,i){const s=this.data;for(const r of i)s[r*this.texelSize+t]|=e,this.dirtyStart=Math.min(this.dirtyStart,r),this.dirtyEnd=Math.max(this.dirtyEnd,r)}setComponentTexel(t,e,i){this.data[i*this.texelSize+t]|=e,this.dirtyStart=Math.min(this.dirtyStart,i),this.dirtyEnd=Math.max(this.dirtyEnd,i)}unsetComponentTexel(t,e,i){this.data[i*this.texelSize+t]&=~e,this.dirtyStart=Math.min(this.dirtyStart,i),this.dirtyEnd=Math.max(this.dirtyEnd,i)}getData(t,e){const i=o(t);return this.data[i*this.texelSize+e]}setData(t,e,i){const s=o(t),r=1<<e;this.layout&r?null!=this.data&&(this.data[s*this.texelSize+e]=i,this.dirtyStart=Math.min(this.dirtyStart,s),this.dirtyEnd=Math.max(this.dirtyEnd,s)):y().error(\"mapview-attributes-store\",\"Tried to set a value for a texel's readonly component\")}expand(t){if(this.size=t,!this.textureOnly){const e=this._initData(this.pixelType,t),i=this.data;e.set(i),this.data=e}}toMessage(){const t=this.dirtyStart,e=this.dirtyEnd,i=this.texelSize;if(t>e)return null;this._resetRange();const s=!this.isLocal,r=this.pixelType,a=this.layout,n=this.data;return{start:t,end:e,data:s&&n.slice(t*i,(e+1)*i)||null,pixelType:r,layout:a}}_initData(t,e){const i=ArrayBuffer,s=l(t),r=new s(new i(e*e*4*s.BYTES_PER_ELEMENT));for(let a=0;a<r.length;a+=4)r[a+1]=255;return r}_resetRange(){this.dirtyStart=2147483647,this.dirtyEnd=0}}class x{constructor(t){this._client=t,this._filters=[],this._blocks=new Array,this._attributeComputeInfo=null,this._abortController=new AbortController,this._size=r,this._idsToHighlight=new Map,this._arcadeDependencies=new Set,this._initialized=!1,this.version=0,this._idGenerator=new u,this._epoch=1}destroy(){this._abortController.abort()}_initialize(){if(null!=this._blockDescriptors)return;const t=g.FLOAT;m(`Creating AttributeStore ${f.sharedArrayBuffer?\"with\":\"without\"} shared memory`),this._blockDescriptors=[{pixelType:g.UNSIGNED_BYTE,layout:1},{pixelType:g.UNSIGNED_BYTE,layout:15,textureOnly:!0},{pixelType:g.UNSIGNED_BYTE,layout:15,textureOnly:!0},{pixelType:t,layout:15},{pixelType:t,layout:15},{pixelType:t,layout:15},{pixelType:t,layout:15},{pixelType:g.FLOAT,layout:15}],this._blocks=this._blockDescriptors.map((()=>null))}get hasHighlight(){return this._idsToHighlight.size>0}createDisplayIdForObjectId(t){return this._idGenerator.createIdForObjectId(t)}releaseDisplayIdForObjectId(t){return this._idGenerator.releaseIdForObjectId(t)}getDisplayIdForObjectId(t){return this._idGenerator.getDisplayIdForObjectId(t)}incrementDisplayIdGeneration(){this._idGenerator.incrementGeneration()}hasArcadeDependency(t){return this._arcadeDependencies.has(t)}releaseAllIds(){this._idGenerator.releaseAll()}async update(t,e,s,r=0){const a=i(this._schema,t);if(this.version=r,a&&(has(\"esri-2d-update-debug\")&&console.debug(`Version[${r}] AttributeStore.update`,{changed:a}),this._schema=t,this._attributeComputeInfo=null,this._initialize(),null!=t))if(s&&(this._filters=await Promise.all(t.filters.map((t=>t?p.create({geometryType:s.geometryType,hasM:!1,hasZ:!1,timeInfo:s.timeInfo,fieldsIndex:s.fieldsIndex,spatialReference:s.outSpatialReference,filterJSON:t}):null)))),\"multi\"!==t.type)this._attributeComputeInfo={type:\"feature\",map:new Map},await Promise.all(t.bindings.map((async t=>{const i=await this._bind(e,t);this._updateReferences(i)})));else{this._attributeComputeInfo={type:\"multi\",keyField:t.keyField,map:new Map};for(const i in t.bindings){const s=t.bindings[i];await Promise.all(s.map((async t=>{const s=await this._bind(e,t,parseInt(i,10));this._updateReferences(s)})))}}}setHighlight(t,e){const i=this._getBlock(0);i.unsetComponentAllTexels(0,(1<<a)-1);for(const{displayId:s,highlightFlags:r}of t){if(null==s)continue;const t=o(s);i.setComponent(0,r,[t])}this._idsToHighlight.clear();for(const{objectId:s,highlightFlags:r}of t)this._idsToHighlight.set(s,r);for(const{objectId:s,highlightFlags:r}of e)this._idsToHighlight.set(s,r)}setData(t,e,i,s){const r=o(t);this._ensureSizeForTexel(r),this._getBlock(e).setData(t,i,s)}getData(t,e,i){return this._getBlock(e).getData(t,i)}getHighlightFlags(t){return this._idsToHighlight.get(t)||0}unsetAttributeData(t){const e=o(t);this._getBlock(0).setData(e,0,0)}setAttributeData(t,e,i,s){const r=o(t);this._ensureSizeForTexel(r),this._getBlock(0).setData(r,0,this.getFilterFlags(e,s));const a=this._attributeComputeInfo,l=1,d=4;let c=null;a&&(c=\"multi\"===a.type?a.map.get(e.readAttribute(a.keyField)):a.map,c?.size&&c.forEach(((t,s)=>{const a=s*l%d,o=Math.floor(s*l/d),c=this._getBlock(o+n.VV);let u=t.field?.read(e,i);t.valueRepresentation&&(u=_(u,t.valueRepresentation));(null===u||isNaN(u)||u===1/0||u===-1/0)&&(u=h),c.setData(r,a,u)})))}get epoch(){return this._epoch}sendUpdates(){const t=this._blocks.map((t=>null!=t?t.toMessage():null)),e=this._getInitArgs();has(\"esri-2d-log-updating\")&&console.log(\"AttributeStore: _doSendUpdate.start\"),this._client.update({initArgs:e,blockData:t,version:this.version,sendUpdateEpoch:this._epoch}),this._epoch+=1,has(\"esri-2d-log-updating\")&&console.log(\"AttributeStore: _doSendUpdate.end\")}_ensureSizeForTexel(t){for(;t>=this._size*this._size;)if(this._expand())return}async _bind(t,e,i){const s=await t.createComputedField(e),{valueRepresentation:r}=e,a=this._attributeComputeInfo;if(\"multi\"===a.type){const t=a.map.get(i)??new Map;t.set(e.binding,{field:s,valueRepresentation:r}),a.map.set(i,t)}else a.map.set(e.binding,{field:s,valueRepresentation:r});return s}_getInitArgs(){return this._initialized?null:(this._initialized=!0,this._getBlock(n.Animation),this._getBlock(n.GPGPU),this._getBlock(n.LocalTimeOrigin),{blockSize:this._size,blockDescriptors:this._blocks.map((t=>null!=t?{textureOnly:t.textureOnly,buffer:t.buffer,pixelType:t.pixelType}:null))})}_getBlock(t){const e=this._blocks[t];if(null!=e)return e;m(`Initializing AttributeBlock at index ${t}`);const i=new b(this._size,this._blockDescriptors[t],this._client.isLocal);return this._blocks[t]=i,this._initialized=!1,i}_expand(){if(this._size<this._schema.capabilities.maxTextureSize){const t=this._size<<=1;m(\"Expanding block size to\",t,this._blocks);for(const e of this._blocks)e?.expand(t);return this._initialized=!1,this._size=t,0}return y().error(new t(\"mapview-limitations\",\"Maximum number of onscreen features exceeded.\")),-1}_updateReferences(t){s(this._arcadeDependencies,t)}isVisible(t){return!!(this._getBlock(0).getData(t,0)&1<<a)}getFilterFlags(t,e){let i=0;for(let r=0;r<this._filters.length;r++){const s=!!(1<<r),a=this._filters[r];i|=(!s||null==a||a.check(t,e)?1:0)<<r}let s=0;if(this._idsToHighlight.size){const e=t.getObjectId();s=this.getHighlightFlags(e)}return i<<a|s}}export{x as AttributeStore,_ as getVisualVariableSizeValueRepresentationRatio};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}