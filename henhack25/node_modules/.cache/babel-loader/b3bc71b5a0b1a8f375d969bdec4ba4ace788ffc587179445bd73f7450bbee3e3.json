{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport \"../../../core/has.js\";\nconst e = new Set([\"+\", \"-\", \"*\", \"/\", \"(\", \")\"]);\nfunction t(t, r) {\n  (t = t.replaceAll(\" \", \"\")).startsWith(\"-\") && (t = \"0\" + t), t.startsWith(\"+\") && (t = t.slice(1));\n  const l = t.split(\"\"),\n    o = [],\n    s = [];\n  let a = \"\";\n  for (let i = 0; i < l.length; i++) {\n    const t = l[i];\n    e.has(t) ? (a.length && s.push(n(a, r)), o.push(t), a = \"\") : a = a.concat(t);\n  }\n  return a.length && s.push(n(a, r)), {\n    ops: o,\n    nums: s\n  };\n}\nfunction n(e, t) {\n  return e.toLowerCase().startsWith(\"b\") ? t[parseInt(e.slice(1), 10) - 1] : parseFloat(e);\n}\nfunction r(e, t, n, r) {\n  if (\"number\" == typeof n && \"number\" == typeof r) return n + r;\n  let l, o, s;\n  \"number\" == typeof n ? (s = r, l = s.length, o = new Float32Array(l), o.fill(n)) : (l = n.length, o = n, r.constructor === Number ? (s = new Float32Array(l), s.fill(r)) : s = r);\n  const a = new Float32Array(l);\n  switch (t) {\n    case \"+\":\n      for (let t = 0; t < l; t++) (null == e || e[t]) && (a[t] = o[t] + s[t]);\n      break;\n    case \"-\":\n      for (let t = 0; t < l; t++) (null == e || e[t]) && (a[t] = o[t] - s[t]);\n      break;\n    case \"*\":\n      for (let t = 0; t < l; t++) (null == e || e[t]) && (a[t] = o[t] * s[t]);\n      break;\n    case \"/\":\n      for (let t = 0; t < l; t++) (null == e || e[t]) && s[t] && (a[t] = o[t] / s[t]);\n      break;\n    case \"(\":\n    case \")\":\n      throw new Error(\"encountered error with custom band index equation\");\n  }\n  return a;\n}\nfunction l(e, t) {\n  e.splice(t, 1);\n  let n = 0,\n    r = 0;\n  do {\n    n = 0, r = 0;\n    for (let t = 0; t < e.length; t++) if (\"(\" === e[t]) n = t;else if (\")\" === e[t]) {\n      r = t;\n      break;\n    }\n    r === n + 1 && e.splice(n, 2);\n  } while (r === n + 1);\n  return e;\n}\nfunction o(e) {\n  if (1 === e.length) return {\n    opIndex: 0,\n    numIndex: 0\n  };\n  let t = 0,\n    n = 0;\n  for (let s = 0; s < e.length; s++) if (\"(\" === e[s]) t = s;else if (\")\" === e[s]) {\n    n = s;\n    break;\n  }\n  const r = 0 === n ? e : e.slice(t + 1, n);\n  let l = -1;\n  for (let s = 0; s < r.length; s++) if (\"*\" === r[s] || \"/\" === r[s]) {\n    l = s;\n    break;\n  }\n  if (l > -1) n > 0 && (l += t + 1);else {\n    for (let e = 0; e < r.length; e++) if (\"+\" === r[e] || \"-\" === r[e]) {\n      l = e;\n      break;\n    }\n    n > 0 && (l += t + 1);\n  }\n  let o = 0;\n  for (let s = 0; s < l; s++) \"(\" === e[s] && o++;\n  return {\n    opIndex: l,\n    numIndex: l - o\n  };\n}\nfunction s(e, n, s) {\n  let a,\n    {\n      ops: i,\n      nums: f\n    } = t(s, n);\n  if (0 === i.length) {\n    const e = 1 === f.length ? f[0] : n[0];\n    if (e instanceof Float32Array) return [e];\n    const t = new Float32Array(n[0].length);\n    return \"number\" == typeof e ? t.fill(e) : t.set(e), [t];\n  }\n  for (; i.length > 0;) {\n    const {\n      numIndex: t,\n      opIndex: n\n    } = o(i);\n    if (a = r(e, i[n], f[t], f[t + 1]), 1 === i.length) break;\n    i = l(i, n), f.splice(t, 2, a);\n  }\n  return [a];\n}\nexport { s as calculateCustomBandIndex };","map":{"version":3,"names":["e","Set","t","r","replaceAll","startsWith","slice","l","split","o","s","a","i","length","has","push","n","concat","ops","nums","toLowerCase","parseInt","parseFloat","Float32Array","fill","constructor","Number","Error","splice","opIndex","numIndex","f","set","calculateCustomBandIndex"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/layers/support/rasterFunctions/customBandIndexUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport\"../../../core/has.js\";const e=new Set([\"+\",\"-\",\"*\",\"/\",\"(\",\")\"]);function t(t,r){(t=t.replaceAll(\" \",\"\")).startsWith(\"-\")&&(t=\"0\"+t),t.startsWith(\"+\")&&(t=t.slice(1));const l=t.split(\"\"),o=[],s=[];let a=\"\";for(let i=0;i<l.length;i++){const t=l[i];e.has(t)?(a.length&&s.push(n(a,r)),o.push(t),a=\"\"):a=a.concat(t)}return a.length&&s.push(n(a,r)),{ops:o,nums:s}}function n(e,t){return e.toLowerCase().startsWith(\"b\")?t[parseInt(e.slice(1),10)-1]:parseFloat(e)}function r(e,t,n,r){if(\"number\"==typeof n&&\"number\"==typeof r)return n+r;let l,o,s;\"number\"==typeof n?(s=r,l=s.length,o=new Float32Array(l),o.fill(n)):(l=n.length,o=n,r.constructor===Number?(s=new Float32Array(l),s.fill(r)):s=r);const a=new Float32Array(l);switch(t){case\"+\":for(let t=0;t<l;t++)(null==e||e[t])&&(a[t]=o[t]+s[t]);break;case\"-\":for(let t=0;t<l;t++)(null==e||e[t])&&(a[t]=o[t]-s[t]);break;case\"*\":for(let t=0;t<l;t++)(null==e||e[t])&&(a[t]=o[t]*s[t]);break;case\"/\":for(let t=0;t<l;t++)(null==e||e[t])&&s[t]&&(a[t]=o[t]/s[t]);break;case\"(\":case\")\":throw new Error(\"encountered error with custom band index equation\")}return a}function l(e,t){e.splice(t,1);let n=0,r=0;do{n=0,r=0;for(let t=0;t<e.length;t++)if(\"(\"===e[t])n=t;else if(\")\"===e[t]){r=t;break}r===n+1&&e.splice(n,2)}while(r===n+1);return e}function o(e){if(1===e.length)return{opIndex:0,numIndex:0};let t=0,n=0;for(let s=0;s<e.length;s++)if(\"(\"===e[s])t=s;else if(\")\"===e[s]){n=s;break}const r=0===n?e:e.slice(t+1,n);let l=-1;for(let s=0;s<r.length;s++)if(\"*\"===r[s]||\"/\"===r[s]){l=s;break}if(l>-1)n>0&&(l+=t+1);else{for(let e=0;e<r.length;e++)if(\"+\"===r[e]||\"-\"===r[e]){l=e;break}n>0&&(l+=t+1)}let o=0;for(let s=0;s<l;s++)\"(\"===e[s]&&o++;return{opIndex:l,numIndex:l-o}}function s(e,n,s){let a,{ops:i,nums:f}=t(s,n);if(0===i.length){const e=1===f.length?f[0]:n[0];if(e instanceof Float32Array)return[e];const t=new Float32Array(n[0].length);return\"number\"==typeof e?t.fill(e):t.set(e),[t]}for(;i.length>0;){const{numIndex:t,opIndex:n}=o(i);if(a=r(e,i[n],f[t],f[t+1]),1===i.length)break;i=l(i,n),f.splice(t,2,a)}return[a]}export{s as calculateCustomBandIndex};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}