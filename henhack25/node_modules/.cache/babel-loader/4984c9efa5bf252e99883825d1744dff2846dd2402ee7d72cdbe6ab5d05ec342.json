{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { textureBindingBitmap as e } from \"../../../definitions.js\";\nimport { Technique as i } from \"../Technique.js\";\nimport { TechniqueType as t } from \"../TechniqueType.js\";\nimport { BitmapShader as s } from \"../shaders/BitmapShader.js\";\nimport { TextureSamplingMode as o, CompareFunction as n, StencilOperation as r } from \"../../../../../../webgl/enums.js\";\nconst a = {\n    nearest: {\n      samplingMode: o.NEAREST,\n      mips: !1\n    },\n    bilinear: {\n      samplingMode: o.LINEAR,\n      mips: !1\n    },\n    bicubic: {\n      samplingMode: o.LINEAR,\n      mips: !1\n    },\n    trilinear: {\n      samplingMode: o.LINEAR_MIPMAP_LINEAR,\n      mips: !0\n    }\n  },\n  m = (e, i, t) => {\n    if (\"dynamic\" === t.samplingMode) {\n      const {\n          state: t\n        } = e,\n        s = i.resolution / i.pixelRatio / t.resolution,\n        o = Math.round(e.pixelRatio) !== e.pixelRatio,\n        n = s > 1.05 || s < .95;\n      return t.rotation || n || o || i.isSourceScaled || i.rotation ? a.bilinear : a.nearest;\n    }\n    return a[t.samplingMode];\n  };\nclass p extends i {\n  constructor() {\n    super(...arguments), this.name = \"BrushBitmap\", this.type = t.Bitmap, this.shaders = {\n      bitmap: new s()\n    };\n  }\n  render(i, t) {\n    const {\n      context: s,\n      renderingOptions: o,\n      painter: p\n    } = i;\n    for (const c of t.bitmaps) {\n      const t = c.texture;\n      if (!c.source || !c.isReady || null == t) continue;\n      const l = m(i, c, o);\n      i.timeline.begin(this.name), p.setPipelineState({\n        depth: !1,\n        stencil: {\n          test: {\n            mask: 255,\n            ref: c.stencilRef,\n            compare: n.EQUAL,\n            op: {\n              fail: r.KEEP,\n              zFail: r.KEEP,\n              zPass: r.KEEP\n            }\n          },\n          write: !1\n        },\n        color: {\n          write: [!0, !0, !0, !0],\n          blendMode: \"additive\" === c.blendFunction ? \"additive\" : \"composite\"\n        }\n      }), c.setSamplingProfile(l);\n      const {\n          coordScale: d,\n          computedOpacity: u,\n          transforms: f\n        } = c,\n        h = {\n          texture: {\n            texture: t,\n            unit: e\n          },\n          dvsMat3: f.displayViewScreenMat3,\n          coordScale: d,\n          opacity: u\n        };\n      p.submitDrawMesh(s, {\n        shader: this.shaders.bitmap,\n        uniforms: {\n          config: h\n        },\n        defines: {\n          bicubic: l === a.bicubic\n        },\n        optionalAttributes: null,\n        useComputeBuffer: !1\n      }, p.quadMesh), i.timeline.end(this.name);\n    }\n  }\n}\nexport { p as BitmapTechnique };","map":{"version":3,"names":["textureBindingBitmap","e","Technique","i","TechniqueType","t","BitmapShader","s","TextureSamplingMode","o","CompareFunction","n","StencilOperation","r","a","nearest","samplingMode","NEAREST","mips","bilinear","LINEAR","bicubic","trilinear","LINEAR_MIPMAP_LINEAR","m","state","resolution","pixelRatio","Math","round","rotation","isSourceScaled","p","constructor","arguments","name","type","Bitmap","shaders","bitmap","render","context","renderingOptions","painter","c","bitmaps","texture","source","isReady","l","timeline","begin","setPipelineState","depth","stencil","test","mask","ref","stencilRef","compare","EQUAL","op","fail","KEEP","zFail","zPass","write","color","blendMode","blendFunction","setSamplingProfile","coordScale","d","computedOpacity","u","transforms","f","h","unit","dvsMat3","displayViewScreenMat3","opacity","submitDrawMesh","shader","uniforms","config","defines","optionalAttributes","useComputeBuffer","quadMesh","end","BitmapTechnique"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/bitmap/BitmapTechnique.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{textureBindingBitmap as e}from\"../../../definitions.js\";import{Technique as i}from\"../Technique.js\";import{TechniqueType as t}from\"../TechniqueType.js\";import{BitmapShader as s}from\"../shaders/BitmapShader.js\";import{TextureSamplingMode as o,CompareFunction as n,StencilOperation as r}from\"../../../../../../webgl/enums.js\";const a={nearest:{samplingMode:o.NEAREST,mips:!1},bilinear:{samplingMode:o.LINEAR,mips:!1},bicubic:{samplingMode:o.LINEAR,mips:!1},trilinear:{samplingMode:o.LINEAR_MIPMAP_LINEAR,mips:!0}},m=(e,i,t)=>{if(\"dynamic\"===t.samplingMode){const{state:t}=e,s=i.resolution/i.pixelRatio/t.resolution,o=Math.round(e.pixelRatio)!==e.pixelRatio,n=s>1.05||s<.95;return t.rotation||n||o||i.isSourceScaled||i.rotation?a.bilinear:a.nearest}return a[t.samplingMode]};class p extends i{constructor(){super(...arguments),this.name=\"BrushBitmap\",this.type=t.Bitmap,this.shaders={bitmap:new s}}render(i,t){const{context:s,renderingOptions:o,painter:p}=i;for(const c of t.bitmaps){const t=c.texture;if(!c.source||!c.isReady||null==t)continue;const l=m(i,c,o);i.timeline.begin(this.name),p.setPipelineState({depth:!1,stencil:{test:{mask:255,ref:c.stencilRef,compare:n.EQUAL,op:{fail:r.KEEP,zFail:r.KEEP,zPass:r.KEEP}},write:!1},color:{write:[!0,!0,!0,!0],blendMode:\"additive\"===c.blendFunction?\"additive\":\"composite\"}}),c.setSamplingProfile(l);const{coordScale:d,computedOpacity:u,transforms:f}=c,h={texture:{texture:t,unit:e},dvsMat3:f.displayViewScreenMat3,coordScale:d,opacity:u};p.submitDrawMesh(s,{shader:this.shaders.bitmap,uniforms:{config:h},defines:{bicubic:l===a.bicubic},optionalAttributes:null,useComputeBuffer:!1},p.quadMesh),i.timeline.end(this.name)}}}export{p as BitmapTechnique};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}