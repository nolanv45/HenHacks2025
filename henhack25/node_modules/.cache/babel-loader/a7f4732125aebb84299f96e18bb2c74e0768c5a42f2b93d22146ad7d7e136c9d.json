{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { destroyMaybe as e } from \"../../../../../../../core/maybe.js\";\nimport { Mesh as t } from \"../../../meshing/Mesh.js\";\nimport { simplePipelineState as s } from \"../../utils.js\";\nimport { Technique as r } from \"../Technique.js\";\nimport { TechniqueType as i } from \"../TechniqueType.js\";\nimport { OverlayShader as o } from \"../shaders/OverlayShader.js\";\nimport { CompareFunction as n, StencilOperation as a, DataType as h, PrimitiveType as p } from \"../../../../../../webgl/enums.js\";\nimport { VertexElementDescriptor as u } from \"../../../../../../webgl/VertexElementDescriptor.js\";\nclass m extends r {\n  constructor() {\n    super(...arguments), this.type = i.Overlay, this._mesh = null, this.shaders = {\n      overlay: new o()\n    };\n  }\n  render(e, t) {\n    const {\n        context: r,\n        painter: i\n      } = e,\n      o = this._getMesh(e, t);\n    i.setPipelineState(s);\n    const {\n        isWrapAround: h,\n        wrapAroundShift: p\n      } = t.config,\n      u = {\n        ...t.config,\n        wrapAroundShift: 0\n      },\n      m = {\n        shader: this.shaders.overlay,\n        uniforms: {\n          transform: t.transform,\n          config: u\n        },\n        defines: null,\n        optionalAttributes: null,\n        useComputeBuffer: !1\n      };\n    i.setPipelineState({\n      ...s,\n      stencil: {\n        write: !1,\n        test: {\n          compare: n.EQUAL,\n          op: {\n            fail: a.KEEP,\n            zFail: a.KEEP,\n            zPass: a.REPLACE\n          },\n          ref: 0,\n          mask: 255\n        }\n      }\n    }), i.submitDrawMeshUntyped(r, m, o), h && (u.wrapAroundShift = p, i.submitDrawMeshUntyped(r, m, o));\n  }\n  shutdown() {\n    e(this._mesh);\n  }\n  _getMesh(e, s) {\n    const {\n      context: r\n    } = e;\n    if (this._mesh) {\n      const e = this._mesh.vertexBuffers.get(\"positions\");\n      if (!e) throw new Error(\"Buffer not found\");\n      e.buffer.setData(s.position);\n    } else {\n      const e = null != s.index ? s.index.length : s.position.length / 2;\n      this._mesh = new t(r, {\n        vertex: {\n          positions: {\n            data: s.position,\n            attributes: [new u(\"pos\", 2, h.FLOAT, 0, 8)]\n          },\n          uvs: {\n            data: s.tex,\n            attributes: [new u(\"uv\", 2, h.UNSIGNED_SHORT, 0, 4)]\n          }\n        },\n        index: null != s.index ? {\n          index: {\n            data: s.index\n          }\n        } : void 0,\n        groups: [{\n          index: null != s.index ? \"index\" : void 0,\n          primitive: p.TRIANGLE_STRIP\n        }],\n        parts: [{\n          group: 0,\n          start: 0,\n          count: e\n        }]\n      });\n    }\n    return this._mesh;\n  }\n}\nexport { m as OverlayTechnique };","map":{"version":3,"names":["destroyMaybe","e","Mesh","t","simplePipelineState","s","Technique","r","TechniqueType","i","OverlayShader","o","CompareFunction","n","StencilOperation","a","DataType","h","PrimitiveType","p","VertexElementDescriptor","u","m","constructor","arguments","type","Overlay","_mesh","shaders","overlay","render","context","painter","_getMesh","setPipelineState","isWrapAround","wrapAroundShift","config","shader","uniforms","transform","defines","optionalAttributes","useComputeBuffer","stencil","write","test","compare","EQUAL","op","fail","KEEP","zFail","zPass","REPLACE","ref","mask","submitDrawMeshUntyped","shutdown","vertexBuffers","get","Error","buffer","setData","position","index","length","vertex","positions","data","attributes","FLOAT","uvs","tex","UNSIGNED_SHORT","groups","primitive","TRIANGLE_STRIP","parts","group","start","count","OverlayTechnique"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/overlay/OverlayTechnique.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{destroyMaybe as e}from\"../../../../../../../core/maybe.js\";import{Mesh as t}from\"../../../meshing/Mesh.js\";import{simplePipelineState as s}from\"../../utils.js\";import{Technique as r}from\"../Technique.js\";import{TechniqueType as i}from\"../TechniqueType.js\";import{OverlayShader as o}from\"../shaders/OverlayShader.js\";import{CompareFunction as n,StencilOperation as a,DataType as h,PrimitiveType as p}from\"../../../../../../webgl/enums.js\";import{VertexElementDescriptor as u}from\"../../../../../../webgl/VertexElementDescriptor.js\";class m extends r{constructor(){super(...arguments),this.type=i.Overlay,this._mesh=null,this.shaders={overlay:new o}}render(e,t){const{context:r,painter:i}=e,o=this._getMesh(e,t);i.setPipelineState(s);const{isWrapAround:h,wrapAroundShift:p}=t.config,u={...t.config,wrapAroundShift:0},m={shader:this.shaders.overlay,uniforms:{transform:t.transform,config:u},defines:null,optionalAttributes:null,useComputeBuffer:!1};i.setPipelineState({...s,stencil:{write:!1,test:{compare:n.EQUAL,op:{fail:a.KEEP,zFail:a.KEEP,zPass:a.REPLACE},ref:0,mask:255}}}),i.submitDrawMeshUntyped(r,m,o),h&&(u.wrapAroundShift=p,i.submitDrawMeshUntyped(r,m,o))}shutdown(){e(this._mesh)}_getMesh(e,s){const{context:r}=e;if(this._mesh){const e=this._mesh.vertexBuffers.get(\"positions\");if(!e)throw new Error(\"Buffer not found\");e.buffer.setData(s.position)}else{const e=null!=s.index?s.index.length:s.position.length/2;this._mesh=new t(r,{vertex:{positions:{data:s.position,attributes:[new u(\"pos\",2,h.FLOAT,0,8)]},uvs:{data:s.tex,attributes:[new u(\"uv\",2,h.UNSIGNED_SHORT,0,4)]}},index:null!=s.index?{index:{data:s.index}}:void 0,groups:[{index:null!=s.index?\"index\":void 0,primitive:p.TRIANGLE_STRIP}],parts:[{group:0,start:0,count:e}]})}return this._mesh}}export{m as OverlayTechnique};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}