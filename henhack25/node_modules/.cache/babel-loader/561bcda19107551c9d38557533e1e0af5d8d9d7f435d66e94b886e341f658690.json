{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { simplePipelineState as e } from \"../../utils.js\";\nimport { Technique as t } from \"../Technique.js\";\nimport { TechniqueType as r } from \"../TechniqueType.js\";\nimport { BlendShader as s } from \"../shaders/BlendShader.js\";\nimport { OpacityShader as i } from \"../shaders/OpacityShader.js\";\nimport { BlendFactor as u, PixelFormat as o, TextureWrapMode as n } from \"../../../../../../webgl/enums.js\";\nimport { Texture as a } from \"../../../../../../webgl/Texture.js\";\nimport { TextureDescriptor as c } from \"../../../../../../webgl/TextureDescriptor.js\";\nclass f extends t {\n  constructor() {\n    super(...arguments), this.type = r.Blend, this._backBufferTexture = null, this.shaders = {\n      blend: new s(),\n      opacity: new i()\n    };\n  }\n  shutdown() {\n    super.shutdown(), null !== this._backBufferTexture && (this._backBufferTexture.dispose(), this._backBufferTexture = null);\n  }\n  render(t, r) {\n    const {\n        context: s,\n        state: i,\n        pixelRatio: o,\n        inFadeTransition: n,\n        painter: a\n      } = t,\n      {\n        size: c\n      } = i,\n      f = s.getBoundFramebufferObject();\n    let h, l;\n    null != f ? (h = f.width, l = f.height) : (h = Math.round(o * c[0]), l = Math.round(o * c[1]));\n    const {\n      blendMode: d\n    } = r;\n    if (\"normal\" === d) {\n      const t = {\n        shader: this.shaders.opacity,\n        uniforms: {\n          config: {\n            layerTexture: {\n              texture: r.colorTexture,\n              unit: 0\n            },\n            opacity: r.config.opacity\n          }\n        },\n        defines: null,\n        optionalAttributes: null,\n        useComputeBuffer: !1\n      };\n      return a.setPipelineState(e), void a.submitDrawMesh(s, t, a.quadMesh);\n    }\n    const p = this._createOrResizeTexture(t, h, l);\n    f.copyToTexture(0, 0, h, l, 0, 0, p);\n    const x = {\n      color: {\n        write: [!0, !0, !0, !0],\n        blendMode: \"custom\",\n        blendParameters: {\n          srcRGB: u.ONE,\n          dstRGB: u.ZERO,\n          srcAlpha: u.ONE,\n          dstAlpha: u.ZERO\n        }\n      },\n      depth: !1,\n      stencil: !1\n    };\n    a.setPipelineState(x);\n    const b = {\n        backbufferTexture: {\n          texture: p,\n          unit: 0\n        },\n        layerTexture: {\n          texture: r.colorTexture,\n          unit: 1\n        },\n        inFadeOpacity: n ? 1 : 0,\n        ...r.config\n      },\n      T = {\n        shader: this.shaders.blend,\n        uniforms: {\n          config: b\n        },\n        defines: {\n          blendMode: d\n        },\n        optionalAttributes: null,\n        useComputeBuffer: !1\n      };\n    a.submitDrawMesh(s, T, a.quadMesh);\n  }\n  _createOrResizeTexture(e, t, r) {\n    const {\n      context: s\n    } = e;\n    if (null !== this._backBufferTexture && this._backBufferTexture.descriptor?.width === t && this._backBufferTexture.descriptor?.height === r) return this._backBufferTexture;\n    if (null === this._backBufferTexture) {\n      const e = new c();\n      e.internalFormat = o.RGBA, e.wrapMode = n.CLAMP_TO_EDGE, e.width = t, e.height = r, this._backBufferTexture = new a(s, e);\n    } else this._backBufferTexture.resize(t, r);\n    return this._backBufferTexture;\n  }\n}\nexport { f as BlendTechnique };","map":{"version":3,"names":["simplePipelineState","e","Technique","t","TechniqueType","r","BlendShader","s","OpacityShader","i","BlendFactor","u","PixelFormat","o","TextureWrapMode","n","Texture","a","TextureDescriptor","c","f","constructor","arguments","type","Blend","_backBufferTexture","shaders","blend","opacity","shutdown","dispose","render","context","state","pixelRatio","inFadeTransition","painter","size","getBoundFramebufferObject","h","l","width","height","Math","round","blendMode","d","shader","uniforms","config","layerTexture","texture","colorTexture","unit","defines","optionalAttributes","useComputeBuffer","setPipelineState","submitDrawMesh","quadMesh","p","_createOrResizeTexture","copyToTexture","x","color","write","blendParameters","srcRGB","ONE","dstRGB","ZERO","srcAlpha","dstAlpha","depth","stencil","b","backbufferTexture","inFadeOpacity","T","descriptor","internalFormat","RGBA","wrapMode","CLAMP_TO_EDGE","resize","BlendTechnique"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/blend/BlendTechnique.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{simplePipelineState as e}from\"../../utils.js\";import{Technique as t}from\"../Technique.js\";import{TechniqueType as r}from\"../TechniqueType.js\";import{BlendShader as s}from\"../shaders/BlendShader.js\";import{OpacityShader as i}from\"../shaders/OpacityShader.js\";import{BlendFactor as u,PixelFormat as o,TextureWrapMode as n}from\"../../../../../../webgl/enums.js\";import{Texture as a}from\"../../../../../../webgl/Texture.js\";import{TextureDescriptor as c}from\"../../../../../../webgl/TextureDescriptor.js\";class f extends t{constructor(){super(...arguments),this.type=r.Blend,this._backBufferTexture=null,this.shaders={blend:new s,opacity:new i}}shutdown(){super.shutdown(),null!==this._backBufferTexture&&(this._backBufferTexture.dispose(),this._backBufferTexture=null)}render(t,r){const{context:s,state:i,pixelRatio:o,inFadeTransition:n,painter:a}=t,{size:c}=i,f=s.getBoundFramebufferObject();let h,l;null!=f?(h=f.width,l=f.height):(h=Math.round(o*c[0]),l=Math.round(o*c[1]));const{blendMode:d}=r;if(\"normal\"===d){const t={shader:this.shaders.opacity,uniforms:{config:{layerTexture:{texture:r.colorTexture,unit:0},opacity:r.config.opacity}},defines:null,optionalAttributes:null,useComputeBuffer:!1};return a.setPipelineState(e),void a.submitDrawMesh(s,t,a.quadMesh)}const p=this._createOrResizeTexture(t,h,l);f.copyToTexture(0,0,h,l,0,0,p);const x={color:{write:[!0,!0,!0,!0],blendMode:\"custom\",blendParameters:{srcRGB:u.ONE,dstRGB:u.ZERO,srcAlpha:u.ONE,dstAlpha:u.ZERO}},depth:!1,stencil:!1};a.setPipelineState(x);const b={backbufferTexture:{texture:p,unit:0},layerTexture:{texture:r.colorTexture,unit:1},inFadeOpacity:n?1:0,...r.config},T={shader:this.shaders.blend,uniforms:{config:b},defines:{blendMode:d},optionalAttributes:null,useComputeBuffer:!1};a.submitDrawMesh(s,T,a.quadMesh)}_createOrResizeTexture(e,t,r){const{context:s}=e;if(null!==this._backBufferTexture&&this._backBufferTexture.descriptor?.width===t&&this._backBufferTexture.descriptor?.height===r)return this._backBufferTexture;if(null===this._backBufferTexture){const e=new c;e.internalFormat=o.RGBA,e.wrapMode=n.CLAMP_TO_EDGE,e.width=t,e.height=r,this._backBufferTexture=new a(s,e)}else this._backBufferTexture.resize(t,r);return this._backBufferTexture}}export{f as BlendTechnique};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}