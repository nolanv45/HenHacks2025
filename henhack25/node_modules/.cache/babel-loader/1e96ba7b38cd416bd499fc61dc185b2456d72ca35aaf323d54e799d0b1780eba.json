{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { IDENTITY as e } from \"../../../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";\nimport { ONES as t } from \"../../../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";\nimport { TextureCoordinateType as r } from \"../attributes/TextureCoordinateAttribute.glsl.js\";\nimport { VertexTextureCoordinates as a } from \"../attributes/VertexTextureCoordinates.glsl.js\";\nimport { NormalsDoubleSidedMode as n } from \"./Normals.glsl.js\";\nimport { Float2PassUniform as o } from \"../../shaderModules/Float2PassUniform.js\";\nimport { glsl as s } from \"../../shaderModules/glsl.js\";\nimport { Matrix3PassUniform as m } from \"../../shaderModules/Matrix3PassUniform.js\";\nimport { Texture2DDrawUniform as d } from \"../../shaderModules/Texture2DDrawUniform.js\";\nimport { Texture2DPassUniform as l } from \"../../shaderModules/Texture2DPassUniform.js\";\nimport { VertexAttribute as i } from \"../../../lib/VertexAttribute.js\";\nimport { BindType as c } from \"../../../../../webgl/BindType.js\";\nfunction T(T, u) {\n  const x = T.fragment;\n  u.hasVertexTangents ? (T.attributes.add(i.TANGENT, \"vec4\"), T.varyings.add(\"vTangent\", \"vec4\"), u.doubleSidedMode === n.WindingOrder ? x.code.add(s`mat3 computeTangentSpace(vec3 normal) {\nfloat tangentHeadedness = gl_FrontFacing ? vTangent.w : -vTangent.w;\nvec3 tangent = normalize(gl_FrontFacing ? vTangent.xyz : -vTangent.xyz);\nvec3 bitangent = cross(normal, tangent) * tangentHeadedness;\nreturn mat3(tangent, bitangent, normal);\n}`) : x.code.add(s`mat3 computeTangentSpace(vec3 normal) {\nfloat tangentHeadedness = vTangent.w;\nvec3 tangent = normalize(vTangent.xyz);\nvec3 bitangent = cross(normal, tangent) * tangentHeadedness;\nreturn mat3(tangent, bitangent, normal);\n}`)) : x.code.add(s`mat3 computeTangentSpace(vec3 normal, vec3 pos, vec2 st) {\nvec3 Q1 = dFdx(pos);\nvec3 Q2 = dFdy(pos);\nvec2 stx = dFdx(st);\nvec2 sty = dFdy(st);\nfloat det = stx.t * sty.s - sty.t * stx.s;\nvec3 T = stx.t * Q2 - sty.t * Q1;\nT = T - normal * dot(normal, T);\nT *= inversesqrt(max(dot(T,T), 1.e-10));\nvec3 B = sign(det) * cross(normal, T);\nreturn mat3(T, B, normal);\n}`), u.textureCoordinateType !== r.None && (T.include(a, u), x.uniforms.add(u.bindType === c.Pass ? new l(\"normalTexture\", e => e.textureNormal) : new d(\"normalTexture\", e => e.textureNormal)), u.hasNormalTextureTransform && (x.uniforms.add(new o(\"scale\", e => e.scale ?? t)), x.uniforms.add(new m(\"normalTextureTransformMatrix\", t => t.normalTextureTransformMatrix ?? e))), x.code.add(s`vec3 computeTextureNormal(mat3 tangentSpace, vec2 uv) {\nvec3 rawNormal = textureLookup(normalTexture, uv).rgb * 2.0 - 1.0;`), u.hasNormalTextureTransform && x.code.add(s`mat3 normalTextureRotation = mat3(normalTextureTransformMatrix[0][0]/scale[0], normalTextureTransformMatrix[0][1]/scale[1], 0.0,\nnormalTextureTransformMatrix[1][0]/scale[0], normalTextureTransformMatrix[1][1]/scale[1], 0.0,\n0.0, 0.0, 0.0 );\nrawNormal.xy = (normalTextureRotation * vec3(rawNormal.x, rawNormal.y, 1.0)).xy;`), x.code.add(s`return tangentSpace * rawNormal;\n}`));\n}\nexport { T as ComputeNormalTexture };","map":{"version":3,"names":["IDENTITY","e","ONES","t","TextureCoordinateType","r","VertexTextureCoordinates","a","NormalsDoubleSidedMode","n","Float2PassUniform","o","glsl","s","Matrix3PassUniform","m","Texture2DDrawUniform","d","Texture2DPassUniform","l","VertexAttribute","i","BindType","c","T","u","x","fragment","hasVertexTangents","attributes","add","TANGENT","varyings","doubleSidedMode","WindingOrder","code","textureCoordinateType","None","include","uniforms","bindType","Pass","textureNormal","hasNormalTextureTransform","scale","normalTextureTransformMatrix","ComputeNormalTexture"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ComputeNormalTexture.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{IDENTITY as e}from\"../../../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{ONES as t}from\"../../../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{TextureCoordinateType as r}from\"../attributes/TextureCoordinateAttribute.glsl.js\";import{VertexTextureCoordinates as a}from\"../attributes/VertexTextureCoordinates.glsl.js\";import{NormalsDoubleSidedMode as n}from\"./Normals.glsl.js\";import{Float2PassUniform as o}from\"../../shaderModules/Float2PassUniform.js\";import{glsl as s}from\"../../shaderModules/glsl.js\";import{Matrix3PassUniform as m}from\"../../shaderModules/Matrix3PassUniform.js\";import{Texture2DDrawUniform as d}from\"../../shaderModules/Texture2DDrawUniform.js\";import{Texture2DPassUniform as l}from\"../../shaderModules/Texture2DPassUniform.js\";import{VertexAttribute as i}from\"../../../lib/VertexAttribute.js\";import{BindType as c}from\"../../../../../webgl/BindType.js\";function T(T,u){const x=T.fragment;u.hasVertexTangents?(T.attributes.add(i.TANGENT,\"vec4\"),T.varyings.add(\"vTangent\",\"vec4\"),u.doubleSidedMode===n.WindingOrder?x.code.add(s`mat3 computeTangentSpace(vec3 normal) {\nfloat tangentHeadedness = gl_FrontFacing ? vTangent.w : -vTangent.w;\nvec3 tangent = normalize(gl_FrontFacing ? vTangent.xyz : -vTangent.xyz);\nvec3 bitangent = cross(normal, tangent) * tangentHeadedness;\nreturn mat3(tangent, bitangent, normal);\n}`):x.code.add(s`mat3 computeTangentSpace(vec3 normal) {\nfloat tangentHeadedness = vTangent.w;\nvec3 tangent = normalize(vTangent.xyz);\nvec3 bitangent = cross(normal, tangent) * tangentHeadedness;\nreturn mat3(tangent, bitangent, normal);\n}`)):x.code.add(s`mat3 computeTangentSpace(vec3 normal, vec3 pos, vec2 st) {\nvec3 Q1 = dFdx(pos);\nvec3 Q2 = dFdy(pos);\nvec2 stx = dFdx(st);\nvec2 sty = dFdy(st);\nfloat det = stx.t * sty.s - sty.t * stx.s;\nvec3 T = stx.t * Q2 - sty.t * Q1;\nT = T - normal * dot(normal, T);\nT *= inversesqrt(max(dot(T,T), 1.e-10));\nvec3 B = sign(det) * cross(normal, T);\nreturn mat3(T, B, normal);\n}`),u.textureCoordinateType!==r.None&&(T.include(a,u),x.uniforms.add(u.bindType===c.Pass?new l(\"normalTexture\",(e=>e.textureNormal)):new d(\"normalTexture\",(e=>e.textureNormal))),u.hasNormalTextureTransform&&(x.uniforms.add(new o(\"scale\",(e=>e.scale??t))),x.uniforms.add(new m(\"normalTextureTransformMatrix\",(t=>t.normalTextureTransformMatrix??e)))),x.code.add(s`vec3 computeTextureNormal(mat3 tangentSpace, vec2 uv) {\nvec3 rawNormal = textureLookup(normalTexture, uv).rgb * 2.0 - 1.0;`),u.hasNormalTextureTransform&&x.code.add(s`mat3 normalTextureRotation = mat3(normalTextureTransformMatrix[0][0]/scale[0], normalTextureTransformMatrix[0][1]/scale[1], 0.0,\nnormalTextureTransformMatrix[1][0]/scale[0], normalTextureTransformMatrix[1][1]/scale[1], 0.0,\n0.0, 0.0, 0.0 );\nrawNormal.xy = (normalTextureRotation * vec3(rawNormal.x, rawNormal.y, 1.0)).xy;`),x.code.add(s`return tangentSpace * rawNormal;\n}`))}export{T as ComputeNormalTexture};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,QAAQ,IAAIC,CAAC,QAAK,8DAA8D;AAAC,SAAOC,IAAI,IAAIC,CAAC,QAAK,8DAA8D;AAAC,SAAOC,qBAAqB,IAAIC,CAAC,QAAK,kDAAkD;AAAC,SAAOC,wBAAwB,IAAIC,CAAC,QAAK,gDAAgD;AAAC,SAAOC,sBAAsB,IAAIC,CAAC,QAAK,mBAAmB;AAAC,SAAOC,iBAAiB,IAAIC,CAAC,QAAK,0CAA0C;AAAC,SAAOC,IAAI,IAAIC,CAAC,QAAK,6BAA6B;AAAC,SAAOC,kBAAkB,IAAIC,CAAC,QAAK,2CAA2C;AAAC,SAAOC,oBAAoB,IAAIC,CAAC,QAAK,6CAA6C;AAAC,SAAOC,oBAAoB,IAAIC,CAAC,QAAK,6CAA6C;AAAC,SAAOC,eAAe,IAAIC,CAAC,QAAK,iCAAiC;AAAC,SAAOC,QAAQ,IAAIC,CAAC,QAAK,kCAAkC;AAAC,SAASC,CAACA,CAACA,CAAC,EAACC,CAAC,EAAC;EAAC,MAAMC,CAAC,GAACF,CAAC,CAACG,QAAQ;EAACF,CAAC,CAACG,iBAAiB,IAAEJ,CAAC,CAACK,UAAU,CAACC,GAAG,CAACT,CAAC,CAACU,OAAO,EAAC,MAAM,CAAC,EAACP,CAAC,CAACQ,QAAQ,CAACF,GAAG,CAAC,UAAU,EAAC,MAAM,CAAC,EAACL,CAAC,CAACQ,eAAe,KAAGxB,CAAC,CAACyB,YAAY,GAACR,CAAC,CAACS,IAAI,CAACL,GAAG,CAACjB,CAAC;AACzjC;AACA;AACA;AACA;AACA,EAAE,CAAC,GAACa,CAAC,CAACS,IAAI,CAACL,GAAG,CAACjB,CAAC;AAChB;AACA;AACA;AACA;AACA,EAAE,CAAC,IAAEa,CAAC,CAACS,IAAI,CAACL,GAAG,CAACjB,CAAC;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,CAAC,EAACY,CAAC,CAACW,qBAAqB,KAAG/B,CAAC,CAACgC,IAAI,KAAGb,CAAC,CAACc,OAAO,CAAC/B,CAAC,EAACkB,CAAC,CAAC,EAACC,CAAC,CAACa,QAAQ,CAACT,GAAG,CAACL,CAAC,CAACe,QAAQ,KAAGjB,CAAC,CAACkB,IAAI,GAAC,IAAItB,CAAC,CAAC,eAAe,EAAElB,CAAC,IAAEA,CAAC,CAACyC,aAAc,CAAC,GAAC,IAAIzB,CAAC,CAAC,eAAe,EAAEhB,CAAC,IAAEA,CAAC,CAACyC,aAAc,CAAC,CAAC,EAACjB,CAAC,CAACkB,yBAAyB,KAAGjB,CAAC,CAACa,QAAQ,CAACT,GAAG,CAAC,IAAInB,CAAC,CAAC,OAAO,EAAEV,CAAC,IAAEA,CAAC,CAAC2C,KAAK,IAAEzC,CAAE,CAAC,CAAC,EAACuB,CAAC,CAACa,QAAQ,CAACT,GAAG,CAAC,IAAIf,CAAC,CAAC,8BAA8B,EAAEZ,CAAC,IAAEA,CAAC,CAAC0C,4BAA4B,IAAE5C,CAAE,CAAC,CAAC,CAAC,EAACyB,CAAC,CAACS,IAAI,CAACL,GAAG,CAACjB,CAAC;AACzW,mEAAmE,CAAC,EAACY,CAAC,CAACkB,yBAAyB,IAAEjB,CAAC,CAACS,IAAI,CAACL,GAAG,CAACjB,CAAC;AAC9G;AACA;AACA,iFAAiF,CAAC,EAACa,CAAC,CAACS,IAAI,CAACL,GAAG,CAACjB,CAAC;AAC/F,EAAE,CAAC,CAAC;AAAA;AAAC,SAAOW,CAAC,IAAIsB,oBAAoB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}