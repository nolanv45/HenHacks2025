{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../core/Accessor.js\";\nimport { isSome as i } from \"../../../../core/arrayUtils.js\";\nimport \"../../../../core/has.js\";\nimport r from \"../../../../core/Error.js\";\nimport { makeHandle as s } from \"../../../../core/handleUtils.js\";\nimport a from \"../../../../core/Logger.js\";\nimport { findInMap as n } from \"../../../../core/MapUtils.js\";\nimport { abortMaybe as o, removeMaybe as l, destroyMaybe as h, disposeMaybe as d } from \"../../../../core/maybe.js\";\nimport { MinPriority as p } from \"../../../../core/MemCache.js\";\nimport c from \"../../../../core/PooledArray.js\";\nimport { throwIfAborted as y, createResolver as g, isAbortError as u, ignoreAbortErrors as m } from \"../../../../core/promiseUtils.js\";\nimport { when as b, watch as _, on as f, syncAndInitial as v, whenOnce as C } from \"../../../../core/reactiveUtils.js\";\nimport { schedule as S } from \"../../../../core/scheduling.js\";\nimport { property as G } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport { subclass as w } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { diff as x, isEmpty as P } from \"../../../../core/accessorSupport/diffUtils.js\";\nimport { i as R, g as D, h as E } from \"../../../../chunks/vec32.js\";\nimport { create as I } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport U from \"../../../../geometry/Extent.js\";\nimport A from \"../../../../geometry/Point.js\";\nimport { canProjectWithoutEngine as L } from \"../../../../geometry/projection.js\";\nimport { projectBuffer as O } from \"../../../../geometry/projection/projectBuffer.js\";\nimport { projectVectorToVector as j } from \"../../../../geometry/projection/projectVectorToVector.js\";\nimport { projectXYZToVector as V } from \"../../../../geometry/projection/projectXYZToVector.js\";\nimport { create as F, center as M, fromRect as T, equals as z } from \"../../../../geometry/support/aaBoundingBox.js\";\nimport { create as k } from \"../../../../geometry/support/aaBoundingRect.js\";\nimport { equals as W } from \"../../../../geometry/support/spatialReferenceUtils.js\";\nimport H from \"../../../../layers/Layer.js\";\nimport { getObjectId as N, computeAABB as B, hasGeometry as q } from \"../../../../layers/graphics/dehydratedFeatures.js\";\nimport { hydrateGraphic as Y } from \"../../../../layers/graphics/hydratedFeatures.js\";\nimport { PromiseQueue as Q } from \"../../../../layers/support/PromiseQueue.js\";\nimport $ from \"../../../../renderers/UniqueValueRenderer.js\";\nimport { isSupportedRenderer3D as Z, validateTo3D as J } from \"../../../../renderers/support/rendererConversion.js\";\nimport { RenderingInfo as X } from \"../../../../renderers/support/RenderingInfo.js\";\nimport { loadArcade as K } from \"../../../../support/arcadeOnDemand.js\";\nimport { isBasemapLayer as ee } from \"../../../../support/basemapUtils.js\";\nimport te from \"../../../../symbols/LabelSymbol3D.js\";\nimport ie from \"../../../../symbols/TextSymbol.js\";\nimport re from \"../../../../symbols/WebStyleSymbol.js\";\nimport { getDefaultSymbol3D as se } from \"../../../../symbols/support/defaults3D.js\";\nimport { to3D as ae } from \"../../../../symbols/support/symbolConversion.js\";\nimport { averageSymbolComplexities as ne, defaultSymbolComplexity as oe } from \"./defaultSymbolComplexity.js\";\nimport { DisplayFeatureLimit as le } from \"./DisplayFeatureLimit.js\";\nimport { ViewElevationProvider as he } from \"./ElevationQuery.js\";\nimport { VisibilityGroup as de, VisibilityFlag as pe } from \"./enums.js\";\nimport { extractExpressionInfo as ce, createContext as ye } from \"./featureExpressionInfoUtils.js\";\nimport { Graphics3DFeatureStore as ge } from \"./Graphics3DFeatureStore.js\";\nimport { Graphics3DGraphicCreationContext as ue } from \"./Graphics3DGraphicCreationContext.js\";\nimport { Graphics3DSymbolCreationContext as me } from \"./Graphics3DSymbolCreationContext.js\";\nimport { make as be } from \"./Graphics3DSymbolFactory.js\";\nimport { Graphics3DWebStyleSymbol as _e } from \"./Graphics3DWebStyleSymbol.js\";\nimport { GraphicsCorePerformanceInfo as fe } from \"./GraphicsCorePerformanceInfo.js\";\nimport { GraphicStateTracking as ve } from \"./GraphicStateTracking.js\";\nimport { computeCentroid as Ce } from \"./graphicUtils.js\";\nimport { FastUpdateStatus as Se, ApplyRendererDiffResult as Ge } from \"./interfaces.js\";\nimport { LoadStatus as we } from \"./Loadable.js\";\nimport { SpatialIndex2D as xe } from \"./SpatialIndex2D.js\";\nimport { StageLayerElevationProvider as Pe } from \"../support/StageLayerElevationProvider.js\";\nimport { toBoundingRect as Re } from \"../../support/extentUtils.js\";\nimport { GridLocalOriginFactory as De } from \"../../webgl-engine/lib/GridLocalOriginFactory.js\";\nimport { UpdatePolicy as Ee } from \"../../webgl-engine/lib/UpdatePolicy.js\";\nimport { affectsGeometry as Ie } from \"../../webgl-engine/lib/VertexAttribute.js\";\nimport { WebGLLayer as Ue } from \"../../webgl-engine/lib/WebGLLayer.js\";\nimport { hasPopupTemplate as Ae } from \"../../../layers/support/popupUtils.js\";\nimport { PropertiesPool as Le } from \"../../../support/PropertiesPool.js\";\nimport { ImmediateTask as Oe, noBudget as je, TaskPriority as Ve } from \"../../../support/Scheduler.js\";\nimport { Yield as Fe } from \"../../../support/Yield.js\";\nimport { alphaCutoff as Me } from \"../../../../webscene/support/AlphaCutoff.js\";\nvar Te;\nconst ze = I(),\n  ke = F();\nlet We = Te = class extends t {\n  get _viewSpatialReference() {\n    return this.owner.view.spatialReference;\n  }\n  get spatialIndex() {\n    return this._spatialIndex || (this._spatialIndex = new xe({\n      objectIdField: this.owner.layer?.objectIdField,\n      spatialReference: this._viewSpatialReference,\n      hasZ: !!this.hasZ,\n      hasM: !!this.hasM\n    }), this._spatialIndex.setup(Array.from(this.graphics3DGraphics.values()))), this._spatialIndex.update(), this._spatialIndex;\n  }\n  get deconflictor() {\n    return this._deconflictor;\n  }\n  get labeler() {\n    return this._labeler;\n  }\n  get numberOfGraphics() {\n    return this._numberOfGraphics;\n  }\n  get effectiveUpdatePolicy() {\n    return null != this.currentRenderer && \"dictionary\" === this.currentRenderer.type ? Ee.ASYNC : this._forcedUpdatePolicy ?? this.preferredUpdatePolicy;\n  }\n  get featureStore() {\n    return this._featureStore;\n  }\n  get initializePromise() {\n    return this._initializePromise;\n  }\n  get scaleVisibility() {\n    return this._scaleVisibility;\n  }\n  get elevationAlignment() {\n    return this._elevationAlignment;\n  }\n  get objectStates() {\n    return this._objectStates;\n  }\n  get filterVisibility() {\n    return this._filterVisibility;\n  }\n  get updating() {\n    return !!(this.dataUpdating || this._elevationAlignment?.updating || this._scaleVisibility?.updating || this._filterVisibility?.updating || this._rendererChangeAbortController || this._elevationInfoChangeAbortController || this._frameTaskHandle.updating || this.running);\n  }\n  get dataUpdating() {\n    return !!(this._graphicsWaitingForSymbol.size > 0 || this._pendingUpdates.size > 0 || this._spatialIndex?.updating || this._updatingPendingLoadedGraphicsChange || this._dataUpdateQueue.running || this._loadingSymbols > 0);\n  }\n  get running() {\n    return this._pendingUpdates.size > 0 || !!this._spatialIndex?.updating || this._dataUpdateQueue.running || this._updateQueue.running;\n  }\n  get suspendedOrOutsideOfView() {\n    return this.owner.suspended || !!this.owner.suspendInfo?.outsideOfView;\n  }\n  get updatingRemaining() {\n    return this.updating ? this._pendingUpdates.size + .1 * (this._spatialIndex?.updatingRemaining || 0) + .1 * (this._elevationAlignment?.updatingRemaining || 0) : 0;\n  }\n  get displayFeatureLimit() {\n    const e = this.owner && this.owner.view && this.owner.view.qualitySettings,\n      t = e?.graphics3D.minTotalNumberOfFeatures ?? 0,\n      i = e?.graphics3D.maxTotalNumberOfFeatures ?? 0,\n      r = e?.graphics3D.maxNumberOfDrawCalls ?? 0,\n      s = e?.graphics3D.maxTotalNumberOfVertices ?? 0,\n      a = this.averageSymbolComplexity,\n      n = Math.max(1, a?.verticesPerFeature ?? 1),\n      o = a && a.drawCallsPerFeature > 0 && r > 0 ? r / a.drawCallsPerFeature : i,\n      l = Math.ceil(s / n),\n      h = Math.max(t, Math.min(i, l, o)),\n      d = this._get(\"displayFeatureLimit\");\n    return d && d.maximumTotalNumberOfVertices === s && d.averageSymbolComplexity === a && d.maximumNumberOfFeatures === h ? d : new le(s, h, a);\n  }\n  get averageSymbolComplexity() {\n    const e = ne(this._symbolComplexities),\n      t = this._get(\"averageSymbolComplexity\");\n    return 0 === e.numComplexities || null != t && (e.estimated && (t.verticesPerFeature >= e.verticesPerFeature || t.verticesPerCoordinate >= e.verticesPerCoordinate || t.drawCallsPerFeature >= e.drawCallsPerFeature) || t.verticesPerFeature === e.verticesPerFeature && t.verticesPerCoordinate === e.verticesPerCoordinate && t.drawCallsPerFeature === e.drawCallsPerFeature) ? t : e;\n  }\n  get usedMemory() {\n    const e = this.labelsEnabled ? (this.averageSymbolComplexity?.memory.bytesPerFeatureLabel ?? 0) * this._numberOfGraphics : 0,\n      t = this._getSymbolComplexitiesUsed().reduce((e, t) => e + t.memory.resourceBytes, 0);\n    if (null == this._symbolMaterials) {\n      this._symbolMaterials = [];\n      for (const e of this._symbols.values()) if (null != e) for (const t of e.symbolLayers) if (t) for (const e of t.materials) e && this._symbolMaterials.push(e);\n    }\n    const i = this.owner.view._stage.renderer,\n      r = this.owner.view.basemapTerrain.overlayManager.renderer,\n      s = this._symbolMaterials.reduce((e, t) => e + ((i.getMaterialRenderer(t) || r.getMaterialRenderer(t))?.usedMemory ?? 0), 0);\n    return this._usedMemory + e + t + s;\n  }\n  get usedMemoryPerGraphic() {\n    if (this._usedMemory && this._numberOfGraphics) {\n      const e = this._numberOfGraphics / (this._numberOfGraphics + Math.max(this._pendingAdds, this._pendingRemoves));\n      return this._usedMemory / this._numberOfGraphics * e;\n    }\n    if (null != this.averageSymbolComplexity) {\n      const e = this.labelsEnabled ? this.averageSymbolComplexity.memory.bytesPerFeatureLabel : 0;\n      return this.averageSymbolComplexity.memory.bytesPerFeature + e;\n    }\n    return 0;\n  }\n  get unprocessedMemoryEstimate() {\n    return (this._pendingAdds - this._pendingRemoves) * this.usedMemoryPerGraphic;\n  }\n  get _symbolComplexities() {\n    return this.currentRenderer ? this._getSymbolComplexitiesUsedOrRenderer(this.currentRenderer) : this._getSymbolComplexitiesUsed();\n  }\n  get visible() {\n    return this._visible;\n  }\n  _getConvertedSymbol(e) {\n    const t = e;\n    if (\"web-style\" === t.type) return t.clone();\n    const i = this._symbolConversionCache.get(t.id);\n    if (null != i) return i;\n    const r = ae(t, {\n        geometryType: this.layer?.geometryType ?? void 0,\n        retainId: !0,\n        hasLabelingContext: this._hasLabelingContext(t),\n        cimFallbackEnabled: !0\n      }),\n      s = r.symbol || null;\n    return null == s && r.error && a.getLogger(this).error(r.error.message), this._symbolConversionCache.set(t.id, s), s;\n  }\n  _getSymbolComplexitiesUsedOrRenderer(e) {\n    if (null == e) return [];\n    const t = e.symbols,\n      i = \"backgroundFillSymbol\" in e ? e.backgroundFillSymbol : null;\n    if (!i && !t.length) return [];\n    const r = [],\n      s = this._getSymbolComplexityUsedOrRenderer(i);\n    null != s && r.push(s);\n    for (const a of t) {\n      const e = this._getSymbolComplexityUsedOrRenderer(a);\n      null != e && r.push(e);\n    }\n    return r;\n  }\n  _getSymbolComplexityUsedOrRenderer(e) {\n    if (null == e) return null;\n    const t = this._symbols.get(e.id);\n    if (null != t) return t.complexity;\n    const i = this._getConvertedSymbol(e);\n    return null != i ? oe(i) : null;\n  }\n  _getSymbolComplexitiesUsed() {\n    const e = [];\n    return this._symbols.forEach(t => {\n      null != t && e.push(t.complexity);\n    }), e;\n  }\n  get _objectIdField() {\n    return this.layer.objectIdField;\n  }\n  constructor(e) {\n    super(e), this._propertiesPool = new Le({\n      computedExtent: U\n    }, this), this.computedExtent = null, this.currentRenderer = null, this.rendererHasGeometryOperations = !1, this._graphicStateTracking = null, this.graphics3DGraphics = new Map(), this.stageLayer = null, this.stage = null, this._graphicsDrapedUids = new Set(), this._graphicsBySymbol = new Map(), this._symbolConversionCache = new Map(), this._symbols = new Map(), this._graphicsWithoutSymbol = new Map(), this._graphicsWaitingForSymbol = new Map(), this._graphicsUpdateId = 0, this._frameTaskHandle = Oe, this._dataUpdateQueue = new Q(), this._updateQueue = new Q(), this._suspendSymbolCleanup = !1, this._arcadeOnDemand = null, this._rendererChangeAbortController = null, this._elevationInfoChangeAbortController = null, this._initializeAbortController = null, this._elevationAlignment = null, this._scaleVisibility = null, this._filterVisibility = null, this._spatialIndex = null, this.extentPadding = 0, this._updatingPendingLoadedGraphicsChange = null, this._featureStore = null, this._deconflictor = null, this._labeler = null, this._objectStates = null, this._viewElevationProvider = null, this._stageLayerElevationProvider = null, this._sharedSymbolResourcesOwnerHandle = null, this._whenGraphics3DGraphicRequests = {}, this._pendingUpdates = new Map(), this._numberOfGraphics = 0, this._numberOfGraphicsProvidingElevation = 0, this._pendingAdds = 0, this._pendingRemoves = 0, this._applyPendingRemovesFirst = !1, this._loadingSymbols = 0, this._pendingUpdatesPool = new c({\n      allocator: e => e || new Ne(),\n      deallocator: e => (e.clear(), e)\n    }), this._symbolWarningLogged = !1, this._geometryWarningLogged = !1, this._objectIdInvisibleSet = new Set(), this._whenSymbolRemoved = new c(), this.preferredUpdatePolicy = Ee.SYNC, this._forcedUpdatePolicy = null, this.elevationFeatureExpressionEnabled = !0, this.owner = null, this.layer = null, this.graphicSymbolSupported = !0, this.getRenderingInfoWithoutRenderer = !1, this.setUidToIdOnAdd = !0, this.hasZ = null, this.hasM = null, this._usedMemory = 0, this._visible = !1, this._startCreateGraphics = !1, this._unusedSymbolsCache = e.owner.view.resourceController.memoryController.newCache(\"graphics-3d-unused-symbols\", e => e.destroy()), this.symbolCreationContext = new me(e.owner.view.resourceController.scheduler, (e, t) => this._updateQueue.push(e, t));\n  }\n  initialize() {\n    this._featureStore = new ge({\n      objectIdField: this.owner.layer?.objectIdField,\n      hasZ: !!this.hasZ,\n      hasM: !!this.hasM,\n      viewSpatialReference: this._viewSpatialReference,\n      featureSpatialReference: this.owner.featureSpatialReference,\n      getSpatialIndex: () => this.spatialIndex,\n      forEach: e => this.graphics3DGraphics.forEach(e)\n    });\n    const e = (e, t, i) => this.spatialIndex.queryGraphicUIDsInExtent(e, t, i),\n      {\n        componentFactories: t\n      } = this;\n    this._elevationAlignment = t.elevationAlignment?.(this, e), this._scaleVisibility = t.scaleVisibility?.(this, e), this._filterVisibility = t.filterVisibility?.({\n      featureStore: this._featureStore,\n      getFeatureCount: () => this.graphics3DGraphics.size,\n      updateFeatureVisibilities: e => this.modifyGraphics3DGraphicVisibilities(t => t.setVisibilityFlag(de.GRAPHIC, pe.FILTER, e(N(t.graphic, this._objectIdField)))),\n      setAllFeaturesVisibility: e => this.modifyGraphics3DGraphicVisibilities(t => t.setVisibilityFlag(de.GRAPHIC, pe.FILTER, e)),\n      clearFeaturesVisibility: () => this.modifyGraphics3DGraphicVisibilities(e => e.setVisibilityFlag(de.GRAPHIC, pe.FILTER, !0))\n    }), this._deconflictor = t.deconflictor?.(this), this._labeler = t.labeler?.(this, this._scaleVisibility), this._objectStates = t.objectStates?.(this), this._initializeAbortController = new AbortController(), this.addHandles(b(() => this.owner.view.state.highlights, () => {\n      const {\n        highlightOrderMap: e\n      } = this.owner.view.state;\n      this.graphics3DGraphics.forEach(t => t.updateHighlights(e));\n    })), this._initializePromise = this._initializeAsync();\n  }\n  async _initializeAsync() {\n    const e = this._initializeAbortController?.signal,\n      t = this.owner.view;\n    this._viewElevationProvider = new he(this._viewSpatialReference, t), this._initializeStage(t, this.layer.uid);\n    const i = t.sharedSymbolResources;\n    this.symbolCreationContext.sharedResources = i, this._sharedSymbolResourcesOwnerHandle = i.addGraphicsOwner(this.owner), null != this.currentRenderer && (this.symbolCreationContext.renderer = this.currentRenderer), this.symbolCreationContext.stage = this.stage, this.symbolCreationContext.streamDataRequester = i.streamDataRequester, this.symbolCreationContext.renderCoordsHelper = t.renderCoordsHelper, this.symbolCreationContext.layer = this.layer, this.symbolCreationContext.graphicsCoreOwner = this.owner, this.symbolCreationContext.localOriginFactory = new De(t.renderSpatialReference), this.symbolCreationContext.elevationProvider = t.elevationProvider, this.symbolCreationContext.notifyGraphicGeometryChanged = e => this.notifyGraphicGeometryChanged(e), this.symbolCreationContext.notifyGraphicVisibilityChanged = e => this.notifyGraphicVisibilityChanged(e);\n    const r = ce(this.layer.elevationInfo, this.elevationFeatureExpressionEnabled);\n    if (this.symbolCreationContext.featureExpressionInfoContext = await ye(r, this._viewSpatialReference, e, a.getLogger(this)), y(e), this.symbolCreationContext.screenSizePerspectiveEnabled = t.screenSizePerspectiveEnabled && !!this.layer.screenSizePerspectiveEnabled, this.symbolCreationContext.slicePlaneEnabled = !!this.owner.slicePlaneEnabled, this.symbolCreationContext.physicalBasedRenderingEnabled = !!this.owner.view.qualitySettings?.physicallyBasedRenderingEnabled, this.symbolCreationContext.skipHighSymbolLods = !!this.owner.view.qualitySettings?.graphics3D?.skipHighSymbolLods, \"drapeSourceType\" in this.owner) {\n      const {\n        owner: e\n      } = this;\n      this.symbolCreationContext.drapeSourceRenderer = t.basemapTerrain.overlayManager.registerGeometryDrapeSource(e), this.addHandles(s(() => t.basemapTerrain.overlayManager.unregisterDrapeSource(e)));\n    }\n    this.addHandles([_(() => this.suspendedOrOutsideOfView, () => this._updateQueue.unshift(() => this._updateLayerVisibility(), null).catch(m)), _(() => [this.layer?.screenSizePerspectiveEnabled, this.owner.view?.screenSizePerspectiveEnabled], () => {\n      const e = t.screenSizePerspectiveEnabled && !!this.layer.screenSizePerspectiveEnabled;\n      e !== this.symbolCreationContext.screenSizePerspectiveEnabled && (this.symbolCreationContext.screenSizePerspectiveEnabled = e, this._labeler?.reset(), this.recreateAllGraphicsAndSymbols());\n    }), _(() => this.owner.slicePlaneEnabled, e => this._slicePlaneEnabledChange(!!e)), _(() => this.owner.view.state?.rasterPixelRatio, () => this._pixelRatioChange()), _(() => !!this.owner.view.qualitySettings?.physicallyBasedRenderingEnabled, e => this._physicalBasedRenderingChange(e)), _(() => !!this.owner.view.qualitySettings?.graphics3D?.skipHighSymbolLods, e => this._skipHighSymbolLoDsChange(e)), _(() => this.owner.view.focusAreas.activePolygons, () => this._updateFocusedLabels()), _(() => this.owner.view.focusAreas.style, () => this.recreateAllGraphicsAndSymbols()), b(() => t.basemapTerrain?.tilingScheme, e => {\n      if (e.spatialReference.equals(this.symbolCreationContext.overlaySR) || null == t.basemapTerrain.spatialReference || (this.symbolCreationContext.overlaySR = t.basemapTerrain.spatialReference), this.hasHandles(\"loaded-graphics\")) this.recreateAllGraphics();else {\n        const e = () => this.owner?.loadedGraphics;\n        this.addHandles([f(e, \"change\", e => {\n          this._graphicsCollectionChanged(e), this._signalUpdatingDuringAsyncLoadedGraphicsChange();\n        }, {\n          onListenerAdd: () => {\n            this.recreateAllGraphics(), this._signalUpdatingDuringAsyncLoadedGraphicsChange();\n          }\n        })], \"loaded-graphics\");\n      }\n    }, {\n      initial: !0\n    }), _(() => this.effectiveUpdatePolicy, e => {\n      null != this.stageLayer && (this.stageLayer.updatePolicy = e), this.symbolCreationContext.isAsync = this.effectiveUpdatePolicy === Ee.ASYNC, e === Ee.SYNC && this.runTask(je);\n    }, v)]), this._frameTaskHandle = t.resourceController.scheduler.registerTask(Ve.GRAPHICS_CORE, this), this.layer && \"featureReduction\" in this.layer && this.addHandles(_(() => this.layer.featureReduction, () => this._deconflictor?.featureReductionChange())), this.notifyChange(\"averageSymbolComplexity\"), this.rendererChange(this.owner.renderer).catch(() => {}), this._initializeAbortController = null;\n  }\n  _abortInitialize() {\n    this._initializeAbortController && (this._initializeAbortController.abort(), this._initializeAbortController = null);\n  }\n  _updateFocusedLabels() {\n    this.forEachGraphics3DSymbol((e, t) => {\n      e.updateFocus(e => {\n        this.recreateGraphics([e.graphic]);\n      }, t);\n    });\n  }\n  destroy() {\n    this._unusedSymbolsCache.destroy(), this._abortInitialize(), this._rendererChangeAbortController = o(this._rendererChangeAbortController), this._abortElevationInfoChange(), this._frameTaskHandle.remove(), this._frameTaskHandle = Oe, this._dataUpdateQueue.cancelAll(), this._updateQueue.cancelAll(), this._deconflictor = l(this._deconflictor), this._labeler = l(this._labeler), this._elevationAlignment = h(this._elevationAlignment), this._scaleVisibility = h(this._scaleVisibility), this._filterVisibility = h(this._filterVisibility), this._objectStates = h(this._objectStates), this.clear(), this._featureStore = h(this._featureStore), this._updatingPendingLoadedGraphicsChange = l(this._updatingPendingLoadedGraphicsChange), this._graphicStateTracking = h(this._graphicStateTracking), this.stage && (this.stageLayer = h(this.stageLayer), this.stage = null), this._set(\"owner\", null);\n    for (const e in this._whenGraphics3DGraphicRequests) this._whenGraphics3DGraphicRequests[e].reject(new r(\"graphic:layer-destroyed\", \"Layer has been destroyed\"));\n    this._whenGraphics3DGraphicRequests = null, this._sharedSymbolResourcesOwnerHandle = l(this._sharedSymbolResourcesOwnerHandle), this._propertiesPool = h(this._propertiesPool), this._pendingUpdatesPool = null, this._symbolConversionCache.clear(), this._objectIdInvisibleSet.clear(), this._spatialIndex = h(this._spatialIndex);\n  }\n  clear() {\n    this._objectStates?.allGraphicsDeleted(), null != this._graphicStateTracking && this._graphicStateTracking.allGraphicsDeleted(), this.graphics3DGraphics.forEach(e => e.destroy()), this._spatialIndex?.clear(), this.graphics3DGraphics.clear(), this._numberOfGraphics = 0, this._usedMemory = 0, this._updateLayerVisibility(), this._symbols.forEach(h), this._symbols.clear(), this._symbolMaterials = null, this._graphicsBySymbol.clear(), this._graphicsWithoutSymbol.clear(), this._graphicsWaitingForSymbol.clear(), this._pendingUpdates.clear(), this._pendingUpdatesPool.clear(), this._pendingAdds = 0, this._pendingRemoves = 0, this._applyPendingRemovesFirst = !1, this.notifyChange(\"dataUpdating\"), this.notifyChange(\"running\"), this.notifyChange(\"updatingRemaining\"), this._featureStore.events.emit(\"changed\");\n  }\n  _initializeStage(e, t) {\n    this.stage = e._stage, this.stageLayer = new Ue(this.stage, {\n      visible: !this.suspendedOrOutsideOfView,\n      updatePolicy: this.effectiveUpdatePolicy\n    }, t);\n    const i = this.stageLayer.events;\n    i.on(\"transformationChanged\", e => this.notifyGraphicGeometryChanged(e.graphicUid)), i.on(\"shaderTransformationChanged\", e => this.notifyGraphicGeometryChanged(e.graphicUid)), i.on(\"visibilityChanged\", e => this.notifyGraphicVisibilityChanged(e.graphicUid)), i.on(\"geometryAdded\", e => this.notifyGraphicGeometryChanged(e.object.graphicUid)), i.on(\"geometryRemoved\", e => this.notifyGraphicGeometryChanged(e.object.graphicUid)), i.on(\"attributesChanged\", e => Ie(e.attribute) && this.notifyGraphicGeometryChanged(e.object.graphicUid));\n  }\n  notifyGraphicGeometryChanged(e) {\n    if (null == this._graphicStateTracking || null == e) return;\n    const t = this.graphics3DGraphics.get(e);\n    t && this._graphicStateTracking.updateGraphicGeometry(t);\n  }\n  notifyGraphicVisibilityChanged(e) {\n    if (null == this._graphicStateTracking || null == e) return;\n    const t = this.graphics3DGraphics.get(e);\n    t && this._graphicStateTracking.updateGraphicVisibility(t);\n  }\n  _updateLayerVisibility() {\n    const e = this.displayFeatureLimit.maximumNumberOfFeatures,\n      t = this._numberOfGraphics > e * Be,\n      i = !this.suspendedOrOutsideOfView && !t;\n    i !== this._visible && (this._visible = i, this._updateStageLayerVisibility());\n  }\n  _updateStageLayerVisibility() {\n    const e = this._visible && (null == this.layer.opacity || this.layer.opacity >= Me);\n    this.stageLayer.visible !== e && (this.stageLayer.visible = e, e ? this.updateGraphicsVisibilities() : this._hideAllGraphics());\n  }\n  getGraphics3DGraphicById(e) {\n    return null != e ? this.graphics3DGraphics.get(e) : void 0;\n  }\n  getGraphics3DGraphicByObjectId(e) {\n    return this.owner.layer?.objectIdField ? this._findGraphics3DGraphicByObjectId(e) : null;\n  }\n  _getGraphicObjectID(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.owner.layer?.objectIdField;\n    return N(e, t);\n  }\n  get graphics3DGraphicsByObjectID() {\n    const e = this.owner.layer?.objectIdField;\n    if (!e) return;\n    const t = new Map();\n    return this.graphics3DGraphics.forEach(i => {\n      if (!i) return;\n      const r = i.graphic,\n        s = this._getGraphicObjectID(r, e);\n      null != s && t.set(s, i);\n    }), t;\n  }\n  get labelsEnabled() {\n    return !!this._labeler?.layerLabelsEnabled();\n  }\n  async updateLabelingInfo(e) {\n    const t = this._deconflictor?.labelingInfoChange(e),\n      i = this._labeler?.labelingInfoChange(e);\n    await Promise.allSettled([t, i]);\n  }\n  updateVisibilityInfo() {\n    this._deconflictor?.labelingInfoChange(), this._labeler?.visibilityInfoChange();\n  }\n  get symbolUpdateType() {\n    if (this._pendingUpdates.size > 0) return \"unknown\";\n    let e = !1,\n      t = !1;\n    for (const [i, r] of this._symbols) if (null != r) {\n      switch (r.getFastUpdateStatus()) {\n        case Se.Loading:\n          return \"unknown\";\n        case Se.Fast:\n          this._graphicsBySymbol.has(i) && (t = !0);\n          break;\n        case Se.Slow:\n          this._graphicsBySymbol.has(i) && (e = !0);\n          break;\n        case Se.Mixed:\n          this._graphicsBySymbol.has(i) && (t = e = !0);\n        case Se.Undefined:\n      }\n    }\n    return t ? e ? \"mixed\" : \"fast\" : e ? \"slow\" : \"mixed\";\n  }\n  runTask(e) {\n    if (this._dataUpdateQueue.runTask(e), this._updateQueue.runTask(e), this._applyPendingUpdates(e), this.notifyChange(\"running\"), this.running || this.notifyChange(\"dataUpdating\"), this.notifyChange(\"updatingRemaining\"), !e.hasProgressed) return Fe;\n  }\n  setObjectIdVisibility(e, t) {\n    t ? this._objectIdInvisibleSet.delete(e) : this._objectIdInvisibleSet.add(e);\n    const i = this._findGraphics3DGraphicByObjectId(e);\n    null != i && this._updateUserVisibility(i);\n  }\n  _findGraphics3DGraphicByObjectId(e) {\n    return n(this.graphics3DGraphics, t => this._getGraphicObjectID(t.graphic) === e);\n  }\n  _updateUserVisibility(e) {\n    if (null == e) return !1;\n    const t = e.graphic,\n      i = this._getGraphicObjectID(t),\n      r = t.visible && !this.owner.suspended && this.stageLayer.visible && (null == i || !this._objectIdInvisibleSet.has(i));\n    return e.setVisibilityFlag(de.GRAPHIC, pe.USER, r);\n  }\n  _whenGraphics3DGraphic(e) {\n    const t = this.graphics3DGraphics.get(e.uid);\n    if (t) return Promise.resolve(t);\n    const i = this._whenGraphics3DGraphicRequests[e.uid];\n    if (i) return i.promise;\n    const r = g();\n    return this._whenGraphics3DGraphicRequests[e.uid] = r, r.promise;\n  }\n  async _boundsForGraphics3DGraphic(e, t) {\n    const i = this._viewSpatialReference,\n      r = this.owner.view.renderSpatialReference,\n      s = this.owner.view.basemapTerrain.spatialReference,\n      a = (e, t, s) => O(e, r, t, e, i, t, s),\n      n = (e, t, r) => O(e, s, t, e, i, t, r),\n      o = this._viewElevationProvider ? {\n        service: this._viewElevationProvider,\n        useViewElevation: null != t && !!t.useViewElevation,\n        minDemResolution: null != t ? t.minDemResolution : null,\n        minDemResolutionForPoints: this.owner.view.resolution\n      } : null,\n      l = await e.getProjectedBoundingBox(a, n, o, t?.signal);\n    if (!l) return null;\n    const h = l.boundingBox;\n    if (l.requiresDrapedElevation) {\n      const e = this.symbolCreationContext.elevationProvider;\n      if (e) {\n        M(h, ze);\n        const t = e.getElevation(ze[0], ze[1], 0, i, \"ground\") ?? 0;\n        h[2] = Math.min(h[2], t), h[5] = Math.max(h[5], t);\n      }\n    }\n    return {\n      boundingBox: h,\n      screenSpaceObjects: l.screenSpaceObjects\n    };\n  }\n  async whenGraphicBounds(e, t) {\n    await C(() => this.owner?.loadedGraphics);\n    const i = this.owner.layer?.objectIdField,\n      s = this.owner.loadedGraphics.find(t => t === e || null != i && null != t.attributes && e.attributes && t.attributes[i] === e.attributes[i]);\n    if (!s) throw new r(\"internal:graphic-not-part-of-view\", \"Graphic is not part of this view\");\n    const a = await this._whenGraphics3DGraphic(s);\n    return this._boundsForGraphics3DGraphic(a, t);\n  }\n  computeAttachmentOrigin(e, t) {\n    const i = this.graphics3DGraphics.get(e.uid);\n    if (!i) return null;\n    const r = i.computeAttachmentOrigin();\n    if (0 === r.render.num && 0 === r.draped.num) return null;\n    R(qe, 0, 0, 0);\n    let s = 0;\n    if (r.render.num > 0) {\n      if (!j(r.render.origin, this.symbolCreationContext.renderCoordsHelper.spatialReference, Ye, t)) return null;\n      D(qe, qe, Ye), s++;\n    }\n    if (r.draped.num > 0) {\n      const [e, i] = r.draped.origin,\n        a = this._viewElevationProvider.getElevation(e, i, \"ground\") ?? 0;\n      if (R(Ye, e, i, a), !j(Ye, this._viewElevationProvider.spatialReference, Ye, t)) return null;\n      D(qe, qe, Ye), s++;\n    }\n    return s > 1 && E(qe, qe, 1 / s), new A({\n      x: qe[0],\n      y: qe[1],\n      z: qe[2],\n      spatialReference: t\n    });\n  }\n  getSymbolLayerSize(e, t) {\n    const i = this._symbols.get(e.id);\n    if (null == i) throw new r(\"internal:symbol-not-part-of-view\", \"Symbol is not part of this view\");\n    const s = e.symbolLayers.indexOf(t);\n    if (-1 === s) throw new r(\"internal:missing-symbol-layer\", \"Symbol layer is not in symbol\");\n    const a = i.getSymbolLayerSize(s);\n    if (null == a) throw new r(\"internal:missing-size\", \"Symbol layer has no valid size\");\n    return a;\n  }\n  _graphicsCollectionChanged(e) {\n    this._startCreateGraphics && (this.add(e.added), this.remove(e.removed));\n  }\n  graphicUpdateHandler(e) {\n    const t = e.graphic.uid,\n      i = this.graphics3DGraphics.get(t);\n    if (null != i || null != this._graphicsWithoutSymbol.get(t)) switch (e.property) {\n      case \"visible\":\n        this._graphicUpdateVisibleHandler(i);\n        break;\n      case \"geometry\":\n        this._graphicUpdateGeometryHandler(i, e);\n        break;\n      case \"symbol\":\n        this._graphicUpdateSymbolHandler(i, e);\n        break;\n      case \"attributes\":\n        break;\n      case \"origin-transform\":\n        this._graphicUpdateTransformHandler(i, e);\n    }\n  }\n  _graphicUpdateGeometryHandler(e, t) {\n    this._graphicUpdateGeometryOrTransformHandler(e, t, () => !(null == t.newValue || null == e || !e.graphics3DSymbol.updateGeometry(e, t.newValue) || !(this._labeler?.updateGraphicGeometry(e) ?? 1)) && (this._labeler?.setDirty(), !0));\n    const i = t.graphic.geometry;\n    null != i && this._expandComputedExtent(i);\n  }\n  _graphicUpdateTransformHandler(e, t) {\n    const i = t.graphic.geometry;\n    this._graphicUpdateGeometryOrTransformHandler(e, t, () => null != t.newValue && null != e && null != i && e.graphics3DSymbol.updateTransform(e, i.spatialReference, t.newValue, t.action));\n  }\n  _graphicUpdateGeometryOrTransformHandler(e, t, i) {\n    if (null != t.graphic.geometry) {\n      if (null != e) i() || this._recreateGraphic(e.graphic);else {\n        const e = t.graphic.symbol?.id;\n        if (e) {\n          const t = this._symbols.get(e);\n          if (null != t && t.loadStatus === we.LOADING) return;\n        }\n        this._recreateGraphic(t.graphic);\n      }\n    } else this._recreateGraphic(t.graphic);\n  }\n  _graphicUpdateSymbolHandler(e, t) {\n    const i = t.graphic,\n      r = null != e ? e.graphics3DSymbol : null != t.oldValue ? this._symbols.get(t.oldValue.id) : null;\n    if (null == r || null == t.newValue) return void this._recreateGraphic(i);\n    const s = r.symbol,\n      a = this._getConvertedSymbol(t.newValue);\n    if (null != a && (a.type !== s.type || \"web-style\" === a.type) || \"web-style\" === s.type) return void this._recreateGraphic(i);\n    const n = this._graphicsBySymbol.get(s.id);\n    if (n && 1 !== n.size) return void this._recreateGraphic(i);\n    const o = x(s, a);\n    if (null == o) return void this._updateSymbolMapping(s.id, a);\n    const l = {\n      diff: o,\n      graphics3DGraphicPatches: [],\n      symbolStatePatches: []\n    };\n    if (r.prepareSymbolPatch(l), !P(l.diff)) return void this._recreateGraphic(i);\n    const h = this._getRenderingInfo(i);\n    if (null == h) return void this._recreateGraphic(i);\n    const d = r.extentPadding;\n    for (const p of l.symbolStatePatches) p();\n    if (d !== r.extentPadding && this._recomputeExtentPadding(), null != e) for (const p of l.graphics3DGraphicPatches) p(e, h);\n    this._updateSymbolMapping(s.id, a);\n  }\n  _graphicUpdateVisibleHandler(e) {\n    this._updateUserVisibility(e) && (this._labeler?.setDirty(), this._deconflictor?.setDirty());\n  }\n  recreateGraphics(e) {\n    this._suspendSymbolCleanup = !0, this.remove(e), this.add(e), this._suspendSymbolCleanup = !1, this.effectiveUpdatePolicy === Ee.SYNC && this._cleanupSymbols();\n  }\n  _recreateGraphic(e) {\n    this.recreateGraphics([e]);\n  }\n  _beginGraphicUpdate(e) {\n    const t = this._graphicsUpdateId;\n    return this._graphicsUpdateId++, this._graphicsWaitingForSymbol.set(e.uid, t), 1 === this._graphicsWaitingForSymbol.size && this.notifyChange(\"dataUpdating\"), t;\n  }\n  _endGraphicUpdate(e, t) {\n    e && (t && this._graphicStateTracking?.updateGraphicError(e, t), this._graphicsWaitingForSymbol.delete(e.uid), 0 === this._graphicsWaitingForSymbol.size && (this._cleanupSymbols(), this.notifyChange(\"dataUpdating\")));\n  }\n  _recomputeExtentPadding() {\n    let e = 0;\n    this._symbols.forEach(t => {\n      null != t && (e = Math.max(e, t.extentPadding));\n    }), this._set(\"extentPadding\", e);\n  }\n  _expandComputedExtent(e) {\n    const t = ke,\n      i = e.spatialReference;\n    B(e, t);\n    const r = this._viewSpatialReference,\n      s = Te.tmpVec;\n    if (W(i, r) || V(t[0], t[1], 0, i, s, r) && (t[0] = s[0], t[1] = s[1], V(t[3], t[4], 0, i, s, r), t[3] = s[0], t[4] = s[1]), !(isFinite(t[0]) && isFinite(t[3]) && isFinite(t[1]) && isFinite(t[4]))) return;\n    const a = this.computedExtent;\n    let n = null;\n    const o = isFinite(t[2]) && isFinite(t[5]),\n      l = o && (null == a?.zmin || t[2] < a.zmin),\n      h = o && (null == a?.zmax || t[5] > a.zmax);\n    if (a) {\n      (t[0] < a.xmin || t[1] < a.ymin || t[3] > a.xmax || t[4] > a.ymax || l || h) && (n = this._propertiesPool.get(\"computedExtent\"), n.xmin = Math.min(t[0], a.xmin), n.ymin = Math.min(t[1], a.ymin), n.xmax = Math.max(t[3], a.xmax), n.ymax = Math.max(t[4], a.ymax), n.spatialReference = r);\n    } else n = this._propertiesPool.get(\"computedExtent\"), n.xmin = t[0], n.ymin = t[1], n.xmax = t[3], n.ymax = t[4], n.spatialReference = r;\n    n && (l && (n.zmin = t[2]), h && (n.zmax = t[5]), this._set(\"computedExtent\", n));\n  }\n  _abortElevationInfoChange() {\n    this._elevationInfoChangeAbortController && (this._elevationInfoChangeAbortController.abort(), this._elevationInfoChangeAbortController = null);\n  }\n  async elevationInfoChange() {\n    this._abortElevationInfoChange();\n    const e = new AbortController();\n    this._elevationInfoChangeAbortController = e;\n    const t = ce(this.layer.elevationInfo, this.elevationFeatureExpressionEnabled);\n    this.symbolCreationContext.featureExpressionInfoContext = await ye(t, this._viewSpatialReference, e.signal, a.getLogger(this)), y(e.signal), this._elevationInfoChangeAbortController = null, this._labeler?.elevationInfoChange(), this.forEachGraphics3DSymbol((e, t, i) => {\n      e.globalPropertyChanged(\"elevationInfo\", t) ? t.forEach(e => {\n        const t = e.graphic,\n          i = e.labelLayers;\n        for (const r of i) {\n          r.graphics3DSymbolLayer.updateGraphicElevationContext(t, r);\n        }\n      }) : this._recreateSymbol(i);\n    }), this.updateStageLayerElevationProvider(), this._elevationAlignment?.elevationInfoChange();\n  }\n  updateStageLayerElevationProvider() {\n    this._stageLayerElevationProvider ? (this.layer.elevationInfo && \"relative-to-scene\" === this.layer.elevationInfo.mode || 0 === this._numberOfGraphicsProvidingElevation) && (this.owner.view.elevationProvider.unregister(this._stageLayerElevationProvider), this._stageLayerElevationProvider = d(this._stageLayerElevationProvider)) : (!this.layer.elevationInfo || this.layer.elevationInfo && \"relative-to-scene\" !== this.layer.elevationInfo.mode) && this._numberOfGraphicsProvidingElevation > 0 && (this._stageLayerElevationProvider = new Pe({\n      layer: this.layer,\n      stageLayer: this.stageLayer,\n      view: this.owner.view\n    }), this.owner.view.elevationProvider.register(\"scene\", this._stageLayerElevationProvider));\n  }\n  _clearSymbolsAndGraphics() {\n    this.clear(), null != this._filterVisibility && this._filterVisibility.clear(), this._labeler?.reset(), this._deconflictor?.clear(), this._elevationAlignment?.clear(), this.stageLayer?.invalidateSpatialQueryAccelerator(), this._stageLayerElevationProvider && (this.owner.view.elevationProvider.unregister(this._stageLayerElevationProvider), this._stageLayerElevationProvider = d(this._stageLayerElevationProvider));\n  }\n  startCreateGraphics() {\n    this._startCreateGraphics = !0, this.recreateAllGraphics();\n  }\n  recreateAllGraphics() {\n    this._recreateAllGraphics(!1);\n  }\n  recreateAllGraphicsAndSymbols() {\n    this._recreateAllGraphics(!0);\n  }\n  _recreateAllGraphics() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;\n    if (!this._startCreateGraphics) return;\n    const {\n        loadedGraphics: t,\n        view: i\n      } = this.owner,\n      r = i.basemapTerrain.tilingScheme && t?.length ? t.toArray() : null;\n    !e && r || this._clearSymbolsAndGraphics(), this.symbolCreationContext.screenSizePerspectiveEnabled = this.owner.view.screenSizePerspectiveEnabled && !!this.layer.screenSizePerspectiveEnabled, this.symbolCreationContext.slicePlaneEnabled = !!this.owner.slicePlaneEnabled, this._set(\"computedExtent\", null), r && (e ? this.add(r) : this.recreateGraphics(r));\n  }\n  _recreateSymbol(e) {\n    const t = this._graphicsBySymbol.get(e),\n      i = [];\n    t && (t.forEach((e, t) => {\n      const r = e.usedMemory;\n      this._conditionalRemove(e, t), this._spatialIndex?.remove(e), i.push(e.graphic), e.destroy(), this._removeGraphics3DGraphic(t, r), this._updateLayerVisibility(), this._featureStore.events.emit(\"changed\");\n    }), this._graphicsBySymbol.set(e, new Map()));\n    const r = this._symbols.get(e);\n    h(r), this._symbols.delete(e), this._symbolMaterials = null, this.add(i);\n  }\n  _recreateGraphicsForSymbol(e) {\n    const t = this._graphicsBySymbol.get(e);\n    if (t) {\n      const e = [];\n      t.forEach(t => e.push(t.graphic)), this.recreateGraphics(e);\n    }\n  }\n  _conditionalRemove(e, t) {\n    this._graphicsDrapedUids.delete(t), this._objectStates?.removeGraphic(e), this._labeler?.removeGraphic(e), this._deconflictor?.removeGraphic(e), null != this._graphicStateTracking && this._graphicStateTracking.removeGraphic(e);\n  }\n  add(e) {\n    e && 0 !== e.length && (this.owner.view.basemapTerrain?.tilingScheme ? (this._updatePolicyForGraphics(e) === Ee.ASYNC ? this._addDelayed(e) : this._addImmediate(e), this.notifyChange(\"dataUpdating\")) : a.getLogger(this).error(\"#add()\", \"Cannot add graphics before terrain surface has been initialized\"));\n  }\n  _updatePolicyForGraphics(e) {\n    if (this.effectiveUpdatePolicy === Ee.SYNC && (\"mesh\" === this.layer.geometryType || null == this.layer.geometryType)) for (const t of e) if (null != t.geometry && \"mesh\" === t.geometry.type && !t.geometry.loaded) return Ee.ASYNC;\n    return this.effectiveUpdatePolicy;\n  }\n  _addImmediate(e) {\n    this._geometryWarningLogged = !1, this._symbolWarningLogged = !1;\n    for (const t of e) this._addGraphic(t, this._getRenderingInfo(t, a.getLogger(this)), Ee.SYNC);\n    this._cleanupSymbols(), this._labeler?.setDirty(), this._deconflictor?.setDirty();\n  }\n  _addDelayed(e) {\n    for (const t of e) {\n      const e = t.uid;\n      let i = this._pendingUpdates.get(e);\n      i ? i.add ? i.state !== He.NEW && i.abortController?.abort() : this._pendingAdds++ : (i = this._pendingUpdatesPool.pushNew(), this._pendingAdds++, this._pendingUpdates.set(e, i)), i.add = t;\n    }\n    this.notifyChange(\"running\"), this.notifyChange(\"updatingRemaining\"), this.notifyChange(\"dataUpdating\");\n  }\n  remove(e) {\n    this.effectiveUpdatePolicy === Ee.ASYNC ? this._removeDelayed(e) : this._removeImmediate(e), this.notifyChange(\"dataUpdating\");\n  }\n  _removeImmediate(e) {\n    for (const t of e) this._removeGraphic(t);\n    this._cleanupSymbols(), this._labeler?.setDirty(), this._deconflictor?.setDirty();\n  }\n  _removeDelayed(e) {\n    for (const t of e) {\n      const e = t.uid,\n        i = this._pendingUpdates.get(e);\n      if (i) i.add && (i.remove ? i.add = null : this._pendingUpdates.delete(e), i.state === He.LOADING && i.abortController?.abort(), this._pendingAdds--);else {\n        const i = this._pendingUpdatesPool.pushNew();\n        i.remove = t, this._pendingUpdates.set(e, i), this._pendingRemoves++, this._applyPendingRemovesFirst = !0;\n      }\n    }\n    0 === this._pendingUpdates.size && this._finishPendingUpdates(), this.notifyChange(\"running\"), this.notifyChange(\"updatingRemaining\"), this.notifyChange(\"dataUpdating\");\n  }\n  _finishPendingUpdates() {\n    this._pendingUpdatesPool.clear(), this._cleanupSymbols(), (this._pendingAdds || this._pendingRemoves) && a.getLogger(this).warn(\"pendingAdds/Removes in inconsistent state!\"), this._pendingAdds = 0, this._pendingRemoves = 0, this._applyPendingRemovesFirst = !1;\n  }\n  _applyPendingUpdates(e) {\n    if (this._geometryWarningLogged = !1, this._symbolWarningLogged = !1, 0 === this._pendingUpdates.size && this._spatialIndex?.updating) return this._spatialIndex.update(), void e.madeProgress();\n    if (this._applyPendingRemovesFirst) {\n      this._applyPendingRemovesFirst = !1;\n      for (const [t, i] of this._pendingUpdates) {\n        if (e.done) {\n          this._applyPendingRemovesFirst = !0;\n          break;\n        }\n        if (i.remove && !i.add && (this._pendingRemoves--, e.madeProgress(), this._removeGraphic(i.remove), i.remove = null, this._pendingUpdates.delete(t), 0 === this._pendingRemoves)) break;\n      }\n    }\n    for (const [t, i] of this._pendingUpdates) {\n      if (e.done) break;\n      i.add && i.state === He.NEW && this._processPendingUpdateNew(i);\n      let r = this.effectiveUpdatePolicy;\n      if (!i.remove || i.add && i.state !== He.READY || (this._pendingRemoves--, e.madeProgress(), this._removeGraphic(i.remove), i.remove = null, r = Ee.SYNC), i.add) switch (i.state) {\n        case He.READY:\n          this._addGraphic(i.add, i.renderingInfo, r), i.add = null, this._pendingAdds--, e.madeProgress();\n          break;\n        case He.REJECTED:\n          i.add = null, this._pendingAdds--;\n        case He.LOADING:\n      }\n      null == i.remove && null == i.add && this._pendingUpdates.delete(t);\n    }\n    0 === this._pendingUpdates.size && (this._finishPendingUpdates(), this.notifyChange(\"running\"), this.notifyChange(\"dataUpdating\"));\n  }\n  _processPendingUpdateNew(e) {\n    if (!e.add) return void (e.state = He.READY);\n    const t = e.add.geometry;\n    null == t || \"mesh\" !== t.type || t.loaded ? this._processPendingUpdateNewRenderingInfo(e) : this._processPendingUpdateNewMesh(e, t);\n  }\n  async _processPendingUpdateNewMesh(e, t) {\n    e.state = He.LOADING, e.abortController = new AbortController();\n    const i = e.abortController.signal;\n    try {\n      await t.load({\n        signal: i\n      });\n    } catch (r) {\n      return this._processPendingUpdateNewError(e, r);\n    }\n    e.abortController = null, this._processPendingUpdateNewRenderingInfo(e);\n  }\n  _processPendingUpdateNewError(e, t) {\n    e.abortController = null, u(t) ? e.state = He.NEW : e.state = He.REJECTED;\n  }\n  async _processPendingUpdateNewRenderingInfo(e) {\n    if (null == this.layer.renderer || \"dictionary\" !== this.layer.renderer.type) return e.renderingInfo = this._getRenderingInfo(e.add, a.getLogger(this)), void (e.state = He.READY);\n    e.state = He.LOADING, e.abortController = new AbortController();\n    let t = null;\n    try {\n      t = await this._getRenderingInfoAsync(e.add, {\n        signal: e.abortController.signal\n      });\n    } catch (i) {\n      return e.abortController = null, void (u(i) ? e.state = He.NEW : e.state = He.REJECTED);\n    }\n    null == t?.symbol ? (this._symbolWarningLogged || (this._symbolWarningLogged = !0, a.getLogger(this).warn(`Graphic in layer ${this.layer.id} has no symbol and will not render`)), e.renderingInfo = null) : e.renderingInfo = t, e.state = He.READY;\n  }\n  _addGraphic(e, t, i) {\n    if (this._graphicsWithoutSymbol.set(e.uid, e), null == t?.symbol || !q(e)) return;\n    const r = this.stage.renderView.olidRenderHelper;\n    if (r && this.setUidToIdOnAdd) {\n      const t = ee(this.owner.view.map, this.layer.uid);\n      r.setUidToObjectAndLayerId(e.objectId, e.uid, this.layer.id, this.layer.uid, !!this.layer.popupEnabled && !t && Ae(this.layer, this.owner.view.popup?.defaultPopupTemplateEnabled));\n    }\n    const s = t.symbol,\n      a = this.getOrCreateGraphics3DSymbol(s, t.renderer);\n    if (null == a) return;\n    this._expandComputedExtent(e.geometry);\n    const n = this._beginGraphicUpdate(e),\n      o = new ue(e, t, this.layer);\n    let l = !1;\n    const h = e => {\n      e === a.symbol.id && (l = !0);\n    };\n    this._whenSymbolRemoved.push(h);\n    const d = () => {\n        if (--this._loadingSymbols, this.destroyed) return;\n        this._whenSymbolRemoved.removeUnordered(h);\n        if (this._graphicsWaitingForSymbol.get(e.uid) !== n || l || a.destroyed || this.graphicSymbolSupported && e.symbol && e.symbol.id !== a.symbol.id) --a.referenced, this._cleanupSymbols();else {\n          const t = this._createGraphics3DGraphic(a, o);\n          this._spatialIndex && null != t && this._spatialIndex.add(t), --a.referenced, this._endGraphicUpdate(e);\n        }\n        this._featureStore.events.emit(\"changed\"), this._labeler?.setDirty();\n      },\n      p = t => {\n        --this._loadingSymbols, this.destroyed || (this._whenSymbolRemoved.removeUnordered(h), l || (u(t) ? this.add([e]) : a.destroyed || this._endGraphicUpdate(e, t)));\n      };\n    ++this._loadingSymbols, i === Ee.ASYNC ? a.load(() => this._dataUpdateQueue.push(d, null).catch(m), e => this._dataUpdateQueue.push(() => p(e), null).catch(m)) : a.load(d, p);\n  }\n  _removeGraphic(e) {\n    const t = e.uid,\n      i = this.graphics3DGraphics.get(t);\n    if (i) {\n      i.graphics3DSymbol.onRemoveGraphic(i);\n      const e = i.usedMemory,\n        r = i.isElevationSource;\n      this._conditionalRemove(i, t), this._spatialIndex?.remove(i);\n      const s = i.graphics3DSymbol.symbol.id;\n      this._graphicsBySymbol.get(s)?.delete(t), this._graphicsWithoutSymbol.delete(t), this._removeGraphics3DGraphic(t, e, r), i.destroy(), this._featureStore.events.emit(\"changed\");\n    } else this._graphicsWithoutSymbol.delete(t), this._graphicsWaitingForSymbol.delete(t), 0 === this._graphicsWaitingForSymbol.size && (this._cleanupSymbols(), this.notifyChange(\"dataUpdating\"));\n  }\n  _hasLabelingContext(e) {\n    if (e instanceof te || e instanceof ie) {\n      const t = this.symbolCreationContext.layer;\n      return !!t.labelingInfo && t.labelingInfo.some(t => t.symbol === e);\n    }\n    return !1;\n  }\n  _hasValidSymbolCreationContext(e) {\n    return !(e instanceof te && !this._hasLabelingContext(e)) || (a.getLogger(this).error(\"LabelSymbol3D is only valid as part of a LabelClass. Using LabelSymbol3D as a renderer symbol is not supported.\"), !1);\n  }\n  _getRenderingInfo(e, t) {\n    const i = e.geometry;\n    if (null == i) return t && !this._geometryWarningLogged && (this._geometryWarningLogged = !0, t.warn(`Graphic in layer ${this.layer.id} has no geometry and will not render`)), null;\n    if (!L(i.spatialReference, this._viewSpatialReference)) return t && !this._geometryWarningLogged && (this._geometryWarningLogged = !0, t.warn(`Graphic in layer ${this.layer.id} has incompatible spatial reference and will not render`)), null;\n    if (!this.graphicSymbolSupported && null != e.symbol) return t && !this._symbolWarningLogged && (this._symbolWarningLogged = !0, t.warn(`Graphic in layer ${this.layer.id} is not allowed to have a symbol, use a renderer instead`)), null;\n    const r = this.rendererHasGeometryOperations ? Y(e, this.layer) : e;\n    let s;\n    if (this.owner.getRenderingInfo && (this.getRenderingInfoWithoutRenderer || null != this.currentRenderer)) s = this.owner.getRenderingInfo(r, this.currentRenderer, this._arcadeOnDemand);else {\n      const e = r.symbol || se(r.geometry);\n      s = new X(null, e);\n    }\n    return null == s?.symbol ? (t && !this._symbolWarningLogged && (this._symbolWarningLogged = !0, t.warn(`Graphic in layer ${this.layer.id} has no symbol and will not render`)), null) : s;\n  }\n  _getRenderingInfoAsync(e, t) {\n    if (null == e.geometry) return this._geometryWarningLogged || (this._geometryWarningLogged = !0, a.getLogger(this).warn(`Graphic in layer ${this.layer.id} has no geometry and will not render`)), null;\n    if (!this.graphicSymbolSupported && null != e.symbol) return this._symbolWarningLogged || (this._symbolWarningLogged = !0, a.getLogger(this).warn(`Graphic in layer ${this.layer.id} is not allowed to have a symbol, use a renderer instead`)), null;\n    const i = this.rendererHasGeometryOperations ? Y(e, this.layer) : e;\n    return this.owner.getRenderingInfoAsync(i, this.currentRenderer, this._arcadeOnDemand, t);\n  }\n  _createGraphics3DSymbol(e, t) {\n    if (!this._hasValidSymbolCreationContext(e)) return null;\n    const i = this._getConvertedSymbol(e);\n    if (!i) return null;\n    let r;\n    if (null != t && \"backgroundFillSymbol\" in t && t.backgroundFillSymbol) {\n      const e = ae(t.backgroundFillSymbol, {\n        ignoreDrivers: !0\n      });\n      null != e.symbol && (r = e.symbol.symbolLayers);\n    }\n    const s = be(i, this.symbolCreationContext, r);\n    return s.load(() => {\n      const e = s.extentPadding;\n      e > this.extentPadding && this._set(\"extentPadding\", e), this.notifyChange(\"averageSymbolComplexity\");\n    }, () => {}), s;\n  }\n  getOrCreateGraphics3DSymbol(e, t) {\n    let i = this._symbols.get(e.id);\n    if (void 0 === i) {\n      const r = this._unusedSymbolsCache.pop(e.id);\n      i = null != r ? r : e instanceof re ? new _e(e, e => this._dataUpdateQueue.push(e, null), e => this._createGraphics3DSymbol(e, t)) : this._createGraphics3DSymbol(e, t), this._symbols.set(e.id, i), this._symbolMaterials = null;\n    }\n    return null != i && ++i.referenced, i;\n  }\n  trackGraphicState(e) {\n    return null == this._graphicStateTracking && (this._graphicStateTracking = new ve(this)), this._graphicStateTracking.add(e);\n  }\n  _addGraphics3DGraphic(e) {\n    this._usedMemory += e.usedMemory, this.graphics3DGraphics.set(e.graphic.uid, e), this._numberOfGraphics++, e.isElevationSource && (this._numberOfGraphicsProvidingElevation++, this.updateStageLayerElevationProvider()), this._updateLayerVisibility();\n  }\n  _removeGraphics3DGraphic(e, t) {\n    let i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;\n    this._usedMemory -= t, this.graphics3DGraphics.delete(e), this._numberOfGraphics--, i && (this._numberOfGraphicsProvidingElevation--, this.updateStageLayerElevationProvider()), this._updateLayerVisibility();\n  }\n  _createGraphics3DGraphic(e, t) {\n    const i = t.graphic;\n    if (this._graphicsWithoutSymbol.delete(i.uid), !this._symbols.has(e.symbol.id)) return this.add([i]), null;\n    if (this.graphics3DGraphics.has(i.uid)) return null;\n    const r = e.createGraphics3DGraphic(t);\n    if (null == r) return null;\n    this._addGraphics3DGraphic(r);\n    const s = e.symbol.id;\n    this._graphicsBySymbol.has(s) || this._graphicsBySymbol.set(s, new Map()), this._graphicsBySymbol.get(s).set(i.uid, r);\n    if (r.isDraped && this._graphicsDrapedUids.add(i.uid), r.centroid = null, null != i.geometry && \"point\" !== i.geometry.type && (r.centroid = Ce(i.geometry, this._viewSpatialReference)), this._updateUserVisibility(r), null != this._scaleVisibility && this._scaleVisibility.updateVisibility(r), null != this._filterVisibility) {\n      const {\n        defaultVisibility: e\n      } = this._filterVisibility;\n      r.setVisibilityFlag(de.GRAPHIC, pe.FILTER, e), e || this._filterVisibility.reapply();\n    }\n    this._deconflictor?.addGraphic(r), this._labeler?.addGraphic(r), this._objectStates?.addGraphic(r), r.initialize(this.stageLayer), null != this._graphicStateTracking && this._graphicStateTracking.addGraphic(r);\n    const a = this._whenGraphics3DGraphicRequests[i.uid];\n    return a && (delete this._whenGraphics3DGraphicRequests[i.uid], a.resolve(r)), this._symbolMaterials = null, r;\n  }\n  async rendererChange(e) {\n    if (this._rendererChangeAbortController = o(this._rendererChangeAbortController), e !== this.currentRenderer) if (this._validateRenderer(e), null == e && this._currentRendererChange(null, !1), Z(e)) {\n      if (e?.arcadeRequired) {\n        const t = new AbortController();\n        this._rendererChangeAbortController = t;\n        const {\n          arcadeUtils: i\n        } = await this._ensureArcade();\n        y(t);\n        const r = i.hasGeometryOperations(e);\n        r && (await i.enableGeometryOperations(), y(t)), this.effectiveUpdatePolicy === Ee.ASYNC ? await this._updateQueue.push(() => this._currentRendererChange(e, r), t.signal) : this._currentRendererChange(e, r), this._rendererChangeAbortController = null;\n      } else if (this.effectiveUpdatePolicy === Ee.ASYNC) {\n        const t = new AbortController();\n        this._rendererChangeAbortController = t, await this._updateQueue.push(() => this._currentRendererChange(e, !1), t.signal), this._rendererChangeAbortController = null;\n      } else this._currentRendererChange(e, !1);\n    } else this._currentRendererChange(e, !1);\n  }\n  async _ensureArcade() {\n    return null == this._arcadeOnDemand ? (this._arcadeOnDemand = await K(), this._arcadeOnDemand) : this._arcadeOnDemand;\n  }\n  _currentRendererChange(e, t) {\n    this.currentRenderer = e, this.rendererHasGeometryOperations = t, this.symbolCreationContext.arcade = this._arcadeOnDemand;\n    const i = this.symbolCreationContext.renderer;\n    if (e === i) return;\n    if (this._symbolConversionCache.clear(), this._unusedSymbolsCache.clear(), null == e) return this.symbolCreationContext.renderer = null, void this.recreateAllGraphicsAndSymbols();\n    const r = x(i, e);\n    this._updateUnchangedSymbolMappings(r, e, i), this.symbolCreationContext.renderer = e, null != r && (\"complete\" === r.type ? this.recreateAllGraphicsAndSymbols() : \"partial\" === r.type && (this._applyRendererDiff(r, e, i) ? this._labeler?.reset() : this.recreateAllGraphicsAndSymbols()), this.notifyChange(\"averageSymbolComplexity\"));\n  }\n  _diffHasSymbolChange(e) {\n    for (const t in e.diff) switch (t) {\n      case \"visualVariables\":\n      case \"defaultSymbol\":\n      case \"uniqueValueInfos\":\n        break;\n      case \"uniqueValueGroups\":\n      case \"authoringInfo\":\n      case \"fieldDelimiter\":\n        delete e.diff[t];\n        break;\n      default:\n        return !0;\n    }\n    return !1;\n  }\n  _applySymbolSetDiff(e, t, i) {\n    e = e || [], t = t || [];\n    const r = [];\n    for (const s of t) {\n      const t = this._graphicsBySymbol.get(s.id);\n      t && t.forEach((a, n) => {\n        const o = a.graphic,\n          l = this.layer instanceof H ? this.layer : null,\n          h = this._arcadeOnDemand;\n        if (s === i.defaultSymbol && i.getSymbol(Y(o, l), {\n          arcade: h\n        }) === i.defaultSymbol) return;\n        const d = a.usedMemory;\n        e.length || i.defaultSymbol ? r.push(o) : this._graphicsWithoutSymbol.set(n, o);\n        const p = this.graphics3DGraphics.get(n);\n        this._conditionalRemove(p, n), a.destroy(), t.delete(n), this._removeGraphics3DGraphic(n, d), this._updateLayerVisibility();\n      }), this._whenSymbolRemoved.forAll(e => e(s.id));\n    }\n    (e.length || r.length) && (this._graphicsWithoutSymbol.forEach(e => r.push(e)), this._graphicsWithoutSymbol.clear(), this.add(r)), this._cleanupSymbols(), this._labeler?.setDirty(), this._deconflictor?.setDirty();\n  }\n  _applyUniqueValueRendererDiff(e, t, r) {\n    const s = e.diff.defaultSymbol,\n      a = e.diff.uniqueValueInfos;\n    if (s || a) {\n      const n = a ? a.added.map(e => e.symbol).filter(i) : [],\n        o = a ? a.removed.map(e => e.symbol).filter(i) : [];\n      if (a) for (let e = 0; e < a.changed.length; e++) n.push(a.changed[e].newValue.symbol), o.push(a.changed[e].oldValue.symbol);\n      return s ? (r.defaultSymbol && o.push(r.defaultSymbol), t.defaultSymbol && n.push(t.defaultSymbol)) : r.defaultSymbol && n.length && o.push(t.defaultSymbol), this._applySymbolSetDiff(n, o, t), delete e.diff.defaultSymbol, delete e.diff.uniqueValueInfos, !0;\n    }\n    return !1;\n  }\n  _calculateUnchangedSymbolMapping(e, t, i) {\n    if (\"unique-value\" !== t?.type || \"unique-value\" !== i?.type || null != e && \"partial\" !== e.type) return [];\n    const r = e => null != e ? e.id : null,\n      s = e && e.diff,\n      a = s?.defaultSymbol,\n      n = s && s.uniqueValueInfos;\n    let o;\n    if (n) o = n.unchanged.map(e => ({\n      oldId: r(e.oldValue.symbol),\n      newId: r(e.newValue.symbol)\n    }));else {\n      o = [];\n      for (const e of i.uniqueValueInfos ?? []) {\n        const i = r(e.symbol),\n          s = t.uniqueValueInfos?.find(t => t.value === e.value);\n        s && i !== r(s.symbol) && o.push({\n          oldId: i,\n          newId: r(s.symbol)\n        });\n      }\n    }\n    return !a && i.defaultSymbol && o.push({\n      oldId: r(i.defaultSymbol),\n      newId: r(t.defaultSymbol)\n    }), o;\n  }\n  _updateSymbolMapping(e, t) {\n    const i = null != t && t ? \"string\" == typeof t ? t : t.id : null;\n    if (null == e || e === i) return;\n    const r = this._graphicsBySymbol.get(e);\n    this._graphicsBySymbol.delete(e), void 0 !== r && this._graphicsBySymbol.set(i, r);\n    const s = this._symbols.get(e);\n    if (void 0 !== s && (this._symbols.delete(e), this._symbols.set(i, s), this._symbolMaterials = null, null != s)) {\n      const e = \"string\" == typeof t ? null : t;\n      null != e ? s.symbol = e : s.symbol.id = i;\n    }\n  }\n  _updateUnchangedSymbolMappings(e, t, i) {\n    const r = this._calculateUnchangedSymbolMapping(e, t, i);\n    for (const {\n      oldId: s,\n      newId: a\n    } of r) this._updateSymbolMapping(s, a);\n  }\n  _applyRendererDiff(e, t, i) {\n    if (this._diffHasSymbolChange(e)) return !1;\n    if (t instanceof $ && i instanceof $ && this._applyUniqueValueRendererDiff(e, t, i) && 0 === Object.keys(e.diff).length) return !0;\n    for (const r of this._graphicsBySymbol.keys()) {\n      const i = this._symbols.get(r);\n      if (null != i) switch (i.applyRendererDiff(e, t)) {\n        case Ge.RecreateSymbol:\n          this._recreateSymbol(r);\n          break;\n        case Ge.RecreateGraphics:\n          this._recreateGraphicsForSymbol(r);\n        case Ge.FastUpdate:\n      }\n    }\n    return !0;\n  }\n  opacityChange() {\n    this._updateStageLayerVisibility(), this.forEachGraphics3DSymbol((e, t) => e.globalPropertyChanged(\"opacity\", t));\n  }\n  _slicePlaneEnabledChange(e) {\n    e !== this.symbolCreationContext.slicePlaneEnabled && (this.symbolCreationContext.slicePlaneEnabled = e, this.stageLayer.sliceable = e, this.forEachGraphics3DSymbol((e, t) => e.globalPropertyChanged(\"slicePlaneEnabled\", t)), this._deconflictor?.slicePlaneEnabledChange(), this._labeler?.slicePlaneEnabledChange());\n  }\n  _physicalBasedRenderingChange(e) {\n    this.symbolCreationContext.physicalBasedRenderingEnabled = e, this.forEachGraphics3DSymbol((e, t, i) => {\n      e.globalPropertyChanged(\"physicalBasedRenderingEnabled\", t) || this._recreateSymbol(i);\n    });\n  }\n  _skipHighSymbolLoDsChange(e) {\n    this.symbolCreationContext.skipHighSymbolLods = e, this.forEachGraphics3DSymbol((e, t, i) => {\n      e.globalPropertyChanged(\"skipHighSymbolLods\", t) || this._recreateSymbol(i);\n    });\n  }\n  _pixelRatioChange() {\n    this.forEachGraphics3DSymbol((e, t, i) => {\n      e.globalPropertyChanged(\"pixelRatio\", t) || this._recreateSymbol(i);\n    });\n  }\n  _signalUpdatingDuringAsyncLoadedGraphicsChange() {\n    this._updatingPendingLoadedGraphicsChange && this._updatingPendingLoadedGraphicsChange.remove(), this._updatingPendingLoadedGraphicsChange = S(() => {\n      this._updatingPendingLoadedGraphicsChange = null;\n    });\n  }\n  setClippingExtent(e, t) {\n    const i = this.symbolCreationContext.clippingExtent,\n      r = k();\n    return Re(e, r, t) ? this.symbolCreationContext.clippingExtent = T(F(), r) : this.symbolCreationContext.clippingExtent = null, !z(this.symbolCreationContext.clippingExtent, i);\n  }\n  modifyGraphics3DGraphicVisibilities(e) {\n    if (this.destroyed) return;\n    let t = !1;\n    this.graphics3DGraphics.forEach(i => {\n      e(i) && (t = !0);\n    }), t && (this._labeler?.setDirty(), this._deconflictor?.setDirty());\n  }\n  forEachGraphics3DSymbol(e) {\n    for (const [t, i] of this._symbols) {\n      if (null == i) return;\n      e(i, this._graphicsBySymbol.get(t) || Qe, t);\n    }\n  }\n  updateGraphicsVisibilities() {\n    null != this._filterVisibility && this._filterVisibility.reapply(), this.modifyGraphics3DGraphicVisibilities(e => {\n      const t = this._updateUserVisibility(e),\n        i = null != this._scaleVisibility && this._scaleVisibility.updateVisibility(e);\n      return t || i;\n    });\n  }\n  _hideAllGraphics() {\n    this.modifyGraphics3DGraphicVisibilities(e => e.setVisibilityFlag(de.GRAPHIC, pe.USER, !1));\n  }\n  _validateRenderer(e) {\n    const t = () => `'${this.layer.title ? `${this.layer.title}, ` : \"\"}id:${this.layer.id}'`,\n      i = J(e, {\n        geometryType: this.layer?.geometryType,\n        logWarning: (e, i) => a.getLogger(this).warn(e, `Symbology conversion for layer ${t()}: ${i}`)\n      });\n    if (i) {\n      const e = `Renderer for layer ${t} is not supported in a SceneView`;\n      a.getLogger(this).warn(e, i.message);\n    }\n  }\n  _cleanupSymbols() {\n    if (this._graphicsWaitingForSymbol.size > 0 || this._suspendSymbolCleanup) return;\n    let e = !1;\n    this._symbols.forEach((t, i) => {\n      if (null == t || t.referenced > 0) return;\n      const r = this._graphicsBySymbol.get(i);\n      r && 0 !== r.size || (this._graphicsBySymbol.delete(i), this._symbols.delete(i), this._symbolMaterials = null, this._unusedSymbolsCache.put(i, t, p), e = !0);\n    }), e && (this._recomputeExtentPadding(), this.notifyChange(\"averageSymbolComplexity\"));\n  }\n  get test() {}\n  get performanceInfo() {\n    return new fe(this.graphics3DGraphics.size, this._graphicsWithoutSymbol.size, this._pendingUpdates.size);\n  }\n};\nvar He;\nWe.tmpVec = I(), e([G({\n  readOnly: !0\n})], We.prototype, \"computedExtent\", void 0), e([G()], We.prototype, \"currentRenderer\", void 0), e([G()], We.prototype, \"rendererHasGeometryOperations\", void 0), e([G()], We.prototype, \"_frameTaskHandle\", void 0), e([G()], We.prototype, \"_dataUpdateQueue\", void 0), e([G()], We.prototype, \"_updateQueue\", void 0), e([G({\n  readOnly: !0\n})], We.prototype, \"_viewSpatialReference\", null), e([G()], We.prototype, \"_rendererChangeAbortController\", void 0), e([G()], We.prototype, \"_elevationInfoChangeAbortController\", void 0), e([G()], We.prototype, \"_initializeAbortController\", void 0), e([G()], We.prototype, \"_elevationAlignment\", void 0), e([G()], We.prototype, \"_scaleVisibility\", void 0), e([G()], We.prototype, \"_filterVisibility\", void 0), e([G()], We.prototype, \"_initializePromise\", void 0), e([G()], We.prototype, \"_spatialIndex\", void 0), e([G({\n  readOnly: !0\n})], We.prototype, \"extentPadding\", void 0), e([G()], We.prototype, \"_updatingPendingLoadedGraphicsChange\", void 0), e([G()], We.prototype, \"_featureStore\", void 0), e([G()], We.prototype, \"_objectStates\", void 0), e([G()], We.prototype, \"_loadingSymbols\", void 0), e([G()], We.prototype, \"preferredUpdatePolicy\", void 0), e([G()], We.prototype, \"_forcedUpdatePolicy\", void 0), e([G({\n  readOnly: !0\n})], We.prototype, \"effectiveUpdatePolicy\", null), e([G({\n  constructOnly: !0\n})], We.prototype, \"elevationFeatureExpressionEnabled\", void 0), e([G({\n  constructOnly: !0\n})], We.prototype, \"owner\", void 0), e([G({\n  constructOnly: !0\n})], We.prototype, \"layer\", void 0), e([G({\n  constructOnly: !0\n})], We.prototype, \"graphicSymbolSupported\", void 0), e([G({\n  constructOnly: !0\n})], We.prototype, \"getRenderingInfoWithoutRenderer\", void 0), e([G({\n  constructOnly: !0\n})], We.prototype, \"componentFactories\", void 0), e([G({\n  constructOnly: !0\n})], We.prototype, \"setUidToIdOnAdd\", void 0), e([G()], We.prototype, \"featureStore\", null), e([G()], We.prototype, \"initializePromise\", null), e([G()], We.prototype, \"scaleVisibility\", null), e([G()], We.prototype, \"elevationAlignment\", null), e([G()], We.prototype, \"objectStates\", null), e([G()], We.prototype, \"filterVisibility\", null), e([G({\n  readOnly: !0\n})], We.prototype, \"updating\", null), e([G({\n  readOnly: !0\n})], We.prototype, \"dataUpdating\", null), e([G({\n  readOnly: !0\n})], We.prototype, \"running\", null), e([G({\n  readOnly: !0\n})], We.prototype, \"suspendedOrOutsideOfView\", null), e([G({\n  readOnly: !0,\n  dependsOn: []\n})], We.prototype, \"updatingRemaining\", null), e([G({\n  readOnly: !0\n})], We.prototype, \"displayFeatureLimit\", null), e([G({\n  readOnly: !0,\n  dependsOn: []\n})], We.prototype, \"averageSymbolComplexity\", null), e([G({\n  constructOnly: !0\n})], We.prototype, \"hasZ\", void 0), e([G({\n  constructOnly: !0\n})], We.prototype, \"hasM\", void 0), e([G()], We.prototype, \"_objectIdField\", null), We = Te = e([w(\"esri.views.3d.layers.graphics.Graphics3DCore\")], We), function (e) {\n  e[e.NEW = 0] = \"NEW\", e[e.LOADING = 1] = \"LOADING\", e[e.READY = 2] = \"READY\", e[e.REJECTED = 3] = \"REJECTED\";\n}(He || (He = {}));\nclass Ne {\n  constructor() {\n    this.add = null, this.renderingInfo = null, this.state = He.NEW, this.abortController = null, this.remove = null;\n  }\n  clear() {\n    this.add = null, this.renderingInfo = null, this.state = He.NEW, this.abortController = null, this.remove = null;\n  }\n}\nconst Be = 10,\n  qe = I(),\n  Ye = I(),\n  Qe = new Map();\nexport { We as Graphics3DCore };","map":{"version":3,"names":["_","e","t","isSome","i","r","makeHandle","s","a","findInMap","n","abortMaybe","o","removeMaybe","l","destroyMaybe","h","disposeMaybe","d","MinPriority","p","c","throwIfAborted","y","createResolver","g","isAbortError","u","ignoreAbortErrors","m","when","b","watch","on","f","syncAndInitial","v","whenOnce","C","schedule","S","property","G","subclass","w","diff","x","isEmpty","P","R","D","E","create","I","U","A","canProjectWithoutEngine","L","projectBuffer","O","projectVectorToVector","j","projectXYZToVector","V","F","center","M","fromRect","T","equals","z","k","W","H","getObjectId","N","computeAABB","B","hasGeometry","q","hydrateGraphic","Y","PromiseQueue","Q","$","isSupportedRenderer3D","Z","validateTo3D","J","RenderingInfo","X","loadArcade","K","isBasemapLayer","ee","te","ie","re","getDefaultSymbol3D","se","to3D","ae","averageSymbolComplexities","ne","defaultSymbolComplexity","oe","DisplayFeatureLimit","le","ViewElevationProvider","he","VisibilityGroup","de","VisibilityFlag","pe","extractExpressionInfo","ce","createContext","ye","Graphics3DFeatureStore","ge","Graphics3DGraphicCreationContext","ue","Graphics3DSymbolCreationContext","me","make","be","Graphics3DWebStyleSymbol","_e","GraphicsCorePerformanceInfo","fe","GraphicStateTracking","ve","computeCentroid","Ce","FastUpdateStatus","Se","ApplyRendererDiffResult","Ge","LoadStatus","we","SpatialIndex2D","xe","StageLayerElevationProvider","Pe","toBoundingRect","Re","GridLocalOriginFactory","De","UpdatePolicy","Ee","affectsGeometry","Ie","WebGLLayer","Ue","hasPopupTemplate","Ae","PropertiesPool","Le","ImmediateTask","Oe","noBudget","je","TaskPriority","Ve","Yield","Fe","alphaCutoff","Me","Te","ze","ke","We","_viewSpatialReference","owner","view","spatialReference","spatialIndex","_spatialIndex","objectIdField","layer","hasZ","hasM","setup","Array","from","graphics3DGraphics","values","update","deconflictor","_deconflictor","labeler","_labeler","numberOfGraphics","_numberOfGraphics","effectiveUpdatePolicy","currentRenderer","type","ASYNC","_forcedUpdatePolicy","preferredUpdatePolicy","featureStore","_featureStore","initializePromise","_initializePromise","scaleVisibility","_scaleVisibility","elevationAlignment","_elevationAlignment","objectStates","_objectStates","filterVisibility","_filterVisibility","updating","dataUpdating","_rendererChangeAbortController","_elevationInfoChangeAbortController","_frameTaskHandle","running","_graphicsWaitingForSymbol","size","_pendingUpdates","_updatingPendingLoadedGraphicsChange","_dataUpdateQueue","_loadingSymbols","_updateQueue","suspendedOrOutsideOfView","suspended","suspendInfo","outsideOfView","updatingRemaining","displayFeatureLimit","qualitySettings","graphics3D","minTotalNumberOfFeatures","maxTotalNumberOfFeatures","maxNumberOfDrawCalls","maxTotalNumberOfVertices","averageSymbolComplexity","Math","max","verticesPerFeature","drawCallsPerFeature","ceil","min","_get","maximumTotalNumberOfVertices","maximumNumberOfFeatures","_symbolComplexities","numComplexities","estimated","verticesPerCoordinate","usedMemory","labelsEnabled","memory","bytesPerFeatureLabel","_getSymbolComplexitiesUsed","reduce","resourceBytes","_symbolMaterials","_symbols","symbolLayers","materials","push","_stage","renderer","basemapTerrain","overlayManager","getMaterialRenderer","_usedMemory","usedMemoryPerGraphic","_pendingAdds","_pendingRemoves","bytesPerFeature","unprocessedMemoryEstimate","_getSymbolComplexitiesUsedOrRenderer","visible","_visible","_getConvertedSymbol","clone","_symbolConversionCache","get","id","geometryType","retainId","hasLabelingContext","_hasLabelingContext","cimFallbackEnabled","symbol","error","getLogger","message","set","symbols","backgroundFillSymbol","length","_getSymbolComplexityUsedOrRenderer","complexity","forEach","_objectIdField","constructor","_propertiesPool","computedExtent","rendererHasGeometryOperations","_graphicStateTracking","Map","stageLayer","stage","_graphicsDrapedUids","Set","_graphicsBySymbol","_graphicsWithoutSymbol","_graphicsUpdateId","_suspendSymbolCleanup","_arcadeOnDemand","_initializeAbortController","extentPadding","_viewElevationProvider","_stageLayerElevationProvider","_sharedSymbolResourcesOwnerHandle","_whenGraphics3DGraphicRequests","_numberOfGraphicsProvidingElevation","_applyPendingRemovesFirst","_pendingUpdatesPool","allocator","Ne","deallocator","clear","_symbolWarningLogged","_geometryWarningLogged","_objectIdInvisibleSet","_whenSymbolRemoved","SYNC","elevationFeatureExpressionEnabled","graphicSymbolSupported","getRenderingInfoWithoutRenderer","setUidToIdOnAdd","_startCreateGraphics","_unusedSymbolsCache","resourceController","memoryController","newCache","destroy","symbolCreationContext","scheduler","initialize","viewSpatialReference","featureSpatialReference","getSpatialIndex","queryGraphicUIDsInExtent","componentFactories","getFeatureCount","updateFeatureVisibilities","modifyGraphics3DGraphicVisibilities","setVisibilityFlag","GRAPHIC","FILTER","graphic","setAllFeaturesVisibility","clearFeaturesVisibility","AbortController","addHandles","state","highlights","highlightOrderMap","updateHighlights","_initializeAsync","signal","_initializeStage","uid","sharedSymbolResources","sharedResources","addGraphicsOwner","streamDataRequester","renderCoordsHelper","graphicsCoreOwner","localOriginFactory","renderSpatialReference","elevationProvider","notifyGraphicGeometryChanged","notifyGraphicVisibilityChanged","elevationInfo","featureExpressionInfoContext","screenSizePerspectiveEnabled","slicePlaneEnabled","physicalBasedRenderingEnabled","physicallyBasedRenderingEnabled","skipHighSymbolLods","drapeSourceRenderer","registerGeometryDrapeSource","unregisterDrapeSource","unshift","_updateLayerVisibility","catch","reset","recreateAllGraphicsAndSymbols","_slicePlaneEnabledChange","rasterPixelRatio","_pixelRatioChange","_physicalBasedRenderingChange","_skipHighSymbolLoDsChange","focusAreas","activePolygons","_updateFocusedLabels","style","tilingScheme","overlaySR","hasHandles","recreateAllGraphics","loadedGraphics","_graphicsCollectionChanged","_signalUpdatingDuringAsyncLoadedGraphicsChange","onListenerAdd","initial","updatePolicy","isAsync","runTask","registerTask","GRAPHICS_CORE","featureReduction","featureReductionChange","notifyChange","rendererChange","_abortInitialize","abort","forEachGraphics3DSymbol","updateFocus","recreateGraphics","_abortElevationInfoChange","remove","cancelAll","_set","reject","allGraphicsDeleted","events","emit","graphicUid","object","attribute","updateGraphicGeometry","updateGraphicVisibility","Be","_updateStageLayerVisibility","opacity","updateGraphicsVisibilities","_hideAllGraphics","getGraphics3DGraphicById","getGraphics3DGraphicByObjectId","_findGraphics3DGraphicByObjectId","_getGraphicObjectID","arguments","undefined","graphics3DGraphicsByObjectID","layerLabelsEnabled","updateLabelingInfo","labelingInfoChange","Promise","allSettled","updateVisibilityInfo","visibilityInfoChange","symbolUpdateType","getFastUpdateStatus","Loading","Fast","has","Slow","Mixed","Undefined","_applyPendingUpdates","hasProgressed","setObjectIdVisibility","delete","add","_updateUserVisibility","USER","_whenGraphics3DGraphic","resolve","promise","_boundsForGraphics3DGraphic","service","useViewElevation","minDemResolution","minDemResolutionForPoints","resolution","getProjectedBoundingBox","boundingBox","requiresDrapedElevation","getElevation","screenSpaceObjects","whenGraphicBounds","find","attributes","computeAttachmentOrigin","render","num","draped","qe","origin","Ye","getSymbolLayerSize","indexOf","added","removed","graphicUpdateHandler","_graphicUpdateVisibleHandler","_graphicUpdateGeometryHandler","_graphicUpdateSymbolHandler","_graphicUpdateTransformHandler","_graphicUpdateGeometryOrTransformHandler","newValue","graphics3DSymbol","updateGeometry","setDirty","geometry","_expandComputedExtent","updateTransform","action","_recreateGraphic","loadStatus","LOADING","oldValue","_updateSymbolMapping","graphics3DGraphicPatches","symbolStatePatches","prepareSymbolPatch","_getRenderingInfo","_recomputeExtentPadding","_cleanupSymbols","_beginGraphicUpdate","_endGraphicUpdate","updateGraphicError","tmpVec","isFinite","zmin","zmax","xmin","ymin","xmax","ymax","elevationInfoChange","globalPropertyChanged","labelLayers","graphics3DSymbolLayer","updateGraphicElevationContext","_recreateSymbol","updateStageLayerElevationProvider","mode","unregister","register","_clearSymbolsAndGraphics","invalidateSpatialQueryAccelerator","startCreateGraphics","_recreateAllGraphics","toArray","_conditionalRemove","_removeGraphics3DGraphic","_recreateGraphicsForSymbol","removeGraphic","_updatePolicyForGraphics","_addDelayed","_addImmediate","loaded","_addGraphic","He","NEW","abortController","pushNew","_removeDelayed","_removeImmediate","_removeGraphic","_finishPendingUpdates","warn","madeProgress","done","_processPendingUpdateNew","READY","renderingInfo","REJECTED","_processPendingUpdateNewRenderingInfo","_processPendingUpdateNewMesh","load","_processPendingUpdateNewError","_getRenderingInfoAsync","renderView","olidRenderHelper","map","setUidToObjectAndLayerId","objectId","popupEnabled","popup","defaultPopupTemplateEnabled","getOrCreateGraphics3DSymbol","destroyed","removeUnordered","referenced","_createGraphics3DGraphic","onRemoveGraphic","isElevationSource","labelingInfo","some","_hasValidSymbolCreationContext","getRenderingInfo","getRenderingInfoAsync","_createGraphics3DSymbol","ignoreDrivers","pop","trackGraphicState","_addGraphics3DGraphic","createGraphics3DGraphic","isDraped","centroid","updateVisibility","defaultVisibility","reapply","addGraphic","_validateRenderer","_currentRendererChange","arcadeRequired","arcadeUtils","_ensureArcade","hasGeometryOperations","enableGeometryOperations","arcade","_updateUnchangedSymbolMappings","_applyRendererDiff","_diffHasSymbolChange","_applySymbolSetDiff","defaultSymbol","getSymbol","forAll","_applyUniqueValueRendererDiff","uniqueValueInfos","filter","changed","_calculateUnchangedSymbolMapping","unchanged","oldId","newId","value","Object","keys","applyRendererDiff","RecreateSymbol","RecreateGraphics","FastUpdate","opacityChange","sliceable","slicePlaneEnabledChange","setClippingExtent","clippingExtent","Qe","title","logWarning","put","test","performanceInfo","readOnly","prototype","constructOnly","dependsOn","Graphics3DCore"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DCore.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import{isSome as i}from\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import r from\"../../../../core/Error.js\";import{makeHandle as s}from\"../../../../core/handleUtils.js\";import a from\"../../../../core/Logger.js\";import{findInMap as n}from\"../../../../core/MapUtils.js\";import{abortMaybe as o,removeMaybe as l,destroyMaybe as h,disposeMaybe as d}from\"../../../../core/maybe.js\";import{MinPriority as p}from\"../../../../core/MemCache.js\";import c from\"../../../../core/PooledArray.js\";import{throwIfAborted as y,createResolver as g,isAbortError as u,ignoreAbortErrors as m}from\"../../../../core/promiseUtils.js\";import{when as b,watch as _,on as f,syncAndInitial as v,whenOnce as C}from\"../../../../core/reactiveUtils.js\";import{schedule as S}from\"../../../../core/scheduling.js\";import{property as G}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as w}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{diff as x,isEmpty as P}from\"../../../../core/accessorSupport/diffUtils.js\";import{i as R,g as D,h as E}from\"../../../../chunks/vec32.js\";import{create as I}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import U from\"../../../../geometry/Extent.js\";import A from\"../../../../geometry/Point.js\";import{canProjectWithoutEngine as L}from\"../../../../geometry/projection.js\";import{projectBuffer as O}from\"../../../../geometry/projection/projectBuffer.js\";import{projectVectorToVector as j}from\"../../../../geometry/projection/projectVectorToVector.js\";import{projectXYZToVector as V}from\"../../../../geometry/projection/projectXYZToVector.js\";import{create as F,center as M,fromRect as T,equals as z}from\"../../../../geometry/support/aaBoundingBox.js\";import{create as k}from\"../../../../geometry/support/aaBoundingRect.js\";import{equals as W}from\"../../../../geometry/support/spatialReferenceUtils.js\";import H from\"../../../../layers/Layer.js\";import{getObjectId as N,computeAABB as B,hasGeometry as q}from\"../../../../layers/graphics/dehydratedFeatures.js\";import{hydrateGraphic as Y}from\"../../../../layers/graphics/hydratedFeatures.js\";import{PromiseQueue as Q}from\"../../../../layers/support/PromiseQueue.js\";import $ from\"../../../../renderers/UniqueValueRenderer.js\";import{isSupportedRenderer3D as Z,validateTo3D as J}from\"../../../../renderers/support/rendererConversion.js\";import{RenderingInfo as X}from\"../../../../renderers/support/RenderingInfo.js\";import{loadArcade as K}from\"../../../../support/arcadeOnDemand.js\";import{isBasemapLayer as ee}from\"../../../../support/basemapUtils.js\";import te from\"../../../../symbols/LabelSymbol3D.js\";import ie from\"../../../../symbols/TextSymbol.js\";import re from\"../../../../symbols/WebStyleSymbol.js\";import{getDefaultSymbol3D as se}from\"../../../../symbols/support/defaults3D.js\";import{to3D as ae}from\"../../../../symbols/support/symbolConversion.js\";import{averageSymbolComplexities as ne,defaultSymbolComplexity as oe}from\"./defaultSymbolComplexity.js\";import{DisplayFeatureLimit as le}from\"./DisplayFeatureLimit.js\";import{ViewElevationProvider as he}from\"./ElevationQuery.js\";import{VisibilityGroup as de,VisibilityFlag as pe}from\"./enums.js\";import{extractExpressionInfo as ce,createContext as ye}from\"./featureExpressionInfoUtils.js\";import{Graphics3DFeatureStore as ge}from\"./Graphics3DFeatureStore.js\";import{Graphics3DGraphicCreationContext as ue}from\"./Graphics3DGraphicCreationContext.js\";import{Graphics3DSymbolCreationContext as me}from\"./Graphics3DSymbolCreationContext.js\";import{make as be}from\"./Graphics3DSymbolFactory.js\";import{Graphics3DWebStyleSymbol as _e}from\"./Graphics3DWebStyleSymbol.js\";import{GraphicsCorePerformanceInfo as fe}from\"./GraphicsCorePerformanceInfo.js\";import{GraphicStateTracking as ve}from\"./GraphicStateTracking.js\";import{computeCentroid as Ce}from\"./graphicUtils.js\";import{FastUpdateStatus as Se,ApplyRendererDiffResult as Ge}from\"./interfaces.js\";import{LoadStatus as we}from\"./Loadable.js\";import{SpatialIndex2D as xe}from\"./SpatialIndex2D.js\";import{StageLayerElevationProvider as Pe}from\"../support/StageLayerElevationProvider.js\";import{toBoundingRect as Re}from\"../../support/extentUtils.js\";import{GridLocalOriginFactory as De}from\"../../webgl-engine/lib/GridLocalOriginFactory.js\";import{UpdatePolicy as Ee}from\"../../webgl-engine/lib/UpdatePolicy.js\";import{affectsGeometry as Ie}from\"../../webgl-engine/lib/VertexAttribute.js\";import{WebGLLayer as Ue}from\"../../webgl-engine/lib/WebGLLayer.js\";import{hasPopupTemplate as Ae}from\"../../../layers/support/popupUtils.js\";import{PropertiesPool as Le}from\"../../../support/PropertiesPool.js\";import{ImmediateTask as Oe,noBudget as je,TaskPriority as Ve}from\"../../../support/Scheduler.js\";import{Yield as Fe}from\"../../../support/Yield.js\";import{alphaCutoff as Me}from\"../../../../webscene/support/AlphaCutoff.js\";var Te;const ze=I(),ke=F();let We=Te=class extends t{get _viewSpatialReference(){return this.owner.view.spatialReference}get spatialIndex(){return this._spatialIndex||(this._spatialIndex=new xe({objectIdField:this.owner.layer?.objectIdField,spatialReference:this._viewSpatialReference,hasZ:!!this.hasZ,hasM:!!this.hasM}),this._spatialIndex.setup(Array.from(this.graphics3DGraphics.values()))),this._spatialIndex.update(),this._spatialIndex}get deconflictor(){return this._deconflictor}get labeler(){return this._labeler}get numberOfGraphics(){return this._numberOfGraphics}get effectiveUpdatePolicy(){return null!=this.currentRenderer&&\"dictionary\"===this.currentRenderer.type?Ee.ASYNC:this._forcedUpdatePolicy??this.preferredUpdatePolicy}get featureStore(){return this._featureStore}get initializePromise(){return this._initializePromise}get scaleVisibility(){return this._scaleVisibility}get elevationAlignment(){return this._elevationAlignment}get objectStates(){return this._objectStates}get filterVisibility(){return this._filterVisibility}get updating(){return!!(this.dataUpdating||this._elevationAlignment?.updating||this._scaleVisibility?.updating||this._filterVisibility?.updating||this._rendererChangeAbortController||this._elevationInfoChangeAbortController||this._frameTaskHandle.updating||this.running)}get dataUpdating(){return!!(this._graphicsWaitingForSymbol.size>0||this._pendingUpdates.size>0||this._spatialIndex?.updating||this._updatingPendingLoadedGraphicsChange||this._dataUpdateQueue.running||this._loadingSymbols>0)}get running(){return this._pendingUpdates.size>0||!!this._spatialIndex?.updating||this._dataUpdateQueue.running||this._updateQueue.running}get suspendedOrOutsideOfView(){return this.owner.suspended||!!this.owner.suspendInfo?.outsideOfView}get updatingRemaining(){return this.updating?this._pendingUpdates.size+.1*(this._spatialIndex?.updatingRemaining||0)+.1*(this._elevationAlignment?.updatingRemaining||0):0}get displayFeatureLimit(){const e=this.owner&&this.owner.view&&this.owner.view.qualitySettings,t=e?.graphics3D.minTotalNumberOfFeatures??0,i=e?.graphics3D.maxTotalNumberOfFeatures??0,r=e?.graphics3D.maxNumberOfDrawCalls??0,s=e?.graphics3D.maxTotalNumberOfVertices??0,a=this.averageSymbolComplexity,n=Math.max(1,a?.verticesPerFeature??1),o=a&&a.drawCallsPerFeature>0&&r>0?r/a.drawCallsPerFeature:i,l=Math.ceil(s/n),h=Math.max(t,Math.min(i,l,o)),d=this._get(\"displayFeatureLimit\");return d&&d.maximumTotalNumberOfVertices===s&&d.averageSymbolComplexity===a&&d.maximumNumberOfFeatures===h?d:new le(s,h,a)}get averageSymbolComplexity(){const e=ne(this._symbolComplexities),t=this._get(\"averageSymbolComplexity\");return 0===e.numComplexities||null!=t&&(e.estimated&&(t.verticesPerFeature>=e.verticesPerFeature||t.verticesPerCoordinate>=e.verticesPerCoordinate||t.drawCallsPerFeature>=e.drawCallsPerFeature)||t.verticesPerFeature===e.verticesPerFeature&&t.verticesPerCoordinate===e.verticesPerCoordinate&&t.drawCallsPerFeature===e.drawCallsPerFeature)?t:e}get usedMemory(){const e=this.labelsEnabled?(this.averageSymbolComplexity?.memory.bytesPerFeatureLabel??0)*this._numberOfGraphics:0,t=this._getSymbolComplexitiesUsed().reduce(((e,t)=>e+t.memory.resourceBytes),0);if(null==this._symbolMaterials){this._symbolMaterials=[];for(const e of this._symbols.values())if(null!=e)for(const t of e.symbolLayers)if(t)for(const e of t.materials)e&&this._symbolMaterials.push(e)}const i=this.owner.view._stage.renderer,r=this.owner.view.basemapTerrain.overlayManager.renderer,s=this._symbolMaterials.reduce(((e,t)=>e+((i.getMaterialRenderer(t)||r.getMaterialRenderer(t))?.usedMemory??0)),0);return this._usedMemory+e+t+s}get usedMemoryPerGraphic(){if(this._usedMemory&&this._numberOfGraphics){const e=this._numberOfGraphics/(this._numberOfGraphics+Math.max(this._pendingAdds,this._pendingRemoves));return this._usedMemory/this._numberOfGraphics*e}if(null!=this.averageSymbolComplexity){const e=this.labelsEnabled?this.averageSymbolComplexity.memory.bytesPerFeatureLabel:0;return this.averageSymbolComplexity.memory.bytesPerFeature+e}return 0}get unprocessedMemoryEstimate(){return(this._pendingAdds-this._pendingRemoves)*this.usedMemoryPerGraphic}get _symbolComplexities(){return this.currentRenderer?this._getSymbolComplexitiesUsedOrRenderer(this.currentRenderer):this._getSymbolComplexitiesUsed()}get visible(){return this._visible}_getConvertedSymbol(e){const t=e;if(\"web-style\"===t.type)return t.clone();const i=this._symbolConversionCache.get(t.id);if(null!=i)return i;const r=ae(t,{geometryType:this.layer?.geometryType??void 0,retainId:!0,hasLabelingContext:this._hasLabelingContext(t),cimFallbackEnabled:!0}),s=r.symbol||null;return null==s&&r.error&&a.getLogger(this).error(r.error.message),this._symbolConversionCache.set(t.id,s),s}_getSymbolComplexitiesUsedOrRenderer(e){if(null==e)return[];const t=e.symbols,i=\"backgroundFillSymbol\"in e?e.backgroundFillSymbol:null;if(!i&&!t.length)return[];const r=[],s=this._getSymbolComplexityUsedOrRenderer(i);null!=s&&r.push(s);for(const a of t){const e=this._getSymbolComplexityUsedOrRenderer(a);null!=e&&r.push(e)}return r}_getSymbolComplexityUsedOrRenderer(e){if(null==e)return null;const t=this._symbols.get(e.id);if(null!=t)return t.complexity;const i=this._getConvertedSymbol(e);return null!=i?oe(i):null}_getSymbolComplexitiesUsed(){const e=[];return this._symbols.forEach((t=>{null!=t&&e.push(t.complexity)})),e}get _objectIdField(){return this.layer.objectIdField}constructor(e){super(e),this._propertiesPool=new Le({computedExtent:U},this),this.computedExtent=null,this.currentRenderer=null,this.rendererHasGeometryOperations=!1,this._graphicStateTracking=null,this.graphics3DGraphics=new Map,this.stageLayer=null,this.stage=null,this._graphicsDrapedUids=new Set,this._graphicsBySymbol=new Map,this._symbolConversionCache=new Map,this._symbols=new Map,this._graphicsWithoutSymbol=new Map,this._graphicsWaitingForSymbol=new Map,this._graphicsUpdateId=0,this._frameTaskHandle=Oe,this._dataUpdateQueue=new Q,this._updateQueue=new Q,this._suspendSymbolCleanup=!1,this._arcadeOnDemand=null,this._rendererChangeAbortController=null,this._elevationInfoChangeAbortController=null,this._initializeAbortController=null,this._elevationAlignment=null,this._scaleVisibility=null,this._filterVisibility=null,this._spatialIndex=null,this.extentPadding=0,this._updatingPendingLoadedGraphicsChange=null,this._featureStore=null,this._deconflictor=null,this._labeler=null,this._objectStates=null,this._viewElevationProvider=null,this._stageLayerElevationProvider=null,this._sharedSymbolResourcesOwnerHandle=null,this._whenGraphics3DGraphicRequests={},this._pendingUpdates=new Map,this._numberOfGraphics=0,this._numberOfGraphicsProvidingElevation=0,this._pendingAdds=0,this._pendingRemoves=0,this._applyPendingRemovesFirst=!1,this._loadingSymbols=0,this._pendingUpdatesPool=new c({allocator:e=>e||new Ne,deallocator:e=>(e.clear(),e)}),this._symbolWarningLogged=!1,this._geometryWarningLogged=!1,this._objectIdInvisibleSet=new Set,this._whenSymbolRemoved=new c,this.preferredUpdatePolicy=Ee.SYNC,this._forcedUpdatePolicy=null,this.elevationFeatureExpressionEnabled=!0,this.owner=null,this.layer=null,this.graphicSymbolSupported=!0,this.getRenderingInfoWithoutRenderer=!1,this.setUidToIdOnAdd=!0,this.hasZ=null,this.hasM=null,this._usedMemory=0,this._visible=!1,this._startCreateGraphics=!1,this._unusedSymbolsCache=e.owner.view.resourceController.memoryController.newCache(\"graphics-3d-unused-symbols\",(e=>e.destroy())),this.symbolCreationContext=new me(e.owner.view.resourceController.scheduler,((e,t)=>this._updateQueue.push(e,t)))}initialize(){this._featureStore=new ge({objectIdField:this.owner.layer?.objectIdField,hasZ:!!this.hasZ,hasM:!!this.hasM,viewSpatialReference:this._viewSpatialReference,featureSpatialReference:this.owner.featureSpatialReference,getSpatialIndex:()=>this.spatialIndex,forEach:e=>this.graphics3DGraphics.forEach(e)});const e=(e,t,i)=>this.spatialIndex.queryGraphicUIDsInExtent(e,t,i),{componentFactories:t}=this;this._elevationAlignment=t.elevationAlignment?.(this,e),this._scaleVisibility=t.scaleVisibility?.(this,e),this._filterVisibility=t.filterVisibility?.({featureStore:this._featureStore,getFeatureCount:()=>this.graphics3DGraphics.size,updateFeatureVisibilities:e=>this.modifyGraphics3DGraphicVisibilities((t=>t.setVisibilityFlag(de.GRAPHIC,pe.FILTER,e(N(t.graphic,this._objectIdField))))),setAllFeaturesVisibility:e=>this.modifyGraphics3DGraphicVisibilities((t=>t.setVisibilityFlag(de.GRAPHIC,pe.FILTER,e))),clearFeaturesVisibility:()=>this.modifyGraphics3DGraphicVisibilities((e=>e.setVisibilityFlag(de.GRAPHIC,pe.FILTER,!0)))}),this._deconflictor=t.deconflictor?.(this),this._labeler=t.labeler?.(this,this._scaleVisibility),this._objectStates=t.objectStates?.(this),this._initializeAbortController=new AbortController,this.addHandles(b((()=>this.owner.view.state.highlights),(()=>{const{highlightOrderMap:e}=this.owner.view.state;this.graphics3DGraphics.forEach((t=>t.updateHighlights(e)))}))),this._initializePromise=this._initializeAsync()}async _initializeAsync(){const e=this._initializeAbortController?.signal,t=this.owner.view;this._viewElevationProvider=new he(this._viewSpatialReference,t),this._initializeStage(t,this.layer.uid);const i=t.sharedSymbolResources;this.symbolCreationContext.sharedResources=i,this._sharedSymbolResourcesOwnerHandle=i.addGraphicsOwner(this.owner),null!=this.currentRenderer&&(this.symbolCreationContext.renderer=this.currentRenderer),this.symbolCreationContext.stage=this.stage,this.symbolCreationContext.streamDataRequester=i.streamDataRequester,this.symbolCreationContext.renderCoordsHelper=t.renderCoordsHelper,this.symbolCreationContext.layer=this.layer,this.symbolCreationContext.graphicsCoreOwner=this.owner,this.symbolCreationContext.localOriginFactory=new De(t.renderSpatialReference),this.symbolCreationContext.elevationProvider=t.elevationProvider,this.symbolCreationContext.notifyGraphicGeometryChanged=e=>this.notifyGraphicGeometryChanged(e),this.symbolCreationContext.notifyGraphicVisibilityChanged=e=>this.notifyGraphicVisibilityChanged(e);const r=ce(this.layer.elevationInfo,this.elevationFeatureExpressionEnabled);if(this.symbolCreationContext.featureExpressionInfoContext=await ye(r,this._viewSpatialReference,e,a.getLogger(this)),y(e),this.symbolCreationContext.screenSizePerspectiveEnabled=t.screenSizePerspectiveEnabled&&!!this.layer.screenSizePerspectiveEnabled,this.symbolCreationContext.slicePlaneEnabled=!!this.owner.slicePlaneEnabled,this.symbolCreationContext.physicalBasedRenderingEnabled=!!this.owner.view.qualitySettings?.physicallyBasedRenderingEnabled,this.symbolCreationContext.skipHighSymbolLods=!!this.owner.view.qualitySettings?.graphics3D?.skipHighSymbolLods,\"drapeSourceType\"in this.owner){const{owner:e}=this;this.symbolCreationContext.drapeSourceRenderer=t.basemapTerrain.overlayManager.registerGeometryDrapeSource(e),this.addHandles(s((()=>t.basemapTerrain.overlayManager.unregisterDrapeSource(e))))}this.addHandles([_((()=>this.suspendedOrOutsideOfView),(()=>this._updateQueue.unshift((()=>this._updateLayerVisibility()),null).catch(m))),_((()=>[this.layer?.screenSizePerspectiveEnabled,this.owner.view?.screenSizePerspectiveEnabled]),(()=>{const e=t.screenSizePerspectiveEnabled&&!!this.layer.screenSizePerspectiveEnabled;e!==this.symbolCreationContext.screenSizePerspectiveEnabled&&(this.symbolCreationContext.screenSizePerspectiveEnabled=e,this._labeler?.reset(),this.recreateAllGraphicsAndSymbols())})),_((()=>this.owner.slicePlaneEnabled),(e=>this._slicePlaneEnabledChange(!!e))),_((()=>this.owner.view.state?.rasterPixelRatio),(()=>this._pixelRatioChange())),_((()=>!!this.owner.view.qualitySettings?.physicallyBasedRenderingEnabled),(e=>this._physicalBasedRenderingChange(e))),_((()=>!!this.owner.view.qualitySettings?.graphics3D?.skipHighSymbolLods),(e=>this._skipHighSymbolLoDsChange(e))),_((()=>this.owner.view.focusAreas.activePolygons),(()=>this._updateFocusedLabels())),_((()=>this.owner.view.focusAreas.style),(()=>this.recreateAllGraphicsAndSymbols())),b((()=>t.basemapTerrain?.tilingScheme),(e=>{if(e.spatialReference.equals(this.symbolCreationContext.overlaySR)||null==t.basemapTerrain.spatialReference||(this.symbolCreationContext.overlaySR=t.basemapTerrain.spatialReference),this.hasHandles(\"loaded-graphics\"))this.recreateAllGraphics();else{const e=()=>this.owner?.loadedGraphics;this.addHandles([f(e,\"change\",(e=>{this._graphicsCollectionChanged(e),this._signalUpdatingDuringAsyncLoadedGraphicsChange()}),{onListenerAdd:()=>{this.recreateAllGraphics(),this._signalUpdatingDuringAsyncLoadedGraphicsChange()}})],\"loaded-graphics\")}}),{initial:!0}),_((()=>this.effectiveUpdatePolicy),(e=>{null!=this.stageLayer&&(this.stageLayer.updatePolicy=e),this.symbolCreationContext.isAsync=this.effectiveUpdatePolicy===Ee.ASYNC,e===Ee.SYNC&&this.runTask(je)}),v)]),this._frameTaskHandle=t.resourceController.scheduler.registerTask(Ve.GRAPHICS_CORE,this),this.layer&&\"featureReduction\"in this.layer&&this.addHandles(_((()=>this.layer.featureReduction),(()=>this._deconflictor?.featureReductionChange()))),this.notifyChange(\"averageSymbolComplexity\"),this.rendererChange(this.owner.renderer).catch((()=>{})),this._initializeAbortController=null}_abortInitialize(){this._initializeAbortController&&(this._initializeAbortController.abort(),this._initializeAbortController=null)}_updateFocusedLabels(){this.forEachGraphics3DSymbol(((e,t)=>{e.updateFocus((e=>{this.recreateGraphics([e.graphic])}),t)}))}destroy(){this._unusedSymbolsCache.destroy(),this._abortInitialize(),this._rendererChangeAbortController=o(this._rendererChangeAbortController),this._abortElevationInfoChange(),this._frameTaskHandle.remove(),this._frameTaskHandle=Oe,this._dataUpdateQueue.cancelAll(),this._updateQueue.cancelAll(),this._deconflictor=l(this._deconflictor),this._labeler=l(this._labeler),this._elevationAlignment=h(this._elevationAlignment),this._scaleVisibility=h(this._scaleVisibility),this._filterVisibility=h(this._filterVisibility),this._objectStates=h(this._objectStates),this.clear(),this._featureStore=h(this._featureStore),this._updatingPendingLoadedGraphicsChange=l(this._updatingPendingLoadedGraphicsChange),this._graphicStateTracking=h(this._graphicStateTracking),this.stage&&(this.stageLayer=h(this.stageLayer),this.stage=null),this._set(\"owner\",null);for(const e in this._whenGraphics3DGraphicRequests)this._whenGraphics3DGraphicRequests[e].reject(new r(\"graphic:layer-destroyed\",\"Layer has been destroyed\"));this._whenGraphics3DGraphicRequests=null,this._sharedSymbolResourcesOwnerHandle=l(this._sharedSymbolResourcesOwnerHandle),this._propertiesPool=h(this._propertiesPool),this._pendingUpdatesPool=null,this._symbolConversionCache.clear(),this._objectIdInvisibleSet.clear(),this._spatialIndex=h(this._spatialIndex)}clear(){this._objectStates?.allGraphicsDeleted(),null!=this._graphicStateTracking&&this._graphicStateTracking.allGraphicsDeleted(),this.graphics3DGraphics.forEach((e=>e.destroy())),this._spatialIndex?.clear(),this.graphics3DGraphics.clear(),this._numberOfGraphics=0,this._usedMemory=0,this._updateLayerVisibility(),this._symbols.forEach(h),this._symbols.clear(),this._symbolMaterials=null,this._graphicsBySymbol.clear(),this._graphicsWithoutSymbol.clear(),this._graphicsWaitingForSymbol.clear(),this._pendingUpdates.clear(),this._pendingUpdatesPool.clear(),this._pendingAdds=0,this._pendingRemoves=0,this._applyPendingRemovesFirst=!1,this.notifyChange(\"dataUpdating\"),this.notifyChange(\"running\"),this.notifyChange(\"updatingRemaining\"),this._featureStore.events.emit(\"changed\")}_initializeStage(e,t){this.stage=e._stage,this.stageLayer=new Ue(this.stage,{visible:!this.suspendedOrOutsideOfView,updatePolicy:this.effectiveUpdatePolicy},t);const i=this.stageLayer.events;i.on(\"transformationChanged\",(e=>this.notifyGraphicGeometryChanged(e.graphicUid))),i.on(\"shaderTransformationChanged\",(e=>this.notifyGraphicGeometryChanged(e.graphicUid))),i.on(\"visibilityChanged\",(e=>this.notifyGraphicVisibilityChanged(e.graphicUid))),i.on(\"geometryAdded\",(e=>this.notifyGraphicGeometryChanged(e.object.graphicUid))),i.on(\"geometryRemoved\",(e=>this.notifyGraphicGeometryChanged(e.object.graphicUid))),i.on(\"attributesChanged\",(e=>Ie(e.attribute)&&this.notifyGraphicGeometryChanged(e.object.graphicUid)))}notifyGraphicGeometryChanged(e){if(null==this._graphicStateTracking||null==e)return;const t=this.graphics3DGraphics.get(e);t&&this._graphicStateTracking.updateGraphicGeometry(t)}notifyGraphicVisibilityChanged(e){if(null==this._graphicStateTracking||null==e)return;const t=this.graphics3DGraphics.get(e);t&&this._graphicStateTracking.updateGraphicVisibility(t)}_updateLayerVisibility(){const e=this.displayFeatureLimit.maximumNumberOfFeatures,t=this._numberOfGraphics>e*Be,i=!this.suspendedOrOutsideOfView&&!t;i!==this._visible&&(this._visible=i,this._updateStageLayerVisibility())}_updateStageLayerVisibility(){const e=this._visible&&(null==this.layer.opacity||this.layer.opacity>=Me);this.stageLayer.visible!==e&&(this.stageLayer.visible=e,e?this.updateGraphicsVisibilities():this._hideAllGraphics())}getGraphics3DGraphicById(e){return null!=e?this.graphics3DGraphics.get(e):void 0}getGraphics3DGraphicByObjectId(e){return this.owner.layer?.objectIdField?this._findGraphics3DGraphicByObjectId(e):null}_getGraphicObjectID(e,t=this.owner.layer?.objectIdField){return N(e,t)}get graphics3DGraphicsByObjectID(){const e=this.owner.layer?.objectIdField;if(!e)return;const t=new Map;return this.graphics3DGraphics.forEach((i=>{if(!i)return;const r=i.graphic,s=this._getGraphicObjectID(r,e);null!=s&&t.set(s,i)})),t}get labelsEnabled(){return!!this._labeler?.layerLabelsEnabled()}async updateLabelingInfo(e){const t=this._deconflictor?.labelingInfoChange(e),i=this._labeler?.labelingInfoChange(e);await Promise.allSettled([t,i])}updateVisibilityInfo(){this._deconflictor?.labelingInfoChange(),this._labeler?.visibilityInfoChange()}get symbolUpdateType(){if(this._pendingUpdates.size>0)return\"unknown\";let e=!1,t=!1;for(const[i,r]of this._symbols)if(null!=r){switch(r.getFastUpdateStatus()){case Se.Loading:return\"unknown\";case Se.Fast:this._graphicsBySymbol.has(i)&&(t=!0);break;case Se.Slow:this._graphicsBySymbol.has(i)&&(e=!0);break;case Se.Mixed:this._graphicsBySymbol.has(i)&&(t=e=!0);case Se.Undefined:}}return t?e?\"mixed\":\"fast\":e?\"slow\":\"mixed\"}runTask(e){if(this._dataUpdateQueue.runTask(e),this._updateQueue.runTask(e),this._applyPendingUpdates(e),this.notifyChange(\"running\"),this.running||this.notifyChange(\"dataUpdating\"),this.notifyChange(\"updatingRemaining\"),!e.hasProgressed)return Fe}setObjectIdVisibility(e,t){t?this._objectIdInvisibleSet.delete(e):this._objectIdInvisibleSet.add(e);const i=this._findGraphics3DGraphicByObjectId(e);null!=i&&this._updateUserVisibility(i)}_findGraphics3DGraphicByObjectId(e){return n(this.graphics3DGraphics,(t=>this._getGraphicObjectID(t.graphic)===e))}_updateUserVisibility(e){if(null==e)return!1;const t=e.graphic,i=this._getGraphicObjectID(t),r=t.visible&&!this.owner.suspended&&this.stageLayer.visible&&(null==i||!this._objectIdInvisibleSet.has(i));return e.setVisibilityFlag(de.GRAPHIC,pe.USER,r)}_whenGraphics3DGraphic(e){const t=this.graphics3DGraphics.get(e.uid);if(t)return Promise.resolve(t);const i=this._whenGraphics3DGraphicRequests[e.uid];if(i)return i.promise;const r=g();return this._whenGraphics3DGraphicRequests[e.uid]=r,r.promise}async _boundsForGraphics3DGraphic(e,t){const i=this._viewSpatialReference,r=this.owner.view.renderSpatialReference,s=this.owner.view.basemapTerrain.spatialReference,a=(e,t,s)=>O(e,r,t,e,i,t,s),n=(e,t,r)=>O(e,s,t,e,i,t,r),o=this._viewElevationProvider?{service:this._viewElevationProvider,useViewElevation:null!=t&&!!t.useViewElevation,minDemResolution:null!=t?t.minDemResolution:null,minDemResolutionForPoints:this.owner.view.resolution}:null,l=await e.getProjectedBoundingBox(a,n,o,t?.signal);if(!l)return null;const h=l.boundingBox;if(l.requiresDrapedElevation){const e=this.symbolCreationContext.elevationProvider;if(e){M(h,ze);const t=e.getElevation(ze[0],ze[1],0,i,\"ground\")??0;h[2]=Math.min(h[2],t),h[5]=Math.max(h[5],t)}}return{boundingBox:h,screenSpaceObjects:l.screenSpaceObjects}}async whenGraphicBounds(e,t){await C((()=>this.owner?.loadedGraphics));const i=this.owner.layer?.objectIdField,s=this.owner.loadedGraphics.find((t=>t===e||null!=i&&null!=t.attributes&&e.attributes&&t.attributes[i]===e.attributes[i]));if(!s)throw new r(\"internal:graphic-not-part-of-view\",\"Graphic is not part of this view\");const a=await this._whenGraphics3DGraphic(s);return this._boundsForGraphics3DGraphic(a,t)}computeAttachmentOrigin(e,t){const i=this.graphics3DGraphics.get(e.uid);if(!i)return null;const r=i.computeAttachmentOrigin();if(0===r.render.num&&0===r.draped.num)return null;R(qe,0,0,0);let s=0;if(r.render.num>0){if(!j(r.render.origin,this.symbolCreationContext.renderCoordsHelper.spatialReference,Ye,t))return null;D(qe,qe,Ye),s++}if(r.draped.num>0){const[e,i]=r.draped.origin,a=this._viewElevationProvider.getElevation(e,i,\"ground\")??0;if(R(Ye,e,i,a),!j(Ye,this._viewElevationProvider.spatialReference,Ye,t))return null;D(qe,qe,Ye),s++}return s>1&&E(qe,qe,1/s),new A({x:qe[0],y:qe[1],z:qe[2],spatialReference:t})}getSymbolLayerSize(e,t){const i=this._symbols.get(e.id);if(null==i)throw new r(\"internal:symbol-not-part-of-view\",\"Symbol is not part of this view\");const s=e.symbolLayers.indexOf(t);if(-1===s)throw new r(\"internal:missing-symbol-layer\",\"Symbol layer is not in symbol\");const a=i.getSymbolLayerSize(s);if(null==a)throw new r(\"internal:missing-size\",\"Symbol layer has no valid size\");return a}_graphicsCollectionChanged(e){this._startCreateGraphics&&(this.add(e.added),this.remove(e.removed))}graphicUpdateHandler(e){const t=e.graphic.uid,i=this.graphics3DGraphics.get(t);if(null!=i||null!=this._graphicsWithoutSymbol.get(t))switch(e.property){case\"visible\":this._graphicUpdateVisibleHandler(i);break;case\"geometry\":this._graphicUpdateGeometryHandler(i,e);break;case\"symbol\":this._graphicUpdateSymbolHandler(i,e);break;case\"attributes\":break;case\"origin-transform\":this._graphicUpdateTransformHandler(i,e)}}_graphicUpdateGeometryHandler(e,t){this._graphicUpdateGeometryOrTransformHandler(e,t,(()=>!(null==t.newValue||null==e||!e.graphics3DSymbol.updateGeometry(e,t.newValue)||!(this._labeler?.updateGraphicGeometry(e)??1))&&(this._labeler?.setDirty(),!0)));const i=t.graphic.geometry;null!=i&&this._expandComputedExtent(i)}_graphicUpdateTransformHandler(e,t){const i=t.graphic.geometry;this._graphicUpdateGeometryOrTransformHandler(e,t,(()=>null!=t.newValue&&null!=e&&null!=i&&e.graphics3DSymbol.updateTransform(e,i.spatialReference,t.newValue,t.action)))}_graphicUpdateGeometryOrTransformHandler(e,t,i){if(null!=t.graphic.geometry)if(null!=e)i()||this._recreateGraphic(e.graphic);else{const e=t.graphic.symbol?.id;if(e){const t=this._symbols.get(e);if(null!=t&&t.loadStatus===we.LOADING)return}this._recreateGraphic(t.graphic)}else this._recreateGraphic(t.graphic)}_graphicUpdateSymbolHandler(e,t){const i=t.graphic,r=null!=e?e.graphics3DSymbol:null!=t.oldValue?this._symbols.get(t.oldValue.id):null;if(null==r||null==t.newValue)return void this._recreateGraphic(i);const s=r.symbol,a=this._getConvertedSymbol(t.newValue);if(null!=a&&(a.type!==s.type||\"web-style\"===a.type)||\"web-style\"===s.type)return void this._recreateGraphic(i);const n=this._graphicsBySymbol.get(s.id);if(n&&1!==n.size)return void this._recreateGraphic(i);const o=x(s,a);if(null==o)return void this._updateSymbolMapping(s.id,a);const l={diff:o,graphics3DGraphicPatches:[],symbolStatePatches:[]};if(r.prepareSymbolPatch(l),!P(l.diff))return void this._recreateGraphic(i);const h=this._getRenderingInfo(i);if(null==h)return void this._recreateGraphic(i);const d=r.extentPadding;for(const p of l.symbolStatePatches)p();if(d!==r.extentPadding&&this._recomputeExtentPadding(),null!=e)for(const p of l.graphics3DGraphicPatches)p(e,h);this._updateSymbolMapping(s.id,a)}_graphicUpdateVisibleHandler(e){this._updateUserVisibility(e)&&(this._labeler?.setDirty(),this._deconflictor?.setDirty())}recreateGraphics(e){this._suspendSymbolCleanup=!0,this.remove(e),this.add(e),this._suspendSymbolCleanup=!1,this.effectiveUpdatePolicy===Ee.SYNC&&this._cleanupSymbols()}_recreateGraphic(e){this.recreateGraphics([e])}_beginGraphicUpdate(e){const t=this._graphicsUpdateId;return this._graphicsUpdateId++,this._graphicsWaitingForSymbol.set(e.uid,t),1===this._graphicsWaitingForSymbol.size&&this.notifyChange(\"dataUpdating\"),t}_endGraphicUpdate(e,t){e&&(t&&this._graphicStateTracking?.updateGraphicError(e,t),this._graphicsWaitingForSymbol.delete(e.uid),0===this._graphicsWaitingForSymbol.size&&(this._cleanupSymbols(),this.notifyChange(\"dataUpdating\")))}_recomputeExtentPadding(){let e=0;this._symbols.forEach((t=>{null!=t&&(e=Math.max(e,t.extentPadding))})),this._set(\"extentPadding\",e)}_expandComputedExtent(e){const t=ke,i=e.spatialReference;B(e,t);const r=this._viewSpatialReference,s=Te.tmpVec;if(W(i,r)||V(t[0],t[1],0,i,s,r)&&(t[0]=s[0],t[1]=s[1],V(t[3],t[4],0,i,s,r),t[3]=s[0],t[4]=s[1]),!(isFinite(t[0])&&isFinite(t[3])&&isFinite(t[1])&&isFinite(t[4])))return;const a=this.computedExtent;let n=null;const o=isFinite(t[2])&&isFinite(t[5]),l=o&&(null==a?.zmin||t[2]<a.zmin),h=o&&(null==a?.zmax||t[5]>a.zmax);if(a){(t[0]<a.xmin||t[1]<a.ymin||t[3]>a.xmax||t[4]>a.ymax||l||h)&&(n=this._propertiesPool.get(\"computedExtent\"),n.xmin=Math.min(t[0],a.xmin),n.ymin=Math.min(t[1],a.ymin),n.xmax=Math.max(t[3],a.xmax),n.ymax=Math.max(t[4],a.ymax),n.spatialReference=r)}else n=this._propertiesPool.get(\"computedExtent\"),n.xmin=t[0],n.ymin=t[1],n.xmax=t[3],n.ymax=t[4],n.spatialReference=r;n&&(l&&(n.zmin=t[2]),h&&(n.zmax=t[5]),this._set(\"computedExtent\",n))}_abortElevationInfoChange(){this._elevationInfoChangeAbortController&&(this._elevationInfoChangeAbortController.abort(),this._elevationInfoChangeAbortController=null)}async elevationInfoChange(){this._abortElevationInfoChange();const e=new AbortController;this._elevationInfoChangeAbortController=e;const t=ce(this.layer.elevationInfo,this.elevationFeatureExpressionEnabled);this.symbolCreationContext.featureExpressionInfoContext=await ye(t,this._viewSpatialReference,e.signal,a.getLogger(this)),y(e.signal),this._elevationInfoChangeAbortController=null,this._labeler?.elevationInfoChange(),this.forEachGraphics3DSymbol(((e,t,i)=>{e.globalPropertyChanged(\"elevationInfo\",t)?t.forEach((e=>{const t=e.graphic,i=e.labelLayers;for(const r of i){r.graphics3DSymbolLayer.updateGraphicElevationContext(t,r)}})):this._recreateSymbol(i)})),this.updateStageLayerElevationProvider(),this._elevationAlignment?.elevationInfoChange()}updateStageLayerElevationProvider(){this._stageLayerElevationProvider?(this.layer.elevationInfo&&\"relative-to-scene\"===this.layer.elevationInfo.mode||0===this._numberOfGraphicsProvidingElevation)&&(this.owner.view.elevationProvider.unregister(this._stageLayerElevationProvider),this._stageLayerElevationProvider=d(this._stageLayerElevationProvider)):(!this.layer.elevationInfo||this.layer.elevationInfo&&\"relative-to-scene\"!==this.layer.elevationInfo.mode)&&this._numberOfGraphicsProvidingElevation>0&&(this._stageLayerElevationProvider=new Pe({layer:this.layer,stageLayer:this.stageLayer,view:this.owner.view}),this.owner.view.elevationProvider.register(\"scene\",this._stageLayerElevationProvider))}_clearSymbolsAndGraphics(){this.clear(),null!=this._filterVisibility&&this._filterVisibility.clear(),this._labeler?.reset(),this._deconflictor?.clear(),this._elevationAlignment?.clear(),this.stageLayer?.invalidateSpatialQueryAccelerator(),this._stageLayerElevationProvider&&(this.owner.view.elevationProvider.unregister(this._stageLayerElevationProvider),this._stageLayerElevationProvider=d(this._stageLayerElevationProvider))}startCreateGraphics(){this._startCreateGraphics=!0,this.recreateAllGraphics()}recreateAllGraphics(){this._recreateAllGraphics(!1)}recreateAllGraphicsAndSymbols(){this._recreateAllGraphics(!0)}_recreateAllGraphics(e=!1){if(!this._startCreateGraphics)return;const{loadedGraphics:t,view:i}=this.owner,r=i.basemapTerrain.tilingScheme&&t?.length?t.toArray():null;!e&&r||this._clearSymbolsAndGraphics(),this.symbolCreationContext.screenSizePerspectiveEnabled=this.owner.view.screenSizePerspectiveEnabled&&!!this.layer.screenSizePerspectiveEnabled,this.symbolCreationContext.slicePlaneEnabled=!!this.owner.slicePlaneEnabled,this._set(\"computedExtent\",null),r&&(e?this.add(r):this.recreateGraphics(r))}_recreateSymbol(e){const t=this._graphicsBySymbol.get(e),i=[];t&&(t.forEach(((e,t)=>{const r=e.usedMemory;this._conditionalRemove(e,t),this._spatialIndex?.remove(e),i.push(e.graphic),e.destroy(),this._removeGraphics3DGraphic(t,r),this._updateLayerVisibility(),this._featureStore.events.emit(\"changed\")})),this._graphicsBySymbol.set(e,new Map));const r=this._symbols.get(e);h(r),this._symbols.delete(e),this._symbolMaterials=null,this.add(i)}_recreateGraphicsForSymbol(e){const t=this._graphicsBySymbol.get(e);if(t){const e=[];t.forEach((t=>e.push(t.graphic))),this.recreateGraphics(e)}}_conditionalRemove(e,t){this._graphicsDrapedUids.delete(t),this._objectStates?.removeGraphic(e),this._labeler?.removeGraphic(e),this._deconflictor?.removeGraphic(e),null!=this._graphicStateTracking&&this._graphicStateTracking.removeGraphic(e)}add(e){e&&0!==e.length&&(this.owner.view.basemapTerrain?.tilingScheme?(this._updatePolicyForGraphics(e)===Ee.ASYNC?this._addDelayed(e):this._addImmediate(e),this.notifyChange(\"dataUpdating\")):a.getLogger(this).error(\"#add()\",\"Cannot add graphics before terrain surface has been initialized\"))}_updatePolicyForGraphics(e){if(this.effectiveUpdatePolicy===Ee.SYNC&&(\"mesh\"===this.layer.geometryType||null==this.layer.geometryType))for(const t of e)if(null!=t.geometry&&\"mesh\"===t.geometry.type&&!t.geometry.loaded)return Ee.ASYNC;return this.effectiveUpdatePolicy}_addImmediate(e){this._geometryWarningLogged=!1,this._symbolWarningLogged=!1;for(const t of e)this._addGraphic(t,this._getRenderingInfo(t,a.getLogger(this)),Ee.SYNC);this._cleanupSymbols(),this._labeler?.setDirty(),this._deconflictor?.setDirty()}_addDelayed(e){for(const t of e){const e=t.uid;let i=this._pendingUpdates.get(e);i?i.add?i.state!==He.NEW&&i.abortController?.abort():this._pendingAdds++:(i=this._pendingUpdatesPool.pushNew(),this._pendingAdds++,this._pendingUpdates.set(e,i)),i.add=t}this.notifyChange(\"running\"),this.notifyChange(\"updatingRemaining\"),this.notifyChange(\"dataUpdating\")}remove(e){this.effectiveUpdatePolicy===Ee.ASYNC?this._removeDelayed(e):this._removeImmediate(e),this.notifyChange(\"dataUpdating\")}_removeImmediate(e){for(const t of e)this._removeGraphic(t);this._cleanupSymbols(),this._labeler?.setDirty(),this._deconflictor?.setDirty()}_removeDelayed(e){for(const t of e){const e=t.uid,i=this._pendingUpdates.get(e);if(i)i.add&&(i.remove?i.add=null:this._pendingUpdates.delete(e),i.state===He.LOADING&&i.abortController?.abort(),this._pendingAdds--);else{const i=this._pendingUpdatesPool.pushNew();i.remove=t,this._pendingUpdates.set(e,i),this._pendingRemoves++,this._applyPendingRemovesFirst=!0}}0===this._pendingUpdates.size&&this._finishPendingUpdates(),this.notifyChange(\"running\"),this.notifyChange(\"updatingRemaining\"),this.notifyChange(\"dataUpdating\")}_finishPendingUpdates(){this._pendingUpdatesPool.clear(),this._cleanupSymbols(),(this._pendingAdds||this._pendingRemoves)&&a.getLogger(this).warn(\"pendingAdds/Removes in inconsistent state!\"),this._pendingAdds=0,this._pendingRemoves=0,this._applyPendingRemovesFirst=!1}_applyPendingUpdates(e){if(this._geometryWarningLogged=!1,this._symbolWarningLogged=!1,0===this._pendingUpdates.size&&this._spatialIndex?.updating)return this._spatialIndex.update(),void e.madeProgress();if(this._applyPendingRemovesFirst){this._applyPendingRemovesFirst=!1;for(const[t,i]of this._pendingUpdates){if(e.done){this._applyPendingRemovesFirst=!0;break}if(i.remove&&!i.add&&(this._pendingRemoves--,e.madeProgress(),this._removeGraphic(i.remove),i.remove=null,this._pendingUpdates.delete(t),0===this._pendingRemoves))break}}for(const[t,i]of this._pendingUpdates){if(e.done)break;i.add&&i.state===He.NEW&&this._processPendingUpdateNew(i);let r=this.effectiveUpdatePolicy;if(!i.remove||i.add&&i.state!==He.READY||(this._pendingRemoves--,e.madeProgress(),this._removeGraphic(i.remove),i.remove=null,r=Ee.SYNC),i.add)switch(i.state){case He.READY:this._addGraphic(i.add,i.renderingInfo,r),i.add=null,this._pendingAdds--,e.madeProgress();break;case He.REJECTED:i.add=null,this._pendingAdds--;case He.LOADING:}null==i.remove&&null==i.add&&this._pendingUpdates.delete(t)}0===this._pendingUpdates.size&&(this._finishPendingUpdates(),this.notifyChange(\"running\"),this.notifyChange(\"dataUpdating\"))}_processPendingUpdateNew(e){if(!e.add)return void(e.state=He.READY);const t=e.add.geometry;null==t||\"mesh\"!==t.type||t.loaded?this._processPendingUpdateNewRenderingInfo(e):this._processPendingUpdateNewMesh(e,t)}async _processPendingUpdateNewMesh(e,t){e.state=He.LOADING,e.abortController=new AbortController;const i=e.abortController.signal;try{await t.load({signal:i})}catch(r){return this._processPendingUpdateNewError(e,r)}e.abortController=null,this._processPendingUpdateNewRenderingInfo(e)}_processPendingUpdateNewError(e,t){e.abortController=null,u(t)?e.state=He.NEW:e.state=He.REJECTED}async _processPendingUpdateNewRenderingInfo(e){if(null==this.layer.renderer||\"dictionary\"!==this.layer.renderer.type)return e.renderingInfo=this._getRenderingInfo(e.add,a.getLogger(this)),void(e.state=He.READY);e.state=He.LOADING,e.abortController=new AbortController;let t=null;try{t=await this._getRenderingInfoAsync(e.add,{signal:e.abortController.signal})}catch(i){return e.abortController=null,void(u(i)?e.state=He.NEW:e.state=He.REJECTED)}null==t?.symbol?(this._symbolWarningLogged||(this._symbolWarningLogged=!0,a.getLogger(this).warn(`Graphic in layer ${this.layer.id} has no symbol and will not render`)),e.renderingInfo=null):e.renderingInfo=t,e.state=He.READY}_addGraphic(e,t,i){if(this._graphicsWithoutSymbol.set(e.uid,e),null==t?.symbol||!q(e))return;const r=this.stage.renderView.olidRenderHelper;if(r&&this.setUidToIdOnAdd){const t=ee(this.owner.view.map,this.layer.uid);r.setUidToObjectAndLayerId(e.objectId,e.uid,this.layer.id,this.layer.uid,!!this.layer.popupEnabled&&!t&&Ae(this.layer,this.owner.view.popup?.defaultPopupTemplateEnabled))}const s=t.symbol,a=this.getOrCreateGraphics3DSymbol(s,t.renderer);if(null==a)return;this._expandComputedExtent(e.geometry);const n=this._beginGraphicUpdate(e),o=new ue(e,t,this.layer);let l=!1;const h=e=>{e===a.symbol.id&&(l=!0)};this._whenSymbolRemoved.push(h);const d=()=>{if(--this._loadingSymbols,this.destroyed)return;this._whenSymbolRemoved.removeUnordered(h);if(this._graphicsWaitingForSymbol.get(e.uid)!==n||l||a.destroyed||this.graphicSymbolSupported&&e.symbol&&e.symbol.id!==a.symbol.id)--a.referenced,this._cleanupSymbols();else{const t=this._createGraphics3DGraphic(a,o);this._spatialIndex&&null!=t&&this._spatialIndex.add(t),--a.referenced,this._endGraphicUpdate(e)}this._featureStore.events.emit(\"changed\"),this._labeler?.setDirty()},p=t=>{--this._loadingSymbols,this.destroyed||(this._whenSymbolRemoved.removeUnordered(h),l||(u(t)?this.add([e]):a.destroyed||this._endGraphicUpdate(e,t)))};++this._loadingSymbols,i===Ee.ASYNC?a.load((()=>this._dataUpdateQueue.push(d,null).catch(m)),(e=>this._dataUpdateQueue.push((()=>p(e)),null).catch(m))):a.load(d,p)}_removeGraphic(e){const t=e.uid,i=this.graphics3DGraphics.get(t);if(i){i.graphics3DSymbol.onRemoveGraphic(i);const e=i.usedMemory,r=i.isElevationSource;this._conditionalRemove(i,t),this._spatialIndex?.remove(i);const s=i.graphics3DSymbol.symbol.id;this._graphicsBySymbol.get(s)?.delete(t),this._graphicsWithoutSymbol.delete(t),this._removeGraphics3DGraphic(t,e,r),i.destroy(),this._featureStore.events.emit(\"changed\")}else this._graphicsWithoutSymbol.delete(t),this._graphicsWaitingForSymbol.delete(t),0===this._graphicsWaitingForSymbol.size&&(this._cleanupSymbols(),this.notifyChange(\"dataUpdating\"))}_hasLabelingContext(e){if(e instanceof te||e instanceof ie){const t=this.symbolCreationContext.layer;return!!t.labelingInfo&&t.labelingInfo.some((t=>t.symbol===e))}return!1}_hasValidSymbolCreationContext(e){return!(e instanceof te&&!this._hasLabelingContext(e))||(a.getLogger(this).error(\"LabelSymbol3D is only valid as part of a LabelClass. Using LabelSymbol3D as a renderer symbol is not supported.\"),!1)}_getRenderingInfo(e,t){const i=e.geometry;if(null==i)return t&&!this._geometryWarningLogged&&(this._geometryWarningLogged=!0,t.warn(`Graphic in layer ${this.layer.id} has no geometry and will not render`)),null;if(!L(i.spatialReference,this._viewSpatialReference))return t&&!this._geometryWarningLogged&&(this._geometryWarningLogged=!0,t.warn(`Graphic in layer ${this.layer.id} has incompatible spatial reference and will not render`)),null;if(!this.graphicSymbolSupported&&null!=e.symbol)return t&&!this._symbolWarningLogged&&(this._symbolWarningLogged=!0,t.warn(`Graphic in layer ${this.layer.id} is not allowed to have a symbol, use a renderer instead`)),null;const r=this.rendererHasGeometryOperations?Y(e,this.layer):e;let s;if(this.owner.getRenderingInfo&&(this.getRenderingInfoWithoutRenderer||null!=this.currentRenderer))s=this.owner.getRenderingInfo(r,this.currentRenderer,this._arcadeOnDemand);else{const e=r.symbol||se(r.geometry);s=new X(null,e)}return null==s?.symbol?(t&&!this._symbolWarningLogged&&(this._symbolWarningLogged=!0,t.warn(`Graphic in layer ${this.layer.id} has no symbol and will not render`)),null):s}_getRenderingInfoAsync(e,t){if(null==e.geometry)return this._geometryWarningLogged||(this._geometryWarningLogged=!0,a.getLogger(this).warn(`Graphic in layer ${this.layer.id} has no geometry and will not render`)),null;if(!this.graphicSymbolSupported&&null!=e.symbol)return this._symbolWarningLogged||(this._symbolWarningLogged=!0,a.getLogger(this).warn(`Graphic in layer ${this.layer.id} is not allowed to have a symbol, use a renderer instead`)),null;const i=this.rendererHasGeometryOperations?Y(e,this.layer):e;return this.owner.getRenderingInfoAsync(i,this.currentRenderer,this._arcadeOnDemand,t)}_createGraphics3DSymbol(e,t){if(!this._hasValidSymbolCreationContext(e))return null;const i=this._getConvertedSymbol(e);if(!i)return null;let r;if(null!=t&&\"backgroundFillSymbol\"in t&&t.backgroundFillSymbol){const e=ae(t.backgroundFillSymbol,{ignoreDrivers:!0});null!=e.symbol&&(r=e.symbol.symbolLayers)}const s=be(i,this.symbolCreationContext,r);return s.load((()=>{const e=s.extentPadding;e>this.extentPadding&&this._set(\"extentPadding\",e),this.notifyChange(\"averageSymbolComplexity\")}),(()=>{})),s}getOrCreateGraphics3DSymbol(e,t){let i=this._symbols.get(e.id);if(void 0===i){const r=this._unusedSymbolsCache.pop(e.id);i=null!=r?r:e instanceof re?new _e(e,(e=>this._dataUpdateQueue.push(e,null)),(e=>this._createGraphics3DSymbol(e,t))):this._createGraphics3DSymbol(e,t),this._symbols.set(e.id,i),this._symbolMaterials=null}return null!=i&&++i.referenced,i}trackGraphicState(e){return null==this._graphicStateTracking&&(this._graphicStateTracking=new ve(this)),this._graphicStateTracking.add(e)}_addGraphics3DGraphic(e){this._usedMemory+=e.usedMemory,this.graphics3DGraphics.set(e.graphic.uid,e),this._numberOfGraphics++,e.isElevationSource&&(this._numberOfGraphicsProvidingElevation++,this.updateStageLayerElevationProvider()),this._updateLayerVisibility()}_removeGraphics3DGraphic(e,t,i=!1){this._usedMemory-=t,this.graphics3DGraphics.delete(e),this._numberOfGraphics--,i&&(this._numberOfGraphicsProvidingElevation--,this.updateStageLayerElevationProvider()),this._updateLayerVisibility()}_createGraphics3DGraphic(e,t){const i=t.graphic;if(this._graphicsWithoutSymbol.delete(i.uid),!this._symbols.has(e.symbol.id))return this.add([i]),null;if(this.graphics3DGraphics.has(i.uid))return null;const r=e.createGraphics3DGraphic(t);if(null==r)return null;this._addGraphics3DGraphic(r);const s=e.symbol.id;this._graphicsBySymbol.has(s)||this._graphicsBySymbol.set(s,new Map),this._graphicsBySymbol.get(s).set(i.uid,r);if(r.isDraped&&this._graphicsDrapedUids.add(i.uid),r.centroid=null,null!=i.geometry&&\"point\"!==i.geometry.type&&(r.centroid=Ce(i.geometry,this._viewSpatialReference)),this._updateUserVisibility(r),null!=this._scaleVisibility&&this._scaleVisibility.updateVisibility(r),null!=this._filterVisibility){const{defaultVisibility:e}=this._filterVisibility;r.setVisibilityFlag(de.GRAPHIC,pe.FILTER,e),e||this._filterVisibility.reapply()}this._deconflictor?.addGraphic(r),this._labeler?.addGraphic(r),this._objectStates?.addGraphic(r),r.initialize(this.stageLayer),null!=this._graphicStateTracking&&this._graphicStateTracking.addGraphic(r);const a=this._whenGraphics3DGraphicRequests[i.uid];return a&&(delete this._whenGraphics3DGraphicRequests[i.uid],a.resolve(r)),this._symbolMaterials=null,r}async rendererChange(e){if(this._rendererChangeAbortController=o(this._rendererChangeAbortController),e!==this.currentRenderer)if(this._validateRenderer(e),null==e&&this._currentRendererChange(null,!1),Z(e))if(e?.arcadeRequired){const t=new AbortController;this._rendererChangeAbortController=t;const{arcadeUtils:i}=await this._ensureArcade();y(t);const r=i.hasGeometryOperations(e);r&&(await i.enableGeometryOperations(),y(t)),this.effectiveUpdatePolicy===Ee.ASYNC?await this._updateQueue.push((()=>this._currentRendererChange(e,r)),t.signal):this._currentRendererChange(e,r),this._rendererChangeAbortController=null}else if(this.effectiveUpdatePolicy===Ee.ASYNC){const t=new AbortController;this._rendererChangeAbortController=t,await this._updateQueue.push((()=>this._currentRendererChange(e,!1)),t.signal),this._rendererChangeAbortController=null}else this._currentRendererChange(e,!1);else this._currentRendererChange(e,!1)}async _ensureArcade(){return null==this._arcadeOnDemand?(this._arcadeOnDemand=await K(),this._arcadeOnDemand):this._arcadeOnDemand}_currentRendererChange(e,t){this.currentRenderer=e,this.rendererHasGeometryOperations=t,this.symbolCreationContext.arcade=this._arcadeOnDemand;const i=this.symbolCreationContext.renderer;if(e===i)return;if(this._symbolConversionCache.clear(),this._unusedSymbolsCache.clear(),null==e)return this.symbolCreationContext.renderer=null,void this.recreateAllGraphicsAndSymbols();const r=x(i,e);this._updateUnchangedSymbolMappings(r,e,i),this.symbolCreationContext.renderer=e,null!=r&&(\"complete\"===r.type?this.recreateAllGraphicsAndSymbols():\"partial\"===r.type&&(this._applyRendererDiff(r,e,i)?this._labeler?.reset():this.recreateAllGraphicsAndSymbols()),this.notifyChange(\"averageSymbolComplexity\"))}_diffHasSymbolChange(e){for(const t in e.diff)switch(t){case\"visualVariables\":case\"defaultSymbol\":case\"uniqueValueInfos\":break;case\"uniqueValueGroups\":case\"authoringInfo\":case\"fieldDelimiter\":delete e.diff[t];break;default:return!0}return!1}_applySymbolSetDiff(e,t,i){e=e||[],t=t||[];const r=[];for(const s of t){const t=this._graphicsBySymbol.get(s.id);t&&t.forEach(((a,n)=>{const o=a.graphic,l=this.layer instanceof H?this.layer:null,h=this._arcadeOnDemand;if(s===i.defaultSymbol&&i.getSymbol(Y(o,l),{arcade:h})===i.defaultSymbol)return;const d=a.usedMemory;e.length||i.defaultSymbol?r.push(o):this._graphicsWithoutSymbol.set(n,o);const p=this.graphics3DGraphics.get(n);this._conditionalRemove(p,n),a.destroy(),t.delete(n),this._removeGraphics3DGraphic(n,d),this._updateLayerVisibility()})),this._whenSymbolRemoved.forAll((e=>e(s.id)))}(e.length||r.length)&&(this._graphicsWithoutSymbol.forEach((e=>r.push(e))),this._graphicsWithoutSymbol.clear(),this.add(r)),this._cleanupSymbols(),this._labeler?.setDirty(),this._deconflictor?.setDirty()}_applyUniqueValueRendererDiff(e,t,r){const s=e.diff.defaultSymbol,a=e.diff.uniqueValueInfos;if(s||a){const n=a?a.added.map((e=>e.symbol)).filter(i):[],o=a?a.removed.map((e=>e.symbol)).filter(i):[];if(a)for(let e=0;e<a.changed.length;e++)n.push(a.changed[e].newValue.symbol),o.push(a.changed[e].oldValue.symbol);return s?(r.defaultSymbol&&o.push(r.defaultSymbol),t.defaultSymbol&&n.push(t.defaultSymbol)):r.defaultSymbol&&n.length&&o.push(t.defaultSymbol),this._applySymbolSetDiff(n,o,t),delete e.diff.defaultSymbol,delete e.diff.uniqueValueInfos,!0}return!1}_calculateUnchangedSymbolMapping(e,t,i){if(\"unique-value\"!==t?.type||\"unique-value\"!==i?.type||null!=e&&\"partial\"!==e.type)return[];const r=e=>null!=e?e.id:null,s=e&&e.diff,a=s?.defaultSymbol,n=s&&s.uniqueValueInfos;let o;if(n)o=n.unchanged.map((e=>({oldId:r(e.oldValue.symbol),newId:r(e.newValue.symbol)})));else{o=[];for(const e of i.uniqueValueInfos??[]){const i=r(e.symbol),s=t.uniqueValueInfos?.find((t=>t.value===e.value));s&&i!==r(s.symbol)&&o.push({oldId:i,newId:r(s.symbol)})}}return!a&&i.defaultSymbol&&o.push({oldId:r(i.defaultSymbol),newId:r(t.defaultSymbol)}),o}_updateSymbolMapping(e,t){const i=null!=t&&t?\"string\"==typeof t?t:t.id:null;if(null==e||e===i)return;const r=this._graphicsBySymbol.get(e);this._graphicsBySymbol.delete(e),void 0!==r&&this._graphicsBySymbol.set(i,r);const s=this._symbols.get(e);if(void 0!==s&&(this._symbols.delete(e),this._symbols.set(i,s),this._symbolMaterials=null,null!=s)){const e=\"string\"==typeof t?null:t;null!=e?s.symbol=e:s.symbol.id=i}}_updateUnchangedSymbolMappings(e,t,i){const r=this._calculateUnchangedSymbolMapping(e,t,i);for(const{oldId:s,newId:a}of r)this._updateSymbolMapping(s,a)}_applyRendererDiff(e,t,i){if(this._diffHasSymbolChange(e))return!1;if(t instanceof $&&i instanceof $&&this._applyUniqueValueRendererDiff(e,t,i)&&0===Object.keys(e.diff).length)return!0;for(const r of this._graphicsBySymbol.keys()){const i=this._symbols.get(r);if(null!=i)switch(i.applyRendererDiff(e,t)){case Ge.RecreateSymbol:this._recreateSymbol(r);break;case Ge.RecreateGraphics:this._recreateGraphicsForSymbol(r);case Ge.FastUpdate:}}return!0}opacityChange(){this._updateStageLayerVisibility(),this.forEachGraphics3DSymbol(((e,t)=>e.globalPropertyChanged(\"opacity\",t)))}_slicePlaneEnabledChange(e){e!==this.symbolCreationContext.slicePlaneEnabled&&(this.symbolCreationContext.slicePlaneEnabled=e,this.stageLayer.sliceable=e,this.forEachGraphics3DSymbol(((e,t)=>e.globalPropertyChanged(\"slicePlaneEnabled\",t))),this._deconflictor?.slicePlaneEnabledChange(),this._labeler?.slicePlaneEnabledChange())}_physicalBasedRenderingChange(e){this.symbolCreationContext.physicalBasedRenderingEnabled=e,this.forEachGraphics3DSymbol(((e,t,i)=>{e.globalPropertyChanged(\"physicalBasedRenderingEnabled\",t)||this._recreateSymbol(i)}))}_skipHighSymbolLoDsChange(e){this.symbolCreationContext.skipHighSymbolLods=e,this.forEachGraphics3DSymbol(((e,t,i)=>{e.globalPropertyChanged(\"skipHighSymbolLods\",t)||this._recreateSymbol(i)}))}_pixelRatioChange(){this.forEachGraphics3DSymbol(((e,t,i)=>{e.globalPropertyChanged(\"pixelRatio\",t)||this._recreateSymbol(i)}))}_signalUpdatingDuringAsyncLoadedGraphicsChange(){this._updatingPendingLoadedGraphicsChange&&this._updatingPendingLoadedGraphicsChange.remove(),this._updatingPendingLoadedGraphicsChange=S((()=>{this._updatingPendingLoadedGraphicsChange=null}))}setClippingExtent(e,t){const i=this.symbolCreationContext.clippingExtent,r=k();return Re(e,r,t)?this.symbolCreationContext.clippingExtent=T(F(),r):this.symbolCreationContext.clippingExtent=null,!z(this.symbolCreationContext.clippingExtent,i)}modifyGraphics3DGraphicVisibilities(e){if(this.destroyed)return;let t=!1;this.graphics3DGraphics.forEach((i=>{e(i)&&(t=!0)})),t&&(this._labeler?.setDirty(),this._deconflictor?.setDirty())}forEachGraphics3DSymbol(e){for(const[t,i]of this._symbols){if(null==i)return;e(i,this._graphicsBySymbol.get(t)||Qe,t)}}updateGraphicsVisibilities(){null!=this._filterVisibility&&this._filterVisibility.reapply(),this.modifyGraphics3DGraphicVisibilities((e=>{const t=this._updateUserVisibility(e),i=null!=this._scaleVisibility&&this._scaleVisibility.updateVisibility(e);return t||i}))}_hideAllGraphics(){this.modifyGraphics3DGraphicVisibilities((e=>e.setVisibilityFlag(de.GRAPHIC,pe.USER,!1)))}_validateRenderer(e){const t=()=>`'${this.layer.title?`${this.layer.title}, `:\"\"}id:${this.layer.id}'`,i=J(e,{geometryType:this.layer?.geometryType,logWarning:(e,i)=>a.getLogger(this).warn(e,`Symbology conversion for layer ${t()}: ${i}`)});if(i){const e=`Renderer for layer ${t} is not supported in a SceneView`;a.getLogger(this).warn(e,i.message)}}_cleanupSymbols(){if(this._graphicsWaitingForSymbol.size>0||this._suspendSymbolCleanup)return;let e=!1;this._symbols.forEach(((t,i)=>{if(null==t||t.referenced>0)return;const r=this._graphicsBySymbol.get(i);r&&0!==r.size||(this._graphicsBySymbol.delete(i),this._symbols.delete(i),this._symbolMaterials=null,this._unusedSymbolsCache.put(i,t,p),e=!0)})),e&&(this._recomputeExtentPadding(),this.notifyChange(\"averageSymbolComplexity\"))}get test(){}get performanceInfo(){return new fe(this.graphics3DGraphics.size,this._graphicsWithoutSymbol.size,this._pendingUpdates.size)}};var He;We.tmpVec=I(),e([G({readOnly:!0})],We.prototype,\"computedExtent\",void 0),e([G()],We.prototype,\"currentRenderer\",void 0),e([G()],We.prototype,\"rendererHasGeometryOperations\",void 0),e([G()],We.prototype,\"_frameTaskHandle\",void 0),e([G()],We.prototype,\"_dataUpdateQueue\",void 0),e([G()],We.prototype,\"_updateQueue\",void 0),e([G({readOnly:!0})],We.prototype,\"_viewSpatialReference\",null),e([G()],We.prototype,\"_rendererChangeAbortController\",void 0),e([G()],We.prototype,\"_elevationInfoChangeAbortController\",void 0),e([G()],We.prototype,\"_initializeAbortController\",void 0),e([G()],We.prototype,\"_elevationAlignment\",void 0),e([G()],We.prototype,\"_scaleVisibility\",void 0),e([G()],We.prototype,\"_filterVisibility\",void 0),e([G()],We.prototype,\"_initializePromise\",void 0),e([G()],We.prototype,\"_spatialIndex\",void 0),e([G({readOnly:!0})],We.prototype,\"extentPadding\",void 0),e([G()],We.prototype,\"_updatingPendingLoadedGraphicsChange\",void 0),e([G()],We.prototype,\"_featureStore\",void 0),e([G()],We.prototype,\"_objectStates\",void 0),e([G()],We.prototype,\"_loadingSymbols\",void 0),e([G()],We.prototype,\"preferredUpdatePolicy\",void 0),e([G()],We.prototype,\"_forcedUpdatePolicy\",void 0),e([G({readOnly:!0})],We.prototype,\"effectiveUpdatePolicy\",null),e([G({constructOnly:!0})],We.prototype,\"elevationFeatureExpressionEnabled\",void 0),e([G({constructOnly:!0})],We.prototype,\"owner\",void 0),e([G({constructOnly:!0})],We.prototype,\"layer\",void 0),e([G({constructOnly:!0})],We.prototype,\"graphicSymbolSupported\",void 0),e([G({constructOnly:!0})],We.prototype,\"getRenderingInfoWithoutRenderer\",void 0),e([G({constructOnly:!0})],We.prototype,\"componentFactories\",void 0),e([G({constructOnly:!0})],We.prototype,\"setUidToIdOnAdd\",void 0),e([G()],We.prototype,\"featureStore\",null),e([G()],We.prototype,\"initializePromise\",null),e([G()],We.prototype,\"scaleVisibility\",null),e([G()],We.prototype,\"elevationAlignment\",null),e([G()],We.prototype,\"objectStates\",null),e([G()],We.prototype,\"filterVisibility\",null),e([G({readOnly:!0})],We.prototype,\"updating\",null),e([G({readOnly:!0})],We.prototype,\"dataUpdating\",null),e([G({readOnly:!0})],We.prototype,\"running\",null),e([G({readOnly:!0})],We.prototype,\"suspendedOrOutsideOfView\",null),e([G({readOnly:!0,dependsOn:[]})],We.prototype,\"updatingRemaining\",null),e([G({readOnly:!0})],We.prototype,\"displayFeatureLimit\",null),e([G({readOnly:!0,dependsOn:[]})],We.prototype,\"averageSymbolComplexity\",null),e([G({constructOnly:!0})],We.prototype,\"hasZ\",void 0),e([G({constructOnly:!0})],We.prototype,\"hasM\",void 0),e([G()],We.prototype,\"_objectIdField\",null),We=Te=e([w(\"esri.views.3d.layers.graphics.Graphics3DCore\")],We),function(e){e[e.NEW=0]=\"NEW\",e[e.LOADING=1]=\"LOADING\",e[e.READY=2]=\"READY\",e[e.REJECTED=3]=\"REJECTED\"}(He||(He={}));class Ne{constructor(){this.add=null,this.renderingInfo=null,this.state=He.NEW,this.abortController=null,this.remove=null}clear(){this.add=null,this.renderingInfo=null,this.state=He.NEW,this.abortController=null,this.remove=null}}const Be=10,qe=I(),Ye=I(),Qe=new Map;export{We as Graphics3DCore};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}