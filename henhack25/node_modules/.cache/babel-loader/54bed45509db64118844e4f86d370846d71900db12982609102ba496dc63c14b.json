{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from \"../../VertexStream.js\";\nimport { BlendFactor as t, PixelFormat as s, TextureWrapMode as r } from \"../../../../../webgl/enums.js\";\nimport { FramebufferObject as i } from \"../../../../../webgl/FramebufferObject.js\";\nimport { TextureDescriptor as a } from \"../../../../../webgl/TextureDescriptor.js\";\nconst n = [1, 0],\n  o = [0, 1];\nclass u {\n  constructor() {\n    this._blurFBO = null, this._size = [0, 0], this._programDesc = {\n      gaussianBlur: {\n        vsPath: \"post-processing/pp\",\n        fsPath: \"post-processing/blur/gaussianBlur\",\n        attributes: new Map([[\"a_position\", 0]])\n      },\n      radialBlur: {\n        vsPath: \"post-processing/pp\",\n        fsPath: \"post-processing/blur/radial-blur\",\n        attributes: new Map([[\"a_position\", 0]])\n      },\n      blit: {\n        vsPath: \"post-processing/pp\",\n        fsPath: \"post-processing/blit\",\n        attributes: new Map([[\"a_position\", 0]])\n      }\n    };\n  }\n  dispose() {\n    this._blurFBO && (this._blurFBO.dispose(), this._blurFBO = null);\n  }\n  draw(t, s, r) {\n    const {\n        context: i\n      } = t,\n      {\n        type: a,\n        radius: n\n      } = r;\n    if (0 === n) return;\n    this._createOrResizeResources(t), this._quad || (this._quad = new e(i, [-1, -1, 1, -1, -1, 1, 1, 1]));\n    const o = this._quad;\n    o.bind(), \"blur\" === a ? this._gaussianBlur(t, s, n) : this._radialBlur(t, s), o.unbind();\n  }\n  _gaussianBlur(e, s, r) {\n    const {\n        context: i,\n        state: a,\n        painter: u,\n        pixelRatio: l\n      } = e,\n      {\n        size: d\n      } = a,\n      {\n        materialManager: b\n      } = u,\n      c = this._programDesc,\n      _ = this._quad,\n      p = [Math.round(l * d[0]), Math.round(l * d[1])],\n      h = this._blurFBO,\n      m = b.getProgram(c.gaussianBlur, [{\n        name: \"radius\",\n        value: Math.ceil(r)\n      }]);\n    i.useProgram(m), i.setBlendingEnabled(!1), i.bindFramebuffer(h), i.bindTexture(s.colorTexture, 4), m.setUniform1i(\"u_colorTexture\", 4), m.setUniform2fv(\"u_texSize\", p), m.setUniform2fv(\"u_direction\", n), m.setUniform1f(\"u_sigma\", r), _.draw(), i.bindFramebuffer(s), i.setStencilWriteMask(0), i.setStencilTestEnabled(!1), i.setDepthWriteEnabled(!1), i.setDepthTestEnabled(!1), i.bindTexture(h?.colorTexture, 5), m.setUniform1i(\"u_colorTexture\", 5), m.setUniform2fv(\"u_direction\", o), _.draw(), i.setBlendingEnabled(!0), i.setBlendFunction(t.ONE, t.ONE_MINUS_SRC_ALPHA), i.setStencilTestEnabled(!0);\n  }\n  _radialBlur(e, s) {\n    const {\n        context: r,\n        painter: i\n      } = e,\n      {\n        materialManager: a\n      } = i,\n      n = this._programDesc,\n      o = this._quad,\n      u = this._blurFBO;\n    r.bindFramebuffer(u);\n    const l = a.getProgram(n.radialBlur);\n    r.useProgram(l), r.setBlendingEnabled(!1), r.bindTexture(s.colorTexture, 4), l.setUniform1i(\"u_colorTexture\", 4), o.draw(), r.bindFramebuffer(s), r.setStencilWriteMask(0), r.setStencilTestEnabled(!1), r.setDepthWriteEnabled(!1), r.setDepthTestEnabled(!1), r.setBlendingEnabled(!0);\n    const d = a.getProgram(n.blit);\n    r.useProgram(d), r.bindTexture(u?.colorTexture, 5), d.setUniform1i(\"u_texture\", 5), r.setBlendFunction(t.ONE, t.ONE_MINUS_SRC_ALPHA), o.draw();\n  }\n  _createOrResizeResources(e) {\n    const {\n        context: t,\n        state: n,\n        pixelRatio: o\n      } = e,\n      {\n        size: u\n      } = n,\n      l = Math.round(o * u[0]),\n      d = Math.round(o * u[1]);\n    if (!this._blurFBO || this._size[0] !== l || this._size[1] !== d) if (this._size[0] = l, this._size[1] = d, this._blurFBO) this._blurFBO.resize(l, d);else {\n      const e = new a(l, d);\n      e.internalFormat = s.RGBA, e.wrapMode = r.CLAMP_TO_EDGE, this._blurFBO = new i(t, e);\n    }\n  }\n}\nexport { u as Blur };","map":{"version":3,"names":["e","BlendFactor","t","PixelFormat","s","TextureWrapMode","r","FramebufferObject","i","TextureDescriptor","a","n","o","u","constructor","_blurFBO","_size","_programDesc","gaussianBlur","vsPath","fsPath","attributes","Map","radialBlur","blit","dispose","draw","context","type","radius","_createOrResizeResources","_quad","bind","_gaussianBlur","_radialBlur","unbind","state","painter","pixelRatio","l","size","d","materialManager","b","c","_","p","Math","round","h","m","getProgram","name","value","ceil","useProgram","setBlendingEnabled","bindFramebuffer","bindTexture","colorTexture","setUniform1i","setUniform2fv","setUniform1f","setStencilWriteMask","setStencilTestEnabled","setDepthWriteEnabled","setDepthTestEnabled","setBlendFunction","ONE","ONE_MINUS_SRC_ALPHA","resize","internalFormat","RGBA","wrapMode","CLAMP_TO_EDGE","Blur"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/Blur.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../VertexStream.js\";import{BlendFactor as t,PixelFormat as s,TextureWrapMode as r}from\"../../../../../webgl/enums.js\";import{FramebufferObject as i}from\"../../../../../webgl/FramebufferObject.js\";import{TextureDescriptor as a}from\"../../../../../webgl/TextureDescriptor.js\";const n=[1,0],o=[0,1];class u{constructor(){this._blurFBO=null,this._size=[0,0],this._programDesc={gaussianBlur:{vsPath:\"post-processing/pp\",fsPath:\"post-processing/blur/gaussianBlur\",attributes:new Map([[\"a_position\",0]])},radialBlur:{vsPath:\"post-processing/pp\",fsPath:\"post-processing/blur/radial-blur\",attributes:new Map([[\"a_position\",0]])},blit:{vsPath:\"post-processing/pp\",fsPath:\"post-processing/blit\",attributes:new Map([[\"a_position\",0]])}}}dispose(){this._blurFBO&&(this._blurFBO.dispose(),this._blurFBO=null)}draw(t,s,r){const{context:i}=t,{type:a,radius:n}=r;if(0===n)return;this._createOrResizeResources(t),this._quad||(this._quad=new e(i,[-1,-1,1,-1,-1,1,1,1]));const o=this._quad;o.bind(),\"blur\"===a?this._gaussianBlur(t,s,n):this._radialBlur(t,s),o.unbind()}_gaussianBlur(e,s,r){const{context:i,state:a,painter:u,pixelRatio:l}=e,{size:d}=a,{materialManager:b}=u,c=this._programDesc,_=this._quad,p=[Math.round(l*d[0]),Math.round(l*d[1])],h=this._blurFBO,m=b.getProgram(c.gaussianBlur,[{name:\"radius\",value:Math.ceil(r)}]);i.useProgram(m),i.setBlendingEnabled(!1),i.bindFramebuffer(h),i.bindTexture(s.colorTexture,4),m.setUniform1i(\"u_colorTexture\",4),m.setUniform2fv(\"u_texSize\",p),m.setUniform2fv(\"u_direction\",n),m.setUniform1f(\"u_sigma\",r),_.draw(),i.bindFramebuffer(s),i.setStencilWriteMask(0),i.setStencilTestEnabled(!1),i.setDepthWriteEnabled(!1),i.setDepthTestEnabled(!1),i.bindTexture(h?.colorTexture,5),m.setUniform1i(\"u_colorTexture\",5),m.setUniform2fv(\"u_direction\",o),_.draw(),i.setBlendingEnabled(!0),i.setBlendFunction(t.ONE,t.ONE_MINUS_SRC_ALPHA),i.setStencilTestEnabled(!0)}_radialBlur(e,s){const{context:r,painter:i}=e,{materialManager:a}=i,n=this._programDesc,o=this._quad,u=this._blurFBO;r.bindFramebuffer(u);const l=a.getProgram(n.radialBlur);r.useProgram(l),r.setBlendingEnabled(!1),r.bindTexture(s.colorTexture,4),l.setUniform1i(\"u_colorTexture\",4),o.draw(),r.bindFramebuffer(s),r.setStencilWriteMask(0),r.setStencilTestEnabled(!1),r.setDepthWriteEnabled(!1),r.setDepthTestEnabled(!1),r.setBlendingEnabled(!0);const d=a.getProgram(n.blit);r.useProgram(d),r.bindTexture(u?.colorTexture,5),d.setUniform1i(\"u_texture\",5),r.setBlendFunction(t.ONE,t.ONE_MINUS_SRC_ALPHA),o.draw()}_createOrResizeResources(e){const{context:t,state:n,pixelRatio:o}=e,{size:u}=n,l=Math.round(o*u[0]),d=Math.round(o*u[1]);if(!this._blurFBO||this._size[0]!==l||this._size[1]!==d)if(this._size[0]=l,this._size[1]=d,this._blurFBO)this._blurFBO.resize(l,d);else{const e=new a(l,d);e.internalFormat=s.RGBA,e.wrapMode=r.CLAMP_TO_EDGE,this._blurFBO=new i(t,e)}}}export{u as Blur};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}