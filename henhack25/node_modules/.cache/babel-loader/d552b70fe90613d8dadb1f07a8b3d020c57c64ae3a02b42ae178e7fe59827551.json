{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { disposeMaybe as t } from \"../../../../core/maybe.js\";\nimport { toRadian as i } from \"../../../../core/libs/gl-matrix-2/math/common.js\";\nimport { fromTranslation as e, scale as r, rotate as s, translate as o } from \"../../../../core/libs/gl-matrix-2/math/mat3.js\";\nimport { create as a } from \"../../../../core/libs/gl-matrix-2/factories/mat3f32.js\";\nimport { fromValues as n } from \"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";\nimport { i as l } from \"../../../../chunks/vec32.js\";\nimport { create as m } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { backbufferStencilVisible as c, backbufferStencilClipped as h } from \"./definitions.js\";\nimport d from \"./VertexStream.js\";\nimport { stencil as _ } from \"./shaders/StencilPrograms.js\";\nimport { CompareFunction as p, StencilOperation as f } from \"../../../webgl/enums.js\";\nimport { createProgram as u } from \"../../../webgl/ProgramTemplate.js\";\nconst g = n(-.5, -.5);\nclass b {\n  constructor() {\n    this._centerNdc = m(), this._pxToNdc = m(), this._worldDimensionsPx = m(), this._mat3 = a(), this._initialized = !1;\n  }\n  dispose() {\n    this._program = t(this._program), this._quad = t(this._quad);\n  }\n  render(t, i, e) {\n    const {\n        context: r\n      } = t,\n      s = this._updateGeometry(t, e);\n    if (null != i) {\n      const {\n        r: t,\n        g: e,\n        b: s,\n        a: o\n      } = i;\n      r.setClearColor(o * t / 255, o * e / 255, o * s / 255, o);\n    } else r.setClearColor(0, 0, 0, 0);\n    if (r.setStencilFunction(p.ALWAYS, 0, 255), r.setStencilWriteMask(255), !s) return r.setClearStencil(c), void r.clear(r.gl.STENCIL_BUFFER_BIT | r.gl.COLOR_BUFFER_BIT);\n    r.setClearStencil(h), r.clear(r.gl.STENCIL_BUFFER_BIT | r.gl.COLOR_BUFFER_BIT), this._initialized || this._initialize(r), r.setDepthWriteEnabled(!1), r.setDepthTestEnabled(!1), r.setColorMask(!1, !1, !1, !1), r.setBlendingEnabled(!1), r.setStencilOp(f.KEEP, f.KEEP, f.REPLACE), r.setStencilFunction(p.ALWAYS, c, 255), r.setStencilTestEnabled(!0), r.useProgram(this._program), this._program.setUniformMatrix3fv(\"u_worldExtent\", this._mat3), this._quad.bind(), this._quad.draw(), this._quad.unbind();\n  }\n  _initialize(t) {\n    if (this._initialized) return;\n    const i = u(t, _);\n    i && (this._program = i, this._quad = new d(t, [0, 0, 1, 0, 0, 1, 1, 1]), this._initialized = !0);\n  }\n  _updateGeometry(t, a) {\n    const {\n        state: n,\n        pixelRatio: m\n      } = t,\n      {\n        size: c,\n        rotation: h\n      } = n,\n      d = Math.round(c[0] * m),\n      _ = Math.round(c[1] * m);\n    if (!n.spatialReference.isWrappable) return !1;\n    const p = i(h),\n      f = Math.abs(Math.cos(p)),\n      u = Math.abs(Math.sin(p)),\n      b = Math.round(d * f + _ * u),\n      x = Math.round(m * n.worldScreenWidth);\n    if (b <= x) return !1;\n    const E = d * u + _ * f,\n      S = (a.left - a.right) * m / d,\n      j = (a.bottom - a.top) * m / _;\n    l(this._worldDimensionsPx, x, E, 1), l(this._pxToNdc, 2 / d, -2 / _, 1), l(this._centerNdc, S, j, 1);\n    const C = this._mat3;\n    return e(C, this._centerNdc), r(C, C, this._pxToNdc), 0 !== h && s(C, C, p), r(C, C, this._worldDimensionsPx), o(C, C, g), !0;\n  }\n}\nexport { b as WorldExtentRenderer };","map":{"version":3,"names":["disposeMaybe","t","toRadian","i","fromTranslation","e","scale","r","rotate","s","translate","o","create","a","fromValues","n","l","m","backbufferStencilVisible","c","backbufferStencilClipped","h","d","stencil","_","CompareFunction","p","StencilOperation","f","createProgram","u","g","b","constructor","_centerNdc","_pxToNdc","_worldDimensionsPx","_mat3","_initialized","dispose","_program","_quad","render","context","_updateGeometry","setClearColor","setStencilFunction","ALWAYS","setStencilWriteMask","setClearStencil","clear","gl","STENCIL_BUFFER_BIT","COLOR_BUFFER_BIT","_initialize","setDepthWriteEnabled","setDepthTestEnabled","setColorMask","setBlendingEnabled","setStencilOp","KEEP","REPLACE","setStencilTestEnabled","useProgram","setUniformMatrix3fv","bind","draw","unbind","state","pixelRatio","size","rotation","Math","round","spatialReference","isWrappable","abs","cos","sin","x","worldScreenWidth","E","S","left","right","j","bottom","top","C","WorldExtentRenderer"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/engine/webgl/WorldExtentClipRenderer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{disposeMaybe as t}from\"../../../../core/maybe.js\";import{toRadian as i}from\"../../../../core/libs/gl-matrix-2/math/common.js\";import{fromTranslation as e,scale as r,rotate as s,translate as o}from\"../../../../core/libs/gl-matrix-2/math/mat3.js\";import{create as a}from\"../../../../core/libs/gl-matrix-2/factories/mat3f32.js\";import{fromValues as n}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{i as l}from\"../../../../chunks/vec32.js\";import{create as m}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{backbufferStencilVisible as c,backbufferStencilClipped as h}from\"./definitions.js\";import d from\"./VertexStream.js\";import{stencil as _}from\"./shaders/StencilPrograms.js\";import{CompareFunction as p,StencilOperation as f}from\"../../../webgl/enums.js\";import{createProgram as u}from\"../../../webgl/ProgramTemplate.js\";const g=n(-.5,-.5);class b{constructor(){this._centerNdc=m(),this._pxToNdc=m(),this._worldDimensionsPx=m(),this._mat3=a(),this._initialized=!1}dispose(){this._program=t(this._program),this._quad=t(this._quad)}render(t,i,e){const{context:r}=t,s=this._updateGeometry(t,e);if(null!=i){const{r:t,g:e,b:s,a:o}=i;r.setClearColor(o*t/255,o*e/255,o*s/255,o)}else r.setClearColor(0,0,0,0);if(r.setStencilFunction(p.ALWAYS,0,255),r.setStencilWriteMask(255),!s)return r.setClearStencil(c),void r.clear(r.gl.STENCIL_BUFFER_BIT|r.gl.COLOR_BUFFER_BIT);r.setClearStencil(h),r.clear(r.gl.STENCIL_BUFFER_BIT|r.gl.COLOR_BUFFER_BIT),this._initialized||this._initialize(r),r.setDepthWriteEnabled(!1),r.setDepthTestEnabled(!1),r.setColorMask(!1,!1,!1,!1),r.setBlendingEnabled(!1),r.setStencilOp(f.KEEP,f.KEEP,f.REPLACE),r.setStencilFunction(p.ALWAYS,c,255),r.setStencilTestEnabled(!0),r.useProgram(this._program),this._program.setUniformMatrix3fv(\"u_worldExtent\",this._mat3),this._quad.bind(),this._quad.draw(),this._quad.unbind()}_initialize(t){if(this._initialized)return;const i=u(t,_);i&&(this._program=i,this._quad=new d(t,[0,0,1,0,0,1,1,1]),this._initialized=!0)}_updateGeometry(t,a){const{state:n,pixelRatio:m}=t,{size:c,rotation:h}=n,d=Math.round(c[0]*m),_=Math.round(c[1]*m);if(!n.spatialReference.isWrappable)return!1;const p=i(h),f=Math.abs(Math.cos(p)),u=Math.abs(Math.sin(p)),b=Math.round(d*f+_*u),x=Math.round(m*n.worldScreenWidth);if(b<=x)return!1;const E=d*u+_*f,S=(a.left-a.right)*m/d,j=(a.bottom-a.top)*m/_;l(this._worldDimensionsPx,x,E,1),l(this._pxToNdc,2/d,-2/_,1),l(this._centerNdc,S,j,1);const C=this._mat3;return e(C,this._centerNdc),r(C,C,this._pxToNdc),0!==h&&s(C,C,p),r(C,C,this._worldDimensionsPx),o(C,C,g),!0}}export{b as WorldExtentRenderer};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}