{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from \"../../../../../../../core/Logger.js\";\nimport { disposeMaybe as r } from \"../../../../../../../core/maybe.js\";\nimport { PixelType as t, TextureWrapMode as a, RenderbufferFormat as i } from \"../../../../../../webgl/enums.js\";\nimport { FramebufferObject as s } from \"../../../../../../webgl/FramebufferObject.js\";\nimport { loadHeatmapTextureConfiguration as u } from \"../../../../../../webgl/heatmapTextureUtils.js\";\nimport { RenderbufferDescriptor as l } from \"../../../../../../webgl/RenderbufferDescriptor.js\";\nimport { Texture as o } from \"../../../../../../webgl/Texture.js\";\nimport { TextureDescriptor as n } from \"../../../../../../webgl/TextureDescriptor.js\";\nconst m = () => e.getLogger(\"esri.views.2d.engine.webgl.shaderGraph.techniques.heatmap.HeatmapResources\");\nclass f {\n  destroy() {\n    this._accumulateFramebuffer = r(this._accumulateFramebuffer), this._resolveGradientTexture = r(this._resolveGradientTexture), this._prevGradientHash = null, this._qualityProfile = null;\n  }\n  get initialized() {\n    return null != this._accumulateFramebuffer && null != this._resolveGradientTexture;\n  }\n  get accumulateFramebuffer() {\n    return this._accumulateFramebuffer;\n  }\n  get resolveGradientTexture() {\n    return this._resolveGradientTexture;\n  }\n  loadQualityProfile(e) {\n    if (null == this._qualityProfile) {\n      const r = u(e, m());\n      this._qualityProfile = {\n        ...r,\n        defines: {\n          usesHalfFloatPrecision: r.dataType !== t.FLOAT\n        }\n      };\n    }\n    return this._qualityProfile;\n  }\n  ensureAccumulateFBO(e, r, t) {\n    if (null == this._accumulateFramebuffer) {\n      const {\n          dataType: u,\n          samplingMode: o,\n          pixelFormat: m,\n          internalFormat: f\n        } = this.loadQualityProfile(e),\n        h = new n(r, t);\n      h.pixelFormat = m, h.internalFormat = f, h.dataType = u, h.samplingMode = o, h.wrapMode = a.CLAMP_TO_EDGE;\n      const c = new l(i.DEPTH_STENCIL, r, t);\n      this._accumulateFramebuffer = new s(e, h, c);\n    } else {\n      const {\n        width: e,\n        height: a\n      } = this._accumulateFramebuffer;\n      e === r && a === t || this._accumulateFramebuffer.resize(r, t);\n    }\n    return this._accumulateFramebuffer;\n  }\n  ensureResolveGradientTexture(e, r, t) {\n    if (null == this._resolveGradientTexture) {\n      const r = new n();\n      r.wrapMode = a.CLAMP_TO_EDGE, this._resolveGradientTexture = new o(e, r), this._prevGradientHash = null;\n    }\n    return this._prevGradientHash !== r && (this._resolveGradientTexture.resize(t.length / 4, 1), this._resolveGradientTexture.setData(t), this._prevGradientHash = r), this._resolveGradientTexture;\n  }\n}\nexport { f as HeatmapResources };","map":{"version":3,"names":["e","disposeMaybe","r","PixelType","t","TextureWrapMode","a","RenderbufferFormat","i","FramebufferObject","s","loadHeatmapTextureConfiguration","u","RenderbufferDescriptor","l","Texture","o","TextureDescriptor","n","m","getLogger","f","destroy","_accumulateFramebuffer","_resolveGradientTexture","_prevGradientHash","_qualityProfile","initialized","accumulateFramebuffer","resolveGradientTexture","loadQualityProfile","defines","usesHalfFloatPrecision","dataType","FLOAT","ensureAccumulateFBO","samplingMode","pixelFormat","internalFormat","h","wrapMode","CLAMP_TO_EDGE","c","DEPTH_STENCIL","width","height","resize","ensureResolveGradientTexture","length","setData","HeatmapResources"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/heatmap/HeatmapResources.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../../../core/Logger.js\";import{disposeMaybe as r}from\"../../../../../../../core/maybe.js\";import{PixelType as t,TextureWrapMode as a,RenderbufferFormat as i}from\"../../../../../../webgl/enums.js\";import{FramebufferObject as s}from\"../../../../../../webgl/FramebufferObject.js\";import{loadHeatmapTextureConfiguration as u}from\"../../../../../../webgl/heatmapTextureUtils.js\";import{RenderbufferDescriptor as l}from\"../../../../../../webgl/RenderbufferDescriptor.js\";import{Texture as o}from\"../../../../../../webgl/Texture.js\";import{TextureDescriptor as n}from\"../../../../../../webgl/TextureDescriptor.js\";const m=()=>e.getLogger(\"esri.views.2d.engine.webgl.shaderGraph.techniques.heatmap.HeatmapResources\");class f{destroy(){this._accumulateFramebuffer=r(this._accumulateFramebuffer),this._resolveGradientTexture=r(this._resolveGradientTexture),this._prevGradientHash=null,this._qualityProfile=null}get initialized(){return null!=this._accumulateFramebuffer&&null!=this._resolveGradientTexture}get accumulateFramebuffer(){return this._accumulateFramebuffer}get resolveGradientTexture(){return this._resolveGradientTexture}loadQualityProfile(e){if(null==this._qualityProfile){const r=u(e,m());this._qualityProfile={...r,defines:{usesHalfFloatPrecision:r.dataType!==t.FLOAT}}}return this._qualityProfile}ensureAccumulateFBO(e,r,t){if(null==this._accumulateFramebuffer){const{dataType:u,samplingMode:o,pixelFormat:m,internalFormat:f}=this.loadQualityProfile(e),h=new n(r,t);h.pixelFormat=m,h.internalFormat=f,h.dataType=u,h.samplingMode=o,h.wrapMode=a.CLAMP_TO_EDGE;const c=new l(i.DEPTH_STENCIL,r,t);this._accumulateFramebuffer=new s(e,h,c)}else{const{width:e,height:a}=this._accumulateFramebuffer;e===r&&a===t||this._accumulateFramebuffer.resize(r,t)}return this._accumulateFramebuffer}ensureResolveGradientTexture(e,r,t){if(null==this._resolveGradientTexture){const r=new n;r.wrapMode=a.CLAMP_TO_EDGE,this._resolveGradientTexture=new o(e,r),this._prevGradientHash=null}return this._prevGradientHash!==r&&(this._resolveGradientTexture.resize(t.length/4,1),this._resolveGradientTexture.setData(t),this._prevGradientHash=r),this._resolveGradientTexture}}export{f as HeatmapResources};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,OAAOA,CAAC,MAAK,qCAAqC;AAAC,SAAOC,YAAY,IAAIC,CAAC,QAAK,oCAAoC;AAAC,SAAOC,SAAS,IAAIC,CAAC,EAACC,eAAe,IAAIC,CAAC,EAACC,kBAAkB,IAAIC,CAAC,QAAK,kCAAkC;AAAC,SAAOC,iBAAiB,IAAIC,CAAC,QAAK,8CAA8C;AAAC,SAAOC,+BAA+B,IAAIC,CAAC,QAAK,gDAAgD;AAAC,SAAOC,sBAAsB,IAAIC,CAAC,QAAK,mDAAmD;AAAC,SAAOC,OAAO,IAAIC,CAAC,QAAK,oCAAoC;AAAC,SAAOC,iBAAiB,IAAIC,CAAC,QAAK,8CAA8C;AAAC,MAAMC,CAAC,GAACA,CAAA,KAAInB,CAAC,CAACoB,SAAS,CAAC,4EAA4E,CAAC;AAAC,MAAMC,CAAC;EAACC,OAAOA,CAAA,EAAE;IAAC,IAAI,CAACC,sBAAsB,GAACrB,CAAC,CAAC,IAAI,CAACqB,sBAAsB,CAAC,EAAC,IAAI,CAACC,uBAAuB,GAACtB,CAAC,CAAC,IAAI,CAACsB,uBAAuB,CAAC,EAAC,IAAI,CAACC,iBAAiB,GAAC,IAAI,EAAC,IAAI,CAACC,eAAe,GAAC,IAAI;EAAA;EAAC,IAAIC,WAAWA,CAAA,EAAE;IAAC,OAAO,IAAI,IAAE,IAAI,CAACJ,sBAAsB,IAAE,IAAI,IAAE,IAAI,CAACC,uBAAuB;EAAA;EAAC,IAAII,qBAAqBA,CAAA,EAAE;IAAC,OAAO,IAAI,CAACL,sBAAsB;EAAA;EAAC,IAAIM,sBAAsBA,CAAA,EAAE;IAAC,OAAO,IAAI,CAACL,uBAAuB;EAAA;EAACM,kBAAkBA,CAAC9B,CAAC,EAAC;IAAC,IAAG,IAAI,IAAE,IAAI,CAAC0B,eAAe,EAAC;MAAC,MAAMxB,CAAC,GAACU,CAAC,CAACZ,CAAC,EAACmB,CAAC,CAAC,CAAC,CAAC;MAAC,IAAI,CAACO,eAAe,GAAC;QAAC,GAAGxB,CAAC;QAAC6B,OAAO,EAAC;UAACC,sBAAsB,EAAC9B,CAAC,CAAC+B,QAAQ,KAAG7B,CAAC,CAAC8B;QAAK;MAAC,CAAC;IAAA;IAAC,OAAO,IAAI,CAACR,eAAe;EAAA;EAACS,mBAAmBA,CAACnC,CAAC,EAACE,CAAC,EAACE,CAAC,EAAC;IAAC,IAAG,IAAI,IAAE,IAAI,CAACmB,sBAAsB,EAAC;MAAC,MAAK;UAACU,QAAQ,EAACrB,CAAC;UAACwB,YAAY,EAACpB,CAAC;UAACqB,WAAW,EAAClB,CAAC;UAACmB,cAAc,EAACjB;QAAC,CAAC,GAAC,IAAI,CAACS,kBAAkB,CAAC9B,CAAC,CAAC;QAACuC,CAAC,GAAC,IAAIrB,CAAC,CAAChB,CAAC,EAACE,CAAC,CAAC;MAACmC,CAAC,CAACF,WAAW,GAAClB,CAAC,EAACoB,CAAC,CAACD,cAAc,GAACjB,CAAC,EAACkB,CAAC,CAACN,QAAQ,GAACrB,CAAC,EAAC2B,CAAC,CAACH,YAAY,GAACpB,CAAC,EAACuB,CAAC,CAACC,QAAQ,GAAClC,CAAC,CAACmC,aAAa;MAAC,MAAMC,CAAC,GAAC,IAAI5B,CAAC,CAACN,CAAC,CAACmC,aAAa,EAACzC,CAAC,EAACE,CAAC,CAAC;MAAC,IAAI,CAACmB,sBAAsB,GAAC,IAAIb,CAAC,CAACV,CAAC,EAACuC,CAAC,EAACG,CAAC,CAAC;IAAA,CAAC,MAAI;MAAC,MAAK;QAACE,KAAK,EAAC5C,CAAC;QAAC6C,MAAM,EAACvC;MAAC,CAAC,GAAC,IAAI,CAACiB,sBAAsB;MAACvB,CAAC,KAAGE,CAAC,IAAEI,CAAC,KAAGF,CAAC,IAAE,IAAI,CAACmB,sBAAsB,CAACuB,MAAM,CAAC5C,CAAC,EAACE,CAAC,CAAC;IAAA;IAAC,OAAO,IAAI,CAACmB,sBAAsB;EAAA;EAACwB,4BAA4BA,CAAC/C,CAAC,EAACE,CAAC,EAACE,CAAC,EAAC;IAAC,IAAG,IAAI,IAAE,IAAI,CAACoB,uBAAuB,EAAC;MAAC,MAAMtB,CAAC,GAAC,IAAIgB,CAAC,CAAD,CAAC;MAAChB,CAAC,CAACsC,QAAQ,GAAClC,CAAC,CAACmC,aAAa,EAAC,IAAI,CAACjB,uBAAuB,GAAC,IAAIR,CAAC,CAAChB,CAAC,EAACE,CAAC,CAAC,EAAC,IAAI,CAACuB,iBAAiB,GAAC,IAAI;IAAA;IAAC,OAAO,IAAI,CAACA,iBAAiB,KAAGvB,CAAC,KAAG,IAAI,CAACsB,uBAAuB,CAACsB,MAAM,CAAC1C,CAAC,CAAC4C,MAAM,GAAC,CAAC,EAAC,CAAC,CAAC,EAAC,IAAI,CAACxB,uBAAuB,CAACyB,OAAO,CAAC7C,CAAC,CAAC,EAAC,IAAI,CAACqB,iBAAiB,GAACvB,CAAC,CAAC,EAAC,IAAI,CAACsB,uBAAuB;EAAA;AAAC;AAAC,SAAOH,CAAC,IAAI6B,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}