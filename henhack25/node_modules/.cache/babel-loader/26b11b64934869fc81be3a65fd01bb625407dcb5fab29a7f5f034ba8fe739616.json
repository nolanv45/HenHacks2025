{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport t from \"../../../../../core/Handles.js\";\nimport { c as i } from \"../../../../../chunks/vec32.js\";\nimport { create as r } from \"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { Manipulation as e, ManipulatorType as a } from \"./Manipulation.js\";\nimport { onGrabChangedHandle as o } from \"./utils.js\";\nimport { getRotationAngle as n } from \"../../../../draw/support/drawUtils.js\";\nimport { createManipulatorDragEventPipeline as s, screenToMap as l } from \"../../../../interactive/dragEventPipeline.js\";\nimport { GraphicManipulator as p } from \"../../../../interactive/GraphicManipulator.js\";\nimport { AccumulationBehavior as h } from \"../../../../interactive/editGeometry/interfaces.js\";\nimport { AccumulationType as c } from \"../../../../interactive/editGeometry/operations/UpdateVertices.js\";\nimport { apply as m } from \"../../../../interactive/editGeometry/support/editPlaneUtils.js\";\nclass u extends e {\n  constructor(i) {\n    super(), this._handles = new t(), this._originCache = r(), this._view = i.view, this._tool = i.tool, this._graphic = i.graphic, this._snapRotation = i.snapRotation, this._manipulator = this._createManipulator(), this._handles.add([this._manipulator.events.on(\"grab-changed\", t => o(t, this._manipulator))]), this.forEachManipulator(t => this._tool.manipulators.add(t));\n  }\n  destroy() {\n    this._handles.destroy(), this.forEachManipulator(t => {\n      this._tool.manipulators.remove(t), t.destroy();\n    }), this._tool = null, this._view = null, this._manipulator = null, this._snapRotation = null, this._graphic = null, this._handles = null, this._originCache = null;\n  }\n  forEachManipulator(t) {\n    t(this._manipulator, a.ROTATE);\n  }\n  createDragPipeline(t, r) {\n    let e = null,\n      a = null;\n    return s(this._manipulator, (o, s) => {\n      s.next(i => {\n        if (\"start\" === i.action) {\n          o.cursor = \"grabbing\";\n          const i = t();\n          e = i.plane, a = i.editGeometryOperations;\n        }\n        return i;\n      }).next(l(this._view)).next(t => ({\n        ...t,\n        rotateAngle: n(t.mapStart, t.mapEnd, {\n          x: e.origin[0],\n          y: e.origin[1]\n        }, !0)\n      })).next(this._snapRotation.createDragEventPipelineStep(), this._snapRotation.next).next(t => {\n        const o = i(this._originCache, e.origin),\n          n = \"start\" === t.action ? h.NEW_STEP : h.ACCUMULATE_STEPS,\n          s = a.rotate(o, t.rotateAngle, n, c.REPLACE);\n        return m(s, e), r(t, s), t;\n      }).next(t => (\"end\" === t.action && (o.cursor = \"grab\"), t));\n    });\n  }\n  _createManipulator() {\n    const t = this._view,\n      i = this._graphic;\n    return new p({\n      view: t,\n      graphic: i,\n      selectable: !0,\n      cursor: \"grab\"\n    });\n  }\n}\nexport { u as RotateManipulation };","map":{"version":3,"names":["t","c","i","create","r","Manipulation","e","ManipulatorType","a","onGrabChangedHandle","o","getRotationAngle","n","createManipulatorDragEventPipeline","s","screenToMap","l","GraphicManipulator","p","AccumulationBehavior","h","AccumulationType","apply","m","u","constructor","_handles","_originCache","_view","view","_tool","tool","_graphic","graphic","_snapRotation","snapRotation","_manipulator","_createManipulator","add","events","on","forEachManipulator","manipulators","destroy","remove","ROTATE","createDragPipeline","next","action","cursor","plane","editGeometryOperations","rotateAngle","mapStart","mapEnd","x","origin","y","createDragEventPipelineStep","NEW_STEP","ACCUMULATE_STEPS","rotate","REPLACE","selectable","RotateManipulation"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/interactive/editingTools/manipulations/RotateManipulation.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport t from\"../../../../../core/Handles.js\";import{c as i}from\"../../../../../chunks/vec32.js\";import{create as r}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{Manipulation as e,ManipulatorType as a}from\"./Manipulation.js\";import{onGrabChangedHandle as o}from\"./utils.js\";import{getRotationAngle as n}from\"../../../../draw/support/drawUtils.js\";import{createManipulatorDragEventPipeline as s,screenToMap as l}from\"../../../../interactive/dragEventPipeline.js\";import{GraphicManipulator as p}from\"../../../../interactive/GraphicManipulator.js\";import{AccumulationBehavior as h}from\"../../../../interactive/editGeometry/interfaces.js\";import{AccumulationType as c}from\"../../../../interactive/editGeometry/operations/UpdateVertices.js\";import{apply as m}from\"../../../../interactive/editGeometry/support/editPlaneUtils.js\";class u extends e{constructor(i){super(),this._handles=new t,this._originCache=r(),this._view=i.view,this._tool=i.tool,this._graphic=i.graphic,this._snapRotation=i.snapRotation,this._manipulator=this._createManipulator(),this._handles.add([this._manipulator.events.on(\"grab-changed\",(t=>o(t,this._manipulator)))]),this.forEachManipulator((t=>this._tool.manipulators.add(t)))}destroy(){this._handles.destroy(),this.forEachManipulator((t=>{this._tool.manipulators.remove(t),t.destroy()})),this._tool=null,this._view=null,this._manipulator=null,this._snapRotation=null,this._graphic=null,this._handles=null,this._originCache=null}forEachManipulator(t){t(this._manipulator,a.ROTATE)}createDragPipeline(t,r){let e=null,a=null;return s(this._manipulator,((o,s)=>{s.next((i=>{if(\"start\"===i.action){o.cursor=\"grabbing\";const i=t();e=i.plane,a=i.editGeometryOperations}return i})).next(l(this._view)).next((t=>({...t,rotateAngle:n(t.mapStart,t.mapEnd,{x:e.origin[0],y:e.origin[1]},!0)}))).next(this._snapRotation.createDragEventPipelineStep(),this._snapRotation.next).next((t=>{const o=i(this._originCache,e.origin),n=\"start\"===t.action?h.NEW_STEP:h.ACCUMULATE_STEPS,s=a.rotate(o,t.rotateAngle,n,c.REPLACE);return m(s,e),r(t,s),t})).next((t=>(\"end\"===t.action&&(o.cursor=\"grab\"),t)))}))}_createManipulator(){const t=this._view,i=this._graphic;return new p({view:t,graphic:i,selectable:!0,cursor:\"grab\"})}}export{u as RotateManipulation};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}