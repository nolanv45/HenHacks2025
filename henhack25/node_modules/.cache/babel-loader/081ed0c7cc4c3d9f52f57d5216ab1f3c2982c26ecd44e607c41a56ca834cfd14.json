{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport { clone as t } from \"../../../core/lang.js\";\nimport i from \"../../../core/Logger.js\";\nimport { destroyMaybe as s } from \"../../../core/maybe.js\";\nimport { isAbortError as r } from \"../../../core/promiseUtils.js\";\nimport { property as a } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/has.js\";\nimport { subclass as l } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { diff as n, hasDiff as o } from \"../../../core/accessorSupport/diffUtils.js\";\nimport h from \"../../../geometry/Point.js\";\nimport { create as u } from \"../../../geometry/support/aaBoundingRect.js\";\nimport { equals as y } from \"../../../geometry/support/spatialReferenceUtils.js\";\nimport { StyleUpdateType as c } from \"../engine/vectorTiles/enums.js\";\nimport { TileHandler as d } from \"../engine/vectorTiles/TileHandler.js\";\nimport { TileManager as _ } from \"../engine/vectorTiles/TileManager.js\";\nimport { VectorTile as p } from \"../engine/vectorTiles/VectorTile.js\";\nimport { VectorTileContainer as f } from \"../engine/vectorTiles/VectorTileContainer.js\";\nimport g from \"../engine/vectorTiles/VectorTileFeatureIndex.js\";\nimport { StyleLayerType as m } from \"../engine/vectorTiles/style/StyleDefinition.js\";\nimport T from \"../engine/vectorTiles/style/StyleRepository.js\";\nimport { LayerView2DMixin as C } from \"./LayerView2D.js\";\nimport R from \"../tiling/TileInfoViewPOT.js\";\nimport v from \"../tiling/TileQueue.js\";\nimport H from \"../../layers/LayerView.js\";\nimport w from \"../../layers/RefreshableLayerView.js\";\nimport { TaskPriority as I } from \"../../support/Scheduler.js\";\nconst S = 2,\n  D = 8,\n  P = 512;\nlet Q = class extends w(C(H)) {\n  constructor() {\n    super(...arguments), this._styleChanges = [], this._fetchQueue = null, this._parseQueue = null, this._tileHandlerPromise = null, this._isTileHandlerReady = !1, this._styeChanged = !1, this._spriteSourceChanged = !1;\n  }\n  get fading() {\n    return this._vectorTileContainer?.fading ?? !1;\n  }\n  get hasVisibleFeatures() {\n    const e = this._vectorTileContainer.children;\n    for (const t of e) if (t.hasFeatures()) return !0;\n    return !1;\n  }\n  get spriteSourceChanged() {\n    return this._spriteSourceChanged;\n  }\n  get styleChanged() {\n    return this._styeChanged;\n  }\n  async hitTest(e, t) {\n    const i = this._tileHandlerPromise,\n      s = this._vectorTileContainer?.symbolFader;\n    if (!i || !this._isTileHandlerReady || !s) return;\n    await i;\n    let r = null;\n    const a = this._vectorTileContainer?.symbolRepository;\n    a && (r = a.querySymbols(t, S, s.decluttererOffset, {}));\n    const l = this.view.state,\n      n = this._tileManager.getIntersectingTiles(t.x, t.y, S, l, r);\n    if ((!n || 0 === n.length) && 0 === r?.length) return null;\n    e = e.clone().normalize();\n    const o = [],\n      h = [];\n    for (const u of n) o.push(this._queryTile(h, e, S, this.view.state.rotation, u, r?.filter(e => e.tileKey.id === u.id)));\n    return await Promise.all(o), h;\n  }\n  update(e) {\n    if (this._tileHandlerPromise && this._isTileHandlerReady) return e.pixelRatio !== this._tileHandler.devicePixelRatio ? (this._start(), void (this._tileHandler.devicePixelRatio = e.pixelRatio)) : void (this._styleChanges.length > 0 ? this._tileHandlerPromise = this._applyStyleChanges() : (this._pauseQueues(), this._fetchQueue.state = e.state, this._parseQueue.state = e.state, this._tileManager.update(e) || this.requestUpdate(), this._resumeQueues()));\n  }\n  attach() {\n    const {\n      style: e\n    } = this.layer.currentStyleInfo;\n    this._styleRepository = new T(e), this._tileInfoView = new R(this.layer.tileInfo, this.layer.fullExtent), this._vectorTileContainer = new f(this._tileInfoView), this._tileHandler = new d(this.layer, this._styleRepository, window.devicePixelRatio || 1, this.layer.tileInfo.lods.length - 1), this.container.addChild(this._vectorTileContainer), this._start(), this.addAttachHandles([this.layer.on(\"paint-change\", e => {\n      if (this._styeChanged = !0, e.isDataDriven) this._styleChanges.push({\n        type: c.PAINTER_CHANGED,\n        data: e\n      }), this.requestUpdate();else {\n        const t = this._styleRepository,\n          i = t.getLayerById(e.layer);\n        if (!i) return;\n        const s = i.type === m.SYMBOL;\n        t.setPaintProperties(e.layer, e.paint), s && this._vectorTileContainer?.restartDeclutter(), this._vectorTileContainer?.requestRender();\n      }\n    }), this.layer.on(\"layout-change\", e => {\n      const t = this._styleRepository,\n        i = t.getLayerById(e.layer);\n      if (!i) return;\n      this._styeChanged = !0;\n      const s = n(i.layout, e.layout);\n      if (null != s) {\n        if (o(s, \"visibility\") && 1 === E(s)) return t.setLayoutProperties(e.layer, e.layout), i.type === m.SYMBOL && this._vectorTileContainer?.restartDeclutter(), void this._vectorTileContainer?.requestRender();\n        this._styleChanges.push({\n          type: c.LAYOUT_CHANGED,\n          data: e\n        }), this.requestUpdate();\n      }\n    }), this.layer.on(\"style-layer-visibility-change\", e => {\n      const t = this._styleRepository,\n        i = t.getLayerById(e.layer);\n      i && (this._styeChanged = !0, t.setStyleLayerVisibility(e.layer, e.visibility), i.type === m.SYMBOL && this._vectorTileContainer?.restartDeclutter(), this._vectorTileContainer?.requestRender());\n    }), this.layer.on(\"style-layer-change\", e => {\n      this._styleChanges.push({\n        type: c.LAYER_CHANGED,\n        data: e\n      }), this._styeChanged = !0, this.requestUpdate();\n    }), this.layer.on(\"delete-style-layer\", e => {\n      this._styleChanges.push({\n        type: c.LAYER_REMOVED,\n        data: e\n      }), this._styeChanged = !0, this.requestUpdate();\n    }), this.layer.on(\"load-style\", () => this._loadStyle()), this.layer.on(\"spriteSource-change\", e => {\n      this._spriteSourceChanged = !0, this._styleChanges.push({\n        type: c.SPRITES_CHANGED,\n        data: e\n      });\n      const t = this._styleRepository.layers;\n      for (const i of t) switch (i.type) {\n        case m.SYMBOL:\n          i.getLayoutProperty(\"icon-image\") && this._styleChanges.push({\n            type: c.LAYOUT_CHANGED,\n            data: {\n              layer: i.id,\n              layout: i.layout\n            }\n          });\n          break;\n        case m.LINE:\n          i.getPaintProperty(\"line-pattern\") && this._styleChanges.push({\n            type: c.PAINTER_CHANGED,\n            data: {\n              layer: i.id,\n              paint: i.paint,\n              isDataDriven: i.isPainterDataDriven()\n            }\n          });\n          break;\n        case m.FILL:\n          i.getLayoutProperty(\"fill-pattern\") && this._styleChanges.push({\n            type: c.PAINTER_CHANGED,\n            data: {\n              layer: i.id,\n              paint: i.paint,\n              isDataDriven: i.isPainterDataDriven()\n            }\n          });\n      }\n      this.requestUpdate();\n    })]);\n  }\n  detach() {\n    this._stop(), this.container.removeAllChildren(), this._vectorTileContainer = s(this._vectorTileContainer), this._tileHandler = s(this._tileHandler);\n  }\n  viewChange() {\n    this.requestUpdate();\n  }\n  moveEnd() {\n    this.requestUpdate();\n  }\n  supportsSpatialReference(e) {\n    return y(this.layer.tileInfo?.spatialReference, e);\n  }\n  canResume() {\n    let e = super.canResume();\n    const {\n      currentStyleInfo: t\n    } = this.layer;\n    if (e && t?.layerDefinition) {\n      const i = this.view.scale,\n        {\n          minScale: s,\n          maxScale: r\n        } = t.layerDefinition;\n      t?.layerDefinition && (s && s < i && (e = !1), r && r > i && (e = !1));\n    }\n    return e;\n  }\n  isUpdating() {\n    return this.fading;\n  }\n  acquireTile(e) {\n    const t = this._createVectorTile(e);\n    return this._updatingHandles.addPromise(this._fetchQueue.push(t.key).then(e => this._parseQueue.push({\n      key: t.key,\n      data: e\n    })).then(e => {\n      t.once(\"attach\", () => this.requestUpdate()), t.setData(e), this.requestUpdate();\n    }).catch(e => {\n      r(e) || i.getLogger(this).error(e);\n    })), t;\n  }\n  releaseTile(e) {\n    const t = e.key.id;\n    this._fetchQueue.abort(t), this._parseQueue.abort(t), this.requestUpdate();\n  }\n  async doRefresh() {\n    if (!this.attached) return;\n    if (this.suspended) return this._tileManager.clear(), void this.requestUpdate();\n    this._isTileHandlerReady = !1, this._pauseQueues(), this._clearQueues(), this._tileManager.clearCache(), this._resumeQueues();\n    const e = this._vectorTileContainer.children,\n      t = [];\n    try {\n      for (const i of e) {\n        const e = this._updatingHandles.addPromise(this._fetchQueue.push(i.key).then(e => this._parseQueue.push({\n          key: i.key,\n          data: e\n        })).then(e => i.setData(e)).finally(() => i.featureIndex = null));\n        t.push(e);\n      }\n      await Promise.all(t);\n    } catch (s) {\n      i.getLogger(this).error(\"error refreshing vector-tiles layer-view\", s), this._resumeQueues(), this._isTileHandlerReady = !0;\n    }\n    this._isTileHandlerReady = !0, this.requestUpdate();\n  }\n  _start() {\n    if (this._stop(), this._tileManager = new _({\n      acquireTile: e => this.acquireTile(e),\n      releaseTile: e => this.releaseTile(e),\n      tileInfoView: this._tileInfoView\n    }, this._vectorTileContainer), !this.layer.currentStyleInfo) return;\n    const e = new AbortController(),\n      t = this._tileHandler.start({\n        signal: e.signal\n      }).then(() => {\n        this._fetchQueue = new v({\n          tileInfoView: this._tileInfoView,\n          process: (e, t) => this._getTileData(e, t),\n          concurrency: 15,\n          scheduler: this.scheduler,\n          priority: I.MAPVIEW_FETCH_QUEUE\n        }), this._parseQueue = new v({\n          tileInfoView: this._tileInfoView,\n          process: (e, t) => this._parseTileData(e, t),\n          concurrency: 8,\n          scheduler: this.scheduler,\n          priority: I.MAPVIEW_VECTOR_TILE_PARSING_QUEUE\n        }), this.requestUpdate(), this._isTileHandlerReady = !0;\n      });\n    this._tileHandler.spriteMosaic.then(e => {\n      this._vectorTileContainer.setStyleResources(e, this._tileHandler.glyphMosaic, this._styleRepository, this._tileInfoView), this.requestUpdate();\n    }), this._tileHandlerAbortController = e, this._tileHandlerPromise = t;\n  }\n  _stop() {\n    if (!this._tileHandlerAbortController || !this._vectorTileContainer) return;\n    const e = this._tileHandlerAbortController;\n    e && e.abort(), this._tileHandlerPromise = null, this._isTileHandlerReady = !1, this._fetchQueue = s(this._fetchQueue), this._parseQueue = s(this._parseQueue), this._tileManager = s(this._tileManager), this._vectorTileContainer.removeAllChildren();\n  }\n  async _getTileData(e, t) {\n    return this._tileHandler.fetchTileData(e, t);\n  }\n  async _parseTileData(e, t) {\n    return this._tileHandler.parseTileData(e, t);\n  }\n  async _applyStyleChanges() {\n    this._isTileHandlerReady = !1, this._pauseQueues(), this._clearQueues(), this._tileManager.clearCache();\n    const e = this._styleChanges;\n    try {\n      await this._tileHandler.updateStyle(e);\n    } catch (l) {\n      i.getLogger(this).error(\"error applying vector-tiles style update\", l.message), this._resumeQueues(), this._isTileHandlerReady = !0;\n    }\n    const t = this._styleRepository,\n      s = new Set();\n    e.forEach(e => {\n      if (e.type !== c.LAYER_REMOVED) return;\n      const i = e.data,\n        r = t.getLayerById(i.layer);\n      r && s.add(r.uid);\n    });\n    const r = new Set();\n    e.forEach(e => {\n      let i;\n      switch (e.type) {\n        case c.PAINTER_CHANGED:\n          t.setPaintProperties(e.data.layer, e.data.paint), i = e.data.layer;\n          break;\n        case c.LAYOUT_CHANGED:\n          t.setLayoutProperties(e.data.layer, e.data.layout), i = e.data.layer;\n          break;\n        case c.LAYER_REMOVED:\n          return void t.deleteStyleLayer(e.data.layer);\n        case c.LAYER_CHANGED:\n          t.setStyleLayer(e.data.layer, e.data.index), i = e.data.layer.id;\n          break;\n        case c.SPRITES_CHANGED:\n          this._vectorTileContainer.setSpriteMosaic(this._tileHandler.setSpriteSource(e.data.spriteSource));\n      }\n      if (i) {\n        const e = t.getLayerById(i);\n        e && r.add(e.uid);\n      }\n    });\n    const a = this._vectorTileContainer.children;\n    if (s.size > 0) {\n      const e = Array.from(s);\n      this._vectorTileContainer.deleteStyleLayers(e);\n      for (const t of a) t.deleteLayerData(e);\n    }\n    if (this._resumeQueues(), r.size > 0) {\n      const e = Array.from(r),\n        t = [];\n      for (const i of a) {\n        const s = this._updatingHandles.addPromise(this._fetchQueue.push(i.key).then(t => this._parseQueue.push({\n          key: i.key,\n          data: t,\n          styleLayerUIDs: e\n        })).then(e => i.setData(e)).finally(() => i.featureIndex = null));\n        t.push(s);\n      }\n      await Promise.all(t);\n    }\n    this._styleChanges = [], this._isTileHandlerReady = !0, this.requestUpdate();\n  }\n  async _loadStyle() {\n    const {\n        style: e\n      } = this.layer.currentStyleInfo,\n      i = t(e);\n    this._isTileHandlerReady = !1, this._pauseQueues(), this._clearQueues(), this._styleRepository = new T(i), this._vectorTileContainer.destroy(), this._tileManager.clear(), this._tileHandlerAbortController.abort(), this._tileHandlerAbortController = new AbortController();\n    const {\n      signal: s\n    } = this._tileHandlerAbortController;\n    try {\n      this._tileHandlerPromise = this._tileHandler.setStyle(this._styleRepository, i, this.layer.tileInfo.lods.length - 1), await this._tileHandlerPromise;\n    } catch (n) {\n      if (!r(n)) throw n;\n    }\n    if (s.aborted) return this._resumeQueues(), this._isTileHandlerReady = !0, this._styeChanged = !1, this._spriteSourceChanged = !1, void this.requestUpdate();\n    const a = await this._tileHandler.spriteMosaic,\n      l = this._vectorTileContainer;\n    this._tileInfoView = new R(this.layer.tileInfo, this.layer.fullExtent), l.setStyleResources(a, this._tileHandler.glyphMosaic, this._styleRepository, this._tileInfoView), this._tileManager = new _({\n      acquireTile: e => this.acquireTile(e),\n      releaseTile: e => this.releaseTile(e),\n      tileInfoView: this._tileInfoView\n    }, this._vectorTileContainer), this._resumeQueues(), this._isTileHandlerReady = !0, this.requestUpdate(), this._styeChanged = !1, this._spriteSourceChanged = !1;\n  }\n  _createVectorTile(e) {\n    const t = this._tileInfoView.getTileBounds(u(), e),\n      i = this._tileInfoView.getTileResolution(e.level);\n    return new p(e, i, t[0], t[3], 512, 512, this._styleRepository);\n  }\n  async _queryTile(e, t, i, s, r, a) {\n    if (0 === r.layerData.size) return;\n    const l = this._ensureTileIndex(r),\n      n = this._tileInfoView.getTileBounds(u(), r.key, !0),\n      o = D * P * ((t.x - n[0]) / (n[2] - n[0])),\n      h = D * P * (1 - (t.y - n[1]) / (n[3] - n[1])),\n      y = await l.queryAttributes(o, h, i, s, a);\n    for (const u of y) u.graphic.geometry = this._tileToMapPoint(u.tilePoint, r.transforms.tileUnitsToPixels), e.push({\n      type: \"graphic\",\n      layer: this.layer,\n      graphic: u.graphic,\n      mapPoint: t.clone()\n    });\n    e.sort((e, t) => t.graphic.origin.layerIndex - e.graphic.origin.layerIndex);\n  }\n  _tileToMapPoint(e, t) {\n    if (!e) return null;\n    const i = e[0] * t[0] + e[1] * t[3] + t[6],\n      s = e[0] * t[1] + e[1] * t[4] + t[7],\n      r = this.view.state,\n      a = [0, 0];\n    return r.toMap(a, [i, s]), new h({\n      x: a[0],\n      y: a[1],\n      spatialReference: r.spatialReference\n    });\n  }\n  _ensureTileIndex(e) {\n    let t = e.featureIndex;\n    return t || (t = g.create(e.key, e.layerData, this._styleRepository, this._tileHandler, this.layer), e.featureIndex = t), t;\n  }\n  _pauseQueues() {\n    this._fetchQueue.pause(), this._parseQueue.pause();\n  }\n  _resumeQueues() {\n    this._fetchQueue.resume(), this._parseQueue.resume();\n  }\n  _clearQueues() {\n    this._fetchQueue.clear(), this._parseQueue.clear();\n  }\n};\nfunction E(e) {\n  if (null == e) return 0;\n  switch (e.type) {\n    case \"partial\":\n      return Object.keys(e.diff).length;\n    case \"complete\":\n      return Math.max(Object.keys(e.oldValue).length, Object.keys(e.newValue).length);\n    case \"collection\":\n      return Object.keys(e.added).length + Object.keys(e.changed).length + Object.keys(e.removed).length;\n  }\n}\ne([a()], Q.prototype, \"_isTileHandlerReady\", void 0), Q = e([l(\"esri.views.2d.layers.VectorTileLayerView2D\")], Q);\nconst A = Q;\nexport { A as default };","map":{"version":3,"names":["_","e","clone","t","i","destroyMaybe","s","isAbortError","r","property","a","subclass","l","diff","n","hasDiff","o","h","create","u","equals","y","StyleUpdateType","c","TileHandler","d","TileManager","VectorTile","p","VectorTileContainer","f","g","StyleLayerType","m","T","LayerView2DMixin","C","R","v","H","w","TaskPriority","I","S","D","P","Q","constructor","arguments","_styleChanges","_fetchQueue","_parseQueue","_tileHandlerPromise","_isTileHandlerReady","_styeChanged","_spriteSourceChanged","fading","_vectorTileContainer","hasVisibleFeatures","children","hasFeatures","spriteSourceChanged","styleChanged","hitTest","symbolFader","symbolRepository","querySymbols","decluttererOffset","view","state","_tileManager","getIntersectingTiles","x","length","normalize","push","_queryTile","rotation","filter","tileKey","id","Promise","all","update","pixelRatio","_tileHandler","devicePixelRatio","_start","_applyStyleChanges","_pauseQueues","requestUpdate","_resumeQueues","attach","style","layer","currentStyleInfo","_styleRepository","_tileInfoView","tileInfo","fullExtent","window","lods","container","addChild","addAttachHandles","on","isDataDriven","type","PAINTER_CHANGED","data","getLayerById","SYMBOL","setPaintProperties","paint","restartDeclutter","requestRender","layout","E","setLayoutProperties","LAYOUT_CHANGED","setStyleLayerVisibility","visibility","LAYER_CHANGED","LAYER_REMOVED","_loadStyle","SPRITES_CHANGED","layers","getLayoutProperty","LINE","getPaintProperty","isPainterDataDriven","FILL","detach","_stop","removeAllChildren","viewChange","moveEnd","supportsSpatialReference","spatialReference","canResume","layerDefinition","scale","minScale","maxScale","isUpdating","acquireTile","_createVectorTile","_updatingHandles","addPromise","key","then","once","setData","catch","getLogger","error","releaseTile","abort","doRefresh","attached","suspended","clear","_clearQueues","clearCache","finally","featureIndex","tileInfoView","AbortController","start","signal","process","_getTileData","concurrency","scheduler","priority","MAPVIEW_FETCH_QUEUE","_parseTileData","MAPVIEW_VECTOR_TILE_PARSING_QUEUE","spriteMosaic","setStyleResources","glyphMosaic","_tileHandlerAbortController","fetchTileData","parseTileData","updateStyle","message","Set","forEach","add","uid","deleteStyleLayer","setStyleLayer","index","setSpriteMosaic","setSpriteSource","spriteSource","size","Array","from","deleteStyleLayers","deleteLayerData","styleLayerUIDs","destroy","setStyle","aborted","getTileBounds","getTileResolution","level","layerData","_ensureTileIndex","queryAttributes","graphic","geometry","_tileToMapPoint","tilePoint","transforms","tileUnitsToPixels","mapPoint","sort","origin","layerIndex","toMap","pause","resume","Object","keys","Math","max","oldValue","newValue","added","changed","removed","prototype","A","default"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/layers/VectorTileLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{clone as t}from\"../../../core/lang.js\";import i from\"../../../core/Logger.js\";import{destroyMaybe as s}from\"../../../core/maybe.js\";import{isAbortError as r}from\"../../../core/promiseUtils.js\";import{property as a}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import{subclass as l}from\"../../../core/accessorSupport/decorators/subclass.js\";import{diff as n,hasDiff as o}from\"../../../core/accessorSupport/diffUtils.js\";import h from\"../../../geometry/Point.js\";import{create as u}from\"../../../geometry/support/aaBoundingRect.js\";import{equals as y}from\"../../../geometry/support/spatialReferenceUtils.js\";import{StyleUpdateType as c}from\"../engine/vectorTiles/enums.js\";import{TileHandler as d}from\"../engine/vectorTiles/TileHandler.js\";import{TileManager as _}from\"../engine/vectorTiles/TileManager.js\";import{VectorTile as p}from\"../engine/vectorTiles/VectorTile.js\";import{VectorTileContainer as f}from\"../engine/vectorTiles/VectorTileContainer.js\";import g from\"../engine/vectorTiles/VectorTileFeatureIndex.js\";import{StyleLayerType as m}from\"../engine/vectorTiles/style/StyleDefinition.js\";import T from\"../engine/vectorTiles/style/StyleRepository.js\";import{LayerView2DMixin as C}from\"./LayerView2D.js\";import R from\"../tiling/TileInfoViewPOT.js\";import v from\"../tiling/TileQueue.js\";import H from\"../../layers/LayerView.js\";import w from\"../../layers/RefreshableLayerView.js\";import{TaskPriority as I}from\"../../support/Scheduler.js\";const S=2,D=8,P=512;let Q=class extends(w(C(H))){constructor(){super(...arguments),this._styleChanges=[],this._fetchQueue=null,this._parseQueue=null,this._tileHandlerPromise=null,this._isTileHandlerReady=!1,this._styeChanged=!1,this._spriteSourceChanged=!1}get fading(){return this._vectorTileContainer?.fading??!1}get hasVisibleFeatures(){const e=this._vectorTileContainer.children;for(const t of e)if(t.hasFeatures())return!0;return!1}get spriteSourceChanged(){return this._spriteSourceChanged}get styleChanged(){return this._styeChanged}async hitTest(e,t){const i=this._tileHandlerPromise,s=this._vectorTileContainer?.symbolFader;if(!i||!this._isTileHandlerReady||!s)return;await i;let r=null;const a=this._vectorTileContainer?.symbolRepository;a&&(r=a.querySymbols(t,S,s.decluttererOffset,{}));const l=this.view.state,n=this._tileManager.getIntersectingTiles(t.x,t.y,S,l,r);if((!n||0===n.length)&&0===r?.length)return null;e=e.clone().normalize();const o=[],h=[];for(const u of n)o.push(this._queryTile(h,e,S,this.view.state.rotation,u,r?.filter((e=>e.tileKey.id===u.id))));return await Promise.all(o),h}update(e){if(this._tileHandlerPromise&&this._isTileHandlerReady)return e.pixelRatio!==this._tileHandler.devicePixelRatio?(this._start(),void(this._tileHandler.devicePixelRatio=e.pixelRatio)):void(this._styleChanges.length>0?this._tileHandlerPromise=this._applyStyleChanges():(this._pauseQueues(),this._fetchQueue.state=e.state,this._parseQueue.state=e.state,this._tileManager.update(e)||this.requestUpdate(),this._resumeQueues()))}attach(){const{style:e}=this.layer.currentStyleInfo;this._styleRepository=new T(e),this._tileInfoView=new R(this.layer.tileInfo,this.layer.fullExtent),this._vectorTileContainer=new f(this._tileInfoView),this._tileHandler=new d(this.layer,this._styleRepository,window.devicePixelRatio||1,this.layer.tileInfo.lods.length-1),this.container.addChild(this._vectorTileContainer),this._start(),this.addAttachHandles([this.layer.on(\"paint-change\",(e=>{if(this._styeChanged=!0,e.isDataDriven)this._styleChanges.push({type:c.PAINTER_CHANGED,data:e}),this.requestUpdate();else{const t=this._styleRepository,i=t.getLayerById(e.layer);if(!i)return;const s=i.type===m.SYMBOL;t.setPaintProperties(e.layer,e.paint),s&&this._vectorTileContainer?.restartDeclutter(),this._vectorTileContainer?.requestRender()}})),this.layer.on(\"layout-change\",(e=>{const t=this._styleRepository,i=t.getLayerById(e.layer);if(!i)return;this._styeChanged=!0;const s=n(i.layout,e.layout);if(null!=s){if(o(s,\"visibility\")&&1===E(s))return t.setLayoutProperties(e.layer,e.layout),i.type===m.SYMBOL&&this._vectorTileContainer?.restartDeclutter(),void this._vectorTileContainer?.requestRender();this._styleChanges.push({type:c.LAYOUT_CHANGED,data:e}),this.requestUpdate()}})),this.layer.on(\"style-layer-visibility-change\",(e=>{const t=this._styleRepository,i=t.getLayerById(e.layer);i&&(this._styeChanged=!0,t.setStyleLayerVisibility(e.layer,e.visibility),i.type===m.SYMBOL&&this._vectorTileContainer?.restartDeclutter(),this._vectorTileContainer?.requestRender())})),this.layer.on(\"style-layer-change\",(e=>{this._styleChanges.push({type:c.LAYER_CHANGED,data:e}),this._styeChanged=!0,this.requestUpdate()})),this.layer.on(\"delete-style-layer\",(e=>{this._styleChanges.push({type:c.LAYER_REMOVED,data:e}),this._styeChanged=!0,this.requestUpdate()})),this.layer.on(\"load-style\",(()=>this._loadStyle())),this.layer.on(\"spriteSource-change\",(e=>{this._spriteSourceChanged=!0,this._styleChanges.push({type:c.SPRITES_CHANGED,data:e});const t=this._styleRepository.layers;for(const i of t)switch(i.type){case m.SYMBOL:i.getLayoutProperty(\"icon-image\")&&this._styleChanges.push({type:c.LAYOUT_CHANGED,data:{layer:i.id,layout:i.layout}});break;case m.LINE:i.getPaintProperty(\"line-pattern\")&&this._styleChanges.push({type:c.PAINTER_CHANGED,data:{layer:i.id,paint:i.paint,isDataDriven:i.isPainterDataDriven()}});break;case m.FILL:i.getLayoutProperty(\"fill-pattern\")&&this._styleChanges.push({type:c.PAINTER_CHANGED,data:{layer:i.id,paint:i.paint,isDataDriven:i.isPainterDataDriven()}})}this.requestUpdate()}))])}detach(){this._stop(),this.container.removeAllChildren(),this._vectorTileContainer=s(this._vectorTileContainer),this._tileHandler=s(this._tileHandler)}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}supportsSpatialReference(e){return y(this.layer.tileInfo?.spatialReference,e)}canResume(){let e=super.canResume();const{currentStyleInfo:t}=this.layer;if(e&&t?.layerDefinition){const i=this.view.scale,{minScale:s,maxScale:r}=t.layerDefinition;t?.layerDefinition&&(s&&s<i&&(e=!1),r&&r>i&&(e=!1))}return e}isUpdating(){return this.fading}acquireTile(e){const t=this._createVectorTile(e);return this._updatingHandles.addPromise(this._fetchQueue.push(t.key).then((e=>this._parseQueue.push({key:t.key,data:e}))).then((e=>{t.once(\"attach\",(()=>this.requestUpdate())),t.setData(e),this.requestUpdate()})).catch((e=>{r(e)||i.getLogger(this).error(e)}))),t}releaseTile(e){const t=e.key.id;this._fetchQueue.abort(t),this._parseQueue.abort(t),this.requestUpdate()}async doRefresh(){if(!this.attached)return;if(this.suspended)return this._tileManager.clear(),void this.requestUpdate();this._isTileHandlerReady=!1,this._pauseQueues(),this._clearQueues(),this._tileManager.clearCache(),this._resumeQueues();const e=this._vectorTileContainer.children,t=[];try{for(const i of e){const e=this._updatingHandles.addPromise(this._fetchQueue.push(i.key).then((e=>this._parseQueue.push({key:i.key,data:e}))).then((e=>i.setData(e))).finally((()=>i.featureIndex=null)));t.push(e)}await Promise.all(t)}catch(s){i.getLogger(this).error(\"error refreshing vector-tiles layer-view\",s),this._resumeQueues(),this._isTileHandlerReady=!0}this._isTileHandlerReady=!0,this.requestUpdate()}_start(){if(this._stop(),this._tileManager=new _({acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),tileInfoView:this._tileInfoView},this._vectorTileContainer),!this.layer.currentStyleInfo)return;const e=new AbortController,t=this._tileHandler.start({signal:e.signal}).then((()=>{this._fetchQueue=new v({tileInfoView:this._tileInfoView,process:(e,t)=>this._getTileData(e,t),concurrency:15,scheduler:this.scheduler,priority:I.MAPVIEW_FETCH_QUEUE}),this._parseQueue=new v({tileInfoView:this._tileInfoView,process:(e,t)=>this._parseTileData(e,t),concurrency:8,scheduler:this.scheduler,priority:I.MAPVIEW_VECTOR_TILE_PARSING_QUEUE}),this.requestUpdate(),this._isTileHandlerReady=!0}));this._tileHandler.spriteMosaic.then((e=>{this._vectorTileContainer.setStyleResources(e,this._tileHandler.glyphMosaic,this._styleRepository,this._tileInfoView),this.requestUpdate()})),this._tileHandlerAbortController=e,this._tileHandlerPromise=t}_stop(){if(!this._tileHandlerAbortController||!this._vectorTileContainer)return;const e=this._tileHandlerAbortController;e&&e.abort(),this._tileHandlerPromise=null,this._isTileHandlerReady=!1,this._fetchQueue=s(this._fetchQueue),this._parseQueue=s(this._parseQueue),this._tileManager=s(this._tileManager),this._vectorTileContainer.removeAllChildren()}async _getTileData(e,t){return this._tileHandler.fetchTileData(e,t)}async _parseTileData(e,t){return this._tileHandler.parseTileData(e,t)}async _applyStyleChanges(){this._isTileHandlerReady=!1,this._pauseQueues(),this._clearQueues(),this._tileManager.clearCache();const e=this._styleChanges;try{await this._tileHandler.updateStyle(e)}catch(l){i.getLogger(this).error(\"error applying vector-tiles style update\",l.message),this._resumeQueues(),this._isTileHandlerReady=!0}const t=this._styleRepository,s=new Set;e.forEach((e=>{if(e.type!==c.LAYER_REMOVED)return;const i=e.data,r=t.getLayerById(i.layer);r&&s.add(r.uid)}));const r=new Set;e.forEach((e=>{let i;switch(e.type){case c.PAINTER_CHANGED:t.setPaintProperties(e.data.layer,e.data.paint),i=e.data.layer;break;case c.LAYOUT_CHANGED:t.setLayoutProperties(e.data.layer,e.data.layout),i=e.data.layer;break;case c.LAYER_REMOVED:return void t.deleteStyleLayer(e.data.layer);case c.LAYER_CHANGED:t.setStyleLayer(e.data.layer,e.data.index),i=e.data.layer.id;break;case c.SPRITES_CHANGED:this._vectorTileContainer.setSpriteMosaic(this._tileHandler.setSpriteSource(e.data.spriteSource))}if(i){const e=t.getLayerById(i);e&&r.add(e.uid)}}));const a=this._vectorTileContainer.children;if(s.size>0){const e=Array.from(s);this._vectorTileContainer.deleteStyleLayers(e);for(const t of a)t.deleteLayerData(e)}if(this._resumeQueues(),r.size>0){const e=Array.from(r),t=[];for(const i of a){const s=this._updatingHandles.addPromise(this._fetchQueue.push(i.key).then((t=>this._parseQueue.push({key:i.key,data:t,styleLayerUIDs:e}))).then((e=>i.setData(e))).finally((()=>i.featureIndex=null)));t.push(s)}await Promise.all(t)}this._styleChanges=[],this._isTileHandlerReady=!0,this.requestUpdate()}async _loadStyle(){const{style:e}=this.layer.currentStyleInfo,i=t(e);this._isTileHandlerReady=!1,this._pauseQueues(),this._clearQueues(),this._styleRepository=new T(i),this._vectorTileContainer.destroy(),this._tileManager.clear(),this._tileHandlerAbortController.abort(),this._tileHandlerAbortController=new AbortController;const{signal:s}=this._tileHandlerAbortController;try{this._tileHandlerPromise=this._tileHandler.setStyle(this._styleRepository,i,this.layer.tileInfo.lods.length-1),await this._tileHandlerPromise}catch(n){if(!r(n))throw n}if(s.aborted)return this._resumeQueues(),this._isTileHandlerReady=!0,this._styeChanged=!1,this._spriteSourceChanged=!1,void this.requestUpdate();const a=await this._tileHandler.spriteMosaic,l=this._vectorTileContainer;this._tileInfoView=new R(this.layer.tileInfo,this.layer.fullExtent),l.setStyleResources(a,this._tileHandler.glyphMosaic,this._styleRepository,this._tileInfoView),this._tileManager=new _({acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),tileInfoView:this._tileInfoView},this._vectorTileContainer),this._resumeQueues(),this._isTileHandlerReady=!0,this.requestUpdate(),this._styeChanged=!1,this._spriteSourceChanged=!1}_createVectorTile(e){const t=this._tileInfoView.getTileBounds(u(),e),i=this._tileInfoView.getTileResolution(e.level);return new p(e,i,t[0],t[3],512,512,this._styleRepository)}async _queryTile(e,t,i,s,r,a){if(0===r.layerData.size)return;const l=this._ensureTileIndex(r),n=this._tileInfoView.getTileBounds(u(),r.key,!0),o=D*P*((t.x-n[0])/(n[2]-n[0])),h=D*P*(1-(t.y-n[1])/(n[3]-n[1])),y=await l.queryAttributes(o,h,i,s,a);for(const u of y)u.graphic.geometry=this._tileToMapPoint(u.tilePoint,r.transforms.tileUnitsToPixels),e.push({type:\"graphic\",layer:this.layer,graphic:u.graphic,mapPoint:t.clone()});e.sort(((e,t)=>t.graphic.origin.layerIndex-e.graphic.origin.layerIndex))}_tileToMapPoint(e,t){if(!e)return null;const i=e[0]*t[0]+e[1]*t[3]+t[6],s=e[0]*t[1]+e[1]*t[4]+t[7],r=this.view.state,a=[0,0];return r.toMap(a,[i,s]),new h({x:a[0],y:a[1],spatialReference:r.spatialReference})}_ensureTileIndex(e){let t=e.featureIndex;return t||(t=g.create(e.key,e.layerData,this._styleRepository,this._tileHandler,this.layer),e.featureIndex=t),t}_pauseQueues(){this._fetchQueue.pause(),this._parseQueue.pause()}_resumeQueues(){this._fetchQueue.resume(),this._parseQueue.resume()}_clearQueues(){this._fetchQueue.clear(),this._parseQueue.clear()}};function E(e){if(null==e)return 0;switch(e.type){case\"partial\":return Object.keys(e.diff).length;case\"complete\":return Math.max(Object.keys(e.oldValue).length,Object.keys(e.newValue).length);case\"collection\":return Object.keys(e.added).length+Object.keys(e.changed).length+Object.keys(e.removed).length}}e([a()],Q.prototype,\"_isTileHandlerReady\",void 0),Q=e([l(\"esri.views.2d.layers.VectorTileLayerView2D\")],Q);const A=Q;export{A as default};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}