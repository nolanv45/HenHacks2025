{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../chunks/tslib.es6.js\";\nimport { numberMaxFloat32 as e } from \"../../../core/mathUtils.js\";\nimport { property as s } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/Logger.js\";\nimport \"../../../core/RandomLCG.js\";\nimport { subclass as o } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport r from \"./BaseRasterFunction.js\";\nimport n from \"./MaskFunctionArguments.js\";\nimport { createMaskLUT as u, maxMapSizeGpu as a, NoDataInterpretation as i, mask as l } from \"./pixelUtils.js\";\nlet c = class extends r {\n  constructor() {\n    super(...arguments), this.functionName = \"Mask\", this.functionArguments = null, this.rasterArgumentNames = [\"raster\"];\n  }\n  _bindSourceRasters() {\n    const t = this.sourceRasterInfos[0].clone(),\n      {\n        pixelType: e\n      } = t;\n    this.outputPixelType = this._getOutputPixelType(e), t.pixelType = this.outputPixelType, this.rasterInfo = t;\n    const {\n      includedRanges: s,\n      normalizedNoDataValues: o\n    } = this.functionArguments;\n    if (!s?.length && !o?.length) return {\n      success: !1,\n      supportsGPU: !1,\n      error: \"missing includedRanges or noDataValues argument\"\n    };\n    let r = [];\n    for (let a = 0; a < t.bandCount; a++) {\n      const t = u(e, s?.slice(2 * a, 2 * a + 2), o?.[a]);\n      if (null == t) {\n        r = null;\n        break;\n      }\n      r.push(t);\n    }\n    this.lookups = r;\n    const n = null != o && o.every(t => t?.length === o[0]?.length);\n    return {\n      success: !0,\n      supportsGPU: (!s || s.length <= 2 * a) && (!o || n && o[0].length <= a)\n    };\n  }\n  _processPixels(t) {\n    const e = t.pixelBlocks?.[0];\n    if (null == e) return null;\n    const {\n        outputPixelType: s,\n        lookups: o\n      } = this,\n      {\n        includedRanges: r,\n        noDataInterpretation: n,\n        normalizedNoDataValues: u\n      } = this.functionArguments,\n      a = n === i.matchAll;\n    return l(e, {\n      includedRanges: r,\n      noDataValues: u,\n      outputPixelType: s,\n      matchAll: a,\n      lookups: o\n    });\n  }\n  _getWebGLParameters() {\n    const {\n        includedRanges: t,\n        normalizedNoDataValues: s\n      } = this.functionArguments,\n      o = new Float32Array(a);\n    o.fill(e), s?.[0]?.length && o.set(s[0]);\n    const r = new Float32Array(a);\n    for (let n = 0; n < r.length; n += 2) r[n] = t?.[n] ?? -e, r[n + 1] = t?.[n + 1] ?? e;\n    return t?.length && r.set(t), {\n      bandCount: this.sourceRasterInfos[0].bandCount,\n      noDataValues: o,\n      includedRanges: r\n    };\n  }\n};\nt([s({\n  json: {\n    write: !0,\n    name: \"rasterFunction\"\n  }\n})], c.prototype, \"functionName\", void 0), t([s({\n  type: n,\n  json: {\n    write: !0,\n    name: \"rasterFunctionArguments\"\n  }\n})], c.prototype, \"functionArguments\", void 0), t([s()], c.prototype, \"rasterArgumentNames\", void 0), t([s({\n  json: {\n    write: !0\n  }\n})], c.prototype, \"lookups\", void 0), c = t([o(\"esri.layers.support.rasterFunctions.MaskFunction\")], c);\nconst p = c;\nexport { p as default };","map":{"version":3,"names":["_","t","numberMaxFloat32","e","property","s","subclass","o","r","n","createMaskLUT","u","maxMapSizeGpu","a","NoDataInterpretation","i","mask","l","c","constructor","arguments","functionName","functionArguments","rasterArgumentNames","_bindSourceRasters","sourceRasterInfos","clone","pixelType","outputPixelType","_getOutputPixelType","rasterInfo","includedRanges","normalizedNoDataValues","length","success","supportsGPU","error","bandCount","slice","push","lookups","every","_processPixels","pixelBlocks","noDataInterpretation","matchAll","noDataValues","_getWebGLParameters","Float32Array","fill","set","json","write","name","prototype","type","p","default"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/layers/support/rasterFunctions/MaskFunction.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import{numberMaxFloat32 as e}from\"../../../core/mathUtils.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import r from\"./BaseRasterFunction.js\";import n from\"./MaskFunctionArguments.js\";import{createMaskLUT as u,maxMapSizeGpu as a,NoDataInterpretation as i,mask as l}from\"./pixelUtils.js\";let c=class extends r{constructor(){super(...arguments),this.functionName=\"Mask\",this.functionArguments=null,this.rasterArgumentNames=[\"raster\"]}_bindSourceRasters(){const t=this.sourceRasterInfos[0].clone(),{pixelType:e}=t;this.outputPixelType=this._getOutputPixelType(e),t.pixelType=this.outputPixelType,this.rasterInfo=t;const{includedRanges:s,normalizedNoDataValues:o}=this.functionArguments;if(!s?.length&&!o?.length)return{success:!1,supportsGPU:!1,error:\"missing includedRanges or noDataValues argument\"};let r=[];for(let a=0;a<t.bandCount;a++){const t=u(e,s?.slice(2*a,2*a+2),o?.[a]);if(null==t){r=null;break}r.push(t)}this.lookups=r;const n=null!=o&&o.every((t=>t?.length===o[0]?.length));return{success:!0,supportsGPU:(!s||s.length<=2*a)&&(!o||n&&o[0].length<=a)}}_processPixels(t){const e=t.pixelBlocks?.[0];if(null==e)return null;const{outputPixelType:s,lookups:o}=this,{includedRanges:r,noDataInterpretation:n,normalizedNoDataValues:u}=this.functionArguments,a=n===i.matchAll;return l(e,{includedRanges:r,noDataValues:u,outputPixelType:s,matchAll:a,lookups:o})}_getWebGLParameters(){const{includedRanges:t,normalizedNoDataValues:s}=this.functionArguments,o=new Float32Array(a);o.fill(e),s?.[0]?.length&&o.set(s[0]);const r=new Float32Array(a);for(let n=0;n<r.length;n+=2)r[n]=t?.[n]??-e,r[n+1]=t?.[n+1]??e;return t?.length&&r.set(t),{bandCount:this.sourceRasterInfos[0].bandCount,noDataValues:o,includedRanges:r}}};t([s({json:{write:!0,name:\"rasterFunction\"}})],c.prototype,\"functionName\",void 0),t([s({type:n,json:{write:!0,name:\"rasterFunctionArguments\"}})],c.prototype,\"functionArguments\",void 0),t([s()],c.prototype,\"rasterArgumentNames\",void 0),t([s({json:{write:!0}})],c.prototype,\"lookups\",void 0),c=t([o(\"esri.layers.support.rasterFunctions.MaskFunction\")],c);const p=c;export{p as default};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}