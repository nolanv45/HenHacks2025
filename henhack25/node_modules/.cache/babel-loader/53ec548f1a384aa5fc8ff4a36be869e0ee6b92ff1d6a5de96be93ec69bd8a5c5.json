{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { PipelineCommand as t } from \"../PipelineCommand.js\";\nimport { readObjectIds as e } from \"../featureData/processingUtils.js\";\nimport { TestObjectSymbol as n } from \"./TestObjectSymbol.js\";\nimport { TestSymbol as o } from \"./TestSymbol.js\";\nclass r {\n  constructor(t) {\n    this._symbols = new Array(), this._featureDataPartitioning = new Map(), this._context = t;\n  }\n  async load() {\n    this._symbols[0] = new o(this._context), this._symbols[1] = new n(this._context);\n  }\n  async createAddCommand(e) {\n    const n = this._partition(e),\n      o = await Promise.all(n.map(async _ref => {\n        let {\n          index: t,\n          features: e\n        } = _ref;\n        const n = await this._provisionSymbol(t);\n        return await n?.createAddCommand(e);\n      })),\n      r = this._context.renderCommandContext.createEncoder();\n    for (const t of o) null != t && r.append(t);\n    return new t(r, [() => {\n      this._featureDataPartitioning.set(e, n);\n    }]);\n  }\n  async createRemoveCommand(e) {\n    const {\n        _featureDataPartitioning: n\n      } = this,\n      o = n.get(e),\n      r = this._context.renderCommandContext.createEncoder();\n    if (null == o) return new t(this._context.renderCommandContext.createEncoder(), []);\n    const a = await Promise.all(o.map(async _ref2 => {\n      let {\n        index: t,\n        features: e\n      } = _ref2;\n      const n = this._getLoadedSymbol(t);\n      return await n?.createRemoveCommand(e);\n    }));\n    for (const t of a) null != t && r.append(t);\n    return new t(r, [() => {\n      n.delete(e);\n    }]);\n  }\n  async _provisionSymbol(t) {\n    if (null == t) return null;\n    const e = this._symbols[t];\n    return e ? (e.loaded || (await e.load()), e) : null;\n  }\n  _getLoadedSymbol(t) {\n    if (null == t) return null;\n    const e = this._symbols[t];\n    return null != e && e.loaded ? e : null;\n  }\n  _partition(t) {\n    const n = e(t, this._context);\n    if (null == n) throw new Error(\"unable to fetch objectIds\");\n    const {\n        featureCount: o\n      } = t,\n      r = [[], []];\n    for (let e = 0; e < o; ++e) {\n      r[n[e] % 2].push(e);\n    }\n    return r.map((e, n) => new a(n, t.subset(new Uint32Array(e)))).filter(t => t.features.featureCount > 0);\n  }\n}\nclass a {\n  constructor(t, e) {\n    this.index = t, this.features = e;\n  }\n}\nexport { r as UniqueValueFeatureRenderer };","map":{"version":3,"names":["PipelineCommand","t","readObjectIds","e","TestObjectSymbol","n","TestSymbol","o","r","constructor","_symbols","Array","_featureDataPartitioning","Map","_context","load","createAddCommand","_partition","Promise","all","map","_ref","index","features","_provisionSymbol","renderCommandContext","createEncoder","append","set","createRemoveCommand","get","a","_ref2","_getLoadedSymbol","delete","loaded","Error","featureCount","push","subset","Uint32Array","filter","UniqueValueFeatureRenderer"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/symbolization/UniqueValueFeatureRenderer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{PipelineCommand as t}from\"../PipelineCommand.js\";import{readObjectIds as e}from\"../featureData/processingUtils.js\";import{TestObjectSymbol as n}from\"./TestObjectSymbol.js\";import{TestSymbol as o}from\"./TestSymbol.js\";class r{constructor(t){this._symbols=new Array,this._featureDataPartitioning=new Map,this._context=t}async load(){this._symbols[0]=new o(this._context),this._symbols[1]=new n(this._context)}async createAddCommand(e){const n=this._partition(e),o=await Promise.all(n.map((async({index:t,features:e})=>{const n=await this._provisionSymbol(t);return await(n?.createAddCommand(e))}))),r=this._context.renderCommandContext.createEncoder();for(const t of o)null!=t&&r.append(t);return new t(r,[()=>{this._featureDataPartitioning.set(e,n)}])}async createRemoveCommand(e){const{_featureDataPartitioning:n}=this,o=n.get(e),r=this._context.renderCommandContext.createEncoder();if(null==o)return new t(this._context.renderCommandContext.createEncoder(),[]);const a=await Promise.all(o.map((async({index:t,features:e})=>{const n=this._getLoadedSymbol(t);return await(n?.createRemoveCommand(e))})));for(const t of a)null!=t&&r.append(t);return new t(r,[()=>{n.delete(e)}])}async _provisionSymbol(t){if(null==t)return null;const e=this._symbols[t];return e?(e.loaded||await e.load(),e):null}_getLoadedSymbol(t){if(null==t)return null;const e=this._symbols[t];return null!=e&&e.loaded?e:null}_partition(t){const n=e(t,this._context);if(null==n)throw new Error(\"unable to fetch objectIds\");const{featureCount:o}=t,r=[[],[]];for(let e=0;e<o;++e){r[n[e]%2].push(e)}return r.map(((e,n)=>new a(n,t.subset(new Uint32Array(e))))).filter((t=>t.features.featureCount>0))}}class a{constructor(t,e){this.index=t,this.features=e}}export{r as UniqueValueFeatureRenderer};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}