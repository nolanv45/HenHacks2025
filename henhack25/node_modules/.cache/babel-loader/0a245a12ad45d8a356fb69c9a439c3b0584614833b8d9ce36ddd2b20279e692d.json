{"ast":null,"code":"import React,{useEffect,useRef,useState}from\"react\";import\"@arcgis/core/assets/esri/themes/light/main.css\";import MapView from\"@arcgis/core/views/MapView\";import WebMap from\"@arcgis/core/WebMap\";import PopupTemplate from\"@arcgis/core/PopupTemplate\";import esriConfig from\"@arcgis/core/config\";import{GoogleGenerativeAI}from\"@google/generative-ai\";import{Button}from\"react-bootstrap\";import{Loader}from'./Loader';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const MapComponent=_ref=>{let{goToHomePage}=_ref;const mapDiv=useRef(null);const[recipesArray,setRecipesArray]=useState(()=>{const savedRecipes=localStorage.getItem(\"recipesArray\");return savedRecipes?JSON.parse(savedRecipes):[];});const[accessToken,setAccessToken]=useState(null);const[loading,setLoading]=useState(false);useEffect(()=>{async function fetchAccessToken(){try{const response=await fetch(\"https://www.arcgis.com/sharing/rest/oauth2/token/\",{method:\"POST\",body:new URLSearchParams({client_id:\"zlaV5Ed2PGwGWDkN\",client_secret:\"5a3ea1f5846741a4b1be0086a302c664\",grant_type:\"client_credentials\"})});console.log(\"API key found.\");const data=await response.json();setAccessToken(data.access_token);}catch(error){console.error(\"Error fetching access token:\",error);}}fetchAccessToken();},[]);async function handleSubmit(){setLoading(true);console.log(\"Generating recipes...\");try{const apiKey=\"AIzaSyDR-VHD19VDVq_t8ORrz4SCctc5Z_Rc6uQ\";if(!apiKey){console.error(\"API key not found in environment variables.\");return;}const genAI=new GoogleGenerativeAI(apiKey);const model=genAI.getGenerativeModel({model:\"gemini-2.0-flash\"});const regionsGroup1=[\"Wales\",\"Venetian Areas\",\"Sweden\",\"Sultanate of Iconium\",\"Serbs\",\"Principality of Russia\",\"Principality of Pomerania\",\"Principality of Antioch\",\"Pomerania\",\"Papal States\",\"Norway\",\"Latvians\",\"Kingdom of Sicily\",\"Kingdom of Scotland\",\"Kingdom of Portugal\",\"Kingdom of Poland\",\"Kingdom of Navarre\"];const regionsGroup2=[\"Kingdom of Leon\",\"Kingdom of Jerusalem\",\"Kingdom of Italy\",\"Kingdom of Hungary\",\"Kingdom of Granada\",\"Kingdom of Georgia\",\"Kingdom of France\",\"Kingdom of England\",\"Kingdom of Cyprus\",\"Kingdom of Castille\",\"Kingdom of Burgundy\",\"Kingdom of Bohemia\",\"Khanate of the Golden Horde\",\"Khanate of the Golden Hor\",\"Ireland\",\"German Empire\",\"Duchy of Edessa\",\"Denmark\",\"Crown of Aragon\",\"Byzantine Empire\",\"Bulgaria\",\"Ayyubid Dynasty\",\"Almohad Dynasty\"];const prompt1=`Generate a recipe from the medieval period of each region [${regionsGroup1.join(\", \")}] using the following ingredients:.\n      Format the response as an individual valid JSON with the following keys:\n      {\n        \"Region\": \"Region name\",\n        \"recipename\": \"Name of the recipe\",\n        \"time\": \"Estimated preparation and cooking time\",\n        \"ingredients\": [\"List of ingredients with quantities\"],\n        \"instructions\": [\"Step 1\", \"Step 2\", \"Step 3\", ...],\n        \"macronutrients\": {\n          \"calories\": \"value\",\n          \"protein\": \"value\",\n          \"carbs\": \"value\",\n          \"fat\": \"value\"\n        }\n      }\n      Return only the JSON objects without extra formatting.`;const prompt2=`Generate a recipe from the medieval period of each region [${regionsGroup2.join(\", \")}] using the following ingredients:.\n      Format the response as an individual valid JSON with the following keys:\n      {\n        \"Region\": \"Region name\",\n        \"recipename\": \"Name of the recipe\",\n        \"time\": \"Estimated preparation and cooking time\",\n        \"ingredients\": [\"List of ingredients with quantities\"],\n        \"instructions\": [\"Step 1\", \"Step 2\", \"Step 3\", ...],\n        \"macronutrients\": {\n          \"calories\": \"value\",\n          \"protein\": \"value\",\n          \"carbs\": \"value\",\n          \"fat\": \"value\"\n        }\n      }\n      Return only the JSON objects without extra formatting.`;console.log(\"Prompt 1:\",prompt1);console.log(\"Prompt 2:\",prompt2);const result1=await model.generateContent(prompt1);const response1=await result1.response;const text1=await response1.text();// Await the text response\nconsole.log(\"Response text 1:\",text1);const result2=await model.generateContent(prompt2);const response2=await result2.response;const text2=await response2.text();// Await the text response\nconsole.log(\"Response text 2:\",text2);// Ensure the response text is valid JSON\nconst jsonStartIndex1=text1.indexOf('{');const jsonEndIndex1=text1.lastIndexOf('}')+1;const jsonString1=text1.substring(jsonStartIndex1,jsonEndIndex1);const jsonStartIndex2=text2.indexOf('{');const jsonEndIndex2=text2.lastIndexOf('}')+1;const jsonString2=text2.substring(jsonStartIndex2,jsonEndIndex2);console.log(\"JSON string 1:\",jsonString1);console.log(\"JSON string 2:\",jsonString2);// Split the JSON string into individual JSON objects\nconst recipesData1=JSON.parse(`[${jsonString1.split('}{').join('},{')}]`);const recipesData2=JSON.parse(`[${jsonString2.split('}{').join('},{')}]`);// Combine the results from both API calls\nconst combinedRecipesData=[...recipesData1,...recipesData2];// Assuming combinedRecipesData is an array of recipes\nsetRecipesArray(combinedRecipesData);localStorage.setItem(\"recipesArray\",JSON.stringify(combinedRecipesData));console.log(\"Recipes generated:\",combinedRecipesData);}catch(error){console.error(\"Error generating recipe:\",error);}setLoading(false);}useEffect(()=>{if(accessToken){// Set the ArcGIS API key\nesriConfig.apiKey=accessToken;if(mapDiv.current){const webmap=new WebMap({portalItem:{id:\"047cb3b3562f4760a2f5c3b05d83d4fd\"}});const view=new MapView({map:webmap,container:mapDiv.current,center:[10,50],zoom:4});view.when(()=>{console.log(\"Map and View are ready\");// Loop through layers in the WebMap and find the FeatureLayer\nwebmap.layers.forEach(layer=>{if(layer.type===\"feature\"){const featureLayer=layer;console.log(\"FeatureLayer found: \",featureLayer);// Query all features in the layer\nfeatureLayer.queryFeatures().then(results=>{results.features.forEach(feature=>{console.log(\"Feature attributes: \",feature.attributes);});});// Define a PopupTemplate (if it's not already defined)\nfeatureLayer.popupTemplate=new PopupTemplate({title:`{REGIONNAME}`,// Use the field of your feature layer\ncontent:feature=>{const attributes=feature.graphic.attributes;console.log(\"Feature attributes:\",attributes);const regionName=attributes.Name||attributes.REGIONNAME||attributes.regionName;// Check for different possible attribute names\nconsole.log(`Region name: ${regionName}`);const recipe=recipesArray.find(r=>r.Region===regionName);if(recipe){console.log(`Recipe found for ${regionName}: ${recipe.Region}`);return`\n                      <h3>${recipe.Region}</h3>\n                      <p><strong>Recipe:</strong> ${recipe.recipename}</p>\n                      <p><strong>Time:</strong> ${recipe.time}</p>\n                      <h4>Ingredients</h4>\n                      <ul>\n                        ${recipe.ingredients.map(ingredient=>`<li>${ingredient}</li>`).join('')}\n                      </ul>\n                      <h4>Instructions</h4>\n                      <ol>\n                        ${recipe.instructions.map(instruction=>`<li>${instruction}</li>`).join('')}\n                      </ol>\n                      <h4>Macronutrients</h4>\n                      <ul>\n                        <li><strong>Calories:</strong> ${recipe.macronutrients.calories}</li>\n                        <li><strong>Protein:</strong> ${recipe.macronutrients.protein}</li>\n                        <li><strong>Carbs:</strong> ${recipe.macronutrients.carbs}</li>\n                        <li><strong>Fat:</strong> ${recipe.macronutrients.fat}</li>\n                      </ul>\n                    `;}else{console.log(`No recipe found for ${regionName}`);return`<p>No recipe found for ${regionName}</p>`;}}});// Add click event to the view for interaction\nview.on(\"click\",event=>{view.hitTest(event).then(response=>{var _response$results$;const graphic=(_response$results$=response.results[0])===null||_response$results$===void 0?void 0:_response$results$.graphic;if(graphic){const attributes=graphic.attributes;console.log(\"Clicked feature attributes:\",attributes);const regionName=attributes.Name||attributes.REGIONNAME||attributes.regionName;// Check for different possible attribute names\nconsole.log(`Clicked region: ${regionName}`);const recipe=recipesArray.find(r=>r.Region===regionName);if(recipe){console.log(`Recipe found for ${regionName}: ${recipe.Region}`);const content=`\n  <h3 style=\"color: #b35c00;\">${recipe.Region}</h3>\n  <p><strong>Recipe:</strong> ${recipe.recipename}</p>\n  <h4 style=\"color: #006400;\">Ingredients</h4>\n  <ul style=\"list-style: none; padding-left: 0;\">\n    ${recipe.ingredients.map(i=>`<li>üç≤ ${i}</li>`).join(\"\")}\n  </ul>\n  <h4 style=\"color: #8b0000;\">Instructions</h4>\n  <ol>\n    ${recipe.instructions.map(i=>`<li>${i}</li>`).join(\"\")}\n  </ol>\n`;if(view.popup){view.popup.open({title:regionName,content:content,location:event.mapPoint// Show popup at clicked point\n});}}else{console.log(`No recipe found for ${regionName}`);if(view.popup){view.popup.open({title:regionName,content:`<p>No recipe found for ${regionName}</p>`,location:event.mapPoint// Show popup at clicked point\n});}}}});});}});},error=>{console.error(\"Error loading WebMap: \",error);});return()=>{if(mapDiv.current){mapDiv.current.innerHTML=\"\";}};}}},[accessToken,recipesArray]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"header\",children:\"Explore the Recipes of Europe!\"}),loading&&/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsx(Button,{onClick:handleSubmit,className:\"submitAns\",children:\"Regenerate Recipes\"}),/*#__PURE__*/_jsx(Button,{onClick:goToHomePage,className:\"submitAns\",children:\"Go Home\"}),!loading&&/*#__PURE__*/_jsx(\"div\",{ref:mapDiv,style:{height:\"100vh\",width:\"100%\"}})]});};export default MapComponent;","map":{"version":3,"names":["React","useEffect","useRef","useState","MapView","WebMap","PopupTemplate","esriConfig","GoogleGenerativeAI","Button","Loader","jsx","_jsx","jsxs","_jsxs","MapComponent","_ref","goToHomePage","mapDiv","recipesArray","setRecipesArray","savedRecipes","localStorage","getItem","JSON","parse","accessToken","setAccessToken","loading","setLoading","fetchAccessToken","response","fetch","method","body","URLSearchParams","client_id","client_secret","grant_type","console","log","data","json","access_token","error","handleSubmit","apiKey","genAI","model","getGenerativeModel","regionsGroup1","regionsGroup2","prompt1","join","prompt2","result1","generateContent","response1","text1","text","result2","response2","text2","jsonStartIndex1","indexOf","jsonEndIndex1","lastIndexOf","jsonString1","substring","jsonStartIndex2","jsonEndIndex2","jsonString2","recipesData1","split","recipesData2","combinedRecipesData","setItem","stringify","current","webmap","portalItem","id","view","map","container","center","zoom","when","layers","forEach","layer","type","featureLayer","queryFeatures","then","results","features","feature","attributes","popupTemplate","title","content","graphic","regionName","Name","REGIONNAME","recipe","find","r","Region","recipename","time","ingredients","ingredient","instructions","instruction","macronutrients","calories","protein","carbs","fat","on","event","hitTest","_response$results$","i","popup","open","location","mapPoint","innerHTML","children","className","onClick","ref","style","height","width"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/src/Map.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState, JSX } from \"react\";\r\nimport \"@arcgis/core/assets/esri/themes/light/main.css\";\r\nimport MapView from \"@arcgis/core/views/MapView\";\r\nimport WebMap from \"@arcgis/core/WebMap\";\r\nimport FeatureLayer from \"@arcgis/core/layers/FeatureLayer\";\r\nimport PopupTemplate from \"@arcgis/core/PopupTemplate\";\r\nimport esriConfig from \"@arcgis/core/config\";\r\nimport { GoogleGenerativeAI } from \"@google/generative-ai\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport { Loader } from './Loader';\r\n\r\ninterface MapPageProps {\r\n  goToHomePage: () => void;\r\n}\r\n\r\ninterface Recipe {\r\n  Region: string;\r\n  recipename: string;\r\n  time: string;\r\n  ingredients: string[];\r\n  instructions: string[];\r\n  macronutrients: {\r\n    calories: string;\r\n    protein: string;\r\n    carbs: string;\r\n    fat: string;\r\n  };\r\n}\r\n\r\nexport const MapComponent = ({ goToHomePage }: MapPageProps): JSX.Element => {\r\n  const mapDiv = useRef<HTMLDivElement>(null);\r\n  const [recipesArray, setRecipesArray] = useState<Recipe[]>(() => {\r\n    const savedRecipes = localStorage.getItem(\"recipesArray\");\r\n    return savedRecipes ? JSON.parse(savedRecipes) : [];\r\n  });\r\n\r\n  const [accessToken, setAccessToken] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n\r\n  useEffect(() => {\r\n    async function fetchAccessToken() {\r\n      try {\r\n        const response = await fetch(\"https://www.arcgis.com/sharing/rest/oauth2/token/\", {\r\n          method: \"POST\",\r\n          body: new URLSearchParams({\r\n            \r\n            client_id: \"zlaV5Ed2PGwGWDkN\",\r\n            client_secret: \"5a3ea1f5846741a4b1be0086a302c664\",\r\n      \r\n            grant_type: \"client_credentials\"\r\n          })\r\n          \r\n        });\r\n        console.log(\"API key found.\");\r\n        const data = await response.json();\r\n        setAccessToken(data.access_token);\r\n      } catch (error) {\r\n        console.error(\"Error fetching access token:\", error);\r\n      }\r\n    }\r\n\r\n    fetchAccessToken();\r\n  }, []);\r\n\r\n  async function handleSubmit() {\r\n    setLoading(true);\r\n    console.log(\"Generating recipes...\");\r\n    try {\r\n      const apiKey = \"AIzaSyDR-VHD19VDVq_t8ORrz4SCctc5Z_Rc6uQ\";\r\n      if (!apiKey) {\r\n        console.error(\"API key not found in environment variables.\");\r\n        return;\r\n      }\r\n\r\n      const genAI = new GoogleGenerativeAI(apiKey);\r\n      const model = genAI.getGenerativeModel({ model: \"gemini-2.0-flash\" });\r\n\r\n      const regionsGroup1 = [\r\n        \"Wales\", \"Venetian Areas\", \"Sweden\", \"Sultanate of Iconium\", \"Serbs\",\r\n        \"Principality of Russia\", \"Principality of Pomerania\", \"Principality of Antioch\",\r\n        \"Pomerania\", \"Papal States\", \"Norway\", \"Latvians\", \"Kingdom of Sicily\",\r\n        \"Kingdom of Scotland\", \"Kingdom of Portugal\", \"Kingdom of Poland\", \"Kingdom of Navarre\"\r\n      ];\r\n\r\n      const regionsGroup2 = [\r\n        \"Kingdom of Leon\", \"Kingdom of Jerusalem\", \"Kingdom of Italy\", \"Kingdom of Hungary\",\r\n        \"Kingdom of Granada\", \"Kingdom of Georgia\", \"Kingdom of France\", \"Kingdom of England\",\r\n        \"Kingdom of Cyprus\", \"Kingdom of Castille\", \"Kingdom of Burgundy\", \"Kingdom of Bohemia\",\r\n        \"Khanate of the Golden Horde\", \"Khanate of the Golden Hor\", \"Ireland\", \"German Empire\",\r\n        \"Duchy of Edessa\", \"Denmark\", \"Crown of Aragon\", \"Byzantine Empire\", \"Bulgaria\",\r\n        \"Ayyubid Dynasty\", \"Almohad Dynasty\"\r\n      ];\r\n\r\n      const prompt1 = `Generate a recipe from the medieval period of each region [${regionsGroup1.join(\", \")}] using the following ingredients:.\r\n      Format the response as an individual valid JSON with the following keys:\r\n      {\r\n        \"Region\": \"Region name\",\r\n        \"recipename\": \"Name of the recipe\",\r\n        \"time\": \"Estimated preparation and cooking time\",\r\n        \"ingredients\": [\"List of ingredients with quantities\"],\r\n        \"instructions\": [\"Step 1\", \"Step 2\", \"Step 3\", ...],\r\n        \"macronutrients\": {\r\n          \"calories\": \"value\",\r\n          \"protein\": \"value\",\r\n          \"carbs\": \"value\",\r\n          \"fat\": \"value\"\r\n        }\r\n      }\r\n      Return only the JSON objects without extra formatting.`;\r\n\r\n      const prompt2 = `Generate a recipe from the medieval period of each region [${regionsGroup2.join(\", \")}] using the following ingredients:.\r\n      Format the response as an individual valid JSON with the following keys:\r\n      {\r\n        \"Region\": \"Region name\",\r\n        \"recipename\": \"Name of the recipe\",\r\n        \"time\": \"Estimated preparation and cooking time\",\r\n        \"ingredients\": [\"List of ingredients with quantities\"],\r\n        \"instructions\": [\"Step 1\", \"Step 2\", \"Step 3\", ...],\r\n        \"macronutrients\": {\r\n          \"calories\": \"value\",\r\n          \"protein\": \"value\",\r\n          \"carbs\": \"value\",\r\n          \"fat\": \"value\"\r\n        }\r\n      }\r\n      Return only the JSON objects without extra formatting.`;\r\n\r\n      console.log(\"Prompt 1:\", prompt1);\r\n      console.log(\"Prompt 2:\", prompt2);\r\n\r\n      const result1 = await model.generateContent(prompt1);\r\n      const response1 = await result1.response;\r\n      const text1 = await response1.text(); // Await the text response\r\n\r\n      console.log(\"Response text 1:\", text1);\r\n\r\n      const result2 = await model.generateContent(prompt2);\r\n      const response2 = await result2.response;\r\n      const text2 = await response2.text(); // Await the text response\r\n\r\n      console.log(\"Response text 2:\", text2);\r\n\r\n      // Ensure the response text is valid JSON\r\n      const jsonStartIndex1 = text1.indexOf('{');\r\n      const jsonEndIndex1 = text1.lastIndexOf('}') + 1;\r\n      const jsonString1 = text1.substring(jsonStartIndex1, jsonEndIndex1);\r\n\r\n      const jsonStartIndex2 = text2.indexOf('{');\r\n      const jsonEndIndex2 = text2.lastIndexOf('}') + 1;\r\n      const jsonString2 = text2.substring(jsonStartIndex2, jsonEndIndex2);\r\n\r\n      console.log(\"JSON string 1:\", jsonString1);\r\n      console.log(\"JSON string 2:\", jsonString2);\r\n\r\n      // Split the JSON string into individual JSON objects\r\n      const recipesData1 = JSON.parse(`[${jsonString1.split('}{').join('},{')}]`);\r\n      const recipesData2 = JSON.parse(`[${jsonString2.split('}{').join('},{')}]`);\r\n\r\n      // Combine the results from both API calls\r\n      const combinedRecipesData = [...recipesData1, ...recipesData2];\r\n\r\n      // Assuming combinedRecipesData is an array of recipes\r\n      setRecipesArray(combinedRecipesData);\r\n      localStorage.setItem(\"recipesArray\", JSON.stringify(combinedRecipesData));\r\n      console.log(\"Recipes generated:\", combinedRecipesData);\r\n    } catch (error) {\r\n      console.error(\"Error generating recipe:\", error);\r\n    }\r\n    setLoading(false);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (accessToken) {\r\n      // Set the ArcGIS API key\r\n      esriConfig.apiKey = accessToken;\r\n\r\n      if (mapDiv.current) {\r\n        const webmap = new WebMap({\r\n          portalItem: { id: \"047cb3b3562f4760a2f5c3b05d83d4fd\" }\r\n        });\r\n\r\n        const view = new MapView({\r\n          map: webmap,\r\n          container: mapDiv.current,\r\n          center: [10, 50],\r\n          zoom: 4,\r\n        });\r\n\r\n        view.when(() => {\r\n          console.log(\"Map and View are ready\");\r\n\r\n          // Loop through layers in the WebMap and find the FeatureLayer\r\n          webmap.layers.forEach((layer: any) => {\r\n            if (layer.type === \"feature\") {\r\n              const featureLayer = layer as FeatureLayer;\r\n              console.log(\"FeatureLayer found: \", featureLayer);\r\n\r\n              // Query all features in the layer\r\n              featureLayer.queryFeatures().then((results: any) => {\r\n                results.features.forEach((feature: any) => {\r\n                  console.log(\"Feature attributes: \", feature.attributes);\r\n                });\r\n              });\r\n\r\n              // Define a PopupTemplate (if it's not already defined)\r\n              featureLayer.popupTemplate = new PopupTemplate({\r\n                title: `{REGIONNAME}`, // Use the field of your feature layer\r\n                content: (feature: any) => {\r\n                  const attributes = feature.graphic.attributes;\r\n                  console.log(\"Feature attributes:\", attributes);\r\n                  const regionName = attributes.Name || attributes.REGIONNAME || attributes.regionName; // Check for different possible attribute names\r\n                  console.log(`Region name: ${regionName}`);\r\n                  const recipe = recipesArray.find(r => r.Region === regionName);\r\n                  if (recipe) {\r\n                    console.log(`Recipe found for ${regionName}: ${recipe.Region}`);\r\n                    return `\r\n                      <h3>${recipe.Region}</h3>\r\n                      <p><strong>Recipe:</strong> ${recipe.recipename}</p>\r\n                      <p><strong>Time:</strong> ${recipe.time}</p>\r\n                      <h4>Ingredients</h4>\r\n                      <ul>\r\n                        ${recipe.ingredients.map(ingredient => `<li>${ingredient}</li>`).join('')}\r\n                      </ul>\r\n                      <h4>Instructions</h4>\r\n                      <ol>\r\n                        ${recipe.instructions.map(instruction => `<li>${instruction}</li>`).join('')}\r\n                      </ol>\r\n                      <h4>Macronutrients</h4>\r\n                      <ul>\r\n                        <li><strong>Calories:</strong> ${recipe.macronutrients.calories}</li>\r\n                        <li><strong>Protein:</strong> ${recipe.macronutrients.protein}</li>\r\n                        <li><strong>Carbs:</strong> ${recipe.macronutrients.carbs}</li>\r\n                        <li><strong>Fat:</strong> ${recipe.macronutrients.fat}</li>\r\n                      </ul>\r\n                    `;\r\n                  } else {\r\n                    console.log(`No recipe found for ${regionName}`);\r\n                    return `<p>No recipe found for ${regionName}</p>`;\r\n                  }\r\n                }\r\n              });\r\n\r\n              // Add click event to the view for interaction\r\n              view.on(\"click\", (event: any) => {\r\n                view.hitTest(event).then((response: any) => {\r\n                  const graphic = response.results[0]?.graphic;\r\n                  if (graphic) {\r\n                    const attributes = graphic.attributes;\r\n                    console.log(\"Clicked feature attributes:\", attributes);\r\n                    const regionName = attributes.Name || attributes.REGIONNAME || attributes.regionName; // Check for different possible attribute names\r\n                    console.log(`Clicked region: ${regionName}`);\r\n                    const recipe = recipesArray.find(r => r.Region === regionName);\r\n                    if (recipe) {\r\n                      console.log(`Recipe found for ${regionName}: ${recipe.Region}`);\r\n                      const content = `\r\n  <h3 style=\"color: #b35c00;\">${recipe.Region}</h3>\r\n  <p><strong>Recipe:</strong> ${recipe.recipename}</p>\r\n  <h4 style=\"color: #006400;\">Ingredients</h4>\r\n  <ul style=\"list-style: none; padding-left: 0;\">\r\n    ${recipe.ingredients.map(i => `<li>üç≤ ${i}</li>`).join(\"\")}\r\n  </ul>\r\n  <h4 style=\"color: #8b0000;\">Instructions</h4>\r\n  <ol>\r\n    ${recipe.instructions.map(i => `<li>${i}</li>`).join(\"\")}\r\n  </ol>\r\n`;\r\n                      if (view.popup) {\r\n                        view.popup.open({\r\n                          title: regionName,\r\n                          content: content,\r\n                          location: event.mapPoint, // Show popup at clicked point\r\n                        });\r\n                      }\r\n                    } else {\r\n                      console.log(`No recipe found for ${regionName}`);\r\n                      if (view.popup) {\r\n                        view.popup.open({\r\n                          title: regionName,\r\n                          content: `<p>No recipe found for ${regionName}</p>`,\r\n                          location: event.mapPoint, // Show popup at clicked point\r\n                        });\r\n                      }\r\n                    }\r\n                  }\r\n                });\r\n              });\r\n            }\r\n          });\r\n        }, (error: any) => {\r\n          console.error(\"Error loading WebMap: \", error);\r\n        });\r\n\r\n        return () => {\r\n          if (mapDiv.current) {\r\n            mapDiv.current.innerHTML = \"\";\r\n          }\r\n        };\r\n      }\r\n    }\r\n  }, [accessToken, recipesArray]);\r\n\r\n  return (\r\n    <div>\r\n      <h2 className=\"header\">Explore the Recipes of Europe!</h2>\r\n      {loading && <Loader />}\r\n      <Button onClick={handleSubmit} className=\"submitAns\">\r\n        Regenerate Recipes\r\n      </Button>\r\n      \r\n      <Button onClick={goToHomePage} className=\"submitAns\">\r\n        Go Home\r\n      </Button>\r\n      \r\n      {!loading && <div ref={mapDiv} style={{ height: \"100vh\", width: \"100%\" }} />}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MapComponent;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}