{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { isSome as t } from \"../core/arrayUtils.js\";\nimport { clone as e } from \"../core/lang.js\";\nimport { offsetDate as n } from \"../core/timeUtils.js\";\nimport i from \"../time/TimeExtent.js\";\nimport { isWebMap as r } from \"../webmap/utils.js\";\nimport { isWebScene as l } from \"../webscene/utils.js\";\nfunction s(t) {\n  return void 0 !== t.timeInfo;\n}\nasync function u(t, e) {\n  return t.widgets?.timeSlider?.fullTimeExtent ?? a(t.allLayers, e);\n}\nfunction o(t) {\n  const e = t.numThumbs ?? 2,\n    n = t.currentTimeExtent;\n  if (n) {\n    const {\n      start: t,\n      end: i\n    } = n;\n    return null != t && null != i && t.getTime() === i.getTime() ? \"instant\" : 2 === e ? \"time-window\" : null == t || 0 === t.getTime() ? \"cumulative-from-start\" : \"cumulative-from-end\";\n  }\n  return 2 === e ? \"time-window\" : \"cumulative-from-start\";\n}\nfunction m(t) {\n  const {\n    numStops: n,\n    stopInterval: i,\n    stops: r\n  } = t;\n  return r ? {\n    dates: e(r)\n  } : i ? {\n    interval: i.clone()\n  } : {\n    count: n ?? 5\n  };\n}\nasync function a(e, n) {\n  if (0 === e.length) return i.allTime;\n  await Promise.all(e.map(t => t.load({\n    signal: n\n  })));\n  const r = e.filter(s),\n    l = e.filter(t => !s(t) && null != t.visibilityTimeExtent);\n  if (0 === r.length && 0 === l.length) return i.allTime;\n  const u = [],\n    o = [];\n  for (const t of r) \"feature\" !== t?.type && \"map-image\" !== t?.type || !t.timeInfo?.hasLiveData ? o.push(t) : u.push(t);\n  const m = t => null == t || t.isAllTime,\n    a = [...o.map(t => {\n      const e = t.timeInfo?.fullTimeExtent,\n        {\n          visibilityTimeExtent: n\n        } = t;\n      return e?.intersection(n) ?? n;\n    }), ...l.map(t => t.visibilityTimeExtent)];\n  if (a.some(m)) return i.allTime;\n  const f = u.map(async t => {\n      const e = (await t.fetchRecomputedExtents({\n          signal: n\n        }))?.timeExtent ?? t.timeInfo?.fullTimeExtent,\n        {\n          visibilityTimeExtent: i\n        } = t;\n      return e?.intersection(i) ?? i;\n    }),\n    c = (await Promise.allSettled(f)).map(t => \"fulfilled\" === t.status ? t.value : null);\n  if (c.some(m)) return i.allTime;\n  const d = [...c, ...a].filter(t);\n  if (0 === d.length) return i.allTime;\n  return d.reduce((t, e) => t.union(e));\n}\nfunction f(t, e) {\n  const n = t.currentTimeExtent;\n  if (!n) return null;\n  const {\n      start: r,\n      end: l\n    } = n,\n    s = r ?? l ?? null;\n  switch (e) {\n    case \"time-window\":\n      return new i({\n        start: r,\n        end: l\n      });\n    case \"cumulative-from-start\":\n      return new i({\n        start: null,\n        end: s\n      });\n    case \"cumulative-from-end\":\n      return new i({\n        start: s,\n        end: null\n      });\n    case \"instant\":\n      return new i({\n        start: s,\n        end: s\n      });\n  }\n}\nasync function c(t, e) {\n  if (!r(t) && !l(t)) return null;\n  await t.load({\n    signal: e\n  });\n  const n = t?.widgets?.timeSlider;\n  if (!n) return null;\n  const i = await u(t, e),\n    s = n.loop,\n    a = o(n);\n  return {\n    fullTimeExtent: i,\n    loop: s,\n    mode: a,\n    playRate: n.stopDelay ?? 2e3,\n    stops: m(n),\n    timeExtent: f(n, a)\n  };\n}\nfunction d(t) {\n  if (!t) return t;\n  const {\n    start: e,\n    end: r\n  } = t;\n  return new i({\n    start: null != e ? n(e, -e.getTimezoneOffset(), \"minutes\") : e,\n    end: null != r ? n(r, -r.getTimezoneOffset(), \"minutes\") : r\n  });\n}\nfunction p(t) {\n  if (!t) return t;\n  const {\n    start: e,\n    end: r\n  } = t;\n  return new i({\n    start: null != e ? n(e, e.getTimezoneOffset(), \"minutes\") : e,\n    end: null != r ? n(r, r.getTimezoneOffset(), \"minutes\") : r\n  });\n}\nexport { a as getTimeExtentFromLayers, c as getTimeSliderSettingsFromWebDocument, p as toLocalTimeExtent, d as toUTCTimeExtent };","map":{"version":3,"names":["isSome","t","clone","e","offsetDate","n","i","isWebMap","r","isWebScene","l","s","timeInfo","u","widgets","timeSlider","fullTimeExtent","a","allLayers","o","numThumbs","currentTimeExtent","start","end","getTime","m","numStops","stopInterval","stops","dates","interval","count","length","allTime","Promise","all","map","load","signal","filter","visibilityTimeExtent","type","hasLiveData","push","isAllTime","intersection","some","f","fetchRecomputedExtents","timeExtent","c","allSettled","status","value","d","reduce","union","loop","mode","playRate","stopDelay","getTimezoneOffset","p","getTimeExtentFromLayers","getTimeSliderSettingsFromWebDocument","toLocalTimeExtent","toUTCTimeExtent"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/support/timeUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../core/arrayUtils.js\";import{clone as e}from\"../core/lang.js\";import{offsetDate as n}from\"../core/timeUtils.js\";import i from\"../time/TimeExtent.js\";import{isWebMap as r}from\"../webmap/utils.js\";import{isWebScene as l}from\"../webscene/utils.js\";function s(t){return void 0!==t.timeInfo}async function u(t,e){return t.widgets?.timeSlider?.fullTimeExtent??a(t.allLayers,e)}function o(t){const e=t.numThumbs??2,n=t.currentTimeExtent;if(n){const{start:t,end:i}=n;return null!=t&&null!=i&&t.getTime()===i.getTime()?\"instant\":2===e?\"time-window\":null==t||0===t.getTime()?\"cumulative-from-start\":\"cumulative-from-end\"}return 2===e?\"time-window\":\"cumulative-from-start\"}function m(t){const{numStops:n,stopInterval:i,stops:r}=t;return r?{dates:e(r)}:i?{interval:i.clone()}:{count:n??5}}async function a(e,n){if(0===e.length)return i.allTime;await Promise.all(e.map((t=>t.load({signal:n}))));const r=e.filter(s),l=e.filter((t=>!s(t)&&null!=t.visibilityTimeExtent));if(0===r.length&&0===l.length)return i.allTime;const u=[],o=[];for(const t of r)\"feature\"!==t?.type&&\"map-image\"!==t?.type||!t.timeInfo?.hasLiveData?o.push(t):u.push(t);const m=t=>null==t||t.isAllTime,a=[...o.map((t=>{const e=t.timeInfo?.fullTimeExtent,{visibilityTimeExtent:n}=t;return e?.intersection(n)??n})),...l.map((t=>t.visibilityTimeExtent))];if(a.some(m))return i.allTime;const f=u.map((async t=>{const e=(await t.fetchRecomputedExtents({signal:n}))?.timeExtent??t.timeInfo?.fullTimeExtent,{visibilityTimeExtent:i}=t;return e?.intersection(i)??i})),c=(await Promise.allSettled(f)).map((t=>\"fulfilled\"===t.status?t.value:null));if(c.some(m))return i.allTime;const d=[...c,...a].filter(t);if(0===d.length)return i.allTime;return d.reduce(((t,e)=>t.union(e)))}function f(t,e){const n=t.currentTimeExtent;if(!n)return null;const{start:r,end:l}=n,s=r??l??null;switch(e){case\"time-window\":return new i({start:r,end:l});case\"cumulative-from-start\":return new i({start:null,end:s});case\"cumulative-from-end\":return new i({start:s,end:null});case\"instant\":return new i({start:s,end:s})}}async function c(t,e){if(!r(t)&&!l(t))return null;await t.load({signal:e});const n=t?.widgets?.timeSlider;if(!n)return null;const i=await u(t,e),s=n.loop,a=o(n);return{fullTimeExtent:i,loop:s,mode:a,playRate:n.stopDelay??2e3,stops:m(n),timeExtent:f(n,a)}}function d(t){if(!t)return t;const{start:e,end:r}=t;return new i({start:null!=e?n(e,-e.getTimezoneOffset(),\"minutes\"):e,end:null!=r?n(r,-r.getTimezoneOffset(),\"minutes\"):r})}function p(t){if(!t)return t;const{start:e,end:r}=t;return new i({start:null!=e?n(e,e.getTimezoneOffset(),\"minutes\"):e,end:null!=r?n(r,r.getTimezoneOffset(),\"minutes\"):r})}export{a as getTimeExtentFromLayers,c as getTimeSliderSettingsFromWebDocument,p as toLocalTimeExtent,d as toUTCTimeExtent};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}