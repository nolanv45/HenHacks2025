{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from \"../../../../core/Error.js\";\nimport { getJsonType as t, isPoint as i } from \"../../../../geometry/support/jsonUtils.js\";\nimport { wgs84 as s } from \"../../../../geometry/support/spatialReferenceUtils.js\";\nimport { convertFromFeatures as r, convertToFeature as n, convertFromFeature as a } from \"../../featureConversionUtils.js\";\nimport { initialObjectId as o, findLastObjectIdFromFeatures as l } from \"../../objectIdUtils.js\";\nimport { executeQueryForSnapping as u } from \"../../data/executeQueryForSnapping.js\";\nimport d from \"../../data/FeatureStore.js\";\nimport { checkProjectionSupport as p, project as f } from \"../../data/projectionSupport.js\";\nimport { QueryEngine as c } from \"../../data/QueryEngine.js\";\nimport { createDefaultAttributesFunction as y, createDrawingInfo as m, createDefaultTemplate as h } from \"./clientSideDefaults.js\";\nimport { loadGeometryEngineForSimplify as g, createFeatureEditErrorResult as I, mixAttributes as b, createFeatureEditSuccessResult as F, simplify as j, queryBinsCapabilities as E } from \"./sourceUtils.js\";\nimport _ from \"../../../support/FieldsIndex.js\";\nimport { kebabDict as T } from \"../../../support/fieldType.js\";\nimport { getFieldDefaultLength as x, getFieldDefaultValue as R } from \"../../../support/fieldUtils.js\";\nimport { utc as q } from \"../../../../time/timeZoneUtils.js\";\nconst O = s,\n  D = {\n    xmin: -180,\n    ymin: -90,\n    xmax: 180,\n    ymax: 90,\n    spatialReference: s\n  },\n  w = {\n    hasAttachments: !1,\n    capabilities: \"query, editing, create, delete, update\",\n    useStandardizedQueries: !0,\n    supportsCoordinatesQuantization: !0,\n    supportsReturningQueryGeometry: !0,\n    advancedQueryCapabilities: {\n      supportsQueryAttachments: !1,\n      supportsQueryAttachmentOrderByFields: !1,\n      supportsQueryBins: !0,\n      supportsStatistics: !0,\n      supportsPercentileStatistics: !0,\n      supportsReturningGeometryCentroid: !0,\n      supportsQueryWithDistance: !0,\n      supportsDistinct: !0,\n      supportsReturningQueryExtent: !0,\n      supportsReturningGeometryProperties: !1,\n      supportsHavingClause: !0,\n      supportsOrderBy: !0,\n      supportsPagination: !0,\n      supportsQueryWithResultType: !0,\n      supportsSqlExpression: !0,\n      supportsDisjointSpatialRel: !0,\n      supportsQueryWithCacheHint: !0\n    },\n    queryBinsCapabilities: E\n  };\nfunction Q(e) {\n  return i(e) ? null != e.z : !!e.hasZ;\n}\nfunction S(e) {\n  return i(e) ? null != e.m : !!e.hasM;\n}\nclass v {\n  constructor() {\n    this._queryEngine = null, this._nextObjectId = null;\n  }\n  destroy() {\n    this._queryEngine?.destroy(), this._queryEngine = this._createDefaultAttributes = null;\n  }\n  async load(t) {\n    const i = [],\n      {\n        features: s\n      } = t,\n      r = this._inferLayerProperties(s, t.fields),\n      n = t.fields || [],\n      a = null != t.hasM ? t.hasM : !!r.hasM,\n      u = null != t.hasZ ? t.hasZ : !!r.hasZ,\n      f = !t.spatialReference && !r.spatialReference,\n      g = f ? O : t.spatialReference || r.spatialReference,\n      I = f ? D : null,\n      b = t.geometryType || r.geometryType,\n      F = !b;\n    let j = t.objectIdField || r.objectIdField,\n      E = t.timeInfo;\n    const Q = new _(n);\n    if (!F && (f && i.push({\n      name: \"feature-layer:spatial-reference-not-found\",\n      message: \"Spatial reference not provided or found in features. Defaults to WGS84\"\n    }), !b)) throw new e(\"feature-layer:missing-property\", \"geometryType not set and couldn't be inferred from the provided features\");\n    if (!j) throw new e(\"feature-layer:missing-property\", \"objectIdField not set and couldn't be found in the provided fields\");\n    if (r.objectIdField && j !== r.objectIdField && (i.push({\n      name: \"feature-layer:duplicated-oid-field\",\n      message: `Provided objectIdField \"${j}\" doesn't match the field name \"${r.objectIdField}\", found in the provided fields`\n    }), j = r.objectIdField), j && !r.objectIdField) {\n      const e = Q.get(j);\n      e ? (j = e.name, e.type = \"esriFieldTypeOID\", e.editable = !1, e.nullable = !1) : n.unshift({\n        alias: j,\n        name: j,\n        type: \"esriFieldTypeOID\",\n        editable: !1,\n        nullable: !1\n      });\n    }\n    for (const o of n) {\n      if (null == o.name && (o.name = o.alias), null == o.alias && (o.alias = o.name), !o.name) throw new e(\"feature-layer:invalid-field-name\", \"field name is missing\", {\n        field: o\n      });\n      if (o.name === j && (o.type = \"esriFieldTypeOID\"), !T.jsonValues.includes(o.type)) throw new e(\"feature-layer:invalid-field-type\", `invalid type for field \"${o.name}\"`, {\n        field: o\n      });\n      null == o.length && (o.length = x(o));\n    }\n    const S = {};\n    for (const e of n) if (\"esriFieldTypeOID\" !== e.type && \"esriFieldTypeGlobalID\" !== e.type) {\n      const t = R(e);\n      void 0 !== t && (S[e.name] = t);\n    }\n    if (E) {\n      if (E.startTimeField) {\n        const e = Q.get(E.startTimeField);\n        e ? (E.startTimeField = e.name, e.type = \"esriFieldTypeDate\") : E.startTimeField = null;\n      }\n      if (E.endTimeField) {\n        const e = Q.get(E.endTimeField);\n        e ? (E.endTimeField = e.name, e.type = \"esriFieldTypeDate\") : E.endTimeField = null;\n      }\n      if (E.trackIdField) {\n        const e = Q.get(E.trackIdField);\n        e ? E.trackIdField = e.name : (E.trackIdField = null, i.push({\n          name: \"feature-layer:invalid-timeInfo-trackIdField\",\n          message: \"trackIdField is missing\",\n          details: {\n            timeInfo: E\n          }\n        }));\n      }\n      E.startTimeField || E.endTimeField || (i.push({\n        name: \"feature-layer:invalid-timeInfo\",\n        message: \"startTimeField and endTimeField are missing or invalid\",\n        details: {\n          timeInfo: E\n        }\n      }), E = null);\n    }\n    const v = Q.dateFields.length ? {\n      timeZoneIANA: t.dateFieldsTimeZone ?? q\n    } : null;\n    this._createDefaultAttributes = y(S, j);\n    const M = {\n      warnings: i,\n      featureErrors: [],\n      layerDefinition: {\n        ...w,\n        drawingInfo: m(b),\n        templates: h(S),\n        extent: I,\n        geometryType: b,\n        objectIdField: j,\n        fields: n,\n        hasZ: u,\n        hasM: a,\n        timeInfo: E,\n        dateFieldsTimeReference: v\n      },\n      assignedObjectIds: {}\n    };\n    if (this._queryEngine = new c({\n      fieldsIndex: _.fromLayerJSON({\n        fields: n,\n        timeInfo: E,\n        dateFieldsTimeReference: v\n      }),\n      geometryType: b,\n      hasM: a,\n      hasZ: u,\n      objectIdField: j,\n      spatialReference: g,\n      featureStore: new d({\n        geometryType: b,\n        hasM: a,\n        hasZ: u\n      }),\n      timeInfo: E\n    }), !s?.length) return this._nextObjectId = o, M;\n    const Z = l(j, s);\n    return this._nextObjectId = Z + 1, await p(s, g), this._loadInitialFeatures(M, s);\n  }\n  async applyEdits(e) {\n    const {\n      spatialReference: t,\n      geometryType: i\n    } = this._queryEngine;\n    return await Promise.all([g(t, i), p(e.adds, t), p(e.updates, t)]), this._applyEdits(e);\n  }\n  queryFeatures(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return this._queryEngine.executeQuery(e, t.signal);\n  }\n  queryFeatureCount(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return this._queryEngine.executeQueryForCount(e, t.signal);\n  }\n  queryObjectIds(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return this._queryEngine.executeQueryForIds(e, t.signal);\n  }\n  queryExtent(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return this._queryEngine.executeQueryForExtent(e, t.signal);\n  }\n  querySnapping(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return u(this._queryEngine, e, t.signal);\n  }\n  queryAttributeBins(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return this._queryEngine.executeAttributeBinsQuery(e, t.signal);\n  }\n  _inferLayerProperties(e, i) {\n    let s,\n      r,\n      n = null,\n      a = null,\n      o = null;\n    for (const l of e) {\n      const e = l.geometry;\n      if (null != e && (n || (n = t(e)), a || (a = e.spatialReference), null == s && (s = Q(e)), null == r && (r = S(e)), n && a && null != s && null != r)) break;\n    }\n    if (i && i.length) {\n      let e = null;\n      i.some(t => {\n        const i = \"esriFieldTypeOID\" === t.type,\n          s = !t.type && t.name && \"objectid\" === t.name.toLowerCase();\n        return e = t, i || s;\n      }) && (o = e.name);\n    }\n    return {\n      geometryType: n,\n      spatialReference: a,\n      objectIdField: o,\n      hasM: r,\n      hasZ: s\n    };\n  }\n  async _loadInitialFeatures(e, i) {\n    const {\n        geometryType: s,\n        hasM: n,\n        hasZ: a,\n        objectIdField: o,\n        spatialReference: l,\n        featureStore: u,\n        fieldsIndex: d\n      } = this._queryEngine,\n      p = [];\n    for (const r of i) {\n      if (null != r.uid && (e.assignedObjectIds[r.uid] = -1), r.geometry && s !== t(r.geometry)) {\n        e.featureErrors.push(I(\"Incorrect geometry type.\"));\n        continue;\n      }\n      const i = this._createDefaultAttributes(),\n        n = b(d, i, r.attributes, !0);\n      n ? e.featureErrors.push(n) : (this._assignObjectId(i, r.attributes, !0), r.attributes = i, null != r.uid && (e.assignedObjectIds[r.uid] = r.attributes[o]), null != r.geometry && (r.geometry = f(r.geometry, r.geometry.spatialReference, l)), p.push(r));\n    }\n    u.addMany(r([], p, s, a, n, o));\n    const {\n      fullExtent: c,\n      timeExtent: y\n    } = await this._queryEngine.fetchRecomputedExtents();\n    if (e.layerDefinition.extent = c, y) {\n      const {\n        start: t,\n        end: i\n      } = y;\n      e.layerDefinition.timeInfo.timeExtent = [t, i];\n    }\n    return e;\n  }\n  async _applyEdits(e) {\n    const {\n        adds: t,\n        updates: i,\n        deletes: s\n      } = e,\n      r = {\n        addResults: [],\n        deleteResults: [],\n        updateResults: [],\n        uidToObjectId: {}\n      };\n    if (t?.length && this._applyAddEdits(r, t), i?.length && this._applyUpdateEdits(r, i), s?.length) {\n      for (const e of s) r.deleteResults.push(F(e));\n      this._queryEngine.featureStore.removeManyById(s);\n    }\n    const {\n      fullExtent: n,\n      timeExtent: a\n    } = await this._queryEngine.fetchRecomputedExtents();\n    return {\n      extent: n,\n      timeExtent: a,\n      featureEditResults: r\n    };\n  }\n  _applyAddEdits(e, i) {\n    const {\n        addResults: s\n      } = e,\n      {\n        geometryType: n,\n        hasM: a,\n        hasZ: o,\n        objectIdField: l,\n        spatialReference: u,\n        featureStore: d,\n        fieldsIndex: p\n      } = this._queryEngine,\n      c = [];\n    for (const r of i) {\n      if (r.geometry && n !== t(r.geometry)) {\n        s.push(I(\"Incorrect geometry type.\"));\n        continue;\n      }\n      const i = this._createDefaultAttributes(),\n        a = b(p, i, r.attributes);\n      if (a) s.push(a);else {\n        if (this._assignObjectId(i, r.attributes), r.attributes = i, null != r.uid) {\n          const t = r.attributes[l];\n          e.uidToObjectId[r.uid] = t;\n        }\n        if (null != r.geometry) {\n          const e = r.geometry.spatialReference ?? u;\n          r.geometry = f(j(r.geometry, e), e, u);\n        }\n        c.push(r), s.push(F(r.attributes[l]));\n      }\n    }\n    d.addMany(r([], c, n, o, a, l));\n  }\n  _applyUpdateEdits(_ref, i) {\n    let {\n      updateResults: e\n    } = _ref;\n    const {\n      geometryType: s,\n      hasM: r,\n      hasZ: o,\n      objectIdField: l,\n      spatialReference: u,\n      featureStore: d,\n      fieldsIndex: p\n    } = this._queryEngine;\n    for (const c of i) {\n      const {\n          attributes: i,\n          geometry: y\n        } = c,\n        m = i?.[l];\n      if (null == m) {\n        e.push(I(`Identifier field ${l} missing`));\n        continue;\n      }\n      if (!d.has(m)) {\n        e.push(I(`Feature with object id ${m} missing`));\n        continue;\n      }\n      const h = n(d.getFeature(m), s, o, r);\n      if (null != y) {\n        if (s !== t(y)) {\n          e.push(I(\"Incorrect geometry type.\"));\n          continue;\n        }\n        const i = y.spatialReference ?? u;\n        h.geometry = f(j(y, i), i, u);\n      }\n      if (i) {\n        const t = b(p, h.attributes, i);\n        if (t) {\n          e.push(t);\n          continue;\n        }\n      }\n      d.add(a(h, s, o, r, l)), e.push(F(m));\n    }\n  }\n  _assignObjectId(e, t) {\n    let i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;\n    const s = this._queryEngine.objectIdField;\n    i && t && isFinite(t[s]) ? e[s] = t[s] : e[s] = this._nextObjectId++;\n  }\n}\nexport { v as default };","map":{"version":3,"names":["e","getJsonType","t","isPoint","i","wgs84","s","convertFromFeatures","r","convertToFeature","n","convertFromFeature","a","initialObjectId","o","findLastObjectIdFromFeatures","l","executeQueryForSnapping","u","d","checkProjectionSupport","p","project","f","QueryEngine","c","createDefaultAttributesFunction","y","createDrawingInfo","m","createDefaultTemplate","h","loadGeometryEngineForSimplify","g","createFeatureEditErrorResult","I","mixAttributes","b","createFeatureEditSuccessResult","F","simplify","j","queryBinsCapabilities","E","_","kebabDict","T","getFieldDefaultLength","x","getFieldDefaultValue","R","utc","q","O","D","xmin","ymin","xmax","ymax","spatialReference","w","hasAttachments","capabilities","useStandardizedQueries","supportsCoordinatesQuantization","supportsReturningQueryGeometry","advancedQueryCapabilities","supportsQueryAttachments","supportsQueryAttachmentOrderByFields","supportsQueryBins","supportsStatistics","supportsPercentileStatistics","supportsReturningGeometryCentroid","supportsQueryWithDistance","supportsDistinct","supportsReturningQueryExtent","supportsReturningGeometryProperties","supportsHavingClause","supportsOrderBy","supportsPagination","supportsQueryWithResultType","supportsSqlExpression","supportsDisjointSpatialRel","supportsQueryWithCacheHint","Q","z","hasZ","S","hasM","v","constructor","_queryEngine","_nextObjectId","destroy","_createDefaultAttributes","load","features","_inferLayerProperties","fields","geometryType","objectIdField","timeInfo","push","name","message","get","type","editable","nullable","unshift","alias","field","jsonValues","includes","length","startTimeField","endTimeField","trackIdField","details","dateFields","timeZoneIANA","dateFieldsTimeZone","M","warnings","featureErrors","layerDefinition","drawingInfo","templates","extent","dateFieldsTimeReference","assignedObjectIds","fieldsIndex","fromLayerJSON","featureStore","Z","_loadInitialFeatures","applyEdits","Promise","all","adds","updates","_applyEdits","queryFeatures","arguments","undefined","executeQuery","signal","queryFeatureCount","executeQueryForCount","queryObjectIds","executeQueryForIds","queryExtent","executeQueryForExtent","querySnapping","queryAttributeBins","executeAttributeBinsQuery","geometry","some","toLowerCase","uid","attributes","_assignObjectId","addMany","fullExtent","timeExtent","fetchRecomputedExtents","start","end","deletes","addResults","deleteResults","updateResults","uidToObjectId","_applyAddEdits","_applyUpdateEdits","removeManyById","featureEditResults","_ref","has","getFeature","add","isFinite","default"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/layers/graphics/sources/support/MemorySourceWorker.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import{getJsonType as t,isPoint as i}from\"../../../../geometry/support/jsonUtils.js\";import{wgs84 as s}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{convertFromFeatures as r,convertToFeature as n,convertFromFeature as a}from\"../../featureConversionUtils.js\";import{initialObjectId as o,findLastObjectIdFromFeatures as l}from\"../../objectIdUtils.js\";import{executeQueryForSnapping as u}from\"../../data/executeQueryForSnapping.js\";import d from\"../../data/FeatureStore.js\";import{checkProjectionSupport as p,project as f}from\"../../data/projectionSupport.js\";import{QueryEngine as c}from\"../../data/QueryEngine.js\";import{createDefaultAttributesFunction as y,createDrawingInfo as m,createDefaultTemplate as h}from\"./clientSideDefaults.js\";import{loadGeometryEngineForSimplify as g,createFeatureEditErrorResult as I,mixAttributes as b,createFeatureEditSuccessResult as F,simplify as j,queryBinsCapabilities as E}from\"./sourceUtils.js\";import _ from\"../../../support/FieldsIndex.js\";import{kebabDict as T}from\"../../../support/fieldType.js\";import{getFieldDefaultLength as x,getFieldDefaultValue as R}from\"../../../support/fieldUtils.js\";import{utc as q}from\"../../../../time/timeZoneUtils.js\";const O=s,D={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:s},w={hasAttachments:!1,capabilities:\"query, editing, create, delete, update\",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsQueryAttachmentOrderByFields:!1,supportsQueryBins:!0,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!0,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0,supportsQueryWithCacheHint:!0},queryBinsCapabilities:E};function Q(e){return i(e)?null!=e.z:!!e.hasZ}function S(e){return i(e)?null!=e.m:!!e.hasM}class v{constructor(){this._queryEngine=null,this._nextObjectId=null}destroy(){this._queryEngine?.destroy(),this._queryEngine=this._createDefaultAttributes=null}async load(t){const i=[],{features:s}=t,r=this._inferLayerProperties(s,t.fields),n=t.fields||[],a=null!=t.hasM?t.hasM:!!r.hasM,u=null!=t.hasZ?t.hasZ:!!r.hasZ,f=!t.spatialReference&&!r.spatialReference,g=f?O:t.spatialReference||r.spatialReference,I=f?D:null,b=t.geometryType||r.geometryType,F=!b;let j=t.objectIdField||r.objectIdField,E=t.timeInfo;const Q=new _(n);if(!F&&(f&&i.push({name:\"feature-layer:spatial-reference-not-found\",message:\"Spatial reference not provided or found in features. Defaults to WGS84\"}),!b))throw new e(\"feature-layer:missing-property\",\"geometryType not set and couldn't be inferred from the provided features\");if(!j)throw new e(\"feature-layer:missing-property\",\"objectIdField not set and couldn't be found in the provided fields\");if(r.objectIdField&&j!==r.objectIdField&&(i.push({name:\"feature-layer:duplicated-oid-field\",message:`Provided objectIdField \"${j}\" doesn't match the field name \"${r.objectIdField}\", found in the provided fields`}),j=r.objectIdField),j&&!r.objectIdField){const e=Q.get(j);e?(j=e.name,e.type=\"esriFieldTypeOID\",e.editable=!1,e.nullable=!1):n.unshift({alias:j,name:j,type:\"esriFieldTypeOID\",editable:!1,nullable:!1})}for(const o of n){if(null==o.name&&(o.name=o.alias),null==o.alias&&(o.alias=o.name),!o.name)throw new e(\"feature-layer:invalid-field-name\",\"field name is missing\",{field:o});if(o.name===j&&(o.type=\"esriFieldTypeOID\"),!T.jsonValues.includes(o.type))throw new e(\"feature-layer:invalid-field-type\",`invalid type for field \"${o.name}\"`,{field:o});null==o.length&&(o.length=x(o))}const S={};for(const e of n)if(\"esriFieldTypeOID\"!==e.type&&\"esriFieldTypeGlobalID\"!==e.type){const t=R(e);void 0!==t&&(S[e.name]=t)}if(E){if(E.startTimeField){const e=Q.get(E.startTimeField);e?(E.startTimeField=e.name,e.type=\"esriFieldTypeDate\"):E.startTimeField=null}if(E.endTimeField){const e=Q.get(E.endTimeField);e?(E.endTimeField=e.name,e.type=\"esriFieldTypeDate\"):E.endTimeField=null}if(E.trackIdField){const e=Q.get(E.trackIdField);e?E.trackIdField=e.name:(E.trackIdField=null,i.push({name:\"feature-layer:invalid-timeInfo-trackIdField\",message:\"trackIdField is missing\",details:{timeInfo:E}}))}E.startTimeField||E.endTimeField||(i.push({name:\"feature-layer:invalid-timeInfo\",message:\"startTimeField and endTimeField are missing or invalid\",details:{timeInfo:E}}),E=null)}const v=Q.dateFields.length?{timeZoneIANA:t.dateFieldsTimeZone??q}:null;this._createDefaultAttributes=y(S,j);const M={warnings:i,featureErrors:[],layerDefinition:{...w,drawingInfo:m(b),templates:h(S),extent:I,geometryType:b,objectIdField:j,fields:n,hasZ:u,hasM:a,timeInfo:E,dateFieldsTimeReference:v},assignedObjectIds:{}};if(this._queryEngine=new c({fieldsIndex:_.fromLayerJSON({fields:n,timeInfo:E,dateFieldsTimeReference:v}),geometryType:b,hasM:a,hasZ:u,objectIdField:j,spatialReference:g,featureStore:new d({geometryType:b,hasM:a,hasZ:u}),timeInfo:E}),!s?.length)return this._nextObjectId=o,M;const Z=l(j,s);return this._nextObjectId=Z+1,await p(s,g),this._loadInitialFeatures(M,s)}async applyEdits(e){const{spatialReference:t,geometryType:i}=this._queryEngine;return await Promise.all([g(t,i),p(e.adds,t),p(e.updates,t)]),this._applyEdits(e)}queryFeatures(e,t={}){return this._queryEngine.executeQuery(e,t.signal)}queryFeatureCount(e,t={}){return this._queryEngine.executeQueryForCount(e,t.signal)}queryObjectIds(e,t={}){return this._queryEngine.executeQueryForIds(e,t.signal)}queryExtent(e,t={}){return this._queryEngine.executeQueryForExtent(e,t.signal)}querySnapping(e,t={}){return u(this._queryEngine,e,t.signal)}queryAttributeBins(e,t={}){return this._queryEngine.executeAttributeBinsQuery(e,t.signal)}_inferLayerProperties(e,i){let s,r,n=null,a=null,o=null;for(const l of e){const e=l.geometry;if(null!=e&&(n||(n=t(e)),a||(a=e.spatialReference),null==s&&(s=Q(e)),null==r&&(r=S(e)),n&&a&&null!=s&&null!=r))break}if(i&&i.length){let e=null;i.some((t=>{const i=\"esriFieldTypeOID\"===t.type,s=!t.type&&t.name&&\"objectid\"===t.name.toLowerCase();return e=t,i||s}))&&(o=e.name)}return{geometryType:n,spatialReference:a,objectIdField:o,hasM:r,hasZ:s}}async _loadInitialFeatures(e,i){const{geometryType:s,hasM:n,hasZ:a,objectIdField:o,spatialReference:l,featureStore:u,fieldsIndex:d}=this._queryEngine,p=[];for(const r of i){if(null!=r.uid&&(e.assignedObjectIds[r.uid]=-1),r.geometry&&s!==t(r.geometry)){e.featureErrors.push(I(\"Incorrect geometry type.\"));continue}const i=this._createDefaultAttributes(),n=b(d,i,r.attributes,!0);n?e.featureErrors.push(n):(this._assignObjectId(i,r.attributes,!0),r.attributes=i,null!=r.uid&&(e.assignedObjectIds[r.uid]=r.attributes[o]),null!=r.geometry&&(r.geometry=f(r.geometry,r.geometry.spatialReference,l)),p.push(r))}u.addMany(r([],p,s,a,n,o));const{fullExtent:c,timeExtent:y}=await this._queryEngine.fetchRecomputedExtents();if(e.layerDefinition.extent=c,y){const{start:t,end:i}=y;e.layerDefinition.timeInfo.timeExtent=[t,i]}return e}async _applyEdits(e){const{adds:t,updates:i,deletes:s}=e,r={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(t?.length&&this._applyAddEdits(r,t),i?.length&&this._applyUpdateEdits(r,i),s?.length){for(const e of s)r.deleteResults.push(F(e));this._queryEngine.featureStore.removeManyById(s)}const{fullExtent:n,timeExtent:a}=await this._queryEngine.fetchRecomputedExtents();return{extent:n,timeExtent:a,featureEditResults:r}}_applyAddEdits(e,i){const{addResults:s}=e,{geometryType:n,hasM:a,hasZ:o,objectIdField:l,spatialReference:u,featureStore:d,fieldsIndex:p}=this._queryEngine,c=[];for(const r of i){if(r.geometry&&n!==t(r.geometry)){s.push(I(\"Incorrect geometry type.\"));continue}const i=this._createDefaultAttributes(),a=b(p,i,r.attributes);if(a)s.push(a);else{if(this._assignObjectId(i,r.attributes),r.attributes=i,null!=r.uid){const t=r.attributes[l];e.uidToObjectId[r.uid]=t}if(null!=r.geometry){const e=r.geometry.spatialReference??u;r.geometry=f(j(r.geometry,e),e,u)}c.push(r),s.push(F(r.attributes[l]))}}d.addMany(r([],c,n,o,a,l))}_applyUpdateEdits({updateResults:e},i){const{geometryType:s,hasM:r,hasZ:o,objectIdField:l,spatialReference:u,featureStore:d,fieldsIndex:p}=this._queryEngine;for(const c of i){const{attributes:i,geometry:y}=c,m=i?.[l];if(null==m){e.push(I(`Identifier field ${l} missing`));continue}if(!d.has(m)){e.push(I(`Feature with object id ${m} missing`));continue}const h=n(d.getFeature(m),s,o,r);if(null!=y){if(s!==t(y)){e.push(I(\"Incorrect geometry type.\"));continue}const i=y.spatialReference??u;h.geometry=f(j(y,i),i,u)}if(i){const t=b(p,h.attributes,i);if(t){e.push(t);continue}}d.add(a(h,s,o,r,l)),e.push(F(m))}}_assignObjectId(e,t,i=!1){const s=this._queryEngine.objectIdField;i&&t&&isFinite(t[s])?e[s]=t[s]:e[s]=this._nextObjectId++}}export{v as default};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}