{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { clamp as t } from \"../../../../../core/mathUtils.js\";\nimport { StaticBitSet as s } from \"../../../layers/features/support/StaticBitSet.js\";\nconst i = 1,\n  e = 0,\n  h = 1,\n  o = 2;\nclass r {\n  constructor(t, e, h) {\n    this._width = t * h, this._height = e * h, this._pixelRatio = h;\n    const o = Math.ceil(this._width / i),\n      r = Math.ceil(this._height / i);\n    this._cols = o, this._rows = r, this._cells = s.create(o * r);\n  }\n  insertMetrics(t) {\n    this._markMetrics(t);\n  }\n  hasCollision(t) {\n    let s = 0;\n    for (const {\n      transformedX: i,\n      transformedY: e,\n      width: r,\n      height: l\n    } of t.bounds) {\n      const t = r * this._pixelRatio,\n        a = l * this._pixelRatio,\n        c = i * this._pixelRatio,\n        _ = e * this._pixelRatio;\n      switch (this._collide(c, _, t, a)) {\n        case o:\n          return o;\n        case h:\n          s++;\n      }\n    }\n    return s === t.bounds.length ? h : e;\n  }\n  getCellId(t, s) {\n    return t + s * this._cols;\n  }\n  has(t) {\n    return this._cells.has(t);\n  }\n  hasRange(t, s) {\n    return this._cells.hasRange(t, s);\n  }\n  set(t) {\n    this._cells.set(t);\n  }\n  setRange(t, s) {\n    this._cells.setRange(t, s);\n  }\n  _collide(s, r, l, a) {\n    const c = s - l / 2,\n      _ = r - a / 2,\n      n = c + l,\n      f = _ + a;\n    if (n < 0 || f < 0 || c > this._width || _ > this._height) return h;\n    const d = t(Math.floor(c / i), 0, this._cols),\n      u = t(Math.floor(_ / i), 0, this._rows),\n      p = t(Math.ceil(n / i), 0, this._cols),\n      g = t(Math.ceil(f / i), 0, this._rows);\n    for (let t = u; t <= g; t++) for (let s = d; s <= p; s++) {\n      const i = this.getCellId(s, t);\n      if (this.has(i)) return o;\n    }\n    return e;\n  }\n  _mark(s, e, h, o) {\n    const r = s - h / 2,\n      l = e - o / 2,\n      a = r + h,\n      c = l + o,\n      _ = t(Math.floor(r / i), 0, this._cols),\n      n = t(Math.floor(l / i), 0, this._rows),\n      f = t(Math.ceil(a / i), 0, this._cols),\n      d = t(Math.ceil(c / i), 0, this._rows);\n    for (let t = n; t <= d; t++) for (let s = _; s <= f; s++) {\n      const i = this.getCellId(s, t);\n      this.set(i);\n    }\n    return !1;\n  }\n  _markMetrics(t) {\n    for (const {\n      transformedX: s,\n      transformedY: i,\n      width: e,\n      height: h\n    } of t.bounds) {\n      const t = e * this._pixelRatio,\n        o = h * this._pixelRatio,\n        r = s * this._pixelRatio,\n        l = i * this._pixelRatio;\n      this._mark(r, l, t, o);\n    }\n  }\n}\nexport { r as CollisionBitsetGrid, o as hasCollision, e as none, h as outsideExtent };","map":{"version":3,"names":["clamp","t","StaticBitSet","s","i","e","h","o","r","constructor","_width","_height","_pixelRatio","Math","ceil","_cols","_rows","_cells","create","insertMetrics","_markMetrics","hasCollision","transformedX","transformedY","width","height","l","bounds","a","c","_","_collide","length","getCellId","has","hasRange","set","setRange","n","f","d","floor","u","p","g","_mark","CollisionBitsetGrid","none","outsideExtent"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/engine/webgl/collisions/CollisionGrid.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../../../../core/mathUtils.js\";import{StaticBitSet as s}from\"../../../layers/features/support/StaticBitSet.js\";const i=1,e=0,h=1,o=2;class r{constructor(t,e,h){this._width=t*h,this._height=e*h,this._pixelRatio=h;const o=Math.ceil(this._width/i),r=Math.ceil(this._height/i);this._cols=o,this._rows=r,this._cells=s.create(o*r)}insertMetrics(t){this._markMetrics(t)}hasCollision(t){let s=0;for(const{transformedX:i,transformedY:e,width:r,height:l}of t.bounds){const t=r*this._pixelRatio,a=l*this._pixelRatio,c=i*this._pixelRatio,_=e*this._pixelRatio;switch(this._collide(c,_,t,a)){case o:return o;case h:s++}}return s===t.bounds.length?h:e}getCellId(t,s){return t+s*this._cols}has(t){return this._cells.has(t)}hasRange(t,s){return this._cells.hasRange(t,s)}set(t){this._cells.set(t)}setRange(t,s){this._cells.setRange(t,s)}_collide(s,r,l,a){const c=s-l/2,_=r-a/2,n=c+l,f=_+a;if(n<0||f<0||c>this._width||_>this._height)return h;const d=t(Math.floor(c/i),0,this._cols),u=t(Math.floor(_/i),0,this._rows),p=t(Math.ceil(n/i),0,this._cols),g=t(Math.ceil(f/i),0,this._rows);for(let t=u;t<=g;t++)for(let s=d;s<=p;s++){const i=this.getCellId(s,t);if(this.has(i))return o}return e}_mark(s,e,h,o){const r=s-h/2,l=e-o/2,a=r+h,c=l+o,_=t(Math.floor(r/i),0,this._cols),n=t(Math.floor(l/i),0,this._rows),f=t(Math.ceil(a/i),0,this._cols),d=t(Math.ceil(c/i),0,this._rows);for(let t=n;t<=d;t++)for(let s=_;s<=f;s++){const i=this.getCellId(s,t);this.set(i)}return!1}_markMetrics(t){for(const{transformedX:s,transformedY:i,width:e,height:h}of t.bounds){const t=e*this._pixelRatio,o=h*this._pixelRatio,r=s*this._pixelRatio,l=i*this._pixelRatio;this._mark(r,l,t,o)}}}export{r as CollisionBitsetGrid,o as hasCollision,e as none,h as outsideExtent};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}