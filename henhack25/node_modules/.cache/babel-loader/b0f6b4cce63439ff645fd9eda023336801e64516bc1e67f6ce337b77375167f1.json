{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport \"../../core/has.js\";\nimport t from \"../../core/Logger.js\";\nimport { disposeMaybe as e } from \"../../core/maybe.js\";\nimport { BufferObject as i } from \"./BufferObject.js\";\nimport { webglDebugEnabled as r } from \"./checkWebGLError.js\";\nimport { ResourceType as s, ColorAttachment as n, PixelFormat as h, PixelType as o, DepthStencilAttachment as c, FramebufferTarget as a, TextureType as u, Usage as _, BufferType as f, RenderbufferFormat as l } from \"./enums.js\";\nimport { GLObjectType as T } from \"./GLObjectType.js\";\nimport { Renderbuffer as d } from \"./Renderbuffer.js\";\nimport { Texture as m } from \"./Texture.js\";\nconst p = () => t.getLogger(\"esri.views.webgl.FramebufferObject\");\nclass x {\n  constructor(t, e) {\n    let i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    this._context = t, this._glName = null, this._colorAttachments = new Map(), this._depthStencilBuffer = null, this._depthStencilTexture = null, this._initialized = !1, t.instanceCounter.increment(s.FramebufferObject, this);\n    const r = E(e) ? e : new m(this._context, e);\n    if (this._colorAttachments.set(n.COLOR_ATTACHMENT0, r), this._validateTextureDescriptor(r.descriptor), this._validateColorAttachmentPoint(n.COLOR_ATTACHMENT0), null != i) if (b(i)) this._depthStencilTexture = E(i) ? i : new m(this._context, i), this._validateTextureDescriptor(this._depthStencilTexture.descriptor);else {\n      const t = g(i) ? i : new d(this._context, i);\n      this._depthStencilBuffer = t, this._validateRenderBufferDescriptor(t.descriptor);\n    }\n  }\n  dispose() {\n    if (0 === this._colorAttachments.size && !this._glName) return;\n    const t = this._context.getBoundFramebufferObject();\n    if (this._colorAttachments.forEach((t, e) => this.detachColorTexture(e)?.dispose()), this.detachDepthStencilBuffer()?.dispose(), this.detachDepthStencilTexture()?.dispose(), this._glName) {\n      this._context.gl.deleteFramebuffer(this._glName), this._glName = null;\n    }\n    this._context.bindFramebuffer(t), this._context.instanceCounter.decrement(s.FramebufferObject, this);\n  }\n  get glName() {\n    return this._glName;\n  }\n  get colorTexture() {\n    return this._colorAttachments.get(n.COLOR_ATTACHMENT0);\n  }\n  get depthStencil() {\n    return this._depthStencilTexture || this._depthStencilBuffer;\n  }\n  get depthStencilTexture() {\n    return this._depthStencilTexture;\n  }\n  get width() {\n    const t = this._colorAttachments.get(n.COLOR_ATTACHMENT0);\n    return t?.descriptor?.width ?? 0;\n  }\n  get height() {\n    const t = this._colorAttachments.get(n.COLOR_ATTACHMENT0);\n    return t?.descriptor?.height ?? 0;\n  }\n  get usedMemory() {\n    return [...this._colorAttachments].reduce((t, _ref) => {\n      let [e, i] = _ref;\n      return t + i.usedMemory;\n    }, this.depthStencil?.usedMemory ?? 0);\n  }\n  getColorTexture(t) {\n    const e = this._colorAttachments.get(t);\n    return e && E(e) ? e : null;\n  }\n  get colorAttachments() {\n    return [...this._colorAttachments.keys()];\n  }\n  attachColorTexture(t) {\n    let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : n.COLOR_ATTACHMENT0;\n    if (!t) return;\n    this._validateColorAttachmentPoint(e);\n    const i = t.descriptor;\n    this._validateTextureDescriptor(i), this.detachColorTexture(e)?.dispose(), this._initialized && (this._context.bindFramebuffer(this), this._framebufferTexture2D(t.glName, e)), this._colorAttachments.set(e, t);\n  }\n  detachColorTexture() {\n    let t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : n.COLOR_ATTACHMENT0;\n    const e = this._colorAttachments.get(t);\n    if (e) {\n      if (this._initialized) {\n        const e = this._context.getBoundFramebufferObject();\n        this._context.bindFramebuffer(this), this._framebufferTexture2D(null, t), this._context.bindFramebuffer(e);\n      }\n      return this._colorAttachments.delete(t), e;\n    }\n  }\n  setColorTextureTarget(t) {\n    let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : n.COLOR_ATTACHMENT0;\n    const i = this._colorAttachments.get(e);\n    i && this._framebufferTexture2D(i.glName, e, t);\n  }\n  attachDepthStencil(t) {\n    if (t) switch (t.type) {\n      case T.Texture:\n        return this._attachDepthStencilTexture(t);\n      case T.RenderBuffer:\n        return this._attachDepthStencilBuffer(t);\n    }\n  }\n  _attachDepthStencilTexture(t) {\n    if (null == t) return;\n    const e = t.descriptor;\n    e.pixelFormat !== h.DEPTH_STENCIL && e.pixelFormat !== h.DEPTH24_STENCIL8 && console.error(\"Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!\"), e.dataType !== o.UNSIGNED_INT_24_8 && console.error(\"Depth/Stencil texture must have data type of UNSIGNED_INT_24_8!\"), this._validateTextureDescriptor(e), this._disposeDepthStencilAttachments(), this._initialized && (this._context.bindFramebuffer(this), this._framebufferTexture2D(t.glName, c)), this._depthStencilTexture?.dispose(), this._depthStencilTexture = t;\n  }\n  detachDepthStencilTexture() {\n    const t = this._depthStencilTexture;\n    if (t && this._initialized) {\n      const t = this._context.getBoundFramebufferObject();\n      this._context.bindFramebuffer(this), this._framebufferTexture2D(null, c), this._context.bindFramebuffer(t);\n    }\n    return this._depthStencilTexture = null, t;\n  }\n  _attachDepthStencilBuffer(t) {\n    if (null == t) return;\n    const e = t.descriptor;\n    if (this._validateRenderBufferDescriptor(e), this._disposeDepthStencilAttachments(), this._initialized) {\n      this._context.bindFramebuffer(this);\n      const i = this._context.gl,\n        r = this._getGLAttachmentPoint(e);\n      i.framebufferRenderbuffer(a.FRAMEBUFFER, r, i.RENDERBUFFER, t.glName);\n    }\n    this._depthStencilBuffer = t;\n  }\n  detachDepthStencilBuffer() {\n    const t = this._depthStencilBuffer;\n    if (t && this._initialized) {\n      const e = this._context.getBoundFramebufferObject();\n      this._context.bindFramebuffer(this);\n      const i = this._context.gl,\n        r = this._getGLAttachmentPoint(t.descriptor);\n      i.framebufferRenderbuffer(a.FRAMEBUFFER, r, i.RENDERBUFFER, null), this._context.bindFramebuffer(e);\n    }\n    return this._depthStencilBuffer = null, t;\n  }\n  copyToTexture(t, e, i, r, s, n, h) {\n    (t < 0 || e < 0 || s < 0 || n < 0) && console.error(\"Offsets cannot be negative!\"), (i <= 0 || r <= 0) && console.error(\"Copy width and height must be greater than zero!\");\n    const o = h.descriptor;\n    h.descriptor.target !== u.TEXTURE_2D && console.error(\"Texture target must be TEXTURE_2D!\"), (null == o?.width || null == o?.height || t + i > this.width || e + r > this.height || s + i > o.width || n + r > o.height) && console.error(\"Bad dimensions, the current input values will attempt to read or copy out of bounds!\");\n    const c = this._context,\n      a = c.bindTexture(h, m.TEXTURE_UNIT_FOR_UPDATES);\n    c.setActiveTexture(m.TEXTURE_UNIT_FOR_UPDATES), c.bindFramebuffer(this), c.gl.copyTexSubImage2D(u.TEXTURE_2D, 0, s, n, t, e, i, r), c.bindTexture(a, m.TEXTURE_UNIT_FOR_UPDATES);\n  }\n  readPixels(t, e, i, r, s, n, h) {\n    (i <= 0 || r <= 0) && console.error(\"Copy width and height must be greater than zero!\"), h || console.error(\"Target memory is not initialized!\"), this._context.bindFramebuffer(this), this._context.gl.readPixels(t, e, i, r, s, n, h);\n  }\n  async readPixelsAsync(t, e, r, s, n, h, o) {\n    const {\n        gl: c\n      } = this._context,\n      a = i.createPixelPack(this._context, _.STREAM_READ, o.byteLength);\n    this._context.bindBuffer(a);\n    const u = this._context.getBoundFramebufferObject();\n    this._context.bindFramebuffer(this), c.readPixels(t, e, r, s, n, h, 0), this._context.unbindBuffer(f.PIXEL_PACK_BUFFER), this._context.bindFramebuffer(u), await a.getSubDataAsync(o), a.dispose();\n  }\n  resize(t, e) {\n    if (this.width === t && this.height === e) return;\n    const i = {\n      width: t,\n      height: e\n    };\n    A(i, this._context.parameters.maxTextureSize), this._colorAttachments.forEach(t => t.resize(i.width, i.height)), this._depthStencilTexture?.resize(i.width, i.height), this._initialized && (A(i, this._context.parameters.maxRenderbufferSize), this._depthStencilBuffer?.resize(i.width, i.height), this._context.getBoundFramebufferObject() === this && this._context.bindFramebuffer(null), this._initialized = !1);\n  }\n  initializeAndBind() {\n    let t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : a.FRAMEBUFFER;\n    const e = this._context.gl;\n    if (this._initialized) return void e.bindFramebuffer(t, this.glName);\n    this._glName && e.deleteFramebuffer(this._glName);\n    const i = e.createFramebuffer();\n    if (e.bindFramebuffer(t, i), this._colorAttachments.forEach((e, i) => this._framebufferTexture2D(e.glName, i, S(e), t)), this._depthStencilBuffer) {\n      const i = this._getGLAttachmentPoint(this._depthStencilBuffer.descriptor);\n      e.framebufferRenderbuffer(t, i, e.RENDERBUFFER, this._depthStencilBuffer.glName);\n    } else this._depthStencilTexture && this._framebufferTexture2D(this._depthStencilTexture.glName, e.DEPTH_STENCIL_ATTACHMENT, S(this._depthStencilTexture), t);\n    if (r()) {\n      e.checkFramebufferStatus(t) !== e.FRAMEBUFFER_COMPLETE && console.error(\"Framebuffer is incomplete!\");\n    }\n    this._glName = i, this._initialized = !0;\n  }\n  _framebufferTexture2D(t) {\n    let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : n.COLOR_ATTACHMENT0;\n    let i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : u.TEXTURE_2D;\n    let r = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : a.FRAMEBUFFER;\n    let s = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n    this._context.gl.framebufferTexture2D(r, e, i, t, s);\n  }\n  _disposeDepthStencilAttachments() {\n    const t = this._context.gl;\n    if (this._depthStencilBuffer) {\n      if (this._initialized) {\n        this._context.bindFramebuffer(this);\n        const e = this._getGLAttachmentPoint(this._depthStencilBuffer.descriptor);\n        t.framebufferRenderbuffer(a.FRAMEBUFFER, e, t.RENDERBUFFER, null);\n      }\n      this._depthStencilBuffer = e(this._depthStencilBuffer);\n    }\n    this._depthStencilTexture && (this._initialized && (this._context.bindFramebuffer(this), this._framebufferTexture2D(null, t.DEPTH_STENCIL_ATTACHMENT)), this._depthStencilTexture = e(this._depthStencilTexture));\n  }\n  _validateTextureDescriptor(t) {\n    t.target !== u.TEXTURE_2D && t.target !== u.TEXTURE_CUBE_MAP && console.error(\"Texture type must be TEXTURE_2D or TEXTURE_CUBE_MAP!\"), A(t, this._context.parameters.maxTextureSize), this._validateBufferDimensions(t);\n  }\n  _validateRenderBufferDescriptor(t) {\n    A(t, this._context.parameters.maxRenderbufferSize), this._validateBufferDimensions(t);\n  }\n  _validateBufferDimensions(t) {\n    t.width <= 0 && (t.width = this.width), t.height <= 0 && (t.height = this.height), this.width > 0 && this.height > 0 && (this.width === t.width && this.height === t.height || console.error(\"Attachment size must match framebuffer size!\"));\n  }\n  _getGLAttachmentPoint(t) {\n    switch (t.internalFormat) {\n      case l.DEPTH_COMPONENT16:\n      case l.DEPTH_COMPONENT24:\n      case l.DEPTH_COMPONENT32F:\n        return this._context.gl.DEPTH_ATTACHMENT;\n      case l.DEPTH24_STENCIL8:\n      case l.DEPTH32F_STENCIL8:\n      case l.DEPTH_STENCIL:\n        return this._context.gl.DEPTH_STENCIL_ATTACHMENT;\n      case l.STENCIL_INDEX8:\n        return this._context.gl.STENCIL_ATTACHMENT;\n    }\n  }\n  _validateColorAttachmentPoint(e) {\n    if (-1 === x._MAX_COLOR_ATTACHMENTS) {\n      const {\n        gl: t\n      } = this._context;\n      x._MAX_COLOR_ATTACHMENTS = t.getParameter(t.MAX_COLOR_ATTACHMENTS);\n    }\n    const i = e - n.COLOR_ATTACHMENT0;\n    i + 1 > x._MAX_COLOR_ATTACHMENTS && t.getLogger(\"esri.views.webgl.FrameBufferObject\").error(\"esri.FrameBufferObject\", `illegal attachment point for color attachment: ${i + 1}. Implementation supports up to ${x._MAX_COLOR_ATTACHMENTS} color attachments`);\n  }\n}\nfunction E(t) {\n  return null != t && \"type\" in t && t.type === T.Texture;\n}\nfunction g(t) {\n  return null != t && \"type\" in t && t.type === T.RenderBuffer;\n}\nfunction b(t) {\n  return E(t) || null != t && \"pixelFormat\" in t;\n}\nfunction A(t, e) {\n  const i = Math.max(t.width, t.height);\n  if (i > e) {\n    p().warn(`Resizing FBO attachment size ${t.width}x${t.height} to device limit ${e}`);\n    const r = e / i;\n    return t.width = Math.round(t.width * r), t.height = Math.round(t.height * r), !1;\n  }\n  return !0;\n}\nfunction S(t) {\n  return t.descriptor.target === u.TEXTURE_CUBE_MAP ? u.TEXTURE_CUBE_MAP_POSITIVE_X : u.TEXTURE_2D;\n}\nx._MAX_COLOR_ATTACHMENTS = -1;\nexport { x as FramebufferObject, A as ensureAttachmentMaxSize };","map":{"version":3,"names":["t","disposeMaybe","e","BufferObject","i","webglDebugEnabled","r","ResourceType","s","ColorAttachment","n","PixelFormat","h","PixelType","o","DepthStencilAttachment","c","FramebufferTarget","a","TextureType","u","Usage","_","BufferType","f","RenderbufferFormat","l","GLObjectType","T","Renderbuffer","d","Texture","m","p","getLogger","x","constructor","arguments","length","undefined","_context","_glName","_colorAttachments","Map","_depthStencilBuffer","_depthStencilTexture","_initialized","instanceCounter","increment","FramebufferObject","E","set","COLOR_ATTACHMENT0","_validateTextureDescriptor","descriptor","_validateColorAttachmentPoint","b","g","_validateRenderBufferDescriptor","dispose","size","getBoundFramebufferObject","forEach","detachColorTexture","detachDepthStencilBuffer","detachDepthStencilTexture","gl","deleteFramebuffer","bindFramebuffer","decrement","glName","colorTexture","get","depthStencil","depthStencilTexture","width","height","usedMemory","reduce","_ref","getColorTexture","colorAttachments","keys","attachColorTexture","_framebufferTexture2D","delete","setColorTextureTarget","attachDepthStencil","type","_attachDepthStencilTexture","RenderBuffer","_attachDepthStencilBuffer","pixelFormat","DEPTH_STENCIL","DEPTH24_STENCIL8","console","error","dataType","UNSIGNED_INT_24_8","_disposeDepthStencilAttachments","_getGLAttachmentPoint","framebufferRenderbuffer","FRAMEBUFFER","RENDERBUFFER","copyToTexture","target","TEXTURE_2D","bindTexture","TEXTURE_UNIT_FOR_UPDATES","setActiveTexture","copyTexSubImage2D","readPixels","readPixelsAsync","createPixelPack","STREAM_READ","byteLength","bindBuffer","unbindBuffer","PIXEL_PACK_BUFFER","getSubDataAsync","resize","A","parameters","maxTextureSize","maxRenderbufferSize","initializeAndBind","createFramebuffer","S","DEPTH_STENCIL_ATTACHMENT","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","framebufferTexture2D","TEXTURE_CUBE_MAP","_validateBufferDimensions","internalFormat","DEPTH_COMPONENT16","DEPTH_COMPONENT24","DEPTH_COMPONENT32F","DEPTH_ATTACHMENT","DEPTH32F_STENCIL8","STENCIL_INDEX8","STENCIL_ATTACHMENT","_MAX_COLOR_ATTACHMENTS","getParameter","MAX_COLOR_ATTACHMENTS","Math","max","warn","round","TEXTURE_CUBE_MAP_POSITIVE_X","ensureAttachmentMaxSize"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/webgl/FramebufferObject.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport\"../../core/has.js\";import t from\"../../core/Logger.js\";import{disposeMaybe as e}from\"../../core/maybe.js\";import{BufferObject as i}from\"./BufferObject.js\";import{webglDebugEnabled as r}from\"./checkWebGLError.js\";import{ResourceType as s,ColorAttachment as n,PixelFormat as h,PixelType as o,DepthStencilAttachment as c,FramebufferTarget as a,TextureType as u,Usage as _,BufferType as f,RenderbufferFormat as l}from\"./enums.js\";import{GLObjectType as T}from\"./GLObjectType.js\";import{Renderbuffer as d}from\"./Renderbuffer.js\";import{Texture as m}from\"./Texture.js\";const p=()=>t.getLogger(\"esri.views.webgl.FramebufferObject\");class x{constructor(t,e,i=null){this._context=t,this._glName=null,this._colorAttachments=new Map,this._depthStencilBuffer=null,this._depthStencilTexture=null,this._initialized=!1,t.instanceCounter.increment(s.FramebufferObject,this);const r=E(e)?e:new m(this._context,e);if(this._colorAttachments.set(n.COLOR_ATTACHMENT0,r),this._validateTextureDescriptor(r.descriptor),this._validateColorAttachmentPoint(n.COLOR_ATTACHMENT0),null!=i)if(b(i))this._depthStencilTexture=E(i)?i:new m(this._context,i),this._validateTextureDescriptor(this._depthStencilTexture.descriptor);else{const t=g(i)?i:new d(this._context,i);this._depthStencilBuffer=t,this._validateRenderBufferDescriptor(t.descriptor)}}dispose(){if(0===this._colorAttachments.size&&!this._glName)return;const t=this._context.getBoundFramebufferObject();if(this._colorAttachments.forEach(((t,e)=>this.detachColorTexture(e)?.dispose())),this.detachDepthStencilBuffer()?.dispose(),this.detachDepthStencilTexture()?.dispose(),this._glName){this._context.gl.deleteFramebuffer(this._glName),this._glName=null}this._context.bindFramebuffer(t),this._context.instanceCounter.decrement(s.FramebufferObject,this)}get glName(){return this._glName}get colorTexture(){return this._colorAttachments.get(n.COLOR_ATTACHMENT0)}get depthStencil(){return this._depthStencilTexture||this._depthStencilBuffer}get depthStencilTexture(){return this._depthStencilTexture}get width(){const t=this._colorAttachments.get(n.COLOR_ATTACHMENT0);return t?.descriptor?.width??0}get height(){const t=this._colorAttachments.get(n.COLOR_ATTACHMENT0);return t?.descriptor?.height??0}get usedMemory(){return[...this._colorAttachments].reduce(((t,[e,i])=>t+i.usedMemory),this.depthStencil?.usedMemory??0)}getColorTexture(t){const e=this._colorAttachments.get(t);return e&&E(e)?e:null}get colorAttachments(){return[...this._colorAttachments.keys()]}attachColorTexture(t,e=n.COLOR_ATTACHMENT0){if(!t)return;this._validateColorAttachmentPoint(e);const i=t.descriptor;this._validateTextureDescriptor(i),this.detachColorTexture(e)?.dispose(),this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(t.glName,e)),this._colorAttachments.set(e,t)}detachColorTexture(t=n.COLOR_ATTACHMENT0){const e=this._colorAttachments.get(t);if(e){if(this._initialized){const e=this._context.getBoundFramebufferObject();this._context.bindFramebuffer(this),this._framebufferTexture2D(null,t),this._context.bindFramebuffer(e)}return this._colorAttachments.delete(t),e}}setColorTextureTarget(t,e=n.COLOR_ATTACHMENT0){const i=this._colorAttachments.get(e);i&&this._framebufferTexture2D(i.glName,e,t)}attachDepthStencil(t){if(t)switch(t.type){case T.Texture:return this._attachDepthStencilTexture(t);case T.RenderBuffer:return this._attachDepthStencilBuffer(t)}}_attachDepthStencilTexture(t){if(null==t)return;const e=t.descriptor;e.pixelFormat!==h.DEPTH_STENCIL&&e.pixelFormat!==h.DEPTH24_STENCIL8&&console.error(\"Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!\"),e.dataType!==o.UNSIGNED_INT_24_8&&console.error(\"Depth/Stencil texture must have data type of UNSIGNED_INT_24_8!\"),this._validateTextureDescriptor(e),this._disposeDepthStencilAttachments(),this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(t.glName,c)),this._depthStencilTexture?.dispose(),this._depthStencilTexture=t}detachDepthStencilTexture(){const t=this._depthStencilTexture;if(t&&this._initialized){const t=this._context.getBoundFramebufferObject();this._context.bindFramebuffer(this),this._framebufferTexture2D(null,c),this._context.bindFramebuffer(t)}return this._depthStencilTexture=null,t}_attachDepthStencilBuffer(t){if(null==t)return;const e=t.descriptor;if(this._validateRenderBufferDescriptor(e),this._disposeDepthStencilAttachments(),this._initialized){this._context.bindFramebuffer(this);const i=this._context.gl,r=this._getGLAttachmentPoint(e);i.framebufferRenderbuffer(a.FRAMEBUFFER,r,i.RENDERBUFFER,t.glName)}this._depthStencilBuffer=t}detachDepthStencilBuffer(){const t=this._depthStencilBuffer;if(t&&this._initialized){const e=this._context.getBoundFramebufferObject();this._context.bindFramebuffer(this);const i=this._context.gl,r=this._getGLAttachmentPoint(t.descriptor);i.framebufferRenderbuffer(a.FRAMEBUFFER,r,i.RENDERBUFFER,null),this._context.bindFramebuffer(e)}return this._depthStencilBuffer=null,t}copyToTexture(t,e,i,r,s,n,h){(t<0||e<0||s<0||n<0)&&console.error(\"Offsets cannot be negative!\"),(i<=0||r<=0)&&console.error(\"Copy width and height must be greater than zero!\");const o=h.descriptor;h.descriptor.target!==u.TEXTURE_2D&&console.error(\"Texture target must be TEXTURE_2D!\"),(null==o?.width||null==o?.height||t+i>this.width||e+r>this.height||s+i>o.width||n+r>o.height)&&console.error(\"Bad dimensions, the current input values will attempt to read or copy out of bounds!\");const c=this._context,a=c.bindTexture(h,m.TEXTURE_UNIT_FOR_UPDATES);c.setActiveTexture(m.TEXTURE_UNIT_FOR_UPDATES),c.bindFramebuffer(this),c.gl.copyTexSubImage2D(u.TEXTURE_2D,0,s,n,t,e,i,r),c.bindTexture(a,m.TEXTURE_UNIT_FOR_UPDATES)}readPixels(t,e,i,r,s,n,h){(i<=0||r<=0)&&console.error(\"Copy width and height must be greater than zero!\"),h||console.error(\"Target memory is not initialized!\"),this._context.bindFramebuffer(this),this._context.gl.readPixels(t,e,i,r,s,n,h)}async readPixelsAsync(t,e,r,s,n,h,o){const{gl:c}=this._context,a=i.createPixelPack(this._context,_.STREAM_READ,o.byteLength);this._context.bindBuffer(a);const u=this._context.getBoundFramebufferObject();this._context.bindFramebuffer(this),c.readPixels(t,e,r,s,n,h,0),this._context.unbindBuffer(f.PIXEL_PACK_BUFFER),this._context.bindFramebuffer(u),await a.getSubDataAsync(o),a.dispose()}resize(t,e){if(this.width===t&&this.height===e)return;const i={width:t,height:e};A(i,this._context.parameters.maxTextureSize),this._colorAttachments.forEach((t=>t.resize(i.width,i.height))),this._depthStencilTexture?.resize(i.width,i.height),this._initialized&&(A(i,this._context.parameters.maxRenderbufferSize),this._depthStencilBuffer?.resize(i.width,i.height),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1)}initializeAndBind(t=a.FRAMEBUFFER){const e=this._context.gl;if(this._initialized)return void e.bindFramebuffer(t,this.glName);this._glName&&e.deleteFramebuffer(this._glName);const i=e.createFramebuffer();if(e.bindFramebuffer(t,i),this._colorAttachments.forEach(((e,i)=>this._framebufferTexture2D(e.glName,i,S(e),t))),this._depthStencilBuffer){const i=this._getGLAttachmentPoint(this._depthStencilBuffer.descriptor);e.framebufferRenderbuffer(t,i,e.RENDERBUFFER,this._depthStencilBuffer.glName)}else this._depthStencilTexture&&this._framebufferTexture2D(this._depthStencilTexture.glName,e.DEPTH_STENCIL_ATTACHMENT,S(this._depthStencilTexture),t);if(r()){e.checkFramebufferStatus(t)!==e.FRAMEBUFFER_COMPLETE&&console.error(\"Framebuffer is incomplete!\")}this._glName=i,this._initialized=!0}_framebufferTexture2D(t,e=n.COLOR_ATTACHMENT0,i=u.TEXTURE_2D,r=a.FRAMEBUFFER,s=0){this._context.gl.framebufferTexture2D(r,e,i,t,s)}_disposeDepthStencilAttachments(){const t=this._context.gl;if(this._depthStencilBuffer){if(this._initialized){this._context.bindFramebuffer(this);const e=this._getGLAttachmentPoint(this._depthStencilBuffer.descriptor);t.framebufferRenderbuffer(a.FRAMEBUFFER,e,t.RENDERBUFFER,null)}this._depthStencilBuffer=e(this._depthStencilBuffer)}this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(null,t.DEPTH_STENCIL_ATTACHMENT)),this._depthStencilTexture=e(this._depthStencilTexture))}_validateTextureDescriptor(t){t.target!==u.TEXTURE_2D&&t.target!==u.TEXTURE_CUBE_MAP&&console.error(\"Texture type must be TEXTURE_2D or TEXTURE_CUBE_MAP!\"),A(t,this._context.parameters.maxTextureSize),this._validateBufferDimensions(t)}_validateRenderBufferDescriptor(t){A(t,this._context.parameters.maxRenderbufferSize),this._validateBufferDimensions(t)}_validateBufferDimensions(t){t.width<=0&&(t.width=this.width),t.height<=0&&(t.height=this.height),this.width>0&&this.height>0&&(this.width===t.width&&this.height===t.height||console.error(\"Attachment size must match framebuffer size!\"))}_getGLAttachmentPoint(t){switch(t.internalFormat){case l.DEPTH_COMPONENT16:case l.DEPTH_COMPONENT24:case l.DEPTH_COMPONENT32F:return this._context.gl.DEPTH_ATTACHMENT;case l.DEPTH24_STENCIL8:case l.DEPTH32F_STENCIL8:case l.DEPTH_STENCIL:return this._context.gl.DEPTH_STENCIL_ATTACHMENT;case l.STENCIL_INDEX8:return this._context.gl.STENCIL_ATTACHMENT}}_validateColorAttachmentPoint(e){if(-1===x._MAX_COLOR_ATTACHMENTS){const{gl:t}=this._context;x._MAX_COLOR_ATTACHMENTS=t.getParameter(t.MAX_COLOR_ATTACHMENTS)}const i=e-n.COLOR_ATTACHMENT0;i+1>x._MAX_COLOR_ATTACHMENTS&&t.getLogger(\"esri.views.webgl.FrameBufferObject\").error(\"esri.FrameBufferObject\",`illegal attachment point for color attachment: ${i+1}. Implementation supports up to ${x._MAX_COLOR_ATTACHMENTS} color attachments`)}}function E(t){return null!=t&&\"type\"in t&&t.type===T.Texture}function g(t){return null!=t&&\"type\"in t&&t.type===T.RenderBuffer}function b(t){return E(t)||null!=t&&\"pixelFormat\"in t}function A(t,e){const i=Math.max(t.width,t.height);if(i>e){p().warn(`Resizing FBO attachment size ${t.width}x${t.height} to device limit ${e}`);const r=e/i;return t.width=Math.round(t.width*r),t.height=Math.round(t.height*r),!1}return!0}function S(t){return t.descriptor.target===u.TEXTURE_CUBE_MAP?u.TEXTURE_CUBE_MAP_POSITIVE_X:u.TEXTURE_2D}x._MAX_COLOR_ATTACHMENTS=-1;export{x as FramebufferObject,A as ensureAttachmentMaxSize};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,OAAM,mBAAmB;AAAC,OAAOA,CAAC,MAAK,sBAAsB;AAAC,SAAOC,YAAY,IAAIC,CAAC,QAAK,qBAAqB;AAAC,SAAOC,YAAY,IAAIC,CAAC,QAAK,mBAAmB;AAAC,SAAOC,iBAAiB,IAAIC,CAAC,QAAK,sBAAsB;AAAC,SAAOC,YAAY,IAAIC,CAAC,EAACC,eAAe,IAAIC,CAAC,EAACC,WAAW,IAAIC,CAAC,EAACC,SAAS,IAAIC,CAAC,EAACC,sBAAsB,IAAIC,CAAC,EAACC,iBAAiB,IAAIC,CAAC,EAACC,WAAW,IAAIC,CAAC,EAACC,KAAK,IAAIC,CAAC,EAACC,UAAU,IAAIC,CAAC,EAACC,kBAAkB,IAAIC,CAAC,QAAK,YAAY;AAAC,SAAOC,YAAY,IAAIC,CAAC,QAAK,mBAAmB;AAAC,SAAOC,YAAY,IAAIC,CAAC,QAAK,mBAAmB;AAAC,SAAOC,OAAO,IAAIC,CAAC,QAAK,cAAc;AAAC,MAAMC,CAAC,GAACA,CAAA,KAAIjC,CAAC,CAACkC,SAAS,CAAC,oCAAoC,CAAC;AAAC,MAAMC,CAAC;EAACC,WAAWA,CAACpC,CAAC,EAACE,CAAC,EAAQ;IAAA,IAAPE,CAAC,GAAAiC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,IAAI;IAAE,IAAI,CAACG,QAAQ,GAACxC,CAAC,EAAC,IAAI,CAACyC,OAAO,GAAC,IAAI,EAAC,IAAI,CAACC,iBAAiB,GAAC,IAAIC,GAAG,CAAD,CAAC,EAAC,IAAI,CAACC,mBAAmB,GAAC,IAAI,EAAC,IAAI,CAACC,oBAAoB,GAAC,IAAI,EAAC,IAAI,CAACC,YAAY,GAAC,CAAC,CAAC,EAAC9C,CAAC,CAAC+C,eAAe,CAACC,SAAS,CAACxC,CAAC,CAACyC,iBAAiB,EAAC,IAAI,CAAC;IAAC,MAAM3C,CAAC,GAAC4C,CAAC,CAAChD,CAAC,CAAC,GAACA,CAAC,GAAC,IAAI8B,CAAC,CAAC,IAAI,CAACQ,QAAQ,EAACtC,CAAC,CAAC;IAAC,IAAG,IAAI,CAACwC,iBAAiB,CAACS,GAAG,CAACzC,CAAC,CAAC0C,iBAAiB,EAAC9C,CAAC,CAAC,EAAC,IAAI,CAAC+C,0BAA0B,CAAC/C,CAAC,CAACgD,UAAU,CAAC,EAAC,IAAI,CAACC,6BAA6B,CAAC7C,CAAC,CAAC0C,iBAAiB,CAAC,EAAC,IAAI,IAAEhD,CAAC,EAAC,IAAGoD,CAAC,CAACpD,CAAC,CAAC,EAAC,IAAI,CAACyC,oBAAoB,GAACK,CAAC,CAAC9C,CAAC,CAAC,GAACA,CAAC,GAAC,IAAI4B,CAAC,CAAC,IAAI,CAACQ,QAAQ,EAACpC,CAAC,CAAC,EAAC,IAAI,CAACiD,0BAA0B,CAAC,IAAI,CAACR,oBAAoB,CAACS,UAAU,CAAC,CAAC,KAAI;MAAC,MAAMtD,CAAC,GAACyD,CAAC,CAACrD,CAAC,CAAC,GAACA,CAAC,GAAC,IAAI0B,CAAC,CAAC,IAAI,CAACU,QAAQ,EAACpC,CAAC,CAAC;MAAC,IAAI,CAACwC,mBAAmB,GAAC5C,CAAC,EAAC,IAAI,CAAC0D,+BAA+B,CAAC1D,CAAC,CAACsD,UAAU,CAAC;IAAA;EAAC;EAACK,OAAOA,CAAA,EAAE;IAAC,IAAG,CAAC,KAAG,IAAI,CAACjB,iBAAiB,CAACkB,IAAI,IAAE,CAAC,IAAI,CAACnB,OAAO,EAAC;IAAO,MAAMzC,CAAC,GAAC,IAAI,CAACwC,QAAQ,CAACqB,yBAAyB,CAAC,CAAC;IAAC,IAAG,IAAI,CAACnB,iBAAiB,CAACoB,OAAO,CAAE,CAAC9D,CAAC,EAACE,CAAC,KAAG,IAAI,CAAC6D,kBAAkB,CAAC7D,CAAC,CAAC,EAAEyD,OAAO,CAAC,CAAE,CAAC,EAAC,IAAI,CAACK,wBAAwB,CAAC,CAAC,EAAEL,OAAO,CAAC,CAAC,EAAC,IAAI,CAACM,yBAAyB,CAAC,CAAC,EAAEN,OAAO,CAAC,CAAC,EAAC,IAAI,CAAClB,OAAO,EAAC;MAAC,IAAI,CAACD,QAAQ,CAAC0B,EAAE,CAACC,iBAAiB,CAAC,IAAI,CAAC1B,OAAO,CAAC,EAAC,IAAI,CAACA,OAAO,GAAC,IAAI;IAAA;IAAC,IAAI,CAACD,QAAQ,CAAC4B,eAAe,CAACpE,CAAC,CAAC,EAAC,IAAI,CAACwC,QAAQ,CAACO,eAAe,CAACsB,SAAS,CAAC7D,CAAC,CAACyC,iBAAiB,EAAC,IAAI,CAAC;EAAA;EAAC,IAAIqB,MAAMA,CAAA,EAAE;IAAC,OAAO,IAAI,CAAC7B,OAAO;EAAA;EAAC,IAAI8B,YAAYA,CAAA,EAAE;IAAC,OAAO,IAAI,CAAC7B,iBAAiB,CAAC8B,GAAG,CAAC9D,CAAC,CAAC0C,iBAAiB,CAAC;EAAA;EAAC,IAAIqB,YAAYA,CAAA,EAAE;IAAC,OAAO,IAAI,CAAC5B,oBAAoB,IAAE,IAAI,CAACD,mBAAmB;EAAA;EAAC,IAAI8B,mBAAmBA,CAAA,EAAE;IAAC,OAAO,IAAI,CAAC7B,oBAAoB;EAAA;EAAC,IAAI8B,KAAKA,CAAA,EAAE;IAAC,MAAM3E,CAAC,GAAC,IAAI,CAAC0C,iBAAiB,CAAC8B,GAAG,CAAC9D,CAAC,CAAC0C,iBAAiB,CAAC;IAAC,OAAOpD,CAAC,EAAEsD,UAAU,EAAEqB,KAAK,IAAE,CAAC;EAAA;EAAC,IAAIC,MAAMA,CAAA,EAAE;IAAC,MAAM5E,CAAC,GAAC,IAAI,CAAC0C,iBAAiB,CAAC8B,GAAG,CAAC9D,CAAC,CAAC0C,iBAAiB,CAAC;IAAC,OAAOpD,CAAC,EAAEsD,UAAU,EAAEsB,MAAM,IAAE,CAAC;EAAA;EAAC,IAAIC,UAAUA,CAAA,EAAE;IAAC,OAAM,CAAC,GAAG,IAAI,CAACnC,iBAAiB,CAAC,CAACoC,MAAM,CAAE,CAAC9E,CAAC,EAAA+E,IAAA;MAAA,IAAC,CAAC7E,CAAC,EAACE,CAAC,CAAC,GAAA2E,IAAA;MAAA,OAAG/E,CAAC,GAACI,CAAC,CAACyE,UAAU;IAAA,GAAE,IAAI,CAACJ,YAAY,EAAEI,UAAU,IAAE,CAAC,CAAC;EAAA;EAACG,eAAeA,CAAChF,CAAC,EAAC;IAAC,MAAME,CAAC,GAAC,IAAI,CAACwC,iBAAiB,CAAC8B,GAAG,CAACxE,CAAC,CAAC;IAAC,OAAOE,CAAC,IAAEgD,CAAC,CAAChD,CAAC,CAAC,GAACA,CAAC,GAAC,IAAI;EAAA;EAAC,IAAI+E,gBAAgBA,CAAA,EAAE;IAAC,OAAM,CAAC,GAAG,IAAI,CAACvC,iBAAiB,CAACwC,IAAI,CAAC,CAAC,CAAC;EAAA;EAACC,kBAAkBA,CAACnF,CAAC,EAAuB;IAAA,IAAtBE,CAAC,GAAAmC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC3B,CAAC,CAAC0C,iBAAiB;IAAE,IAAG,CAACpD,CAAC,EAAC;IAAO,IAAI,CAACuD,6BAA6B,CAACrD,CAAC,CAAC;IAAC,MAAME,CAAC,GAACJ,CAAC,CAACsD,UAAU;IAAC,IAAI,CAACD,0BAA0B,CAACjD,CAAC,CAAC,EAAC,IAAI,CAAC2D,kBAAkB,CAAC7D,CAAC,CAAC,EAAEyD,OAAO,CAAC,CAAC,EAAC,IAAI,CAACb,YAAY,KAAG,IAAI,CAACN,QAAQ,CAAC4B,eAAe,CAAC,IAAI,CAAC,EAAC,IAAI,CAACgB,qBAAqB,CAACpF,CAAC,CAACsE,MAAM,EAACpE,CAAC,CAAC,CAAC,EAAC,IAAI,CAACwC,iBAAiB,CAACS,GAAG,CAACjD,CAAC,EAACF,CAAC,CAAC;EAAA;EAAC+D,kBAAkBA,CAAA,EAAuB;IAAA,IAAtB/D,CAAC,GAAAqC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC3B,CAAC,CAAC0C,iBAAiB;IAAE,MAAMlD,CAAC,GAAC,IAAI,CAACwC,iBAAiB,CAAC8B,GAAG,CAACxE,CAAC,CAAC;IAAC,IAAGE,CAAC,EAAC;MAAC,IAAG,IAAI,CAAC4C,YAAY,EAAC;QAAC,MAAM5C,CAAC,GAAC,IAAI,CAACsC,QAAQ,CAACqB,yBAAyB,CAAC,CAAC;QAAC,IAAI,CAACrB,QAAQ,CAAC4B,eAAe,CAAC,IAAI,CAAC,EAAC,IAAI,CAACgB,qBAAqB,CAAC,IAAI,EAACpF,CAAC,CAAC,EAAC,IAAI,CAACwC,QAAQ,CAAC4B,eAAe,CAAClE,CAAC,CAAC;MAAA;MAAC,OAAO,IAAI,CAACwC,iBAAiB,CAAC2C,MAAM,CAACrF,CAAC,CAAC,EAACE,CAAC;IAAA;EAAC;EAACoF,qBAAqBA,CAACtF,CAAC,EAAuB;IAAA,IAAtBE,CAAC,GAAAmC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC3B,CAAC,CAAC0C,iBAAiB;IAAE,MAAMhD,CAAC,GAAC,IAAI,CAACsC,iBAAiB,CAAC8B,GAAG,CAACtE,CAAC,CAAC;IAACE,CAAC,IAAE,IAAI,CAACgF,qBAAqB,CAAChF,CAAC,CAACkE,MAAM,EAACpE,CAAC,EAACF,CAAC,CAAC;EAAA;EAACuF,kBAAkBA,CAACvF,CAAC,EAAC;IAAC,IAAGA,CAAC,EAAC,QAAOA,CAAC,CAACwF,IAAI;MAAE,KAAK5D,CAAC,CAACG,OAAO;QAAC,OAAO,IAAI,CAAC0D,0BAA0B,CAACzF,CAAC,CAAC;MAAC,KAAK4B,CAAC,CAAC8D,YAAY;QAAC,OAAO,IAAI,CAACC,yBAAyB,CAAC3F,CAAC,CAAC;IAAA;EAAC;EAACyF,0BAA0BA,CAACzF,CAAC,EAAC;IAAC,IAAG,IAAI,IAAEA,CAAC,EAAC;IAAO,MAAME,CAAC,GAACF,CAAC,CAACsD,UAAU;IAACpD,CAAC,CAAC0F,WAAW,KAAGhF,CAAC,CAACiF,aAAa,IAAE3F,CAAC,CAAC0F,WAAW,KAAGhF,CAAC,CAACkF,gBAAgB,IAAEC,OAAO,CAACC,KAAK,CAAC,gEAAgE,CAAC,EAAC9F,CAAC,CAAC+F,QAAQ,KAAGnF,CAAC,CAACoF,iBAAiB,IAAEH,OAAO,CAACC,KAAK,CAAC,iEAAiE,CAAC,EAAC,IAAI,CAAC3C,0BAA0B,CAACnD,CAAC,CAAC,EAAC,IAAI,CAACiG,+BAA+B,CAAC,CAAC,EAAC,IAAI,CAACrD,YAAY,KAAG,IAAI,CAACN,QAAQ,CAAC4B,eAAe,CAAC,IAAI,CAAC,EAAC,IAAI,CAACgB,qBAAqB,CAACpF,CAAC,CAACsE,MAAM,EAACtD,CAAC,CAAC,CAAC,EAAC,IAAI,CAAC6B,oBAAoB,EAAEc,OAAO,CAAC,CAAC,EAAC,IAAI,CAACd,oBAAoB,GAAC7C,CAAC;EAAA;EAACiE,yBAAyBA,CAAA,EAAE;IAAC,MAAMjE,CAAC,GAAC,IAAI,CAAC6C,oBAAoB;IAAC,IAAG7C,CAAC,IAAE,IAAI,CAAC8C,YAAY,EAAC;MAAC,MAAM9C,CAAC,GAAC,IAAI,CAACwC,QAAQ,CAACqB,yBAAyB,CAAC,CAAC;MAAC,IAAI,CAACrB,QAAQ,CAAC4B,eAAe,CAAC,IAAI,CAAC,EAAC,IAAI,CAACgB,qBAAqB,CAAC,IAAI,EAACpE,CAAC,CAAC,EAAC,IAAI,CAACwB,QAAQ,CAAC4B,eAAe,CAACpE,CAAC,CAAC;IAAA;IAAC,OAAO,IAAI,CAAC6C,oBAAoB,GAAC,IAAI,EAAC7C,CAAC;EAAA;EAAC2F,yBAAyBA,CAAC3F,CAAC,EAAC;IAAC,IAAG,IAAI,IAAEA,CAAC,EAAC;IAAO,MAAME,CAAC,GAACF,CAAC,CAACsD,UAAU;IAAC,IAAG,IAAI,CAACI,+BAA+B,CAACxD,CAAC,CAAC,EAAC,IAAI,CAACiG,+BAA+B,CAAC,CAAC,EAAC,IAAI,CAACrD,YAAY,EAAC;MAAC,IAAI,CAACN,QAAQ,CAAC4B,eAAe,CAAC,IAAI,CAAC;MAAC,MAAMhE,CAAC,GAAC,IAAI,CAACoC,QAAQ,CAAC0B,EAAE;QAAC5D,CAAC,GAAC,IAAI,CAAC8F,qBAAqB,CAAClG,CAAC,CAAC;MAACE,CAAC,CAACiG,uBAAuB,CAACnF,CAAC,CAACoF,WAAW,EAAChG,CAAC,EAACF,CAAC,CAACmG,YAAY,EAACvG,CAAC,CAACsE,MAAM,CAAC;IAAA;IAAC,IAAI,CAAC1B,mBAAmB,GAAC5C,CAAC;EAAA;EAACgE,wBAAwBA,CAAA,EAAE;IAAC,MAAMhE,CAAC,GAAC,IAAI,CAAC4C,mBAAmB;IAAC,IAAG5C,CAAC,IAAE,IAAI,CAAC8C,YAAY,EAAC;MAAC,MAAM5C,CAAC,GAAC,IAAI,CAACsC,QAAQ,CAACqB,yBAAyB,CAAC,CAAC;MAAC,IAAI,CAACrB,QAAQ,CAAC4B,eAAe,CAAC,IAAI,CAAC;MAAC,MAAMhE,CAAC,GAAC,IAAI,CAACoC,QAAQ,CAAC0B,EAAE;QAAC5D,CAAC,GAAC,IAAI,CAAC8F,qBAAqB,CAACpG,CAAC,CAACsD,UAAU,CAAC;MAAClD,CAAC,CAACiG,uBAAuB,CAACnF,CAAC,CAACoF,WAAW,EAAChG,CAAC,EAACF,CAAC,CAACmG,YAAY,EAAC,IAAI,CAAC,EAAC,IAAI,CAAC/D,QAAQ,CAAC4B,eAAe,CAAClE,CAAC,CAAC;IAAA;IAAC,OAAO,IAAI,CAAC0C,mBAAmB,GAAC,IAAI,EAAC5C,CAAC;EAAA;EAACwG,aAAaA,CAACxG,CAAC,EAACE,CAAC,EAACE,CAAC,EAACE,CAAC,EAACE,CAAC,EAACE,CAAC,EAACE,CAAC,EAAC;IAAC,CAACZ,CAAC,GAAC,CAAC,IAAEE,CAAC,GAAC,CAAC,IAAEM,CAAC,GAAC,CAAC,IAAEE,CAAC,GAAC,CAAC,KAAGqF,OAAO,CAACC,KAAK,CAAC,6BAA6B,CAAC,EAAC,CAAC5F,CAAC,IAAE,CAAC,IAAEE,CAAC,IAAE,CAAC,KAAGyF,OAAO,CAACC,KAAK,CAAC,kDAAkD,CAAC;IAAC,MAAMlF,CAAC,GAACF,CAAC,CAAC0C,UAAU;IAAC1C,CAAC,CAAC0C,UAAU,CAACmD,MAAM,KAAGrF,CAAC,CAACsF,UAAU,IAAEX,OAAO,CAACC,KAAK,CAAC,oCAAoC,CAAC,EAAC,CAAC,IAAI,IAAElF,CAAC,EAAE6D,KAAK,IAAE,IAAI,IAAE7D,CAAC,EAAE8D,MAAM,IAAE5E,CAAC,GAACI,CAAC,GAAC,IAAI,CAACuE,KAAK,IAAEzE,CAAC,GAACI,CAAC,GAAC,IAAI,CAACsE,MAAM,IAAEpE,CAAC,GAACJ,CAAC,GAACU,CAAC,CAAC6D,KAAK,IAAEjE,CAAC,GAACJ,CAAC,GAACQ,CAAC,CAAC8D,MAAM,KAAGmB,OAAO,CAACC,KAAK,CAAC,sFAAsF,CAAC;IAAC,MAAMhF,CAAC,GAAC,IAAI,CAACwB,QAAQ;MAACtB,CAAC,GAACF,CAAC,CAAC2F,WAAW,CAAC/F,CAAC,EAACoB,CAAC,CAAC4E,wBAAwB,CAAC;IAAC5F,CAAC,CAAC6F,gBAAgB,CAAC7E,CAAC,CAAC4E,wBAAwB,CAAC,EAAC5F,CAAC,CAACoD,eAAe,CAAC,IAAI,CAAC,EAACpD,CAAC,CAACkD,EAAE,CAAC4C,iBAAiB,CAAC1F,CAAC,CAACsF,UAAU,EAAC,CAAC,EAAClG,CAAC,EAACE,CAAC,EAACV,CAAC,EAACE,CAAC,EAACE,CAAC,EAACE,CAAC,CAAC,EAACU,CAAC,CAAC2F,WAAW,CAACzF,CAAC,EAACc,CAAC,CAAC4E,wBAAwB,CAAC;EAAA;EAACG,UAAUA,CAAC/G,CAAC,EAACE,CAAC,EAACE,CAAC,EAACE,CAAC,EAACE,CAAC,EAACE,CAAC,EAACE,CAAC,EAAC;IAAC,CAACR,CAAC,IAAE,CAAC,IAAEE,CAAC,IAAE,CAAC,KAAGyF,OAAO,CAACC,KAAK,CAAC,kDAAkD,CAAC,EAACpF,CAAC,IAAEmF,OAAO,CAACC,KAAK,CAAC,mCAAmC,CAAC,EAAC,IAAI,CAACxD,QAAQ,CAAC4B,eAAe,CAAC,IAAI,CAAC,EAAC,IAAI,CAAC5B,QAAQ,CAAC0B,EAAE,CAAC6C,UAAU,CAAC/G,CAAC,EAACE,CAAC,EAACE,CAAC,EAACE,CAAC,EAACE,CAAC,EAACE,CAAC,EAACE,CAAC,CAAC;EAAA;EAAC,MAAMoG,eAAeA,CAAChH,CAAC,EAACE,CAAC,EAACI,CAAC,EAACE,CAAC,EAACE,CAAC,EAACE,CAAC,EAACE,CAAC,EAAC;IAAC,MAAK;QAACoD,EAAE,EAAClD;MAAC,CAAC,GAAC,IAAI,CAACwB,QAAQ;MAACtB,CAAC,GAACd,CAAC,CAAC6G,eAAe,CAAC,IAAI,CAACzE,QAAQ,EAAClB,CAAC,CAAC4F,WAAW,EAACpG,CAAC,CAACqG,UAAU,CAAC;IAAC,IAAI,CAAC3E,QAAQ,CAAC4E,UAAU,CAAClG,CAAC,CAAC;IAAC,MAAME,CAAC,GAAC,IAAI,CAACoB,QAAQ,CAACqB,yBAAyB,CAAC,CAAC;IAAC,IAAI,CAACrB,QAAQ,CAAC4B,eAAe,CAAC,IAAI,CAAC,EAACpD,CAAC,CAAC+F,UAAU,CAAC/G,CAAC,EAACE,CAAC,EAACI,CAAC,EAACE,CAAC,EAACE,CAAC,EAACE,CAAC,EAAC,CAAC,CAAC,EAAC,IAAI,CAAC4B,QAAQ,CAAC6E,YAAY,CAAC7F,CAAC,CAAC8F,iBAAiB,CAAC,EAAC,IAAI,CAAC9E,QAAQ,CAAC4B,eAAe,CAAChD,CAAC,CAAC,EAAC,MAAMF,CAAC,CAACqG,eAAe,CAACzG,CAAC,CAAC,EAACI,CAAC,CAACyC,OAAO,CAAC,CAAC;EAAA;EAAC6D,MAAMA,CAACxH,CAAC,EAACE,CAAC,EAAC;IAAC,IAAG,IAAI,CAACyE,KAAK,KAAG3E,CAAC,IAAE,IAAI,CAAC4E,MAAM,KAAG1E,CAAC,EAAC;IAAO,MAAME,CAAC,GAAC;MAACuE,KAAK,EAAC3E,CAAC;MAAC4E,MAAM,EAAC1E;IAAC,CAAC;IAACuH,CAAC,CAACrH,CAAC,EAAC,IAAI,CAACoC,QAAQ,CAACkF,UAAU,CAACC,cAAc,CAAC,EAAC,IAAI,CAACjF,iBAAiB,CAACoB,OAAO,CAAE9D,CAAC,IAAEA,CAAC,CAACwH,MAAM,CAACpH,CAAC,CAACuE,KAAK,EAACvE,CAAC,CAACwE,MAAM,CAAE,CAAC,EAAC,IAAI,CAAC/B,oBAAoB,EAAE2E,MAAM,CAACpH,CAAC,CAACuE,KAAK,EAACvE,CAAC,CAACwE,MAAM,CAAC,EAAC,IAAI,CAAC9B,YAAY,KAAG2E,CAAC,CAACrH,CAAC,EAAC,IAAI,CAACoC,QAAQ,CAACkF,UAAU,CAACE,mBAAmB,CAAC,EAAC,IAAI,CAAChF,mBAAmB,EAAE4E,MAAM,CAACpH,CAAC,CAACuE,KAAK,EAACvE,CAAC,CAACwE,MAAM,CAAC,EAAC,IAAI,CAACpC,QAAQ,CAACqB,yBAAyB,CAAC,CAAC,KAAG,IAAI,IAAE,IAAI,CAACrB,QAAQ,CAAC4B,eAAe,CAAC,IAAI,CAAC,EAAC,IAAI,CAACtB,YAAY,GAAC,CAAC,CAAC,CAAC;EAAA;EAAC+E,iBAAiBA,CAAA,EAAiB;IAAA,IAAhB7H,CAAC,GAAAqC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAACnB,CAAC,CAACoF,WAAW;IAAE,MAAMpG,CAAC,GAAC,IAAI,CAACsC,QAAQ,CAAC0B,EAAE;IAAC,IAAG,IAAI,CAACpB,YAAY,EAAC,OAAO,KAAK5C,CAAC,CAACkE,eAAe,CAACpE,CAAC,EAAC,IAAI,CAACsE,MAAM,CAAC;IAAC,IAAI,CAAC7B,OAAO,IAAEvC,CAAC,CAACiE,iBAAiB,CAAC,IAAI,CAAC1B,OAAO,CAAC;IAAC,MAAMrC,CAAC,GAACF,CAAC,CAAC4H,iBAAiB,CAAC,CAAC;IAAC,IAAG5H,CAAC,CAACkE,eAAe,CAACpE,CAAC,EAACI,CAAC,CAAC,EAAC,IAAI,CAACsC,iBAAiB,CAACoB,OAAO,CAAE,CAAC5D,CAAC,EAACE,CAAC,KAAG,IAAI,CAACgF,qBAAqB,CAAClF,CAAC,CAACoE,MAAM,EAAClE,CAAC,EAAC2H,CAAC,CAAC7H,CAAC,CAAC,EAACF,CAAC,CAAE,CAAC,EAAC,IAAI,CAAC4C,mBAAmB,EAAC;MAAC,MAAMxC,CAAC,GAAC,IAAI,CAACgG,qBAAqB,CAAC,IAAI,CAACxD,mBAAmB,CAACU,UAAU,CAAC;MAACpD,CAAC,CAACmG,uBAAuB,CAACrG,CAAC,EAACI,CAAC,EAACF,CAAC,CAACqG,YAAY,EAAC,IAAI,CAAC3D,mBAAmB,CAAC0B,MAAM,CAAC;IAAA,CAAC,MAAK,IAAI,CAACzB,oBAAoB,IAAE,IAAI,CAACuC,qBAAqB,CAAC,IAAI,CAACvC,oBAAoB,CAACyB,MAAM,EAACpE,CAAC,CAAC8H,wBAAwB,EAACD,CAAC,CAAC,IAAI,CAAClF,oBAAoB,CAAC,EAAC7C,CAAC,CAAC;IAAC,IAAGM,CAAC,CAAC,CAAC,EAAC;MAACJ,CAAC,CAAC+H,sBAAsB,CAACjI,CAAC,CAAC,KAAGE,CAAC,CAACgI,oBAAoB,IAAEnC,OAAO,CAACC,KAAK,CAAC,4BAA4B,CAAC;IAAA;IAAC,IAAI,CAACvD,OAAO,GAACrC,CAAC,EAAC,IAAI,CAAC0C,YAAY,GAAC,CAAC,CAAC;EAAA;EAACsC,qBAAqBA,CAACpF,CAAC,EAA0D;IAAA,IAAzDE,CAAC,GAAAmC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC3B,CAAC,CAAC0C,iBAAiB;IAAA,IAAChD,CAAC,GAAAiC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAACjB,CAAC,CAACsF,UAAU;IAAA,IAACpG,CAAC,GAAA+B,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAACnB,CAAC,CAACoF,WAAW;IAAA,IAAC9F,CAAC,GAAA6B,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,CAAC;IAAE,IAAI,CAACG,QAAQ,CAAC0B,EAAE,CAACiE,oBAAoB,CAAC7H,CAAC,EAACJ,CAAC,EAACE,CAAC,EAACJ,CAAC,EAACQ,CAAC,CAAC;EAAA;EAAC2F,+BAA+BA,CAAA,EAAE;IAAC,MAAMnG,CAAC,GAAC,IAAI,CAACwC,QAAQ,CAAC0B,EAAE;IAAC,IAAG,IAAI,CAACtB,mBAAmB,EAAC;MAAC,IAAG,IAAI,CAACE,YAAY,EAAC;QAAC,IAAI,CAACN,QAAQ,CAAC4B,eAAe,CAAC,IAAI,CAAC;QAAC,MAAMlE,CAAC,GAAC,IAAI,CAACkG,qBAAqB,CAAC,IAAI,CAACxD,mBAAmB,CAACU,UAAU,CAAC;QAACtD,CAAC,CAACqG,uBAAuB,CAACnF,CAAC,CAACoF,WAAW,EAACpG,CAAC,EAACF,CAAC,CAACuG,YAAY,EAAC,IAAI,CAAC;MAAA;MAAC,IAAI,CAAC3D,mBAAmB,GAAC1C,CAAC,CAAC,IAAI,CAAC0C,mBAAmB,CAAC;IAAA;IAAC,IAAI,CAACC,oBAAoB,KAAG,IAAI,CAACC,YAAY,KAAG,IAAI,CAACN,QAAQ,CAAC4B,eAAe,CAAC,IAAI,CAAC,EAAC,IAAI,CAACgB,qBAAqB,CAAC,IAAI,EAACpF,CAAC,CAACgI,wBAAwB,CAAC,CAAC,EAAC,IAAI,CAACnF,oBAAoB,GAAC3C,CAAC,CAAC,IAAI,CAAC2C,oBAAoB,CAAC,CAAC;EAAA;EAACQ,0BAA0BA,CAACrD,CAAC,EAAC;IAACA,CAAC,CAACyG,MAAM,KAAGrF,CAAC,CAACsF,UAAU,IAAE1G,CAAC,CAACyG,MAAM,KAAGrF,CAAC,CAACgH,gBAAgB,IAAErC,OAAO,CAACC,KAAK,CAAC,sDAAsD,CAAC,EAACyB,CAAC,CAACzH,CAAC,EAAC,IAAI,CAACwC,QAAQ,CAACkF,UAAU,CAACC,cAAc,CAAC,EAAC,IAAI,CAACU,yBAAyB,CAACrI,CAAC,CAAC;EAAA;EAAC0D,+BAA+BA,CAAC1D,CAAC,EAAC;IAACyH,CAAC,CAACzH,CAAC,EAAC,IAAI,CAACwC,QAAQ,CAACkF,UAAU,CAACE,mBAAmB,CAAC,EAAC,IAAI,CAACS,yBAAyB,CAACrI,CAAC,CAAC;EAAA;EAACqI,yBAAyBA,CAACrI,CAAC,EAAC;IAACA,CAAC,CAAC2E,KAAK,IAAE,CAAC,KAAG3E,CAAC,CAAC2E,KAAK,GAAC,IAAI,CAACA,KAAK,CAAC,EAAC3E,CAAC,CAAC4E,MAAM,IAAE,CAAC,KAAG5E,CAAC,CAAC4E,MAAM,GAAC,IAAI,CAACA,MAAM,CAAC,EAAC,IAAI,CAACD,KAAK,GAAC,CAAC,IAAE,IAAI,CAACC,MAAM,GAAC,CAAC,KAAG,IAAI,CAACD,KAAK,KAAG3E,CAAC,CAAC2E,KAAK,IAAE,IAAI,CAACC,MAAM,KAAG5E,CAAC,CAAC4E,MAAM,IAAEmB,OAAO,CAACC,KAAK,CAAC,8CAA8C,CAAC,CAAC;EAAA;EAACI,qBAAqBA,CAACpG,CAAC,EAAC;IAAC,QAAOA,CAAC,CAACsI,cAAc;MAAE,KAAK5G,CAAC,CAAC6G,iBAAiB;MAAC,KAAK7G,CAAC,CAAC8G,iBAAiB;MAAC,KAAK9G,CAAC,CAAC+G,kBAAkB;QAAC,OAAO,IAAI,CAACjG,QAAQ,CAAC0B,EAAE,CAACwE,gBAAgB;MAAC,KAAKhH,CAAC,CAACoE,gBAAgB;MAAC,KAAKpE,CAAC,CAACiH,iBAAiB;MAAC,KAAKjH,CAAC,CAACmE,aAAa;QAAC,OAAO,IAAI,CAACrD,QAAQ,CAAC0B,EAAE,CAAC8D,wBAAwB;MAAC,KAAKtG,CAAC,CAACkH,cAAc;QAAC,OAAO,IAAI,CAACpG,QAAQ,CAAC0B,EAAE,CAAC2E,kBAAkB;IAAA;EAAC;EAACtF,6BAA6BA,CAACrD,CAAC,EAAC;IAAC,IAAG,CAAC,CAAC,KAAGiC,CAAC,CAAC2G,sBAAsB,EAAC;MAAC,MAAK;QAAC5E,EAAE,EAAClE;MAAC,CAAC,GAAC,IAAI,CAACwC,QAAQ;MAACL,CAAC,CAAC2G,sBAAsB,GAAC9I,CAAC,CAAC+I,YAAY,CAAC/I,CAAC,CAACgJ,qBAAqB,CAAC;IAAA;IAAC,MAAM5I,CAAC,GAACF,CAAC,GAACQ,CAAC,CAAC0C,iBAAiB;IAAChD,CAAC,GAAC,CAAC,GAAC+B,CAAC,CAAC2G,sBAAsB,IAAE9I,CAAC,CAACkC,SAAS,CAAC,oCAAoC,CAAC,CAAC8D,KAAK,CAAC,wBAAwB,EAAC,kDAAkD5F,CAAC,GAAC,CAAC,mCAAmC+B,CAAC,CAAC2G,sBAAsB,oBAAoB,CAAC;EAAA;AAAC;AAAC,SAAS5F,CAACA,CAAClD,CAAC,EAAC;EAAC,OAAO,IAAI,IAAEA,CAAC,IAAE,MAAM,IAAGA,CAAC,IAAEA,CAAC,CAACwF,IAAI,KAAG5D,CAAC,CAACG,OAAO;AAAA;AAAC,SAAS0B,CAACA,CAACzD,CAAC,EAAC;EAAC,OAAO,IAAI,IAAEA,CAAC,IAAE,MAAM,IAAGA,CAAC,IAAEA,CAAC,CAACwF,IAAI,KAAG5D,CAAC,CAAC8D,YAAY;AAAA;AAAC,SAASlC,CAACA,CAACxD,CAAC,EAAC;EAAC,OAAOkD,CAAC,CAAClD,CAAC,CAAC,IAAE,IAAI,IAAEA,CAAC,IAAE,aAAa,IAAGA,CAAC;AAAA;AAAC,SAASyH,CAACA,CAACzH,CAAC,EAACE,CAAC,EAAC;EAAC,MAAME,CAAC,GAAC6I,IAAI,CAACC,GAAG,CAAClJ,CAAC,CAAC2E,KAAK,EAAC3E,CAAC,CAAC4E,MAAM,CAAC;EAAC,IAAGxE,CAAC,GAACF,CAAC,EAAC;IAAC+B,CAAC,CAAC,CAAC,CAACkH,IAAI,CAAC,gCAAgCnJ,CAAC,CAAC2E,KAAK,IAAI3E,CAAC,CAAC4E,MAAM,oBAAoB1E,CAAC,EAAE,CAAC;IAAC,MAAMI,CAAC,GAACJ,CAAC,GAACE,CAAC;IAAC,OAAOJ,CAAC,CAAC2E,KAAK,GAACsE,IAAI,CAACG,KAAK,CAACpJ,CAAC,CAAC2E,KAAK,GAACrE,CAAC,CAAC,EAACN,CAAC,CAAC4E,MAAM,GAACqE,IAAI,CAACG,KAAK,CAACpJ,CAAC,CAAC4E,MAAM,GAACtE,CAAC,CAAC,EAAC,CAAC,CAAC;EAAA;EAAC,OAAM,CAAC,CAAC;AAAA;AAAC,SAASyH,CAACA,CAAC/H,CAAC,EAAC;EAAC,OAAOA,CAAC,CAACsD,UAAU,CAACmD,MAAM,KAAGrF,CAAC,CAACgH,gBAAgB,GAAChH,CAAC,CAACiI,2BAA2B,GAACjI,CAAC,CAACsF,UAAU;AAAA;AAACvE,CAAC,CAAC2G,sBAAsB,GAAC,CAAC,CAAC;AAAC,SAAO3G,CAAC,IAAIc,iBAAiB,EAACwE,CAAC,IAAI6B,uBAAuB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}