{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { ScreenSpacePass as e } from \"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl.js\";\nimport { ReadDepth as r } from \"../views/3d/webgl-engine/core/shaderLibrary/output/ReadDepth.glsl.js\";\nimport { Float2DrawUniform as t } from \"../views/3d/webgl-engine/core/shaderModules/Float2DrawUniform.js\";\nimport { FloatPassUniform as o } from \"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";\nimport { glsl as a } from \"../views/3d/webgl-engine/core/shaderModules/glsl.js\";\nimport { Texture2DDrawUniform as l } from \"../views/3d/webgl-engine/core/shaderModules/Texture2DDrawUniform.js\";\nimport { Texture2DPassUniform as n } from \"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";\nimport { ShaderBuilder as s } from \"../views/webgl/ShaderBuilder.js\";\nconst d = 4;\nfunction i() {\n  const i = new s(),\n    f = i.fragment;\n  i.include(e);\n  const u = (d + 1) / 2,\n    c = 1 / (2 * u * u);\n  return f.include(r), f.uniforms.add(new n(\"depthMap\", e => e.depthTexture), new l(\"tex\", e => e.colorTexture), new t(\"blurSize\", e => e.blurSize), new o(\"projScale\", (e, r) => {\n    const t = r.camera.distance;\n    return t > 5e4 ? Math.max(0, e.projScale - (t - 5e4)) : e.projScale;\n  })), f.code.add(a`\n    void blurFunction(vec2 uv, float r, float center_d, float sharpness, inout float wTotal, inout float bTotal) {\n      float c = texture(tex, uv).r;\n      float d = linearDepthFromTexture(depthMap, uv);\n\n      float ddiff = d - center_d;\n\n      float w = exp(-r * r * ${a.float(c)} - ddiff * ddiff * sharpness);\n      wTotal += w;\n      bTotal += w * c;\n    }\n  `), i.outputs.add(\"fragBlur\", \"float\"), f.main.add(a`\n    float b = 0.0;\n    float w_total = 0.0;\n\n    float center_d = linearDepthFromTexture(depthMap, uv);\n\n    float sharpness = -0.05 * projScale / center_d;\n    for (int r = -${a.int(d)}; r <= ${a.int(d)}; ++r) {\n      float rf = float(r);\n      vec2 uvOffset = uv + rf * blurSize;\n      blurFunction(uvOffset, rf, center_d, sharpness, w_total, b);\n    }\n    fragBlur = b / w_total;`), i;\n}\nconst f = Object.freeze(Object.defineProperty({\n  __proto__: null,\n  build: i\n}, Symbol.toStringTag, {\n  value: \"Module\"\n}));\nexport { f as S, i as b };","map":{"version":3,"names":["ScreenSpacePass","e","ReadDepth","r","Float2DrawUniform","t","FloatPassUniform","o","glsl","a","Texture2DDrawUniform","l","Texture2DPassUniform","n","ShaderBuilder","s","d","i","f","fragment","include","u","c","uniforms","add","depthTexture","colorTexture","blurSize","camera","distance","Math","max","projScale","code","float","outputs","main","int","Object","freeze","defineProperty","__proto__","build","Symbol","toStringTag","value","S","b"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/chunks/SSAOBlur.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{ScreenSpacePass as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl.js\";import{ReadDepth as r}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadDepth.glsl.js\";import{Float2DrawUniform as t}from\"../views/3d/webgl-engine/core/shaderModules/Float2DrawUniform.js\";import{FloatPassUniform as o}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as a}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{Texture2DDrawUniform as l}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DDrawUniform.js\";import{Texture2DPassUniform as n}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";import{ShaderBuilder as s}from\"../views/webgl/ShaderBuilder.js\";const d=4;function i(){const i=new s,f=i.fragment;i.include(e);const u=(d+1)/2,c=1/(2*u*u);return f.include(r),f.uniforms.add(new n(\"depthMap\",(e=>e.depthTexture)),new l(\"tex\",(e=>e.colorTexture)),new t(\"blurSize\",(e=>e.blurSize)),new o(\"projScale\",((e,r)=>{const t=r.camera.distance;return t>5e4?Math.max(0,e.projScale-(t-5e4)):e.projScale}))),f.code.add(a`\n    void blurFunction(vec2 uv, float r, float center_d, float sharpness, inout float wTotal, inout float bTotal) {\n      float c = texture(tex, uv).r;\n      float d = linearDepthFromTexture(depthMap, uv);\n\n      float ddiff = d - center_d;\n\n      float w = exp(-r * r * ${a.float(c)} - ddiff * ddiff * sharpness);\n      wTotal += w;\n      bTotal += w * c;\n    }\n  `),i.outputs.add(\"fragBlur\",\"float\"),f.main.add(a`\n    float b = 0.0;\n    float w_total = 0.0;\n\n    float center_d = linearDepthFromTexture(depthMap, uv);\n\n    float sharpness = -0.05 * projScale / center_d;\n    for (int r = -${a.int(d)}; r <= ${a.int(d)}; ++r) {\n      float rf = float(r);\n      vec2 uvOffset = uv + rf * blurSize;\n      blurFunction(uvOffset, rf, center_d, sharpness, w_total, b);\n    }\n    fragBlur = b / w_total;`),i}const f=Object.freeze(Object.defineProperty({__proto__:null,build:i},Symbol.toStringTag,{value:\"Module\"}));export{f as S,i as b};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,eAAe,IAAIC,CAAC,QAAK,qEAAqE;AAAC,SAAOC,SAAS,IAAIC,CAAC,QAAK,sEAAsE;AAAC,SAAOC,iBAAiB,IAAIC,CAAC,QAAK,kEAAkE;AAAC,SAAOC,gBAAgB,IAAIC,CAAC,QAAK,iEAAiE;AAAC,SAAOC,IAAI,IAAIC,CAAC,QAAK,qDAAqD;AAAC,SAAOC,oBAAoB,IAAIC,CAAC,QAAK,qEAAqE;AAAC,SAAOC,oBAAoB,IAAIC,CAAC,QAAK,qEAAqE;AAAC,SAAOC,aAAa,IAAIC,CAAC,QAAK,iCAAiC;AAAC,MAAMC,CAAC,GAAC,CAAC;AAAC,SAASC,CAACA,CAAA,EAAE;EAAC,MAAMA,CAAC,GAAC,IAAIF,CAAC,CAAD,CAAC;IAACG,CAAC,GAACD,CAAC,CAACE,QAAQ;EAACF,CAAC,CAACG,OAAO,CAACnB,CAAC,CAAC;EAAC,MAAMoB,CAAC,GAAC,CAACL,CAAC,GAAC,CAAC,IAAE,CAAC;IAACM,CAAC,GAAC,CAAC,IAAE,CAAC,GAACD,CAAC,GAACA,CAAC,CAAC;EAAC,OAAOH,CAAC,CAACE,OAAO,CAACjB,CAAC,CAAC,EAACe,CAAC,CAACK,QAAQ,CAACC,GAAG,CAAC,IAAIX,CAAC,CAAC,UAAU,EAAEZ,CAAC,IAAEA,CAAC,CAACwB,YAAa,CAAC,EAAC,IAAId,CAAC,CAAC,KAAK,EAAEV,CAAC,IAAEA,CAAC,CAACyB,YAAa,CAAC,EAAC,IAAIrB,CAAC,CAAC,UAAU,EAAEJ,CAAC,IAAEA,CAAC,CAAC0B,QAAS,CAAC,EAAC,IAAIpB,CAAC,CAAC,WAAW,EAAE,CAACN,CAAC,EAACE,CAAC,KAAG;IAAC,MAAME,CAAC,GAACF,CAAC,CAACyB,MAAM,CAACC,QAAQ;IAAC,OAAOxB,CAAC,GAAC,GAAG,GAACyB,IAAI,CAACC,GAAG,CAAC,CAAC,EAAC9B,CAAC,CAAC+B,SAAS,IAAE3B,CAAC,GAAC,GAAG,CAAC,CAAC,GAACJ,CAAC,CAAC+B,SAAS;EAAA,CAAE,CAAC,CAAC,EAACd,CAAC,CAACe,IAAI,CAACT,GAAG,CAACf,CAAC;AACrlC;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+BA,CAAC,CAACyB,KAAK,CAACZ,CAAC,CAAC;AACzC;AACA;AACA;AACA,GAAG,CAAC,EAACL,CAAC,CAACkB,OAAO,CAACX,GAAG,CAAC,UAAU,EAAC,OAAO,CAAC,EAACN,CAAC,CAACkB,IAAI,CAACZ,GAAG,CAACf,CAAC;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoBA,CAAC,CAAC4B,GAAG,CAACrB,CAAC,CAAC,UAAUP,CAAC,CAAC4B,GAAG,CAACrB,CAAC,CAAC;AAC9C;AACA;AACA;AACA;AACA,4BAA4B,CAAC,EAACC,CAAC;AAAA;AAAC,MAAMC,CAAC,GAACoB,MAAM,CAACC,MAAM,CAACD,MAAM,CAACE,cAAc,CAAC;EAACC,SAAS,EAAC,IAAI;EAACC,KAAK,EAACzB;AAAC,CAAC,EAAC0B,MAAM,CAACC,WAAW,EAAC;EAACC,KAAK,EAAC;AAAQ,CAAC,CAAC,CAAC;AAAC,SAAO3B,CAAC,IAAI4B,CAAC,EAAC7B,CAAC,IAAI8B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}