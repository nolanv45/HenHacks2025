{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport has from \"../../../../core/has.js\";\nimport { clamp as t, lerp as s, acosClamped as e } from \"../../../../core/mathUtils.js\";\nimport { releaseMaybe as i } from \"../../../../core/maybe.js\";\nimport { create as a } from \"../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";\nimport { translate as r, multiply as h, invert as o, lookAt as n } from \"../../../../core/libs/gl-matrix-2/math/mat4.js\";\nimport { IDENTITY as c, create as l } from \"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";\nimport { set as d, add as m, scale as u, lerp as _, squaredDistance as f, subtract as g, dot as p, negate as x, normalize as b, copy as w } from \"../../../../core/libs/gl-matrix-2/math/vec2.js\";\nimport { create as M } from \"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";\nimport { p as C, c as j, v as T, t as y, i as D } from \"../../../../chunks/vec32.js\";\nimport { create as H } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { s as v, t as S } from \"../../../../chunks/vec42.js\";\nimport { create as R } from \"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";\nimport { ViewingMode as O } from \"../../../ViewingMode.js\";\nimport { ColorFormat as E, DepthFormat as U } from \"../../webgl/formats.js\";\nimport { CascadeCamera as F } from \"./CascadeCamera.js\";\nimport { applyTextureResizeModulo as L, applyTextureResizeFloorModulo as Q } from \"./textureUtils.js\";\nimport { assert as V, logWithBase as N, verify as A, rayRay2D as B } from \"./Util.js\";\nimport { TextureType as I, FramebufferBit as W } from \"../../../webgl/enums.js\";\nimport { Texture as z } from \"../../../webgl/Texture.js\";\nvar P;\n!function (t) {\n  t[t.Highlight = 0] = \"Highlight\", t[t.ExcludeHighlight = 1] = \"ExcludeHighlight\";\n}(P || (P = {}));\nclass q {\n  constructor() {\n    this.camera = new F(), this.lightMat = l();\n  }\n}\nclass G {\n  constructor() {\n    this.maxNumCascadesHighQuality = 4, this.maxNumCascadesLowQuality = 4, this.textureSizeModHighQuality = 1.3, this.textureSizeModLowQuality = .9, this.splitSchemeLambda = 0;\n  }\n}\nclass X {\n  constructor(t, s) {\n    this._fbos = t, this._viewingMode = s, this._enabled = !1, this._snapshots = new Array(), this._textureHeight = 0, this._numCascades = 1, this.settings = new G(), this._projectionView = l(), this._projectionViewInverse = l(), this._modelViewLight = l(), this._cascadeDistances = [0, 0, 0, 0, 0], this._usedCascadeDistances = R(), this._cascades = [new q(), new q(), new q(), new q()], this._lastOrigin = null, this._maxTextureWidth = Math.min(has(\"esri-mobile\") ? 4096 : 16384, t.rctx.parameters.maxTextureSize);\n  }\n  dispose() {\n    this.enabled = !1, this.disposeOffscreenBuffers();\n  }\n  get depthTexture() {\n    return this._handle?.getTexture();\n  }\n  get _textureWidth() {\n    return this._textureHeight * this._numCascades;\n  }\n  get numCascades() {\n    return this._numCascades;\n  }\n  get cascadeDistances() {\n    return v(this._usedCascadeDistances, this._cascadeDistances[0], this._numCascades > 1 ? this._cascadeDistances[1] : 1 / 0, this._numCascades > 2 ? this._cascadeDistances[2] : 1 / 0, this._numCascades > 3 ? this._cascadeDistances[3] : 1 / 0);\n  }\n  disposeOffscreenBuffers() {\n    this._handle = i(this._handle), this._discardSnapshots();\n  }\n  set maxCascades(s) {\n    this.settings.maxNumCascadesHighQuality = t(Math.floor(s), 1, 4);\n  }\n  get maxCascades() {\n    return this.settings.maxNumCascadesHighQuality;\n  }\n  set enabled(t) {\n    this._enabled = t, t || this.disposeOffscreenBuffers();\n  }\n  get enabled() {\n    return this._enabled;\n  }\n  get ready() {\n    return this._enabled && null != this.depthTexture;\n  }\n  get cascades() {\n    for (let t = 0; t < this._numCascades; ++t) it[t] = this._cascades[t];\n    return it.length = this._numCascades, it;\n  }\n  start(t, s, e, i, a) {\n    V(this.enabled);\n    const {\n      near: r,\n      far: h\n    } = Tt(e);\n    this._computeCascadeDistances(r, h, i), this._textureHeight = this._computeTextureHeight(t, a, i), this._setupMatrices(t, s);\n    const {\n      viewMatrix: o,\n      projectionMatrix: n\n    } = t;\n    for (let c = 0; c < this._numCascades; ++c) this._constructCascade(c, n, o, s);\n    this._lastOrigin = null, this.clear();\n  }\n  finish() {\n    V(this.enabled), this._handle?.detachDepth();\n  }\n  getShadowMapMatrices(t) {\n    if (!this._lastOrigin || !C(t, this._lastOrigin)) {\n      this._lastOrigin = this._lastOrigin || H(), j(this._lastOrigin, t);\n      for (let s = 0; s < this._numCascades; ++s) {\n        r(at, this._cascades[s].lightMat, t);\n        for (let t = 0; t < 16; ++t) rt[16 * s + t] = at[t];\n      }\n    }\n    return rt;\n  }\n  moveSnapshot(t) {\n    V(this.enabled), this._handle?.detachDepth(), this._snapshots[t]?.release(), this._snapshots[t] = this._handle, this._handle = null, this.clear();\n  }\n  copySnapshot(t) {\n    const s = this._handle?.getTexture()?.descriptor;\n    if (!this.enabled || !s) return;\n    this._snapshots[t]?.release();\n    const {\n        width: e,\n        height: i\n      } = s,\n      a = t === P.Highlight ? \"shadow highlight snapshot\" : \"shadow no highlight snapshot\";\n    this._snapshots[t] = this._fbos.acquire(e, i, a, E.RGBA4);\n    const r = this._fbos.rctx;\n    this._bindFbo();\n    const h = r.bindTexture(this._snapshots[t]?.getTexture(), z.TEXTURE_UNIT_FOR_UPDATES);\n    r.gl.copyTexSubImage2D(I.TEXTURE_2D, 0, 0, 0, 0, 0, e, i), r.bindTexture(h, z.TEXTURE_UNIT_FOR_UPDATES);\n  }\n  getSnapshot(t) {\n    return this.enabled ? this._snapshots[t]?.getTexture() : null;\n  }\n  clear() {\n    const t = this._fbos.rctx;\n    this._ensureFbo(), this._bindFbo(), t.setClearColor(1, 1, 1, 1), t.clear(W.COLOR | W.DEPTH);\n  }\n  _computeTextureHeight(t, s, e) {\n    const i = Math.min(window.devicePixelRatio, s) / t.pixelRatio,\n      a = e ? this.settings.textureSizeModHighQuality : this.settings.textureSizeModLowQuality,\n      r = L(Math.floor(Math.max(t.fullWidth, t.fullHeight) * i * a)),\n      h = Math.min(this._maxTextureWidth, this._numCascades * r);\n    return Q(h / this._numCascades);\n  }\n  _ensureFbo() {\n    this._handle?.fbo?.width === this._textureWidth && this._handle?.fbo.height === this._textureHeight || (this._handle?.release(), this._handle = this._fbos.acquire(this._textureWidth, this._textureHeight, \"shadow map\", E.RGBA4)), this._handle?.acquireDepth(U.DEPTH16_BUFFER);\n  }\n  _discardSnapshot(t) {\n    this._snapshots[t] = i(this._snapshots[t]);\n  }\n  _discardSnapshots() {\n    for (let t = 0; t < this._snapshots.length; ++t) this._discardSnapshot(t);\n    this._snapshots.length = 0;\n  }\n  _bindFbo() {\n    this._fbos.rctx.bindFramebuffer(this._handle?.fbo);\n  }\n  _constructCascade(t, s, e, i) {\n    const a = this._cascades[t],\n      o = -this._cascadeDistances[t],\n      n = -this._cascadeDistances[t + 1],\n      c = (s[10] * o + s[14]) / Math.abs(s[11] * o + s[15]),\n      l = (s[10] * n + s[14]) / Math.abs(s[11] * n + s[15]);\n    V(c < l);\n    for (let r = 0; r < 8; ++r) {\n      v(J, r % 4 == 0 || r % 4 == 3 ? -1 : 1, r % 4 == 0 || r % 4 == 1 ? -1 : 1, r < 4 ? c : l, 1);\n      const t = K[r];\n      S(t, J, this._projectionViewInverse), t[0] /= t[3], t[1] /= t[3], t[2] /= t[3];\n    }\n    T(et, K[0]), a.camera.viewMatrix = r(k, this._modelViewLight, et);\n    for (let r = 0; r < 8; ++r) y(K[r], K[r], a.camera.viewMatrix);\n    let d = K[0][2],\n      m = K[0][2];\n    for (let r = 1; r < 8; ++r) d = Math.min(d, K[r][2]), m = Math.max(m, K[r][2]);\n    d -= 200, m += 200, a.camera.near = -m, a.camera.far = -d, jt(e, i, d, m, a.camera), h(a.lightMat, a.camera.projectionMatrix, a.camera.viewMatrix);\n    const u = this._textureHeight;\n    a.camera.viewport = [t * u, 0, u, u];\n  }\n  _setupMatrices(t, s) {\n    h(this._projectionView, t.projectionMatrix, t.viewMatrix), o(this._projectionViewInverse, this._projectionView);\n    const e = this._viewingMode === O.Global ? t.eye : D(et, 0, 0, 1);\n    n(this._modelViewLight, [0, 0, 0], [-s[0], -s[1], -s[2]], e);\n  }\n  _computeCascadeDistances(t, e, i) {\n    const a = i ? this.settings.maxNumCascadesHighQuality : this.settings.maxNumCascadesLowQuality;\n    this._numCascades = Math.min(1 + Math.floor(N(e / t, 4)), a);\n    const r = (e - t) / this._numCascades,\n      h = (e / t) ** (1 / this._numCascades);\n    let o = t,\n      n = t;\n    for (let c = 0; c < this._numCascades + 1; ++c) this._cascadeDistances[c] = s(o, n, this.settings.splitSchemeLambda), o *= h, n += r;\n  }\n  get test() {}\n}\nconst k = l(),\n  J = R(),\n  K = [];\nfor (let yt = 0; yt < 8; ++yt) K.push(R());\nconst Y = M(),\n  Z = M(),\n  $ = M(),\n  tt = M(),\n  st = M(),\n  et = H(),\n  it = [],\n  at = l(),\n  rt = c.concat(c, c, c, c),\n  ht = M(),\n  ot = M(),\n  nt = [M(), M(), M(), M()],\n  ct = M(),\n  lt = M(),\n  dt = M(),\n  mt = M(),\n  ut = M(),\n  _t = M(),\n  ft = M();\nfunction gt(t, s, e, i, a, r, h, o) {\n  d(ht, 0, 0);\n  for (let d = 0; d < 4; ++d) m(ht, ht, t[d]);\n  u(ht, ht, .25), d(ot, 0, 0);\n  for (let d = 4; d < 8; ++d) m(ot, ot, t[d]);\n  u(ot, ot, .25), _(nt[0], t[4], t[5], .5), _(nt[1], t[5], t[6], .5), _(nt[2], t[6], t[7], .5), _(nt[3], t[7], t[4], .5);\n  let n = 0,\n    c = f(nt[0], ht);\n  for (let d = 1; d < 4; ++d) {\n    const t = f(nt[d], ht);\n    t < c && (c = t, n = d);\n  }\n  g(ct, nt[n], t[n + 4]);\n  const l = ct[0];\n  let M, C;\n  ct[0] = -ct[1], ct[1] = l, g(lt, ot, ht), p(lt, ct) < 0 && x(ct, ct), _(ct, ct, lt, e), b(ct, ct), M = C = p(g(dt, t[0], ht), ct);\n  for (let d = 1; d < 8; ++d) {\n    const s = p(g(dt, t[d], ht), ct);\n    s < M ? M = s : s > C && (C = s);\n  }\n  w(i, ht), u(dt, ct, M - s), m(i, i, dt);\n  let j = -1,\n    T = 1,\n    y = 0,\n    D = 0;\n  for (let d = 0; d < 8; ++d) {\n    g(mt, t[d], i), b(mt, mt);\n    const s = ct[0] * mt[1] - ct[1] * mt[0];\n    s > 0 ? s > j && (j = s, y = d) : s < T && (T = s, D = d);\n  }\n  A(j > 0, \"leftArea\"), A(T < 0, \"rightArea\"), u(ut, ct, M), m(ut, ut, ht), u(_t, ct, C), m(_t, _t, ht), ft[0] = -ct[1], ft[1] = ct[0];\n  const H = B(i, t[D], _t, m(dt, _t, ft), 1, a),\n    v = B(i, t[y], _t, dt, 1, r),\n    S = B(i, t[y], ut, m(dt, ut, ft), 1, h),\n    R = B(i, t[D], ut, dt, 1, o);\n  A(H, \"rayRay\"), A(v, \"rayRay\"), A(S, \"rayRay\"), A(R, \"rayRay\");\n}\nfunction pt(t, s) {\n  return 3 * s + t;\n}\nconst xt = M();\nfunction bt(t, s) {\n  return d(xt, t[s], t[s + 3]), xt;\n}\nconst wt = M(),\n  Mt = a();\nfunction Ct(t, s, e, i, a) {\n  g(wt, e, i), u(wt, wt, .5), Mt[0] = wt[0], Mt[1] = wt[1], Mt[2] = 0, Mt[3] = wt[1], Mt[4] = -wt[0], Mt[5] = 0, Mt[6] = wt[0] * wt[0] + wt[1] * wt[1], Mt[7] = wt[0] * wt[1] - wt[1] * wt[0], Mt[8] = 1, Mt[pt(0, 2)] = -p(bt(Mt, 0), t), Mt[pt(1, 2)] = -p(bt(Mt, 1), t);\n  let r = p(bt(Mt, 0), e) + Mt[pt(0, 2)],\n    h = p(bt(Mt, 1), e) + Mt[pt(1, 2)],\n    o = p(bt(Mt, 0), i) + Mt[pt(0, 2)],\n    n = p(bt(Mt, 1), i) + Mt[pt(1, 2)];\n  r = -(r + o) / (h + n), Mt[pt(0, 0)] += Mt[pt(1, 0)] * r, Mt[pt(0, 1)] += Mt[pt(1, 1)] * r, Mt[pt(0, 2)] += Mt[pt(1, 2)] * r, r = 1 / (p(bt(Mt, 0), e) + Mt[pt(0, 2)]), h = 1 / (p(bt(Mt, 1), e) + Mt[pt(1, 2)]), Mt[pt(0, 0)] *= r, Mt[pt(0, 1)] *= r, Mt[pt(0, 2)] *= r, Mt[pt(1, 0)] *= h, Mt[pt(1, 1)] *= h, Mt[pt(1, 2)] *= h, Mt[pt(2, 0)] = Mt[pt(1, 0)], Mt[pt(2, 1)] = Mt[pt(1, 1)], Mt[pt(2, 2)] = Mt[pt(1, 2)], Mt[pt(1, 2)] += 1, r = p(bt(Mt, 1), s) + Mt[pt(1, 2)], h = p(bt(Mt, 2), s) + Mt[pt(2, 2)], o = p(bt(Mt, 1), e) + Mt[pt(1, 2)], n = p(bt(Mt, 2), e) + Mt[pt(2, 2)], r = -.5 * (r / h + o / n), Mt[pt(1, 0)] += Mt[pt(2, 0)] * r, Mt[pt(1, 1)] += Mt[pt(2, 1)] * r, Mt[pt(1, 2)] += Mt[pt(2, 2)] * r, r = p(bt(Mt, 1), s) + Mt[pt(1, 2)], h = p(bt(Mt, 2), s) + Mt[pt(2, 2)], o = -h / r, Mt[pt(1, 0)] *= o, Mt[pt(1, 1)] *= o, Mt[pt(1, 2)] *= o, a[0] = Mt[0], a[1] = Mt[1], a[2] = 0, a[3] = Mt[2], a[4] = Mt[3], a[5] = Mt[4], a[6] = 0, a[7] = Mt[5], a[8] = 0, a[9] = 0, a[10] = 1, a[11] = 0, a[12] = Mt[6], a[13] = Mt[7], a[14] = 0, a[15] = Mt[8];\n}\nfunction jt(t, s, i, a, r) {\n  const h = 1 / K[0][3],\n    o = 1 / K[4][3];\n  V(h < o);\n  let n = h + Math.sqrt(h * o);\n  const c = Math.sin(e(t[2] * s[0] + t[6] * s[1] + t[10] * s[2]));\n  n /= c, gt(K, n, c, Y, Z, $, tt, st), Ct(Y, Z, tt, st, r.projectionMatrix), r.projectionMatrix[10] = 2 / (i - a), r.projectionMatrix[14] = -(i + a) / (i - a);\n}\nfunction Tt(t) {\n  let {\n    near: s,\n    far: e\n  } = t;\n  return s < 2 && (s = 2), e < 2 && (e = 2), s >= e && (s = 2, e = 4), {\n    near: s,\n    far: e\n  };\n}\nexport { X as ShadowMap, P as SnapshotSlot };","map":{"version":3,"names":["has","clamp","t","lerp","s","acosClamped","e","releaseMaybe","i","create","a","translate","r","multiply","h","invert","o","lookAt","n","IDENTITY","c","l","set","d","add","m","scale","u","_","squaredDistance","f","subtract","g","dot","p","negate","x","normalize","b","copy","w","M","C","j","v","T","y","D","H","S","R","ViewingMode","O","ColorFormat","E","DepthFormat","U","CascadeCamera","F","applyTextureResizeModulo","L","applyTextureResizeFloorModulo","Q","assert","V","logWithBase","N","verify","A","rayRay2D","B","TextureType","I","FramebufferBit","W","Texture","z","P","Highlight","ExcludeHighlight","q","constructor","camera","lightMat","G","maxNumCascadesHighQuality","maxNumCascadesLowQuality","textureSizeModHighQuality","textureSizeModLowQuality","splitSchemeLambda","X","_fbos","_viewingMode","_enabled","_snapshots","Array","_textureHeight","_numCascades","settings","_projectionView","_projectionViewInverse","_modelViewLight","_cascadeDistances","_usedCascadeDistances","_cascades","_lastOrigin","_maxTextureWidth","Math","min","rctx","parameters","maxTextureSize","dispose","enabled","disposeOffscreenBuffers","depthTexture","_handle","getTexture","_textureWidth","numCascades","cascadeDistances","_discardSnapshots","maxCascades","floor","ready","cascades","it","length","start","near","far","Tt","_computeCascadeDistances","_computeTextureHeight","_setupMatrices","viewMatrix","projectionMatrix","_constructCascade","clear","finish","detachDepth","getShadowMapMatrices","at","rt","moveSnapshot","release","copySnapshot","descriptor","width","height","acquire","RGBA4","_bindFbo","bindTexture","TEXTURE_UNIT_FOR_UPDATES","gl","copyTexSubImage2D","TEXTURE_2D","getSnapshot","_ensureFbo","setClearColor","COLOR","DEPTH","window","devicePixelRatio","pixelRatio","max","fullWidth","fullHeight","fbo","acquireDepth","DEPTH16_BUFFER","_discardSnapshot","bindFramebuffer","abs","J","K","et","k","jt","viewport","Global","eye","test","yt","push","Y","Z","$","tt","st","concat","ht","ot","nt","ct","lt","dt","mt","ut","_t","ft","gt","pt","xt","bt","wt","Mt","Ct","sqrt","sin","ShadowMap","SnapshotSlot"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/3d/webgl-engine/lib/ShadowMap.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport has from\"../../../../core/has.js\";import{clamp as t,lerp as s,acosClamped as e}from\"../../../../core/mathUtils.js\";import{releaseMaybe as i}from\"../../../../core/maybe.js\";import{create as a}from\"../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{translate as r,multiply as h,invert as o,lookAt as n}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{IDENTITY as c,create as l}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{set as d,add as m,scale as u,lerp as _,squaredDistance as f,subtract as g,dot as p,negate as x,normalize as b,copy as w}from\"../../../../core/libs/gl-matrix-2/math/vec2.js\";import{create as M}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{p as C,c as j,v as T,t as y,i as D}from\"../../../../chunks/vec32.js\";import{create as H}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{s as v,t as S}from\"../../../../chunks/vec42.js\";import{create as R}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{ViewingMode as O}from\"../../../ViewingMode.js\";import{ColorFormat as E,DepthFormat as U}from\"../../webgl/formats.js\";import{CascadeCamera as F}from\"./CascadeCamera.js\";import{applyTextureResizeModulo as L,applyTextureResizeFloorModulo as Q}from\"./textureUtils.js\";import{assert as V,logWithBase as N,verify as A,rayRay2D as B}from\"./Util.js\";import{TextureType as I,FramebufferBit as W}from\"../../../webgl/enums.js\";import{Texture as z}from\"../../../webgl/Texture.js\";var P;!function(t){t[t.Highlight=0]=\"Highlight\",t[t.ExcludeHighlight=1]=\"ExcludeHighlight\"}(P||(P={}));class q{constructor(){this.camera=new F,this.lightMat=l()}}class G{constructor(){this.maxNumCascadesHighQuality=4,this.maxNumCascadesLowQuality=4,this.textureSizeModHighQuality=1.3,this.textureSizeModLowQuality=.9,this.splitSchemeLambda=0}}class X{constructor(t,s){this._fbos=t,this._viewingMode=s,this._enabled=!1,this._snapshots=new Array,this._textureHeight=0,this._numCascades=1,this.settings=new G,this._projectionView=l(),this._projectionViewInverse=l(),this._modelViewLight=l(),this._cascadeDistances=[0,0,0,0,0],this._usedCascadeDistances=R(),this._cascades=[new q,new q,new q,new q],this._lastOrigin=null,this._maxTextureWidth=Math.min(has(\"esri-mobile\")?4096:16384,t.rctx.parameters.maxTextureSize)}dispose(){this.enabled=!1,this.disposeOffscreenBuffers()}get depthTexture(){return this._handle?.getTexture()}get _textureWidth(){return this._textureHeight*this._numCascades}get numCascades(){return this._numCascades}get cascadeDistances(){return v(this._usedCascadeDistances,this._cascadeDistances[0],this._numCascades>1?this._cascadeDistances[1]:1/0,this._numCascades>2?this._cascadeDistances[2]:1/0,this._numCascades>3?this._cascadeDistances[3]:1/0)}disposeOffscreenBuffers(){this._handle=i(this._handle),this._discardSnapshots()}set maxCascades(s){this.settings.maxNumCascadesHighQuality=t(Math.floor(s),1,4)}get maxCascades(){return this.settings.maxNumCascadesHighQuality}set enabled(t){this._enabled=t,t||this.disposeOffscreenBuffers()}get enabled(){return this._enabled}get ready(){return this._enabled&&null!=this.depthTexture}get cascades(){for(let t=0;t<this._numCascades;++t)it[t]=this._cascades[t];return it.length=this._numCascades,it}start(t,s,e,i,a){V(this.enabled);const{near:r,far:h}=Tt(e);this._computeCascadeDistances(r,h,i),this._textureHeight=this._computeTextureHeight(t,a,i),this._setupMatrices(t,s);const{viewMatrix:o,projectionMatrix:n}=t;for(let c=0;c<this._numCascades;++c)this._constructCascade(c,n,o,s);this._lastOrigin=null,this.clear()}finish(){V(this.enabled),this._handle?.detachDepth()}getShadowMapMatrices(t){if(!this._lastOrigin||!C(t,this._lastOrigin)){this._lastOrigin=this._lastOrigin||H(),j(this._lastOrigin,t);for(let s=0;s<this._numCascades;++s){r(at,this._cascades[s].lightMat,t);for(let t=0;t<16;++t)rt[16*s+t]=at[t]}}return rt}moveSnapshot(t){V(this.enabled),this._handle?.detachDepth(),this._snapshots[t]?.release(),this._snapshots[t]=this._handle,this._handle=null,this.clear()}copySnapshot(t){const s=this._handle?.getTexture()?.descriptor;if(!this.enabled||!s)return;this._snapshots[t]?.release();const{width:e,height:i}=s,a=t===P.Highlight?\"shadow highlight snapshot\":\"shadow no highlight snapshot\";this._snapshots[t]=this._fbos.acquire(e,i,a,E.RGBA4);const r=this._fbos.rctx;this._bindFbo();const h=r.bindTexture(this._snapshots[t]?.getTexture(),z.TEXTURE_UNIT_FOR_UPDATES);r.gl.copyTexSubImage2D(I.TEXTURE_2D,0,0,0,0,0,e,i),r.bindTexture(h,z.TEXTURE_UNIT_FOR_UPDATES)}getSnapshot(t){return this.enabled?this._snapshots[t]?.getTexture():null}clear(){const t=this._fbos.rctx;this._ensureFbo(),this._bindFbo(),t.setClearColor(1,1,1,1),t.clear(W.COLOR|W.DEPTH)}_computeTextureHeight(t,s,e){const i=Math.min(window.devicePixelRatio,s)/t.pixelRatio,a=e?this.settings.textureSizeModHighQuality:this.settings.textureSizeModLowQuality,r=L(Math.floor(Math.max(t.fullWidth,t.fullHeight)*i*a)),h=Math.min(this._maxTextureWidth,this._numCascades*r);return Q(h/this._numCascades)}_ensureFbo(){this._handle?.fbo?.width===this._textureWidth&&this._handle?.fbo.height===this._textureHeight||(this._handle?.release(),this._handle=this._fbos.acquire(this._textureWidth,this._textureHeight,\"shadow map\",E.RGBA4)),this._handle?.acquireDepth(U.DEPTH16_BUFFER)}_discardSnapshot(t){this._snapshots[t]=i(this._snapshots[t])}_discardSnapshots(){for(let t=0;t<this._snapshots.length;++t)this._discardSnapshot(t);this._snapshots.length=0}_bindFbo(){this._fbos.rctx.bindFramebuffer(this._handle?.fbo)}_constructCascade(t,s,e,i){const a=this._cascades[t],o=-this._cascadeDistances[t],n=-this._cascadeDistances[t+1],c=(s[10]*o+s[14])/Math.abs(s[11]*o+s[15]),l=(s[10]*n+s[14])/Math.abs(s[11]*n+s[15]);V(c<l);for(let r=0;r<8;++r){v(J,r%4==0||r%4==3?-1:1,r%4==0||r%4==1?-1:1,r<4?c:l,1);const t=K[r];S(t,J,this._projectionViewInverse),t[0]/=t[3],t[1]/=t[3],t[2]/=t[3]}T(et,K[0]),a.camera.viewMatrix=r(k,this._modelViewLight,et);for(let r=0;r<8;++r)y(K[r],K[r],a.camera.viewMatrix);let d=K[0][2],m=K[0][2];for(let r=1;r<8;++r)d=Math.min(d,K[r][2]),m=Math.max(m,K[r][2]);d-=200,m+=200,a.camera.near=-m,a.camera.far=-d,jt(e,i,d,m,a.camera),h(a.lightMat,a.camera.projectionMatrix,a.camera.viewMatrix);const u=this._textureHeight;a.camera.viewport=[t*u,0,u,u]}_setupMatrices(t,s){h(this._projectionView,t.projectionMatrix,t.viewMatrix),o(this._projectionViewInverse,this._projectionView);const e=this._viewingMode===O.Global?t.eye:D(et,0,0,1);n(this._modelViewLight,[0,0,0],[-s[0],-s[1],-s[2]],e)}_computeCascadeDistances(t,e,i){const a=i?this.settings.maxNumCascadesHighQuality:this.settings.maxNumCascadesLowQuality;this._numCascades=Math.min(1+Math.floor(N(e/t,4)),a);const r=(e-t)/this._numCascades,h=(e/t)**(1/this._numCascades);let o=t,n=t;for(let c=0;c<this._numCascades+1;++c)this._cascadeDistances[c]=s(o,n,this.settings.splitSchemeLambda),o*=h,n+=r}get test(){}}const k=l(),J=R(),K=[];for(let yt=0;yt<8;++yt)K.push(R());const Y=M(),Z=M(),$=M(),tt=M(),st=M(),et=H(),it=[],at=l(),rt=c.concat(c,c,c,c),ht=M(),ot=M(),nt=[M(),M(),M(),M()],ct=M(),lt=M(),dt=M(),mt=M(),ut=M(),_t=M(),ft=M();function gt(t,s,e,i,a,r,h,o){d(ht,0,0);for(let d=0;d<4;++d)m(ht,ht,t[d]);u(ht,ht,.25),d(ot,0,0);for(let d=4;d<8;++d)m(ot,ot,t[d]);u(ot,ot,.25),_(nt[0],t[4],t[5],.5),_(nt[1],t[5],t[6],.5),_(nt[2],t[6],t[7],.5),_(nt[3],t[7],t[4],.5);let n=0,c=f(nt[0],ht);for(let d=1;d<4;++d){const t=f(nt[d],ht);t<c&&(c=t,n=d)}g(ct,nt[n],t[n+4]);const l=ct[0];let M,C;ct[0]=-ct[1],ct[1]=l,g(lt,ot,ht),p(lt,ct)<0&&x(ct,ct),_(ct,ct,lt,e),b(ct,ct),M=C=p(g(dt,t[0],ht),ct);for(let d=1;d<8;++d){const s=p(g(dt,t[d],ht),ct);s<M?M=s:s>C&&(C=s)}w(i,ht),u(dt,ct,M-s),m(i,i,dt);let j=-1,T=1,y=0,D=0;for(let d=0;d<8;++d){g(mt,t[d],i),b(mt,mt);const s=ct[0]*mt[1]-ct[1]*mt[0];s>0?s>j&&(j=s,y=d):s<T&&(T=s,D=d)}A(j>0,\"leftArea\"),A(T<0,\"rightArea\"),u(ut,ct,M),m(ut,ut,ht),u(_t,ct,C),m(_t,_t,ht),ft[0]=-ct[1],ft[1]=ct[0];const H=B(i,t[D],_t,m(dt,_t,ft),1,a),v=B(i,t[y],_t,dt,1,r),S=B(i,t[y],ut,m(dt,ut,ft),1,h),R=B(i,t[D],ut,dt,1,o);A(H,\"rayRay\"),A(v,\"rayRay\"),A(S,\"rayRay\"),A(R,\"rayRay\")}function pt(t,s){return 3*s+t}const xt=M();function bt(t,s){return d(xt,t[s],t[s+3]),xt}const wt=M(),Mt=a();function Ct(t,s,e,i,a){g(wt,e,i),u(wt,wt,.5),Mt[0]=wt[0],Mt[1]=wt[1],Mt[2]=0,Mt[3]=wt[1],Mt[4]=-wt[0],Mt[5]=0,Mt[6]=wt[0]*wt[0]+wt[1]*wt[1],Mt[7]=wt[0]*wt[1]-wt[1]*wt[0],Mt[8]=1,Mt[pt(0,2)]=-p(bt(Mt,0),t),Mt[pt(1,2)]=-p(bt(Mt,1),t);let r=p(bt(Mt,0),e)+Mt[pt(0,2)],h=p(bt(Mt,1),e)+Mt[pt(1,2)],o=p(bt(Mt,0),i)+Mt[pt(0,2)],n=p(bt(Mt,1),i)+Mt[pt(1,2)];r=-(r+o)/(h+n),Mt[pt(0,0)]+=Mt[pt(1,0)]*r,Mt[pt(0,1)]+=Mt[pt(1,1)]*r,Mt[pt(0,2)]+=Mt[pt(1,2)]*r,r=1/(p(bt(Mt,0),e)+Mt[pt(0,2)]),h=1/(p(bt(Mt,1),e)+Mt[pt(1,2)]),Mt[pt(0,0)]*=r,Mt[pt(0,1)]*=r,Mt[pt(0,2)]*=r,Mt[pt(1,0)]*=h,Mt[pt(1,1)]*=h,Mt[pt(1,2)]*=h,Mt[pt(2,0)]=Mt[pt(1,0)],Mt[pt(2,1)]=Mt[pt(1,1)],Mt[pt(2,2)]=Mt[pt(1,2)],Mt[pt(1,2)]+=1,r=p(bt(Mt,1),s)+Mt[pt(1,2)],h=p(bt(Mt,2),s)+Mt[pt(2,2)],o=p(bt(Mt,1),e)+Mt[pt(1,2)],n=p(bt(Mt,2),e)+Mt[pt(2,2)],r=-.5*(r/h+o/n),Mt[pt(1,0)]+=Mt[pt(2,0)]*r,Mt[pt(1,1)]+=Mt[pt(2,1)]*r,Mt[pt(1,2)]+=Mt[pt(2,2)]*r,r=p(bt(Mt,1),s)+Mt[pt(1,2)],h=p(bt(Mt,2),s)+Mt[pt(2,2)],o=-h/r,Mt[pt(1,0)]*=o,Mt[pt(1,1)]*=o,Mt[pt(1,2)]*=o,a[0]=Mt[0],a[1]=Mt[1],a[2]=0,a[3]=Mt[2],a[4]=Mt[3],a[5]=Mt[4],a[6]=0,a[7]=Mt[5],a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=Mt[6],a[13]=Mt[7],a[14]=0,a[15]=Mt[8]}function jt(t,s,i,a,r){const h=1/K[0][3],o=1/K[4][3];V(h<o);let n=h+Math.sqrt(h*o);const c=Math.sin(e(t[2]*s[0]+t[6]*s[1]+t[10]*s[2]));n/=c,gt(K,n,c,Y,Z,$,tt,st),Ct(Y,Z,tt,st,r.projectionMatrix),r.projectionMatrix[10]=2/(i-a),r.projectionMatrix[14]=-(i+a)/(i-a)}function Tt(t){let{near:s,far:e}=t;return s<2&&(s=2),e<2&&(e=2),s>=e&&(s=2,e=4),{near:s,far:e}}export{X as ShadowMap,P as SnapshotSlot};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}