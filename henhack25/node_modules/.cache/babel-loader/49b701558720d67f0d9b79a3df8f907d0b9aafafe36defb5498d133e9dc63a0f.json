{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { markerSizePerLineWidth as e } from \"../../../../support/engineContent/marker.js\";\nimport { addPixelRatio as r } from \"../util/View.glsl.js\";\nimport { FloatBindUniform as o } from \"../../shaderModules/FloatBindUniform.js\";\nimport { glsl as t } from \"../../shaderModules/glsl.js\";\nimport { LineMarkerSpace as a } from \"../../../shaders/LineMarkerTechniqueConfiguration.js\";\nfunction n(n, i) {\n  const d = n.vertex;\n  r(d), null == d.uniforms.get(\"markerScale\") && d.constants.add(\"markerScale\", \"float\", 1), d.constants.add(\"markerSizePerLineWidth\", \"float\", e).code.add(t`float getLineWidth() {\nreturn max(getSize(), 1.0) * pixelRatio;\n}\nfloat getScreenMarkerSize() {\nreturn markerSizePerLineWidth * markerScale * getLineWidth();\n}`), i.space === a.World && (d.constants.add(\"maxSegmentLengthFraction\", \"float\", .45), d.uniforms.add(new o(\"perRenderPixelRatio\", e => e.camera.perRenderPixelRatio)), d.code.add(t`bool areWorldMarkersHidden(vec4 pos, vec4 other) {\nvec3 midPoint = mix(pos.xyz, other.xyz, 0.5);\nfloat distanceToCamera = length(midPoint);\nfloat screenToWorldRatio = perRenderPixelRatio * distanceToCamera * 0.5;\nfloat worldMarkerSize = getScreenMarkerSize() * screenToWorldRatio;\nfloat segmentLen = length(pos.xyz - other.xyz);\nreturn worldMarkerSize > maxSegmentLengthFraction * segmentLen;\n}\nfloat getWorldMarkerSize(vec4 pos) {\nfloat distanceToCamera = length(pos.xyz);\nfloat screenToWorldRatio = perRenderPixelRatio * distanceToCamera * 0.5;\nreturn getScreenMarkerSize() * screenToWorldRatio;\n}`));\n}\nexport { n as MarkerSizing };","map":{"version":3,"names":["markerSizePerLineWidth","e","addPixelRatio","r","FloatBindUniform","o","glsl","t","LineMarkerSpace","a","n","i","d","vertex","uniforms","get","constants","add","code","space","World","camera","perRenderPixelRatio","MarkerSizing"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MarkerSizing.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{markerSizePerLineWidth as e}from\"../../../../support/engineContent/marker.js\";import{addPixelRatio as r}from\"../util/View.glsl.js\";import{FloatBindUniform as o}from\"../../shaderModules/FloatBindUniform.js\";import{glsl as t}from\"../../shaderModules/glsl.js\";import{LineMarkerSpace as a}from\"../../../shaders/LineMarkerTechniqueConfiguration.js\";function n(n,i){const d=n.vertex;r(d),null==d.uniforms.get(\"markerScale\")&&d.constants.add(\"markerScale\",\"float\",1),d.constants.add(\"markerSizePerLineWidth\",\"float\",e).code.add(t`float getLineWidth() {\nreturn max(getSize(), 1.0) * pixelRatio;\n}\nfloat getScreenMarkerSize() {\nreturn markerSizePerLineWidth * markerScale * getLineWidth();\n}`),i.space===a.World&&(d.constants.add(\"maxSegmentLengthFraction\",\"float\",.45),d.uniforms.add(new o(\"perRenderPixelRatio\",(e=>e.camera.perRenderPixelRatio))),d.code.add(t`bool areWorldMarkersHidden(vec4 pos, vec4 other) {\nvec3 midPoint = mix(pos.xyz, other.xyz, 0.5);\nfloat distanceToCamera = length(midPoint);\nfloat screenToWorldRatio = perRenderPixelRatio * distanceToCamera * 0.5;\nfloat worldMarkerSize = getScreenMarkerSize() * screenToWorldRatio;\nfloat segmentLen = length(pos.xyz - other.xyz);\nreturn worldMarkerSize > maxSegmentLengthFraction * segmentLen;\n}\nfloat getWorldMarkerSize(vec4 pos) {\nfloat distanceToCamera = length(pos.xyz);\nfloat screenToWorldRatio = perRenderPixelRatio * distanceToCamera * 0.5;\nreturn getScreenMarkerSize() * screenToWorldRatio;\n}`))}export{n as MarkerSizing};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,sBAAsB,IAAIC,CAAC,QAAK,6CAA6C;AAAC,SAAOC,aAAa,IAAIC,CAAC,QAAK,sBAAsB;AAAC,SAAOC,gBAAgB,IAAIC,CAAC,QAAK,yCAAyC;AAAC,SAAOC,IAAI,IAAIC,CAAC,QAAK,6BAA6B;AAAC,SAAOC,eAAe,IAAIC,CAAC,QAAK,sDAAsD;AAAC,SAASC,CAACA,CAACA,CAAC,EAACC,CAAC,EAAC;EAAC,MAAMC,CAAC,GAACF,CAAC,CAACG,MAAM;EAACV,CAAC,CAACS,CAAC,CAAC,EAAC,IAAI,IAAEA,CAAC,CAACE,QAAQ,CAACC,GAAG,CAAC,aAAa,CAAC,IAAEH,CAAC,CAACI,SAAS,CAACC,GAAG,CAAC,aAAa,EAAC,OAAO,EAAC,CAAC,CAAC,EAACL,CAAC,CAACI,SAAS,CAACC,GAAG,CAAC,wBAAwB,EAAC,OAAO,EAAChB,CAAC,CAAC,CAACiB,IAAI,CAACD,GAAG,CAACV,CAAC;AACjhB;AACA;AACA;AACA;AACA,EAAE,CAAC,EAACI,CAAC,CAACQ,KAAK,KAAGV,CAAC,CAACW,KAAK,KAAGR,CAAC,CAACI,SAAS,CAACC,GAAG,CAAC,0BAA0B,EAAC,OAAO,EAAC,GAAG,CAAC,EAACL,CAAC,CAACE,QAAQ,CAACG,GAAG,CAAC,IAAIZ,CAAC,CAAC,qBAAqB,EAAEJ,CAAC,IAAEA,CAAC,CAACoB,MAAM,CAACC,mBAAoB,CAAC,CAAC,EAACV,CAAC,CAACM,IAAI,CAACD,GAAG,CAACV,CAAC;AAC3K;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,CAAC,CAAC;AAAA;AAAC,SAAOG,CAAC,IAAIa,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}