{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { throwIfAborted as e } from \"../../../../../core/promiseUtils.js\";\nimport { GLB as t } from \"./glb.js\";\nimport { GLTF as r } from \"./gltf.js\";\nimport { ImageOutputType as o, BufferOutputType as s } from \"./types.js\";\nexport { AlphaMode, AttributeType, ColorMode, MeshMode } from \"./types.js\";\nimport { isArrayBufferPNG as n, encodeBase64DataUri as a } from \"./imageutils.js\";\nexport { Asset } from \"./asset.js\";\nexport { Scene } from \"./scene.js\";\nexport { Node } from \"./node.js\";\nconst f = \"model.gltf\",\n  i = \"model.glb\";\nasync function u(u, l) {\n  const c = new r(u, l).gltf,\n    p = c.extras.promises;\n  let m = 1,\n    g = 1,\n    d = null;\n  await Promise.allSettled(p), e(l.signal);\n  const b = l.jsonSpacing ?? 4,\n    j = new Map(),\n    w = JSON.stringify(c, (e, t) => {\n      if (\"extras\" !== e) {\n        if (t instanceof ArrayBuffer) {\n          if (n(t)) switch (l.output?.image) {\n            case o.DataURI:\n            case o.GLB:\n              break;\n            case o.External:\n            default:\n              {\n                const e = `img${g}.png`;\n                return g++, j.set(e, t), e;\n              }\n          }\n          switch (l.output?.buffer) {\n            case s.DataURI:\n              return a(t);\n            case s.GLB:\n              if (d) throw new Error(\"Already encountered an ArrayBuffer, there should only be one in the GLB format.\");\n              return void (d = t);\n            case s.External:\n            default:\n              {\n                const e = `data${m}.bin`;\n                return m++, j.set(e, t), e;\n              }\n          }\n        }\n        return t;\n      }\n    }, b);\n  return l.output?.buffer === s.GLB || l.output?.image === o.GLB ? j.set(i, new t(w, d).buffer) : j.set(f, w), j;\n}\nasync function l(e, t) {\n  const r = (await u(e, {\n    output: {\n      buffer: s.GLB,\n      image: o.GLB\n    },\n    jsonSpacing: 0,\n    ...t\n  })).get(i);\n  if (!(r && r instanceof ArrayBuffer)) throw new Error(\"failed to export to glb\");\n  return r;\n}\nexport { s as BufferOutputType, o as ImageOutputType, l as exportGLB, u as exportGLTF, i as modelNameGlb, f as modelNameGltf };","map":{"version":3,"names":["throwIfAborted","e","GLB","t","GLTF","r","ImageOutputType","o","BufferOutputType","s","AlphaMode","AttributeType","ColorMode","MeshMode","isArrayBufferPNG","n","encodeBase64DataUri","a","Asset","Scene","Node","f","i","u","l","c","gltf","p","extras","promises","m","g","d","Promise","allSettled","signal","b","jsonSpacing","j","Map","w","JSON","stringify","ArrayBuffer","output","image","DataURI","External","set","buffer","Error","get","exportGLB","exportGLTF","modelNameGlb","modelNameGltf"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/geometry/support/meshUtils/exporters/gltf/index.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{throwIfAborted as e}from\"../../../../../core/promiseUtils.js\";import{GLB as t}from\"./glb.js\";import{GLTF as r}from\"./gltf.js\";import{ImageOutputType as o,BufferOutputType as s}from\"./types.js\";export{AlphaMode,AttributeType,ColorMode,MeshMode}from\"./types.js\";import{isArrayBufferPNG as n,encodeBase64DataUri as a}from\"./imageutils.js\";export{Asset}from\"./asset.js\";export{Scene}from\"./scene.js\";export{Node}from\"./node.js\";const f=\"model.gltf\",i=\"model.glb\";async function u(u,l){const c=new r(u,l).gltf,p=c.extras.promises;let m=1,g=1,d=null;await Promise.allSettled(p),e(l.signal);const b=l.jsonSpacing??4,j=new Map,w=JSON.stringify(c,((e,t)=>{if(\"extras\"!==e){if(t instanceof ArrayBuffer){if(n(t))switch(l.output?.image){case o.DataURI:case o.GLB:break;case o.External:default:{const e=`img${g}.png`;return g++,j.set(e,t),e}}switch(l.output?.buffer){case s.DataURI:return a(t);case s.GLB:if(d)throw new Error(\"Already encountered an ArrayBuffer, there should only be one in the GLB format.\");return void(d=t);case s.External:default:{const e=`data${m}.bin`;return m++,j.set(e,t),e}}}return t}}),b);return l.output?.buffer===s.GLB||l.output?.image===o.GLB?j.set(i,new t(w,d).buffer):j.set(f,w),j}async function l(e,t){const r=(await u(e,{output:{buffer:s.GLB,image:o.GLB},jsonSpacing:0,...t})).get(i);if(!(r&&r instanceof ArrayBuffer))throw new Error(\"failed to export to glb\");return r}export{s as BufferOutputType,o as ImageOutputType,l as exportGLB,u as exportGLTF,i as modelNameGlb,f as modelNameGltf};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}