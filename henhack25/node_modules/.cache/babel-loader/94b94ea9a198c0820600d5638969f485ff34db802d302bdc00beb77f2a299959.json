{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../../../chunks/tslib.es6.js\";\nimport e from \"../../../../../core/Accessor.js\";\nimport { deg2rad as o, rad2deg as i } from \"../../../../../core/mathUtils.js\";\nimport { when as n, sync as r } from \"../../../../../core/reactiveUtils.js\";\nimport { property as s } from \"../../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../../core/has.js\";\nimport \"../../../../../core/Logger.js\";\nimport \"../../../../../core/RandomLCG.js\";\nimport { subclass as a } from \"../../../../../core/accessorSupport/decorators/subclass.js\";\nimport { axis as l, angle as c } from \"../../../../../geometry/support/axisAngleDegrees.js\";\nimport { manipulatedObjectGeometry as p } from \"../manipulatedObjectUtils.js\";\nlet g = class extends e {\n  constructor(t) {\n    super(t), this._interactionState = null;\n  }\n  initialize() {\n    this.addHandles([n(() => {\n      const t = this._interactionState;\n      return t && t.angle !== t.previousAngle ? {\n        interactionState: t,\n        angle: t.state.angle\n      } : null;\n    }, _ref => {\n      let {\n        interactionState: t\n      } = _ref;\n      this._updateMeshRotation(t);\n    }, r), n(() => {\n      const t = this._interactionState;\n      return t && t.scale !== t.previousScale ? {\n        interactionState: t,\n        scale: t.state.scale\n      } : null;\n    }, _ref2 => {\n      let {\n        interactionState: t\n      } = _ref2;\n      this._updateMeshSize(t);\n    }, r)]);\n  }\n  get geometry() {\n    const t = p(this.object);\n    return \"mesh\" === t?.type ? t : null;\n  }\n  get initialAngle() {\n    return this._interactionState?.initialAngle ?? 0;\n  }\n  get angle() {\n    const t = this.geometry?.transform;\n    if (null == t) return this._interactionState?.angle ?? 0;\n    const e = l(t.rotation)[2];\n    return Math.abs(e) > .999999 ? o(c(t.rotation)) * Math.sign(e) : 0;\n  }\n  get angleClockwise() {\n    return -this.angle;\n  }\n  get relativeAngle() {\n    return this.angle - this.initialAngle;\n  }\n  get relativeAngleClockwise() {\n    return -this.relativeAngle;\n  }\n  get scale() {\n    return this._interactionState?.scale ?? 1;\n  }\n  startInteraction() {\n    const t = new u({\n      angle: this.angle\n    });\n    this._interactionState = t;\n    const e = () => {\n      this._interactionState = null;\n    };\n    return {\n      state: t,\n      done: e,\n      cancel: () => {\n        t.cancel(), e();\n      }\n    };\n  }\n  createUndoRecord() {\n    return this.object.createUndoRecord();\n  }\n  _updateMeshRotation(t) {\n    const {\n      geometry: e\n    } = this;\n    if (null == e) return;\n    const {\n      angle: o,\n      previousAngle: n\n    } = t;\n    t.previousAngle = o;\n    const r = i(o - n);\n    e.rotate(0, 0, r);\n  }\n  _updateMeshSize(t) {\n    const {\n      geometry: e\n    } = this;\n    if (null == e) return;\n    const {\n      scale: o,\n      previousScale: i\n    } = t;\n    t.previousScale = o;\n    const n = o / i;\n    e.scale(n);\n  }\n};\nt([s({\n  constructOnly: !0\n})], g.prototype, \"object\", void 0), t([s()], g.prototype, \"geometry\", null), t([s({\n  constructOnly: !0\n})], g.prototype, \"viewingMode\", void 0), t([s()], g.prototype, \"initialAngle\", null), t([s()], g.prototype, \"angle\", null), t([s()], g.prototype, \"angleClockwise\", null), t([s()], g.prototype, \"relativeAngle\", null), t([s()], g.prototype, \"relativeAngleClockwise\", null), t([s()], g.prototype, \"scale\", null), t([s()], g.prototype, \"_interactionState\", void 0), g = t([a(\"esri.views.3d.interactive.editingTools.transform.ScaleRotateMeshAdapter\")], g);\nlet u = class extends e {\n  get state() {\n    const {\n      angle: t,\n      scale: e\n    } = this;\n    return {\n      angle: t,\n      scale: e\n    };\n  }\n  constructor(t) {\n    super(t), this.angle = 0, this.initialAngle = 0, this.previousAngle = 0, this.previousScale = 1, this.scale = 1, this.initialAngle = t.angle, this.previousAngle = t.angle;\n  }\n  cancel() {\n    this.angle = this.initialAngle, this.scale = 1;\n  }\n};\nt([s()], u.prototype, \"angle\", void 0), t([s()], u.prototype, \"initialAngle\", void 0), t([s()], u.prototype, \"previousAngle\", void 0), t([s()], u.prototype, \"previousScale\", void 0), t([s()], u.prototype, \"scale\", void 0), t([s()], u.prototype, \"state\", null), u = t([a(\"esri.views.3d.interactive.editingTools.transform.ScaleRotateMeshAdapter.InteractionState\")], u);\nexport { g as ScaleRotateMeshAdapter };","map":{"version":3,"names":["_","t","e","deg2rad","o","rad2deg","i","when","n","sync","r","property","s","subclass","a","axis","l","angle","c","manipulatedObjectGeometry","p","g","constructor","_interactionState","initialize","addHandles","previousAngle","interactionState","state","_ref","_updateMeshRotation","scale","previousScale","_ref2","_updateMeshSize","geometry","object","type","initialAngle","transform","rotation","Math","abs","sign","angleClockwise","relativeAngle","relativeAngleClockwise","startInteraction","u","done","cancel","createUndoRecord","rotate","constructOnly","prototype","ScaleRotateMeshAdapter"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/ScaleRotateMeshAdapter.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../../chunks/tslib.es6.js\";import e from\"../../../../../core/Accessor.js\";import{deg2rad as o,rad2deg as i}from\"../../../../../core/mathUtils.js\";import{when as n,sync as r}from\"../../../../../core/reactiveUtils.js\";import{property as s}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/RandomLCG.js\";import{subclass as a}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{axis as l,angle as c}from\"../../../../../geometry/support/axisAngleDegrees.js\";import{manipulatedObjectGeometry as p}from\"../manipulatedObjectUtils.js\";let g=class extends e{constructor(t){super(t),this._interactionState=null}initialize(){this.addHandles([n((()=>{const t=this._interactionState;return t&&t.angle!==t.previousAngle?{interactionState:t,angle:t.state.angle}:null}),(({interactionState:t})=>{this._updateMeshRotation(t)}),r),n((()=>{const t=this._interactionState;return t&&t.scale!==t.previousScale?{interactionState:t,scale:t.state.scale}:null}),(({interactionState:t})=>{this._updateMeshSize(t)}),r)])}get geometry(){const t=p(this.object);return\"mesh\"===t?.type?t:null}get initialAngle(){return this._interactionState?.initialAngle??0}get angle(){const t=this.geometry?.transform;if(null==t)return this._interactionState?.angle??0;const e=l(t.rotation)[2];return Math.abs(e)>.999999?o(c(t.rotation))*Math.sign(e):0}get angleClockwise(){return-this.angle}get relativeAngle(){return this.angle-this.initialAngle}get relativeAngleClockwise(){return-this.relativeAngle}get scale(){return this._interactionState?.scale??1}startInteraction(){const t=new u({angle:this.angle});this._interactionState=t;const e=()=>{this._interactionState=null};return{state:t,done:e,cancel:()=>{t.cancel(),e()}}}createUndoRecord(){return this.object.createUndoRecord()}_updateMeshRotation(t){const{geometry:e}=this;if(null==e)return;const{angle:o,previousAngle:n}=t;t.previousAngle=o;const r=i(o-n);e.rotate(0,0,r)}_updateMeshSize(t){const{geometry:e}=this;if(null==e)return;const{scale:o,previousScale:i}=t;t.previousScale=o;const n=o/i;e.scale(n)}};t([s({constructOnly:!0})],g.prototype,\"object\",void 0),t([s()],g.prototype,\"geometry\",null),t([s({constructOnly:!0})],g.prototype,\"viewingMode\",void 0),t([s()],g.prototype,\"initialAngle\",null),t([s()],g.prototype,\"angle\",null),t([s()],g.prototype,\"angleClockwise\",null),t([s()],g.prototype,\"relativeAngle\",null),t([s()],g.prototype,\"relativeAngleClockwise\",null),t([s()],g.prototype,\"scale\",null),t([s()],g.prototype,\"_interactionState\",void 0),g=t([a(\"esri.views.3d.interactive.editingTools.transform.ScaleRotateMeshAdapter\")],g);let u=class extends e{get state(){const{angle:t,scale:e}=this;return{angle:t,scale:e}}constructor(t){super(t),this.angle=0,this.initialAngle=0,this.previousAngle=0,this.previousScale=1,this.scale=1,this.initialAngle=t.angle,this.previousAngle=t.angle}cancel(){this.angle=this.initialAngle,this.scale=1}};t([s()],u.prototype,\"angle\",void 0),t([s()],u.prototype,\"initialAngle\",void 0),t([s()],u.prototype,\"previousAngle\",void 0),t([s()],u.prototype,\"previousScale\",void 0),t([s()],u.prototype,\"scale\",void 0),t([s()],u.prototype,\"state\",null),u=t([a(\"esri.views.3d.interactive.editingTools.transform.ScaleRotateMeshAdapter.InteractionState\")],u);export{g as ScaleRotateMeshAdapter};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}