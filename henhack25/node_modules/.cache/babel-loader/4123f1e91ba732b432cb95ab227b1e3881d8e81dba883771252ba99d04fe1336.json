{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../Graphic.js\";\nimport { getContrast as i } from \"../../../../core/colorUtils.js\";\nimport { destroyMaybe as s } from \"../../../../core/maybe.js\";\nimport { watch as o } from \"../../../../core/reactiveUtils.js\";\nimport { getMetersPerUnitForSR as r } from \"../../../../core/unitUtils.js\";\nimport { property as a } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/Logger.js\";\nimport \"../../../../core/RandomLCG.js\";\nimport { subclass as n } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { subtract as c, normalize as h } from \"../../../../core/libs/gl-matrix-2/math/vec2.js\";\nimport { create as l, UNIT_X as p } from \"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";\nimport { h as d, l as _, n as m, g as u, m as y, d as g } from \"../../../../chunks/vec32.js\";\nimport { create as f } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport v from \"../../../../geometry/Point.js\";\nimport G from \"../../../../geometry/Polygon.js\";\nimport { project as w, initializeProjection as R } from \"../../../../geometry/projection.js\";\nimport { d as b, a as j } from \"../../../../chunks/boundedPlane.js\";\nimport { equals as C } from \"../../../../geometry/support/spatialReferenceUtils.js\";\nimport k from \"../../../../layers/GraphicsLayer.js\";\nimport P from \"../../../../symbols/SimpleFillSymbol.js\";\nimport S from \"../../../../symbols/SimpleMarkerSymbol.js\";\nimport { ViewingMode as T } from \"../../../ViewingMode.js\";\nimport { DragManipulation as A } from \"./manipulations/DragManipulation.js\";\nimport { RotateManipulation as M } from \"./manipulations/RotateManipulation.js\";\nimport { ScaleManipulation as x } from \"./manipulations/ScaleManipulation.js\";\nimport { PreserveAspectRatio as O, SnapRotation as D } from \"./manipulations/utils.js\";\nimport { InteractiveToolBase as U } from \"../../../interactive/InteractiveToolBase.js\";\nimport { mediaKeys as E, KeyBindings as L } from \"../../../interactive/keybindings.js\";\nimport { EditGeometry as B } from \"../../../interactive/editGeometry/EditGeometry.js\";\nimport { EditGeometryOperations as H } from \"../../../interactive/editGeometry/EditGeometryOperations.js\";\nimport { AccumulationBehavior as I } from \"../../../interactive/editGeometry/interfaces.js\";\nimport { AccumulationType as V } from \"../../../interactive/editGeometry/operations/UpdateVertices.js\";\nimport { calculateOrientedBounds as z } from \"../../../interactive/editGeometry/support/editPlaneUtils.js\";\nimport { findFirstGraphicHit as N } from \"../../../support/hitTestSelectUtils.js\";\nimport { createScreenPointFromEvent as W } from \"../../../support/screenUtils.js\";\nconst q = 80,\n  F = 10,\n  J = 30,\n  K = [[1, 1], [1, -1], [-1, -1], [-1, 1], [1, 0], [0, -1], [-1, 0], [0, 1]],\n  Q = 1,\n  X = 10;\nlet Y = class extends U {\n  constructor(e) {\n    super(e), this._initialControlPoints = null, this._initialGeometry = null, this._graphic = null, this._planeCache = b(), this._displayPlaneCache = b(), this._mainAxisCache = l(), this._rotationHandleCache = f(), this._cornerA = f(), this._cornerB = f(), this._cornerC = f(), this._cornerD = f(), this._avgAB = f(), this._avgBC = f(), this._avgCD = f(), this._avgDA = f(), this._preserveAspectRatio = new O(), this._snapRotation = new D(), this._graphicsLayer = new k({\n      internal: !0,\n      listMode: \"hide\",\n      visible: !1\n    }), this._sharedUndoStack = [], this._sharedRedoStack = [], this._isOpacityToggled = !1, this._factor = Q, this.preserveAspectRatio = null, this.snapRotation = null, this.type = \"transform\";\n  }\n  initialize() {\n    this._initialize();\n  }\n  destroy() {\n    const {\n      map: e\n    } = this.view;\n    this._dragManipulation.destroy(), this._rotateManipulation.destroy(), this._scaleManipulations.forEach(e => e.destroy()), this._editGeometryOperations.destroy(), e.removeMany([this._graphicsLayer]), this._graphicsLayer.removeAll(), this._graphicsLayer = s(this._graphicsLayer), this._initialControlPoints = null, this._initialGeometry = null, this._graphic = null, this._preserveAspectRatio = null, this._snapRotation = null, this._planeCache = null, this._displayPlaneCache = null, this._rotationHandleCache = null, this._mainAxisCache = null, this._cornerA = null, this._cornerB = null, this._cornerC = null, this._cornerD = null, this._avgAB = null, this._avgBC = null, this._avgCD = null, this._avgDA = null, this._sharedUndoStack = null, this._sharedRedoStack = null;\n  }\n  get _plane() {\n    const e = this._graphic.geometry;\n    if (null == e) return null;\n    const t = this._editGeometryOperations.data,\n      i = t.components[0].edges[0],\n      s = c(this._mainAxisCache, i.leftVertex.pos, i.rightVertex.pos);\n    h(s, s);\n    let o = q * this.view.resolution;\n    const a = this.view.spatialReference;\n    return C(a, e.spatialReference) && (o *= r(a) / r(e.spatialReference)), z(s, t, o, this._planeCache);\n  }\n  get _displayPlane() {\n    const e = this._plane;\n    if (!e) return null;\n    const t = this._displayPlaneCache;\n    j(e, t);\n    const i = F * this.view.resolution;\n    return d(t.basis1, t.basis1, 1 + i / _(t.basis1)), d(t.basis2, t.basis2, 1 + i / _(t.basis2)), t;\n  }\n  get _backgroundGraphicGeometry() {\n    const e = this._displayPlane;\n    if (!e) return null;\n    const t = this.view.spatialReference;\n    return this._updateDisplayPlaneConrers(e), new G({\n      spatialReference: t,\n      rings: [[this._cornerA, this._cornerB, this._cornerC, this._cornerD, this._cornerA]]\n    });\n  }\n  get _rotateGraphicGeometry() {\n    const e = this._plane;\n    if (!e) return null;\n    const t = this._rotationHandleCache;\n    return m(t, e.basis1), d(t, t, J * this.view.resolution), u(t, t, e.origin), u(t, t, e.basis1), new v({\n      x: t[0],\n      y: t[1],\n      spatialReference: this.view.spatialReference\n    });\n  }\n  get _scaleGraphicGeometries() {\n    const e = this._displayPlane;\n    if (!e) return [];\n    const t = this.view.spatialReference;\n    this._updateDisplayPlaneConrers(e);\n    const {\n        _cornerA: i,\n        _cornerB: s,\n        _cornerC: o,\n        _cornerD: r\n      } = this,\n      a = y(this._avgAB, i, s, .5),\n      n = y(this._avgBC, s, o, .5),\n      c = y(this._avgCD, o, r, .5),\n      h = y(this._avgDA, r, i, .5);\n    return [new v({\n      x: i[0],\n      y: i[1],\n      spatialReference: t\n    }), new v({\n      x: s[0],\n      y: s[1],\n      spatialReference: t\n    }), new v({\n      x: o[0],\n      y: o[1],\n      spatialReference: t\n    }), new v({\n      x: r[0],\n      y: r[1],\n      spatialReference: t\n    }), new v({\n      x: a[0],\n      y: a[1],\n      spatialReference: t\n    }), new v({\n      x: n[0],\n      y: n[1],\n      spatialReference: t\n    }), new v({\n      x: c[0],\n      y: c[1],\n      spatialReference: t\n    }), new v({\n      x: h[0],\n      y: h[1],\n      spatialReference: t\n    })];\n  }\n  onActivate() {\n    this.visible = !0;\n  }\n  onDeactivate() {\n    this.visible = !1;\n  }\n  onShow() {\n    this._graphicsLayer.visible = !0;\n  }\n  onHide() {\n    this._graphicsLayer.visible = !1;\n  }\n  canUndo() {\n    return this._editGeometryOperations.canUndo;\n  }\n  canRedo() {\n    return this._editGeometryOperations.canRedo;\n  }\n  undo() {\n    this._editGeometryOperations.undo(), this.updateGraphics();\n  }\n  redo() {\n    this._editGeometryOperations.redo(), this.updateGraphics();\n  }\n  refresh() {\n    const {\n        view: e,\n        target: t\n      } = this,\n      i = \"georeference\" in t ? t.georeference.coords : t.geometry,\n      s = this._editGeometryOperations,\n      o = s.data.components[0].vertices,\n      r = B.fromGeometry(w(i, e.spatialReference), T.Local).components[0].vertices;\n    o.forEach((e, t) => {\n      s.setVertexPosition(e, r[t].pos);\n    }), this.updateGraphics();\n  }\n  reset() {\n    const {\n      target: e\n    } = this;\n    if (\"georeference\" in e) {\n      const t = e.georeference;\n      \"control-points\" === t.type && (t.controlPoints = this._initialControlPoints);\n    } else e.geometry = this._initialGeometry;\n    this.refresh(), this._sharedUndoStack.length = 0, this._sharedRedoStack.length = 0;\n  }\n  updateGraphics() {\n    const e = this._editGeometryOperations.data.geometry;\n    if (\"georeference\" in this.target) {\n      this.target.georeference.coords = e;\n    }\n    this._graphic.geometry = e, this._backgroundGraphic.geometry = this._backgroundGraphicGeometry, this._rotateGraphic.geometry = this._rotateGraphicGeometry, this._scaleGraphicGeometries.forEach((e, t) => {\n      this._scaleGraphics[t].geometry = e;\n    });\n  }\n  setSharedUndoStack(e) {\n    this._sharedUndoStack = e;\n  }\n  setSharedRedoStack(e) {\n    this._sharedRedoStack = e;\n  }\n  async _initialize() {\n    const {\n      view: e,\n      target: s\n    } = this;\n    if (\"georeference\" in s) {\n      const e = s.georeference;\n      this._graphic = new t({\n        geometry: e.coords\n      }), this._initialControlPoints = \"control-points\" === e.type ? e.controlPoints : null;\n    } else this._graphic = s, this._initialGeometry = s.geometry;\n    e.map.addMany([this._graphicsLayer]), e.focus(), this.visible = !1, this.finishToolCreation(), await this._loadProjectionEngine(), this._editGeometryOperations = H.fromGeometry(w(this._graphic.geometry, e.spatialReference), T.Local), this._backgroundGraphic = new t({\n      symbol: new P({\n        color: \"transparent\",\n        outline: {\n          type: \"simple-line\",\n          color: e.effectiveTheme.accentColor,\n          width: 2\n        }\n      }),\n      geometry: this._backgroundGraphicGeometry\n    }), this._rotateGraphic = new t({\n      symbol: new S({\n        color: i(e.effectiveTheme.accentColor),\n        outline: {\n          type: \"simple-line\",\n          color: e.effectiveTheme.accentColor,\n          width: 1\n        }\n      }),\n      geometry: this._rotateGraphicGeometry\n    }), this._scaleGraphics = this._scaleGraphicGeometries.map(s => new t({\n      symbol: new S({\n        size: 6,\n        style: \"square\",\n        color: i(e.effectiveTheme.accentColor),\n        outline: {\n          type: \"simple-line\",\n          color: e.effectiveTheme.accentColor,\n          width: 1\n        }\n      }),\n      geometry: s\n    })), this._graphicsLayer.graphics.addMany([this._backgroundGraphic, this._rotateGraphic, ...this._scaleGraphics]), this._dragManipulation = new A({\n      tool: this,\n      view: e,\n      graphic: this._graphic\n    }), this._rotateManipulation = new M({\n      tool: this,\n      view: e,\n      graphic: this._rotateGraphic,\n      snapRotation: this._snapRotation\n    }), this._scaleManipulations = this._scaleGraphics.map((t, i) => new x({\n      tool: this,\n      view: e,\n      graphic: t,\n      direction: K[i],\n      preserveAspectRatio: this._preserveAspectRatio\n    })), this.addHandles([this._dragManipulation.createDragPipeline(this._getInfo.bind(this), this._updateGraphics.bind(this)), this._rotateManipulation.createDragPipeline(this._getInfo.bind(this), this._updateGraphics.bind(this)), ...this._scaleManipulations.map(e => e.createDragPipeline(this._getInfo.bind(this), this._updateGraphics.bind(this))), o(() => this.view.scale, () => this.active ? this.updateGraphics() : null), e.on(\"click\", async t => {\n      if (null != e.activeTool && e.activeTool !== this) return;\n      const i = W(t),\n        o = [];\n      e.map.allLayers.forEach(e => {\n        \"vector-tile\" !== e.type && \"imagery\" !== e.type || o.push(e);\n      });\n      const r = await this.view.hitTest(i, {\n          exclude: o\n        }),\n        a = r.results;\n      if (0 === a.length) e.activeTool = null;else {\n        const t = N(r.results),\n          i = \"georeference\" in s,\n          o = a.map(e => \"media\" === e.type ? e.element : null).filter(Boolean),\n          n = new Set([...this._graphicsLayer.graphics, i ? null : s].filter(Boolean));\n        i && o.includes(s) || null != t && n.has(t.graphic) ? null == e.activeTool && (e.activeTool = this) : e.activeTool = null;\n      }\n    })]);\n    const r = e => {\n      this.addHandles(e.events.on(\"grab-changed\", e => {\n        \"georeference\" in s && (\"start\" === e.action ? s.opacity *= .5 : \"end\" === e.action && (s.opacity *= 2));\n      }));\n    };\n    this._dragManipulation.forEachManipulator(r), this._rotateManipulation.forEachManipulator(r), this._scaleManipulations.forEach(e => e.forEachManipulator(r));\n    const a = new L();\n    a.addToggle(E.preserveAspectRatio, () => {\n      null == this.preserveAspectRatio && (this._preserveAspectRatio.enabled = !this._preserveAspectRatio.enabled);\n    }), a.addToggle(E.rotateIncrements, () => {\n      null == this.snapRotation && (this._snapRotation.enabled = !this._snapRotation.enabled);\n    }), a.add(E.toggleOpacity, () => {\n      \"georeference\" in s && (s.opacity *= this._isOpacityToggled ? 2 : .5, this._isOpacityToggled = !this._isOpacityToggled);\n    }), a.addToggle(E.factorModifier, e => this._factor = \"key-down\" === e.type ? X : Q), a.add(E.scaleUp, () => this._scale(this._factor)), a.add(E.scaleDown, () => this._scale(-this._factor)), a.add(E.moveUp, () => this._move(0, this._factor)), a.add(E.moveDown, () => this._move(0, -this._factor)), a.add(E.moveLeft, () => this._move(-this._factor, 0)), a.add(E.moveRight, () => this._move(this._factor, 0)), this.addHandles([e.on(\"key-down\", t => {\n      e.activeTool === this && a.dispatch(e.inputManager, t);\n    }), e.on(\"key-up\", t => {\n      e.activeTool === this && a.dispatch(e.inputManager, t);\n    })]);\n  }\n  async _loadProjectionEngine() {\n    const e = this._graphic.geometry;\n    return R(e.spatialReference, this.view.spatialReference);\n  }\n  _updateDisplayPlaneConrers(e) {\n    const {\n        basis1: t,\n        basis2: i,\n        origin: s\n      } = e,\n      o = this._cornerA;\n    u(o, s, t), u(o, o, i);\n    const r = this._cornerB;\n    u(r, s, t), g(r, r, i);\n    const a = this._cornerC;\n    g(a, s, t), g(a, a, i);\n    const n = this._cornerD;\n    g(n, s, t), u(n, n, i);\n  }\n  _getInfo() {\n    return {\n      editGeometryOperations: this._editGeometryOperations,\n      plane: this._plane,\n      displayPlane: this._displayPlane\n    };\n  }\n  _updateGraphics(e, t) {\n    \"start\" === e.action && (this._sharedUndoStack.push({\n      tool: this,\n      operation: t\n    }), this._sharedRedoStack.length = 0), this.updateGraphics();\n  }\n  _scale(e) {\n    const t = this._editGeometryOperations,\n      i = t.data.geometry.extent?.width,\n      s = (i + e * this.view.resolution) / i,\n      o = t.scale(this._plane.origin, p, s, s, I.NEW_STEP, V.REPLACE);\n    this._sharedUndoStack.push({\n      tool: this,\n      operation: o\n    }), this._sharedRedoStack.length = 0, this.updateGraphics();\n  }\n  _move(e, t) {\n    const i = this._editGeometryOperations.move(e * this.view.resolution, t * this.view.resolution, 0, I.NEW_STEP);\n    this._sharedUndoStack.push({\n      tool: this,\n      operation: i\n    }), this._sharedRedoStack.length = 0, this.updateGraphics();\n  }\n};\ne([a()], Y.prototype, \"_plane\", null), e([a()], Y.prototype, \"_backgroundGraphicGeometry\", null), e([a()], Y.prototype, \"_rotateGraphicGeometry\", null), e([a()], Y.prototype, \"_scaleGraphicGeometries\", null), e([a()], Y.prototype, \"preserveAspectRatio\", void 0), e([a()], Y.prototype, \"snapRotation\", void 0), e([a({\n  constructOnly: !0,\n  nonNullable: !0\n})], Y.prototype, \"target\", void 0), e([a({\n  readOnly: !0\n})], Y.prototype, \"type\", void 0), e([a({\n  constructOnly: !0\n})], Y.prototype, \"view\", void 0), Y = e([n(\"esri.views.2d.interactive.editingTools.TransformTool\")], Y);\nexport { Y as TransformTool };","map":{"version":3,"names":["_","e","t","getContrast","i","destroyMaybe","s","watch","o","getMetersPerUnitForSR","r","property","a","subclass","n","subtract","c","normalize","h","create","l","UNIT_X","p","d","m","g","u","y","f","v","G","project","w","initializeProjection","R","b","j","equals","C","k","P","S","ViewingMode","T","DragManipulation","A","RotateManipulation","M","ScaleManipulation","x","PreserveAspectRatio","O","SnapRotation","D","InteractiveToolBase","U","mediaKeys","E","KeyBindings","L","EditGeometry","B","EditGeometryOperations","H","AccumulationBehavior","I","AccumulationType","V","calculateOrientedBounds","z","findFirstGraphicHit","N","createScreenPointFromEvent","W","q","F","J","K","Q","X","Y","constructor","_initialControlPoints","_initialGeometry","_graphic","_planeCache","_displayPlaneCache","_mainAxisCache","_rotationHandleCache","_cornerA","_cornerB","_cornerC","_cornerD","_avgAB","_avgBC","_avgCD","_avgDA","_preserveAspectRatio","_snapRotation","_graphicsLayer","internal","listMode","visible","_sharedUndoStack","_sharedRedoStack","_isOpacityToggled","_factor","preserveAspectRatio","snapRotation","type","initialize","_initialize","destroy","map","view","_dragManipulation","_rotateManipulation","_scaleManipulations","forEach","_editGeometryOperations","removeMany","removeAll","_plane","geometry","data","components","edges","leftVertex","pos","rightVertex","resolution","spatialReference","_displayPlane","basis1","basis2","_backgroundGraphicGeometry","_updateDisplayPlaneConrers","rings","_rotateGraphicGeometry","origin","_scaleGraphicGeometries","onActivate","onDeactivate","onShow","onHide","canUndo","canRedo","undo","updateGraphics","redo","refresh","target","georeference","coords","vertices","fromGeometry","Local","setVertexPosition","reset","controlPoints","length","_backgroundGraphic","_rotateGraphic","_scaleGraphics","setSharedUndoStack","setSharedRedoStack","addMany","focus","finishToolCreation","_loadProjectionEngine","symbol","color","outline","effectiveTheme","accentColor","width","size","style","graphics","tool","graphic","direction","addHandles","createDragPipeline","_getInfo","bind","_updateGraphics","scale","active","on","activeTool","allLayers","push","hitTest","exclude","results","element","filter","Boolean","Set","includes","has","events","action","opacity","forEachManipulator","addToggle","enabled","rotateIncrements","add","toggleOpacity","factorModifier","scaleUp","_scale","scaleDown","moveUp","_move","moveDown","moveLeft","moveRight","dispatch","inputManager","editGeometryOperations","plane","displayPlane","operation","extent","NEW_STEP","REPLACE","move","prototype","constructOnly","nonNullable","readOnly","TransformTool"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/interactive/editingTools/TransformTool.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../Graphic.js\";import{getContrast as i}from\"../../../../core/colorUtils.js\";import{destroyMaybe as s}from\"../../../../core/maybe.js\";import{watch as o}from\"../../../../core/reactiveUtils.js\";import{getMetersPerUnitForSR as r}from\"../../../../core/unitUtils.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as n}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{subtract as c,normalize as h}from\"../../../../core/libs/gl-matrix-2/math/vec2.js\";import{create as l,UNIT_X as p}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{h as d,l as _,n as m,g as u,m as y,d as g}from\"../../../../chunks/vec32.js\";import{create as f}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import v from\"../../../../geometry/Point.js\";import G from\"../../../../geometry/Polygon.js\";import{project as w,initializeProjection as R}from\"../../../../geometry/projection.js\";import{d as b,a as j}from\"../../../../chunks/boundedPlane.js\";import{equals as C}from\"../../../../geometry/support/spatialReferenceUtils.js\";import k from\"../../../../layers/GraphicsLayer.js\";import P from\"../../../../symbols/SimpleFillSymbol.js\";import S from\"../../../../symbols/SimpleMarkerSymbol.js\";import{ViewingMode as T}from\"../../../ViewingMode.js\";import{DragManipulation as A}from\"./manipulations/DragManipulation.js\";import{RotateManipulation as M}from\"./manipulations/RotateManipulation.js\";import{ScaleManipulation as x}from\"./manipulations/ScaleManipulation.js\";import{PreserveAspectRatio as O,SnapRotation as D}from\"./manipulations/utils.js\";import{InteractiveToolBase as U}from\"../../../interactive/InteractiveToolBase.js\";import{mediaKeys as E,KeyBindings as L}from\"../../../interactive/keybindings.js\";import{EditGeometry as B}from\"../../../interactive/editGeometry/EditGeometry.js\";import{EditGeometryOperations as H}from\"../../../interactive/editGeometry/EditGeometryOperations.js\";import{AccumulationBehavior as I}from\"../../../interactive/editGeometry/interfaces.js\";import{AccumulationType as V}from\"../../../interactive/editGeometry/operations/UpdateVertices.js\";import{calculateOrientedBounds as z}from\"../../../interactive/editGeometry/support/editPlaneUtils.js\";import{findFirstGraphicHit as N}from\"../../../support/hitTestSelectUtils.js\";import{createScreenPointFromEvent as W}from\"../../../support/screenUtils.js\";const q=80,F=10,J=30,K=[[1,1],[1,-1],[-1,-1],[-1,1],[1,0],[0,-1],[-1,0],[0,1]],Q=1,X=10;let Y=class extends U{constructor(e){super(e),this._initialControlPoints=null,this._initialGeometry=null,this._graphic=null,this._planeCache=b(),this._displayPlaneCache=b(),this._mainAxisCache=l(),this._rotationHandleCache=f(),this._cornerA=f(),this._cornerB=f(),this._cornerC=f(),this._cornerD=f(),this._avgAB=f(),this._avgBC=f(),this._avgCD=f(),this._avgDA=f(),this._preserveAspectRatio=new O,this._snapRotation=new D,this._graphicsLayer=new k({internal:!0,listMode:\"hide\",visible:!1}),this._sharedUndoStack=[],this._sharedRedoStack=[],this._isOpacityToggled=!1,this._factor=Q,this.preserveAspectRatio=null,this.snapRotation=null,this.type=\"transform\"}initialize(){this._initialize()}destroy(){const{map:e}=this.view;this._dragManipulation.destroy(),this._rotateManipulation.destroy(),this._scaleManipulations.forEach((e=>e.destroy())),this._editGeometryOperations.destroy(),e.removeMany([this._graphicsLayer]),this._graphicsLayer.removeAll(),this._graphicsLayer=s(this._graphicsLayer),this._initialControlPoints=null,this._initialGeometry=null,this._graphic=null,this._preserveAspectRatio=null,this._snapRotation=null,this._planeCache=null,this._displayPlaneCache=null,this._rotationHandleCache=null,this._mainAxisCache=null,this._cornerA=null,this._cornerB=null,this._cornerC=null,this._cornerD=null,this._avgAB=null,this._avgBC=null,this._avgCD=null,this._avgDA=null,this._sharedUndoStack=null,this._sharedRedoStack=null}get _plane(){const e=this._graphic.geometry;if(null==e)return null;const t=this._editGeometryOperations.data,i=t.components[0].edges[0],s=c(this._mainAxisCache,i.leftVertex.pos,i.rightVertex.pos);h(s,s);let o=q*this.view.resolution;const a=this.view.spatialReference;return C(a,e.spatialReference)&&(o*=r(a)/r(e.spatialReference)),z(s,t,o,this._planeCache)}get _displayPlane(){const e=this._plane;if(!e)return null;const t=this._displayPlaneCache;j(e,t);const i=F*this.view.resolution;return d(t.basis1,t.basis1,1+i/_(t.basis1)),d(t.basis2,t.basis2,1+i/_(t.basis2)),t}get _backgroundGraphicGeometry(){const e=this._displayPlane;if(!e)return null;const t=this.view.spatialReference;return this._updateDisplayPlaneConrers(e),new G({spatialReference:t,rings:[[this._cornerA,this._cornerB,this._cornerC,this._cornerD,this._cornerA]]})}get _rotateGraphicGeometry(){const e=this._plane;if(!e)return null;const t=this._rotationHandleCache;return m(t,e.basis1),d(t,t,J*this.view.resolution),u(t,t,e.origin),u(t,t,e.basis1),new v({x:t[0],y:t[1],spatialReference:this.view.spatialReference})}get _scaleGraphicGeometries(){const e=this._displayPlane;if(!e)return[];const t=this.view.spatialReference;this._updateDisplayPlaneConrers(e);const{_cornerA:i,_cornerB:s,_cornerC:o,_cornerD:r}=this,a=y(this._avgAB,i,s,.5),n=y(this._avgBC,s,o,.5),c=y(this._avgCD,o,r,.5),h=y(this._avgDA,r,i,.5);return[new v({x:i[0],y:i[1],spatialReference:t}),new v({x:s[0],y:s[1],spatialReference:t}),new v({x:o[0],y:o[1],spatialReference:t}),new v({x:r[0],y:r[1],spatialReference:t}),new v({x:a[0],y:a[1],spatialReference:t}),new v({x:n[0],y:n[1],spatialReference:t}),new v({x:c[0],y:c[1],spatialReference:t}),new v({x:h[0],y:h[1],spatialReference:t})]}onActivate(){this.visible=!0}onDeactivate(){this.visible=!1}onShow(){this._graphicsLayer.visible=!0}onHide(){this._graphicsLayer.visible=!1}canUndo(){return this._editGeometryOperations.canUndo}canRedo(){return this._editGeometryOperations.canRedo}undo(){this._editGeometryOperations.undo(),this.updateGraphics()}redo(){this._editGeometryOperations.redo(),this.updateGraphics()}refresh(){const{view:e,target:t}=this,i=\"georeference\"in t?t.georeference.coords:t.geometry,s=this._editGeometryOperations,o=s.data.components[0].vertices,r=B.fromGeometry(w(i,e.spatialReference),T.Local).components[0].vertices;o.forEach(((e,t)=>{s.setVertexPosition(e,r[t].pos)})),this.updateGraphics()}reset(){const{target:e}=this;if(\"georeference\"in e){const t=e.georeference;\"control-points\"===t.type&&(t.controlPoints=this._initialControlPoints)}else e.geometry=this._initialGeometry;this.refresh(),this._sharedUndoStack.length=0,this._sharedRedoStack.length=0}updateGraphics(){const e=this._editGeometryOperations.data.geometry;if(\"georeference\"in this.target){this.target.georeference.coords=e}this._graphic.geometry=e,this._backgroundGraphic.geometry=this._backgroundGraphicGeometry,this._rotateGraphic.geometry=this._rotateGraphicGeometry,this._scaleGraphicGeometries.forEach(((e,t)=>{this._scaleGraphics[t].geometry=e}))}setSharedUndoStack(e){this._sharedUndoStack=e}setSharedRedoStack(e){this._sharedRedoStack=e}async _initialize(){const{view:e,target:s}=this;if(\"georeference\"in s){const e=s.georeference;this._graphic=new t({geometry:e.coords}),this._initialControlPoints=\"control-points\"===e.type?e.controlPoints:null}else this._graphic=s,this._initialGeometry=s.geometry;e.map.addMany([this._graphicsLayer]),e.focus(),this.visible=!1,this.finishToolCreation(),await this._loadProjectionEngine(),this._editGeometryOperations=H.fromGeometry(w(this._graphic.geometry,e.spatialReference),T.Local),this._backgroundGraphic=new t({symbol:new P({color:\"transparent\",outline:{type:\"simple-line\",color:e.effectiveTheme.accentColor,width:2}}),geometry:this._backgroundGraphicGeometry}),this._rotateGraphic=new t({symbol:new S({color:i(e.effectiveTheme.accentColor),outline:{type:\"simple-line\",color:e.effectiveTheme.accentColor,width:1}}),geometry:this._rotateGraphicGeometry}),this._scaleGraphics=this._scaleGraphicGeometries.map((s=>new t({symbol:new S({size:6,style:\"square\",color:i(e.effectiveTheme.accentColor),outline:{type:\"simple-line\",color:e.effectiveTheme.accentColor,width:1}}),geometry:s}))),this._graphicsLayer.graphics.addMany([this._backgroundGraphic,this._rotateGraphic,...this._scaleGraphics]),this._dragManipulation=new A({tool:this,view:e,graphic:this._graphic}),this._rotateManipulation=new M({tool:this,view:e,graphic:this._rotateGraphic,snapRotation:this._snapRotation}),this._scaleManipulations=this._scaleGraphics.map(((t,i)=>new x({tool:this,view:e,graphic:t,direction:K[i],preserveAspectRatio:this._preserveAspectRatio}))),this.addHandles([this._dragManipulation.createDragPipeline(this._getInfo.bind(this),this._updateGraphics.bind(this)),this._rotateManipulation.createDragPipeline(this._getInfo.bind(this),this._updateGraphics.bind(this)),...this._scaleManipulations.map((e=>e.createDragPipeline(this._getInfo.bind(this),this._updateGraphics.bind(this)))),o((()=>this.view.scale),(()=>this.active?this.updateGraphics():null)),e.on(\"click\",(async t=>{if(null!=e.activeTool&&e.activeTool!==this)return;const i=W(t),o=[];e.map.allLayers.forEach((e=>{\"vector-tile\"!==e.type&&\"imagery\"!==e.type||o.push(e)}));const r=await this.view.hitTest(i,{exclude:o}),a=r.results;if(0===a.length)e.activeTool=null;else{const t=N(r.results),i=\"georeference\"in s,o=a.map((e=>\"media\"===e.type?e.element:null)).filter(Boolean),n=new Set([...this._graphicsLayer.graphics,i?null:s].filter(Boolean));i&&o.includes(s)||null!=t&&n.has(t.graphic)?null==e.activeTool&&(e.activeTool=this):e.activeTool=null}}))]);const r=e=>{this.addHandles(e.events.on(\"grab-changed\",(e=>{\"georeference\"in s&&(\"start\"===e.action?s.opacity*=.5:\"end\"===e.action&&(s.opacity*=2))})))};this._dragManipulation.forEachManipulator(r),this._rotateManipulation.forEachManipulator(r),this._scaleManipulations.forEach((e=>e.forEachManipulator(r)));const a=new L;a.addToggle(E.preserveAspectRatio,(()=>{null==this.preserveAspectRatio&&(this._preserveAspectRatio.enabled=!this._preserveAspectRatio.enabled)})),a.addToggle(E.rotateIncrements,(()=>{null==this.snapRotation&&(this._snapRotation.enabled=!this._snapRotation.enabled)})),a.add(E.toggleOpacity,(()=>{\"georeference\"in s&&(s.opacity*=this._isOpacityToggled?2:.5,this._isOpacityToggled=!this._isOpacityToggled)})),a.addToggle(E.factorModifier,(e=>this._factor=\"key-down\"===e.type?X:Q)),a.add(E.scaleUp,(()=>this._scale(this._factor))),a.add(E.scaleDown,(()=>this._scale(-this._factor))),a.add(E.moveUp,(()=>this._move(0,this._factor))),a.add(E.moveDown,(()=>this._move(0,-this._factor))),a.add(E.moveLeft,(()=>this._move(-this._factor,0))),a.add(E.moveRight,(()=>this._move(this._factor,0))),this.addHandles([e.on(\"key-down\",(t=>{e.activeTool===this&&a.dispatch(e.inputManager,t)})),e.on(\"key-up\",(t=>{e.activeTool===this&&a.dispatch(e.inputManager,t)}))])}async _loadProjectionEngine(){const e=this._graphic.geometry;return R(e.spatialReference,this.view.spatialReference)}_updateDisplayPlaneConrers(e){const{basis1:t,basis2:i,origin:s}=e,o=this._cornerA;u(o,s,t),u(o,o,i);const r=this._cornerB;u(r,s,t),g(r,r,i);const a=this._cornerC;g(a,s,t),g(a,a,i);const n=this._cornerD;g(n,s,t),u(n,n,i)}_getInfo(){return{editGeometryOperations:this._editGeometryOperations,plane:this._plane,displayPlane:this._displayPlane}}_updateGraphics(e,t){\"start\"===e.action&&(this._sharedUndoStack.push({tool:this,operation:t}),this._sharedRedoStack.length=0),this.updateGraphics()}_scale(e){const t=this._editGeometryOperations,i=t.data.geometry.extent?.width,s=(i+e*this.view.resolution)/i,o=t.scale(this._plane.origin,p,s,s,I.NEW_STEP,V.REPLACE);this._sharedUndoStack.push({tool:this,operation:o}),this._sharedRedoStack.length=0,this.updateGraphics()}_move(e,t){const i=this._editGeometryOperations.move(e*this.view.resolution,t*this.view.resolution,0,I.NEW_STEP);this._sharedUndoStack.push({tool:this,operation:i}),this._sharedRedoStack.length=0,this.updateGraphics()}};e([a()],Y.prototype,\"_plane\",null),e([a()],Y.prototype,\"_backgroundGraphicGeometry\",null),e([a()],Y.prototype,\"_rotateGraphicGeometry\",null),e([a()],Y.prototype,\"_scaleGraphicGeometries\",null),e([a()],Y.prototype,\"preserveAspectRatio\",void 0),e([a()],Y.prototype,\"snapRotation\",void 0),e([a({constructOnly:!0,nonNullable:!0})],Y.prototype,\"target\",void 0),e([a({readOnly:!0})],Y.prototype,\"type\",void 0),e([a({constructOnly:!0})],Y.prototype,\"view\",void 0),Y=e([n(\"esri.views.2d.interactive.editingTools.TransformTool\")],Y);export{Y as TransformTool};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}