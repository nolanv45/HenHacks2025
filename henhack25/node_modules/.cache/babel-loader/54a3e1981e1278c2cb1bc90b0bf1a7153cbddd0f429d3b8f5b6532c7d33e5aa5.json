{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from \"../../../../../core/Evented.js\";\nimport has from \"../../../../../core/has.js\";\nimport { r as t } from \"../../../../../chunks/rbush.js\";\nimport { width as s, height as i, create as o } from \"../../../../../geometry/support/aaBoundingRect.js\";\nimport { getInfo as n } from \"../../../../../geometry/support/spatialReferenceUtils.js\";\nimport { Tile as r } from \"./Tile.js\";\nimport l from \"../../../tiling/TileCoverage.js\";\nimport h from \"../../../tiling/TileKey.js\";\nconst d = {\n    added: [],\n    removed: []\n  },\n  a = new Set(),\n  c = new h(0, 0, 0, 0);\nfunction m(e, t) {\n  const s = n(t);\n  if (!s) return null;\n  const [i, r] = s.valid;\n  return e[2] > r ? [o([e[0], e[1], r, e[3]]), o([i, e[1], i + e[2] - r, e[3]])] : e[0] < i ? [o([i, e[1], e[2], e[3]]), o([r - (i - e[0]), e[1], r, e[3]])] : null;\n}\nclass u extends e {\n  constructor(e) {\n    super(), this._tiles = new Map(), this._index = t(9, has(\"esri-csp-restrictions\") ? e => ({\n      minX: e.bounds[0],\n      minY: e.bounds[1],\n      maxX: e.bounds[2],\n      maxY: e.bounds[3]\n    }) : [\".bounds[0]\", \".bounds[1]\", \".bounds[2]\", \".bounds[3]\"]), this.tiles = [], this.tileScheme = e;\n  }\n  destroy() {\n    this.clear();\n  }\n  clear() {\n    this.tiles.length = 0, this._tiles.clear(), this._index.clear();\n  }\n  has(e) {\n    return this._tiles.has(e);\n  }\n  get(e) {\n    return this._tiles.get(e);\n  }\n  getIntersectingTiles(e) {\n    if (!e || 0 === s(e) || 0 === i(e)) return [];\n    const t = m(e, this.tileScheme.spatialReference);\n    return null != t ? [...new Set([...this.boundsIntersections(t[0]), ...this.boundsIntersections(t[1])])] : this.boundsIntersections(e);\n  }\n  boundsIntersections(e) {\n    return this._index.search({\n      minX: e[0],\n      minY: e[1],\n      maxX: e[2],\n      maxY: e[3]\n    });\n  }\n  updateTiles(e) {\n    const t = {\n      added: [],\n      removed: []\n    };\n    for (const s of e.added) if (!this.has(s)) {\n      const e = new r(this.tileScheme, s);\n      this._tiles.set(s, e), this._index.insert(e), t.added.push(e);\n    }\n    for (const s of e.removed) if (this.has(s)) {\n      const e = this.get(s);\n      this._tiles.delete(s), this._index.remove(e), t.removed.push(e);\n    }\n    this.tiles.length = 0, this._tiles.forEach(e => this.tiles.push(e)), (t.added.length || t.removed.length) && this.emit(\"update\", t);\n  }\n  setViewState(e) {\n    const t = this.tileScheme.getTileCoverage(e, 0);\n    if (!t) return;\n    const {\n        spans: s,\n        lodInfo: i\n      } = t,\n      {\n        level: o\n      } = i;\n    if (s.length > 0) for (const {\n      row: n,\n      colFrom: l,\n      colTo: h\n    } of s) for (let e = l; e <= h; e++) {\n      const t = c.set(o, n, i.normalizeCol(e), i.getWorldForColumn(e)).id;\n      if (a.add(t), !this.has(t)) {\n        const e = new r(this.tileScheme, t);\n        this._tiles.set(t, e), this._index.insert(e), this.tiles.push(e), d.added.push(e);\n      }\n    }\n    for (let n = this.tiles.length - 1; n >= 0; n--) {\n      const e = this.tiles[n];\n      a.has(e.id) || (this._tiles.delete(e.id), this.tiles.splice(n, 1), this._index.remove(e), d.removed.push(e));\n    }\n    (d.added.length || d.removed.length) && this.emit(\"update\", d), l.pool.release(t), a.clear(), d.added.length = 0, d.removed.length = 0;\n  }\n}\nexport { u as default };","map":{"version":3,"names":["e","has","r","t","width","s","height","i","create","o","getInfo","n","Tile","l","h","d","added","removed","a","Set","c","m","valid","u","constructor","_tiles","Map","_index","minX","bounds","minY","maxX","maxY","tiles","tileScheme","destroy","clear","length","get","getIntersectingTiles","spatialReference","boundsIntersections","search","updateTiles","set","insert","push","delete","remove","forEach","emit","setViewState","getTileCoverage","spans","lodInfo","level","row","colFrom","colTo","normalizeCol","getWorldForColumn","id","add","splice","pool","release","default"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/layers/features/support/TileStore.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/Evented.js\";import has from\"../../../../../core/has.js\";import{r as t}from\"../../../../../chunks/rbush.js\";import{width as s,height as i,create as o}from\"../../../../../geometry/support/aaBoundingRect.js\";import{getInfo as n}from\"../../../../../geometry/support/spatialReferenceUtils.js\";import{Tile as r}from\"./Tile.js\";import l from\"../../../tiling/TileCoverage.js\";import h from\"../../../tiling/TileKey.js\";const d={added:[],removed:[]},a=new Set,c=new h(0,0,0,0);function m(e,t){const s=n(t);if(!s)return null;const[i,r]=s.valid;return e[2]>r?[o([e[0],e[1],r,e[3]]),o([i,e[1],i+e[2]-r,e[3]])]:e[0]<i?[o([i,e[1],e[2],e[3]]),o([r-(i-e[0]),e[1],r,e[3]])]:null}class u extends e{constructor(e){super(),this._tiles=new Map,this._index=t(9,has(\"esri-csp-restrictions\")?e=>({minX:e.bounds[0],minY:e.bounds[1],maxX:e.bounds[2],maxY:e.bounds[3]}):[\".bounds[0]\",\".bounds[1]\",\".bounds[2]\",\".bounds[3]\"]),this.tiles=[],this.tileScheme=e}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}getIntersectingTiles(e){if(!e||0===s(e)||0===i(e))return[];const t=m(e,this.tileScheme.spatialReference);return null!=t?[...new Set([...this.boundsIntersections(t[0]),...this.boundsIntersections(t[1])])]:this.boundsIntersections(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const t={added:[],removed:[]};for(const s of e.added)if(!this.has(s)){const e=new r(this.tileScheme,s);this._tiles.set(s,e),this._index.insert(e),t.added.push(e)}for(const s of e.removed)if(this.has(s)){const e=this.get(s);this._tiles.delete(s),this._index.remove(e),t.removed.push(e)}this.tiles.length=0,this._tiles.forEach((e=>this.tiles.push(e))),(t.added.length||t.removed.length)&&this.emit(\"update\",t)}setViewState(e){const t=this.tileScheme.getTileCoverage(e,0);if(!t)return;const{spans:s,lodInfo:i}=t,{level:o}=i;if(s.length>0)for(const{row:n,colFrom:l,colTo:h}of s)for(let e=l;e<=h;e++){const t=c.set(o,n,i.normalizeCol(e),i.getWorldForColumn(e)).id;if(a.add(t),!this.has(t)){const e=new r(this.tileScheme,t);this._tiles.set(t,e),this._index.insert(e),this.tiles.push(e),d.added.push(e)}}for(let n=this.tiles.length-1;n>=0;n--){const e=this.tiles[n];a.has(e.id)||(this._tiles.delete(e.id),this.tiles.splice(n,1),this._index.remove(e),d.removed.push(e))}(d.added.length||d.removed.length)&&this.emit(\"update\",d),l.pool.release(t),a.clear(),d.added.length=0,d.removed.length=0}}export{u as default};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}