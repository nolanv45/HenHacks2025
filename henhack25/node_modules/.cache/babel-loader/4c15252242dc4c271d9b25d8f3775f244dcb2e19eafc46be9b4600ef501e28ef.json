{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from \"../../../../../core/Error.js\";\nimport { getEffectiveFeatureReduction as t } from \"./featureReductionUtils.js\";\nimport { getServiceGeometryType as r } from \"./geometryUtils.js\";\nimport { getFeatureReductionDeconflictionEnabled as o, getLayerDeconflictionEnabled as i, createLabelVVEvaluator as n } from \"./labelingUtils.js\";\nimport { createFeatureSourceSchema as s } from \"../schema/SourceSchema.js\";\nimport { createSimpleProcessorSchema as l } from \"../schema/processor/SimpleProcessorSchema.js\";\nimport { isRendererSupported as a } from \"../support/rendererUtils.js\";\nfunction u(t) {\n  if (!(\"openPorts\" in t)) throw new e(\"source-not-supported\");\n}\nclass p {\n  constructor(e) {\n    this.layer = e;\n  }\n  getLabelingDeconflictionInfo(e) {\n    const t = this.layer,\n      r = o(t, e) ?? i(t);\n    return [{\n      vvEvaluators: {\n        0: n(t.renderer)\n      },\n      deconflictionEnabled: r\n    }];\n  }\n  async createServiceOptions(e) {\n    const t = this.layer,\n      {\n        capabilities: o,\n        objectIdField: i\n      } = t,\n      n = t.fieldsIndex.toJSON(),\n      s = r(t),\n      l = t.timeInfo?.toJSON(),\n      a = t.spatialReference.toJSON();\n    u(t.source);\n    const p = await t.source.openPorts(),\n      c = i,\n      d = e.spatialReference.toJSON();\n    return {\n      type: \"memory\",\n      source: p,\n      orderByFields: c,\n      outSpatialReference: d,\n      metadata: {\n        fieldsIndex: n,\n        geometryType: s,\n        objectIdField: i,\n        timeInfo: l,\n        spatialReference: a,\n        outSpatialReference: d,\n        subtypes: null,\n        subtypeField: null,\n        globalIdField: null,\n        typeIdField: null,\n        types: null,\n        timeReferenceUnknownClient: \"datesInUnknownTimezone\" in t ? t.datesInUnknownTimezone : null,\n        dateFieldsTimeZone: \"dateFieldsTimeZone\" in t ? t.dateFieldsTimeZone : null\n      },\n      queryMetadata: {\n        maxRecordCount: o.query.maxRecordCount,\n        supportsCompactGeometry: o.query.supportsCompactGeometry,\n        supportsDefaultSpatialReference: o.query.supportsDefaultSpatialReference,\n        supportsFormatPBF: o.query.supportsFormatPBF,\n        supportsMaxRecordCountFactor: o.query.supportsMaxRecordCountFactor,\n        supportsQuantization: o.query.supportsQuantization,\n        lastEditDate: null,\n        snapshotInfo: null\n      }\n    };\n  }\n  createSourceSchema(e, t) {\n    const {\n      definitionExpression: r,\n      timeExtent: o,\n      displayFilterInfo: i\n    } = this.layer;\n    return s({\n      customParameters: null,\n      definitionExpression: r,\n      displayFilterInfo: i,\n      timeExtent: o\n    }, e, t, null);\n  }\n  createProcessorSchema(e, r, o) {\n    const {\n        fields: i,\n        renderer: n,\n        geometryType: s,\n        labelingInfo: a,\n        labelsVisible: u,\n        orderBy: p,\n        objectIdField: c\n      } = this.layer,\n      d = \"trackInfo\" in this.layer ? this.layer.trackInfo : null,\n      y = {\n        fields: i.map(e => e.toJSON()),\n        renderer: n?.clone(),\n        featureReduction: t(this.layer, r),\n        geometryType: s,\n        labelingInfo: a,\n        labelsVisible: u,\n        objectIdField: c,\n        orderBy: p ?? \"default\",\n        trackInfo: d\n      };\n    return l(e, r, y, o);\n  }\n  get hasRequiredSupport() {\n    return a(this.layer.renderer);\n  }\n  get timeOptions() {\n    return this.layer;\n  }\n  getUpdateHashProperties(e) {\n    return [() => this.layer.definitionExpression, () => this.layer.displayFilterInfo, () => this.layer.orderBy, () => \"outFields\" in this.layer ? this.layer.outFields : null, () => this.layer.renderer, () => this.layer.labelsVisible ? this.layer.labelingInfo : null, () => t(this.layer, e), () => \"trackInfo\" in this.layer ? this.layer.trackInfo : null];\n  }\n}\nexport { p as InMemoryLayerAdapter };","map":{"version":3,"names":["e","getEffectiveFeatureReduction","t","getServiceGeometryType","r","getFeatureReductionDeconflictionEnabled","o","getLayerDeconflictionEnabled","i","createLabelVVEvaluator","n","createFeatureSourceSchema","s","createSimpleProcessorSchema","l","isRendererSupported","a","u","p","constructor","layer","getLabelingDeconflictionInfo","vvEvaluators","renderer","deconflictionEnabled","createServiceOptions","capabilities","objectIdField","fieldsIndex","toJSON","timeInfo","spatialReference","source","openPorts","c","d","type","orderByFields","outSpatialReference","metadata","geometryType","subtypes","subtypeField","globalIdField","typeIdField","types","timeReferenceUnknownClient","datesInUnknownTimezone","dateFieldsTimeZone","queryMetadata","maxRecordCount","query","supportsCompactGeometry","supportsDefaultSpatialReference","supportsFormatPBF","supportsMaxRecordCountFactor","supportsQuantization","lastEditDate","snapshotInfo","createSourceSchema","definitionExpression","timeExtent","displayFilterInfo","customParameters","createProcessorSchema","fields","labelingInfo","labelsVisible","orderBy","trackInfo","y","map","clone","featureReduction","hasRequiredSupport","timeOptions","getUpdateHashProperties","outFields","InMemoryLayerAdapter"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/InMemoryLayerAdapter.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/Error.js\";import{getEffectiveFeatureReduction as t}from\"./featureReductionUtils.js\";import{getServiceGeometryType as r}from\"./geometryUtils.js\";import{getFeatureReductionDeconflictionEnabled as o,getLayerDeconflictionEnabled as i,createLabelVVEvaluator as n}from\"./labelingUtils.js\";import{createFeatureSourceSchema as s}from\"../schema/SourceSchema.js\";import{createSimpleProcessorSchema as l}from\"../schema/processor/SimpleProcessorSchema.js\";import{isRendererSupported as a}from\"../support/rendererUtils.js\";function u(t){if(!(\"openPorts\"in t))throw new e(\"source-not-supported\")}class p{constructor(e){this.layer=e}getLabelingDeconflictionInfo(e){const t=this.layer,r=o(t,e)??i(t);return[{vvEvaluators:{0:n(t.renderer)},deconflictionEnabled:r}]}async createServiceOptions(e){const t=this.layer,{capabilities:o,objectIdField:i}=t,n=t.fieldsIndex.toJSON(),s=r(t),l=t.timeInfo?.toJSON(),a=t.spatialReference.toJSON();u(t.source);const p=await t.source.openPorts(),c=i,d=e.spatialReference.toJSON();return{type:\"memory\",source:p,orderByFields:c,outSpatialReference:d,metadata:{fieldsIndex:n,geometryType:s,objectIdField:i,timeInfo:l,spatialReference:a,outSpatialReference:d,subtypes:null,subtypeField:null,globalIdField:null,typeIdField:null,types:null,timeReferenceUnknownClient:\"datesInUnknownTimezone\"in t?t.datesInUnknownTimezone:null,dateFieldsTimeZone:\"dateFieldsTimeZone\"in t?t.dateFieldsTimeZone:null},queryMetadata:{maxRecordCount:o.query.maxRecordCount,supportsCompactGeometry:o.query.supportsCompactGeometry,supportsDefaultSpatialReference:o.query.supportsDefaultSpatialReference,supportsFormatPBF:o.query.supportsFormatPBF,supportsMaxRecordCountFactor:o.query.supportsMaxRecordCountFactor,supportsQuantization:o.query.supportsQuantization,lastEditDate:null,snapshotInfo:null}}}createSourceSchema(e,t){const{definitionExpression:r,timeExtent:o,displayFilterInfo:i}=this.layer;return s({customParameters:null,definitionExpression:r,displayFilterInfo:i,timeExtent:o},e,t,null)}createProcessorSchema(e,r,o){const{fields:i,renderer:n,geometryType:s,labelingInfo:a,labelsVisible:u,orderBy:p,objectIdField:c}=this.layer,d=\"trackInfo\"in this.layer?this.layer.trackInfo:null,y={fields:i.map((e=>e.toJSON())),renderer:n?.clone(),featureReduction:t(this.layer,r),geometryType:s,labelingInfo:a,labelsVisible:u,objectIdField:c,orderBy:p??\"default\",trackInfo:d};return l(e,r,y,o)}get hasRequiredSupport(){return a(this.layer.renderer)}get timeOptions(){return this.layer}getUpdateHashProperties(e){return[()=>this.layer.definitionExpression,()=>this.layer.displayFilterInfo,()=>this.layer.orderBy,()=>\"outFields\"in this.layer?this.layer.outFields:null,()=>this.layer.renderer,()=>this.layer.labelsVisible?this.layer.labelingInfo:null,()=>t(this.layer,e),()=>\"trackInfo\"in this.layer?this.layer.trackInfo:null]}}export{p as InMemoryLayerAdapter};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}