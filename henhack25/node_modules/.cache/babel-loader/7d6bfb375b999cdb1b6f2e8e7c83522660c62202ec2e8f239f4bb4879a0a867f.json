{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { identity as t, scale as e } from \"../../../../../../core/libs/gl-matrix-2/math/mat4.js\";\nimport { create as r } from \"../../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";\nimport { fromArray as o, create as i } from \"../../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { computeTranslationToOriginAndRotation as n } from \"../../../../../../geometry/projection/computeTranslationToOriginAndRotation.js\";\nimport { create as s, size as a } from \"../../../../../../geometry/support/aaBoundingBox.js\";\nimport { objectSymbolLayerPrimitiveBoundingBox as l, objectSymbolLayerSizeWithResourceSize as d } from \"../../../../../../symbols/support/symbolLayerUtils3D.js\";\nimport { computeObjectScale as c } from \"../../graphicUtils.js\";\nimport { readMapCoordinates as m, readObjectIds as h } from \"../featureData/processingUtils.js\";\nimport { createPrimitiveGeometry as p } from \"./primitiveObjectUtils.js\";\nclass f {\n  constructor(t) {\n    this._context = t, this.lodRendererId = null, this._loaded = !1, this._loadingPromise = null, this._primitive = \"cone\";\n  }\n  get loaded() {\n    return this._loaded;\n  }\n  load() {\n    return null == this._loadingPromise && (this._loadingPromise = this._load()), this._loadingPromise;\n  }\n  async _load() {\n    const t = this._context.renderCommandContext.createEncoder(),\n      e = t.createMaterial(\"default\"),\n      r = p(this._primitive, e);\n    this.lodRendererId = t.createLodRenderer(r), await t.dispatch(), this._loaded = !0;\n  }\n  async createAddCommand(t) {\n    const e = this._context.renderCommandContext.createEncoder();\n    if (null == this.lodRendererId) throw new Error(\"expected lod renderer id to not be null\");\n    const {\n      featureCount: r\n    } = t;\n    if (0 === r) return e;\n    const i = !0,\n      n = s(l(this._primitive)),\n      c = o(a(n)),\n      p = o(d(c, {\n        isPrimitive: i,\n        width: 100,\n        depth: null,\n        height: null\n      })),\n      f = new Float64Array(16 * r),\n      u = new Float64Array(16 * r),\n      g = m(t, this._context);\n    for (let o = 0; o < r; ++o) {\n      const t = o,\n        e = g[3 * o + 0],\n        r = g[3 * o + 1],\n        i = g[3 * o + 2],\n        n = this._computeGlobalTransform(e, r, i, this._context.viewSpatialReference, x),\n        s = this._computeLocalTransform(p, c, _);\n      this._writeMatrixToTypedBuffer(f, t, s), this._writeMatrixToTypedBuffer(u, t, n);\n    }\n    const y = h(t, this._context),\n      T = {\n        featureIds: new Uint32Array(y),\n        localTransforms: f,\n        globalTransforms: u\n      };\n    return e.addLodInstances(this.lodRendererId, T), e;\n  }\n  async createRemoveCommand(t) {\n    const e = this._context.renderCommandContext.createEncoder();\n    if (null == this.lodRendererId) return e;\n    const r = h(t, this._context);\n    return e.removeLodInstances(this.lodRendererId, r), e;\n  }\n  _writeMatrixToTypedBuffer(t, e, r) {\n    let o = 16 * e;\n    for (let i = 0; i < 16; i++) t[o++] = r[i];\n  }\n  _computeGlobalTransform(t, e, r, o, i) {\n    return u[0] = t, u[1] = e, u[2] = r, n(o, u, i, this._context.renderSpatialReference), i;\n  }\n  _computeLocalTransform(e, r, o) {\n    return t(o), this._applyObjectScale(e, r, o), o;\n  }\n  _applyObjectScale(t, r, o) {\n    const i = c(t, t, r, this._context.renderCoordsHelper.unitInMeters);\n    1 === i[0] && 1 === i[1] && 1 === i[2] || e(o, o, i);\n  }\n}\nconst u = i(),\n  _ = r(),\n  x = r();\nexport { f as TestObjectSymbol };","map":{"version":3,"names":["identity","t","scale","e","create","r","fromArray","o","i","computeTranslationToOriginAndRotation","n","s","size","a","objectSymbolLayerPrimitiveBoundingBox","l","objectSymbolLayerSizeWithResourceSize","d","computeObjectScale","c","readMapCoordinates","m","readObjectIds","h","createPrimitiveGeometry","p","f","constructor","_context","lodRendererId","_loaded","_loadingPromise","_primitive","loaded","load","_load","renderCommandContext","createEncoder","createMaterial","createLodRenderer","dispatch","createAddCommand","Error","featureCount","isPrimitive","width","depth","height","Float64Array","u","g","_computeGlobalTransform","viewSpatialReference","x","_computeLocalTransform","_","_writeMatrixToTypedBuffer","y","T","featureIds","Uint32Array","localTransforms","globalTransforms","addLodInstances","createRemoveCommand","removeLodInstances","renderSpatialReference","_applyObjectScale","renderCoordsHelper","unitInMeters","TestObjectSymbol"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/symbolization/TestObjectSymbol.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{identity as t,scale as e}from\"../../../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as r}from\"../../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{fromArray as o,create as i}from\"../../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{computeTranslationToOriginAndRotation as n}from\"../../../../../../geometry/projection/computeTranslationToOriginAndRotation.js\";import{create as s,size as a}from\"../../../../../../geometry/support/aaBoundingBox.js\";import{objectSymbolLayerPrimitiveBoundingBox as l,objectSymbolLayerSizeWithResourceSize as d}from\"../../../../../../symbols/support/symbolLayerUtils3D.js\";import{computeObjectScale as c}from\"../../graphicUtils.js\";import{readMapCoordinates as m,readObjectIds as h}from\"../featureData/processingUtils.js\";import{createPrimitiveGeometry as p}from\"./primitiveObjectUtils.js\";class f{constructor(t){this._context=t,this.lodRendererId=null,this._loaded=!1,this._loadingPromise=null,this._primitive=\"cone\"}get loaded(){return this._loaded}load(){return null==this._loadingPromise&&(this._loadingPromise=this._load()),this._loadingPromise}async _load(){const t=this._context.renderCommandContext.createEncoder(),e=t.createMaterial(\"default\"),r=p(this._primitive,e);this.lodRendererId=t.createLodRenderer(r),await t.dispatch(),this._loaded=!0}async createAddCommand(t){const e=this._context.renderCommandContext.createEncoder();if(null==this.lodRendererId)throw new Error(\"expected lod renderer id to not be null\");const{featureCount:r}=t;if(0===r)return e;const i=!0,n=s(l(this._primitive)),c=o(a(n)),p=o(d(c,{isPrimitive:i,width:100,depth:null,height:null})),f=new Float64Array(16*r),u=new Float64Array(16*r),g=m(t,this._context);for(let o=0;o<r;++o){const t=o,e=g[3*o+0],r=g[3*o+1],i=g[3*o+2],n=this._computeGlobalTransform(e,r,i,this._context.viewSpatialReference,x),s=this._computeLocalTransform(p,c,_);this._writeMatrixToTypedBuffer(f,t,s),this._writeMatrixToTypedBuffer(u,t,n)}const y=h(t,this._context),T={featureIds:new Uint32Array(y),localTransforms:f,globalTransforms:u};return e.addLodInstances(this.lodRendererId,T),e}async createRemoveCommand(t){const e=this._context.renderCommandContext.createEncoder();if(null==this.lodRendererId)return e;const r=h(t,this._context);return e.removeLodInstances(this.lodRendererId,r),e}_writeMatrixToTypedBuffer(t,e,r){let o=16*e;for(let i=0;i<16;i++)t[o++]=r[i]}_computeGlobalTransform(t,e,r,o,i){return u[0]=t,u[1]=e,u[2]=r,n(o,u,i,this._context.renderSpatialReference),i}_computeLocalTransform(e,r,o){return t(o),this._applyObjectScale(e,r,o),o}_applyObjectScale(t,r,o){const i=c(t,t,r,this._context.renderCoordsHelper.unitInMeters);1===i[0]&&1===i[1]&&1===i[2]||e(o,o,i)}}const u=i(),_=r(),x=r();export{f as TestObjectSymbol};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}