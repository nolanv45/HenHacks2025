{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from \"../../../Graphic.js\";\nimport { isSome as r } from \"../../../core/arrayUtils.js\";\nimport { isIterable as i } from \"../../../core/iteratorUtils.js\";\nimport { clipContainsPoint as t } from \"./clippingUtils.js\";\nimport { isSupportedScreenPointEvent as a, createScreenPointFromSupportedEvent as l } from \"../../support/screenUtils.js\";\nasync function s(e, i, s) {\n  const f = a(i) ? l(e, i) : i;\n  if (!e.ready || isNaN(f.x) || isNaN(f.y)) return {\n    screenPoint: f,\n    results: []\n  };\n  let d = new Set();\n  const y = new Set();\n  let u = !1,\n    h = null,\n    g = null;\n  s?.include ? o(s.include, n(e, e => {\n    d.add(e), p(e, e => y.add(e));\n  }, (e, r) => {\n    y.add(e), d.add(r);\n  }, e => {\n    h || (h = new Set()), h.add(e);\n  }, e => d.add(e), () => u = !0)) : (u = !0, d = new Set(e.allLayerViews), d.forEach(e => {\n    p(e, e => y.add(e));\n  })), s?.exclude && o(s.exclude, n(e, e => {\n    d.delete(e), p(e, e => y.delete(e));\n  }, e => y.delete(e), e => {\n    g || (g = new Set()), g.add(e);\n  }));\n  const m = e.toMap(f),\n    w = e.allLayerViews.filter(r => !r.suspended && d.has(r) && r.clips.every(r => t(e, r, f, m))).reverse();\n  let V = [...(u ? e.graphicsView.hitTest(m).map(e => ({\n    type: \"graphic\",\n    graphic: e,\n    layer: null,\n    mapPoint: m\n  })) : []), ...(await Promise.all(w.map(e => e.hitTest(m, f)).toArray()))].filter(r).flat().filter(r);\n  return V = V.filter(e => \"graphic\" !== e.type || \"subtype-group\" !== e.layer?.type || y.has(e.graphic.layer)), h && (V = V.filter(e => !(\"graphic\" in e) || !e.graphic || h?.has(c(e.graphic)))), g && (V = V.filter(e => !(\"graphic\" in e) || !e.graphic || !g?.has(c(e.graphic)))), {\n    screenPoint: f,\n    results: V\n  };\n}\nfunction n(r, i, t, a, l, s) {\n  return n => {\n    if (n instanceof e) {\n      if (n.layer === r) s?.();else {\n        const e = r.allLayerViews.find(e => e.layer === n.layer);\n        e && l?.(e);\n      }\n      a(c(n));\n    } else if (\"layer\" in n && \"element\" in n) ;else if (\"subtype-sublayer\" === n.type) {\n      const e = r.allLayerViews.find(e => e.layer === n.parent);\n      e && t(n, e);\n    } else {\n      const e = r.allLayerViews.find(e => e.layer === n);\n      e && i(e);\n    }\n  };\n}\nfunction o(e, r) {\n  if (e) if (i(e)) {\n    for (const t of e) if (i(t)) for (const e of t) r(e);else r(t);\n  } else r(e);\n}\nfunction c(e) {\n  const r = e.getObjectId();\n  return r ? `${e.layer?.uid ?? e.sourceLayer?.uid ?? \"MapView\"}/${r}` : `\"MapView/${e.uid}`;\n}\nfunction p(_ref, r) {\n  let {\n    layer: e\n  } = _ref;\n  \"subtype-group\" === e?.type && e.sublayers.forEach(e => {\n    r(e);\n  });\n}\nexport { s as hitTest };","map":{"version":3,"names":["e","isSome","r","isIterable","i","clipContainsPoint","t","isSupportedScreenPointEvent","a","createScreenPointFromSupportedEvent","l","s","f","ready","isNaN","x","y","screenPoint","results","d","Set","u","h","g","include","o","n","add","p","allLayerViews","forEach","exclude","delete","m","toMap","w","filter","suspended","has","clips","every","reverse","V","graphicsView","hitTest","map","type","graphic","layer","mapPoint","Promise","all","toArray","flat","c","find","parent","getObjectId","uid","sourceLayer","_ref","sublayers"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/support/hitTestUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../Graphic.js\";import{isSome as r}from\"../../../core/arrayUtils.js\";import{isIterable as i}from\"../../../core/iteratorUtils.js\";import{clipContainsPoint as t}from\"./clippingUtils.js\";import{isSupportedScreenPointEvent as a,createScreenPointFromSupportedEvent as l}from\"../../support/screenUtils.js\";async function s(e,i,s){const f=a(i)?l(e,i):i;if(!e.ready||isNaN(f.x)||isNaN(f.y))return{screenPoint:f,results:[]};let d=new Set;const y=new Set;let u=!1,h=null,g=null;s?.include?o(s.include,n(e,(e=>{d.add(e),p(e,(e=>y.add(e)))}),((e,r)=>{y.add(e),d.add(r)}),(e=>{h||(h=new Set),h.add(e)}),(e=>d.add(e)),(()=>u=!0))):(u=!0,d=new Set(e.allLayerViews),d.forEach((e=>{p(e,(e=>y.add(e)))}))),s?.exclude&&o(s.exclude,n(e,(e=>{d.delete(e),p(e,(e=>y.delete(e)))}),(e=>y.delete(e)),(e=>{g||(g=new Set),g.add(e)})));const m=e.toMap(f),w=e.allLayerViews.filter((r=>!r.suspended&&d.has(r)&&r.clips.every((r=>t(e,r,f,m))))).reverse();let V=[...u?e.graphicsView.hitTest(m).map((e=>({type:\"graphic\",graphic:e,layer:null,mapPoint:m}))):[],...await Promise.all(w.map((e=>e.hitTest(m,f))).toArray())].filter(r).flat().filter(r);return V=V.filter((e=>\"graphic\"!==e.type||\"subtype-group\"!==e.layer?.type||y.has(e.graphic.layer))),h&&(V=V.filter((e=>!(\"graphic\"in e)||!e.graphic||h?.has(c(e.graphic))))),g&&(V=V.filter((e=>!(\"graphic\"in e)||!e.graphic||!g?.has(c(e.graphic))))),{screenPoint:f,results:V}}function n(r,i,t,a,l,s){return n=>{if(n instanceof e){if(n.layer===r)s?.();else{const e=r.allLayerViews.find((e=>e.layer===n.layer));e&&l?.(e)}a(c(n))}else if(\"layer\"in n&&\"element\"in n);else if(\"subtype-sublayer\"===n.type){const e=r.allLayerViews.find((e=>e.layer===n.parent));e&&t(n,e)}else{const e=r.allLayerViews.find((e=>e.layer===n));e&&i(e)}}}function o(e,r){if(e)if(i(e))for(const t of e)if(i(t))for(const e of t)r(e);else r(t);else r(e)}function c(e){const r=e.getObjectId();return r?`${e.layer?.uid??e.sourceLayer?.uid??\"MapView\"}/${r}`:`\"MapView/${e.uid}`}function p({layer:e},r){\"subtype-group\"===e?.type&&e.sublayers.forEach((e=>{r(e)}))}export{s as hitTest};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}