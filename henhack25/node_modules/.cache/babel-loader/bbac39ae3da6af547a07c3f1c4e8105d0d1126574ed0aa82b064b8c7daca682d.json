{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { getMetersPerVerticalUnitForSR as e } from \"../../../core/unitUtils.js\";\nimport { equals as t } from \"../../../geometry/support/spatialReferenceUtils.js\";\nimport { hasGeometry as r, OptimizedFeature as o } from \"../../../layers/graphics/OptimizedFeature.js\";\nimport i from \"../../../layers/graphics/OptimizedFeatureSet.js\";\nimport s from \"../../../layers/graphics/OptimizedGeometry.js\";\nconst n = [\"esriGeometryPoint\", \"esriGeometryMultipoint\", \"esriGeometryPolyline\", \"esriGeometryPolygon\"];\nclass a {\n  constructor(e) {\n    this._options = e, this.geometryTypes = n, this._coordinatePtr = 0, this._vertexDimension = 0;\n  }\n  createFeatureResult() {\n    return new i();\n  }\n  prepareFeatures(e) {\n    this._vertexDimension = 2, e.hasZ && this._vertexDimension++, e.hasM && this._vertexDimension++;\n  }\n  finishFeatureResult(o) {\n    if (!o?.features || !o.hasZ || !this._options.sourceSpatialReference || !o.spatialReference || t(o.spatialReference, this._options.sourceSpatialReference) || o.spatialReference.vcsWkid) return;\n    const i = e(this._options.sourceSpatialReference) / e(o.spatialReference);\n    if (1 !== i) for (const e of o.features) {\n      if (!r(e)) continue;\n      const t = e.geometry.coords;\n      for (let e = 2; e < t.length; e += 3) t[e] *= i;\n    }\n  }\n  addFeature(e, t) {\n    e.features.push(t);\n  }\n  createFeature() {\n    return new o(null, {}, null, 0);\n  }\n  createSpatialReference() {\n    return {\n      wkid: 0\n    };\n  }\n  createGeometry() {\n    return new s();\n  }\n  addField(e, t) {\n    e.fields.push(t);\n  }\n  allocateCoordinates(e) {\n    e.coords.length = e.lengths.reduce((e, t) => e + t, 0) * this._vertexDimension, this._coordinatePtr = 0;\n  }\n  addCoordinate(e, t) {\n    e.coords[this._coordinatePtr++] = t;\n  }\n  addCoordinatePoint(e, t) {\n    e.coords.push(t);\n  }\n  addLength(e, t) {\n    e.lengths.push(t);\n  }\n  addQueryGeometry(e, t) {\n    e.queryGeometry = t.queryGeometry, e.queryGeometryType = t.queryGeometryType;\n  }\n  createPointGeometry() {\n    return new s();\n  }\n}\nexport { a as OptimizedFeatureSetParserContext, n as optimizedGeometryTypes };","map":{"version":3,"names":["getMetersPerVerticalUnitForSR","e","equals","t","hasGeometry","r","OptimizedFeature","o","i","s","n","a","constructor","_options","geometryTypes","_coordinatePtr","_vertexDimension","createFeatureResult","prepareFeatures","hasZ","hasM","finishFeatureResult","features","sourceSpatialReference","spatialReference","vcsWkid","geometry","coords","length","addFeature","push","createFeature","createSpatialReference","wkid","createGeometry","addField","fields","allocateCoordinates","lengths","reduce","addCoordinate","addCoordinatePoint","addLength","addQueryGeometry","queryGeometry","queryGeometryType","createPointGeometry","OptimizedFeatureSetParserContext","optimizedGeometryTypes"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/rest/query/operations/pbfOptimizedFeatureSet.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{getMetersPerVerticalUnitForSR as e}from\"../../../core/unitUtils.js\";import{equals as t}from\"../../../geometry/support/spatialReferenceUtils.js\";import{hasGeometry as r,OptimizedFeature as o}from\"../../../layers/graphics/OptimizedFeature.js\";import i from\"../../../layers/graphics/OptimizedFeatureSet.js\";import s from\"../../../layers/graphics/OptimizedGeometry.js\";const n=[\"esriGeometryPoint\",\"esriGeometryMultipoint\",\"esriGeometryPolyline\",\"esriGeometryPolygon\"];class a{constructor(e){this._options=e,this.geometryTypes=n,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new i}prepareFeatures(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++}finishFeatureResult(o){if(!o?.features||!o.hasZ||!this._options.sourceSpatialReference||!o.spatialReference||t(o.spatialReference,this._options.sourceSpatialReference)||o.spatialReference.vcsWkid)return;const i=e(this._options.sourceSpatialReference)/e(o.spatialReference);if(1!==i)for(const e of o.features){if(!r(e))continue;const t=e.geometry.coords;for(let e=2;e<t.length;e+=3)t[e]*=i}}addFeature(e,t){e.features.push(t)}createFeature(){return new o(null,{},null,0)}createSpatialReference(){return{wkid:0}}createGeometry(){return new s}addField(e,t){e.fields.push(t)}allocateCoordinates(e){e.coords.length=e.lengths.reduce(((e,t)=>e+t),0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(e,t){e.coords[this._coordinatePtr++]=t}addCoordinatePoint(e,t){e.coords.push(t)}addLength(e,t){e.lengths.push(t)}addQueryGeometry(e,t){e.queryGeometry=t.queryGeometry,e.queryGeometryType=t.queryGeometryType}createPointGeometry(){return new s}}export{a as OptimizedFeatureSetParserContext,n as optimizedGeometryTypes};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}