{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport t from \"../../../../../core/RandomLCG.js\";\nimport { g as o, n as e } from \"../../../../../chunks/vec32.js\";\nimport { create as r } from \"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { glLayout as n } from \"../../../support/buffer/glUtil.js\";\nimport { compressNormal as i } from \"../Normals.js\";\nimport { RegularEdgeInstancesLayout as s, SilhouetteEdgeInstancesLayout as a } from \"./bufferLayouts.js\";\nconst c = .7;\nclass f {\n  updateSettings(t) {\n    this.settings = t, this._edgeHashFunction = t.reducedPrecision ? d : l;\n  }\n  write(t, o, e) {\n    B.seed = this._edgeHashFunction(e);\n    const r = B.getIntRange(0, 255),\n      n = B.getIntRange(0, this.settings.variants - 1),\n      i = B.getFloat(),\n      s = 255 * (.5 * y(-(1 - Math.min(i / c, 1)) + Math.max(0, i - c) / (1 - c), 1.2) + .5);\n    t.position0.setVec(o, e.position0), t.position1.setVec(o, e.position1), t.componentIndex.set(o, e.componentIndex), t.variantOffset.set(o, r), t.variantStroke.set(o, n), t.variantExtension.set(o, s);\n  }\n}\nconst m = new Float32Array(6),\n  p = new Uint32Array(m.buffer),\n  u = new Uint32Array(1);\nfunction l(t) {\n  return m[0] = t.position0[0], m[1] = t.position0[1], m[2] = t.position0[2], m[3] = t.position1[0], m[4] = t.position1[1], m[5] = t.position1[2], u[0] = 31 * (31 * (31 * (31 * (31 * (166811 + p[0]) + p[1]) + p[2]) + p[3]) + p[4]) + p[5], u[0];\n}\nfunction d(t) {\n  const o = m;\n  o[0] = h(t.position0[0]), o[1] = h(t.position0[1]), o[2] = h(t.position0[2]), o[3] = h(t.position1[0]), o[4] = h(t.position1[1]), o[5] = h(t.position1[2]), u[0] = 5381;\n  for (let e = 0; e < p.length; e++) u[0] = 31 * u[0] + p[e];\n  return u[0];\n}\nconst g = 1e4;\nfunction h(t) {\n  return Math.round(t * g) / g;\n}\nfunction y(t, o) {\n  return Math.abs(t) ** o * Math.sign(t);\n}\nclass w {\n  constructor() {\n    this._commonWriter = new f();\n  }\n  updateSettings(t) {\n    this._commonWriter.updateSettings(t);\n  }\n  allocate(t) {\n    return s.createBuffer(t);\n  }\n  write(t, r, n) {\n    this._commonWriter.write(t, r, n), o(S, n.faceNormal0, n.faceNormal1), e(S, S);\n    const {\n      typedBuffer: s,\n      typedBufferStride: a\n    } = t.normalCompressed;\n    i(s, r, S[0], S[1], S[2], a);\n  }\n}\nw.Layout = s, w.glLayout = n(s, 1);\nclass N {\n  constructor() {\n    this._commonWriter = new f();\n  }\n  updateSettings(t) {\n    this._commonWriter.updateSettings(t);\n  }\n  allocate(t) {\n    return a.createBuffer(t);\n  }\n  write(t, o, e) {\n    this._commonWriter.write(t, o, e);\n    {\n      const {\n        typedBuffer: r,\n        typedBufferStride: n\n      } = t.normalCompressed;\n      i(r, o, e.faceNormal0[0], e.faceNormal0[1], e.faceNormal0[2], n);\n    }\n    {\n      const {\n        typedBuffer: r,\n        typedBufferStride: n\n      } = t.normal2Compressed;\n      i(r, o, e.faceNormal1[0], e.faceNormal1[1], e.faceNormal1[2], n);\n    }\n  }\n}\nN.Layout = a, N.glLayout = n(a, 1);\nconst S = r(),\n  B = new t();\nexport { w as RegularEdgeBufferWriter, N as SilhouetteEdgeBufferWriter };","map":{"version":3,"names":["t","g","o","n","e","create","r","glLayout","compressNormal","i","RegularEdgeInstancesLayout","s","SilhouetteEdgeInstancesLayout","a","c","f","updateSettings","settings","_edgeHashFunction","reducedPrecision","d","l","write","B","seed","getIntRange","variants","getFloat","y","Math","min","max","position0","setVec","position1","componentIndex","set","variantOffset","variantStroke","variantExtension","m","Float32Array","p","Uint32Array","buffer","u","h","length","round","abs","sign","w","constructor","_commonWriter","allocate","createBuffer","S","faceNormal0","faceNormal1","typedBuffer","typedBufferStride","normalCompressed","Layout","N","normal2Compressed","RegularEdgeBufferWriter","SilhouetteEdgeBufferWriter"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/3d/webgl-engine/lib/edgeRendering/edgeBufferWriters.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport t from\"../../../../../core/RandomLCG.js\";import{g as o,n as e}from\"../../../../../chunks/vec32.js\";import{create as r}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{glLayout as n}from\"../../../support/buffer/glUtil.js\";import{compressNormal as i}from\"../Normals.js\";import{RegularEdgeInstancesLayout as s,SilhouetteEdgeInstancesLayout as a}from\"./bufferLayouts.js\";const c=.7;class f{updateSettings(t){this.settings=t,this._edgeHashFunction=t.reducedPrecision?d:l}write(t,o,e){B.seed=this._edgeHashFunction(e);const r=B.getIntRange(0,255),n=B.getIntRange(0,this.settings.variants-1),i=B.getFloat(),s=255*(.5*y(-(1-Math.min(i/c,1))+Math.max(0,i-c)/(1-c),1.2)+.5);t.position0.setVec(o,e.position0),t.position1.setVec(o,e.position1),t.componentIndex.set(o,e.componentIndex),t.variantOffset.set(o,r),t.variantStroke.set(o,n),t.variantExtension.set(o,s)}}const m=new Float32Array(6),p=new Uint32Array(m.buffer),u=new Uint32Array(1);function l(t){return m[0]=t.position0[0],m[1]=t.position0[1],m[2]=t.position0[2],m[3]=t.position1[0],m[4]=t.position1[1],m[5]=t.position1[2],u[0]=31*(31*(31*(31*(31*(166811+p[0])+p[1])+p[2])+p[3])+p[4])+p[5],u[0]}function d(t){const o=m;o[0]=h(t.position0[0]),o[1]=h(t.position0[1]),o[2]=h(t.position0[2]),o[3]=h(t.position1[0]),o[4]=h(t.position1[1]),o[5]=h(t.position1[2]),u[0]=5381;for(let e=0;e<p.length;e++)u[0]=31*u[0]+p[e];return u[0]}const g=1e4;function h(t){return Math.round(t*g)/g}function y(t,o){return Math.abs(t)**o*Math.sign(t)}class w{constructor(){this._commonWriter=new f}updateSettings(t){this._commonWriter.updateSettings(t)}allocate(t){return s.createBuffer(t)}write(t,r,n){this._commonWriter.write(t,r,n),o(S,n.faceNormal0,n.faceNormal1),e(S,S);const{typedBuffer:s,typedBufferStride:a}=t.normalCompressed;i(s,r,S[0],S[1],S[2],a)}}w.Layout=s,w.glLayout=n(s,1);class N{constructor(){this._commonWriter=new f}updateSettings(t){this._commonWriter.updateSettings(t)}allocate(t){return a.createBuffer(t)}write(t,o,e){this._commonWriter.write(t,o,e);{const{typedBuffer:r,typedBufferStride:n}=t.normalCompressed;i(r,o,e.faceNormal0[0],e.faceNormal0[1],e.faceNormal0[2],n)}{const{typedBuffer:r,typedBufferStride:n}=t.normal2Compressed;i(r,o,e.faceNormal1[0],e.faceNormal1[1],e.faceNormal1[2],n)}}}N.Layout=a,N.glLayout=n(a,1);const S=r(),B=new t;export{w as RegularEdgeBufferWriter,N as SilhouetteEdgeBufferWriter};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}