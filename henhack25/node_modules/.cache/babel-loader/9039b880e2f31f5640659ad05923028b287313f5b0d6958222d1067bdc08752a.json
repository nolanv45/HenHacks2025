{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { i as e } from \"../../../../chunks/vec32.js\";\nimport { create as t } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { create as i, empty as r, expandWithRect as s, center as o, set as d, toRect as n } from \"../../../../geometry/support/aaBoundingBox.js\";\nimport { create as a } from \"../../../../geometry/support/aaBoundingRect.js\";\nimport { demResolutionForBoundingBox as h } from \"./graphicUtils.js\";\nimport { Object3DState as c } from \"../../webgl-engine/lib/basicInterfaces.js\";\nimport { DirtyOperation as g, DirtyState as m } from \"../../webgl-engine/lib/ModelDirtyTypes.js\";\nclass l {\n  constructor(e, t, i, r) {\n    this.graphics3DSymbolLayer = e, this.renderGeometries = t, this.boundingBox = i, this._drapeSourceRenderer = r, this.type = \"draped\", this.stage = null, this._visible = !1, this._addedToStage = !1, this.isElevationSource = !1;\n  }\n  initialize(e) {\n    this.stage = e.stage;\n  }\n  setVisibility(e) {\n    if (null != this.stage && this._visible !== e) {\n      if (this._visible = e, e && !this._addedToStage) return this._addedToStage = !0, void this._drapeSourceRenderer.addGeometries(this.renderGeometries, g.ADD);\n      if (e || this._addedToStage) {\n        for (const e of this.renderGeometries) e.visible = this._visible;\n        this._drapeSourceRenderer.modifyGeometries(this.renderGeometries, m.VISIBILITY);\n      }\n    }\n  }\n  destroy() {\n    this.stage && this._addedToStage && this._drapeSourceRenderer.removeGeometries(this.renderGeometries, g.REMOVE), this._addedToStage = !1, this._visible = !1, this.stage = null;\n  }\n  getCenterObjectSpace(i = t()) {\n    return e(i, 0, 0, 0);\n  }\n  getBoundingBoxObjectSpace(e = i()) {\n    return r(e);\n  }\n  addObjectState(e) {\n    e.stateType === c.Highlight && (this.renderGeometries.forEach(t => {\n      const i = t.geometry.allocateIdAndHighlight(e.highlightName);\n      e.addRenderGeometry(t, i, this);\n    }), this._addedToStage && this._drapeSourceRenderer.modifyGeometries(this.renderGeometries, m.HIGHLIGHT));\n  }\n  removeObjectState(e) {\n    this.renderGeometries.forEach(t => e.removeByObject(t));\n  }\n  updateHighlights(e) {}\n  removeRenderGeometryObjectState(e, t) {\n    t.channel === c.Highlight && (e.geometry.removeHighlight(t), this._addedToStage && this._drapeSourceRenderer.modifyGeometries([e], m.HIGHLIGHT));\n  }\n  computeAttachmentOrigin(e) {\n    for (const t of this.renderGeometries) t.geometry.computeAttachmentOrigin(f) && (e.draped.origin[0] += f[0], e.draped.origin[1] += f[1], e.draped.num++);\n  }\n  async getProjectedBoundingBox(e, t, i, d, n) {\n    r(n);\n    for (let r = 0; r < this.renderGeometries.length; r++) {\n      const t = this.renderGeometries[r];\n      this._getRenderGeometryProjectedBoundingRect(t, e, u, i), s(n, u);\n    }\n    if (t) {\n      let e;\n      o(n, f);\n      const i = h(n, t.service.spatialReference, t);\n      try {\n        e = await t.service.queryElevation(f[0], f[1], d, i, \"ground\");\n      } catch (a) {}\n      null != e && (n[2] = Math.min(n[2], e), n[5] = Math.max(n[5], e));\n    }\n    return n;\n  }\n  _getRenderGeometryProjectedBoundingRect(e, t, i, r) {\n    if (this.boundingBox) d(p, this.boundingBox);else {\n      const t = e.boundingSphere,\n        i = t[3];\n      p[0] = t[0] - i, p[1] = t[1] - i, p[2] = t[2] - i, p[3] = t[0] + i, p[4] = t[1] + i, p[5] = t[2] + i;\n    }\n    return t(p, 0, 2), this.calculateRelativeScreenBounds && r.push({\n      location: o(p),\n      screenSpaceBoundingRect: this.calculateRelativeScreenBounds()\n    }), n(p, i);\n  }\n}\nconst u = a(),\n  p = i(),\n  f = t();\nexport { l as Graphics3DDrapedGraphicLayer };","map":{"version":3,"names":["i","e","create","t","empty","r","expandWithRect","s","center","o","set","d","toRect","n","a","demResolutionForBoundingBox","h","Object3DState","c","DirtyOperation","g","DirtyState","m","l","constructor","graphics3DSymbolLayer","renderGeometries","boundingBox","_drapeSourceRenderer","type","stage","_visible","_addedToStage","isElevationSource","initialize","setVisibility","addGeometries","ADD","visible","modifyGeometries","VISIBILITY","destroy","removeGeometries","REMOVE","getCenterObjectSpace","getBoundingBoxObjectSpace","addObjectState","stateType","Highlight","forEach","geometry","allocateIdAndHighlight","highlightName","addRenderGeometry","HIGHLIGHT","removeObjectState","removeByObject","updateHighlights","removeRenderGeometryObjectState","channel","removeHighlight","computeAttachmentOrigin","f","draped","origin","num","getProjectedBoundingBox","length","_getRenderGeometryProjectedBoundingRect","u","service","spatialReference","queryElevation","Math","min","max","p","boundingSphere","calculateRelativeScreenBounds","push","location","screenSpaceBoundingRect","Graphics3DDrapedGraphicLayer"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DDrapedGraphicLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{i as e}from\"../../../../chunks/vec32.js\";import{create as t}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{create as i,empty as r,expandWithRect as s,center as o,set as d,toRect as n}from\"../../../../geometry/support/aaBoundingBox.js\";import{create as a}from\"../../../../geometry/support/aaBoundingRect.js\";import{demResolutionForBoundingBox as h}from\"./graphicUtils.js\";import{Object3DState as c}from\"../../webgl-engine/lib/basicInterfaces.js\";import{DirtyOperation as g,DirtyState as m}from\"../../webgl-engine/lib/ModelDirtyTypes.js\";class l{constructor(e,t,i,r){this.graphics3DSymbolLayer=e,this.renderGeometries=t,this.boundingBox=i,this._drapeSourceRenderer=r,this.type=\"draped\",this.stage=null,this._visible=!1,this._addedToStage=!1,this.isElevationSource=!1}initialize(e){this.stage=e.stage}setVisibility(e){if(null!=this.stage&&this._visible!==e){if(this._visible=e,e&&!this._addedToStage)return this._addedToStage=!0,void this._drapeSourceRenderer.addGeometries(this.renderGeometries,g.ADD);if(e||this._addedToStage){for(const e of this.renderGeometries)e.visible=this._visible;this._drapeSourceRenderer.modifyGeometries(this.renderGeometries,m.VISIBILITY)}}}destroy(){this.stage&&this._addedToStage&&this._drapeSourceRenderer.removeGeometries(this.renderGeometries,g.REMOVE),this._addedToStage=!1,this._visible=!1,this.stage=null}getCenterObjectSpace(i=t()){return e(i,0,0,0)}getBoundingBoxObjectSpace(e=i()){return r(e)}addObjectState(e){e.stateType===c.Highlight&&(this.renderGeometries.forEach((t=>{const i=t.geometry.allocateIdAndHighlight(e.highlightName);e.addRenderGeometry(t,i,this)})),this._addedToStage&&this._drapeSourceRenderer.modifyGeometries(this.renderGeometries,m.HIGHLIGHT))}removeObjectState(e){this.renderGeometries.forEach((t=>e.removeByObject(t)))}updateHighlights(e){}removeRenderGeometryObjectState(e,t){t.channel===c.Highlight&&(e.geometry.removeHighlight(t),this._addedToStage&&this._drapeSourceRenderer.modifyGeometries([e],m.HIGHLIGHT))}computeAttachmentOrigin(e){for(const t of this.renderGeometries)t.geometry.computeAttachmentOrigin(f)&&(e.draped.origin[0]+=f[0],e.draped.origin[1]+=f[1],e.draped.num++)}async getProjectedBoundingBox(e,t,i,d,n){r(n);for(let r=0;r<this.renderGeometries.length;r++){const t=this.renderGeometries[r];this._getRenderGeometryProjectedBoundingRect(t,e,u,i),s(n,u)}if(t){let e;o(n,f);const i=h(n,t.service.spatialReference,t);try{e=await t.service.queryElevation(f[0],f[1],d,i,\"ground\")}catch(a){}null!=e&&(n[2]=Math.min(n[2],e),n[5]=Math.max(n[5],e))}return n}_getRenderGeometryProjectedBoundingRect(e,t,i,r){if(this.boundingBox)d(p,this.boundingBox);else{const t=e.boundingSphere,i=t[3];p[0]=t[0]-i,p[1]=t[1]-i,p[2]=t[2]-i,p[3]=t[0]+i,p[4]=t[1]+i,p[5]=t[2]+i}return t(p,0,2),this.calculateRelativeScreenBounds&&r.push({location:o(p),screenSpaceBoundingRect:this.calculateRelativeScreenBounds()}),n(p,i)}}const u=a(),p=i(),f=t();export{l as Graphics3DDrapedGraphicLayer};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}