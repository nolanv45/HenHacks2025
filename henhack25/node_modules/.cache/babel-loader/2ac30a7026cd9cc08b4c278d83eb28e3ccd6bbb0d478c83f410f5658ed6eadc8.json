{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport r from \"../../../core/Error.js\";\nimport { handlesGroup as t, makeHandle as s } from \"../../../core/handleUtils.js\";\nimport { watch as n } from \"../../../core/reactiveUtils.js\";\nimport { property as o } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/Logger.js\";\nimport \"../../../core/RandomLCG.js\";\nimport { subclass as i } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport a from \"../../../rest/support/FeatureSet.js\";\nimport { isNumber as c } from \"../../../support/guards.js\";\nimport l from \"./FeatureLayerView2D.js\";\nimport { handleNoEngineError as h } from \"./support/handleNoEngineError.js\";\nimport u from \"../../layers/StreamLayerView.js\";\nlet p = class extends u(l) {\n  constructor() {\n    super(...arguments), this.pipelineConnectionStatus = \"disconnected\", this.pipelineErrorString = null;\n  }\n  initialize() {\n    this.addHandles([n(() => this.layer.customParameters, async e => {\n      (await this.getWorker()).streamMessenger.updateCustomParameters(e);\n    }), this.layer.on(\"send-message-to-socket\", async e => {\n      (await this.getWorker()).streamMessenger.sendMessageToSocket(e);\n    }), this.layer.on(\"send-message-to-client\", async e => {\n      (await this.getWorker()).streamMessenger.sendMessageToClient(e), this._isUserPaused && \"type\" in e && \"clear\" === e.type && this.incrementSourceRefreshVersion();\n    }), n(() => this.layer.purgeOptions, () => this._update()), n(() => this.suspended, this._onSuspendedChange.bind(this))], \"constructor\"), this._doResume();\n  }\n  destroy() {\n    this._doPause();\n  }\n  get connectionError() {\n    return this.pipelineErrorString ? new r(\"stream-controller\", this.pipelineErrorString) : null;\n  }\n  on(e, r) {\n    if (Array.isArray(e)) return t(e.map(e => this.on(e, r)));\n    const n = [\"data-received\", \"message-received\"].includes(e);\n    n && this.getWorker().then(r => r.streamMessenger.enableEvent(e, !0));\n    const o = super.on(e, r),\n      i = this;\n    return s(() => {\n      o.remove(), n && (i._workerProxy.closed || i.hasEventListener(e) || i.getWorker().then(r => r.streamMessenger.enableEvent(e, !1)));\n    });\n  }\n  async queryLatestObservations(e, t) {\n    if (!(this.layer.timeInfo?.endField || this.layer.timeInfo?.startField || this.layer.timeInfo?.trackIdField)) throw new r(\"streamlayer-no-timeField\", \"queryLatestObservation can only be used with services that define a TrackIdField\");\n    const s = await this.getWorker();\n    return h(s.features.executeQueryForLatestObservations(this._cleanUpQuery(e), t).then(e => {\n      const r = a.fromJSON(e);\n      return r.features.forEach(e => {\n        e.layer = this.layer, e.sourceLayer = this.layer;\n      }), r;\n    }), new a({\n      features: []\n    }));\n  }\n  detach() {\n    super.detach(), this.pipelineConnectionStatus = \"disconnected\";\n  }\n  async queryObjectIds(e, r) {\n    return (await super.queryObjectIds(e, r)).filter(c);\n  }\n  get _streamConnectionStatus() {\n    return this.pipelineConnectionStatus;\n  }\n  _doPause() {\n    null != this._refreshInterval && (clearInterval(this._refreshInterval), this._refreshInterval = null);\n  }\n  _doResume() {\n    this._refreshInterval = setInterval(() => this.incrementSourceRefreshVersion(), this.layer.updateInterval);\n  }\n  _doDisconnect() {\n    this.getWorker().then(e => e.streamMessenger.disconnect()), this._doPause();\n  }\n  _doConnect() {\n    this.getWorker().then(e => e.streamMessenger.connect()), this.resume();\n  }\n  _doClear() {\n    this.getWorker().then(e => e.streamMessenger.clear()), null == this._refreshInterval && this.incrementSourceRefreshVersion();\n  }\n  _createClientOptions() {\n    const e = super._createClientOptions(),\n      r = this;\n    return {\n      ...e,\n      get container() {\n        return r.featureContainer;\n      },\n      setProperty: e => {\n        this.set(e.propertyName, e.value);\n      }\n    };\n  }\n};\ne([o()], p.prototype, \"pipelineConnectionStatus\", void 0), e([o()], p.prototype, \"pipelineErrorString\", void 0), e([o({\n  readOnly: !0\n})], p.prototype, \"connectionError\", null), e([o({\n  readOnly: !0\n})], p.prototype, \"_streamConnectionStatus\", null), p = e([i(\"esri.views.2d.layers.StreamLayerView2D\")], p);\nconst d = p;\nexport { d as default };","map":{"version":3,"names":["_","e","r","handlesGroup","t","makeHandle","s","watch","n","property","o","subclass","i","a","isNumber","c","l","handleNoEngineError","h","u","p","constructor","arguments","pipelineConnectionStatus","pipelineErrorString","initialize","addHandles","layer","customParameters","getWorker","streamMessenger","updateCustomParameters","on","sendMessageToSocket","sendMessageToClient","_isUserPaused","type","incrementSourceRefreshVersion","purgeOptions","_update","suspended","_onSuspendedChange","bind","_doResume","destroy","_doPause","connectionError","Array","isArray","map","includes","then","enableEvent","remove","_workerProxy","closed","hasEventListener","queryLatestObservations","timeInfo","endField","startField","trackIdField","features","executeQueryForLatestObservations","_cleanUpQuery","fromJSON","forEach","sourceLayer","detach","queryObjectIds","filter","_streamConnectionStatus","_refreshInterval","clearInterval","setInterval","updateInterval","_doDisconnect","disconnect","_doConnect","connect","resume","_doClear","clear","_createClientOptions","container","featureContainer","setProperty","set","propertyName","value","prototype","readOnly","d","default"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/layers/StreamLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import r from\"../../../core/Error.js\";import{handlesGroup as t,makeHandle as s}from\"../../../core/handleUtils.js\";import{watch as n}from\"../../../core/reactiveUtils.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import a from\"../../../rest/support/FeatureSet.js\";import{isNumber as c}from\"../../../support/guards.js\";import l from\"./FeatureLayerView2D.js\";import{handleNoEngineError as h}from\"./support/handleNoEngineError.js\";import u from\"../../layers/StreamLayerView.js\";let p=class extends(u(l)){constructor(){super(...arguments),this.pipelineConnectionStatus=\"disconnected\",this.pipelineErrorString=null}initialize(){this.addHandles([n((()=>this.layer.customParameters),(async e=>{(await this.getWorker()).streamMessenger.updateCustomParameters(e)})),this.layer.on(\"send-message-to-socket\",(async e=>{(await this.getWorker()).streamMessenger.sendMessageToSocket(e)})),this.layer.on(\"send-message-to-client\",(async e=>{(await this.getWorker()).streamMessenger.sendMessageToClient(e),this._isUserPaused&&\"type\"in e&&\"clear\"===e.type&&this.incrementSourceRefreshVersion()})),n((()=>this.layer.purgeOptions),(()=>this._update())),n((()=>this.suspended),this._onSuspendedChange.bind(this))],\"constructor\"),this._doResume()}destroy(){this._doPause()}get connectionError(){return this.pipelineErrorString?new r(\"stream-controller\",this.pipelineErrorString):null}on(e,r){if(Array.isArray(e))return t(e.map((e=>this.on(e,r))));const n=[\"data-received\",\"message-received\"].includes(e);n&&this.getWorker().then((r=>r.streamMessenger.enableEvent(e,!0)));const o=super.on(e,r),i=this;return s((()=>{o.remove(),n&&(i._workerProxy.closed||i.hasEventListener(e)||i.getWorker().then((r=>r.streamMessenger.enableEvent(e,!1))))}))}async queryLatestObservations(e,t){if(!(this.layer.timeInfo?.endField||this.layer.timeInfo?.startField||this.layer.timeInfo?.trackIdField))throw new r(\"streamlayer-no-timeField\",\"queryLatestObservation can only be used with services that define a TrackIdField\");const s=await this.getWorker();return h(s.features.executeQueryForLatestObservations(this._cleanUpQuery(e),t).then((e=>{const r=a.fromJSON(e);return r.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),r})),new a({features:[]}))}detach(){super.detach(),this.pipelineConnectionStatus=\"disconnected\"}async queryObjectIds(e,r){return(await super.queryObjectIds(e,r)).filter(c)}get _streamConnectionStatus(){return this.pipelineConnectionStatus}_doPause(){null!=this._refreshInterval&&(clearInterval(this._refreshInterval),this._refreshInterval=null)}_doResume(){this._refreshInterval=setInterval((()=>this.incrementSourceRefreshVersion()),this.layer.updateInterval)}_doDisconnect(){this.getWorker().then((e=>e.streamMessenger.disconnect())),this._doPause()}_doConnect(){this.getWorker().then((e=>e.streamMessenger.connect())),this.resume()}_doClear(){this.getWorker().then((e=>e.streamMessenger.clear())),null==this._refreshInterval&&this.incrementSourceRefreshVersion()}_createClientOptions(){const e=super._createClientOptions(),r=this;return{...e,get container(){return r.featureContainer},setProperty:e=>{this.set(e.propertyName,e.value)}}}};e([o()],p.prototype,\"pipelineConnectionStatus\",void 0),e([o()],p.prototype,\"pipelineErrorString\",void 0),e([o({readOnly:!0})],p.prototype,\"connectionError\",null),e([o({readOnly:!0})],p.prototype,\"_streamConnectionStatus\",null),p=e([i(\"esri.views.2d.layers.StreamLayerView2D\")],p);const d=p;export{d as default};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}