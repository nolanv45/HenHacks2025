{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { BufferView as e } from \"./bufferview.js\";\nclass i {\n  constructor(e) {\n    this._gltf = e, this._bufferViews = [], this._isFinalized = !1, e.buffers || (e.buffers = []), this.index = e.buffers.length;\n    const i = {\n      byteLength: -1\n    };\n    e.buffers.push(i), this._buffer = i;\n  }\n  addBufferView(i, t, r) {\n    if (this._finalizePromise) throw new Error(\"Cannot add buffer view after fiinalizing buffer\");\n    const f = new e(this, this._gltf, i, t, r);\n    return this._bufferViews.push(f), f;\n  }\n  getByteOffset(e) {\n    let i = 0;\n    for (const t of this._bufferViews) {\n      if (t === e) return i;\n      i += t.byteSize;\n    }\n    throw new Error(\"Given bufferView was not present in this buffer\");\n  }\n  getViewFinalizePromises(e) {\n    const i = [];\n    for (const t of this._bufferViews) {\n      if (e && t === e) return i;\n      i.push(t.finalized);\n    }\n    return i;\n  }\n  getArrayBuffer() {\n    if (!this._isFinalized) throw new Error(\"Cannot get ArrayBuffer from Buffer before it is finalized\");\n    const e = this._getTotalSize(),\n      i = new ArrayBuffer(e);\n    let t = 0;\n    for (const r of this._bufferViews) r.writeOutToBuffer(i, t), t += r.byteSize;\n    return i;\n  }\n  finalize() {\n    if (this._finalizePromise) throw new Error(`Buffer ${this.index} was already finalized`);\n    return this._finalizePromise = Promise.allSettled(this.getViewFinalizePromises()).then(() => {\n      this._isFinalized = !0;\n      const e = this.getArrayBuffer();\n      this._buffer.byteLength = e.byteLength, this._buffer.uri = e;\n    }), this._gltf.extras.promises.push(this._finalizePromise), this._finalizePromise;\n  }\n  _getTotalSize() {\n    let e = 0;\n    for (const i of this._bufferViews) e += i.byteSize;\n    return e;\n  }\n}\nexport { i as Buffer };","map":{"version":3,"names":["BufferView","e","i","constructor","_gltf","_bufferViews","_isFinalized","buffers","index","length","byteLength","push","_buffer","addBufferView","t","r","_finalizePromise","Error","f","getByteOffset","byteSize","getViewFinalizePromises","finalized","getArrayBuffer","_getTotalSize","ArrayBuffer","writeOutToBuffer","finalize","Promise","allSettled","then","uri","extras","promises","Buffer"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/geometry/support/meshUtils/exporters/gltf/buffer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{BufferView as e}from\"./bufferview.js\";class i{constructor(e){this._gltf=e,this._bufferViews=[],this._isFinalized=!1,e.buffers||(e.buffers=[]),this.index=e.buffers.length;const i={byteLength:-1};e.buffers.push(i),this._buffer=i}addBufferView(i,t,r){if(this._finalizePromise)throw new Error(\"Cannot add buffer view after fiinalizing buffer\");const f=new e(this,this._gltf,i,t,r);return this._bufferViews.push(f),f}getByteOffset(e){let i=0;for(const t of this._bufferViews){if(t===e)return i;i+=t.byteSize}throw new Error(\"Given bufferView was not present in this buffer\")}getViewFinalizePromises(e){const i=[];for(const t of this._bufferViews){if(e&&t===e)return i;i.push(t.finalized)}return i}getArrayBuffer(){if(!this._isFinalized)throw new Error(\"Cannot get ArrayBuffer from Buffer before it is finalized\");const e=this._getTotalSize(),i=new ArrayBuffer(e);let t=0;for(const r of this._bufferViews)r.writeOutToBuffer(i,t),t+=r.byteSize;return i}finalize(){if(this._finalizePromise)throw new Error(`Buffer ${this.index} was already finalized`);return this._finalizePromise=Promise.allSettled(this.getViewFinalizePromises()).then((()=>{this._isFinalized=!0;const e=this.getArrayBuffer();this._buffer.byteLength=e.byteLength,this._buffer.uri=e})),this._gltf.extras.promises.push(this._finalizePromise),this._finalizePromise}_getTotalSize(){let e=0;for(const i of this._bufferViews)e+=i.byteSize;return e}}export{i as Buffer};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}