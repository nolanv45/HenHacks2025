{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport r from \"../../core/Accessor.js\";\nimport { sqlAnd as s } from \"../../core/sql.js\";\nimport { property as t } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/has.js\";\nimport \"../../core/Logger.js\";\nimport \"../../core/RandomLCG.js\";\nimport { subclass as i } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { isInScaleRange as a } from \"../../geometry/support/scaleUtils.js\";\nimport { getLayerFloorFilterClause as o } from \"./floorFilterUtils.js\";\nimport { isExportDynamic as l } from \"./sublayerUtils.js\";\nconst n = {\n  visible: \"visibleSublayers\",\n  definitionExpression: \"layerDefs\",\n  labelingInfo: \"hasDynamicLayers\",\n  labelsVisible: \"hasDynamicLayers\",\n  opacity: \"hasDynamicLayers\",\n  minScale: \"visibleSublayers\",\n  maxScale: \"visibleSublayers\",\n  renderer: \"hasDynamicLayers\",\n  source: \"hasDynamicLayers\"\n};\nlet y = class extends r {\n  constructor(e) {\n    super(e), this.floors = null, this.scale = 0;\n  }\n  destroy() {\n    this.layer = null;\n  }\n  get dynamicLayers() {\n    if (!this.hasDynamicLayers) return null;\n    const e = this.visibleSublayers.map(e => {\n      const r = o(this.floors, e);\n      return e.toExportImageJSON(r);\n    });\n    return e.length ? JSON.stringify(e) : null;\n  }\n  get hasDynamicLayers() {\n    return this.layer && l(this.visibleSublayers, this.layer.serviceSublayers, this.layer.gdbVersion);\n  }\n  set layer(e) {\n    this._get(\"layer\") !== e && (this._set(\"layer\", e), this.removeHandles(\"layer\"), e && this.addHandles([e.allSublayers.on(\"change\", () => this.notifyChange(\"visibleSublayers\")), e.on(\"sublayer-update\", e => this.notifyChange(n[e.propertyName]))], \"layer\"));\n  }\n  get layers() {\n    const e = this.visibleSublayers;\n    return e ? e.length ? \"show:\" + e.map(e => e.id).join(\",\") : \"show:-1\" : null;\n  }\n  get layerDefs() {\n    const e = !!this.floors?.length,\n      r = this.visibleSublayers.filter(r => null != r.definitionExpression || e && null != r.floorInfo);\n    return r.length ? JSON.stringify(r.reduce((e, r) => {\n      const t = o(this.floors, r),\n        i = s(t, r.definitionExpression);\n      return null != i && (e[r.id] = i), e;\n    }, {})) : null;\n  }\n  get version() {\n    this.commitProperty(\"layers\"), this.commitProperty(\"layerDefs\"), this.commitProperty(\"dynamicLayers\");\n    const e = this.layer;\n    return e && (e.commitProperty(\"dpi\"), e.commitProperty(\"imageFormat\"), e.commitProperty(\"imageTransparency\"), e.commitProperty(\"gdbVersion\")), (this._get(\"version\") || 0) + 1;\n  }\n  get visibleSublayers() {\n    const e = [];\n    if (!this.layer) return e;\n    const r = this.layer.sublayers,\n      s = this.scale,\n      t = r => {\n        r.visible && (0 === s || a(s, r.minScale, r.maxScale)) && (r.sublayers ? r.sublayers.forEach(t) : e.unshift(r));\n      };\n    r && r.forEach(t);\n    const i = this._get(\"visibleSublayers\");\n    return !i || i.length !== e.length || i.some((r, s) => e[s] !== r) ? e : i;\n  }\n  toJSON() {\n    const e = this.layer;\n    let r = {\n      dpi: e.dpi,\n      format: e.imageFormat,\n      transparent: e.imageTransparency,\n      gdbVersion: e.gdbVersion || null\n    };\n    return this.hasDynamicLayers && this.dynamicLayers ? r.dynamicLayers = this.dynamicLayers : r = {\n      ...r,\n      layers: this.layers,\n      layerDefs: this.layerDefs\n    }, r;\n  }\n};\ne([t({\n  readOnly: !0\n})], y.prototype, \"dynamicLayers\", null), e([t()], y.prototype, \"floors\", void 0), e([t({\n  readOnly: !0\n})], y.prototype, \"hasDynamicLayers\", null), e([t()], y.prototype, \"layer\", null), e([t({\n  readOnly: !0\n})], y.prototype, \"layers\", null), e([t({\n  readOnly: !0\n})], y.prototype, \"layerDefs\", null), e([t({\n  type: Number\n})], y.prototype, \"scale\", void 0), e([t({\n  readOnly: !0\n})], y.prototype, \"version\", null), e([t({\n  readOnly: !0\n})], y.prototype, \"visibleSublayers\", null), y = e([i(\"esri.layers.support.ExportImageParameters\")], y);\nexport { y as ExportImageParameters };","map":{"version":3,"names":["_","e","r","sqlAnd","s","property","t","subclass","i","isInScaleRange","a","getLayerFloorFilterClause","o","isExportDynamic","l","n","visible","definitionExpression","labelingInfo","labelsVisible","opacity","minScale","maxScale","renderer","source","y","constructor","floors","scale","destroy","layer","dynamicLayers","hasDynamicLayers","visibleSublayers","map","toExportImageJSON","length","JSON","stringify","serviceSublayers","gdbVersion","_get","_set","removeHandles","addHandles","allSublayers","on","notifyChange","propertyName","layers","id","join","layerDefs","filter","floorInfo","reduce","version","commitProperty","sublayers","forEach","unshift","some","toJSON","dpi","format","imageFormat","transparent","imageTransparency","readOnly","prototype","type","Number","ExportImageParameters"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/layers/support/ExportImageParameters.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Accessor.js\";import{sqlAnd as s}from\"../../core/sql.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as i}from\"../../core/accessorSupport/decorators/subclass.js\";import{isInScaleRange as a}from\"../../geometry/support/scaleUtils.js\";import{getLayerFloorFilterClause as o}from\"./floorFilterUtils.js\";import{isExportDynamic as l}from\"./sublayerUtils.js\";const n={visible:\"visibleSublayers\",definitionExpression:\"layerDefs\",labelingInfo:\"hasDynamicLayers\",labelsVisible:\"hasDynamicLayers\",opacity:\"hasDynamicLayers\",minScale:\"visibleSublayers\",maxScale:\"visibleSublayers\",renderer:\"hasDynamicLayers\",source:\"hasDynamicLayers\"};let y=class extends r{constructor(e){super(e),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map((e=>{const r=o(this.floors,e);return e.toExportImageJSON(r)}));return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&l(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(e){this._get(\"layer\")!==e&&(this._set(\"layer\",e),this.removeHandles(\"layer\"),e&&this.addHandles([e.allSublayers.on(\"change\",(()=>this.notifyChange(\"visibleSublayers\"))),e.on(\"sublayer-update\",(e=>this.notifyChange(n[e.propertyName])))],\"layer\"))}get layers(){const e=this.visibleSublayers;return e?e.length?\"show:\"+e.map((e=>e.id)).join(\",\"):\"show:-1\":null}get layerDefs(){const e=!!this.floors?.length,r=this.visibleSublayers.filter((r=>null!=r.definitionExpression||e&&null!=r.floorInfo));return r.length?JSON.stringify(r.reduce(((e,r)=>{const t=o(this.floors,r),i=s(t,r.definitionExpression);return null!=i&&(e[r.id]=i),e}),{})):null}get version(){this.commitProperty(\"layers\"),this.commitProperty(\"layerDefs\"),this.commitProperty(\"dynamicLayers\");const e=this.layer;return e&&(e.commitProperty(\"dpi\"),e.commitProperty(\"imageFormat\"),e.commitProperty(\"imageTransparency\"),e.commitProperty(\"gdbVersion\")),(this._get(\"version\")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const r=this.layer.sublayers,s=this.scale,t=r=>{r.visible&&(0===s||a(s,r.minScale,r.maxScale))&&(r.sublayers?r.sublayers.forEach(t):e.unshift(r))};r&&r.forEach(t);const i=this._get(\"visibleSublayers\");return!i||i.length!==e.length||i.some(((r,s)=>e[s]!==r))?e:i}toJSON(){const e=this.layer;let r={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?r.dynamicLayers=this.dynamicLayers:r={...r,layers:this.layers,layerDefs:this.layerDefs},r}};e([t({readOnly:!0})],y.prototype,\"dynamicLayers\",null),e([t()],y.prototype,\"floors\",void 0),e([t({readOnly:!0})],y.prototype,\"hasDynamicLayers\",null),e([t()],y.prototype,\"layer\",null),e([t({readOnly:!0})],y.prototype,\"layers\",null),e([t({readOnly:!0})],y.prototype,\"layerDefs\",null),e([t({type:Number})],y.prototype,\"scale\",void 0),e([t({readOnly:!0})],y.prototype,\"version\",null),e([t({readOnly:!0})],y.prototype,\"visibleSublayers\",null),y=e([i(\"esri.layers.support.ExportImageParameters\")],y);export{y as ExportImageParameters};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}