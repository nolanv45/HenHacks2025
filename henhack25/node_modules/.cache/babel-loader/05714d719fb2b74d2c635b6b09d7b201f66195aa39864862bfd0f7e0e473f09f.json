{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport t from \"../../config.js\";\nimport { id as s } from \"../../kernel.js\";\nimport r from \"../../request.js\";\nimport { isSome as i } from \"../../core/arrayUtils.js\";\nimport a from \"../../core/Error.js\";\nimport o from \"../../core/Identifiable.js\";\nimport n from \"../../core/JSONSupport.js\";\nimport { clone as l } from \"../../core/lang.js\";\nimport u from \"../../core/Loadable.js\";\nimport { throwIfAborted as p, throwIfAbortError as d } from \"../../core/promiseUtils.js\";\nimport { property as c } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/has.js\";\nimport \"../../core/Logger.js\";\nimport { reader as m } from \"../../core/accessorSupport/decorators/reader.js\";\nimport { subclass as y } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport h from \"../../editing/sharedTemplates/SharedTemplateMetadata.js\";\nimport f from \"../../geometry/SpatialReference.js\";\nimport { getFeatureJSON as g, getFeatureIds as v, getAttachmentEditsJSON as b, isProtectedOrPrivateVersionError as S, unpackEditResultData as E, createEditedFeatures as j } from \"../../layers/graphics/applyEditsUtils.js\";\nimport { checkEditingCapabilities as w, normalizeEdits as I, normalizeGeometries as F } from \"../../layers/graphics/editingSupport.js\";\nimport { emitApplyEditsEvent as R } from \"../../layers/mixins/EditBusLayer.js\";\nimport { ensureCredentialIfSignedIn as A } from \"../../layers/support/featureLayerUtils.js\";\nimport { getOwningPortalUrl as T } from \"../../layers/support/layerUtils.js\";\nimport { getFeatureLayerCapabilities as U } from \"../../layers/support/serviceCapabilitiesUtils.js\";\nimport C from \"../../portal/PortalItem.js\";\nimport { getUserPrivileges as O } from \"../../portal/support/portalItemUtils.js\";\nimport { isSecureProxyService as D } from \"../../portal/support/urlUtils.js\";\nimport { parseUrl as P, asValidOptions as V, encode as k } from \"../utils.js\";\nimport { unapplyEditsZUnitScaling as M } from \"../query/operations/editsZScale.js\";\nimport { querySharedTemplates as N } from \"../sharedTemplates/querySharedTemplates.js\";\nimport { readBoolean as q, readNumber as L } from \"../support/jsonUtils.js\";\nimport { isSafeToEditVersion as _, isVersionInEditSession as x, currentSessionId as J } from \"../../versionManagement/support/versionManagementUtils.js\";\nfunction Q(e, t) {\n  const s = t.id;\n  return {\n    id: s,\n    name: t.name,\n    url: `${e}/${s}`,\n    type: t.type || \"Table\"\n  };\n}\nfunction W(e) {\n  return {\n    data: H(e),\n    sync: z(e),\n    operations: B(e.capabilities, e),\n    query: $(e),\n    editing: G(e)\n  };\n}\nfunction H(e) {\n  return {\n    isDataVersioned: q(e, \"hasVersionedData\", !1),\n    isDataBranchVersioned: q(e, \"hasBranchVersionedData\", !1)\n  };\n}\nfunction B(e, t) {\n  const s = e ? e.toLowerCase().split(\",\").map(e => e.trim()) : [],\n    r = s.includes(\"query\"),\n    i = s.includes(\"editing\") && !t.datesInUnknownTimezone;\n  let a = i && s.includes(\"create\"),\n    o = i && s.includes(\"delete\"),\n    n = i && s.includes(\"update\");\n  return i && !(a || o || n) && (a = o = n = !0), {\n    supportsAdd: a,\n    supportsDelete: o,\n    supportsEditing: i,\n    supportsChangeTracking: s.includes(\"changetracking\"),\n    supportsQuery: r,\n    supportsQueryDataElements: q(t, \"supportsQueryDataElements\", !1),\n    supportsQueryDomains: q(t, \"supportsQueryDomains\", !1),\n    supportsQueryContingentValues: q(t, \"supportsQueryContingentValues\", !1),\n    supportsSync: s.includes(\"sync\"),\n    supportsUpdate: n\n  };\n}\nfunction $(e) {\n  return {\n    maxRecordCountFactor: L(e, \"maxRecordCountFactor\", void 0),\n    maxRecordCount: L(e, \"maxRecordCount\", void 0)\n  };\n}\nfunction G(e) {\n  const t = e?.advancedEditingCapabilities;\n  return {\n    supportsAsyncApplyEdits: q(t, \"supportsAsyncApplyEdits\", !1),\n    supportsGlobalId: q(e, \"supportsApplyEditsWithGlobalIds\", !1),\n    supportsReturnServiceEditsInSourceSpatialReference: q(t, \"supportsReturnServiceEditsInSourceSR\", !1),\n    supportsSharedTemplates: q(e, \"hasSharedTemplates\", !1),\n    supportsSplit: q(t, \"supportsSplit\", !1)\n  };\n}\nfunction z(e) {\n  const t = e?.syncCapabilities,\n    s = t?.supportedSyncDataOptions;\n  return {\n    supportsAsync: q(t, \"supportsAsync\", !1),\n    supportedSyncDataOptions: {\n      annotations: !(1 & ~s),\n      dimensions: !(2 & ~s),\n      contingentValues: !(4 & ~s),\n      attributeRules: !(8 & ~s),\n      utilityNetworkSystem: !(16 & ~s),\n      annotationFullModel: !(32 & ~s),\n      include3DObjects: !(64 & ~s),\n      utilityNetworkMissingLayers: !(128 & ~s),\n      preserveTrueCurves: !(256 & ~s)\n    }\n  };\n}\nlet Z = class extends n.JSONSupportMixin(o.IdentifiableMixin(u)) {\n  constructor(e) {\n    super(e), this.url = null, this.sourceJSON = null, this.userHasFullEditingPrivileges = !1, this.userHasUpdateItemPrivileges = !1, this.userTypeExtensions = [], this.layerInfos = null, this.tableInfos = null, this.capabilities = null;\n  }\n  read(e, t) {\n    this.sourceJSON = e, super.read(e, t);\n  }\n  get utilityNetworkUrl() {\n    if (this.sourceJSON) for (const e of this.sourceJSON.layers) if (\"Utility Network Layer\" === e.type) return `${this.url}/${e.id}`;\n    return null;\n  }\n  get versionManagementServiceUrl() {\n    return this.sourceJSON?.hasBranchVersionedData && !D(this.url) ? this.url.replace(/\\/FeatureServer/i, \"/VersionManagementServer\") : null;\n  }\n  readLayerInfos(e, t) {\n    return (t.layers || []).map(e => {\n      const {\n        type: t,\n        geometryType: s\n      } = e;\n      return {\n        ...Q(this.url, e),\n        type: t || \"Feature Layer\",\n        geometryType: s\n      };\n    });\n  }\n  readTableInfos(e, t) {\n    return (t.tables || []).map(e => Q(this.url, e));\n  }\n  readCapabilities(e, t) {\n    return W(t);\n  }\n  get effectiveCapabilities() {\n    const e = this.capabilities;\n    if (!e) return null;\n    const t = l(e),\n      {\n        operations: s\n      } = t;\n    return this.userHasUpdateItemPrivileges ? (s.supportsAdd = s.supportsDelete = s.supportsEditing = s.supportsQuery = s.supportsUpdate = !0, t) : (this.userHasFullEditingPrivileges && s.supportsEditing && (s.supportsAdd = s.supportsDelete = s.supportsUpdate = !0), t);\n  }\n  load(e) {\n    return this.addResolvingPromise(this._fetchService(this.url, e).then(() => this._setUserPrivileges(e))), Promise.resolve(this);\n  }\n  async fetchAllLayersAndTables(e) {\n    return await this.load(e), this._fetchLayersAndTablesPromise ||= this._fetchLayersAndTables(this.url), p(e), this._fetchLayersAndTablesPromise;\n  }\n  async applyEdits(e, t) {\n    let s = null;\n    try {\n      const {\n          results: r,\n          edits: i,\n          editedFeatures: a\n        } = await this._internalApplyEdits(e, t),\n        o = e => e.filter(e => !e.error).map(l);\n      let n = 0;\n      return r.map(e => {\n        s = R(this.url, e.id, t?.gdbVersion, !0);\n        const r = {\n          edits: i[n],\n          addedFeatures: o(e.addFeatureResults),\n          updatedFeatures: o(e.updateFeatureResults),\n          deletedFeatures: o(e.deleteFeatureResults),\n          addedAttachments: o(e.addAttachmentResults),\n          updatedAttachments: o(e.updateAttachmentResults),\n          deletedAttachments: o(e.deleteAttachmentResults),\n          exceededTransferLimit: !1,\n          historicMoment: e.editMoment ? new Date(e.editMoment) : null\n        };\n        n += 1, a.length > 0 && (r.editedFeatures = a), s.resolve(r), s = null;\n      }), r;\n    } catch (r) {\n      throw s && s.reject(r), r;\n    }\n  }\n  async querySharedTemplates(e) {\n    const t = {\n      ...e?.query\n    };\n    null == t.layers && null == t.templateIds && (t.layers = this.layerInfos.map(e => e.id));\n    return (await N({\n      serviceUrl: this.url,\n      query: t,\n      requestOptions: e?.requestOptions\n    })).map(e => {\n      const t = h.fromJSON(e);\n      return t.featureService = this, t;\n    });\n  }\n  async _setUserPrivileges(e) {\n    if (t.userPrivilegesApplied) try {\n      const {\n        features: {\n          fullEdit: t\n        },\n        content: {\n          updateItem: s\n        }\n      } = await this._fetchUserPrivileges(this.sourceJSON.serviceItemId, e);\n      this._set(\"userHasFullEditingPrivileges\", t), this._set(\"userHasUpdateItemPrivileges\", s);\n    } catch (s) {\n      d(s);\n    }\n  }\n  async _fetchUserPrivileges(e, t) {\n    const r = !0,\n      i = !1,\n      a = !1;\n    if (!e) return {\n      features: {\n        edit: r,\n        fullEdit: i\n      },\n      content: {\n        updateItem: a\n      }\n    };\n    let o, n, l;\n    try {\n      o = await T(this.url, t);\n    } catch (u) {\n      d(u);\n    }\n    try {\n      const e = null != t ? t.signal : null;\n      n = await s?.getCredential(`${o}/sharing`, {\n        prompt: !1,\n        signal: e\n      });\n    } catch (u) {\n      d(u);\n    }\n    if (!n) return {\n      features: {\n        edit: r,\n        fullEdit: i\n      },\n      content: {\n        updateItem: a\n      }\n    };\n    try {\n      if (l = new C({\n        id: e,\n        portal: {\n          url: o\n        }\n      }), await l.load(t), l.portal.user) return O(l);\n    } catch (u) {\n      d(u);\n    }\n    return {\n      features: {\n        edit: r,\n        fullEdit: i\n      },\n      content: {\n        updateItem: a\n      }\n    };\n  }\n  async _internalApplyEdits(e, t) {\n    await A(this.url);\n    const s = t?.globalIdUsed ?? !1,\n      a = f.fromJSON(this.sourceJSON.spatialReference),\n      {\n        edits: o,\n        options: n\n      } = await this._processApplyEditsParams(e, t),\n      l = await Promise.all(o.map(async e => {\n        const t = e.addFeatures?.map(e => g({\n            spatialReference: a\n          }, e, null)) ?? [],\n          r = (await Promise.all(t)).filter(i),\n          o = r.length > 0 ? r : null,\n          n = e.updateFeatures?.map(e => g({\n            spatialReference: a\n          }, e, null)) ?? [],\n          l = (await Promise.all(n)).filter(i),\n          u = l.length > 0 ? l : null,\n          p = v(e.identifierFields, e.deleteFeatures, s),\n          d = p.length > 0 ? p : null;\n        M(o, u, a);\n        const c = await b(e.identifierFields, e);\n        let m = null;\n        if (c) {\n          m = {\n            adds: c.adds.length > 0 ? c.adds : void 0,\n            updates: c.updates.length > 0 ? c.updates : void 0,\n            deletes: c.deletes.length > 0 ? c.deletes : void 0\n          };\n        }\n        return {\n          id: e.id,\n          adds: o,\n          updates: u,\n          deletes: d,\n          attachments: m\n        };\n      })),\n      u = {\n        gdbVersion: n?.gdbVersion,\n        rollbackOnFailure: !0,\n        useGlobalIds: s,\n        returnEditMoment: !0,\n        honorSequenceOfEdits: n?.honorSequenceOfEdits,\n        usePreviousEditMoment: n?.usePreviousEditMoment,\n        returnServiceEditsInSourceSR: !1,\n        returnServiceEditsOption: \"originalAndCurrentFeatures\",\n        async: !1\n      };\n    await _(this.url, t?.gdbVersion, !0);\n    const p = x(this.url, t?.gdbVersion || null);\n    u.edits = JSON.stringify(l);\n    const d = P(this.url),\n      c = V(d.query, {\n        query: k({\n          ...u,\n          f: \"json\"\n        }),\n        method: \"post\"\n      });\n    let m;\n    p && (c.authMode = \"immediate\", c.query.sessionId = J);\n    try {\n      m = await r(this.url + \"/applyEdits\", c);\n    } catch (y) {\n      if (!S(y)) throw y;\n      c.authMode = \"immediate\", m = await r(this.url + \"/applyEdits\", c);\n    }\n    return {\n      ...K(m),\n      edits: o\n    };\n  }\n  async _processApplyEditsParams(e, t) {\n    const s = {\n      ...t\n    };\n    return {\n      edits: await Promise.all(e.map(async e => {\n        const s = this.effectiveCapabilities,\n          r = e && (e.addFeatures || e.updateFeatures || e.deleteFeatures),\n          i = e && (e.addAttachments || e.updateAttachments || e.deleteAttachments);\n        if (w(e, s, t, !!r, !!i, \"feature-service\"), !s.data.isDataVersioned && t?.gdbVersion) throw new a(\"feature-service:invalid-parameter\", \"'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isDataVersioned'\");\n        const o = I(e, s, \"feature-service\");\n        return {\n          ...(await F(o)),\n          id: e.id,\n          identifierFields: e.identifierFields\n        };\n      })),\n      options: s\n    };\n  }\n  async _fetchService(e, t) {\n    if (this.sourceJSON) return void this.read(this.sourceJSON, {\n      url: P(e)\n    });\n    const s = await r(e, {\n      responseType: \"json\",\n      query: {\n        f: \"json\"\n      },\n      ...t\n    });\n    this.read(s.data, {\n      url: P(e)\n    });\n  }\n  async _fetchLayersAndTables(e) {\n    const t = `${e}/layers`,\n      s = await r(t, {\n        responseType: \"json\",\n        query: {\n          f: \"json\"\n        }\n      });\n    return {\n      layers: s.data.layers.map(e => {\n        const {\n            type: t,\n            geometryType: s\n          } = e,\n          r = Q(this.url, e),\n          i = U(e, r.url);\n        return {\n          ...r,\n          type: t || \"Feature Layer\",\n          geometryType: s,\n          capabilities: i\n        };\n      }),\n      tables: s.data.tables.map(e => {\n        const t = Q(this.url, e),\n          s = U(e, t.url);\n        return {\n          ...t,\n          capabilities: s\n        };\n      })\n    };\n  }\n};\nfunction K(e) {\n  const t = e.data,\n    s = [];\n  return {\n    results: t.map(e => {\n      const t = {\n          addResults: e.addResults ?? [],\n          updateResults: e.updateResults ?? [],\n          deleteResults: e.deleteResults ?? [],\n          attachments: e.attachments,\n          editMoment: e.editMoment\n        },\n        r = E(t),\n        i = e.editedFeatures,\n        a = i?.spatialReference ? new f({\n          wkid: i?.spatialReference.wkid,\n          wkt: i?.spatialReference.wkt,\n          latestWkid: i?.spatialReference.latestWkid,\n          latestVcsWkid: i?.spatialReference.latestVcsWkid,\n          vcsWkid: i?.spatialReference.vcsWkid\n        }) : null,\n        o = i ? j(i, a) : null;\n      return o && s.push({\n        layerId: e.id,\n        editedFeatures: o\n      }), {\n        id: e.id,\n        editedFeatures: o,\n        ...r\n      };\n    }),\n    editedFeatures: s\n  };\n}\ne([c()], Z.prototype, \"url\", void 0), e([c()], Z.prototype, \"sourceJSON\", void 0), e([c()], Z.prototype, \"userHasFullEditingPrivileges\", void 0), e([c()], Z.prototype, \"userHasUpdateItemPrivileges\", void 0), e([c({\n  readOnly: !0\n})], Z.prototype, \"utilityNetworkUrl\", null), e([c({\n  readOnly: !0\n})], Z.prototype, \"versionManagementServiceUrl\", null), e([c()], Z.prototype, \"userTypeExtensions\", void 0), e([c({\n  json: {\n    read: {\n      source: [\"layers\"]\n    }\n  }\n})], Z.prototype, \"layerInfos\", void 0), e([m(\"layerInfos\", [\"layers\"])], Z.prototype, \"readLayerInfos\", null), e([c({\n  json: {\n    read: {\n      source: [\"tables\"]\n    }\n  }\n})], Z.prototype, \"tableInfos\", void 0), e([m(\"tableInfos\", [\"tables\"])], Z.prototype, \"readTableInfos\", null), e([c({\n  readOnly: !0,\n  json: {\n    read: {\n      source: [\"hasVersionedData\", \"hasSharedTemplates\", \"hasBranchVersionedData\", \"capabilities\", \"supportsQueryDataElements\", \"supportsQueryDomains\", \"supportsQueryContingentValues\", \"maxRecordCountFactor\", \"maxRecordCount\", \"advancedEditingCapabilities\", \"supportsApplyEditsWithGlobalIds\", \"syncCapabilities\", \"datesInUnknownTimezone\"]\n    }\n  }\n})], Z.prototype, \"capabilities\", void 0), e([m(\"capabilities\", [\"hasVersionedData\", \"hasSharedTemplates\", \"hasBranchVersionedData\", \"capabilities\", \"supportsQueryDataElements\", \"supportsQueryDomains\", \"supportsQueryContingentValues\", \"maxRecordCountFactor\", \"maxRecordCount\", \"advancedEditingCapabilities\", \"supportsApplyEditsWithGlobalIds\", \"syncCapabilities\", \"datesInUnknownTimezone\"])], Z.prototype, \"readCapabilities\", null), e([c({\n  readOnly: !0\n})], Z.prototype, \"effectiveCapabilities\", null), Z = e([y(\"esri.rest.featureService.FeatureService\")], Z);\nconst X = Z;\nexport { X as default };","map":{"version":3,"names":["_","e","t","id","s","r","isSome","i","a","o","n","clone","l","u","throwIfAborted","p","throwIfAbortError","d","property","c","reader","m","subclass","y","h","f","getFeatureJSON","g","getFeatureIds","v","getAttachmentEditsJSON","b","isProtectedOrPrivateVersionError","S","unpackEditResultData","E","createEditedFeatures","j","checkEditingCapabilities","w","normalizeEdits","I","normalizeGeometries","F","emitApplyEditsEvent","R","ensureCredentialIfSignedIn","A","getOwningPortalUrl","T","getFeatureLayerCapabilities","U","C","getUserPrivileges","O","isSecureProxyService","D","parseUrl","P","asValidOptions","V","encode","k","unapplyEditsZUnitScaling","M","querySharedTemplates","N","readBoolean","q","readNumber","L","isSafeToEditVersion","isVersionInEditSession","x","currentSessionId","J","Q","name","url","type","W","data","H","sync","z","operations","B","capabilities","query","$","editing","G","isDataVersioned","isDataBranchVersioned","toLowerCase","split","map","trim","includes","datesInUnknownTimezone","supportsAdd","supportsDelete","supportsEditing","supportsChangeTracking","supportsQuery","supportsQueryDataElements","supportsQueryDomains","supportsQueryContingentValues","supportsSync","supportsUpdate","maxRecordCountFactor","maxRecordCount","advancedEditingCapabilities","supportsAsyncApplyEdits","supportsGlobalId","supportsReturnServiceEditsInSourceSpatialReference","supportsSharedTemplates","supportsSplit","syncCapabilities","supportedSyncDataOptions","supportsAsync","annotations","dimensions","contingentValues","attributeRules","utilityNetworkSystem","annotationFullModel","include3DObjects","utilityNetworkMissingLayers","preserveTrueCurves","Z","JSONSupportMixin","IdentifiableMixin","constructor","sourceJSON","userHasFullEditingPrivileges","userHasUpdateItemPrivileges","userTypeExtensions","layerInfos","tableInfos","read","utilityNetworkUrl","layers","versionManagementServiceUrl","hasBranchVersionedData","replace","readLayerInfos","geometryType","readTableInfos","tables","readCapabilities","effectiveCapabilities","load","addResolvingPromise","_fetchService","then","_setUserPrivileges","Promise","resolve","fetchAllLayersAndTables","_fetchLayersAndTablesPromise","_fetchLayersAndTables","applyEdits","results","edits","editedFeatures","_internalApplyEdits","filter","error","gdbVersion","addedFeatures","addFeatureResults","updatedFeatures","updateFeatureResults","deletedFeatures","deleteFeatureResults","addedAttachments","addAttachmentResults","updatedAttachments","updateAttachmentResults","deletedAttachments","deleteAttachmentResults","exceededTransferLimit","historicMoment","editMoment","Date","length","reject","templateIds","serviceUrl","requestOptions","fromJSON","featureService","userPrivilegesApplied","features","fullEdit","content","updateItem","_fetchUserPrivileges","serviceItemId","_set","edit","signal","getCredential","prompt","portal","user","globalIdUsed","spatialReference","options","_processApplyEditsParams","all","addFeatures","updateFeatures","identifierFields","deleteFeatures","adds","updates","deletes","attachments","rollbackOnFailure","useGlobalIds","returnEditMoment","honorSequenceOfEdits","usePreviousEditMoment","returnServiceEditsInSourceSR","returnServiceEditsOption","async","JSON","stringify","method","authMode","sessionId","K","addAttachments","updateAttachments","deleteAttachments","responseType","addResults","updateResults","deleteResults","wkid","wkt","latestWkid","latestVcsWkid","vcsWkid","push","layerId","prototype","readOnly","json","source","X","default"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/rest/featureService/FeatureService.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../config.js\";import{id as s}from\"../../kernel.js\";import r from\"../../request.js\";import{isSome as i}from\"../../core/arrayUtils.js\";import a from\"../../core/Error.js\";import o from\"../../core/Identifiable.js\";import n from\"../../core/JSONSupport.js\";import{clone as l}from\"../../core/lang.js\";import u from\"../../core/Loadable.js\";import{throwIfAborted as p,throwIfAbortError as d}from\"../../core/promiseUtils.js\";import{property as c}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import{reader as m}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as y}from\"../../core/accessorSupport/decorators/subclass.js\";import h from\"../../editing/sharedTemplates/SharedTemplateMetadata.js\";import f from\"../../geometry/SpatialReference.js\";import{getFeatureJSON as g,getFeatureIds as v,getAttachmentEditsJSON as b,isProtectedOrPrivateVersionError as S,unpackEditResultData as E,createEditedFeatures as j}from\"../../layers/graphics/applyEditsUtils.js\";import{checkEditingCapabilities as w,normalizeEdits as I,normalizeGeometries as F}from\"../../layers/graphics/editingSupport.js\";import{emitApplyEditsEvent as R}from\"../../layers/mixins/EditBusLayer.js\";import{ensureCredentialIfSignedIn as A}from\"../../layers/support/featureLayerUtils.js\";import{getOwningPortalUrl as T}from\"../../layers/support/layerUtils.js\";import{getFeatureLayerCapabilities as U}from\"../../layers/support/serviceCapabilitiesUtils.js\";import C from\"../../portal/PortalItem.js\";import{getUserPrivileges as O}from\"../../portal/support/portalItemUtils.js\";import{isSecureProxyService as D}from\"../../portal/support/urlUtils.js\";import{parseUrl as P,asValidOptions as V,encode as k}from\"../utils.js\";import{unapplyEditsZUnitScaling as M}from\"../query/operations/editsZScale.js\";import{querySharedTemplates as N}from\"../sharedTemplates/querySharedTemplates.js\";import{readBoolean as q,readNumber as L}from\"../support/jsonUtils.js\";import{isSafeToEditVersion as _,isVersionInEditSession as x,currentSessionId as J}from\"../../versionManagement/support/versionManagementUtils.js\";function Q(e,t){const s=t.id;return{id:s,name:t.name,url:`${e}/${s}`,type:t.type||\"Table\"}}function W(e){return{data:H(e),sync:z(e),operations:B(e.capabilities,e),query:$(e),editing:G(e)}}function H(e){return{isDataVersioned:q(e,\"hasVersionedData\",!1),isDataBranchVersioned:q(e,\"hasBranchVersionedData\",!1)}}function B(e,t){const s=e?e.toLowerCase().split(\",\").map((e=>e.trim())):[],r=s.includes(\"query\"),i=s.includes(\"editing\")&&!t.datesInUnknownTimezone;let a=i&&s.includes(\"create\"),o=i&&s.includes(\"delete\"),n=i&&s.includes(\"update\");return i&&!(a||o||n)&&(a=o=n=!0),{supportsAdd:a,supportsDelete:o,supportsEditing:i,supportsChangeTracking:s.includes(\"changetracking\"),supportsQuery:r,supportsQueryDataElements:q(t,\"supportsQueryDataElements\",!1),supportsQueryDomains:q(t,\"supportsQueryDomains\",!1),supportsQueryContingentValues:q(t,\"supportsQueryContingentValues\",!1),supportsSync:s.includes(\"sync\"),supportsUpdate:n}}function $(e){return{maxRecordCountFactor:L(e,\"maxRecordCountFactor\",void 0),maxRecordCount:L(e,\"maxRecordCount\",void 0)}}function G(e){const t=e?.advancedEditingCapabilities;return{supportsAsyncApplyEdits:q(t,\"supportsAsyncApplyEdits\",!1),supportsGlobalId:q(e,\"supportsApplyEditsWithGlobalIds\",!1),supportsReturnServiceEditsInSourceSpatialReference:q(t,\"supportsReturnServiceEditsInSourceSR\",!1),supportsSharedTemplates:q(e,\"hasSharedTemplates\",!1),supportsSplit:q(t,\"supportsSplit\",!1)}}function z(e){const t=e?.syncCapabilities,s=t?.supportedSyncDataOptions;return{supportsAsync:q(t,\"supportsAsync\",!1),supportedSyncDataOptions:{annotations:!(1&~s),dimensions:!(2&~s),contingentValues:!(4&~s),attributeRules:!(8&~s),utilityNetworkSystem:!(16&~s),annotationFullModel:!(32&~s),include3DObjects:!(64&~s),utilityNetworkMissingLayers:!(128&~s),preserveTrueCurves:!(256&~s)}}}let Z=class extends(n.JSONSupportMixin(o.IdentifiableMixin(u))){constructor(e){super(e),this.url=null,this.sourceJSON=null,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1,this.userTypeExtensions=[],this.layerInfos=null,this.tableInfos=null,this.capabilities=null}read(e,t){this.sourceJSON=e,super.read(e,t)}get utilityNetworkUrl(){if(this.sourceJSON)for(const e of this.sourceJSON.layers)if(\"Utility Network Layer\"===e.type)return`${this.url}/${e.id}`;return null}get versionManagementServiceUrl(){return this.sourceJSON?.hasBranchVersionedData&&!D(this.url)?this.url.replace(/\\/FeatureServer/i,\"/VersionManagementServer\"):null}readLayerInfos(e,t){return(t.layers||[]).map((e=>{const{type:t,geometryType:s}=e;return{...Q(this.url,e),type:t||\"Feature Layer\",geometryType:s}}))}readTableInfos(e,t){return(t.tables||[]).map((e=>Q(this.url,e)))}readCapabilities(e,t){return W(t)}get effectiveCapabilities(){const e=this.capabilities;if(!e)return null;const t=l(e),{operations:s}=t;return this.userHasUpdateItemPrivileges?(s.supportsAdd=s.supportsDelete=s.supportsEditing=s.supportsQuery=s.supportsUpdate=!0,t):(this.userHasFullEditingPrivileges&&s.supportsEditing&&(s.supportsAdd=s.supportsDelete=s.supportsUpdate=!0),t)}load(e){return this.addResolvingPromise(this._fetchService(this.url,e).then((()=>this._setUserPrivileges(e)))),Promise.resolve(this)}async fetchAllLayersAndTables(e){return await this.load(e),this._fetchLayersAndTablesPromise||=this._fetchLayersAndTables(this.url),p(e),this._fetchLayersAndTablesPromise}async applyEdits(e,t){let s=null;try{const{results:r,edits:i,editedFeatures:a}=await this._internalApplyEdits(e,t),o=e=>e.filter((e=>!e.error)).map(l);let n=0;return r.map((e=>{s=R(this.url,e.id,t?.gdbVersion,!0);const r={edits:i[n],addedFeatures:o(e.addFeatureResults),updatedFeatures:o(e.updateFeatureResults),deletedFeatures:o(e.deleteFeatureResults),addedAttachments:o(e.addAttachmentResults),updatedAttachments:o(e.updateAttachmentResults),deletedAttachments:o(e.deleteAttachmentResults),exceededTransferLimit:!1,historicMoment:e.editMoment?new Date(e.editMoment):null};n+=1,a.length>0&&(r.editedFeatures=a),s.resolve(r),s=null})),r}catch(r){throw s&&s.reject(r),r}}async querySharedTemplates(e){const t={...e?.query};null==t.layers&&null==t.templateIds&&(t.layers=this.layerInfos.map((e=>e.id)));return(await N({serviceUrl:this.url,query:t,requestOptions:e?.requestOptions})).map((e=>{const t=h.fromJSON(e);return t.featureService=this,t}))}async _setUserPrivileges(e){if(t.userPrivilegesApplied)try{const{features:{fullEdit:t},content:{updateItem:s}}=await this._fetchUserPrivileges(this.sourceJSON.serviceItemId,e);this._set(\"userHasFullEditingPrivileges\",t),this._set(\"userHasUpdateItemPrivileges\",s)}catch(s){d(s)}}async _fetchUserPrivileges(e,t){const r=!0,i=!1,a=!1;if(!e)return{features:{edit:r,fullEdit:i},content:{updateItem:a}};let o,n,l;try{o=await T(this.url,t)}catch(u){d(u)}try{const e=null!=t?t.signal:null;n=await(s?.getCredential(`${o}/sharing`,{prompt:!1,signal:e}))}catch(u){d(u)}if(!n)return{features:{edit:r,fullEdit:i},content:{updateItem:a}};try{if(l=new C({id:e,portal:{url:o}}),await l.load(t),l.portal.user)return O(l)}catch(u){d(u)}return{features:{edit:r,fullEdit:i},content:{updateItem:a}}}async _internalApplyEdits(e,t){await A(this.url);const s=t?.globalIdUsed??!1,a=f.fromJSON(this.sourceJSON.spatialReference),{edits:o,options:n}=await this._processApplyEditsParams(e,t),l=await Promise.all(o.map((async e=>{const t=e.addFeatures?.map((e=>g({spatialReference:a},e,null)))??[],r=(await Promise.all(t)).filter(i),o=r.length>0?r:null,n=e.updateFeatures?.map((e=>g({spatialReference:a},e,null)))??[],l=(await Promise.all(n)).filter(i),u=l.length>0?l:null,p=v(e.identifierFields,e.deleteFeatures,s),d=p.length>0?p:null;M(o,u,a);const c=await b(e.identifierFields,e);let m=null;if(c){m={adds:c.adds.length>0?c.adds:void 0,updates:c.updates.length>0?c.updates:void 0,deletes:c.deletes.length>0?c.deletes:void 0}}return{id:e.id,adds:o,updates:u,deletes:d,attachments:m}}))),u={gdbVersion:n?.gdbVersion,rollbackOnFailure:!0,useGlobalIds:s,returnEditMoment:!0,honorSequenceOfEdits:n?.honorSequenceOfEdits,usePreviousEditMoment:n?.usePreviousEditMoment,returnServiceEditsInSourceSR:!1,returnServiceEditsOption:\"originalAndCurrentFeatures\",async:!1};await _(this.url,t?.gdbVersion,!0);const p=x(this.url,t?.gdbVersion||null);u.edits=JSON.stringify(l);const d=P(this.url),c=V(d.query,{query:k({...u,f:\"json\"}),method:\"post\"});let m;p&&(c.authMode=\"immediate\",c.query.sessionId=J);try{m=await r(this.url+\"/applyEdits\",c)}catch(y){if(!S(y))throw y;c.authMode=\"immediate\",m=await r(this.url+\"/applyEdits\",c)}return{...K(m),edits:o}}async _processApplyEditsParams(e,t){const s={...t};return{edits:await Promise.all(e.map((async e=>{const s=this.effectiveCapabilities,r=e&&(e.addFeatures||e.updateFeatures||e.deleteFeatures),i=e&&(e.addAttachments||e.updateAttachments||e.deleteAttachments);if(w(e,s,t,!!r,!!i,\"feature-service\"),!s.data.isDataVersioned&&t?.gdbVersion)throw new a(\"feature-service:invalid-parameter\",\"'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isDataVersioned'\");const o=I(e,s,\"feature-service\");return{...await F(o),id:e.id,identifierFields:e.identifierFields}}))),options:s}}async _fetchService(e,t){if(this.sourceJSON)return void this.read(this.sourceJSON,{url:P(e)});const s=await r(e,{responseType:\"json\",query:{f:\"json\"},...t});this.read(s.data,{url:P(e)})}async _fetchLayersAndTables(e){const t=`${e}/layers`,s=await r(t,{responseType:\"json\",query:{f:\"json\"}});return{layers:s.data.layers.map((e=>{const{type:t,geometryType:s}=e,r=Q(this.url,e),i=U(e,r.url);return{...r,type:t||\"Feature Layer\",geometryType:s,capabilities:i}})),tables:s.data.tables.map((e=>{const t=Q(this.url,e),s=U(e,t.url);return{...t,capabilities:s}}))}}};function K(e){const t=e.data,s=[];return{results:t.map((e=>{const t={addResults:e.addResults??[],updateResults:e.updateResults??[],deleteResults:e.deleteResults??[],attachments:e.attachments,editMoment:e.editMoment},r=E(t),i=e.editedFeatures,a=i?.spatialReference?new f({wkid:i?.spatialReference.wkid,wkt:i?.spatialReference.wkt,latestWkid:i?.spatialReference.latestWkid,latestVcsWkid:i?.spatialReference.latestVcsWkid,vcsWkid:i?.spatialReference.vcsWkid}):null,o=i?j(i,a):null;return o&&s.push({layerId:e.id,editedFeatures:o}),{id:e.id,editedFeatures:o,...r}})),editedFeatures:s}}e([c()],Z.prototype,\"url\",void 0),e([c()],Z.prototype,\"sourceJSON\",void 0),e([c()],Z.prototype,\"userHasFullEditingPrivileges\",void 0),e([c()],Z.prototype,\"userHasUpdateItemPrivileges\",void 0),e([c({readOnly:!0})],Z.prototype,\"utilityNetworkUrl\",null),e([c({readOnly:!0})],Z.prototype,\"versionManagementServiceUrl\",null),e([c()],Z.prototype,\"userTypeExtensions\",void 0),e([c({json:{read:{source:[\"layers\"]}}})],Z.prototype,\"layerInfos\",void 0),e([m(\"layerInfos\",[\"layers\"])],Z.prototype,\"readLayerInfos\",null),e([c({json:{read:{source:[\"tables\"]}}})],Z.prototype,\"tableInfos\",void 0),e([m(\"tableInfos\",[\"tables\"])],Z.prototype,\"readTableInfos\",null),e([c({readOnly:!0,json:{read:{source:[\"hasVersionedData\",\"hasSharedTemplates\",\"hasBranchVersionedData\",\"capabilities\",\"supportsQueryDataElements\",\"supportsQueryDomains\",\"supportsQueryContingentValues\",\"maxRecordCountFactor\",\"maxRecordCount\",\"advancedEditingCapabilities\",\"supportsApplyEditsWithGlobalIds\",\"syncCapabilities\",\"datesInUnknownTimezone\"]}}})],Z.prototype,\"capabilities\",void 0),e([m(\"capabilities\",[\"hasVersionedData\",\"hasSharedTemplates\",\"hasBranchVersionedData\",\"capabilities\",\"supportsQueryDataElements\",\"supportsQueryDomains\",\"supportsQueryContingentValues\",\"maxRecordCountFactor\",\"maxRecordCount\",\"advancedEditingCapabilities\",\"supportsApplyEditsWithGlobalIds\",\"syncCapabilities\",\"datesInUnknownTimezone\"])],Z.prototype,\"readCapabilities\",null),e([c({readOnly:!0})],Z.prototype,\"effectiveCapabilities\",null),Z=e([y(\"esri.rest.featureService.FeatureService\")],Z);const X=Z;export{X as default};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}