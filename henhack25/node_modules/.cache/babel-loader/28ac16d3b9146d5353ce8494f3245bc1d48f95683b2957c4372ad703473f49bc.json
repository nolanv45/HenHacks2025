{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../config.js\";\nimport r from \"../../../request.js\";\nimport { isSome as s, remove as a } from \"../../../core/arrayUtils.js\";\nimport i from \"../../../core/Error.js\";\nimport has from \"../../../core/has.js\";\nimport { JSONMap as n } from \"../../../core/jsonMap.js\";\nimport o from \"../../../core/Loadable.js\";\nimport u from \"../../../core/Logger.js\";\nimport { setDeepValue as l } from \"../../../core/object.js\";\nimport { debounce as c, after as d, throwIfAbortError as p } from \"../../../core/promiseUtils.js\";\nimport { watch as y } from \"../../../core/reactiveUtils.js\";\nimport { join as h } from \"../../../core/urlUtils.js\";\nimport { generateBracedUUID as m } from \"../../../core/uuid.js\";\nimport { property as f } from \"../../../core/accessorSupport/decorators/property.js\";\nimport { subclass as g } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport w from \"../../../geometry/Extent.js\";\nimport q from \"../../../geometry/SpatialReference.js\";\nimport S from \"../../../geometry/support/MeshGeoreferencedVertexSpace.js\";\nimport { isRelativeVertexSpace as E } from \"../../../geometry/support/meshVertexSpaceUtils.js\";\nimport { isOriginalExternal as O } from \"../../../geometry/support/meshUtils/External.js\";\nimport { createFeatureEditResult as _, getFeatureJSON as b, getFeatureIds as R, getAttachmentEditsJSON as A, isProtectedOrPrivateVersionError as F, unpackEditResultData as I, createEditedFeatures as x } from \"../applyEditsUtils.js\";\nimport { createDrawingInfo as j } from \"./support/clientSideDefaults.js\";\nimport v from \"./support/QueryTask.js\";\nimport { isHostedAgolService as T } from \"../../support/arcgisLayerUrl.js\";\nimport { ensureLayerCredential as M } from \"../../support/featureLayerUtils.js\";\nimport { getAssetMapTable as N } from \"../../support/infoFor3D.js\";\nimport { executeQueryJSON as U } from \"../../../rest/query/executeQueryJSON.js\";\nimport { unapplyEditsZUnitScaling as J } from \"../../../rest/query/operations/editsZScale.js\";\nimport D from \"../../../rest/support/Query.js\";\nimport k from \"../../../time/TimeExtent.js\";\nimport { isSafeToEditVersion as C, isVersionInEditSession as L, isHistoricVersion as Q, currentSessionId as P } from \"../../../versionManagement/support/versionManagementUtils.js\";\nconst V = new n({\n    originalAndCurrentFeatures: \"original-and-current-features\",\n    none: \"none\"\n  }),\n  $ = new n({\n    Started: \"published\",\n    Publishing: \"publishing\",\n    Stopped: \"unavailable\"\n  });\nlet G = class extends o {\n  constructor(e) {\n    super(e), this.type = \"feature-layer\", this.supportedSourceTypes = new Set([\"Feature Layer\", \"Oriented Imagery Layer\", \"Table\", \"Catalog Layer\"]), this.refresh = c(async () => {\n      await this.load();\n      const e = this.sourceJSON.editingInfo?.lastEditDate;\n      if (null == e) return {\n        dataChanged: !0,\n        updates: {}\n      };\n      try {\n        await this._fetchService(null);\n      } catch {\n        return {\n          dataChanged: !0,\n          updates: {}\n        };\n      }\n      const t = e !== this.sourceJSON.editingInfo?.lastEditDate;\n      return {\n        dataChanged: t,\n        updates: t ? {\n          editingInfo: this.sourceJSON.editingInfo,\n          extent: this.sourceJSON.extent\n        } : null\n      };\n    }), this._ongoingAssetUploads = new Map();\n  }\n  load(e) {\n    const t = this.layer.sourceJSON,\n      r = this._fetchService(t, {\n        ...e\n      }).then(() => this.layer.setUserPrivileges(this.sourceJSON.serviceItemId, e)).then(() => this._ensureLatestMetadata(e));\n    return this.addResolvingPromise(r), Promise.resolve(this);\n  }\n  initialize() {\n    this.addHandles([y(() => {\n      const e = this.layer;\n      return e && \"lastEditsEventDate\" in e ? e.lastEditsEventDate : null;\n    }, e => this._handleLastEditsEventChange(e))]);\n  }\n  destroy() {\n    this._removeEditInterceptor();\n  }\n  get queryTask() {\n    const {\n        capabilities: e,\n        parsedUrl: t,\n        gdbVersion: r,\n        spatialReference: s,\n        fieldsIndex: a\n      } = this.layer,\n      i = \"infoFor3D\" in this.layer ? this.layer.infoFor3D : null,\n      n = \"dynamicDataSource\" in this.layer ? this.layer.dynamicDataSource : null,\n      o = has(\"featurelayer-pbf\") && e?.query.supportsFormatPBF && null == i,\n      u = e?.operations?.supportsQueryAttachments ?? !1;\n    return new v({\n      url: t.path,\n      pbfSupported: o,\n      fieldsIndex: a,\n      infoFor3D: i,\n      dynamicDataSource: n,\n      gdbVersion: r,\n      sourceSpatialReference: s,\n      queryAttachmentsSupported: u\n    });\n  }\n  async addAttachment(e, t) {\n    await this.load();\n    const {\n      layer: s\n    } = this;\n    await M(s, \"editing\");\n    const a = e.attributes[s.objectIdField],\n      i = s.parsedUrl.path + \"/\" + a + \"/addAttachment\",\n      n = this._getLayerRequestOptions(),\n      o = this._getFormDataForAttachment(t, n.query);\n    try {\n      const e = await r(i, {\n        body: o\n      });\n      return _(e.data.addAttachmentResult);\n    } catch (u) {\n      throw this._createAttachmentErrorResult(a, u);\n    }\n  }\n  async updateAttachment(e, t, s) {\n    await this.load();\n    const {\n      layer: a\n    } = this;\n    await M(a, \"editing\");\n    const i = e.attributes[a.objectIdField],\n      n = a.parsedUrl.path + \"/\" + i + \"/updateAttachment\",\n      o = this._getLayerRequestOptions({\n        query: {\n          attachmentId: t\n        }\n      }),\n      u = this._getFormDataForAttachment(s, o.query);\n    try {\n      const e = await r(n, {\n        body: u\n      });\n      return _(e.data.updateAttachmentResult);\n    } catch (l) {\n      throw this._createAttachmentErrorResult(i, l);\n    }\n  }\n  async applyEdits(e, t) {\n    await this.load();\n    const {\n      layer: a\n    } = this;\n    await M(a, \"editing\");\n    const n = \"infoFor3D\" in a ? a.infoFor3D : null,\n      o = null != n,\n      u = o || (t?.globalIdUsed ?? !1),\n      l = o ? await this._uploadMeshesAndGetAssetMapEditsJSON(e) : null,\n      c = e.addFeatures?.map(e => b(this.layer, e, n)) ?? [],\n      d = (await Promise.all(c)).filter(s),\n      p = e.updateFeatures?.map(e => b(this.layer, e, n)) ?? [],\n      y = (await Promise.all(p)).filter(s),\n      h = R(this.layer, e.deleteFeatures, u);\n    J(d, y, a.spatialReference);\n    const m = await A(this.layer, e),\n      f = a.capabilities.editing.supportsAsyncApplyEdits && o,\n      g = t?.gdbVersion || a.gdbVersion,\n      w = {\n        gdbVersion: g,\n        rollbackOnFailure: t?.rollbackOnFailureEnabled,\n        useGlobalIds: u,\n        returnEditMoment: t?.returnEditMoment,\n        usePreviousEditMoment: t?.usePreviousEditMoment,\n        async: f\n      };\n    await C(this.layer.url, g, !0);\n    const q = L(this.layer.url, g || null);\n    if (await Q(a.url, g, a.historicMoment)) throw new i(\"feature-layer-source:historic-version\", \"Editing a historic version is not allowed\");\n    t?.returnServiceEditsOption ? (w.edits = JSON.stringify([{\n      id: a.layerId,\n      adds: d.length ? d : null,\n      updates: y.length ? y : null,\n      deletes: h.length ? h : null,\n      attachments: m,\n      assetMaps: l\n    }]), w.returnServiceEditsOption = V.toJSON(t?.returnServiceEditsOption), w.returnServiceEditsInSourceSR = t?.returnServiceEditsInSourceSR) : (w.adds = d.length ? JSON.stringify(d) : null, w.updates = y.length ? JSON.stringify(y) : null, w.deletes = h.length ? u ? JSON.stringify(h) : h.join(\",\") : null, w.attachments = m && JSON.stringify(m), w.assetMaps = null != l ? JSON.stringify(l) : void 0);\n    const S = this._getLayerRequestOptions({\n      method: \"post\",\n      query: w\n    });\n    q && (S.authMode = \"immediate\", S.query.returnEditMoment = !0, S.query.sessionId = P);\n    const E = t?.returnServiceEditsOption ? a.url : a.parsedUrl.path;\n    let O;\n    try {\n      O = f ? await this._asyncApplyEdits(E + \"/applyEdits\", S) : await r(E + \"/applyEdits\", S);\n    } catch (_) {\n      if (!F(_)) throw _;\n      S.authMode = \"immediate\", O = f ? await this._asyncApplyEdits(E + \"/applyEdits\", S) : await r(E + \"/applyEdits\", S);\n    }\n    return this._createEditsResult(O);\n  }\n  async deleteAttachments(e, t) {\n    await this.load();\n    const {\n      layer: s\n    } = this;\n    await M(s, \"editing\");\n    const a = e.attributes[s.objectIdField],\n      i = s.parsedUrl.path + \"/\" + a + \"/deleteAttachments\";\n    try {\n      return (await r(i, this._getLayerRequestOptions({\n        query: {\n          attachmentIds: t.join(\",\")\n        },\n        method: \"post\"\n      }))).data.deleteAttachmentResults.map(_);\n    } catch (n) {\n      throw this._createAttachmentErrorResult(a, n);\n    }\n  }\n  fetchRecomputedExtents(e = {}) {\n    const t = e.signal;\n    return this.load({\n      signal: t\n    }).then(async () => {\n      const t = this._getLayerRequestOptions({\n          ...e,\n          query: {\n            returnUpdates: !0\n          }\n        }),\n        {\n          layerId: s,\n          url: a\n        } = this.layer,\n        {\n          data: i\n        } = await r(`${a}/${s}`, t),\n        {\n          id: n,\n          extent: o,\n          fullExtent: u,\n          timeExtent: l\n        } = i,\n        c = o || u;\n      return {\n        id: n,\n        fullExtent: c && w.fromJSON(c),\n        timeExtent: l && k.fromJSON({\n          start: l[0],\n          end: l[1]\n        })\n      };\n    });\n  }\n  async queryAttachments(e, t = {}) {\n    await this.load();\n    const r = this._getLayerRequestOptions(t);\n    return this.queryTask.executeAttachmentQuery(e, r);\n  }\n  async queryFeatures(e, t) {\n    await this.load();\n    const r = await this.queryTask.execute(e, {\n      ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n    if (e.outStatistics?.length && r.features.length) {\n      const t = new Map();\n      if (r.features.forEach(r => {\n        const s = r.attributes;\n        e.outStatistics?.forEach(({\n          outStatisticFieldName: e\n        }) => {\n          if (e) {\n            const r = e.toLowerCase();\n            r && r in s && e !== r && (s[e] = s[r], delete s[r], t.set(r, e));\n          }\n        });\n      }), null != r.fields) for (const e of r.fields) {\n        const r = t.get(e.name.toLowerCase());\n        null != r && (e.name = r);\n      }\n    }\n    return r;\n  }\n  async queryFeaturesJSON(e, t) {\n    return await this.load(), this.queryTask.executeJSON(e, {\n      ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n  }\n  async queryObjectIds(e, t) {\n    return await this.load(), this.queryTask.executeForIds(e, {\n      ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n  }\n  async queryFeatureCount(e, t) {\n    return await this.load(), this.queryTask.executeForCount(e, {\n      ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n  }\n  async queryExtent(e, t) {\n    return await this.load(), this.queryTask.executeForExtent(e, {\n      ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n  }\n  async queryRelatedFeatures(e, t) {\n    return await this.load(), this.queryTask.executeRelationshipQuery(e, {\n      ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n  }\n  async queryRelatedFeaturesCount(e, t) {\n    return await this.load(), this.queryTask.executeRelationshipQueryForCount(e, {\n      ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n  }\n  async queryTopFeatures(e, t) {\n    return await this.load(), this.queryTask.executeTopFeaturesQuery(e, {\n      ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n  }\n  async queryAttributeBins(e, t) {\n    return await this.load(), this.queryTask.executeAttributeBinsQuery(e, {\n      ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n  }\n  async queryTopObjectIds(e, t) {\n    return await this.load(), this.queryTask.executeForTopIds(e, {\n      ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n  }\n  async queryTopExtents(e, t) {\n    return await this.load(), this.queryTask.executeForTopExtents(e, {\n      ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n  }\n  async queryTopCount(e, t) {\n    return await this.load(), this.queryTask.executeForTopCount(e, {\n      ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n  }\n  async fetchPublishingStatus() {\n    if (!T(this.layer.url)) return \"unavailable\";\n    const e = h(this.layer.url, \"status\"),\n      t = await r(e, {\n        query: {\n          f: \"json\"\n        }\n      });\n    return $.fromJSON(t.data.status);\n  }\n  async uploadAssets(e, t) {\n    const {\n      uploadAssets: r\n    } = await import(\"./support/uploadAssets.js\");\n    return r(e, {\n      layer: this.layer,\n      ongoingUploads: this._ongoingAssetUploads\n    }, t);\n  }\n  _handleLastEditsEventChange(e) {\n    const t = this.layer;\n    if (null == e || !(\"capabilities\" in t) || !(\"effectiveCapabilities\" in t)) return;\n    if (!(!t.capabilities?.operations?.supportsEditing && t.effectiveCapabilities?.operations?.supportsEditing)) return;\n    const r = t.url;\n    if (null == r) return;\n    \"layerId\" in t && h(r, t.layerId.toString());\n    this._getOrCreateEditInterceptor(r).before = t => {\n      const r = t.requestOptions.method ?? \"auto\";\n      if (\"auto\" === r || \"head\" === r) {\n        const r = t.requestOptions.query ?? {};\n        r._ts = e.getTime(), t.requestOptions.query = r;\n      }\n    };\n  }\n  _getOrCreateEditInterceptor(e) {\n    return null == this._editInterceptor && (this._editInterceptor = {\n      urls: e\n    }, t.request.internalInterceptors.push(this._editInterceptor)), this._editInterceptor;\n  }\n  _removeEditInterceptor() {\n    null != this._editInterceptor && (a(t.request.internalInterceptors, this._editInterceptor), this._editInterceptor = null);\n  }\n  async _asyncApplyEdits(e, t) {\n    const s = (await r(e, t)).data.statusUrl;\n    for (;;) {\n      const e = (await r(s, {\n        query: {\n          f: \"json\"\n        },\n        responseType: \"json\"\n      })).data;\n      switch (e.status) {\n        case \"Completed\":\n          return r(e.resultUrl, {\n            query: {\n              f: \"json\"\n            },\n            responseType: \"json\"\n          });\n        case \"CompletedWithErrors\":\n          throw new i(\"async-applyEdits-failed\", \"asynchronous applyEdits call failed.\");\n        case \"Failed ImportChanges\":\n        case \"InProgress\":\n        case \"Pending\":\n        case \"ExportAttachments\":\n        case \"ExportChanges\":\n        case \"ExportingData\":\n        case \"ExportingSnapshot\":\n        case \"ImportAttachments\":\n        case \"ProvisioningReplica\":\n        case \"UnRegisteringReplica\":\n          break;\n        default:\n          throw new i(\"async-applyEdits-failed\", \"asynchronous applyEdits call failed (undefined response status)\");\n      }\n      await d(H);\n    }\n  }\n  _createRequestQueryOptions(e) {\n    const t = {\n      ...this.layer.customParameters,\n      token: this.layer.apiKey,\n      ...e?.query\n    };\n    return this.layer.datesInUnknownTimezone && (t.timeReferenceUnknownClient = !0), t;\n  }\n  async _fetchService(e, t) {\n    if (!e) {\n      const s = {};\n      has(\"featurelayer-advanced-symbols\") && (s.returnAdvancedSymbols = !0), t?.cacheBust && (s._ts = Date.now());\n      const {\n        data: a\n      } = await r(this.layer.parsedUrl.path, this._getLayerRequestOptions({\n        query: s,\n        signal: t?.signal\n      }));\n      e = a;\n    }\n    this.sourceJSON = await this._patchServiceJSON(e, t?.signal);\n    const s = e.type;\n    if (!this.supportedSourceTypes.has(s)) throw new i(\"feature-layer-source:unsupported-type\", `Source type \"${s}\" is not supported`);\n  }\n  async _patchServiceJSON(e, t) {\n    if (\"Table\" !== e.type && e.geometryType && !e?.drawingInfo?.renderer && !e.defaultSymbol) {\n      const t = j(e.geometryType).renderer;\n      l(\"drawingInfo.renderer\", t, e);\n    }\n    if (\"esriGeometryMultiPatch\" === e.geometryType && e.infoFor3D && (e.geometryType = \"mesh\"), null == e.extent) try {\n      const {\n        data: s\n      } = await r(this.layer.url, this._getLayerRequestOptions({\n        signal: t\n      }));\n      s.spatialReference && (e.extent = {\n        xmin: 0,\n        ymin: 0,\n        xmax: 0,\n        ymax: 0,\n        spatialReference: s.spatialReference\n      });\n    } catch (s) {\n      p(s);\n    }\n    return e;\n  }\n  async _ensureLatestMetadata(e) {\n    if (this.layer.userHasUpdateItemPrivileges && this.sourceJSON.cacheMaxAge > 0) return this._fetchService(null, {\n      ...e,\n      cacheBust: !0\n    });\n  }\n  async _uploadMeshesAndGetAssetMapEditsJSON(e) {\n    const {\n      addAssetFeatures: t\n    } = e;\n    if (!t?.length) return null;\n    if (await this._areAllAssetsAlreadyMapped(t)) return null;\n    const r = e.addFeatures.filter(e => e.geometry);\n    if (t.length !== r.length + e.updateFeatures.length) throw new i(\"feature-layer-source:unsupported-mesh-edits\", \"Mixing attribute only edits with mesh geometry edits is not currently supported\");\n    const s = new Array(),\n      a = new Map();\n    for (const i of t) {\n      const {\n          geometry: e\n        } = i,\n        {\n          vertexSpace: t\n        } = e;\n      if (E(t)) s.push(e);else {\n        const t = e.origin,\n          {\n            convertMeshVertexSpace: r\n          } = await import(\"../../../geometry/support/meshUtils/convertMeshVertexSpace.js\"),\n          n = await r(e, new S({\n            origin: [t.x, t.y, t.z ?? 0]\n          }));\n        a.set(n, e), i.geometry = n, s.push(n);\n      }\n    }\n    await this.uploadAssets(s);\n    for (const [i, n] of a) n.addExternalSources(i.metadata.externalSources.items);\n    return {\n      adds: this._getAssetMapEditsJSON(t),\n      updates: [],\n      deletes: []\n    };\n  }\n  _getAssetMapEditsJSON(e) {\n    const t = new Array(),\n      r = this.layer.globalIdField,\n      s = this.layer.parsedUrl;\n    for (const a of e) {\n      const e = a.geometry,\n        {\n          metadata: i\n        } = e,\n        n = i.getExternalSourcesOnService(s),\n        o = a.getAttribute(r);\n      if (0 === n.length) {\n        u.getLogger(this).error(`Skipping feature ${o}. The mesh it is associated with has not been uploaded to the service and cannot be mapped to it.`);\n        continue;\n      }\n      const {\n        source: l\n      } = n.find(O) ?? n[0];\n      for (const r of l) 1 === r.parts.length ? t.push({\n        globalId: m(),\n        parentGlobalId: o,\n        assetName: r.assetName,\n        assetHash: r.parts[0].partHash,\n        flags: []\n      }) : u.getLogger(this).error(`Skipping asset ${r.assetName}. It does not have exactly one part, so we cannot map it to a feature.`);\n    }\n    return t;\n  }\n  _createEditsResult(e) {\n    const t = e.data,\n      {\n        layerId: r\n      } = this.layer,\n      s = [];\n    let a = null;\n    if (Array.isArray(t)) for (const n of t) s.push({\n      id: n.id,\n      editedFeatures: n.editedFeatures\n    }), n.id === r && (a = {\n      addResults: n.addResults ?? [],\n      updateResults: n.updateResults ?? [],\n      deleteResults: n.deleteResults ?? [],\n      attachments: n.attachments,\n      editMoment: n.editMoment\n    });else a = t;\n    const i = I(a);\n    if (s.length > 0) {\n      i.editedFeatureResults = [];\n      for (const e of s) {\n        const {\n            editedFeatures: t\n          } = e,\n          r = t?.spatialReference ? new q(t.spatialReference) : null;\n        i.editedFeatureResults.push({\n          layerId: e.id,\n          editedFeatures: x(t, r)\n        });\n      }\n    }\n    return i;\n  }\n  _createAttachmentErrorResult(e, t) {\n    const r = t.details.messages?.[0] || t.message,\n      s = t.details.httpStatus || t.details.messageCode;\n    return {\n      objectId: e,\n      globalId: null,\n      error: new i(\"feature-layer-source:attachment-failure\", r, {\n        code: s\n      })\n    };\n  }\n  _getFormDataForAttachment(e, t) {\n    const r = e instanceof FormData ? e : e && e.elements ? new FormData(e) : null;\n    if (r) for (const s in t) {\n      const e = t[s];\n      null != e && (r.set ? r.set(s, e) : r.append(s, e));\n    }\n    return r;\n  }\n  _getLayerRequestOptions(e = {}) {\n    const {\n      layer: t,\n      layer: {\n        parsedUrl: r,\n        gdbVersion: s\n      }\n    } = this;\n    return {\n      ...e,\n      query: {\n        gdbVersion: s,\n        layer: \"dynamicDataSource\" in t && t.dynamicDataSource ? JSON.stringify({\n          source: t.dynamicDataSource\n        }) : void 0,\n        ...r.query,\n        f: \"json\",\n        ...this._createRequestQueryOptions(e)\n      },\n      responseType: \"json\"\n    };\n  }\n  async _areAllAssetsAlreadyMapped(e) {\n    const {\n        layer: t\n      } = this,\n      {\n        globalIdField: r,\n        parsedUrl: a\n      } = t,\n      i = \"infoFor3D\" in t ? t.infoFor3D : null;\n    if (null == i || null == r) return !1;\n    const n = N(i);\n    if (null == n) return !1;\n    const o = h(a.path, `../${n.id}`),\n      u = new Array();\n    for (const s of e) {\n      if (!(s.geometry.metadata.getExternalSourcesOnService(a).length > 0)) return !1;\n      u.push(s);\n    }\n    const l = u.map(e => e.getAttribute(r)).filter(s);\n    if (0 === l.length) return !1;\n    const {\n        assetMapFieldRoles: {\n          parentGlobalId: c,\n          assetHash: d\n        }\n      } = i,\n      p = new D({\n        where: `${c} IN (${l.map(e => `'${e}'`)})`,\n        outFields: [d, c],\n        returnGeometry: !1\n      }),\n      y = await U(o, p),\n      {\n        features: m\n      } = y;\n    return 0 !== m.length && !u.some(e => {\n      const t = e.getAttribute(r);\n      if (!t) return !0;\n      const {\n          metadata: s\n        } = e.geometry,\n        i = m.filter(e => e.getAttribute(c) === t);\n      if (0 === i.length) return !0;\n      const n = i.map(e => e.getAttribute(d));\n      return s.getExternalSourcesOnService(a).flatMap(({\n        source: e\n      }) => e.flatMap(e => e.parts.map(e => e.partHash))).some(e => n.every(t => e !== t));\n    });\n  }\n};\ne([f()], G.prototype, \"type\", void 0), e([f({\n  constructOnly: !0\n})], G.prototype, \"layer\", void 0), e([f({\n  constructOnly: !0\n})], G.prototype, \"supportedSourceTypes\", void 0), e([f({\n  readOnly: !0\n})], G.prototype, \"queryTask\", null), G = e([g(\"esri.layers.graphics.sources.FeatureLayerSource\")], G);\nconst H = 1e3,\n  B = G;\nexport { B as default };","map":{"version":3,"names":["_","e","t","r","isSome","s","remove","a","i","has","JSONMap","n","o","u","setDeepValue","l","debounce","c","after","d","throwIfAbortError","p","watch","y","join","h","generateBracedUUID","m","property","f","subclass","g","w","q","S","isRelativeVertexSpace","E","isOriginalExternal","O","createFeatureEditResult","getFeatureJSON","b","getFeatureIds","R","getAttachmentEditsJSON","A","isProtectedOrPrivateVersionError","F","unpackEditResultData","I","createEditedFeatures","x","createDrawingInfo","j","v","isHostedAgolService","T","ensureLayerCredential","M","getAssetMapTable","N","executeQueryJSON","U","unapplyEditsZUnitScaling","J","D","k","isSafeToEditVersion","C","isVersionInEditSession","L","isHistoricVersion","Q","currentSessionId","P","V","originalAndCurrentFeatures","none","$","Started","Publishing","Stopped","G","constructor","type","supportedSourceTypes","Set","refresh","load","sourceJSON","editingInfo","lastEditDate","dataChanged","updates","_fetchService","extent","_ongoingAssetUploads","Map","layer","then","setUserPrivileges","serviceItemId","_ensureLatestMetadata","addResolvingPromise","Promise","resolve","initialize","addHandles","lastEditsEventDate","_handleLastEditsEventChange","destroy","_removeEditInterceptor","queryTask","capabilities","parsedUrl","gdbVersion","spatialReference","fieldsIndex","infoFor3D","dynamicDataSource","query","supportsFormatPBF","operations","supportsQueryAttachments","url","path","pbfSupported","sourceSpatialReference","queryAttachmentsSupported","addAttachment","attributes","objectIdField","_getLayerRequestOptions","_getFormDataForAttachment","body","data","addAttachmentResult","_createAttachmentErrorResult","updateAttachment","attachmentId","updateAttachmentResult","applyEdits","globalIdUsed","_uploadMeshesAndGetAssetMapEditsJSON","addFeatures","map","all","filter","updateFeatures","deleteFeatures","editing","supportsAsyncApplyEdits","rollbackOnFailure","rollbackOnFailureEnabled","useGlobalIds","returnEditMoment","usePreviousEditMoment","async","historicMoment","returnServiceEditsOption","edits","JSON","stringify","id","layerId","adds","length","deletes","attachments","assetMaps","toJSON","returnServiceEditsInSourceSR","method","authMode","sessionId","_asyncApplyEdits","_createEditsResult","deleteAttachments","attachmentIds","deleteAttachmentResults","fetchRecomputedExtents","signal","returnUpdates","fullExtent","timeExtent","fromJSON","start","end","queryAttachments","executeAttachmentQuery","queryFeatures","execute","_createRequestQueryOptions","outStatistics","features","forEach","outStatisticFieldName","toLowerCase","set","fields","get","name","queryFeaturesJSON","executeJSON","queryObjectIds","executeForIds","queryFeatureCount","executeForCount","queryExtent","executeForExtent","queryRelatedFeatures","executeRelationshipQuery","queryRelatedFeaturesCount","executeRelationshipQueryForCount","queryTopFeatures","executeTopFeaturesQuery","queryAttributeBins","executeAttributeBinsQuery","queryTopObjectIds","executeForTopIds","queryTopExtents","executeForTopExtents","queryTopCount","executeForTopCount","fetchPublishingStatus","status","uploadAssets","ongoingUploads","supportsEditing","effectiveCapabilities","toString","_getOrCreateEditInterceptor","before","requestOptions","_ts","getTime","_editInterceptor","urls","request","internalInterceptors","push","statusUrl","responseType","resultUrl","H","customParameters","token","apiKey","datesInUnknownTimezone","timeReferenceUnknownClient","returnAdvancedSymbols","cacheBust","Date","now","_patchServiceJSON","geometryType","drawingInfo","renderer","defaultSymbol","xmin","ymin","xmax","ymax","userHasUpdateItemPrivileges","cacheMaxAge","addAssetFeatures","_areAllAssetsAlreadyMapped","geometry","Array","vertexSpace","origin","convertMeshVertexSpace","z","addExternalSources","metadata","externalSources","items","_getAssetMapEditsJSON","globalIdField","getExternalSourcesOnService","getAttribute","getLogger","error","source","find","parts","globalId","parentGlobalId","assetName","assetHash","partHash","flags","isArray","editedFeatures","addResults","updateResults","deleteResults","editMoment","editedFeatureResults","details","messages","message","httpStatus","messageCode","objectId","code","FormData","elements","append","assetMapFieldRoles","where","outFields","returnGeometry","some","flatMap","every","prototype","constructOnly","readOnly","B","default"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/layers/graphics/sources/FeatureLayerSource.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../config.js\";import r from\"../../../request.js\";import{isSome as s,remove as a}from\"../../../core/arrayUtils.js\";import i from\"../../../core/Error.js\";import has from\"../../../core/has.js\";import{JSONMap as n}from\"../../../core/jsonMap.js\";import o from\"../../../core/Loadable.js\";import u from\"../../../core/Logger.js\";import{setDeepValue as l}from\"../../../core/object.js\";import{debounce as c,after as d,throwIfAbortError as p}from\"../../../core/promiseUtils.js\";import{watch as y}from\"../../../core/reactiveUtils.js\";import{join as h}from\"../../../core/urlUtils.js\";import{generateBracedUUID as m}from\"../../../core/uuid.js\";import{property as f}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as g}from\"../../../core/accessorSupport/decorators/subclass.js\";import w from\"../../../geometry/Extent.js\";import q from\"../../../geometry/SpatialReference.js\";import S from\"../../../geometry/support/MeshGeoreferencedVertexSpace.js\";import{isRelativeVertexSpace as E}from\"../../../geometry/support/meshVertexSpaceUtils.js\";import{isOriginalExternal as O}from\"../../../geometry/support/meshUtils/External.js\";import{createFeatureEditResult as _,getFeatureJSON as b,getFeatureIds as R,getAttachmentEditsJSON as A,isProtectedOrPrivateVersionError as F,unpackEditResultData as I,createEditedFeatures as x}from\"../applyEditsUtils.js\";import{createDrawingInfo as j}from\"./support/clientSideDefaults.js\";import v from\"./support/QueryTask.js\";import{isHostedAgolService as T}from\"../../support/arcgisLayerUrl.js\";import{ensureLayerCredential as M}from\"../../support/featureLayerUtils.js\";import{getAssetMapTable as N}from\"../../support/infoFor3D.js\";import{executeQueryJSON as U}from\"../../../rest/query/executeQueryJSON.js\";import{unapplyEditsZUnitScaling as J}from\"../../../rest/query/operations/editsZScale.js\";import D from\"../../../rest/support/Query.js\";import k from\"../../../time/TimeExtent.js\";import{isSafeToEditVersion as C,isVersionInEditSession as L,isHistoricVersion as Q,currentSessionId as P}from\"../../../versionManagement/support/versionManagementUtils.js\";const V=new n({originalAndCurrentFeatures:\"original-and-current-features\",none:\"none\"}),$=new n({Started:\"published\",Publishing:\"publishing\",Stopped:\"unavailable\"});let G=class extends o{constructor(e){super(e),this.type=\"feature-layer\",this.supportedSourceTypes=new Set([\"Feature Layer\",\"Oriented Imagery Layer\",\"Table\",\"Catalog Layer\"]),this.refresh=c((async()=>{await this.load();const e=this.sourceJSON.editingInfo?.lastEditDate;if(null==e)return{dataChanged:!0,updates:{}};try{await this._fetchService(null)}catch{return{dataChanged:!0,updates:{}}}const t=e!==this.sourceJSON.editingInfo?.lastEditDate;return{dataChanged:t,updates:t?{editingInfo:this.sourceJSON.editingInfo,extent:this.sourceJSON.extent}:null}})),this._ongoingAssetUploads=new Map}load(e){const t=this.layer.sourceJSON,r=this._fetchService(t,{...e}).then((()=>this.layer.setUserPrivileges(this.sourceJSON.serviceItemId,e))).then((()=>this._ensureLatestMetadata(e)));return this.addResolvingPromise(r),Promise.resolve(this)}initialize(){this.addHandles([y((()=>{const e=this.layer;return e&&\"lastEditsEventDate\"in e?e.lastEditsEventDate:null}),(e=>this._handleLastEditsEventChange(e)))])}destroy(){this._removeEditInterceptor()}get queryTask(){const{capabilities:e,parsedUrl:t,gdbVersion:r,spatialReference:s,fieldsIndex:a}=this.layer,i=\"infoFor3D\"in this.layer?this.layer.infoFor3D:null,n=\"dynamicDataSource\"in this.layer?this.layer.dynamicDataSource:null,o=has(\"featurelayer-pbf\")&&e?.query.supportsFormatPBF&&null==i,u=e?.operations?.supportsQueryAttachments??!1;return new v({url:t.path,pbfSupported:o,fieldsIndex:a,infoFor3D:i,dynamicDataSource:n,gdbVersion:r,sourceSpatialReference:s,queryAttachmentsSupported:u})}async addAttachment(e,t){await this.load();const{layer:s}=this;await M(s,\"editing\");const a=e.attributes[s.objectIdField],i=s.parsedUrl.path+\"/\"+a+\"/addAttachment\",n=this._getLayerRequestOptions(),o=this._getFormDataForAttachment(t,n.query);try{const e=await r(i,{body:o});return _(e.data.addAttachmentResult)}catch(u){throw this._createAttachmentErrorResult(a,u)}}async updateAttachment(e,t,s){await this.load();const{layer:a}=this;await M(a,\"editing\");const i=e.attributes[a.objectIdField],n=a.parsedUrl.path+\"/\"+i+\"/updateAttachment\",o=this._getLayerRequestOptions({query:{attachmentId:t}}),u=this._getFormDataForAttachment(s,o.query);try{const e=await r(n,{body:u});return _(e.data.updateAttachmentResult)}catch(l){throw this._createAttachmentErrorResult(i,l)}}async applyEdits(e,t){await this.load();const{layer:a}=this;await M(a,\"editing\");const n=\"infoFor3D\"in a?a.infoFor3D:null,o=null!=n,u=o||(t?.globalIdUsed??!1),l=o?await this._uploadMeshesAndGetAssetMapEditsJSON(e):null,c=e.addFeatures?.map((e=>b(this.layer,e,n)))??[],d=(await Promise.all(c)).filter(s),p=e.updateFeatures?.map((e=>b(this.layer,e,n)))??[],y=(await Promise.all(p)).filter(s),h=R(this.layer,e.deleteFeatures,u);J(d,y,a.spatialReference);const m=await A(this.layer,e),f=a.capabilities.editing.supportsAsyncApplyEdits&&o,g=t?.gdbVersion||a.gdbVersion,w={gdbVersion:g,rollbackOnFailure:t?.rollbackOnFailureEnabled,useGlobalIds:u,returnEditMoment:t?.returnEditMoment,usePreviousEditMoment:t?.usePreviousEditMoment,async:f};await C(this.layer.url,g,!0);const q=L(this.layer.url,g||null);if(await Q(a.url,g,a.historicMoment))throw new i(\"feature-layer-source:historic-version\",\"Editing a historic version is not allowed\");t?.returnServiceEditsOption?(w.edits=JSON.stringify([{id:a.layerId,adds:d.length?d:null,updates:y.length?y:null,deletes:h.length?h:null,attachments:m,assetMaps:l}]),w.returnServiceEditsOption=V.toJSON(t?.returnServiceEditsOption),w.returnServiceEditsInSourceSR=t?.returnServiceEditsInSourceSR):(w.adds=d.length?JSON.stringify(d):null,w.updates=y.length?JSON.stringify(y):null,w.deletes=h.length?u?JSON.stringify(h):h.join(\",\"):null,w.attachments=m&&JSON.stringify(m),w.assetMaps=null!=l?JSON.stringify(l):void 0);const S=this._getLayerRequestOptions({method:\"post\",query:w});q&&(S.authMode=\"immediate\",S.query.returnEditMoment=!0,S.query.sessionId=P);const E=t?.returnServiceEditsOption?a.url:a.parsedUrl.path;let O;try{O=f?await this._asyncApplyEdits(E+\"/applyEdits\",S):await r(E+\"/applyEdits\",S)}catch(_){if(!F(_))throw _;S.authMode=\"immediate\",O=f?await this._asyncApplyEdits(E+\"/applyEdits\",S):await r(E+\"/applyEdits\",S)}return this._createEditsResult(O)}async deleteAttachments(e,t){await this.load();const{layer:s}=this;await M(s,\"editing\");const a=e.attributes[s.objectIdField],i=s.parsedUrl.path+\"/\"+a+\"/deleteAttachments\";try{return(await r(i,this._getLayerRequestOptions({query:{attachmentIds:t.join(\",\")},method:\"post\"}))).data.deleteAttachmentResults.map(_)}catch(n){throw this._createAttachmentErrorResult(a,n)}}fetchRecomputedExtents(e={}){const t=e.signal;return this.load({signal:t}).then((async()=>{const t=this._getLayerRequestOptions({...e,query:{returnUpdates:!0}}),{layerId:s,url:a}=this.layer,{data:i}=await r(`${a}/${s}`,t),{id:n,extent:o,fullExtent:u,timeExtent:l}=i,c=o||u;return{id:n,fullExtent:c&&w.fromJSON(c),timeExtent:l&&k.fromJSON({start:l[0],end:l[1]})}}))}async queryAttachments(e,t={}){await this.load();const r=this._getLayerRequestOptions(t);return this.queryTask.executeAttachmentQuery(e,r)}async queryFeatures(e,t){await this.load();const r=await this.queryTask.execute(e,{...t,query:this._createRequestQueryOptions(t)});if(e.outStatistics?.length&&r.features.length){const t=new Map;if(r.features.forEach((r=>{const s=r.attributes;e.outStatistics?.forEach((({outStatisticFieldName:e})=>{if(e){const r=e.toLowerCase();r&&r in s&&e!==r&&(s[e]=s[r],delete s[r],t.set(r,e))}}))})),null!=r.fields)for(const e of r.fields){const r=t.get(e.name.toLowerCase());null!=r&&(e.name=r)}}return r}async queryFeaturesJSON(e,t){return await this.load(),this.queryTask.executeJSON(e,{...t,query:this._createRequestQueryOptions(t)})}async queryObjectIds(e,t){return await this.load(),this.queryTask.executeForIds(e,{...t,query:this._createRequestQueryOptions(t)})}async queryFeatureCount(e,t){return await this.load(),this.queryTask.executeForCount(e,{...t,query:this._createRequestQueryOptions(t)})}async queryExtent(e,t){return await this.load(),this.queryTask.executeForExtent(e,{...t,query:this._createRequestQueryOptions(t)})}async queryRelatedFeatures(e,t){return await this.load(),this.queryTask.executeRelationshipQuery(e,{...t,query:this._createRequestQueryOptions(t)})}async queryRelatedFeaturesCount(e,t){return await this.load(),this.queryTask.executeRelationshipQueryForCount(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopFeatures(e,t){return await this.load(),this.queryTask.executeTopFeaturesQuery(e,{...t,query:this._createRequestQueryOptions(t)})}async queryAttributeBins(e,t){return await this.load(),this.queryTask.executeAttributeBinsQuery(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopObjectIds(e,t){return await this.load(),this.queryTask.executeForTopIds(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopExtents(e,t){return await this.load(),this.queryTask.executeForTopExtents(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopCount(e,t){return await this.load(),this.queryTask.executeForTopCount(e,{...t,query:this._createRequestQueryOptions(t)})}async fetchPublishingStatus(){if(!T(this.layer.url))return\"unavailable\";const e=h(this.layer.url,\"status\"),t=await r(e,{query:{f:\"json\"}});return $.fromJSON(t.data.status)}async uploadAssets(e,t){const{uploadAssets:r}=await import(\"./support/uploadAssets.js\");return r(e,{layer:this.layer,ongoingUploads:this._ongoingAssetUploads},t)}_handleLastEditsEventChange(e){const t=this.layer;if(null==e||!(\"capabilities\"in t)||!(\"effectiveCapabilities\"in t))return;if(!(!t.capabilities?.operations?.supportsEditing&&t.effectiveCapabilities?.operations?.supportsEditing))return;const r=t.url;if(null==r)return;\"layerId\"in t&&h(r,t.layerId.toString());this._getOrCreateEditInterceptor(r).before=t=>{const r=t.requestOptions.method??\"auto\";if(\"auto\"===r||\"head\"===r){const r=t.requestOptions.query??{};r._ts=e.getTime(),t.requestOptions.query=r}}}_getOrCreateEditInterceptor(e){return null==this._editInterceptor&&(this._editInterceptor={urls:e},t.request.internalInterceptors.push(this._editInterceptor)),this._editInterceptor}_removeEditInterceptor(){null!=this._editInterceptor&&(a(t.request.internalInterceptors,this._editInterceptor),this._editInterceptor=null)}async _asyncApplyEdits(e,t){const s=(await r(e,t)).data.statusUrl;for(;;){const e=(await r(s,{query:{f:\"json\"},responseType:\"json\"})).data;switch(e.status){case\"Completed\":return r(e.resultUrl,{query:{f:\"json\"},responseType:\"json\"});case\"CompletedWithErrors\":throw new i(\"async-applyEdits-failed\",\"asynchronous applyEdits call failed.\");case\"Failed ImportChanges\":case\"InProgress\":case\"Pending\":case\"ExportAttachments\":case\"ExportChanges\":case\"ExportingData\":case\"ExportingSnapshot\":case\"ImportAttachments\":case\"ProvisioningReplica\":case\"UnRegisteringReplica\":break;default:throw new i(\"async-applyEdits-failed\",\"asynchronous applyEdits call failed (undefined response status)\")}await d(H)}}_createRequestQueryOptions(e){const t={...this.layer.customParameters,token:this.layer.apiKey,...e?.query};return this.layer.datesInUnknownTimezone&&(t.timeReferenceUnknownClient=!0),t}async _fetchService(e,t){if(!e){const s={};has(\"featurelayer-advanced-symbols\")&&(s.returnAdvancedSymbols=!0),t?.cacheBust&&(s._ts=Date.now());const{data:a}=await r(this.layer.parsedUrl.path,this._getLayerRequestOptions({query:s,signal:t?.signal}));e=a}this.sourceJSON=await this._patchServiceJSON(e,t?.signal);const s=e.type;if(!this.supportedSourceTypes.has(s))throw new i(\"feature-layer-source:unsupported-type\",`Source type \"${s}\" is not supported`)}async _patchServiceJSON(e,t){if(\"Table\"!==e.type&&e.geometryType&&!e?.drawingInfo?.renderer&&!e.defaultSymbol){const t=j(e.geometryType).renderer;l(\"drawingInfo.renderer\",t,e)}if(\"esriGeometryMultiPatch\"===e.geometryType&&e.infoFor3D&&(e.geometryType=\"mesh\"),null==e.extent)try{const{data:s}=await r(this.layer.url,this._getLayerRequestOptions({signal:t}));s.spatialReference&&(e.extent={xmin:0,ymin:0,xmax:0,ymax:0,spatialReference:s.spatialReference})}catch(s){p(s)}return e}async _ensureLatestMetadata(e){if(this.layer.userHasUpdateItemPrivileges&&this.sourceJSON.cacheMaxAge>0)return this._fetchService(null,{...e,cacheBust:!0})}async _uploadMeshesAndGetAssetMapEditsJSON(e){const{addAssetFeatures:t}=e;if(!t?.length)return null;if(await this._areAllAssetsAlreadyMapped(t))return null;const r=e.addFeatures.filter((e=>e.geometry));if(t.length!==r.length+e.updateFeatures.length)throw new i(\"feature-layer-source:unsupported-mesh-edits\",\"Mixing attribute only edits with mesh geometry edits is not currently supported\");const s=new Array,a=new Map;for(const i of t){const{geometry:e}=i,{vertexSpace:t}=e;if(E(t))s.push(e);else{const t=e.origin,{convertMeshVertexSpace:r}=await import(\"../../../geometry/support/meshUtils/convertMeshVertexSpace.js\"),n=await r(e,new S({origin:[t.x,t.y,t.z??0]}));a.set(n,e),i.geometry=n,s.push(n)}}await this.uploadAssets(s);for(const[i,n]of a)n.addExternalSources(i.metadata.externalSources.items);return{adds:this._getAssetMapEditsJSON(t),updates:[],deletes:[]}}_getAssetMapEditsJSON(e){const t=new Array,r=this.layer.globalIdField,s=this.layer.parsedUrl;for(const a of e){const e=a.geometry,{metadata:i}=e,n=i.getExternalSourcesOnService(s),o=a.getAttribute(r);if(0===n.length){u.getLogger(this).error(`Skipping feature ${o}. The mesh it is associated with has not been uploaded to the service and cannot be mapped to it.`);continue}const{source:l}=n.find(O)??n[0];for(const r of l)1===r.parts.length?t.push({globalId:m(),parentGlobalId:o,assetName:r.assetName,assetHash:r.parts[0].partHash,flags:[]}):u.getLogger(this).error(`Skipping asset ${r.assetName}. It does not have exactly one part, so we cannot map it to a feature.`)}return t}_createEditsResult(e){const t=e.data,{layerId:r}=this.layer,s=[];let a=null;if(Array.isArray(t))for(const n of t)s.push({id:n.id,editedFeatures:n.editedFeatures}),n.id===r&&(a={addResults:n.addResults??[],updateResults:n.updateResults??[],deleteResults:n.deleteResults??[],attachments:n.attachments,editMoment:n.editMoment});else a=t;const i=I(a);if(s.length>0){i.editedFeatureResults=[];for(const e of s){const{editedFeatures:t}=e,r=t?.spatialReference?new q(t.spatialReference):null;i.editedFeatureResults.push({layerId:e.id,editedFeatures:x(t,r)})}}return i}_createAttachmentErrorResult(e,t){const r=t.details.messages?.[0]||t.message,s=t.details.httpStatus||t.details.messageCode;return{objectId:e,globalId:null,error:new i(\"feature-layer-source:attachment-failure\",r,{code:s})}}_getFormDataForAttachment(e,t){const r=e instanceof FormData?e:e&&e.elements?new FormData(e):null;if(r)for(const s in t){const e=t[s];null!=e&&(r.set?r.set(s,e):r.append(s,e))}return r}_getLayerRequestOptions(e={}){const{layer:t,layer:{parsedUrl:r,gdbVersion:s}}=this;return{...e,query:{gdbVersion:s,layer:\"dynamicDataSource\"in t&&t.dynamicDataSource?JSON.stringify({source:t.dynamicDataSource}):void 0,...r.query,f:\"json\",...this._createRequestQueryOptions(e)},responseType:\"json\"}}async _areAllAssetsAlreadyMapped(e){const{layer:t}=this,{globalIdField:r,parsedUrl:a}=t,i=\"infoFor3D\"in t?t.infoFor3D:null;if(null==i||null==r)return!1;const n=N(i);if(null==n)return!1;const o=h(a.path,`../${n.id}`),u=new Array;for(const s of e){if(!(s.geometry.metadata.getExternalSourcesOnService(a).length>0))return!1;u.push(s)}const l=u.map((e=>e.getAttribute(r))).filter(s);if(0===l.length)return!1;const{assetMapFieldRoles:{parentGlobalId:c,assetHash:d}}=i,p=new D({where:`${c} IN (${l.map((e=>`'${e}'`))})`,outFields:[d,c],returnGeometry:!1}),y=await U(o,p),{features:m}=y;return 0!==m.length&&!u.some((e=>{const t=e.getAttribute(r);if(!t)return!0;const{metadata:s}=e.geometry,i=m.filter((e=>e.getAttribute(c)===t));if(0===i.length)return!0;const n=i.map((e=>e.getAttribute(d)));return s.getExternalSourcesOnService(a).flatMap((({source:e})=>e.flatMap((e=>e.parts.map((e=>e.partHash)))))).some((e=>n.every((t=>e!==t))))}))}};e([f()],G.prototype,\"type\",void 0),e([f({constructOnly:!0})],G.prototype,\"layer\",void 0),e([f({constructOnly:!0})],G.prototype,\"supportedSourceTypes\",void 0),e([f({readOnly:!0})],G.prototype,\"queryTask\",null),G=e([g(\"esri.layers.graphics.sources.FeatureLayerSource\")],G);const H=1e3,B=G;export{B as default};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}