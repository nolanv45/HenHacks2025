{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport has from \"../../core/has.js\";\nimport { glsl as e } from \"../3d/webgl-engine/core/shaderModules/glsl.js\";\nimport { AppleAmdDriverHelper as r } from \"./AppleAmdDriverHelper.js\";\nimport { BufferObject as t } from \"./BufferObject.js\";\nimport { TextureWrapMode as o, TextureSamplingMode as n, Usage as i, BufferType as s, PrimitiveType as a, DataType as p, PixelFormat as l, PixelType as c } from \"./enums.js\";\nimport { FramebufferObject as m } from \"./FramebufferObject.js\";\nimport { TextureDescriptor as g } from \"./TextureDescriptor.js\";\nimport { WebGLDriverTestModule as f } from \"./WebGLDriverTestModule.js\";\nclass d extends f {\n  constructor(e) {\n    super(), this._rctx = e, this._helperProgram = null, has(\"mac\") && has(\"chrome\") && (this._program = this._prepareProgram(), this._helperProgram = this._prepareHelperProgram());\n  }\n  dispose() {\n    super.dispose(), this._helperProgram?.dispose(), this._helperProgram = null;\n  }\n  _test(e) {\n    const r = this._rctx,\n      f = r.getBoundFramebufferObject(),\n      {\n        x: d,\n        y: h,\n        width: u,\n        height: _\n      } = r.getViewport();\n    r.resetState();\n    const v = new g(1);\n    v.wrapMode = o.CLAMP_TO_EDGE, v.samplingMode = n.NEAREST;\n    const P = new m(r, v),\n      w = t.createIndex(this._rctx, i.STATIC_DRAW, new Uint8Array([0]));\n    r.bindFramebuffer(P), r.setViewport(0, 0, 1, 1), r.useProgram(this._helperProgram), r.bindBuffer(w, s.ELEMENT_ARRAY_BUFFER), r.drawElements(a.POINTS, 1, p.UNSIGNED_BYTE, 0), r.useProgram(e), r.bindVAO(null), r.drawArrays(a.TRIANGLES, 0, 258);\n    const x = new Uint8Array(4);\n    return P.readPixels(0, 0, 1, 1, l.RGBA, c.UNSIGNED_BYTE, x), r.setViewport(d, h, u, _), r.bindFramebuffer(f), P.dispose(), w.dispose(), 255 === x[0];\n  }\n  _prepareProgram() {\n    const r = 85,\n      t = `#version 300 es\\n    precision highp float;\\n\\n    out float triangleId;\\n\\n    const vec3 triangleVertices[3] = vec3[3](vec3(-0.5, -0.5, 0.0), vec3(0.5, -0.5, 0.0), vec3(0.0, 0.5, 0.0));\\n\\n    void main(void) {\\n      triangleId = floor(float(gl_VertexID)/3.0);\\n\\n      vec3 position = triangleVertices[gl_VertexID % 3];\\n      float offset = triangleId / ${e.float(r)};\\n      position.z = 0.5 - offset;\\n\\n      gl_Position = vec4(position, 1.0);\\n    }\\n    `,\n      o = `#version 300 es\\n    precision highp float;\\n\\n    in float triangleId;\\n\\n    out vec4 fragColor;\\n\\n    void main(void) {\\n      fragColor = triangleId == ${e.float(r)} ? vec4(0.0, 1.0, 0.0, 1.0) : vec4(1.0, 0.0, 0.0, 1.0);\\n    }\\n    `;\n    return this._rctx.programCache.acquire(t, o, new Map([]));\n  }\n  _prepareHelperProgram() {\n    const e = r.getShaderSources();\n    return this._rctx.programCache.acquire(e.vertex, e.fragment, new Map([]));\n  }\n}\nexport { d as DrawArraysRequiresIndicesTypeReset };","map":{"version":3,"names":["has","glsl","e","AppleAmdDriverHelper","r","BufferObject","t","TextureWrapMode","o","TextureSamplingMode","n","Usage","i","BufferType","s","PrimitiveType","a","DataType","p","PixelFormat","l","PixelType","c","FramebufferObject","m","TextureDescriptor","g","WebGLDriverTestModule","f","d","constructor","_rctx","_helperProgram","_program","_prepareProgram","_prepareHelperProgram","dispose","_test","getBoundFramebufferObject","x","y","h","width","u","height","_","getViewport","resetState","v","wrapMode","CLAMP_TO_EDGE","samplingMode","NEAREST","P","w","createIndex","STATIC_DRAW","Uint8Array","bindFramebuffer","setViewport","useProgram","bindBuffer","ELEMENT_ARRAY_BUFFER","drawElements","POINTS","UNSIGNED_BYTE","bindVAO","drawArrays","TRIANGLES","readPixels","RGBA","float","programCache","acquire","Map","getShaderSources","vertex","fragment","DrawArraysRequiresIndicesTypeReset"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/webgl/testAppleAmdDrawArrays.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport has from\"../../core/has.js\";import{glsl as e}from\"../3d/webgl-engine/core/shaderModules/glsl.js\";import{AppleAmdDriverHelper as r}from\"./AppleAmdDriverHelper.js\";import{BufferObject as t}from\"./BufferObject.js\";import{TextureWrapMode as o,TextureSamplingMode as n,Usage as i,BufferType as s,PrimitiveType as a,DataType as p,PixelFormat as l,PixelType as c}from\"./enums.js\";import{FramebufferObject as m}from\"./FramebufferObject.js\";import{TextureDescriptor as g}from\"./TextureDescriptor.js\";import{WebGLDriverTestModule as f}from\"./WebGLDriverTestModule.js\";class d extends f{constructor(e){super(),this._rctx=e,this._helperProgram=null,has(\"mac\")&&has(\"chrome\")&&(this._program=this._prepareProgram(),this._helperProgram=this._prepareHelperProgram())}dispose(){super.dispose(),this._helperProgram?.dispose(),this._helperProgram=null}_test(e){const r=this._rctx,f=r.getBoundFramebufferObject(),{x:d,y:h,width:u,height:_}=r.getViewport();r.resetState();const v=new g(1);v.wrapMode=o.CLAMP_TO_EDGE,v.samplingMode=n.NEAREST;const P=new m(r,v),w=t.createIndex(this._rctx,i.STATIC_DRAW,new Uint8Array([0]));r.bindFramebuffer(P),r.setViewport(0,0,1,1),r.useProgram(this._helperProgram),r.bindBuffer(w,s.ELEMENT_ARRAY_BUFFER),r.drawElements(a.POINTS,1,p.UNSIGNED_BYTE,0),r.useProgram(e),r.bindVAO(null),r.drawArrays(a.TRIANGLES,0,258);const x=new Uint8Array(4);return P.readPixels(0,0,1,1,l.RGBA,c.UNSIGNED_BYTE,x),r.setViewport(d,h,u,_),r.bindFramebuffer(f),P.dispose(),w.dispose(),255===x[0]}_prepareProgram(){const r=85,t=`#version 300 es\\n    precision highp float;\\n\\n    out float triangleId;\\n\\n    const vec3 triangleVertices[3] = vec3[3](vec3(-0.5, -0.5, 0.0), vec3(0.5, -0.5, 0.0), vec3(0.0, 0.5, 0.0));\\n\\n    void main(void) {\\n      triangleId = floor(float(gl_VertexID)/3.0);\\n\\n      vec3 position = triangleVertices[gl_VertexID % 3];\\n      float offset = triangleId / ${e.float(r)};\\n      position.z = 0.5 - offset;\\n\\n      gl_Position = vec4(position, 1.0);\\n    }\\n    `,o=`#version 300 es\\n    precision highp float;\\n\\n    in float triangleId;\\n\\n    out vec4 fragColor;\\n\\n    void main(void) {\\n      fragColor = triangleId == ${e.float(r)} ? vec4(0.0, 1.0, 0.0, 1.0) : vec4(1.0, 0.0, 0.0, 1.0);\\n    }\\n    `;return this._rctx.programCache.acquire(t,o,new Map([]))}_prepareHelperProgram(){const e=r.getShaderSources();return this._rctx.programCache.acquire(e.vertex,e.fragment,new Map([]))}}export{d as DrawArraysRequiresIndicesTypeReset};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}