{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../chunks/tslib.es6.js\";\nimport t from \"../config.js\";\nimport r from \"../Graphic.js\";\nimport o from \"../PopupTemplate.js\";\nimport s from \"../request.js\";\nimport i from \"../core/Collection.js\";\nimport a from \"../core/CollectionFlattener.js\";\nimport n from \"../core/Error.js\";\nimport { JSONMap as l } from \"../core/jsonMap.js\";\nimport { clone as p } from \"../core/lang.js\";\nimport { MultiOriginJSONMixin as m } from \"../core/MultiOriginJSONSupport.js\";\nimport { throwIfAbortError as u } from \"../core/promiseUtils.js\";\nimport { on as c, watch as y, sync as f } from \"../core/reactiveUtils.js\";\nimport { urlToObject as d, addQueryParameters as h, addProxy as g, Url as b } from \"../core/urlUtils.js\";\nimport { property as w } from \"../core/accessorSupport/decorators/property.js\";\nimport { Integer as v } from \"../core/accessorSupport/ensureType.js\";\nimport { reader as x } from \"../core/accessorSupport/decorators/reader.js\";\nimport { subclass as j } from \"../core/accessorSupport/decorators/subclass.js\";\nimport { writer as I } from \"../core/accessorSupport/decorators/writer.js\";\nimport { willPropertyWrite as S } from \"../core/accessorSupport/write.js\";\nimport F from \"../geometry/Extent.js\";\nimport P from \"../geometry/SpatialReference.js\";\nimport { getScale as R } from \"../geometry/support/scaleUtils.js\";\nimport { equals as E } from \"../geometry/support/spatialReferenceUtils.js\";\nimport L from \"./Layer.js\";\nimport { BlendLayer as O } from \"./mixins/BlendLayer.js\";\nimport { OperationalLayer as U } from \"./mixins/OperationalLayer.js\";\nimport { PortalLayer as M } from \"./mixins/PortalLayer.js\";\nimport { RefreshableLayer as _ } from \"./mixins/RefreshableLayer.js\";\nimport { ScaleRangeLayer as T } from \"./mixins/ScaleRangeLayer.js\";\nimport { TemporalLayer as C } from \"./mixins/TemporalLayer.js\";\nimport { isAxesOrderReversedForWkid as W } from \"./ogc/crsUtils.js\";\nimport { isWmsServer as q } from \"./support/arcgisLayerUrl.js\";\nimport { legendEnabled as N, url as $ } from \"./support/commonProperties.js\";\nimport { ExportWMSImageParameters as k } from \"./support/ExportWMSImageParameters.js\";\nimport { createBitmap as B } from \"./support/imageBitmapUtils.js\";\nimport H from \"./support/WMSSublayer.js\";\nimport { normalizeWKID as G, toTimeQueryParameter as V, getPopupLayers as A, parseCapabilities as D } from \"./support/wmsUtils.js\";\nconst J = new l({\n  bmp: \"image/bmp\",\n  gif: \"image/gif\",\n  jpg: \"image/jpeg\",\n  png: \"image/png\",\n  svg: \"image/svg+xml\"\n}, {\n  ignoreUnknown: !1\n});\nfunction z(e) {\n  return \"text/html\" === e;\n}\nfunction Q(e) {\n  return \"text/plain\" === e;\n}\nlet K = class extends O(C(_(T(U(M(m(L))))))) {\n  constructor(...e) {\n    super(...e), this.allSublayers = new a({\n      getCollections: () => [this.sublayers],\n      getChildrenFunction: e => e.sublayers\n    }), this.customParameters = null, this.customLayerParameters = null, this.copyright = null, this.description = null, this.dimensions = null, this.fullExtent = null, this.fullExtents = null, this.featureInfoFormats = null, this.featureInfoUrl = null, this.fetchFeatureInfoFunction = null, this.imageFormat = null, this.imageMaxHeight = 2048, this.imageMaxWidth = 2048, this.imageTransparency = !0, this.legendEnabled = !0, this.mapUrl = null, this.isReference = null, this.operationalLayerType = \"WMS\", this.spatialReference = null, this.spatialReferences = null, this.sublayers = null, this.type = \"wms\", this.version = null, this.addHandles([c(() => this.sublayers, \"after-add\", ({\n      item: e\n    }) => {\n      e.parent = e.layer = this;\n    }, f), c(() => this.sublayers, \"after-remove\", ({\n      item: e\n    }) => {\n      e.layer = e.parent = null;\n    }, f), y(() => this.sublayers, (e, t) => {\n      if (t) for (const r of t) r.layer = r.parent = null;\n      if (e) for (const r of e) r.parent = r.layer = this;\n    }, f)]);\n  }\n  normalizeCtorArgs(e, t) {\n    return \"string\" == typeof e ? {\n      url: e,\n      ...t\n    } : e;\n  }\n  destroy() {\n    this.allSublayers.destroy();\n  }\n  load(e) {\n    const t = null != e ? e.signal : null;\n    return this.addResolvingPromise(this.loadFromPortal({\n      supportedTypes: [\"WMS\"]\n    }, e).catch(u).then(() => this._fetchService(t)).then(() => this._checkLayerValidity())), Promise.resolve(this);\n  }\n  readFullExtentFromItemOrMap(e, t) {\n    const r = t.extent;\n    return r ? new F({\n      xmin: r[0][0],\n      ymin: r[0][1],\n      xmax: r[1][0],\n      ymax: r[1][1]\n    }) : null;\n  }\n  writeFullExtent(e, t) {\n    t.extent = [[e.xmin, e.ymin], [e.xmax, e.ymax]];\n  }\n  get featureInfoFormat() {\n    return null == this.featureInfoFormats ? null : this.featureInfoFormats.find(z) ?? this.featureInfoFormats.find(Q) ?? null;\n  }\n  set featureInfoFormat(e) {\n    null == e ? (this.revert(\"featureInfoFormat\", \"service\"), this._clearOverride(\"featureInfoFormat\")) : (z(e) || Q(e)) && this._override(\"featureInfoFormat\", e);\n  }\n  readImageFormat(e, t) {\n    const r = t.supportedImageFormatTypes;\n    return r && r.includes(\"image/png\") ? \"image/png\" : r && r[0];\n  }\n  readSpatialReferenceFromItemOrDocument(e, t) {\n    return new P(t.spatialReferences[0]);\n  }\n  writeSpatialReferences(e, t) {\n    const r = this.spatialReference?.wkid;\n    e && r ? (t.spatialReferences = e.filter(e => e !== r), t.spatialReferences.unshift(r)) : t.spatialReferences = e;\n  }\n  readSublayersFromItemOrMap(e, t, r) {\n    return Y(t.layers, r, t.visibleLayers);\n  }\n  readSublayers(e, t, r) {\n    return Y(t.layers, r);\n  }\n  writeSublayers(e, t, r, o) {\n    t.layers = [];\n    const s = new Map(),\n      i = e.flatten(({\n        sublayers: e\n      }) => e ?? []);\n    for (const a of i) if (\"number\" == typeof a.parent?.id) {\n      const e = s.get(a.parent.id);\n      null != e ? e.push(a.id) : s.set(a.parent.id, [a.id]);\n    }\n    for (const a of i) {\n      const e = {\n          sublayer: a,\n          ...o\n        },\n        r = a.write({\n          parentLayerId: \"number\" == typeof a.parent?.id ? a.parent.id : -1\n        }, e);\n      if (s.has(a.id) && (r.sublayerIds = s.get(a.id)), !a.sublayers && a.name) {\n        const r = a.write({}, e);\n        delete r.id, t.layers.push(r);\n      }\n    }\n    t.visibleLayers = i.filter(({\n      visible: e,\n      sublayers: t\n    }) => e && !t).map(({\n      name: e\n    }) => e).toArray();\n  }\n  set url(e) {\n    if (!e) return void this._set(\"url\", e);\n    const {\n      path: t,\n      query: r\n    } = d(e);\n    for (const s in r) /^(request|service)$/i.test(s) && delete r[s];\n    const o = h(t, r ?? {});\n    this._set(\"url\", o);\n  }\n  createExportImageParameters(e, t, r, o) {\n    const s = o?.pixelRatio ?? 1,\n      i = R({\n        extent: e,\n        width: t\n      }) * s,\n      a = new k({\n        layer: this,\n        scale: i\n      }),\n      {\n        xmin: n,\n        ymin: l,\n        xmax: p,\n        ymax: m,\n        spatialReference: u\n      } = e,\n      c = G(u, this.spatialReferences),\n      y = \"1.3.0\" === this.version && W(c) ? `${l},${n},${m},${p}` : `${n},${l},${p},${m}`,\n      f = a.toJSON(),\n      d = \"1.3.0\" === this.version ? \"crs\" : \"srs\";\n    return {\n      bbox: y,\n      [d]: null == c || isNaN(c) ? void 0 : \"EPSG:\" + c,\n      ...f\n    };\n  }\n  async fetchImage(e, t, r, o) {\n    const i = this.mapUrl,\n      a = this.createExportImageParameters(e, t, r, o);\n    if (!a.layers) {\n      const e = document.createElement(\"canvas\");\n      return e.width = t, e.height = r, e;\n    }\n    const n = V(o?.timeExtent),\n      l = {\n        responseType: \"image\",\n        query: this._mixCustomParameters({\n          width: t,\n          height: r,\n          ...a,\n          time: n,\n          ...this.refreshParameters\n        }),\n        signal: o?.signal\n      };\n    return s(i ?? \"\", l).then(e => e.data);\n  }\n  async fetchImageBitmap(e, t, r, o) {\n    const i = this.mapUrl ?? \"\",\n      a = this.createExportImageParameters(e, t, r, o);\n    if (!a.layers) {\n      const e = document.createElement(\"canvas\");\n      return e.width = t, e.height = r, e;\n    }\n    const n = V(o?.timeExtent),\n      l = {\n        responseType: \"blob\",\n        query: this._mixCustomParameters({\n          width: t,\n          height: r,\n          ...a,\n          time: n,\n          ...this.refreshParameters\n        }),\n        signal: o?.signal\n      },\n      {\n        data: p\n      } = await s(i, l);\n    return B(p, i, o?.signal);\n  }\n  fetchFeatureInfo(e, t, r, o, s) {\n    const i = R({\n        extent: e,\n        width: t\n      }),\n      a = new k({\n        layer: this,\n        scale: i\n      }),\n      n = A(a.visibleSublayers);\n    if (null == this.featureInfoUrl || null == n) return Promise.resolve([]);\n    if (null == this.fetchFeatureInfoFunction && null == this.featureInfoFormat) return Promise.resolve([]);\n    const l = \"1.3.0\" === this.version ? {\n        I: o,\n        J: s\n      } : {\n        x: o,\n        y: s\n      },\n      p = {\n        query_layers: n,\n        request: \"GetFeatureInfo\",\n        info_format: this.featureInfoFormat,\n        feature_count: 25,\n        width: t,\n        height: r,\n        ...l\n      },\n      m = {\n        ...this.createExportImageParameters(e, t, r),\n        ...p\n      },\n      u = this._mixCustomParameters(m);\n    return null != this.fetchFeatureInfoFunction ? this.fetchFeatureInfoFunction(u) : this._defaultFetchFeatureInfoFunction(h(this.featureInfoUrl, u));\n  }\n  findSublayerById(e) {\n    return this.allSublayers.find(t => t.id === e);\n  }\n  findSublayerByName(e) {\n    return this.allSublayers.find(t => t.name === e);\n  }\n  serviceSupportsSpatialReference(e) {\n    return q(this.url) || null != this.spatialReferences && this.spatialReferences.some(t => {\n      const r = 900913 === t ? P.WebMercator : new P({\n        wkid: t\n      });\n      return E(r, e);\n    });\n  }\n  _defaultFetchFeatureInfoFunction(e) {\n    const t = document.createElement(\"iframe\");\n    t.src = g(e), t.style.border = \"none\", t.style.margin = \"0\", t.style.width = \"100%\", t.setAttribute(\"sandbox\", \"\");\n    const s = new o({\n        title: this.title,\n        content: t\n      }),\n      i = new r({\n        sourceLayer: this,\n        popupTemplate: s\n      });\n    return Promise.resolve([i]);\n  }\n  async _fetchService(e) {\n    if (!this.resourceInfo && this.parsedUrl?.path) {\n      const {\n          path: t,\n          query: r\n        } = this.parsedUrl,\n        {\n          data: o\n        } = await s(t, {\n          query: {\n            SERVICE: \"WMS\",\n            REQUEST: \"GetCapabilities\",\n            ...r,\n            ...this.customParameters\n          },\n          responseType: \"xml\",\n          signal: e\n        });\n      this.resourceInfo = D(o);\n    }\n    if (this.parsedUrl) {\n      const e = new b(this.parsedUrl.path),\n        {\n          httpsDomains: r\n        } = t.request;\n      \"https\" !== e.scheme || e.port && \"443\" !== e.port || !e.host || r.includes(e.host) || r.push(e.host);\n    }\n    this.read(this.resourceInfo, {\n      origin: \"service\"\n    });\n  }\n  _checkLayerValidity() {\n    if (!this.allSublayers.length) throw new n(\"wmslayer:empty-layer\", \"The layer doesn't have any sublayer\");\n  }\n  _mixCustomParameters(e) {\n    if (!this.customLayerParameters && !this.customParameters) return e;\n    const t = {\n      ...this.customParameters,\n      ...this.customLayerParameters\n    };\n    for (const r in t) e[r.toLowerCase()] = t[r];\n    return e;\n  }\n};\nfunction X(e, t) {\n  return e.some(e => {\n    for (const r in e) if (S(e, r, null, t)) return !0;\n    return !1;\n  });\n}\nfunction Y(e, t, r) {\n  e = e ?? [];\n  const o = new Map();\n  e.every(e => null == e.id) && (e = p(e)).forEach((e, t) => e.id = t);\n  for (const i of e) {\n    const e = new H();\n    e.read(i, t), r && !r.includes(e.name) && (e.visible = !1), o.set(e.id, e);\n  }\n  const s = [];\n  for (const a of e) {\n    const e = null != a.id ? o.get(a.id) : null;\n    if (e) if (null != a.parentLayerId && a.parentLayerId >= 0) {\n      const t = o.get(a.parentLayerId);\n      if (!t) continue;\n      t.sublayers || (t.sublayers = new i()), t.sublayers.push(e);\n    } else s.push(e);\n  }\n  return s;\n}\ne([w({\n  readOnly: !0\n})], K.prototype, \"allSublayers\", void 0), e([w({\n  json: {\n    type: Object,\n    write: !0\n  }\n})], K.prototype, \"customParameters\", void 0), e([w({\n  json: {\n    type: Object,\n    write: !0\n  }\n})], K.prototype, \"customLayerParameters\", void 0), e([w({\n  type: String,\n  json: {\n    write: !0\n  }\n})], K.prototype, \"copyright\", void 0), e([w()], K.prototype, \"description\", void 0), e([w({\n  readOnly: !0\n})], K.prototype, \"dimensions\", void 0), e([w({\n  json: {\n    type: [[Number]],\n    read: {\n      source: \"extent\"\n    },\n    write: {\n      target: \"extent\"\n    },\n    origins: {\n      \"web-document\": {\n        write: {\n          ignoreOrigin: !0\n        }\n      },\n      \"portal-item\": {\n        write: {\n          ignoreOrigin: !0\n        }\n      }\n    }\n  }\n})], K.prototype, \"fullExtent\", void 0), e([x([\"web-document\", \"portal-item\"], \"fullExtent\", [\"extent\"])], K.prototype, \"readFullExtentFromItemOrMap\", null), e([I([\"web-document\", \"portal-item\"], \"fullExtent\", {\n  extent: {\n    type: [[Number]]\n  }\n})], K.prototype, \"writeFullExtent\", null), e([w({\n  type: [F]\n})], K.prototype, \"fullExtents\", void 0), e([w({\n  type: String,\n  json: {\n    write: {\n      ignoreOrigin: !0\n    }\n  }\n})], K.prototype, \"featureInfoFormat\", null), e([w({\n  type: [String],\n  readOnly: !0\n})], K.prototype, \"featureInfoFormats\", void 0), e([w({\n  type: String,\n  json: {\n    write: {\n      ignoreOrigin: !0\n    }\n  }\n})], K.prototype, \"featureInfoUrl\", void 0), e([w()], K.prototype, \"fetchFeatureInfoFunction\", void 0), e([w({\n  type: String,\n  json: {\n    origins: {\n      \"web-document\": {\n        default: \"image/png\",\n        type: J.jsonValues,\n        read: {\n          reader: J.read,\n          source: \"format\"\n        },\n        write: {\n          writer: J.write,\n          target: \"format\"\n        }\n      }\n    }\n  }\n})], K.prototype, \"imageFormat\", void 0), e([x(\"imageFormat\", [\"supportedImageFormatTypes\"])], K.prototype, \"readImageFormat\", null), e([w({\n  type: Number,\n  json: {\n    read: {\n      source: \"maxHeight\"\n    },\n    write: {\n      target: \"maxHeight\"\n    }\n  }\n})], K.prototype, \"imageMaxHeight\", void 0), e([w({\n  type: Number,\n  json: {\n    read: {\n      source: \"maxWidth\"\n    },\n    write: {\n      target: \"maxWidth\"\n    }\n  }\n})], K.prototype, \"imageMaxWidth\", void 0), e([w()], K.prototype, \"imageTransparency\", void 0), e([w(N)], K.prototype, \"legendEnabled\", void 0), e([w({\n  type: [\"show\", \"hide\", \"hide-children\"]\n})], K.prototype, \"listMode\", void 0), e([w({\n  type: String,\n  json: {\n    write: {\n      ignoreOrigin: !0\n    }\n  }\n})], K.prototype, \"mapUrl\", void 0), e([w({\n  type: Boolean,\n  json: {\n    read: !1,\n    write: {\n      enabled: !0,\n      overridePolicy: () => ({\n        enabled: !1\n      })\n    }\n  }\n})], K.prototype, \"isReference\", void 0), e([w({\n  type: [\"WMS\"]\n})], K.prototype, \"operationalLayerType\", void 0), e([w()], K.prototype, \"resourceInfo\", void 0), e([w({\n  type: P,\n  json: {\n    origins: {\n      service: {\n        read: {\n          source: \"extent.spatialReference\"\n        }\n      }\n    },\n    write: !1\n  }\n})], K.prototype, \"spatialReference\", void 0), e([x([\"web-document\", \"portal-item\"], \"spatialReference\", [\"spatialReferences\"])], K.prototype, \"readSpatialReferenceFromItemOrDocument\", null), e([w({\n  type: [v],\n  json: {\n    read: !1,\n    origins: {\n      service: {\n        read: !0\n      },\n      \"web-document\": {\n        read: !1,\n        write: {\n          ignoreOrigin: !0\n        }\n      },\n      \"portal-item\": {\n        read: !1,\n        write: {\n          ignoreOrigin: !0\n        }\n      }\n    }\n  }\n})], K.prototype, \"spatialReferences\", void 0), e([I([\"web-document\", \"portal-item\"], \"spatialReferences\")], K.prototype, \"writeSpatialReferences\", null), e([w({\n  type: i.ofType(H),\n  json: {\n    write: {\n      target: \"layers\",\n      overridePolicy(e, t, r) {\n        if (X(this.allSublayers, r)) return {\n          ignoreOrigin: !0\n        };\n      }\n    }\n  }\n})], K.prototype, \"sublayers\", void 0), e([x([\"web-document\", \"portal-item\"], \"sublayers\", [\"layers\", \"visibleLayers\"])], K.prototype, \"readSublayersFromItemOrMap\", null), e([x(\"service\", \"sublayers\", [\"layers\"])], K.prototype, \"readSublayers\", null), e([I(\"sublayers\", {\n  layers: {\n    type: [H]\n  },\n  visibleLayers: {\n    type: [String]\n  }\n})], K.prototype, \"writeSublayers\", null), e([w({\n  json: {\n    read: !1\n  },\n  readOnly: !0,\n  value: \"wms\"\n})], K.prototype, \"type\", void 0), e([w($)], K.prototype, \"url\", null), e([w({\n  type: String,\n  json: {\n    write: {\n      ignoreOrigin: !0\n    }\n  }\n})], K.prototype, \"version\", void 0), K = e([j(\"esri.layers.WMSLayer\")], K);\nconst Z = K;\nexport { Z as default };","map":{"version":3,"names":["_","e","t","r","o","s","i","a","n","JSONMap","l","clone","p","MultiOriginJSONMixin","m","throwIfAbortError","u","on","c","watch","y","sync","f","urlToObject","d","addQueryParameters","h","addProxy","g","Url","b","property","w","Integer","v","reader","x","subclass","j","writer","I","willPropertyWrite","S","F","P","getScale","R","equals","E","L","BlendLayer","O","OperationalLayer","U","PortalLayer","M","RefreshableLayer","ScaleRangeLayer","T","TemporalLayer","C","isAxesOrderReversedForWkid","W","isWmsServer","q","legendEnabled","N","url","$","ExportWMSImageParameters","k","createBitmap","B","H","normalizeWKID","G","toTimeQueryParameter","V","getPopupLayers","A","parseCapabilities","D","J","bmp","gif","jpg","png","svg","ignoreUnknown","z","Q","K","constructor","allSublayers","getCollections","sublayers","getChildrenFunction","customParameters","customLayerParameters","copyright","description","dimensions","fullExtent","fullExtents","featureInfoFormats","featureInfoUrl","fetchFeatureInfoFunction","imageFormat","imageMaxHeight","imageMaxWidth","imageTransparency","mapUrl","isReference","operationalLayerType","spatialReference","spatialReferences","type","version","addHandles","item","parent","layer","normalizeCtorArgs","destroy","load","signal","addResolvingPromise","loadFromPortal","supportedTypes","catch","then","_fetchService","_checkLayerValidity","Promise","resolve","readFullExtentFromItemOrMap","extent","xmin","ymin","xmax","ymax","writeFullExtent","featureInfoFormat","find","revert","_clearOverride","_override","readImageFormat","supportedImageFormatTypes","includes","readSpatialReferenceFromItemOrDocument","writeSpatialReferences","wkid","filter","unshift","readSublayersFromItemOrMap","Y","layers","visibleLayers","readSublayers","writeSublayers","Map","flatten","id","get","push","set","sublayer","write","parentLayerId","has","sublayerIds","name","visible","map","toArray","_set","path","query","test","createExportImageParameters","pixelRatio","width","scale","toJSON","bbox","isNaN","fetchImage","document","createElement","height","timeExtent","responseType","_mixCustomParameters","time","refreshParameters","data","fetchImageBitmap","fetchFeatureInfo","visibleSublayers","query_layers","request","info_format","feature_count","_defaultFetchFeatureInfoFunction","findSublayerById","findSublayerByName","serviceSupportsSpatialReference","some","WebMercator","src","style","border","margin","setAttribute","title","content","sourceLayer","popupTemplate","resourceInfo","parsedUrl","SERVICE","REQUEST","httpsDomains","scheme","port","host","read","origin","length","toLowerCase","X","every","forEach","readOnly","prototype","json","Object","String","Number","source","target","origins","ignoreOrigin","default","jsonValues","Boolean","enabled","overridePolicy","service","ofType","value","Z"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/layers/WMSLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../config.js\";import r from\"../Graphic.js\";import o from\"../PopupTemplate.js\";import s from\"../request.js\";import i from\"../core/Collection.js\";import a from\"../core/CollectionFlattener.js\";import n from\"../core/Error.js\";import{JSONMap as l}from\"../core/jsonMap.js\";import{clone as p}from\"../core/lang.js\";import{MultiOriginJSONMixin as m}from\"../core/MultiOriginJSONSupport.js\";import{throwIfAbortError as u}from\"../core/promiseUtils.js\";import{on as c,watch as y,sync as f}from\"../core/reactiveUtils.js\";import{urlToObject as d,addQueryParameters as h,addProxy as g,Url as b}from\"../core/urlUtils.js\";import{property as w}from\"../core/accessorSupport/decorators/property.js\";import{Integer as v}from\"../core/accessorSupport/ensureType.js\";import{reader as x}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as j}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as I}from\"../core/accessorSupport/decorators/writer.js\";import{willPropertyWrite as S}from\"../core/accessorSupport/write.js\";import F from\"../geometry/Extent.js\";import P from\"../geometry/SpatialReference.js\";import{getScale as R}from\"../geometry/support/scaleUtils.js\";import{equals as E}from\"../geometry/support/spatialReferenceUtils.js\";import L from\"./Layer.js\";import{BlendLayer as O}from\"./mixins/BlendLayer.js\";import{OperationalLayer as U}from\"./mixins/OperationalLayer.js\";import{PortalLayer as M}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as _}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as T}from\"./mixins/ScaleRangeLayer.js\";import{TemporalLayer as C}from\"./mixins/TemporalLayer.js\";import{isAxesOrderReversedForWkid as W}from\"./ogc/crsUtils.js\";import{isWmsServer as q}from\"./support/arcgisLayerUrl.js\";import{legendEnabled as N,url as $}from\"./support/commonProperties.js\";import{ExportWMSImageParameters as k}from\"./support/ExportWMSImageParameters.js\";import{createBitmap as B}from\"./support/imageBitmapUtils.js\";import H from\"./support/WMSSublayer.js\";import{normalizeWKID as G,toTimeQueryParameter as V,getPopupLayers as A,parseCapabilities as D}from\"./support/wmsUtils.js\";const J=new l({bmp:\"image/bmp\",gif:\"image/gif\",jpg:\"image/jpeg\",png:\"image/png\",svg:\"image/svg+xml\"},{ignoreUnknown:!1});function z(e){return\"text/html\"===e}function Q(e){return\"text/plain\"===e}let K=class extends(O(C(_(T(U(M(m(L)))))))){constructor(...e){super(...e),this.allSublayers=new a({getCollections:()=>[this.sublayers],getChildrenFunction:e=>e.sublayers}),this.customParameters=null,this.customLayerParameters=null,this.copyright=null,this.description=null,this.dimensions=null,this.fullExtent=null,this.fullExtents=null,this.featureInfoFormats=null,this.featureInfoUrl=null,this.fetchFeatureInfoFunction=null,this.imageFormat=null,this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.legendEnabled=!0,this.mapUrl=null,this.isReference=null,this.operationalLayerType=\"WMS\",this.spatialReference=null,this.spatialReferences=null,this.sublayers=null,this.type=\"wms\",this.version=null,this.addHandles([c((()=>this.sublayers),\"after-add\",(({item:e})=>{e.parent=e.layer=this}),f),c((()=>this.sublayers),\"after-remove\",(({item:e})=>{e.layer=e.parent=null}),f),y((()=>this.sublayers),((e,t)=>{if(t)for(const r of t)r.layer=r.parent=null;if(e)for(const r of e)r.parent=r.layer=this}),f)])}normalizeCtorArgs(e,t){return\"string\"==typeof e?{url:e,...t}:e}destroy(){this.allSublayers.destroy()}load(e){const t=null!=e?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"WMS\"]},e).catch(u).then((()=>this._fetchService(t))).then((()=>this._checkLayerValidity()))),Promise.resolve(this)}readFullExtentFromItemOrMap(e,t){const r=t.extent;return r?new F({xmin:r[0][0],ymin:r[0][1],xmax:r[1][0],ymax:r[1][1]}):null}writeFullExtent(e,t){t.extent=[[e.xmin,e.ymin],[e.xmax,e.ymax]]}get featureInfoFormat(){return null==this.featureInfoFormats?null:this.featureInfoFormats.find(z)??this.featureInfoFormats.find(Q)??null}set featureInfoFormat(e){null==e?(this.revert(\"featureInfoFormat\",\"service\"),this._clearOverride(\"featureInfoFormat\")):(z(e)||Q(e))&&this._override(\"featureInfoFormat\",e)}readImageFormat(e,t){const r=t.supportedImageFormatTypes;return r&&r.includes(\"image/png\")?\"image/png\":r&&r[0]}readSpatialReferenceFromItemOrDocument(e,t){return new P(t.spatialReferences[0])}writeSpatialReferences(e,t){const r=this.spatialReference?.wkid;e&&r?(t.spatialReferences=e.filter((e=>e!==r)),t.spatialReferences.unshift(r)):t.spatialReferences=e}readSublayersFromItemOrMap(e,t,r){return Y(t.layers,r,t.visibleLayers)}readSublayers(e,t,r){return Y(t.layers,r)}writeSublayers(e,t,r,o){t.layers=[];const s=new Map,i=e.flatten((({sublayers:e})=>e??[]));for(const a of i)if(\"number\"==typeof a.parent?.id){const e=s.get(a.parent.id);null!=e?e.push(a.id):s.set(a.parent.id,[a.id])}for(const a of i){const e={sublayer:a,...o},r=a.write({parentLayerId:\"number\"==typeof a.parent?.id?a.parent.id:-1},e);if(s.has(a.id)&&(r.sublayerIds=s.get(a.id)),!a.sublayers&&a.name){const r=a.write({},e);delete r.id,t.layers.push(r)}}t.visibleLayers=i.filter((({visible:e,sublayers:t})=>e&&!t)).map((({name:e})=>e)).toArray()}set url(e){if(!e)return void this._set(\"url\",e);const{path:t,query:r}=d(e);for(const s in r)/^(request|service)$/i.test(s)&&delete r[s];const o=h(t,r??{});this._set(\"url\",o)}createExportImageParameters(e,t,r,o){const s=o?.pixelRatio??1,i=R({extent:e,width:t})*s,a=new k({layer:this,scale:i}),{xmin:n,ymin:l,xmax:p,ymax:m,spatialReference:u}=e,c=G(u,this.spatialReferences),y=\"1.3.0\"===this.version&&W(c)?`${l},${n},${m},${p}`:`${n},${l},${p},${m}`,f=a.toJSON(),d=\"1.3.0\"===this.version?\"crs\":\"srs\";return{bbox:y,[d]:null==c||isNaN(c)?void 0:\"EPSG:\"+c,...f}}async fetchImage(e,t,r,o){const i=this.mapUrl,a=this.createExportImageParameters(e,t,r,o);if(!a.layers){const e=document.createElement(\"canvas\");return e.width=t,e.height=r,e}const n=V(o?.timeExtent),l={responseType:\"image\",query:this._mixCustomParameters({width:t,height:r,...a,time:n,...this.refreshParameters}),signal:o?.signal};return s(i??\"\",l).then((e=>e.data))}async fetchImageBitmap(e,t,r,o){const i=this.mapUrl??\"\",a=this.createExportImageParameters(e,t,r,o);if(!a.layers){const e=document.createElement(\"canvas\");return e.width=t,e.height=r,e}const n=V(o?.timeExtent),l={responseType:\"blob\",query:this._mixCustomParameters({width:t,height:r,...a,time:n,...this.refreshParameters}),signal:o?.signal},{data:p}=await s(i,l);return B(p,i,o?.signal)}fetchFeatureInfo(e,t,r,o,s){const i=R({extent:e,width:t}),a=new k({layer:this,scale:i}),n=A(a.visibleSublayers);if(null==this.featureInfoUrl||null==n)return Promise.resolve([]);if(null==this.fetchFeatureInfoFunction&&null==this.featureInfoFormat)return Promise.resolve([]);const l=\"1.3.0\"===this.version?{I:o,J:s}:{x:o,y:s},p={query_layers:n,request:\"GetFeatureInfo\",info_format:this.featureInfoFormat,feature_count:25,width:t,height:r,...l},m={...this.createExportImageParameters(e,t,r),...p},u=this._mixCustomParameters(m);return null!=this.fetchFeatureInfoFunction?this.fetchFeatureInfoFunction(u):this._defaultFetchFeatureInfoFunction(h(this.featureInfoUrl,u))}findSublayerById(e){return this.allSublayers.find((t=>t.id===e))}findSublayerByName(e){return this.allSublayers.find((t=>t.name===e))}serviceSupportsSpatialReference(e){return q(this.url)||null!=this.spatialReferences&&this.spatialReferences.some((t=>{const r=900913===t?P.WebMercator:new P({wkid:t});return E(r,e)}))}_defaultFetchFeatureInfoFunction(e){const t=document.createElement(\"iframe\");t.src=g(e),t.style.border=\"none\",t.style.margin=\"0\",t.style.width=\"100%\",t.setAttribute(\"sandbox\",\"\");const s=new o({title:this.title,content:t}),i=new r({sourceLayer:this,popupTemplate:s});return Promise.resolve([i])}async _fetchService(e){if(!this.resourceInfo&&this.parsedUrl?.path){const{path:t,query:r}=this.parsedUrl,{data:o}=await s(t,{query:{SERVICE:\"WMS\",REQUEST:\"GetCapabilities\",...r,...this.customParameters},responseType:\"xml\",signal:e});this.resourceInfo=D(o)}if(this.parsedUrl){const e=new b(this.parsedUrl.path),{httpsDomains:r}=t.request;\"https\"!==e.scheme||e.port&&\"443\"!==e.port||!e.host||r.includes(e.host)||r.push(e.host)}this.read(this.resourceInfo,{origin:\"service\"})}_checkLayerValidity(){if(!this.allSublayers.length)throw new n(\"wmslayer:empty-layer\",\"The layer doesn't have any sublayer\")}_mixCustomParameters(e){if(!this.customLayerParameters&&!this.customParameters)return e;const t={...this.customParameters,...this.customLayerParameters};for(const r in t)e[r.toLowerCase()]=t[r];return e}};function X(e,t){return e.some((e=>{for(const r in e)if(S(e,r,null,t))return!0;return!1}))}function Y(e,t,r){e=e??[];const o=new Map;e.every((e=>null==e.id))&&(e=p(e)).forEach(((e,t)=>e.id=t));for(const i of e){const e=new H;e.read(i,t),r&&!r.includes(e.name)&&(e.visible=!1),o.set(e.id,e)}const s=[];for(const a of e){const e=null!=a.id?o.get(a.id):null;if(e)if(null!=a.parentLayerId&&a.parentLayerId>=0){const t=o.get(a.parentLayerId);if(!t)continue;t.sublayers||(t.sublayers=new i),t.sublayers.push(e)}else s.push(e)}return s}e([w({readOnly:!0})],K.prototype,\"allSublayers\",void 0),e([w({json:{type:Object,write:!0}})],K.prototype,\"customParameters\",void 0),e([w({json:{type:Object,write:!0}})],K.prototype,\"customLayerParameters\",void 0),e([w({type:String,json:{write:!0}})],K.prototype,\"copyright\",void 0),e([w()],K.prototype,\"description\",void 0),e([w({readOnly:!0})],K.prototype,\"dimensions\",void 0),e([w({json:{type:[[Number]],read:{source:\"extent\"},write:{target:\"extent\"},origins:{\"web-document\":{write:{ignoreOrigin:!0}},\"portal-item\":{write:{ignoreOrigin:!0}}}}})],K.prototype,\"fullExtent\",void 0),e([x([\"web-document\",\"portal-item\"],\"fullExtent\",[\"extent\"])],K.prototype,\"readFullExtentFromItemOrMap\",null),e([I([\"web-document\",\"portal-item\"],\"fullExtent\",{extent:{type:[[Number]]}})],K.prototype,\"writeFullExtent\",null),e([w({type:[F]})],K.prototype,\"fullExtents\",void 0),e([w({type:String,json:{write:{ignoreOrigin:!0}}})],K.prototype,\"featureInfoFormat\",null),e([w({type:[String],readOnly:!0})],K.prototype,\"featureInfoFormats\",void 0),e([w({type:String,json:{write:{ignoreOrigin:!0}}})],K.prototype,\"featureInfoUrl\",void 0),e([w()],K.prototype,\"fetchFeatureInfoFunction\",void 0),e([w({type:String,json:{origins:{\"web-document\":{default:\"image/png\",type:J.jsonValues,read:{reader:J.read,source:\"format\"},write:{writer:J.write,target:\"format\"}}}}})],K.prototype,\"imageFormat\",void 0),e([x(\"imageFormat\",[\"supportedImageFormatTypes\"])],K.prototype,\"readImageFormat\",null),e([w({type:Number,json:{read:{source:\"maxHeight\"},write:{target:\"maxHeight\"}}})],K.prototype,\"imageMaxHeight\",void 0),e([w({type:Number,json:{read:{source:\"maxWidth\"},write:{target:\"maxWidth\"}}})],K.prototype,\"imageMaxWidth\",void 0),e([w()],K.prototype,\"imageTransparency\",void 0),e([w(N)],K.prototype,\"legendEnabled\",void 0),e([w({type:[\"show\",\"hide\",\"hide-children\"]})],K.prototype,\"listMode\",void 0),e([w({type:String,json:{write:{ignoreOrigin:!0}}})],K.prototype,\"mapUrl\",void 0),e([w({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],K.prototype,\"isReference\",void 0),e([w({type:[\"WMS\"]})],K.prototype,\"operationalLayerType\",void 0),e([w()],K.prototype,\"resourceInfo\",void 0),e([w({type:P,json:{origins:{service:{read:{source:\"extent.spatialReference\"}}},write:!1}})],K.prototype,\"spatialReference\",void 0),e([x([\"web-document\",\"portal-item\"],\"spatialReference\",[\"spatialReferences\"])],K.prototype,\"readSpatialReferenceFromItemOrDocument\",null),e([w({type:[v],json:{read:!1,origins:{service:{read:!0},\"web-document\":{read:!1,write:{ignoreOrigin:!0}},\"portal-item\":{read:!1,write:{ignoreOrigin:!0}}}}})],K.prototype,\"spatialReferences\",void 0),e([I([\"web-document\",\"portal-item\"],\"spatialReferences\")],K.prototype,\"writeSpatialReferences\",null),e([w({type:i.ofType(H),json:{write:{target:\"layers\",overridePolicy(e,t,r){if(X(this.allSublayers,r))return{ignoreOrigin:!0}}}}})],K.prototype,\"sublayers\",void 0),e([x([\"web-document\",\"portal-item\"],\"sublayers\",[\"layers\",\"visibleLayers\"])],K.prototype,\"readSublayersFromItemOrMap\",null),e([x(\"service\",\"sublayers\",[\"layers\"])],K.prototype,\"readSublayers\",null),e([I(\"sublayers\",{layers:{type:[H]},visibleLayers:{type:[String]}})],K.prototype,\"writeSublayers\",null),e([w({json:{read:!1},readOnly:!0,value:\"wms\"})],K.prototype,\"type\",void 0),e([w($)],K.prototype,\"url\",null),e([w({type:String,json:{write:{ignoreOrigin:!0}}})],K.prototype,\"version\",void 0),K=e([j(\"esri.layers.WMSLayer\")],K);const Z=K;export{Z as default};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}