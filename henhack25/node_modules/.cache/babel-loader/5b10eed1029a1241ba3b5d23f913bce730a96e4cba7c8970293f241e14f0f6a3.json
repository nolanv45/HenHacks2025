{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from \"../../request.js\";\nimport t from \"../../core/Error.js\";\nimport { cache as r, find as n } from \"../../core/iteratorUtils.js\";\nimport { isHTTPSProtocol as a, hasSameOrigin as o, toHTTPS as i } from \"../../core/urlUtils.js\";\nimport s from \"../../geometry/Extent.js\";\nimport { initializeProjection as u, project as p } from \"../../geometry/projection.js\";\nimport l from \"../../geometry/SpatialReference.js\";\nimport { wgs84 as c, equals as m } from \"../../geometry/support/spatialReferenceUtils.js\";\nimport { featureGeometryTypeKebabDictionary as f } from \"../../geometry/support/typeUtils.js\";\nimport { getGeometryType as y } from \"../graphics/sources/geojson/geojson.js\";\nimport { visitXML as d, iterateXML as g } from \"./xmlUtils.js\";\nimport { isArcGISUrl as w } from \"../support/arcgisLayerUrl.js\";\nimport b from \"../support/Field.js\";\nimport { getFieldDefaultLength as h } from \"../support/fieldUtils.js\";\nconst T = \"xlink:href\",\n  F = \"2.0.0\",\n  S = \"__esri_wfs_id__\",\n  x = \"wfs-layer:getWFSLayerTypeInfo-error\",\n  E = \"wfs-layer:empty-service\",\n  C = \"wfs-layer:feature-type-not-found\",\n  R = \"wfs-layer:geojson-not-supported\",\n  k = \"wfs-layer:kvp-encoding-not-supported\",\n  P = \"wfs-layer:malformed-json\",\n  j = \"wfs-layer:unknown-geometry-type\",\n  A = \"wfs-layer:unknown-field-type\",\n  N = \"wfs-layer:unsupported-spatial-reference\",\n  G = \"wfs-layer:unsupported-wfs-version\";\nasync function v(t, r) {\n  const n = U((await e(t, {\n    responseType: \"text\",\n    query: {\n      SERVICE: \"WFS\",\n      REQUEST: \"GetCapabilities\",\n      VERSION: F,\n      ...r?.customParameters\n    },\n    signal: r?.signal\n  })).data);\n  return L(t, n), n;\n}\nfunction U(e) {\n  const t = te(e);\n  ne(t), ae(t);\n  const n = t.firstElementChild,\n    a = r(O(n));\n  return {\n    operations: D(n),\n    get featureTypes() {\n      return Array.from(a());\n    },\n    readFeatureTypes: a\n  };\n}\nconst I = [\"json\", \"application/json\", \"geojson\", \"application/json; subtype=geojson\", \"application/geo+json\"];\nfunction M(e) {\n  for (const t of I) {\n    const r = e.findIndex(e => e.toLowerCase() === t);\n    if (r >= 0) return e[r];\n  }\n  return null;\n}\nfunction D(e) {\n  let r = !1;\n  const n = {\n      GetCapabilities: {\n        url: \"\"\n      },\n      DescribeFeatureType: {\n        url: \"\"\n      },\n      GetFeature: {\n        url: \"\",\n        outputFormat: null,\n        supportsPagination: !1\n      }\n    },\n    a = [],\n    o = [];\n  if (d(e, {\n    OperationsMetadata: {\n      Parameter: e => {\n        if (\"outputFormat\" === e.getAttribute(\"name\")) return {\n          AllowedValues: {\n            Value: _ref => {\n              let {\n                textContent: e\n              } = _ref;\n              e && a.push(e);\n            }\n          }\n        };\n      },\n      Operation: e => {\n        switch (e.getAttribute(\"name\")) {\n          case \"GetCapabilities\":\n            return {\n              DCP: {\n                HTTP: {\n                  Get: e => {\n                    n.GetCapabilities.url = e.getAttribute(T);\n                  }\n                }\n              }\n            };\n          case \"DescribeFeatureType\":\n            return {\n              DCP: {\n                HTTP: {\n                  Get: e => {\n                    n.DescribeFeatureType.url = e.getAttribute(T);\n                  }\n                }\n              }\n            };\n          case \"GetFeature\":\n            return {\n              DCP: {\n                HTTP: {\n                  Get: e => {\n                    n.GetFeature.url = e.getAttribute(T);\n                  }\n                }\n              },\n              Parameter: e => {\n                if (\"outputFormat\" === e.getAttribute(\"name\")) return {\n                  AllowedValues: {\n                    Value: _ref2 => {\n                      let {\n                        textContent: e\n                      } = _ref2;\n                      e && o.push(e);\n                    }\n                  }\n                };\n              }\n            };\n        }\n      },\n      Constraint: e => {\n        switch (e.getAttribute(\"name\")) {\n          case \"KVPEncoding\":\n            return {\n              DefaultValue: e => {\n                r = \"true\" === e.textContent.toLowerCase();\n              }\n            };\n          case \"ImplementsResultPaging\":\n            return {\n              DefaultValue: e => {\n                n.GetFeature.supportsPagination = \"true\" === e.textContent.toLowerCase();\n              }\n            };\n        }\n      }\n    }\n  }), n.GetFeature.outputFormat = M(o) ?? M(a), !r) throw new t(k, \"WFS service doesn't support key/value pair (KVP) encoding\");\n  if (null == n.GetFeature.outputFormat) throw new t(R, \"WFS service doesn't support GeoJSON output format\");\n  return n;\n}\nfunction L(e, t) {\n  a(e) && (o(e, t.operations.DescribeFeatureType.url, !0) && (t.operations.DescribeFeatureType.url = i(t.operations.DescribeFeatureType.url)), o(e, t.operations.GetFeature.url, !0) && (t.operations.GetFeature.url = i(t.operations.GetFeature.url)));\n}\nfunction V(e) {\n  const t = parseInt(e.textContent?.match(/(?<wkid>\\d+$)/i)?.groups?.wkid ?? \"\", 10);\n  if (!Number.isNaN(t)) return t;\n}\nfunction O(e) {\n  return g(e, {\n    FeatureTypeList: {\n      FeatureType: e => {\n        const t = {\n            typeName: \"undefined:undefined\",\n            name: \"\",\n            title: \"\",\n            description: \"\",\n            extent: null,\n            namespacePrefix: \"\",\n            namespaceUri: \"\",\n            defaultSpatialReference: 4326,\n            supportedSpatialReferences: []\n          },\n          r = new Set();\n        return d(e, {\n          Name: e => {\n            const {\n              name: r,\n              prefix: n\n            } = re(e.textContent);\n            t.typeName = `${n}:${r}`, t.name = r, t.namespacePrefix = n, t.namespaceUri = e.lookupNamespaceURI(n);\n          },\n          Abstract: e => {\n            t.description = e.textContent;\n          },\n          Title: e => {\n            t.title = e.textContent;\n          },\n          WGS84BoundingBox: e => {\n            t.extent = s.fromJSON($(e));\n          },\n          DefaultCRS: e => {\n            const n = V(e);\n            n && (t.defaultSpatialReference = n, r.add(n));\n          },\n          OtherCRS: e => {\n            const t = V(e);\n            t && r.add(t);\n          }\n        }), t.title || (t.title = t.name), r.add(4326), t.supportedSpatialReferences.push(...r), t;\n      }\n    }\n  });\n}\nfunction $(e) {\n  let t, r, n, a;\n  for (const o of e.children) switch (o.localName) {\n    case \"LowerCorner\":\n      [t, r] = o.textContent.split(\" \").map(e => Number.parseFloat(e));\n      break;\n    case \"UpperCorner\":\n      [n, a] = o.textContent.split(\" \").map(e => Number.parseFloat(e));\n  }\n  return {\n    xmin: t,\n    ymin: r,\n    xmax: n,\n    ymax: a,\n    spatialReference: c\n  };\n}\nfunction Y(e, t, r) {\n  return n(e, e => r ? e.name === t && e.namespaceUri === r : e.typeName === t || e.name === t);\n}\nasync function W(e, t, r) {\n  let n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  const {\n      featureType: a,\n      extent: o\n    } = await X(e, t, r, n),\n    {\n      spatialReference: i\n    } = oe(e.operations.GetFeature.url, a, n.spatialReference),\n    {\n      fields: s,\n      geometryType: u,\n      swapXY: p,\n      objectIdField: c,\n      geometryField: m\n    } = await q(e, a, i, n);\n  return {\n    url: e.operations.GetCapabilities.url,\n    name: a.name,\n    namespaceUri: a.namespaceUri,\n    fields: s,\n    geometryField: m,\n    geometryType: u,\n    objectIdField: c,\n    spatialReference: n.spatialReference ?? new l({\n      wkid: a.defaultSpatialReference\n    }),\n    extent: o,\n    swapXY: p,\n    wfsCapabilities: e,\n    customParameters: n.customParameters\n  };\n}\nasync function X(e, r, n) {\n  let a = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  const o = e.readFeatureTypes(),\n    i = r ? Y(o, r, n) : o.next().value,\n    {\n      spatialReference: s = new l({\n        wkid: i?.defaultSpatialReference\n      })\n    } = a;\n  if (null == i) throw r ? new t(C, `The type '${r}' could not be found in the service`) : new t(E, \"The service is empty\");\n  let c = i.extent;\n  if (c && !m(c.spatialReference, s)) try {\n    await u(c.spatialReference, s, void 0, a), c = p(c, s);\n  } catch {\n    throw new t(N, \"Projection not supported\");\n  }\n  return {\n    extent: c,\n    spatialReference: s,\n    featureType: i\n  };\n}\nasync function q(e, r, n) {\n  let a = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  const {\n      typeName: o\n    } = r,\n    [i, s] = await Promise.allSettled([J(e.operations.DescribeFeatureType.url, o, a), _(e, o, n, a)]),\n    u = e => new t(x, `An error occurred while getting info about the feature type '${o}'`, {\n      error: e\n    });\n  if (\"rejected\" === i.status) throw u(i.reason);\n  if (\"rejected\" === s.status) throw u(s.reason);\n  const {\n      fields: p,\n      errors: l\n    } = i.value ?? {},\n    c = i.value?.geometryType || s.value?.geometryType,\n    m = s.value?.swapXY ?? !1;\n  if (null == c) throw new t(j, `The geometry type could not be determined for type '${o}`, {\n    typeName: o,\n    geometryType: c,\n    fields: p,\n    errors: l\n  });\n  return {\n    ...z(p ?? []),\n    geometryType: c,\n    swapXY: m\n  };\n}\nfunction z(e) {\n  const t = e.find(e => \"geometry\" === e.type);\n  let r = e.find(e => \"oid\" === e.type);\n  return e = e.filter(e => \"geometry\" !== e.type), r || (r = new b({\n    name: S,\n    type: \"oid\",\n    alias: S\n  }), e.unshift(r)), {\n    geometryField: t?.name ?? null,\n    objectIdField: r.name,\n    fields: e\n  };\n}\nasync function _(t, r, n) {\n  let a = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  let o,\n    i = !1;\n  const [s, u] = await Promise.all([K(t.operations.GetFeature.url, r, n, t.operations.GetFeature.outputFormat, {\n      ...a,\n      count: 1\n    }), e(t.operations.GetFeature.url, {\n      responseType: \"text\",\n      query: Z(r, n, void 0, {\n        ...a,\n        count: 1\n      }),\n      signal: a?.signal\n    })]),\n    p = \"FeatureCollection\" === s.type && s.features[0]?.geometry;\n  if (p) {\n    let e;\n    switch (o = f.fromJSON(y(p.type)), p.type) {\n      case \"Point\":\n        e = p.coordinates;\n        break;\n      case \"LineString\":\n      case \"MultiPoint\":\n        e = p.coordinates[0];\n        break;\n      case \"MultiLineString\":\n      case \"Polygon\":\n        e = p.coordinates[0][0];\n        break;\n      case \"MultiPolygon\":\n        e = p.coordinates[0][0][0];\n    }\n    const t = /<[^>]*pos[^>]*> *(-?\\d+(?:\\.\\d+)?) (-?\\d+(?:\\.\\d+)?)/.exec(u.data);\n    if (t) {\n      const r = e[0].toFixed(3),\n        n = e[1].toFixed(3),\n        a = parseFloat(t[1]).toFixed(3);\n      r === parseFloat(t[2]).toFixed(3) && n === a && (i = !0);\n    }\n  }\n  return {\n    geometryType: o,\n    swapXY: i\n  };\n}\nasync function J(t, r, n) {\n  return Q(r, (await e(t, {\n    responseType: \"text\",\n    query: {\n      SERVICE: \"WFS\",\n      REQUEST: \"DescribeFeatureType\",\n      VERSION: F,\n      TYPENAME: r,\n      TYPENAMES: r,\n      ...n?.customParameters\n    },\n    signal: n?.signal\n  })).data);\n}\nfunction Q(e, r) {\n  const {\n      name: a\n    } = re(e),\n    o = te(r);\n  ae(o);\n  const i = n(g(o.firstElementChild, {\n    element: e => e\n  }), e => e.getAttribute(\"name\") === a);\n  if (null != i) {\n    const e = i.getAttribute(\"type\"),\n      t = e ? n(g(o.firstElementChild, {\n        complexType: e => e\n      }), t => t.getAttribute(\"name\") === re(e).name) : n(g(i, {\n        complexType: e => e\n      }), () => !0);\n    if (t) return B(t);\n  }\n  throw new t(C, `Type '${e}' not found in document`, {\n    document: new XMLSerializer().serializeToString(o)\n  });\n}\nconst H = new Set([\"objectid\", \"fid\"]);\nfunction B(e) {\n  const r = [],\n    n = [];\n  let a;\n  const o = g(e, {\n    complexContent: {\n      extension: {\n        sequence: {\n          element: e => e\n        }\n      }\n    }\n  });\n  for (const i of o) {\n    const o = i.getAttribute(\"name\");\n    if (!o) continue;\n    let s, u;\n    if (i.hasAttribute(\"type\") ? s = re(i.getAttribute(\"type\")).name : d(i, {\n      simpleType: {\n        restriction: e => (s = re(e.getAttribute(\"base\")).name, {\n          maxLength: e => {\n            u = +e.getAttribute(\"value\");\n          }\n        })\n      }\n    }), !s) continue;\n    const p = \"true\" === i.getAttribute(\"nillable\");\n    let l = !1;\n    switch (s.toLowerCase()) {\n      case \"integer\":\n      case \"nonpositiveinteger\":\n      case \"negativeinteger\":\n      case \"long\":\n      case \"int\":\n      case \"short\":\n      case \"byte\":\n      case \"nonnegativeinteger\":\n      case \"unsignedlong\":\n      case \"unsignedint\":\n      case \"unsignedshort\":\n      case \"unsignedbyte\":\n      case \"positiveinteger\":\n        n.push(new b({\n          name: o,\n          alias: o,\n          type: \"integer\",\n          nullable: p,\n          length: h(\"integer\")\n        }));\n        break;\n      case \"float\":\n      case \"double\":\n      case \"decimal\":\n        n.push(new b({\n          name: o,\n          alias: o,\n          type: \"double\",\n          nullable: p,\n          length: h(\"double\")\n        }));\n        break;\n      case \"boolean\":\n      case \"string\":\n      case \"gyearmonth\":\n      case \"gyear\":\n      case \"gmonthday\":\n      case \"gday\":\n      case \"gmonth\":\n      case \"anyuri\":\n      case \"qname\":\n      case \"notation\":\n      case \"normalizedstring\":\n      case \"token\":\n      case \"language\":\n      case \"idrefs\":\n      case \"entities\":\n      case \"nmtoken\":\n      case \"nmtokens\":\n      case \"name\":\n      case \"ncname\":\n      case \"id\":\n      case \"idref\":\n      case \"entity\":\n      case \"duration\":\n      case \"time\":\n        n.push(new b({\n          name: o,\n          alias: o,\n          type: \"string\",\n          nullable: p,\n          length: u ?? h(\"string\")\n        }));\n        break;\n      case \"datetime\":\n      case \"date\":\n        n.push(new b({\n          name: o,\n          alias: o,\n          type: \"date\",\n          nullable: p,\n          length: u ?? h(\"date\")\n        }));\n        break;\n      case \"pointpropertytype\":\n        a = \"point\", l = !0;\n        break;\n      case \"multipointpropertytype\":\n        a = \"multipoint\", l = !0;\n        break;\n      case \"curvepropertytype\":\n      case \"multicurvepropertytype\":\n      case \"multilinestringpropertytype\":\n        a = \"polyline\", l = !0;\n        break;\n      case \"surfacepropertytype\":\n      case \"multisurfacepropertytype\":\n      case \"multipolygonpropertytype\":\n        a = \"polygon\", l = !0;\n        break;\n      case \"geometrypropertytype\":\n      case \"multigeometrypropertytype\":\n        l = !0, r.push(new t(j, `geometry type '${s}' is not supported`, {\n          type: new XMLSerializer().serializeToString(e)\n        }));\n        break;\n      default:\n        r.push(new t(A, `Unknown field type '${s}'`, {\n          type: new XMLSerializer().serializeToString(e)\n        }));\n    }\n    l && n.push(new b({\n      name: o,\n      alias: o,\n      type: \"geometry\",\n      nullable: p\n    }));\n  }\n  for (const t of n) if (\"integer\" === t.type && !t.nullable && H.has(t.name.toLowerCase())) {\n    t.type = \"oid\";\n    break;\n  }\n  return {\n    geometryType: a,\n    fields: n,\n    errors: r\n  };\n}\nasync function K(r, n, a, o, i) {\n  let {\n    data: s\n  } = await e(r, {\n    responseType: \"text\",\n    query: Z(n, a, o, i),\n    signal: i?.signal\n  });\n  s = s.replaceAll(/\": +(-?\\d+),(\\d+)(,)?/g, '\": $1.$2$3');\n  try {\n    return JSON.parse(s);\n  } catch (u) {\n    throw new t(P, \"Error while parsing the response\", {\n      response: s,\n      error: u\n    });\n  }\n}\nfunction Z(e, t, r, n) {\n  const a = \"number\" == typeof t ? t : t.wkid;\n  return {\n    SERVICE: \"WFS\",\n    REQUEST: \"GetFeature\",\n    VERSION: F,\n    TYPENAMES: e,\n    OUTPUTFORMAT: r,\n    SRSNAME: \"EPSG:\" + a,\n    STARTINDEX: n?.startIndex,\n    COUNT: n?.count,\n    ...n?.customParameters\n  };\n}\nasync function ee(t, r, n) {\n  const a = await e(t, {\n      responseType: \"text\",\n      query: {\n        SERVICE: \"WFS\",\n        REQUEST: \"GetFeature\",\n        VERSION: F,\n        TYPENAMES: r,\n        RESULTTYPE: \"hits\",\n        ...n?.customParameters\n      },\n      signal: n?.signal\n    }),\n    o = /numberMatched=[\"'](?<numberMatched>\\d+)[\"']/gi.exec(a.data);\n  if (o?.groups) return +o.groups.numberMatched;\n}\nfunction te(e) {\n  return new DOMParser().parseFromString(e.trim(), \"text/xml\");\n}\nfunction re(e) {\n  const [t, r] = e.split(\":\");\n  return {\n    prefix: r ? t : \"\",\n    name: r ?? t\n  };\n}\nfunction ne(e) {\n  const r = e.firstElementChild?.getAttribute(\"version\");\n  if (r && r !== F) throw new t(G, `Unsupported WFS version ${r}. Supported version: ${F}`);\n}\nfunction ae(e) {\n  let r = \"\",\n    n = \"\";\n  if (d(e.firstElementChild, {\n    Exception: e => (r = e.getAttribute(\"exceptionCode\"), {\n      ExceptionText: e => {\n        n = e.textContent;\n      }\n    })\n  }), r) throw new t(`wfs-layer:${r}`, n);\n}\nfunction oe(e, t, r) {\n  const n = {\n      wkid: t.defaultSpatialReference\n    },\n    a = null != r?.wkid ? {\n      wkid: r.wkid\n    } : n;\n  return {\n    spatialReference: a,\n    getFeatureSpatialReference: w(e) || a.wkid && t.supportedSpatialReferences.includes(a.wkid) ? {\n      wkid: a.wkid\n    } : {\n      wkid: t.defaultSpatialReference\n    }\n  };\n}\nexport { J as describeFeatureType, Y as findFeatureType, v as getCapabilities, K as getFeature, ee as getFeatureCount, X as getFeatureTypeInfo, oe as getGetFeatureSpatialReference, W as getWFSLayerInfo, Q as parseDescribeFeatureTypeResponse, U as parseGetCapabilitiesResponse, z as prepareWFSLayerFields, S as wfsOidFieldName };","map":{"version":3,"names":["e","t","cache","r","find","n","isHTTPSProtocol","a","hasSameOrigin","o","toHTTPS","i","s","initializeProjection","u","project","p","l","wgs84","c","equals","m","featureGeometryTypeKebabDictionary","f","getGeometryType","y","visitXML","d","iterateXML","g","isArcGISUrl","w","b","getFieldDefaultLength","h","T","F","S","x","E","C","R","k","P","j","A","N","G","v","U","responseType","query","SERVICE","REQUEST","VERSION","customParameters","signal","data","L","te","ne","ae","firstElementChild","O","operations","D","featureTypes","Array","from","readFeatureTypes","I","M","findIndex","toLowerCase","GetCapabilities","url","DescribeFeatureType","GetFeature","outputFormat","supportsPagination","OperationsMetadata","Parameter","getAttribute","AllowedValues","Value","_ref","textContent","push","Operation","DCP","HTTP","Get","_ref2","Constraint","DefaultValue","V","parseInt","match","groups","wkid","Number","isNaN","FeatureTypeList","FeatureType","typeName","name","title","description","extent","namespacePrefix","namespaceUri","defaultSpatialReference","supportedSpatialReferences","Set","Name","prefix","re","lookupNamespaceURI","Abstract","Title","WGS84BoundingBox","fromJSON","$","DefaultCRS","add","OtherCRS","children","localName","split","map","parseFloat","xmin","ymin","xmax","ymax","spatialReference","Y","W","arguments","length","undefined","featureType","X","oe","fields","geometryType","swapXY","objectIdField","geometryField","q","wfsCapabilities","next","value","Promise","allSettled","J","_","error","status","reason","errors","z","type","filter","alias","unshift","all","K","count","Z","features","geometry","coordinates","exec","toFixed","Q","TYPENAME","TYPENAMES","element","complexType","B","document","XMLSerializer","serializeToString","H","complexContent","extension","sequence","hasAttribute","simpleType","restriction","maxLength","nullable","has","replaceAll","JSON","parse","response","OUTPUTFORMAT","SRSNAME","STARTINDEX","startIndex","COUNT","ee","RESULTTYPE","numberMatched","DOMParser","parseFromString","trim","Exception","ExceptionText","getFeatureSpatialReference","includes","describeFeatureType","findFeatureType","getCapabilities","getFeature","getFeatureCount","getFeatureTypeInfo","getGetFeatureSpatialReference","getWFSLayerInfo","parseDescribeFeatureTypeResponse","parseGetCapabilitiesResponse","prepareWFSLayerFields","wfsOidFieldName"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/layers/ogc/wfsUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import t from\"../../core/Error.js\";import{cache as r,find as n}from\"../../core/iteratorUtils.js\";import{isHTTPSProtocol as a,hasSameOrigin as o,toHTTPS as i}from\"../../core/urlUtils.js\";import s from\"../../geometry/Extent.js\";import{initializeProjection as u,project as p}from\"../../geometry/projection.js\";import l from\"../../geometry/SpatialReference.js\";import{wgs84 as c,equals as m}from\"../../geometry/support/spatialReferenceUtils.js\";import{featureGeometryTypeKebabDictionary as f}from\"../../geometry/support/typeUtils.js\";import{getGeometryType as y}from\"../graphics/sources/geojson/geojson.js\";import{visitXML as d,iterateXML as g}from\"./xmlUtils.js\";import{isArcGISUrl as w}from\"../support/arcgisLayerUrl.js\";import b from\"../support/Field.js\";import{getFieldDefaultLength as h}from\"../support/fieldUtils.js\";const T=\"xlink:href\",F=\"2.0.0\",S=\"__esri_wfs_id__\",x=\"wfs-layer:getWFSLayerTypeInfo-error\",E=\"wfs-layer:empty-service\",C=\"wfs-layer:feature-type-not-found\",R=\"wfs-layer:geojson-not-supported\",k=\"wfs-layer:kvp-encoding-not-supported\",P=\"wfs-layer:malformed-json\",j=\"wfs-layer:unknown-geometry-type\",A=\"wfs-layer:unknown-field-type\",N=\"wfs-layer:unsupported-spatial-reference\",G=\"wfs-layer:unsupported-wfs-version\";async function v(t,r){const n=U((await e(t,{responseType:\"text\",query:{SERVICE:\"WFS\",REQUEST:\"GetCapabilities\",VERSION:F,...r?.customParameters},signal:r?.signal})).data);return L(t,n),n}function U(e){const t=te(e);ne(t),ae(t);const n=t.firstElementChild,a=r(O(n));return{operations:D(n),get featureTypes(){return Array.from(a())},readFeatureTypes:a}}const I=[\"json\",\"application/json\",\"geojson\",\"application/json; subtype=geojson\",\"application/geo+json\"];function M(e){for(const t of I){const r=e.findIndex((e=>e.toLowerCase()===t));if(r>=0)return e[r]}return null}function D(e){let r=!1;const n={GetCapabilities:{url:\"\"},DescribeFeatureType:{url:\"\"},GetFeature:{url:\"\",outputFormat:null,supportsPagination:!1}},a=[],o=[];if(d(e,{OperationsMetadata:{Parameter:e=>{if(\"outputFormat\"===e.getAttribute(\"name\"))return{AllowedValues:{Value:({textContent:e})=>{e&&a.push(e)}}}},Operation:e=>{switch(e.getAttribute(\"name\")){case\"GetCapabilities\":return{DCP:{HTTP:{Get:e=>{n.GetCapabilities.url=e.getAttribute(T)}}}};case\"DescribeFeatureType\":return{DCP:{HTTP:{Get:e=>{n.DescribeFeatureType.url=e.getAttribute(T)}}}};case\"GetFeature\":return{DCP:{HTTP:{Get:e=>{n.GetFeature.url=e.getAttribute(T)}}},Parameter:e=>{if(\"outputFormat\"===e.getAttribute(\"name\"))return{AllowedValues:{Value:({textContent:e})=>{e&&o.push(e)}}}}}}},Constraint:e=>{switch(e.getAttribute(\"name\")){case\"KVPEncoding\":return{DefaultValue:e=>{r=\"true\"===e.textContent.toLowerCase()}};case\"ImplementsResultPaging\":return{DefaultValue:e=>{n.GetFeature.supportsPagination=\"true\"===e.textContent.toLowerCase()}}}}}}),n.GetFeature.outputFormat=M(o)??M(a),!r)throw new t(k,\"WFS service doesn't support key/value pair (KVP) encoding\");if(null==n.GetFeature.outputFormat)throw new t(R,\"WFS service doesn't support GeoJSON output format\");return n}function L(e,t){a(e)&&(o(e,t.operations.DescribeFeatureType.url,!0)&&(t.operations.DescribeFeatureType.url=i(t.operations.DescribeFeatureType.url)),o(e,t.operations.GetFeature.url,!0)&&(t.operations.GetFeature.url=i(t.operations.GetFeature.url)))}function V(e){const t=parseInt(e.textContent?.match(/(?<wkid>\\d+$)/i)?.groups?.wkid??\"\",10);if(!Number.isNaN(t))return t}function O(e){return g(e,{FeatureTypeList:{FeatureType:e=>{const t={typeName:\"undefined:undefined\",name:\"\",title:\"\",description:\"\",extent:null,namespacePrefix:\"\",namespaceUri:\"\",defaultSpatialReference:4326,supportedSpatialReferences:[]},r=new Set;return d(e,{Name:e=>{const{name:r,prefix:n}=re(e.textContent);t.typeName=`${n}:${r}`,t.name=r,t.namespacePrefix=n,t.namespaceUri=e.lookupNamespaceURI(n)},Abstract:e=>{t.description=e.textContent},Title:e=>{t.title=e.textContent},WGS84BoundingBox:e=>{t.extent=s.fromJSON($(e))},DefaultCRS:e=>{const n=V(e);n&&(t.defaultSpatialReference=n,r.add(n))},OtherCRS:e=>{const t=V(e);t&&r.add(t)}}),t.title||(t.title=t.name),r.add(4326),t.supportedSpatialReferences.push(...r),t}}})}function $(e){let t,r,n,a;for(const o of e.children)switch(o.localName){case\"LowerCorner\":[t,r]=o.textContent.split(\" \").map((e=>Number.parseFloat(e)));break;case\"UpperCorner\":[n,a]=o.textContent.split(\" \").map((e=>Number.parseFloat(e)))}return{xmin:t,ymin:r,xmax:n,ymax:a,spatialReference:c}}function Y(e,t,r){return n(e,(e=>r?e.name===t&&e.namespaceUri===r:e.typeName===t||e.name===t))}async function W(e,t,r,n={}){const{featureType:a,extent:o}=await X(e,t,r,n),{spatialReference:i}=oe(e.operations.GetFeature.url,a,n.spatialReference),{fields:s,geometryType:u,swapXY:p,objectIdField:c,geometryField:m}=await q(e,a,i,n);return{url:e.operations.GetCapabilities.url,name:a.name,namespaceUri:a.namespaceUri,fields:s,geometryField:m,geometryType:u,objectIdField:c,spatialReference:n.spatialReference??new l({wkid:a.defaultSpatialReference}),extent:o,swapXY:p,wfsCapabilities:e,customParameters:n.customParameters}}async function X(e,r,n,a={}){const o=e.readFeatureTypes(),i=r?Y(o,r,n):o.next().value,{spatialReference:s=new l({wkid:i?.defaultSpatialReference})}=a;if(null==i)throw r?new t(C,`The type '${r}' could not be found in the service`):new t(E,\"The service is empty\");let c=i.extent;if(c&&!m(c.spatialReference,s))try{await u(c.spatialReference,s,void 0,a),c=p(c,s)}catch{throw new t(N,\"Projection not supported\")}return{extent:c,spatialReference:s,featureType:i}}async function q(e,r,n,a={}){const{typeName:o}=r,[i,s]=await Promise.allSettled([J(e.operations.DescribeFeatureType.url,o,a),_(e,o,n,a)]),u=e=>new t(x,`An error occurred while getting info about the feature type '${o}'`,{error:e});if(\"rejected\"===i.status)throw u(i.reason);if(\"rejected\"===s.status)throw u(s.reason);const{fields:p,errors:l}=i.value??{},c=i.value?.geometryType||s.value?.geometryType,m=s.value?.swapXY??!1;if(null==c)throw new t(j,`The geometry type could not be determined for type '${o}`,{typeName:o,geometryType:c,fields:p,errors:l});return{...z(p??[]),geometryType:c,swapXY:m}}function z(e){const t=e.find((e=>\"geometry\"===e.type));let r=e.find((e=>\"oid\"===e.type));return e=e.filter((e=>\"geometry\"!==e.type)),r||(r=new b({name:S,type:\"oid\",alias:S}),e.unshift(r)),{geometryField:t?.name??null,objectIdField:r.name,fields:e}}async function _(t,r,n,a={}){let o,i=!1;const[s,u]=await Promise.all([K(t.operations.GetFeature.url,r,n,t.operations.GetFeature.outputFormat,{...a,count:1}),e(t.operations.GetFeature.url,{responseType:\"text\",query:Z(r,n,void 0,{...a,count:1}),signal:a?.signal})]),p=\"FeatureCollection\"===s.type&&s.features[0]?.geometry;if(p){let e;switch(o=f.fromJSON(y(p.type)),p.type){case\"Point\":e=p.coordinates;break;case\"LineString\":case\"MultiPoint\":e=p.coordinates[0];break;case\"MultiLineString\":case\"Polygon\":e=p.coordinates[0][0];break;case\"MultiPolygon\":e=p.coordinates[0][0][0]}const t=/<[^>]*pos[^>]*> *(-?\\d+(?:\\.\\d+)?) (-?\\d+(?:\\.\\d+)?)/.exec(u.data);if(t){const r=e[0].toFixed(3),n=e[1].toFixed(3),a=parseFloat(t[1]).toFixed(3);r===parseFloat(t[2]).toFixed(3)&&n===a&&(i=!0)}}return{geometryType:o,swapXY:i}}async function J(t,r,n){return Q(r,(await e(t,{responseType:\"text\",query:{SERVICE:\"WFS\",REQUEST:\"DescribeFeatureType\",VERSION:F,TYPENAME:r,TYPENAMES:r,...n?.customParameters},signal:n?.signal})).data)}function Q(e,r){const{name:a}=re(e),o=te(r);ae(o);const i=n(g(o.firstElementChild,{element:e=>e}),(e=>e.getAttribute(\"name\")===a));if(null!=i){const e=i.getAttribute(\"type\"),t=e?n(g(o.firstElementChild,{complexType:e=>e}),(t=>t.getAttribute(\"name\")===re(e).name)):n(g(i,{complexType:e=>e}),(()=>!0));if(t)return B(t)}throw new t(C,`Type '${e}' not found in document`,{document:(new XMLSerializer).serializeToString(o)})}const H=new Set([\"objectid\",\"fid\"]);function B(e){const r=[],n=[];let a;const o=g(e,{complexContent:{extension:{sequence:{element:e=>e}}}});for(const i of o){const o=i.getAttribute(\"name\");if(!o)continue;let s,u;if(i.hasAttribute(\"type\")?s=re(i.getAttribute(\"type\")).name:d(i,{simpleType:{restriction:e=>(s=re(e.getAttribute(\"base\")).name,{maxLength:e=>{u=+e.getAttribute(\"value\")}})}}),!s)continue;const p=\"true\"===i.getAttribute(\"nillable\");let l=!1;switch(s.toLowerCase()){case\"integer\":case\"nonpositiveinteger\":case\"negativeinteger\":case\"long\":case\"int\":case\"short\":case\"byte\":case\"nonnegativeinteger\":case\"unsignedlong\":case\"unsignedint\":case\"unsignedshort\":case\"unsignedbyte\":case\"positiveinteger\":n.push(new b({name:o,alias:o,type:\"integer\",nullable:p,length:h(\"integer\")}));break;case\"float\":case\"double\":case\"decimal\":n.push(new b({name:o,alias:o,type:\"double\",nullable:p,length:h(\"double\")}));break;case\"boolean\":case\"string\":case\"gyearmonth\":case\"gyear\":case\"gmonthday\":case\"gday\":case\"gmonth\":case\"anyuri\":case\"qname\":case\"notation\":case\"normalizedstring\":case\"token\":case\"language\":case\"idrefs\":case\"entities\":case\"nmtoken\":case\"nmtokens\":case\"name\":case\"ncname\":case\"id\":case\"idref\":case\"entity\":case\"duration\":case\"time\":n.push(new b({name:o,alias:o,type:\"string\",nullable:p,length:u??h(\"string\")}));break;case\"datetime\":case\"date\":n.push(new b({name:o,alias:o,type:\"date\",nullable:p,length:u??h(\"date\")}));break;case\"pointpropertytype\":a=\"point\",l=!0;break;case\"multipointpropertytype\":a=\"multipoint\",l=!0;break;case\"curvepropertytype\":case\"multicurvepropertytype\":case\"multilinestringpropertytype\":a=\"polyline\",l=!0;break;case\"surfacepropertytype\":case\"multisurfacepropertytype\":case\"multipolygonpropertytype\":a=\"polygon\",l=!0;break;case\"geometrypropertytype\":case\"multigeometrypropertytype\":l=!0,r.push(new t(j,`geometry type '${s}' is not supported`,{type:(new XMLSerializer).serializeToString(e)}));break;default:r.push(new t(A,`Unknown field type '${s}'`,{type:(new XMLSerializer).serializeToString(e)}))}l&&n.push(new b({name:o,alias:o,type:\"geometry\",nullable:p}))}for(const t of n)if(\"integer\"===t.type&&!t.nullable&&H.has(t.name.toLowerCase())){t.type=\"oid\";break}return{geometryType:a,fields:n,errors:r}}async function K(r,n,a,o,i){let{data:s}=await e(r,{responseType:\"text\",query:Z(n,a,o,i),signal:i?.signal});s=s.replaceAll(/\": +(-?\\d+),(\\d+)(,)?/g,'\": $1.$2$3');try{return JSON.parse(s)}catch(u){throw new t(P,\"Error while parsing the response\",{response:s,error:u})}}function Z(e,t,r,n){const a=\"number\"==typeof t?t:t.wkid;return{SERVICE:\"WFS\",REQUEST:\"GetFeature\",VERSION:F,TYPENAMES:e,OUTPUTFORMAT:r,SRSNAME:\"EPSG:\"+a,STARTINDEX:n?.startIndex,COUNT:n?.count,...n?.customParameters}}async function ee(t,r,n){const a=await e(t,{responseType:\"text\",query:{SERVICE:\"WFS\",REQUEST:\"GetFeature\",VERSION:F,TYPENAMES:r,RESULTTYPE:\"hits\",...n?.customParameters},signal:n?.signal}),o=/numberMatched=[\"'](?<numberMatched>\\d+)[\"']/gi.exec(a.data);if(o?.groups)return+o.groups.numberMatched}function te(e){return(new DOMParser).parseFromString(e.trim(),\"text/xml\")}function re(e){const[t,r]=e.split(\":\");return{prefix:r?t:\"\",name:r??t}}function ne(e){const r=e.firstElementChild?.getAttribute(\"version\");if(r&&r!==F)throw new t(G,`Unsupported WFS version ${r}. Supported version: ${F}`)}function ae(e){let r=\"\",n=\"\";if(d(e.firstElementChild,{Exception:e=>(r=e.getAttribute(\"exceptionCode\"),{ExceptionText:e=>{n=e.textContent}})}),r)throw new t(`wfs-layer:${r}`,n)}function oe(e,t,r){const n={wkid:t.defaultSpatialReference},a=null!=r?.wkid?{wkid:r.wkid}:n;return{spatialReference:a,getFeatureSpatialReference:w(e)||a.wkid&&t.supportedSpatialReferences.includes(a.wkid)?{wkid:a.wkid}:{wkid:t.defaultSpatialReference}}}export{J as describeFeatureType,Y as findFeatureType,v as getCapabilities,K as getFeature,ee as getFeatureCount,X as getFeatureTypeInfo,oe as getGetFeatureSpatialReference,W as getWFSLayerInfo,Q as parseDescribeFeatureTypeResponse,U as parseGetCapabilitiesResponse,z as prepareWFSLayerFields,S as wfsOidFieldName};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}