{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport \"../../../../core/has.js\";\nimport { createResolver as e, throwIfAborted as t, onAbortOrThrow as s } from \"../../../../core/promiseUtils.js\";\nimport { textureUploadManagerBudget as o, textureUploadManagerChunkSize as r } from \"./definitions.js\";\nclass u {\n  constructor(e) {\n    this._queue = [], this._refreshable = e;\n  }\n  destroy() {\n    this._queue = [];\n  }\n  enqueueTextureUpdate(o, u) {\n    const n = e(),\n      h = o,\n      i = r,\n      a = Math.ceil(h.height / i);\n    t(u);\n    for (let e = 0; e < a; e++) {\n      const t = e * i,\n        s = e === a - 1,\n        r = s ? h.height - i * e : i;\n      this._queue.push({\n        type: \"chunk\",\n        request: o,\n        resolver: n,\n        chunk: e,\n        chunkOffset: t,\n        destHeight: r,\n        chunkIsLast: s,\n        options: u\n      });\n    }\n    return s(u, e => n.reject(e)), n.promise;\n  }\n  upload() {\n    const e = performance.now();\n    let t = 0;\n    for (; this._queue.length;) {\n      const s = this._queue.shift();\n      if (s) {\n        if (null != s.options.signal && s.options.signal.aborted) continue;\n        switch (s.type) {\n          case \"chunk\":\n            this._uploadChunk(s);\n            break;\n          case \"no-chunk\":\n            this._uploadNoChunk(s);\n        }\n        ++t;\n        const r = performance.now() - e;\n        if (r + r / t >= o) break;\n      }\n    }\n    this._queue.length && this._refreshable.requestRender();\n  }\n  _uploadChunk(e) {\n    const {\n        request: t,\n        resolver: s,\n        chunkOffset: o,\n        chunkIsLast: r,\n        destHeight: u\n      } = e,\n      {\n        data: n,\n        texture: h,\n        width: i\n      } = t;\n    null != n && (h.updateData(0, 0, o, i, u, n, o), r && s.resolve());\n  }\n  _uploadNoChunk(e) {\n    const {\n        request: t,\n        resolver: s\n      } = e,\n      {\n        data: o,\n        texture: r\n      } = t;\n    r.setData(o), s.resolve();\n  }\n}\nexport { u as TextureUploadManager };","map":{"version":3,"names":["createResolver","e","throwIfAborted","t","onAbortOrThrow","s","textureUploadManagerBudget","o","textureUploadManagerChunkSize","r","u","constructor","_queue","_refreshable","destroy","enqueueTextureUpdate","n","h","i","a","Math","ceil","height","push","type","request","resolver","chunk","chunkOffset","destHeight","chunkIsLast","options","reject","promise","upload","performance","now","length","shift","signal","aborted","_uploadChunk","_uploadNoChunk","requestRender","data","texture","width","updateData","resolve","setData","TextureUploadManager"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/engine/webgl/TextureUploadManager.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{createResolver as e,throwIfAborted as t,onAbortOrThrow as s}from\"../../../../core/promiseUtils.js\";import{textureUploadManagerBudget as o,textureUploadManagerChunkSize as r}from\"./definitions.js\";class u{constructor(e){this._queue=[],this._refreshable=e}destroy(){this._queue=[]}enqueueTextureUpdate(o,u){const n=e(),h=o,i=r,a=Math.ceil(h.height/i);t(u);for(let e=0;e<a;e++){const t=e*i,s=e===a-1,r=s?h.height-i*e:i;this._queue.push({type:\"chunk\",request:o,resolver:n,chunk:e,chunkOffset:t,destHeight:r,chunkIsLast:s,options:u})}return s(u,(e=>n.reject(e))),n.promise}upload(){const e=performance.now();let t=0;for(;this._queue.length;){const s=this._queue.shift();if(s){if(null!=s.options.signal&&s.options.signal.aborted)continue;switch(s.type){case\"chunk\":this._uploadChunk(s);break;case\"no-chunk\":this._uploadNoChunk(s)}++t;const r=performance.now()-e;if(r+r/t>=o)break}}this._queue.length&&this._refreshable.requestRender()}_uploadChunk(e){const{request:t,resolver:s,chunkOffset:o,chunkIsLast:r,destHeight:u}=e,{data:n,texture:h,width:i}=t;null!=n&&(h.updateData(0,0,o,i,u,n,o),r&&s.resolve())}_uploadNoChunk(e){const{request:t,resolver:s}=e,{data:o,texture:r}=t;r.setData(o),s.resolve()}}export{u as TextureUploadManager};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}