{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/languageUtils.js\";\nimport { FeatureSetError as t, FeatureSetErrorCodes as r } from \"../support/errorsupport.js\";\nimport n from \"../support/FeatureSet.js\";\nimport s from \"../support/IdSet.js\";\nimport i from \"../support/OrderbyClause.js\";\nclass a extends n {\n  constructor(e) {\n    super(e), this._orderbyclause = null, this.declaredClass = \"esri.arcade.featureset.actions.OrderBy\", this._maxProcessing = 100, this._orderbyclause = e.orderbyclause, this._parent = e.parentfeatureset;\n  }\n  async _getSet(e) {\n    if (null === this._wset) {\n      await this._ensureLoaded();\n      const t = await this._getFilteredSet(\"\", null, null, this._orderbyclause, e);\n      return this._checkCancelled(e), this._wset = t, this._wset;\n    }\n    return this._wset;\n  }\n  async manualOrderSet(e, t) {\n    const r = await this.getIdColumnDictionary(e, [], -1, t);\n    this._orderbyclause?.order(r);\n    const n = new s([], [], !0, null);\n    for (let s = 0; s < r.length; s++) n._known.push(r[s].id);\n    return n;\n  }\n  async getIdColumnDictionary(t, r, n, s) {\n    if (n < t._known.length - 1) {\n      const i = this._maxQueryRate();\n      if (\"GETPAGES\" === t._known[n + 1]) return await e(this._parent._expandPagedSet(t, i, 0, 0, s)), this.getIdColumnDictionary(t, r, n, s);\n      let a = n + 1;\n      const o = [];\n      for (; a < t._known.length && \"GETPAGES\" !== t._known[a];) o.push(t._known[a]), a++;\n      n += o.length;\n      const u = await e(this._parent._getFeatureBatch(o, s));\n      this._checkCancelled(s);\n      for (const e of u) r.push({\n        id: e.attributes[this.objectIdField],\n        feature: e\n      });\n      return this.getIdColumnDictionary(t, r, n, s);\n    }\n    return t._candidates.length > 0 ? (await e(this._refineSetBlock(t, this._maxProcessingRate(), s)), this._checkCancelled(s), this.getIdColumnDictionary(t, r, n, s)) : r;\n  }\n  _isInFeatureSet(e) {\n    return this._parent._isInFeatureSet(e);\n  }\n  _getFeatures(e, t, r, n) {\n    return this._parent._getFeatures(e, t, r, n);\n  }\n  _featureFromCache(e) {\n    if (void 0 === this._featureCache[e]) {\n      const t = this._parent._featureFromCache(e);\n      if (void 0 === t) return;\n      return null === t ? null : (this._featureCache[e] = t, t);\n    }\n    return this._featureCache[e];\n  }\n  async _fetchAndRefineFeatures() {\n    throw new t(r.NeverReach);\n  }\n  async _getFilteredSet(e, t, r, n, i) {\n    await this._ensureLoaded();\n    const a = await this._parent._getFilteredSet(e, t, r, null === n ? this._orderbyclause : n, i);\n    this._checkCancelled(i);\n    const o = new s(a._candidates.slice(), a._known.slice(), a._ordered, this._clonePageDefinition(a.pagesDefinition));\n    let u = !0;\n    if (a._candidates.length > 0 && (u = !1), !1 === o._ordered) {\n      let e = await this.manualOrderSet(o, i);\n      return !1 === u && (null === t && null === r || (e = new s(e._candidates.slice().concat(e._known.slice()), [], e._ordered, this._clonePageDefinition(e.pagesDefinition)))), e;\n    }\n    return o;\n  }\n  static registerAction() {\n    n._featuresetFunctions.orderBy = function (e) {\n      return \"\" === e ? this : new a({\n        parentfeatureset: this,\n        orderbyclause: new i(e)\n      });\n    };\n  }\n  getFieldsIndex() {\n    return this._parent.getFieldsIndex();\n  }\n}\nexport { a as default };","map":{"version":3,"names":["_","e","FeatureSetError","t","FeatureSetErrorCodes","r","n","s","i","a","constructor","_orderbyclause","declaredClass","_maxProcessing","orderbyclause","_parent","parentfeatureset","_getSet","_wset","_ensureLoaded","_getFilteredSet","_checkCancelled","manualOrderSet","getIdColumnDictionary","order","length","_known","push","id","_maxQueryRate","_expandPagedSet","o","u","_getFeatureBatch","attributes","objectIdField","feature","_candidates","_refineSetBlock","_maxProcessingRate","_isInFeatureSet","_getFeatures","_featureFromCache","_featureCache","_fetchAndRefineFeatures","NeverReach","slice","_ordered","_clonePageDefinition","pagesDefinition","concat","registerAction","_featuresetFunctions","orderBy","getFieldsIndex","default"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/arcade/featureset/actions/OrderBy.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/languageUtils.js\";import{FeatureSetError as t,FeatureSetErrorCodes as r}from\"../support/errorsupport.js\";import n from\"../support/FeatureSet.js\";import s from\"../support/IdSet.js\";import i from\"../support/OrderbyClause.js\";class a extends n{constructor(e){super(e),this._orderbyclause=null,this.declaredClass=\"esri.arcade.featureset.actions.OrderBy\",this._maxProcessing=100,this._orderbyclause=e.orderbyclause,this._parent=e.parentfeatureset}async _getSet(e){if(null===this._wset){await this._ensureLoaded();const t=await this._getFilteredSet(\"\",null,null,this._orderbyclause,e);return this._checkCancelled(e),this._wset=t,this._wset}return this._wset}async manualOrderSet(e,t){const r=await this.getIdColumnDictionary(e,[],-1,t);this._orderbyclause?.order(r);const n=new s([],[],!0,null);for(let s=0;s<r.length;s++)n._known.push(r[s].id);return n}async getIdColumnDictionary(t,r,n,s){if(n<t._known.length-1){const i=this._maxQueryRate();if(\"GETPAGES\"===t._known[n+1])return await e(this._parent._expandPagedSet(t,i,0,0,s)),this.getIdColumnDictionary(t,r,n,s);let a=n+1;const o=[];for(;a<t._known.length&&\"GETPAGES\"!==t._known[a];)o.push(t._known[a]),a++;n+=o.length;const u=await e(this._parent._getFeatureBatch(o,s));this._checkCancelled(s);for(const e of u)r.push({id:e.attributes[this.objectIdField],feature:e});return this.getIdColumnDictionary(t,r,n,s)}return t._candidates.length>0?(await e(this._refineSetBlock(t,this._maxProcessingRate(),s)),this._checkCancelled(s),this.getIdColumnDictionary(t,r,n,s)):r}_isInFeatureSet(e){return this._parent._isInFeatureSet(e)}_getFeatures(e,t,r,n){return this._parent._getFeatures(e,t,r,n)}_featureFromCache(e){if(void 0===this._featureCache[e]){const t=this._parent._featureFromCache(e);if(void 0===t)return;return null===t?null:(this._featureCache[e]=t,t)}return this._featureCache[e]}async _fetchAndRefineFeatures(){throw new t(r.NeverReach)}async _getFilteredSet(e,t,r,n,i){await this._ensureLoaded();const a=await this._parent._getFilteredSet(e,t,r,null===n?this._orderbyclause:n,i);this._checkCancelled(i);const o=new s(a._candidates.slice(),a._known.slice(),a._ordered,this._clonePageDefinition(a.pagesDefinition));let u=!0;if(a._candidates.length>0&&(u=!1),!1===o._ordered){let e=await this.manualOrderSet(o,i);return!1===u&&(null===t&&null===r||(e=new s(e._candidates.slice().concat(e._known.slice()),[],e._ordered,this._clonePageDefinition(e.pagesDefinition)))),e}return o}static registerAction(){n._featuresetFunctions.orderBy=function(e){return\"\"===e?this:new a({parentfeatureset:this,orderbyclause:new i(e)})}}getFieldsIndex(){return this._parent.getFieldsIndex()}}export{a as default};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAC,QAAK,kCAAkC;AAAC,SAAOC,eAAe,IAAIC,CAAC,EAACC,oBAAoB,IAAIC,CAAC,QAAK,4BAA4B;AAAC,OAAOC,CAAC,MAAK,0BAA0B;AAAC,OAAOC,CAAC,MAAK,qBAAqB;AAAC,OAAOC,CAAC,MAAK,6BAA6B;AAAC,MAAMC,CAAC,SAASH,CAAC;EAACI,WAAWA,CAACT,CAAC,EAAC;IAAC,KAAK,CAACA,CAAC,CAAC,EAAC,IAAI,CAACU,cAAc,GAAC,IAAI,EAAC,IAAI,CAACC,aAAa,GAAC,wCAAwC,EAAC,IAAI,CAACC,cAAc,GAAC,GAAG,EAAC,IAAI,CAACF,cAAc,GAACV,CAAC,CAACa,aAAa,EAAC,IAAI,CAACC,OAAO,GAACd,CAAC,CAACe,gBAAgB;EAAA;EAAC,MAAMC,OAAOA,CAAChB,CAAC,EAAC;IAAC,IAAG,IAAI,KAAG,IAAI,CAACiB,KAAK,EAAC;MAAC,MAAM,IAAI,CAACC,aAAa,CAAC,CAAC;MAAC,MAAMhB,CAAC,GAAC,MAAM,IAAI,CAACiB,eAAe,CAAC,EAAE,EAAC,IAAI,EAAC,IAAI,EAAC,IAAI,CAACT,cAAc,EAACV,CAAC,CAAC;MAAC,OAAO,IAAI,CAACoB,eAAe,CAACpB,CAAC,CAAC,EAAC,IAAI,CAACiB,KAAK,GAACf,CAAC,EAAC,IAAI,CAACe,KAAK;IAAA;IAAC,OAAO,IAAI,CAACA,KAAK;EAAA;EAAC,MAAMI,cAAcA,CAACrB,CAAC,EAACE,CAAC,EAAC;IAAC,MAAME,CAAC,GAAC,MAAM,IAAI,CAACkB,qBAAqB,CAACtB,CAAC,EAAC,EAAE,EAAC,CAAC,CAAC,EAACE,CAAC,CAAC;IAAC,IAAI,CAACQ,cAAc,EAAEa,KAAK,CAACnB,CAAC,CAAC;IAAC,MAAMC,CAAC,GAAC,IAAIC,CAAC,CAAC,EAAE,EAAC,EAAE,EAAC,CAAC,CAAC,EAAC,IAAI,CAAC;IAAC,KAAI,IAAIA,CAAC,GAAC,CAAC,EAACA,CAAC,GAACF,CAAC,CAACoB,MAAM,EAAClB,CAAC,EAAE,EAACD,CAAC,CAACoB,MAAM,CAACC,IAAI,CAACtB,CAAC,CAACE,CAAC,CAAC,CAACqB,EAAE,CAAC;IAAC,OAAOtB,CAAC;EAAA;EAAC,MAAMiB,qBAAqBA,CAACpB,CAAC,EAACE,CAAC,EAACC,CAAC,EAACC,CAAC,EAAC;IAAC,IAAGD,CAAC,GAACH,CAAC,CAACuB,MAAM,CAACD,MAAM,GAAC,CAAC,EAAC;MAAC,MAAMjB,CAAC,GAAC,IAAI,CAACqB,aAAa,CAAC,CAAC;MAAC,IAAG,UAAU,KAAG1B,CAAC,CAACuB,MAAM,CAACpB,CAAC,GAAC,CAAC,CAAC,EAAC,OAAO,MAAML,CAAC,CAAC,IAAI,CAACc,OAAO,CAACe,eAAe,CAAC3B,CAAC,EAACK,CAAC,EAAC,CAAC,EAAC,CAAC,EAACD,CAAC,CAAC,CAAC,EAAC,IAAI,CAACgB,qBAAqB,CAACpB,CAAC,EAACE,CAAC,EAACC,CAAC,EAACC,CAAC,CAAC;MAAC,IAAIE,CAAC,GAACH,CAAC,GAAC,CAAC;MAAC,MAAMyB,CAAC,GAAC,EAAE;MAAC,OAAKtB,CAAC,GAACN,CAAC,CAACuB,MAAM,CAACD,MAAM,IAAE,UAAU,KAAGtB,CAAC,CAACuB,MAAM,CAACjB,CAAC,CAAC,GAAEsB,CAAC,CAACJ,IAAI,CAACxB,CAAC,CAACuB,MAAM,CAACjB,CAAC,CAAC,CAAC,EAACA,CAAC,EAAE;MAACH,CAAC,IAAEyB,CAAC,CAACN,MAAM;MAAC,MAAMO,CAAC,GAAC,MAAM/B,CAAC,CAAC,IAAI,CAACc,OAAO,CAACkB,gBAAgB,CAACF,CAAC,EAACxB,CAAC,CAAC,CAAC;MAAC,IAAI,CAACc,eAAe,CAACd,CAAC,CAAC;MAAC,KAAI,MAAMN,CAAC,IAAI+B,CAAC,EAAC3B,CAAC,CAACsB,IAAI,CAAC;QAACC,EAAE,EAAC3B,CAAC,CAACiC,UAAU,CAAC,IAAI,CAACC,aAAa,CAAC;QAACC,OAAO,EAACnC;MAAC,CAAC,CAAC;MAAC,OAAO,IAAI,CAACsB,qBAAqB,CAACpB,CAAC,EAACE,CAAC,EAACC,CAAC,EAACC,CAAC,CAAC;IAAA;IAAC,OAAOJ,CAAC,CAACkC,WAAW,CAACZ,MAAM,GAAC,CAAC,IAAE,MAAMxB,CAAC,CAAC,IAAI,CAACqC,eAAe,CAACnC,CAAC,EAAC,IAAI,CAACoC,kBAAkB,CAAC,CAAC,EAAChC,CAAC,CAAC,CAAC,EAAC,IAAI,CAACc,eAAe,CAACd,CAAC,CAAC,EAAC,IAAI,CAACgB,qBAAqB,CAACpB,CAAC,EAACE,CAAC,EAACC,CAAC,EAACC,CAAC,CAAC,IAAEF,CAAC;EAAA;EAACmC,eAAeA,CAACvC,CAAC,EAAC;IAAC,OAAO,IAAI,CAACc,OAAO,CAACyB,eAAe,CAACvC,CAAC,CAAC;EAAA;EAACwC,YAAYA,CAACxC,CAAC,EAACE,CAAC,EAACE,CAAC,EAACC,CAAC,EAAC;IAAC,OAAO,IAAI,CAACS,OAAO,CAAC0B,YAAY,CAACxC,CAAC,EAACE,CAAC,EAACE,CAAC,EAACC,CAAC,CAAC;EAAA;EAACoC,iBAAiBA,CAACzC,CAAC,EAAC;IAAC,IAAG,KAAK,CAAC,KAAG,IAAI,CAAC0C,aAAa,CAAC1C,CAAC,CAAC,EAAC;MAAC,MAAME,CAAC,GAAC,IAAI,CAACY,OAAO,CAAC2B,iBAAiB,CAACzC,CAAC,CAAC;MAAC,IAAG,KAAK,CAAC,KAAGE,CAAC,EAAC;MAAO,OAAO,IAAI,KAAGA,CAAC,GAAC,IAAI,IAAE,IAAI,CAACwC,aAAa,CAAC1C,CAAC,CAAC,GAACE,CAAC,EAACA,CAAC,CAAC;IAAA;IAAC,OAAO,IAAI,CAACwC,aAAa,CAAC1C,CAAC,CAAC;EAAA;EAAC,MAAM2C,uBAAuBA,CAAA,EAAE;IAAC,MAAM,IAAIzC,CAAC,CAACE,CAAC,CAACwC,UAAU,CAAC;EAAA;EAAC,MAAMzB,eAAeA,CAACnB,CAAC,EAACE,CAAC,EAACE,CAAC,EAACC,CAAC,EAACE,CAAC,EAAC;IAAC,MAAM,IAAI,CAACW,aAAa,CAAC,CAAC;IAAC,MAAMV,CAAC,GAAC,MAAM,IAAI,CAACM,OAAO,CAACK,eAAe,CAACnB,CAAC,EAACE,CAAC,EAACE,CAAC,EAAC,IAAI,KAAGC,CAAC,GAAC,IAAI,CAACK,cAAc,GAACL,CAAC,EAACE,CAAC,CAAC;IAAC,IAAI,CAACa,eAAe,CAACb,CAAC,CAAC;IAAC,MAAMuB,CAAC,GAAC,IAAIxB,CAAC,CAACE,CAAC,CAAC4B,WAAW,CAACS,KAAK,CAAC,CAAC,EAACrC,CAAC,CAACiB,MAAM,CAACoB,KAAK,CAAC,CAAC,EAACrC,CAAC,CAACsC,QAAQ,EAAC,IAAI,CAACC,oBAAoB,CAACvC,CAAC,CAACwC,eAAe,CAAC,CAAC;IAAC,IAAIjB,CAAC,GAAC,CAAC,CAAC;IAAC,IAAGvB,CAAC,CAAC4B,WAAW,CAACZ,MAAM,GAAC,CAAC,KAAGO,CAAC,GAAC,CAAC,CAAC,CAAC,EAAC,CAAC,CAAC,KAAGD,CAAC,CAACgB,QAAQ,EAAC;MAAC,IAAI9C,CAAC,GAAC,MAAM,IAAI,CAACqB,cAAc,CAACS,CAAC,EAACvB,CAAC,CAAC;MAAC,OAAM,CAAC,CAAC,KAAGwB,CAAC,KAAG,IAAI,KAAG7B,CAAC,IAAE,IAAI,KAAGE,CAAC,KAAGJ,CAAC,GAAC,IAAIM,CAAC,CAACN,CAAC,CAACoC,WAAW,CAACS,KAAK,CAAC,CAAC,CAACI,MAAM,CAACjD,CAAC,CAACyB,MAAM,CAACoB,KAAK,CAAC,CAAC,CAAC,EAAC,EAAE,EAAC7C,CAAC,CAAC8C,QAAQ,EAAC,IAAI,CAACC,oBAAoB,CAAC/C,CAAC,CAACgD,eAAe,CAAC,CAAC,CAAC,CAAC,EAAChD,CAAC;IAAA;IAAC,OAAO8B,CAAC;EAAA;EAAC,OAAOoB,cAAcA,CAAA,EAAE;IAAC7C,CAAC,CAAC8C,oBAAoB,CAACC,OAAO,GAAC,UAASpD,CAAC,EAAC;MAAC,OAAM,EAAE,KAAGA,CAAC,GAAC,IAAI,GAAC,IAAIQ,CAAC,CAAC;QAACO,gBAAgB,EAAC,IAAI;QAACF,aAAa,EAAC,IAAIN,CAAC,CAACP,CAAC;MAAC,CAAC,CAAC;IAAA,CAAC;EAAA;EAACqD,cAAcA,CAAA,EAAE;IAAC,OAAO,IAAI,CAACvC,OAAO,CAACuC,cAAc,CAAC,CAAC;EAAA;AAAC;AAAC,SAAO7C,CAAC,IAAI8C,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}