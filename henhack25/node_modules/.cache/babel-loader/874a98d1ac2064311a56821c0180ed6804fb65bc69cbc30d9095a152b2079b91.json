{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../../../chunks/tslib.es6.js\";\nimport { property as r } from \"../../../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../../../core/has.js\";\nimport \"../../../../../../core/Logger.js\";\nimport \"../../../../../../core/RandomLCG.js\";\nimport { subclass as t } from \"../../../../../../core/accessorSupport/decorators/subclass.js\";\nimport { glLayout as i } from \"../../../../support/buffer/glUtil.js\";\nimport { ShaderOutput as s } from \"../../../../webgl-engine/core/shaderLibrary/ShaderOutput.js\";\nimport { SyncRenderPlugin as o } from \"../../../../webgl-engine/effects/RenderPlugin.js\";\nimport { GLMaterials as n } from \"../../../../webgl-engine/lib/GLMaterials.js\";\nimport { RenderSlot as a } from \"../../../../webgl-engine/lib/RenderSlot.js\";\nimport { DrawParameters as l } from \"../../../../webgl-engine/materials/DrawParameters.js\";\nlet m = class extends o {\n  constructor(e) {\n    super(e), this._glMaterials = null, this._produces = new Map(), this._renderGeometries = new Map(), this._vaoCache = null, this._drawParameters = new l(), this._bufferWriter = null;\n  }\n  get produces() {\n    return this._produces;\n  }\n  get numFeatures() {\n    const e = 6;\n    let r = 0;\n    return this._renderGeometries.forEach(t => r += t.numElements / e), r;\n  }\n  get usedMemory() {\n    let e = 0;\n    return this._renderGeometries.forEach(r => {\n      e += r.vao.usedMemory;\n    }), e;\n  }\n  initialize() {\n    this._bufferWriter = this.material.createBufferWriter(), this.material.produces.forEach((e, r) => {\n      this._produces.set(r, r => r !== s.Highlight && r !== s.ShadowHighlight && e(r));\n    });\n  }\n  destroy() {\n    this._glMaterials.dispose();\n    const e = this._renderGeometries.keys();\n    for (const r of e) this.removeRenderGeometry(r);\n  }\n  acquireTechniques(e) {\n    const r = this.material;\n    if (!r.shouldRender(e)) return null;\n    const {\n        output: t,\n        bind: i\n      } = e,\n      o = r.produces.get(i.slot);\n    if (!o?.(t)) return null;\n    if (t === s.Highlight || t === s.ShadowHighlight) return null;\n    const n = this._glMaterials.load(e.rctx, i.slot, t);\n    return n?.beginSlot(i);\n  }\n  render(e, r) {\n    const t = this._renderGeometries;\n    if (0 === t.size) return;\n    const {\n        bind: i\n      } = e,\n      s = i.slot === a.OCCLUDER_MATERIAL || i.slot === a.TRANSPARENT_OCCLUDER_MATERIAL ? i.slot : null,\n      o = e.rctx;\n    o.runAppleAmdDriverHelper(), o.bindTechnique(r, i, this.material.parameters);\n    const n = r.program;\n    for (const [a, l] of t) this._drawParameters.origin = l.localOrigin, n.bindDraw(i, this.material.parameters, this._drawParameters), r.ensureAttributeLocations(l.vao), o.bindVAO(l.vao), o.setPipelineState(r.getPipeline(!1, s)), o.drawArrays(r.primitiveType, 0, l.numElements);\n  }\n  initializeRenderContext(e, r) {\n    this._glMaterials = new n(this.material, e.materials), this._vaoCache = e.renderContext.rctx.getVaoCache(this.material.vertexAttributeLocations, i(this._bufferWriter.vertexBufferLayout));\n  }\n  uninitializeRenderContext() {}\n  addRenderGeometry(e, r, t) {\n    this.removeRenderGeometry(e);\n    const i = this._vaoCache.newVao(r.data.byteLength);\n    i.vertexBuffers.get(\"geometry\").setSubData(new Uint8Array(r.data), 0, 0, r.data.byteLength);\n    const s = {\n      localOrigin: t,\n      vao: i,\n      numElements: r.elementCount\n    };\n    return this._renderGeometries.set(e, s), s;\n  }\n  removeRenderGeometry(e) {\n    const r = this._renderGeometries.get(e);\n    null != r && (this._vaoCache.deleteVao(r.vao), this._renderGeometries.delete(e));\n  }\n  hasHighlightOptions(e) {\n    return !1;\n  }\n};\ne([r({\n  constructOnly: !0\n})], m.prototype, \"material\", void 0), m = e([t(\"esri.views.3d.layers.graphics.pipeline.rendering.DirectRenderer\")], m);\nexport { m as DirectRenderer };","map":{"version":3,"names":["_","e","property","r","subclass","t","glLayout","i","ShaderOutput","s","SyncRenderPlugin","o","GLMaterials","n","RenderSlot","a","DrawParameters","l","m","constructor","_glMaterials","_produces","Map","_renderGeometries","_vaoCache","_drawParameters","_bufferWriter","produces","numFeatures","forEach","numElements","usedMemory","vao","initialize","material","createBufferWriter","set","Highlight","ShadowHighlight","destroy","dispose","keys","removeRenderGeometry","acquireTechniques","shouldRender","output","bind","get","slot","load","rctx","beginSlot","render","size","OCCLUDER_MATERIAL","TRANSPARENT_OCCLUDER_MATERIAL","runAppleAmdDriverHelper","bindTechnique","parameters","program","origin","localOrigin","bindDraw","ensureAttributeLocations","bindVAO","setPipelineState","getPipeline","drawArrays","primitiveType","initializeRenderContext","materials","renderContext","getVaoCache","vertexAttributeLocations","vertexBufferLayout","uninitializeRenderContext","addRenderGeometry","newVao","data","byteLength","vertexBuffers","setSubData","Uint8Array","elementCount","deleteVao","delete","hasHighlightOptions","constructOnly","prototype","DirectRenderer"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/rendering/DirectRenderer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../../chunks/tslib.es6.js\";import{property as r}from\"../../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../../core/has.js\";import\"../../../../../../core/Logger.js\";import\"../../../../../../core/RandomLCG.js\";import{subclass as t}from\"../../../../../../core/accessorSupport/decorators/subclass.js\";import{glLayout as i}from\"../../../../support/buffer/glUtil.js\";import{ShaderOutput as s}from\"../../../../webgl-engine/core/shaderLibrary/ShaderOutput.js\";import{SyncRenderPlugin as o}from\"../../../../webgl-engine/effects/RenderPlugin.js\";import{GLMaterials as n}from\"../../../../webgl-engine/lib/GLMaterials.js\";import{RenderSlot as a}from\"../../../../webgl-engine/lib/RenderSlot.js\";import{DrawParameters as l}from\"../../../../webgl-engine/materials/DrawParameters.js\";let m=class extends o{constructor(e){super(e),this._glMaterials=null,this._produces=new Map,this._renderGeometries=new Map,this._vaoCache=null,this._drawParameters=new l,this._bufferWriter=null}get produces(){return this._produces}get numFeatures(){const e=6;let r=0;return this._renderGeometries.forEach((t=>r+=t.numElements/e)),r}get usedMemory(){let e=0;return this._renderGeometries.forEach((r=>{e+=r.vao.usedMemory})),e}initialize(){this._bufferWriter=this.material.createBufferWriter(),this.material.produces.forEach(((e,r)=>{this._produces.set(r,(r=>r!==s.Highlight&&r!==s.ShadowHighlight&&e(r)))}))}destroy(){this._glMaterials.dispose();const e=this._renderGeometries.keys();for(const r of e)this.removeRenderGeometry(r)}acquireTechniques(e){const r=this.material;if(!r.shouldRender(e))return null;const{output:t,bind:i}=e,o=r.produces.get(i.slot);if(!o?.(t))return null;if(t===s.Highlight||t===s.ShadowHighlight)return null;const n=this._glMaterials.load(e.rctx,i.slot,t);return n?.beginSlot(i)}render(e,r){const t=this._renderGeometries;if(0===t.size)return;const{bind:i}=e,s=i.slot===a.OCCLUDER_MATERIAL||i.slot===a.TRANSPARENT_OCCLUDER_MATERIAL?i.slot:null,o=e.rctx;o.runAppleAmdDriverHelper(),o.bindTechnique(r,i,this.material.parameters);const n=r.program;for(const[a,l]of t)this._drawParameters.origin=l.localOrigin,n.bindDraw(i,this.material.parameters,this._drawParameters),r.ensureAttributeLocations(l.vao),o.bindVAO(l.vao),o.setPipelineState(r.getPipeline(!1,s)),o.drawArrays(r.primitiveType,0,l.numElements)}initializeRenderContext(e,r){this._glMaterials=new n(this.material,e.materials),this._vaoCache=e.renderContext.rctx.getVaoCache(this.material.vertexAttributeLocations,i(this._bufferWriter.vertexBufferLayout))}uninitializeRenderContext(){}addRenderGeometry(e,r,t){this.removeRenderGeometry(e);const i=this._vaoCache.newVao(r.data.byteLength);i.vertexBuffers.get(\"geometry\").setSubData(new Uint8Array(r.data),0,0,r.data.byteLength);const s={localOrigin:t,vao:i,numElements:r.elementCount};return this._renderGeometries.set(e,s),s}removeRenderGeometry(e){const r=this._renderGeometries.get(e);null!=r&&(this._vaoCache.deleteVao(r.vao),this._renderGeometries.delete(e))}hasHighlightOptions(e){return!1}};e([r({constructOnly:!0})],m.prototype,\"material\",void 0),m=e([t(\"esri.views.3d.layers.graphics.pipeline.rendering.DirectRenderer\")],m);export{m as DirectRenderer};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}