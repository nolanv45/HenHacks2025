{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { create as e } from \"../../../../geometry/support/aaBoundingRect.js\";\nimport { getWorldWidth as r } from \"../../viewpointUtils.js\";\nimport s from \"./BrushRasterBitmap.js\";\nimport { RasterTile as t } from \"./RasterTile.js\";\nimport { WGLDrawPhase as i } from \"../webgl/enums.js\";\nimport n from \"../webgl/TileContainer.js\";\nclass o extends n {\n  constructor() {\n    super(...arguments), this.isCustomTilingScheme = !1;\n  }\n  createTile(e) {\n    const r = this._getTileBounds(e),\n      [s, i] = this.tileInfoView.tileInfo.size,\n      n = this.tileInfoView.getTileResolution(e.level);\n    return new t(e, n, r[0], r[3], s, i);\n  }\n  prepareRenderPasses(e) {\n    const r = e.registerRenderPass({\n      name: \"imagery (tile)\",\n      brushes: [s],\n      target: () => this.children.map(e => e.bitmap),\n      drawPhase: i.MAP\n    });\n    return [...super.prepareRenderPasses(e), r];\n  }\n  doRender(e) {\n    if (!this.visible || e.drawPhase !== i.MAP) return;\n    const {\n      rasterFunctionChain: r\n    } = this;\n    if (!r) return e.renderPass = \"raster-bitmap\", void super.doRender(e);\n    if (!r.hasFocalFunction) {\n      const [s, t] = this.tileInfoView.tileInfo.size;\n      e.renderPass = \"raster\", e.rasterFunction = {\n        name: \"Reproject\",\n        parameters: {\n          targetImageSize: [s, t],\n          requireNNEdge: r.isSourceSingleBand\n        },\n        pixelType: \"f32\",\n        id: 0,\n        isNoopProcess: !1\n      }, super.doRender(e);\n    }\n    if (r?.functions.length) {\n      const {\n        functions: s,\n        hasBranches: t\n      } = r;\n      for (let r = 0; r < s.length; r++) {\n        const i = s[r];\n        \"Constant\" !== i.name && \"Identity\" !== i.name && (e.renderPass = \"raster\", e.rasterFunction = i, e.hasBranches = t, super.doRender(e));\n      }\n    }\n    e.rasterFunction = null, e.renderPass = \"bitmap\", super.doRender(e);\n  }\n  _getTileBounds(s) {\n    const t = this.tileInfoView.getTileBounds(e(), s);\n    if (this.isCustomTilingScheme && s.world) {\n      const {\n          tileInfo: e\n        } = this.tileInfoView,\n        i = r(e.spatialReference);\n      if (i) {\n        const r = e.lodAt(s.level);\n        if (!r) return t;\n        const {\n            resolution: n\n          } = r,\n          o = n * e.size[0];\n        t[0] = i * s.world + e.origin.x + s.col * o, t[2] = t[0] + o;\n      }\n    }\n    return t;\n  }\n}\nexport { o as RasterTileContainer };","map":{"version":3,"names":["create","e","getWorldWidth","r","s","RasterTile","t","WGLDrawPhase","i","n","o","constructor","arguments","isCustomTilingScheme","createTile","_getTileBounds","tileInfoView","tileInfo","size","getTileResolution","level","prepareRenderPasses","registerRenderPass","name","brushes","target","children","map","bitmap","drawPhase","MAP","doRender","visible","rasterFunctionChain","renderPass","hasFocalFunction","rasterFunction","parameters","targetImageSize","requireNNEdge","isSourceSingleBand","pixelType","id","isNoopProcess","functions","length","hasBranches","getTileBounds","world","spatialReference","lodAt","resolution","origin","x","col","RasterTileContainer"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/engine/imagery/RasterTileContainer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../../../geometry/support/aaBoundingRect.js\";import{getWorldWidth as r}from\"../../viewpointUtils.js\";import s from\"./BrushRasterBitmap.js\";import{RasterTile as t}from\"./RasterTile.js\";import{WGLDrawPhase as i}from\"../webgl/enums.js\";import n from\"../webgl/TileContainer.js\";class o extends n{constructor(){super(...arguments),this.isCustomTilingScheme=!1}createTile(e){const r=this._getTileBounds(e),[s,i]=this.tileInfoView.tileInfo.size,n=this.tileInfoView.getTileResolution(e.level);return new t(e,n,r[0],r[3],s,i)}prepareRenderPasses(e){const r=e.registerRenderPass({name:\"imagery (tile)\",brushes:[s],target:()=>this.children.map((e=>e.bitmap)),drawPhase:i.MAP});return[...super.prepareRenderPasses(e),r]}doRender(e){if(!this.visible||e.drawPhase!==i.MAP)return;const{rasterFunctionChain:r}=this;if(!r)return e.renderPass=\"raster-bitmap\",void super.doRender(e);if(!r.hasFocalFunction){const[s,t]=this.tileInfoView.tileInfo.size;e.renderPass=\"raster\",e.rasterFunction={name:\"Reproject\",parameters:{targetImageSize:[s,t],requireNNEdge:r.isSourceSingleBand},pixelType:\"f32\",id:0,isNoopProcess:!1},super.doRender(e)}if(r?.functions.length){const{functions:s,hasBranches:t}=r;for(let r=0;r<s.length;r++){const i=s[r];\"Constant\"!==i.name&&\"Identity\"!==i.name&&(e.renderPass=\"raster\",e.rasterFunction=i,e.hasBranches=t,super.doRender(e))}}e.rasterFunction=null,e.renderPass=\"bitmap\",super.doRender(e)}_getTileBounds(s){const t=this.tileInfoView.getTileBounds(e(),s);if(this.isCustomTilingScheme&&s.world){const{tileInfo:e}=this.tileInfoView,i=r(e.spatialReference);if(i){const r=e.lodAt(s.level);if(!r)return t;const{resolution:n}=r,o=n*e.size[0];t[0]=i*s.world+e.origin.x+s.col*o,t[2]=t[0]+o}}return t}}export{o as RasterTileContainer};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}