{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { estimateAttributesMemory as t } from \"../../../../core/memoryEstimations.js\";\nimport { empty as e, width as i, height as s } from \"../../../../geometry/support/aaBoundingRect.js\";\nimport { getBoundsXY as r } from \"../../../../geometry/support/boundsUtils.js\";\nimport { closeRingsAndFixWinding as o } from \"../../../../geometry/support/coordsUtils.js\";\nimport { isCurvedGeometry as n } from \"../../../../geometry/support/curveUtils.js\";\nimport { densifyCurvedGeometry as m } from \"../../../../geometry/support/densifyUtils.js\";\nimport { isExtent as a } from \"../../../../geometry/support/jsonUtils.js\";\nimport { normalizeCentralMeridianForDisplay as h } from \"../../../../geometry/support/normalizeUtilsSync.js\";\nimport { estimateGeometryMemory as y } from \"../../../../layers/graphics/dehydratedFeatures.js\";\nimport { checkProjectionSupport as u, project as p } from \"../../../../layers/graphics/data/projectionSupport.js\";\nimport { getCoarseDensificationSegments as c, getApproximateMaxDensificationSegments as g, getMinDensificationSegments as l, getPixelsPerSegment as d } from \"./densificationConstants.js\";\nimport { polygonFromExtent as f } from \"./graphicsUtils.js\";\nclass j {\n  static fromGraphic(t, e, i, s) {\n    return new j(t.geometry, e, t.attributes, t.visible, t.uid, t.version, i, s);\n  }\n  constructor(t, i, s, r, o, n, m, a) {\n    this.geometry = t, this.symbol = i, this.attributes = s, this.visible = r, this.objectId = o, this._version = n, this.zOrder = m, this.displayId = a, this.symbolBounds = e(), this.prevSymbolBounds = e(), this.size = [0, 0, 0, 0], this.geometryBounds = e(), this._isDensificationDirty = !1, this._densificationSegmentLength = 1 / 0;\n  }\n  get projectedGeometry() {\n    return this._projectedGeometry;\n  }\n  get linearCIM() {\n    return this.symbolResource?.symbolInfo.linearCIM;\n  }\n  get usedMemory() {\n    return 128 + t(this.attributes) + y(this.geometry);\n  }\n  get hasAnimations() {\n    const {\n      linearCIM: t\n    } = this;\n    return !!t && t.some(t => \"animationParams\" in t && !!t.animationParams);\n  }\n  get hasCurvedGeoemtry() {\n    return null != this.geometry && \"mesh\" !== this.geometry.type && n(this.geometry);\n  }\n  update(t, i, s) {\n    return (this._version !== t.version || this.zOrder !== s || this.symbol !== i) && (this.prevSymbolBounds = this.symbolBounds, this.symbolBounds = e(), this.zOrder = s, this.geometry = t.geometry, this.attributes = t.attributes, this.symbol = i, this.visible = t.visible, this._version = t.version, this.symbolResource = null, this._projectedGeometry = null, e(this.geometryBounds), this._minDensificationSegmentLength = null, !0);\n  }\n  updateDensificationResolution(t) {\n    if (!this.hasCurvedGeoemtry) return !1;\n    const e = Math.max(v(t), this._minDensificationSegmentLength ?? 0);\n    return e !== this._densificationSegmentLength && (this._densificationSegmentLength = e, this._isDensificationDirty = !0, !0);\n  }\n  async projectAndNormalize(t) {\n    let e,\n      o = this.geometry;\n    if (o && o.spatialReference && \"mesh\" !== o.type && (\"extent\" === o.type && (o = f(o)), e = n(o) ? m(o, {\n      maxSegmentLength: 1 / 0,\n      minSegmentsPerCurve: c()\n    }) : o.toJSON(), this._projectedGeometry = await b(e, o.spatialReference, t), r(this.geometryBounds, this._projectedGeometry), this.hasCurvedGeoemtry && null != this._projectedGeometry)) {\n      const t = i(this.geometryBounds),\n        e = s(this.geometryBounds);\n      (t || e) && (this._minDensificationSegmentLength = Math.max(t, e) / g());\n    }\n  }\n  async densifyCurvedGeometryForDisplay(t) {\n    if (!this.hasCurvedGeoemtry || !this._isDensificationDirty) return;\n    this._isDensificationDirty = !1;\n    const e = this.geometry;\n    if (!e || !e.spatialReference || \"mesh\" === e.type) return;\n    const i = t.metersPerUnit / e.spatialReference.metersPerUnit,\n      s = this._densificationSegmentLength * i,\n      r = m(e, {\n        maxSegmentLength: s,\n        minSegmentsPerCurve: l()\n      });\n    this._projectedGeometry = await b(r, e.spatialReference, t);\n  }\n}\nasync function b(t, e, i) {\n  await u(t.spatialReference, i);\n  const s = h(t);\n  if (!s) return;\n  const r = p(s, e, i);\n  return r && o(r), a(r) ? f(r) : r;\n}\nfunction v(t) {\n  return 2 ** Math.round(Math.log2(t)) * d();\n}\nexport { j as GraphicStoreItem };","map":{"version":3,"names":["estimateAttributesMemory","t","empty","e","width","i","height","s","getBoundsXY","r","closeRingsAndFixWinding","o","isCurvedGeometry","n","densifyCurvedGeometry","m","isExtent","a","normalizeCentralMeridianForDisplay","h","estimateGeometryMemory","y","checkProjectionSupport","u","project","p","getCoarseDensificationSegments","c","getApproximateMaxDensificationSegments","g","getMinDensificationSegments","l","getPixelsPerSegment","d","polygonFromExtent","f","j","fromGraphic","geometry","attributes","visible","uid","version","constructor","symbol","objectId","_version","zOrder","displayId","symbolBounds","prevSymbolBounds","size","geometryBounds","_isDensificationDirty","_densificationSegmentLength","projectedGeometry","_projectedGeometry","linearCIM","symbolResource","symbolInfo","usedMemory","hasAnimations","some","animationParams","hasCurvedGeoemtry","type","update","_minDensificationSegmentLength","updateDensificationResolution","Math","max","v","projectAndNormalize","spatialReference","maxSegmentLength","minSegmentsPerCurve","toJSON","b","densifyCurvedGeometryForDisplay","metersPerUnit","round","log2","GraphicStoreItem"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/layers/graphics/GraphicStoreItem.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{estimateAttributesMemory as t}from\"../../../../core/memoryEstimations.js\";import{empty as e,width as i,height as s}from\"../../../../geometry/support/aaBoundingRect.js\";import{getBoundsXY as r}from\"../../../../geometry/support/boundsUtils.js\";import{closeRingsAndFixWinding as o}from\"../../../../geometry/support/coordsUtils.js\";import{isCurvedGeometry as n}from\"../../../../geometry/support/curveUtils.js\";import{densifyCurvedGeometry as m}from\"../../../../geometry/support/densifyUtils.js\";import{isExtent as a}from\"../../../../geometry/support/jsonUtils.js\";import{normalizeCentralMeridianForDisplay as h}from\"../../../../geometry/support/normalizeUtilsSync.js\";import{estimateGeometryMemory as y}from\"../../../../layers/graphics/dehydratedFeatures.js\";import{checkProjectionSupport as u,project as p}from\"../../../../layers/graphics/data/projectionSupport.js\";import{getCoarseDensificationSegments as c,getApproximateMaxDensificationSegments as g,getMinDensificationSegments as l,getPixelsPerSegment as d}from\"./densificationConstants.js\";import{polygonFromExtent as f}from\"./graphicsUtils.js\";class j{static fromGraphic(t,e,i,s){return new j(t.geometry,e,t.attributes,t.visible,t.uid,t.version,i,s)}constructor(t,i,s,r,o,n,m,a){this.geometry=t,this.symbol=i,this.attributes=s,this.visible=r,this.objectId=o,this._version=n,this.zOrder=m,this.displayId=a,this.symbolBounds=e(),this.prevSymbolBounds=e(),this.size=[0,0,0,0],this.geometryBounds=e(),this._isDensificationDirty=!1,this._densificationSegmentLength=1/0}get projectedGeometry(){return this._projectedGeometry}get linearCIM(){return this.symbolResource?.symbolInfo.linearCIM}get usedMemory(){return 128+t(this.attributes)+y(this.geometry)}get hasAnimations(){const{linearCIM:t}=this;return!!t&&t.some((t=>\"animationParams\"in t&&!!t.animationParams))}get hasCurvedGeoemtry(){return null!=this.geometry&&\"mesh\"!==this.geometry.type&&n(this.geometry)}update(t,i,s){return(this._version!==t.version||this.zOrder!==s||this.symbol!==i)&&(this.prevSymbolBounds=this.symbolBounds,this.symbolBounds=e(),this.zOrder=s,this.geometry=t.geometry,this.attributes=t.attributes,this.symbol=i,this.visible=t.visible,this._version=t.version,this.symbolResource=null,this._projectedGeometry=null,e(this.geometryBounds),this._minDensificationSegmentLength=null,!0)}updateDensificationResolution(t){if(!this.hasCurvedGeoemtry)return!1;const e=Math.max(v(t),this._minDensificationSegmentLength??0);return e!==this._densificationSegmentLength&&(this._densificationSegmentLength=e,this._isDensificationDirty=!0,!0)}async projectAndNormalize(t){let e,o=this.geometry;if(o&&o.spatialReference&&\"mesh\"!==o.type&&(\"extent\"===o.type&&(o=f(o)),e=n(o)?m(o,{maxSegmentLength:1/0,minSegmentsPerCurve:c()}):o.toJSON(),this._projectedGeometry=await b(e,o.spatialReference,t),r(this.geometryBounds,this._projectedGeometry),this.hasCurvedGeoemtry&&null!=this._projectedGeometry)){const t=i(this.geometryBounds),e=s(this.geometryBounds);(t||e)&&(this._minDensificationSegmentLength=Math.max(t,e)/g())}}async densifyCurvedGeometryForDisplay(t){if(!this.hasCurvedGeoemtry||!this._isDensificationDirty)return;this._isDensificationDirty=!1;const e=this.geometry;if(!e||!e.spatialReference||\"mesh\"===e.type)return;const i=t.metersPerUnit/e.spatialReference.metersPerUnit,s=this._densificationSegmentLength*i,r=m(e,{maxSegmentLength:s,minSegmentsPerCurve:l()});this._projectedGeometry=await b(r,e.spatialReference,t)}}async function b(t,e,i){await u(t.spatialReference,i);const s=h(t);if(!s)return;const r=p(s,e,i);return r&&o(r),a(r)?f(r):r}function v(t){return 2**Math.round(Math.log2(t))*d()}export{j as GraphicStoreItem};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}