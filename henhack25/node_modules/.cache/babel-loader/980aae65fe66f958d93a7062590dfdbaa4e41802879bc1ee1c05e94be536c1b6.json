{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from \"../../../core/Logger.js\";\nimport { fromRotationTranslationScaleOrigin as t, multiply as r, getScaling as o, scale as i, getTranslation as n } from \"../../../core/libs/gl-matrix-2/math/mat4.js\";\nimport { create as s } from \"../../../core/libs/gl-matrix-2/factories/mat4f64.js\";\nimport { IDENTITY as a } from \"../../../core/libs/gl-matrix-2/factories/quatf64.js\";\nimport { i as l, u as c, h as f } from \"../../../chunks/vec32.js\";\nimport { ZEROS as m, create as p } from \"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport u from \"../../Point.js\";\nimport { getSphericalPCPF as g } from \"../../spatialReferenceEllipsoidUtils.js\";\nimport { projectPointToVector as x } from \"../../projection/projectPointToVector.js\";\nimport { fromMatrix as j } from \"../axisAngleDegrees.js\";\nimport v from \"../MeshTransform.js\";\nimport { isMeshWithRelativeVertexSpace as h } from \"../meshVertexSpaceUtils.js\";\nimport { performGlobalOperation as A } from \"./geographicUtils.js\";\nimport { logProjectionError as b, loadProjectErrorMessage as R, projectToPCPF as d, projectNormalToPCPF as y, projectTangentToPCPF as w, projectFromPCPF as F, projectNormalFromPCPF as S, projectTangentFromPCPF as U } from \"./projection.js\";\nimport { projectPointToVertexSpace as C } from \"./vertexSpaceConversion.js\";\nconst k = () => e.getLogger(\"esri.geometry.support.meshUtils.scale\");\nfunction q(e, t, r) {\n  if (!e.vertexAttributes?.position) return;\n  const {\n      vertexSpace: o,\n      spatialReference: i\n    } = e,\n    n = r?.origin ?? e.origin,\n    s = r?.geographic,\n    a = A(k, o, i, s);\n  h(e) ? z(e, t, n) : a ? L(e, t, n) : M(e, t, n);\n}\nfunction z(e, s, f) {\n  e.transform ??= new v();\n  const {\n      vertexSpace: g,\n      transform: x,\n      spatialReference: h\n    } = e,\n    [A, d, y] = g.origin,\n    w = new u({\n      x: A,\n      y: d,\n      z: y,\n      spatialReference: h\n    }),\n    F = T;\n  if (w.equals(f)) l(F, 0, 0, 0);else if (!C(F, f, e)) return void b(k(), f.spatialReference, h, R);\n  const S = l(V, s, s, s),\n    U = t(D, a, m, S, F),\n    {\n      localMatrix: q\n    } = x,\n    z = r(D, U, q);\n  x.scale = o(p(), z), i(z, z, c(T, x.scale));\n  const L = x.rotationAxis;\n  x.rotation = j(z), 0 === x.rotationAngle && (x.rotationAxis = L), x.translation = n(p(), z);\n}\nfunction L(e, t, r) {\n  const o = e.spatialReference,\n    i = g(o),\n    n = E;\n  if (!x(r, n, i) && (b(k(), r.spatialReference, i, \"Falling back to mesh origin\"), !x(e.origin, n, i))) return void b(k(), e.origin.spatialReference, i);\n  const s = e.vertexAttributes.position,\n    a = e.vertexAttributes.normal,\n    l = e.vertexAttributes.tangent,\n    c = new Float64Array(s.length),\n    f = null != a ? new Float32Array(a.length) : null,\n    m = null != l ? new Float32Array(l.length) : null;\n  d(s, o, c, i) && (null == a || null == f || y(a, s, o, c, i, f)) && (null == l || null == m || w(l, s, o, c, i, m)) ? (P(c, t, n), F(c, i, s, o) && (null == a || null == f || S(f, s, o, c, i, a)) && (null == l || null == m || U(m, s, o, c, i, l)) ? e.vertexAttributesChanged() : b(k(), i, o)) : b(k(), o, i);\n}\nfunction M(e, t, r) {\n  const o = E;\n  if (!x(r, o, e.spatialReference)) {\n    const t = e.origin;\n    return o[0] = t.x, o[1] = t.y, o[2] = t.z, void b(k(), r.spatialReference, e.spatialReference, R);\n  }\n  P(e.vertexAttributes.position, t, o), e.vertexAttributesChanged();\n}\nfunction P(e, t, r = m) {\n  if (e) for (let o = 0; o < e.length; o += 3) {\n    for (let t = 0; t < 3; t++) T[t] = e[o + t] - r[t];\n    f(T, T, t);\n    for (let t = 0; t < 3; t++) e[o + t] = T[t] + r[t];\n  }\n}\nconst T = p(),\n  V = p(),\n  D = s(),\n  E = p();\nexport { q as scale };","map":{"version":3,"names":["e","fromRotationTranslationScaleOrigin","t","multiply","r","getScaling","o","scale","i","getTranslation","n","create","s","IDENTITY","a","l","u","c","h","f","ZEROS","m","p","getSphericalPCPF","g","projectPointToVector","x","fromMatrix","j","v","isMeshWithRelativeVertexSpace","performGlobalOperation","A","logProjectionError","b","loadProjectErrorMessage","R","projectToPCPF","d","projectNormalToPCPF","y","projectTangentToPCPF","w","projectFromPCPF","F","projectNormalFromPCPF","S","projectTangentFromPCPF","U","projectPointToVertexSpace","C","k","getLogger","q","vertexAttributes","position","vertexSpace","spatialReference","origin","geographic","z","L","M","transform","T","equals","V","D","localMatrix","rotationAxis","rotation","rotationAngle","translation","E","normal","tangent","Float64Array","length","Float32Array","P","vertexAttributesChanged"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/geometry/support/meshUtils/scale.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Logger.js\";import{fromRotationTranslationScaleOrigin as t,multiply as r,getScaling as o,scale as i,getTranslation as n}from\"../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as s}from\"../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{IDENTITY as a}from\"../../../core/libs/gl-matrix-2/factories/quatf64.js\";import{i as l,u as c,h as f}from\"../../../chunks/vec32.js\";import{ZEROS as m,create as p}from\"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import u from\"../../Point.js\";import{getSphericalPCPF as g}from\"../../spatialReferenceEllipsoidUtils.js\";import{projectPointToVector as x}from\"../../projection/projectPointToVector.js\";import{fromMatrix as j}from\"../axisAngleDegrees.js\";import v from\"../MeshTransform.js\";import{isMeshWithRelativeVertexSpace as h}from\"../meshVertexSpaceUtils.js\";import{performGlobalOperation as A}from\"./geographicUtils.js\";import{logProjectionError as b,loadProjectErrorMessage as R,projectToPCPF as d,projectNormalToPCPF as y,projectTangentToPCPF as w,projectFromPCPF as F,projectNormalFromPCPF as S,projectTangentFromPCPF as U}from\"./projection.js\";import{projectPointToVertexSpace as C}from\"./vertexSpaceConversion.js\";const k=()=>e.getLogger(\"esri.geometry.support.meshUtils.scale\");function q(e,t,r){if(!e.vertexAttributes?.position)return;const{vertexSpace:o,spatialReference:i}=e,n=r?.origin??e.origin,s=r?.geographic,a=A(k,o,i,s);h(e)?z(e,t,n):a?L(e,t,n):M(e,t,n)}function z(e,s,f){e.transform??=new v;const{vertexSpace:g,transform:x,spatialReference:h}=e,[A,d,y]=g.origin,w=new u({x:A,y:d,z:y,spatialReference:h}),F=T;if(w.equals(f))l(F,0,0,0);else if(!C(F,f,e))return void b(k(),f.spatialReference,h,R);const S=l(V,s,s,s),U=t(D,a,m,S,F),{localMatrix:q}=x,z=r(D,U,q);x.scale=o(p(),z),i(z,z,c(T,x.scale));const L=x.rotationAxis;x.rotation=j(z),0===x.rotationAngle&&(x.rotationAxis=L),x.translation=n(p(),z)}function L(e,t,r){const o=e.spatialReference,i=g(o),n=E;if(!x(r,n,i)&&(b(k(),r.spatialReference,i,\"Falling back to mesh origin\"),!x(e.origin,n,i)))return void b(k(),e.origin.spatialReference,i);const s=e.vertexAttributes.position,a=e.vertexAttributes.normal,l=e.vertexAttributes.tangent,c=new Float64Array(s.length),f=null!=a?new Float32Array(a.length):null,m=null!=l?new Float32Array(l.length):null;d(s,o,c,i)&&(null==a||null==f||y(a,s,o,c,i,f))&&(null==l||null==m||w(l,s,o,c,i,m))?(P(c,t,n),F(c,i,s,o)&&(null==a||null==f||S(f,s,o,c,i,a))&&(null==l||null==m||U(m,s,o,c,i,l))?e.vertexAttributesChanged():b(k(),i,o)):b(k(),o,i)}function M(e,t,r){const o=E;if(!x(r,o,e.spatialReference)){const t=e.origin;return o[0]=t.x,o[1]=t.y,o[2]=t.z,void b(k(),r.spatialReference,e.spatialReference,R)}P(e.vertexAttributes.position,t,o),e.vertexAttributesChanged()}function P(e,t,r=m){if(e)for(let o=0;o<e.length;o+=3){for(let t=0;t<3;t++)T[t]=e[o+t]-r[t];f(T,T,t);for(let t=0;t<3;t++)e[o+t]=T[t]+r[t]}}const T=p(),V=p(),D=s(),E=p();export{q as scale};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}