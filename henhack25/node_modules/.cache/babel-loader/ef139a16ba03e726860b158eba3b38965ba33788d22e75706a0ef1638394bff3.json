{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../chunks/tslib.es6.js\";\nimport { numberMaxFloat32 as s } from \"../../../core/mathUtils.js\";\nimport { property as e } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/Logger.js\";\nimport \"../../../core/RandomLCG.js\";\nimport { subclass as n } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { getPixelValueRange as o } from \"../rasterFormats/pixelRangeUtils.js\";\nimport a from \"./BaseRasterFunction.js\";\nimport { createRemapLUT as u, maxMapSizeGpu as r, lookupPixels as i, lookupBandValues as l, remap as p } from \"./pixelUtils.js\";\nimport c from \"./RemapFunctionArguments.js\";\nlet m = class extends a {\n  constructor() {\n    super(...arguments), this.functionName = \"Remap\", this.functionArguments = null, this.rasterArgumentNames = [\"raster\"], this.lookup = null;\n  }\n  _bindSourceRasters() {\n    const t = this.sourceRasterInfos[0].clone(),\n      {\n        pixelType: s\n      } = t;\n    this.outputPixelType = this._getOutputPixelType(s), t.pixelType = this.outputPixelType, t.bandCount = 1;\n    const {\n      statistics: e\n    } = t;\n    this._removeStatsHistColormapVAT(t);\n    const {\n      allowUnmatched: n,\n      outputValues: o,\n      inputRanges: a,\n      noDataRanges: i,\n      isLastInputRangeInclusive: l\n    } = this.functionArguments;\n    if (null != e && e.length && o?.length) if (n) {\n      const s = Math.min.apply(null, [...o, e[0].min]),\n        n = Math.max.apply(null, [...o, e[0].max]);\n      t.statistics = [{\n        ...e[0],\n        min: s,\n        max: n\n      }];\n    } else {\n      let s = o[0],\n        n = s;\n      for (let t = 0; t < o.length; t++) s = s > o[t] ? o[t] : s, n = n > o[t] ? n : o[t];\n      t.statistics = [{\n        ...e[0],\n        min: s,\n        max: n\n      }];\n    }\n    this.rasterInfo = t, this.lookup = n ? null : u({\n      srcPixelType: s,\n      inputRanges: a,\n      outputValues: o,\n      noDataRanges: i,\n      allowUnmatched: n,\n      isLastInputRangeInclusive: l,\n      outputPixelType: this.outputPixelType\n    });\n    return {\n      success: !0,\n      supportsGPU: (!o || o.length <= r) && (!i || i.length <= r)\n    };\n  }\n  _processPixels(t) {\n    const s = t.pixelBlocks?.[0];\n    if (null == s) return null;\n    const {\n      lookup: e,\n      outputPixelType: n\n    } = this;\n    if (e) {\n      const t = i(s, {\n        lut: [e.lut],\n        offset: e.offset,\n        outputPixelType: n\n      });\n      return null != t && e.mask && (t.mask = l(s.pixels[0], s.mask, e.mask, e.offset, \"u8\")), t;\n    }\n    const {\n      inputRanges: o,\n      outputValues: a,\n      noDataRanges: u,\n      allowUnmatched: r,\n      isLastInputRangeInclusive: c\n    } = this.functionArguments;\n    return p(s, {\n      inputRanges: o,\n      outputValues: a,\n      noDataRanges: u,\n      outputPixelType: n,\n      allowUnmatched: r,\n      isLastInputRangeInclusive: c\n    });\n  }\n  _getWebGLParameters() {\n    const {\n        allowUnmatched: t,\n        noDataRanges: e,\n        isLastInputRangeInclusive: n\n      } = this.functionArguments,\n      a = new Float32Array(3 * r),\n      u = 1e-5,\n      i = this.functionArguments.inputRanges ?? [],\n      l = this.functionArguments.outputValues ?? [],\n      p = l.length;\n    for (let o = 0; o < r; o++) a[3 * o] = i[2 * o] ?? s - 1, a[3 * o + 1] = i[2 * o + 1] ?? s, a[3 * o + 2] = l[o] ?? 0, o < p && (o > 0 && (a[3 * o] -= u), (o < p - 1 || !n) && (a[3 * o + 1] -= u));\n    const c = new Float32Array(2 * r);\n    c.fill(s), e?.length && c.set(e);\n    return {\n      allowUnmatched: t,\n      rangeMaps: a,\n      noDataRanges: c,\n      clampRange: o(this.outputPixelType)\n    };\n  }\n};\nt([e({\n  json: {\n    write: !0,\n    name: \"rasterFunction\"\n  }\n})], m.prototype, \"functionName\", void 0), t([e({\n  type: c,\n  json: {\n    write: !0,\n    name: \"rasterFunctionArguments\"\n  }\n})], m.prototype, \"functionArguments\", void 0), t([e()], m.prototype, \"rasterArgumentNames\", void 0), t([e({\n  json: {\n    write: !0\n  }\n})], m.prototype, \"lookup\", void 0), m = t([n(\"esri.layers.support.rasterFunctions.RemapFunction\")], m);\nconst g = m;\nexport { g as default };","map":{"version":3,"names":["_","t","numberMaxFloat32","s","property","e","subclass","n","getPixelValueRange","o","a","createRemapLUT","u","maxMapSizeGpu","r","lookupPixels","i","lookupBandValues","l","remap","p","c","m","constructor","arguments","functionName","functionArguments","rasterArgumentNames","lookup","_bindSourceRasters","sourceRasterInfos","clone","pixelType","outputPixelType","_getOutputPixelType","bandCount","statistics","_removeStatsHistColormapVAT","allowUnmatched","outputValues","inputRanges","noDataRanges","isLastInputRangeInclusive","length","Math","min","apply","max","rasterInfo","srcPixelType","success","supportsGPU","_processPixels","pixelBlocks","lut","offset","mask","pixels","_getWebGLParameters","Float32Array","fill","set","rangeMaps","clampRange","json","write","name","prototype","type","g","default"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/layers/support/rasterFunctions/RemapFunction.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import{numberMaxFloat32 as s}from\"../../../core/mathUtils.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as n}from\"../../../core/accessorSupport/decorators/subclass.js\";import{getPixelValueRange as o}from\"../rasterFormats/pixelRangeUtils.js\";import a from\"./BaseRasterFunction.js\";import{createRemapLUT as u,maxMapSizeGpu as r,lookupPixels as i,lookupBandValues as l,remap as p}from\"./pixelUtils.js\";import c from\"./RemapFunctionArguments.js\";let m=class extends a{constructor(){super(...arguments),this.functionName=\"Remap\",this.functionArguments=null,this.rasterArgumentNames=[\"raster\"],this.lookup=null}_bindSourceRasters(){const t=this.sourceRasterInfos[0].clone(),{pixelType:s}=t;this.outputPixelType=this._getOutputPixelType(s),t.pixelType=this.outputPixelType,t.bandCount=1;const{statistics:e}=t;this._removeStatsHistColormapVAT(t);const{allowUnmatched:n,outputValues:o,inputRanges:a,noDataRanges:i,isLastInputRangeInclusive:l}=this.functionArguments;if(null!=e&&e.length&&o?.length)if(n){const s=Math.min.apply(null,[...o,e[0].min]),n=Math.max.apply(null,[...o,e[0].max]);t.statistics=[{...e[0],min:s,max:n}]}else{let s=o[0],n=s;for(let t=0;t<o.length;t++)s=s>o[t]?o[t]:s,n=n>o[t]?n:o[t];t.statistics=[{...e[0],min:s,max:n}]}this.rasterInfo=t,this.lookup=n?null:u({srcPixelType:s,inputRanges:a,outputValues:o,noDataRanges:i,allowUnmatched:n,isLastInputRangeInclusive:l,outputPixelType:this.outputPixelType});return{success:!0,supportsGPU:(!o||o.length<=r)&&(!i||i.length<=r)}}_processPixels(t){const s=t.pixelBlocks?.[0];if(null==s)return null;const{lookup:e,outputPixelType:n}=this;if(e){const t=i(s,{lut:[e.lut],offset:e.offset,outputPixelType:n});return null!=t&&e.mask&&(t.mask=l(s.pixels[0],s.mask,e.mask,e.offset,\"u8\")),t}const{inputRanges:o,outputValues:a,noDataRanges:u,allowUnmatched:r,isLastInputRangeInclusive:c}=this.functionArguments;return p(s,{inputRanges:o,outputValues:a,noDataRanges:u,outputPixelType:n,allowUnmatched:r,isLastInputRangeInclusive:c})}_getWebGLParameters(){const{allowUnmatched:t,noDataRanges:e,isLastInputRangeInclusive:n}=this.functionArguments,a=new Float32Array(3*r),u=1e-5,i=this.functionArguments.inputRanges??[],l=this.functionArguments.outputValues??[],p=l.length;for(let o=0;o<r;o++)a[3*o]=i[2*o]??s-1,a[3*o+1]=i[2*o+1]??s,a[3*o+2]=l[o]??0,o<p&&(o>0&&(a[3*o]-=u),(o<p-1||!n)&&(a[3*o+1]-=u));const c=new Float32Array(2*r);c.fill(s),e?.length&&c.set(e);return{allowUnmatched:t,rangeMaps:a,noDataRanges:c,clampRange:o(this.outputPixelType)}}};t([e({json:{write:!0,name:\"rasterFunction\"}})],m.prototype,\"functionName\",void 0),t([e({type:c,json:{write:!0,name:\"rasterFunctionArguments\"}})],m.prototype,\"functionArguments\",void 0),t([e()],m.prototype,\"rasterArgumentNames\",void 0),t([e({json:{write:!0}})],m.prototype,\"lookup\",void 0),m=t([n(\"esri.layers.support.rasterFunctions.RemapFunction\")],m);const g=m;export{g as default};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAC,QAAK,8BAA8B;AAAC,SAAOC,gBAAgB,IAAIC,CAAC,QAAK,4BAA4B;AAAC,SAAOC,QAAQ,IAAIC,CAAC,QAAK,sDAAsD;AAAC,OAAM,sBAAsB;AAAC,OAAM,yBAAyB;AAAC,OAAM,4BAA4B;AAAC,SAAOC,QAAQ,IAAIC,CAAC,QAAK,sDAAsD;AAAC,SAAOC,kBAAkB,IAAIC,CAAC,QAAK,qCAAqC;AAAC,OAAOC,CAAC,MAAK,yBAAyB;AAAC,SAAOC,cAAc,IAAIC,CAAC,EAACC,aAAa,IAAIC,CAAC,EAACC,YAAY,IAAIC,CAAC,EAACC,gBAAgB,IAAIC,CAAC,EAACC,KAAK,IAAIC,CAAC,QAAK,iBAAiB;AAAC,OAAOC,CAAC,MAAK,6BAA6B;AAAC,IAAIC,CAAC,GAAC,cAAcZ,CAAC;EAACa,WAAWA,CAAA,EAAE;IAAC,KAAK,CAAC,GAAGC,SAAS,CAAC,EAAC,IAAI,CAACC,YAAY,GAAC,OAAO,EAAC,IAAI,CAACC,iBAAiB,GAAC,IAAI,EAAC,IAAI,CAACC,mBAAmB,GAAC,CAAC,QAAQ,CAAC,EAAC,IAAI,CAACC,MAAM,GAAC,IAAI;EAAA;EAACC,kBAAkBA,CAAA,EAAE;IAAC,MAAM5B,CAAC,GAAC,IAAI,CAAC6B,iBAAiB,CAAC,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC;MAAC;QAACC,SAAS,EAAC7B;MAAC,CAAC,GAACF,CAAC;IAAC,IAAI,CAACgC,eAAe,GAAC,IAAI,CAACC,mBAAmB,CAAC/B,CAAC,CAAC,EAACF,CAAC,CAAC+B,SAAS,GAAC,IAAI,CAACC,eAAe,EAAChC,CAAC,CAACkC,SAAS,GAAC,CAAC;IAAC,MAAK;MAACC,UAAU,EAAC/B;IAAC,CAAC,GAACJ,CAAC;IAAC,IAAI,CAACoC,2BAA2B,CAACpC,CAAC,CAAC;IAAC,MAAK;MAACqC,cAAc,EAAC/B,CAAC;MAACgC,YAAY,EAAC9B,CAAC;MAAC+B,WAAW,EAAC9B,CAAC;MAAC+B,YAAY,EAACzB,CAAC;MAAC0B,yBAAyB,EAACxB;IAAC,CAAC,GAAC,IAAI,CAACQ,iBAAiB;IAAC,IAAG,IAAI,IAAErB,CAAC,IAAEA,CAAC,CAACsC,MAAM,IAAElC,CAAC,EAAEkC,MAAM,EAAC,IAAGpC,CAAC,EAAC;MAAC,MAAMJ,CAAC,GAACyC,IAAI,CAACC,GAAG,CAACC,KAAK,CAAC,IAAI,EAAC,CAAC,GAAGrC,CAAC,EAACJ,CAAC,CAAC,CAAC,CAAC,CAACwC,GAAG,CAAC,CAAC;QAACtC,CAAC,GAACqC,IAAI,CAACG,GAAG,CAACD,KAAK,CAAC,IAAI,EAAC,CAAC,GAAGrC,CAAC,EAACJ,CAAC,CAAC,CAAC,CAAC,CAAC0C,GAAG,CAAC,CAAC;MAAC9C,CAAC,CAACmC,UAAU,GAAC,CAAC;QAAC,GAAG/B,CAAC,CAAC,CAAC,CAAC;QAACwC,GAAG,EAAC1C,CAAC;QAAC4C,GAAG,EAACxC;MAAC,CAAC,CAAC;IAAA,CAAC,MAAI;MAAC,IAAIJ,CAAC,GAACM,CAAC,CAAC,CAAC,CAAC;QAACF,CAAC,GAACJ,CAAC;MAAC,KAAI,IAAIF,CAAC,GAAC,CAAC,EAACA,CAAC,GAACQ,CAAC,CAACkC,MAAM,EAAC1C,CAAC,EAAE,EAACE,CAAC,GAACA,CAAC,GAACM,CAAC,CAACR,CAAC,CAAC,GAACQ,CAAC,CAACR,CAAC,CAAC,GAACE,CAAC,EAACI,CAAC,GAACA,CAAC,GAACE,CAAC,CAACR,CAAC,CAAC,GAACM,CAAC,GAACE,CAAC,CAACR,CAAC,CAAC;MAACA,CAAC,CAACmC,UAAU,GAAC,CAAC;QAAC,GAAG/B,CAAC,CAAC,CAAC,CAAC;QAACwC,GAAG,EAAC1C,CAAC;QAAC4C,GAAG,EAACxC;MAAC,CAAC,CAAC;IAAA;IAAC,IAAI,CAACyC,UAAU,GAAC/C,CAAC,EAAC,IAAI,CAAC2B,MAAM,GAACrB,CAAC,GAAC,IAAI,GAACK,CAAC,CAAC;MAACqC,YAAY,EAAC9C,CAAC;MAACqC,WAAW,EAAC9B,CAAC;MAAC6B,YAAY,EAAC9B,CAAC;MAACgC,YAAY,EAACzB,CAAC;MAACsB,cAAc,EAAC/B,CAAC;MAACmC,yBAAyB,EAACxB,CAAC;MAACe,eAAe,EAAC,IAAI,CAACA;IAAe,CAAC,CAAC;IAAC,OAAM;MAACiB,OAAO,EAAC,CAAC,CAAC;MAACC,WAAW,EAAC,CAAC,CAAC1C,CAAC,IAAEA,CAAC,CAACkC,MAAM,IAAE7B,CAAC,MAAI,CAACE,CAAC,IAAEA,CAAC,CAAC2B,MAAM,IAAE7B,CAAC;IAAC,CAAC;EAAA;EAACsC,cAAcA,CAACnD,CAAC,EAAC;IAAC,MAAME,CAAC,GAACF,CAAC,CAACoD,WAAW,GAAG,CAAC,CAAC;IAAC,IAAG,IAAI,IAAElD,CAAC,EAAC,OAAO,IAAI;IAAC,MAAK;MAACyB,MAAM,EAACvB,CAAC;MAAC4B,eAAe,EAAC1B;IAAC,CAAC,GAAC,IAAI;IAAC,IAAGF,CAAC,EAAC;MAAC,MAAMJ,CAAC,GAACe,CAAC,CAACb,CAAC,EAAC;QAACmD,GAAG,EAAC,CAACjD,CAAC,CAACiD,GAAG,CAAC;QAACC,MAAM,EAAClD,CAAC,CAACkD,MAAM;QAACtB,eAAe,EAAC1B;MAAC,CAAC,CAAC;MAAC,OAAO,IAAI,IAAEN,CAAC,IAAEI,CAAC,CAACmD,IAAI,KAAGvD,CAAC,CAACuD,IAAI,GAACtC,CAAC,CAACf,CAAC,CAACsD,MAAM,CAAC,CAAC,CAAC,EAACtD,CAAC,CAACqD,IAAI,EAACnD,CAAC,CAACmD,IAAI,EAACnD,CAAC,CAACkD,MAAM,EAAC,IAAI,CAAC,CAAC,EAACtD,CAAC;IAAA;IAAC,MAAK;MAACuC,WAAW,EAAC/B,CAAC;MAAC8B,YAAY,EAAC7B,CAAC;MAAC+B,YAAY,EAAC7B,CAAC;MAAC0B,cAAc,EAACxB,CAAC;MAAC4B,yBAAyB,EAACrB;IAAC,CAAC,GAAC,IAAI,CAACK,iBAAiB;IAAC,OAAON,CAAC,CAACjB,CAAC,EAAC;MAACqC,WAAW,EAAC/B,CAAC;MAAC8B,YAAY,EAAC7B,CAAC;MAAC+B,YAAY,EAAC7B,CAAC;MAACqB,eAAe,EAAC1B,CAAC;MAAC+B,cAAc,EAACxB,CAAC;MAAC4B,yBAAyB,EAACrB;IAAC,CAAC,CAAC;EAAA;EAACqC,mBAAmBA,CAAA,EAAE;IAAC,MAAK;QAACpB,cAAc,EAACrC,CAAC;QAACwC,YAAY,EAACpC,CAAC;QAACqC,yBAAyB,EAACnC;MAAC,CAAC,GAAC,IAAI,CAACmB,iBAAiB;MAAChB,CAAC,GAAC,IAAIiD,YAAY,CAAC,CAAC,GAAC7C,CAAC,CAAC;MAACF,CAAC,GAAC,IAAI;MAACI,CAAC,GAAC,IAAI,CAACU,iBAAiB,CAACc,WAAW,IAAE,EAAE;MAACtB,CAAC,GAAC,IAAI,CAACQ,iBAAiB,CAACa,YAAY,IAAE,EAAE;MAACnB,CAAC,GAACF,CAAC,CAACyB,MAAM;IAAC,KAAI,IAAIlC,CAAC,GAAC,CAAC,EAACA,CAAC,GAACK,CAAC,EAACL,CAAC,EAAE,EAACC,CAAC,CAAC,CAAC,GAACD,CAAC,CAAC,GAACO,CAAC,CAAC,CAAC,GAACP,CAAC,CAAC,IAAEN,CAAC,GAAC,CAAC,EAACO,CAAC,CAAC,CAAC,GAACD,CAAC,GAAC,CAAC,CAAC,GAACO,CAAC,CAAC,CAAC,GAACP,CAAC,GAAC,CAAC,CAAC,IAAEN,CAAC,EAACO,CAAC,CAAC,CAAC,GAACD,CAAC,GAAC,CAAC,CAAC,GAACS,CAAC,CAACT,CAAC,CAAC,IAAE,CAAC,EAACA,CAAC,GAACW,CAAC,KAAGX,CAAC,GAAC,CAAC,KAAGC,CAAC,CAAC,CAAC,GAACD,CAAC,CAAC,IAAEG,CAAC,CAAC,EAAC,CAACH,CAAC,GAACW,CAAC,GAAC,CAAC,IAAE,CAACb,CAAC,MAAIG,CAAC,CAAC,CAAC,GAACD,CAAC,GAAC,CAAC,CAAC,IAAEG,CAAC,CAAC,CAAC;IAAC,MAAMS,CAAC,GAAC,IAAIsC,YAAY,CAAC,CAAC,GAAC7C,CAAC,CAAC;IAACO,CAAC,CAACuC,IAAI,CAACzD,CAAC,CAAC,EAACE,CAAC,EAAEsC,MAAM,IAAEtB,CAAC,CAACwC,GAAG,CAACxD,CAAC,CAAC;IAAC,OAAM;MAACiC,cAAc,EAACrC,CAAC;MAAC6D,SAAS,EAACpD,CAAC;MAAC+B,YAAY,EAACpB,CAAC;MAAC0C,UAAU,EAACtD,CAAC,CAAC,IAAI,CAACwB,eAAe;IAAC,CAAC;EAAA;AAAC,CAAC;AAAChC,CAAC,CAAC,CAACI,CAAC,CAAC;EAAC2D,IAAI,EAAC;IAACC,KAAK,EAAC,CAAC,CAAC;IAACC,IAAI,EAAC;EAAgB;AAAC,CAAC,CAAC,CAAC,EAAC5C,CAAC,CAAC6C,SAAS,EAAC,cAAc,EAAC,KAAK,CAAC,CAAC,EAAClE,CAAC,CAAC,CAACI,CAAC,CAAC;EAAC+D,IAAI,EAAC/C,CAAC;EAAC2C,IAAI,EAAC;IAACC,KAAK,EAAC,CAAC,CAAC;IAACC,IAAI,EAAC;EAAyB;AAAC,CAAC,CAAC,CAAC,EAAC5C,CAAC,CAAC6C,SAAS,EAAC,mBAAmB,EAAC,KAAK,CAAC,CAAC,EAAClE,CAAC,CAAC,CAACI,CAAC,CAAC,CAAC,CAAC,EAACiB,CAAC,CAAC6C,SAAS,EAAC,qBAAqB,EAAC,KAAK,CAAC,CAAC,EAAClE,CAAC,CAAC,CAACI,CAAC,CAAC;EAAC2D,IAAI,EAAC;IAACC,KAAK,EAAC,CAAC;EAAC;AAAC,CAAC,CAAC,CAAC,EAAC3C,CAAC,CAAC6C,SAAS,EAAC,QAAQ,EAAC,KAAK,CAAC,CAAC,EAAC7C,CAAC,GAACrB,CAAC,CAAC,CAACM,CAAC,CAAC,mDAAmD,CAAC,CAAC,EAACe,CAAC,CAAC;AAAC,MAAM+C,CAAC,GAAC/C,CAAC;AAAC,SAAO+C,CAAC,IAAIC,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}