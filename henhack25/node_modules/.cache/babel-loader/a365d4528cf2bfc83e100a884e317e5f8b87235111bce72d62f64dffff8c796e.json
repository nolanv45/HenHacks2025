{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from \"../../Graphic.js\";\nimport t from \"../../core/Logger.js\";\nimport { getOrCreateMapValue as r } from \"../../core/MapUtils.js\";\nimport s from \"../../geometry/Extent.js\";\nimport o from \"../../geometry/Mesh.js\";\nimport n from \"../../geometry/SpatialReference.js\";\nimport { ServiceAssetPart as a, ServiceAsset as u } from \"../../geometry/support/meshUtils/External.js\";\nimport { getFormatIdMimeType as i } from \"../../layers/support/infoFor3D.js\";\nimport f from \"./FeatureSet.js\";\nimport { extractMeshFeatureOrigin as m, extractMeshFeatureTransform as c } from \"./meshFeatureAttributes.js\";\nconst p = () => t.getLogger(\"esri.rest.support.meshFeatureSet\");\nfunction l(t, r, s) {\n  const o = s.features;\n  s.features = [], delete s.geometryType;\n  const a = f.fromJSON(s);\n  if (a.geometryType = \"mesh\", !s.assetMaps) return a;\n  const u = g(r, s.assetMaps),\n    i = t.sourceSpatialReference ?? n.WGS84,\n    m = s.globalIdFieldName,\n    {\n      outFields: c\n    } = t,\n    p = null != c && c.length > 0 ? y(c.includes(\"*\") ? null : new Set(c)) : () => ({});\n  for (const n of o) {\n    const t = E(n, m, i, r, u);\n    a.features.push(new e({\n      geometry: t,\n      attributes: p(n)\n    }));\n  }\n  return a;\n}\nfunction y(e) {\n  return ({\n    attributes: t\n  }) => {\n    if (!t) return {};\n    if (!e) return t;\n    for (const r in t) e.has(r) || delete t[r];\n    return t;\n  };\n}\nfunction E(e, t, r, n, a) {\n  const u = e.attributes[t],\n    i = a.get(u);\n  if (null == i || !e.geometry) return null;\n  const f = m(e.attributes, r, n.transformFieldRoles),\n    p = s.fromJSON(e.geometry);\n  p.spatialReference = r;\n  const l = c(e.attributes, n.transformFieldRoles),\n    y = r.isGeographic ? \"local\" : \"georeferenced\",\n    E = d(i);\n  return E ? o.createWithExternalSource(f, E, {\n    extent: p,\n    transform: l,\n    vertexSpace: y,\n    unitConversionDisabled: !0\n  }) : o.createIncomplete(f, {\n    extent: p,\n    transform: l,\n    vertexSpace: y\n  });\n}\nvar h;\nfunction g(e, t) {\n  const s = new Map();\n  for (const o of t) {\n    const t = o.parentGlobalId;\n    if (null == t) continue;\n    const n = o.assetName,\n      a = o.assetType,\n      u = o.assetHash,\n      f = o.assetURL,\n      m = o.conversionStatus,\n      c = o.seqNo,\n      l = i(a, e.supportedFormats);\n    if (!l) {\n      p().error(\"mesh-feature-set:unknown-format\", `Service returned an asset of type ${a}, but it does not list it as a supported type`);\n      continue;\n    }\n    const y = r(s, t, () => ({\n      files: new Map()\n    }));\n    r(y.files, n, () => ({\n      name: n,\n      type: a,\n      mimeType: l,\n      status: S(m),\n      parts: []\n    })).parts[c] = {\n      hash: u,\n      url: f\n    };\n  }\n  return s;\n}\nfunction d(e) {\n  const t = Array.from(e.files.values()),\n    r = new Array();\n  for (const s of t) {\n    if (s.status !== h.COMPLETED) return null;\n    const e = new Array();\n    for (const t of s.parts) {\n      if (!t) return null;\n      e.push(new a(t.url, t.hash));\n    }\n    r.push(new u(s.name, s.mimeType, e));\n  }\n  return r;\n}\nfunction S(e) {\n  switch (e) {\n    case \"COMPLETED\":\n    case \"SUBMITTED\":\n      return h.COMPLETED;\n    case \"INPROGRESS\":\n      return h.PENDING;\n    default:\n      return h.FAILED;\n  }\n}\n!function (e) {\n  e[e.FAILED = 0] = \"FAILED\", e[e.PENDING = 1] = \"PENDING\", e[e.COMPLETED = 2] = \"COMPLETED\";\n}(h || (h = {}));\nexport { g as assetMapFromAssetMapsJSON, E as extractMesh, l as meshFeatureSetFromJSON };","map":{"version":3,"names":["e","t","getOrCreateMapValue","r","s","o","n","ServiceAssetPart","a","ServiceAsset","u","getFormatIdMimeType","i","f","extractMeshFeatureOrigin","m","extractMeshFeatureTransform","c","p","getLogger","l","features","geometryType","fromJSON","assetMaps","g","sourceSpatialReference","WGS84","globalIdFieldName","outFields","length","y","includes","Set","E","push","geometry","attributes","has","get","transformFieldRoles","spatialReference","isGeographic","d","createWithExternalSource","extent","transform","vertexSpace","unitConversionDisabled","createIncomplete","h","Map","parentGlobalId","assetName","assetType","assetHash","assetURL","conversionStatus","seqNo","supportedFormats","error","files","name","type","mimeType","status","S","parts","hash","url","Array","from","values","COMPLETED","PENDING","FAILED","assetMapFromAssetMapsJSON","extractMesh","meshFeatureSetFromJSON"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/rest/support/meshFeatureSet.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../Graphic.js\";import t from\"../../core/Logger.js\";import{getOrCreateMapValue as r}from\"../../core/MapUtils.js\";import s from\"../../geometry/Extent.js\";import o from\"../../geometry/Mesh.js\";import n from\"../../geometry/SpatialReference.js\";import{ServiceAssetPart as a,ServiceAsset as u}from\"../../geometry/support/meshUtils/External.js\";import{getFormatIdMimeType as i}from\"../../layers/support/infoFor3D.js\";import f from\"./FeatureSet.js\";import{extractMeshFeatureOrigin as m,extractMeshFeatureTransform as c}from\"./meshFeatureAttributes.js\";const p=()=>t.getLogger(\"esri.rest.support.meshFeatureSet\");function l(t,r,s){const o=s.features;s.features=[],delete s.geometryType;const a=f.fromJSON(s);if(a.geometryType=\"mesh\",!s.assetMaps)return a;const u=g(r,s.assetMaps),i=t.sourceSpatialReference??n.WGS84,m=s.globalIdFieldName,{outFields:c}=t,p=null!=c&&c.length>0?y(c.includes(\"*\")?null:new Set(c)):()=>({});for(const n of o){const t=E(n,m,i,r,u);a.features.push(new e({geometry:t,attributes:p(n)}))}return a}function y(e){return({attributes:t})=>{if(!t)return{};if(!e)return t;for(const r in t)e.has(r)||delete t[r];return t}}function E(e,t,r,n,a){const u=e.attributes[t],i=a.get(u);if(null==i||!e.geometry)return null;const f=m(e.attributes,r,n.transformFieldRoles),p=s.fromJSON(e.geometry);p.spatialReference=r;const l=c(e.attributes,n.transformFieldRoles),y=r.isGeographic?\"local\":\"georeferenced\",E=d(i);return E?o.createWithExternalSource(f,E,{extent:p,transform:l,vertexSpace:y,unitConversionDisabled:!0}):o.createIncomplete(f,{extent:p,transform:l,vertexSpace:y})}var h;function g(e,t){const s=new Map;for(const o of t){const t=o.parentGlobalId;if(null==t)continue;const n=o.assetName,a=o.assetType,u=o.assetHash,f=o.assetURL,m=o.conversionStatus,c=o.seqNo,l=i(a,e.supportedFormats);if(!l){p().error(\"mesh-feature-set:unknown-format\",`Service returned an asset of type ${a}, but it does not list it as a supported type`);continue}const y=r(s,t,(()=>({files:new Map})));r(y.files,n,(()=>({name:n,type:a,mimeType:l,status:S(m),parts:[]}))).parts[c]={hash:u,url:f}}return s}function d(e){const t=Array.from(e.files.values()),r=new Array;for(const s of t){if(s.status!==h.COMPLETED)return null;const e=new Array;for(const t of s.parts){if(!t)return null;e.push(new a(t.url,t.hash))}r.push(new u(s.name,s.mimeType,e))}return r}function S(e){switch(e){case\"COMPLETED\":case\"SUBMITTED\":return h.COMPLETED;case\"INPROGRESS\":return h.PENDING;default:return h.FAILED}}!function(e){e[e.FAILED=0]=\"FAILED\",e[e.PENDING=1]=\"PENDING\",e[e.COMPLETED=2]=\"COMPLETED\"}(h||(h={}));export{g as assetMapFromAssetMapsJSON,E as extractMesh,l as meshFeatureSetFromJSON};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}