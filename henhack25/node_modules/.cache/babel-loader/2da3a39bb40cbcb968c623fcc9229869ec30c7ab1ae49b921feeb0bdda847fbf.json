{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from \"../../../../core/Logger.js\";\nimport { throwIfAborted as t } from \"../../../../core/promiseUtils.js\";\nimport { hydrateGeometry as r } from \"../../../../layers/graphics/hydratedFeatures.js\";\nimport { loadArcade as n } from \"../../../../support/arcadeOnDemand.js\";\nconst c = () => e.getLogger(\"esri.views.3d.layers.graphics.featureExpressionInfoUtils\");\nfunction o(e) {\n  return {\n    cachedResult: e.cachedResult,\n    arcade: e.arcade ? {\n      func: e.arcade.func,\n      context: e.arcade.modules.arcadeUtils.createExecContext(null, {\n        sr: e.arcade.context.spatialReference\n      }),\n      modules: e.arcade.modules\n    } : null\n  };\n}\nfunction u(e) {\n  const t = e?.expression;\n  if (\"string\" == typeof t) {\n    const e = m(t);\n    if (null != e) return {\n      cachedResult: e\n    };\n  }\n  return null;\n}\nasync function a(e, r, c, o) {\n  const u = e?.expression;\n  if (\"string\" != typeof u) return null;\n  const a = m(u);\n  if (null != a) return {\n    cachedResult: a\n  };\n  const s = await n();\n  t(c);\n  const l = s.arcadeUtils,\n    i = l.createSyntaxTree(u);\n  return l.dependsOnView(i) ? (null != o && o.error(\"Expressions containing '$view' are not supported on ElevationInfo\"), {\n    cachedResult: 0\n  }) : {\n    arcade: {\n      func: l.createFunction(i),\n      context: l.createExecContext(null, {\n        sr: r\n      }),\n      modules: s\n    }\n  };\n}\nfunction s(e, t, r) {\n  return e.arcadeUtils.createFeature(t.attributes, t.geometry, r);\n}\nfunction l(e, t) {\n  if (null != e && !p(e)) {\n    if (!t || !e.arcade) return void c().errorOncePerTick(\"Arcade support required but not provided\");\n    const n = t;\n    n._geometry && (n._geometry = r(n._geometry)), e.arcade.modules.arcadeUtils.updateExecContext(e.arcade.context, t);\n  }\n}\nfunction i(e) {\n  if (null != e) {\n    if (p(e)) return e.cachedResult;\n    const t = e.arcade;\n    let r = t?.modules.arcadeUtils.executeFunction(t.func, t.context);\n    return \"number\" != typeof r && (e.cachedResult = 0, r = 0), r;\n  }\n  return 0;\n}\nfunction d(e) {\n  let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n  let r = e?.featureExpressionInfo;\n  const n = r?.expression;\n  return t || \"0\" === n || (r = null), r ?? null;\n}\nconst f = {\n  cachedResult: 0\n};\nfunction p(e) {\n  return null != e.cachedResult;\n}\nfunction m(e) {\n  return \"0\" === e ? 0 : null;\n}\nexport { o as clone, a as createContext, u as createContextWithoutExpressionSupport, s as createFeature, i as execute, d as extractExpressionInfo, l as setContextFeature, f as zeroContext };","map":{"version":3,"names":["e","throwIfAborted","t","hydrateGeometry","r","loadArcade","n","c","getLogger","o","cachedResult","arcade","func","context","modules","arcadeUtils","createExecContext","sr","spatialReference","u","expression","m","a","s","l","i","createSyntaxTree","dependsOnView","error","createFunction","createFeature","attributes","geometry","p","errorOncePerTick","_geometry","updateExecContext","executeFunction","d","arguments","length","undefined","featureExpressionInfo","f","clone","createContext","createContextWithoutExpressionSupport","execute","extractExpressionInfo","setContextFeature","zeroContext"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/3d/layers/graphics/featureExpressionInfoUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Logger.js\";import{throwIfAborted as t}from\"../../../../core/promiseUtils.js\";import{hydrateGeometry as r}from\"../../../../layers/graphics/hydratedFeatures.js\";import{loadArcade as n}from\"../../../../support/arcadeOnDemand.js\";const c=()=>e.getLogger(\"esri.views.3d.layers.graphics.featureExpressionInfoUtils\");function o(e){return{cachedResult:e.cachedResult,arcade:e.arcade?{func:e.arcade.func,context:e.arcade.modules.arcadeUtils.createExecContext(null,{sr:e.arcade.context.spatialReference}),modules:e.arcade.modules}:null}}function u(e){const t=e?.expression;if(\"string\"==typeof t){const e=m(t);if(null!=e)return{cachedResult:e}}return null}async function a(e,r,c,o){const u=e?.expression;if(\"string\"!=typeof u)return null;const a=m(u);if(null!=a)return{cachedResult:a};const s=await n();t(c);const l=s.arcadeUtils,i=l.createSyntaxTree(u);return l.dependsOnView(i)?(null!=o&&o.error(\"Expressions containing '$view' are not supported on ElevationInfo\"),{cachedResult:0}):{arcade:{func:l.createFunction(i),context:l.createExecContext(null,{sr:r}),modules:s}}}function s(e,t,r){return e.arcadeUtils.createFeature(t.attributes,t.geometry,r)}function l(e,t){if(null!=e&&!p(e)){if(!t||!e.arcade)return void c().errorOncePerTick(\"Arcade support required but not provided\");const n=t;n._geometry&&(n._geometry=r(n._geometry)),e.arcade.modules.arcadeUtils.updateExecContext(e.arcade.context,t)}}function i(e){if(null!=e){if(p(e))return e.cachedResult;const t=e.arcade;let r=t?.modules.arcadeUtils.executeFunction(t.func,t.context);return\"number\"!=typeof r&&(e.cachedResult=0,r=0),r}return 0}function d(e,t=!1){let r=e?.featureExpressionInfo;const n=r?.expression;return t||\"0\"===n||(r=null),r??null}const f={cachedResult:0};function p(e){return null!=e.cachedResult}function m(e){return\"0\"===e?0:null}export{o as clone,a as createContext,u as createContextWithoutExpressionSupport,s as createFeature,i as execute,d as extractExpressionInfo,l as setContextFeature,f as zeroContext};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}