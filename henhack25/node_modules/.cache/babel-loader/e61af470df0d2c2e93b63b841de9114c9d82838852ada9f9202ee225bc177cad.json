{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../core/Accessor.js\";\nimport { getOrCreateMapValue as s } from \"../../../core/MapUtils.js\";\nimport { destroyMaybe as o } from \"../../../core/maybe.js\";\nimport { someSet as r } from \"../../../core/SetUtils.js\";\nimport { property as i } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/Logger.js\";\nimport \"../../../core/RandomLCG.js\";\nimport { subclass as c } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { distance as u } from \"../../../core/libs/gl-matrix-2/math/vec2.js\";\nimport { ScheduledQueueProcessor as n } from \"../../support/ScheduledQueueProcessor.js\";\nconst l = [0, 0];\nlet h = class extends t {\n  constructor(e) {\n    super(e), this._keyToItem = new Map(), this._tilesByScale = new Map(), this.concurrency = 6;\n  }\n  initialize() {\n    const {\n      concurrency: e,\n      process: t,\n      scheduler: s,\n      priority: o\n    } = this;\n    this._queue = new n({\n      concurrency: e,\n      scheduler: s,\n      priority: o,\n      process: (e, s) => {\n        const o = this._keyToItem.get(e);\n        return t(o, {\n          signal: s\n        });\n      },\n      peeker: e => this._peek(e)\n    });\n  }\n  destroy() {\n    this.clear(), this._queue = o(this._queue);\n  }\n  get length() {\n    return this._queue ? this._queue.length : 0;\n  }\n  abort(e) {\n    const t = \"string\" == typeof e ? e : e.id;\n    this._queue.abort(t);\n  }\n  clear() {\n    this._queue.clear(), this._keyToItem.clear(), this._tilesByScale.clear();\n  }\n  has(e) {\n    return \"string\" == typeof e ? this._keyToItem.has(e) : this._keyToItem.has(e.id);\n  }\n  pause() {\n    this._queue.pause();\n  }\n  push(e) {\n    const t = e.key.id;\n    if (this._queue.has(t)) return this._queue.get(t);\n    const o = this._queue.push(t),\n      r = this.tileInfoView.getTileScale(e.key),\n      i = s(this._tilesByScale, r, () => new Set()),\n      c = () => {\n        i.delete(e.key), 0 === i.size && this._tilesByScale.delete(r), this._keyToItem.delete(t);\n      };\n    return i.add(e.key), this._keyToItem.set(t, e), o.then(c, c), o;\n  }\n  reset() {\n    this._queue.reset();\n  }\n  resume() {\n    this._queue.resume();\n  }\n  _peek(e) {\n    if (!this.state) return e.values().next().value;\n    const t = new Set();\n    for (const r of e) t.add(this._keyToItem.get(r).key);\n    const s = this.state.scale;\n    let o,\n      i = Number.POSITIVE_INFINITY;\n    for (const [c, u] of this._tilesByScale) {\n      if (r(u, e => t.has(e))) {\n        const e = Math.abs(c - s);\n        e < i && (o = u, i = e);\n      }\n    }\n    return this._getClosestTileKey(o, e).id;\n  }\n  _getClosestTileKey(e, t) {\n    const s = this.tileInfoView,\n      o = this.state.center;\n    let r,\n      i = Number.POSITIVE_INFINITY;\n    for (const c of e) if (t.has(c.id)) {\n      s.getTileCoords(l, c);\n      const e = u(l, o);\n      e < i && (i = e, r = c);\n    }\n    return r;\n  }\n};\ne([i({\n  constructOnly: !0\n})], h.prototype, \"concurrency\", void 0), e([i({\n  constructOnly: !0\n})], h.prototype, \"priority\", void 0), e([i({\n  constructOnly: !0\n})], h.prototype, \"process\", void 0), e([i({\n  constructOnly: !0\n})], h.prototype, \"scheduler\", void 0), e([i()], h.prototype, \"state\", void 0), e([i({\n  constructOnly: !0\n})], h.prototype, \"tileInfoView\", void 0), h = e([c(\"esri.views.2d.tiling.TileQueue\")], h);\nconst p = h;\nexport { p as default };","map":{"version":3,"names":["_","e","t","getOrCreateMapValue","s","destroyMaybe","o","someSet","r","property","i","subclass","c","distance","u","ScheduledQueueProcessor","n","l","h","constructor","_keyToItem","Map","_tilesByScale","concurrency","initialize","process","scheduler","priority","_queue","get","signal","peeker","_peek","destroy","clear","length","abort","id","has","pause","push","key","tileInfoView","getTileScale","Set","delete","size","add","set","then","reset","resume","state","values","next","value","scale","Number","POSITIVE_INFINITY","Math","abs","_getClosestTileKey","center","getTileCoords","constructOnly","prototype","p","default"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/tiling/TileQueue.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import{getOrCreateMapValue as s}from\"../../../core/MapUtils.js\";import{destroyMaybe as o}from\"../../../core/maybe.js\";import{someSet as r}from\"../../../core/SetUtils.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as c}from\"../../../core/accessorSupport/decorators/subclass.js\";import{distance as u}from\"../../../core/libs/gl-matrix-2/math/vec2.js\";import{ScheduledQueueProcessor as n}from\"../../support/ScheduledQueueProcessor.js\";const l=[0,0];let h=class extends t{constructor(e){super(e),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:e,process:t,scheduler:s,priority:o}=this;this._queue=new n({concurrency:e,scheduler:s,priority:o,process:(e,s)=>{const o=this._keyToItem.get(e);return t(o,{signal:s})},peeker:e=>this._peek(e)})}destroy(){this.clear(),this._queue=o(this._queue)}get length(){return this._queue?this._queue.length:0}abort(e){const t=\"string\"==typeof e?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(e){return\"string\"==typeof e?this._keyToItem.has(e):this._keyToItem.has(e.id)}pause(){this._queue.pause()}push(e){const t=e.key.id;if(this._queue.has(t))return this._queue.get(t);const o=this._queue.push(t),r=this.tileInfoView.getTileScale(e.key),i=s(this._tilesByScale,r,(()=>new Set)),c=()=>{i.delete(e.key),0===i.size&&this._tilesByScale.delete(r),this._keyToItem.delete(t)};return i.add(e.key),this._keyToItem.set(t,e),o.then(c,c),o}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(e){if(!this.state)return e.values().next().value;const t=new Set;for(const r of e)t.add(this._keyToItem.get(r).key);const s=this.state.scale;let o,i=Number.POSITIVE_INFINITY;for(const[c,u]of this._tilesByScale){if(r(u,(e=>t.has(e)))){const e=Math.abs(c-s);e<i&&(o=u,i=e)}}return this._getClosestTileKey(o,e).id}_getClosestTileKey(e,t){const s=this.tileInfoView,o=this.state.center;let r,i=Number.POSITIVE_INFINITY;for(const c of e)if(t.has(c.id)){s.getTileCoords(l,c);const e=u(l,o);e<i&&(i=e,r=c)}return r}};e([i({constructOnly:!0})],h.prototype,\"concurrency\",void 0),e([i({constructOnly:!0})],h.prototype,\"priority\",void 0),e([i({constructOnly:!0})],h.prototype,\"process\",void 0),e([i({constructOnly:!0})],h.prototype,\"scheduler\",void 0),e([i()],h.prototype,\"state\",void 0),e([i({constructOnly:!0})],h.prototype,\"tileInfoView\",void 0),h=e([c(\"esri.views.2d.tiling.TileQueue\")],h);const p=h;export{p as default};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}