{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { throwIfAborted as t } from \"../../../../../core/promiseUtils.js\";\nimport { areStreamlinesCompatible as e, setUniforms as a } from \"../utils.js\";\nimport { BufferObject as s } from \"../../../../webgl/BufferObject.js\";\nimport { DataType as r, BlendFactor as i, PrimitiveType as o, Usage as n } from \"../../../../webgl/enums.js\";\nimport { VertexArrayObject as m } from \"../../../../webgl/VertexArrayObject.js\";\nimport { VertexElementDescriptor as p } from \"../../../../webgl/VertexElementDescriptor.js\";\nclass _ {\n  constructor(t) {\n    this._params = t;\n  }\n  get animated() {\n    return this._params.flowSpeed > 0;\n  }\n  isCompatible(t) {\n    return t instanceof _ && e(this._params, t._params);\n  }\n  async load(e, a) {\n    const {\n      extent: s,\n      size: r\n    } = e;\n    t(a);\n    const i = await this._params.loadImagery(s, r[0], r[1], this._params.timeExtent, a),\n      {\n        vertexData: o,\n        indexData: n\n      } = await this._params.createFlowMesh(\"Particles\", this._params.simulationSettings, i, a);\n    return new c(o, n, {\n      color: this._params.color,\n      opacity: this._params.opacity,\n      size: this._params.size\n    });\n  }\n  render(t, e, s) {\n    const {\n        context: n\n      } = t,\n      {\n        program: m\n      } = s;\n    n.setFaceCullingEnabled(!1), n.setBlendingEnabled(!0), n.setBlendFunction(i.ONE, i.ONE_MINUS_SRC_ALPHA), n.useProgram(m), m.setUniform1f(\"u_time\", e.time), m.setUniform1f(\"u_trailLength\", this._params.trailLength), m.setUniform1f(\"u_flowSpeed\", this._params.flowSpeed), m.setUniform1f(\"u_featheringSize\", this._params.featheringSize), m.setUniform1f(\"u_featheringOffset\", this._params.featheringOffset), m.setUniform1f(\"u_introFade\", this._params.introFade ? 1 : 0), m.setUniform1f(\"u_fadeToZero\", this._params.fadeToZero ? 1 : 0), m.setUniform1f(\"u_decayRate\", this._params.decayRate), m.setUniformMatrix3fv(\"u_dvsMat3\", e.dvsMat3), m.setUniformMatrix3fv(\"u_displayViewMat3\", e.displayViewMat3), a(m, \"color\", \"vec4\", this._params.color), a(m, \"opacity\", \"float\", this._params.opacity), a(m, \"size\", \"float\", this._params.size), n.bindVAO(s.vertexArray), n.drawElements(o.TRIANGLES, s.indexCount, r.UNSIGNED_INT, 0);\n  }\n}\nconst h = new Map();\nh.set(\"a_xyts0\", 0), h.set(\"a_xyts1\", 1), h.set(\"a_typeIdDurationSeed\", 2), h.set(\"a_extrudeInfo\", 3);\nconst l = new Map([[\"geometry\", [new p(\"a_xyts0\", 4, r.FLOAT, 0, 64), new p(\"a_xyts1\", 4, r.FLOAT, 16, 64), new p(\"a_typeIdDurationSeed\", 4, r.FLOAT, 32, 64), new p(\"a_extrudeInfo\", 4, r.FLOAT, 48, 64)]]]),\n  f = {\n    vsPath: \"raster/flow/particles\",\n    fsPath: \"raster/flow/particles\",\n    attributes: h\n  };\nclass c {\n  constructor(t, e, a) {\n    this._vertexData = t, this._indexData = e, this._values = a;\n  }\n  attach(t) {\n    const {\n        context: e\n      } = t,\n      a = s.createVertex(e, n.STATIC_DRAW, this._vertexData),\n      r = s.createIndex(e, n.STATIC_DRAW, this._indexData),\n      i = new Map([[\"geometry\", a]]),\n      o = new m(e, h, l, i, r),\n      p = [];\n    \"ramp\" === this._values.color.kind && p.push(\"vvColor\"), \"ramp\" === this._values.opacity.kind && p.push(\"vvOpacity\"), \"ramp\" === this._values.size.kind && p.push(\"vvSize\");\n    const _ = t.getProgram(f, p);\n    this.vertexArray = o, this.program = _, this.indexCount = this._indexData.length, this._vertexData = null, this._indexData = null;\n  }\n  detach() {\n    this.vertexArray.dispose();\n  }\n  get ready() {\n    return this.program.compiled;\n  }\n}\nexport { _ as Particles, c as ParticlesResources };","map":{"version":3,"names":["throwIfAborted","t","areStreamlinesCompatible","e","setUniforms","a","BufferObject","s","DataType","r","BlendFactor","i","PrimitiveType","o","Usage","n","VertexArrayObject","m","VertexElementDescriptor","p","_","constructor","_params","animated","flowSpeed","isCompatible","load","extent","size","loadImagery","timeExtent","vertexData","indexData","createFlowMesh","simulationSettings","c","color","opacity","render","context","program","setFaceCullingEnabled","setBlendingEnabled","setBlendFunction","ONE","ONE_MINUS_SRC_ALPHA","useProgram","setUniform1f","time","trailLength","featheringSize","featheringOffset","introFade","fadeToZero","decayRate","setUniformMatrix3fv","dvsMat3","displayViewMat3","bindVAO","vertexArray","drawElements","TRIANGLES","indexCount","UNSIGNED_INT","h","Map","set","l","FLOAT","f","vsPath","fsPath","attributes","_vertexData","_indexData","_values","attach","createVertex","STATIC_DRAW","createIndex","kind","push","getProgram","length","detach","dispose","ready","compiled","Particles","ParticlesResources"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/engine/flow/styles/Particles.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{throwIfAborted as t}from\"../../../../../core/promiseUtils.js\";import{areStreamlinesCompatible as e,setUniforms as a}from\"../utils.js\";import{BufferObject as s}from\"../../../../webgl/BufferObject.js\";import{DataType as r,BlendFactor as i,PrimitiveType as o,Usage as n}from\"../../../../webgl/enums.js\";import{VertexArrayObject as m}from\"../../../../webgl/VertexArrayObject.js\";import{VertexElementDescriptor as p}from\"../../../../webgl/VertexElementDescriptor.js\";class _{constructor(t){this._params=t}get animated(){return this._params.flowSpeed>0}isCompatible(t){return t instanceof _&&e(this._params,t._params)}async load(e,a){const{extent:s,size:r}=e;t(a);const i=await this._params.loadImagery(s,r[0],r[1],this._params.timeExtent,a),{vertexData:o,indexData:n}=await this._params.createFlowMesh(\"Particles\",this._params.simulationSettings,i,a);return new c(o,n,{color:this._params.color,opacity:this._params.opacity,size:this._params.size})}render(t,e,s){const{context:n}=t,{program:m}=s;n.setFaceCullingEnabled(!1),n.setBlendingEnabled(!0),n.setBlendFunction(i.ONE,i.ONE_MINUS_SRC_ALPHA),n.useProgram(m),m.setUniform1f(\"u_time\",e.time),m.setUniform1f(\"u_trailLength\",this._params.trailLength),m.setUniform1f(\"u_flowSpeed\",this._params.flowSpeed),m.setUniform1f(\"u_featheringSize\",this._params.featheringSize),m.setUniform1f(\"u_featheringOffset\",this._params.featheringOffset),m.setUniform1f(\"u_introFade\",this._params.introFade?1:0),m.setUniform1f(\"u_fadeToZero\",this._params.fadeToZero?1:0),m.setUniform1f(\"u_decayRate\",this._params.decayRate),m.setUniformMatrix3fv(\"u_dvsMat3\",e.dvsMat3),m.setUniformMatrix3fv(\"u_displayViewMat3\",e.displayViewMat3),a(m,\"color\",\"vec4\",this._params.color),a(m,\"opacity\",\"float\",this._params.opacity),a(m,\"size\",\"float\",this._params.size),n.bindVAO(s.vertexArray),n.drawElements(o.TRIANGLES,s.indexCount,r.UNSIGNED_INT,0)}}const h=new Map;h.set(\"a_xyts0\",0),h.set(\"a_xyts1\",1),h.set(\"a_typeIdDurationSeed\",2),h.set(\"a_extrudeInfo\",3);const l=new Map([[\"geometry\",[new p(\"a_xyts0\",4,r.FLOAT,0,64),new p(\"a_xyts1\",4,r.FLOAT,16,64),new p(\"a_typeIdDurationSeed\",4,r.FLOAT,32,64),new p(\"a_extrudeInfo\",4,r.FLOAT,48,64)]]]),f={vsPath:\"raster/flow/particles\",fsPath:\"raster/flow/particles\",attributes:h};class c{constructor(t,e,a){this._vertexData=t,this._indexData=e,this._values=a}attach(t){const{context:e}=t,a=s.createVertex(e,n.STATIC_DRAW,this._vertexData),r=s.createIndex(e,n.STATIC_DRAW,this._indexData),i=new Map([[\"geometry\",a]]),o=new m(e,h,l,i,r),p=[];\"ramp\"===this._values.color.kind&&p.push(\"vvColor\"),\"ramp\"===this._values.opacity.kind&&p.push(\"vvOpacity\"),\"ramp\"===this._values.size.kind&&p.push(\"vvSize\");const _=t.getProgram(f,p);this.vertexArray=o,this.program=_,this.indexCount=this._indexData.length,this._vertexData=null,this._indexData=null}detach(){this.vertexArray.dispose()}get ready(){return this.program.compiled}}export{_ as Particles,c as ParticlesResources};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}