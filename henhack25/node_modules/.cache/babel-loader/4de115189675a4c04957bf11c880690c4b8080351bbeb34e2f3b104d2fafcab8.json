{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport \"../../../../core/has.js\";\nimport { generateUID as t } from \"../../../../core/uid.js\";\nimport { d as i } from \"../../../../chunks/vec32.js\";\nimport { create as r } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { fromValues as o } from \"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";\nimport { projectBuffer as s } from \"../../../../geometry/projection/projectBuffer.js\";\nimport { Attribute as e } from \"./Attribute.js\";\nimport { ContentObjectType as n } from \"./ContentObjectType.js\";\nimport { Geometry as a } from \"./Geometry.js\";\nimport { fromValues as h } from \"./LocalOriginFactory.js\";\nimport { Object3D as m } from \"./Object3D.js\";\nimport { gridLocalOriginFactory as c } from \"./testUtils.js\";\nimport { VertexAttribute as g } from \"./VertexAttribute.js\";\nimport { WebGLLayer as d } from \"./WebGLLayer.js\";\nimport { RibbonLineMaterial as f } from \"../materials/RibbonLineMaterial.js\";\nclass _ {\n  constructor(i) {\n    this._originSR = i, this._rootOriginId = \"root/\" + t(), this._origins = new Map(), this._objects = new Map(), this._gridSize = 5e5;\n  }\n  getOrigin(t) {\n    const r = this._origins.get(this._rootOriginId);\n    if (null == r) {\n      const i = c.rootOrigin;\n      if (null != i) return this._origins.set(this._rootOriginId, h(i[0], i[1], i[2], this._rootOriginId)), this.getOrigin(t);\n      const r = h(t[0] + Math.random() - .5, t[1] + Math.random() - .5, t[2] + Math.random() - .5, this._rootOriginId);\n      return this._origins.set(this._rootOriginId, r), r;\n    }\n    const o = this._gridSize,\n      s = Math.round(t[0] / o),\n      e = Math.round(t[1] / o),\n      n = Math.round(t[2] / o),\n      a = `${s}/${e}/${n}`;\n    let m = this._origins.get(a);\n    const g = .5 * o;\n    if (i(l, t, r.vec3), l[0] = Math.abs(l[0]), l[1] = Math.abs(l[1]), l[2] = Math.abs(l[2]), l[0] < g && l[1] < g && l[2] < g) {\n      if (m) {\n        const r = Math.max(...l);\n        i(l, t, m.vec3), l[0] = Math.abs(l[0]), l[1] = Math.abs(l[1]), l[2] = Math.abs(l[2]);\n        if (Math.max(...l) < r) return m;\n      }\n      return r;\n    }\n    return m || (m = h(s * o, e * o, n * o, a), this._origins.set(a, m)), m;\n  }\n  _drawOriginBox(t) {\n    let i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : o(1, 1, 0, 1);\n    const r = window.view,\n      h = r._stage,\n      c = i.toString();\n    if (!this._objects.has(c)) {\n      this._material = new f({\n        width: 2,\n        color: i\n      }), h.add(this._material);\n      const t = new d(h, {\n          pickable: !1\n        }),\n        r = new m({\n          castShadow: !1\n        });\n      h.add(r), t.add(r), this._objects.set(c, r);\n    }\n    const _ = this._objects.get(c),\n      l = [0, 1, 5, 4, 0, 2, 1, 7, 6, 2, 0, 1, 3, 7, 5, 4, 6, 2, 0],\n      p = l.length,\n      j = new Array(3 * p),\n      b = new Array(),\n      u = .5 * this._gridSize;\n    for (let o = 0; o < p; o++) j[3 * o] = t[0] + (1 & l[o] ? u : -u), j[3 * o + 1] = t[1] + (2 & l[o] ? u : -u), j[3 * o + 2] = t[2] + (4 & l[o] ? u : -u), o > 0 && b.push(o - 1, o);\n    s(j, this._originSR, 0, j, r.renderSpatialReference, 0, p);\n    const M = new a(this._material, [[g.POSITION, new e(j, b, 3, !0)]], null, n.Line);\n    h.add(M), _.addGeometry(M);\n  }\n  get test() {}\n}\nconst l = r();\nexport { _ as GridLocalOriginFactory };","map":{"version":3,"names":["generateUID","t","d","i","create","r","fromValues","o","projectBuffer","s","Attribute","e","ContentObjectType","n","Geometry","a","h","Object3D","m","gridLocalOriginFactory","c","VertexAttribute","g","WebGLLayer","RibbonLineMaterial","f","_","constructor","_originSR","_rootOriginId","_origins","Map","_objects","_gridSize","getOrigin","get","rootOrigin","set","Math","random","round","l","vec3","abs","max","_drawOriginBox","arguments","length","undefined","window","view","_stage","toString","has","_material","width","color","add","pickable","castShadow","p","j","Array","b","u","push","renderSpatialReference","M","POSITION","Line","addGeometry","test","GridLocalOriginFactory"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/3d/webgl-engine/lib/GridLocalOriginFactory.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{generateUID as t}from\"../../../../core/uid.js\";import{d as i}from\"../../../../chunks/vec32.js\";import{create as r}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{fromValues as o}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{projectBuffer as s}from\"../../../../geometry/projection/projectBuffer.js\";import{Attribute as e}from\"./Attribute.js\";import{ContentObjectType as n}from\"./ContentObjectType.js\";import{Geometry as a}from\"./Geometry.js\";import{fromValues as h}from\"./LocalOriginFactory.js\";import{Object3D as m}from\"./Object3D.js\";import{gridLocalOriginFactory as c}from\"./testUtils.js\";import{VertexAttribute as g}from\"./VertexAttribute.js\";import{WebGLLayer as d}from\"./WebGLLayer.js\";import{RibbonLineMaterial as f}from\"../materials/RibbonLineMaterial.js\";class _{constructor(i){this._originSR=i,this._rootOriginId=\"root/\"+t(),this._origins=new Map,this._objects=new Map,this._gridSize=5e5}getOrigin(t){const r=this._origins.get(this._rootOriginId);if(null==r){const i=c.rootOrigin;if(null!=i)return this._origins.set(this._rootOriginId,h(i[0],i[1],i[2],this._rootOriginId)),this.getOrigin(t);const r=h(t[0]+Math.random()-.5,t[1]+Math.random()-.5,t[2]+Math.random()-.5,this._rootOriginId);return this._origins.set(this._rootOriginId,r),r}const o=this._gridSize,s=Math.round(t[0]/o),e=Math.round(t[1]/o),n=Math.round(t[2]/o),a=`${s}/${e}/${n}`;let m=this._origins.get(a);const g=.5*o;if(i(l,t,r.vec3),l[0]=Math.abs(l[0]),l[1]=Math.abs(l[1]),l[2]=Math.abs(l[2]),l[0]<g&&l[1]<g&&l[2]<g){if(m){const r=Math.max(...l);i(l,t,m.vec3),l[0]=Math.abs(l[0]),l[1]=Math.abs(l[1]),l[2]=Math.abs(l[2]);if(Math.max(...l)<r)return m}return r}return m||(m=h(s*o,e*o,n*o,a),this._origins.set(a,m)),m}_drawOriginBox(t,i=o(1,1,0,1)){const r=window.view,h=r._stage,c=i.toString();if(!this._objects.has(c)){this._material=new f({width:2,color:i}),h.add(this._material);const t=new d(h,{pickable:!1}),r=new m({castShadow:!1});h.add(r),t.add(r),this._objects.set(c,r)}const _=this._objects.get(c),l=[0,1,5,4,0,2,1,7,6,2,0,1,3,7,5,4,6,2,0],p=l.length,j=new Array(3*p),b=new Array,u=.5*this._gridSize;for(let o=0;o<p;o++)j[3*o]=t[0]+(1&l[o]?u:-u),j[3*o+1]=t[1]+(2&l[o]?u:-u),j[3*o+2]=t[2]+(4&l[o]?u:-u),o>0&&b.push(o-1,o);s(j,this._originSR,0,j,r.renderSpatialReference,0,p);const M=new a(this._material,[[g.POSITION,new e(j,b,3,!0)]],null,n.Line);h.add(M),_.addGeometry(M)}get test(){}}const l=r();export{_ as GridLocalOriginFactory};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}