{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { getMetersPerUnitForSR as t, inchesPerMeter as e } from \"../../../../../core/unitUtils.js\";\nimport { AAggregateSpatialIndex as i } from \"./AAggregateSpatialIndex.js\";\nimport { GridCell as s } from \"./GridCell.js\";\nconst l = 96;\nfunction o(i, s) {\n  return t(i) * e * l / s;\n}\nclass n extends i {\n  constructor(t) {\n    super(t), this._cells = new Map(), this._pixelsPerMapUnit = o(t.spatialReference, t.scale);\n  }\n  put(t) {\n    for (const e of this._cells.values()) {\n      const i = t.get(e.id);\n      i ? i.merge(e) : t.set(e.id, e.clone());\n    }\n  }\n  putBounded(t, e, i) {\n    const s = [e.xmin, e.ymin, e.xmax, e.ymax],\n      [l, o, n, r] = s,\n      c = Math.floor(l * this._pixelsPerMapUnit / this._options.cellSize),\n      p = Math.floor(o * this._pixelsPerMapUnit / this._options.cellSize),\n      a = Math.ceil(n * this._pixelsPerMapUnit / this._options.cellSize),\n      h = Math.ceil(r * this._pixelsPerMapUnit / this._options.cellSize);\n    for (let _ = p; _ <= h; _++) for (let e = c; e <= a; e++) {\n      const i = `${e}.${_}`,\n        s = this._cells.get(i);\n      if (!s) continue;\n      const l = t.get(s.id);\n      l ? s && !t.has(s.id) && l.merge(s) : t.set(s.id, s.clone());\n    }\n  }\n  _insert(t, e, i, s) {\n    const l = e * this._pixelsPerMapUnit,\n      o = i * this._pixelsPerMapUnit,\n      n = Math.floor(l / this._options.cellSize),\n      r = Math.floor(o / this._options.cellSize);\n    this._getCellOrCreate(n, r).insert(t, s, e, i);\n  }\n  _getCellOrCreate(t, e) {\n    const i = s.createId(t, e);\n    let l = this._cells.get(i);\n    if (!l) {\n      const o = 1 * this._options.cellSize / this._pixelsPerMapUnit;\n      l = s.create(t, e, this._options.fields, o), this._cells.set(i, l);\n    }\n    return l;\n  }\n}\nexport { n as GridSpatialIndex, o as pixelsPerMapUnit };","map":{"version":3,"names":["getMetersPerUnitForSR","t","inchesPerMeter","e","AAggregateSpatialIndex","i","GridCell","s","l","o","n","constructor","_cells","Map","_pixelsPerMapUnit","spatialReference","scale","put","values","get","id","merge","set","clone","putBounded","xmin","ymin","xmax","ymax","r","c","Math","floor","_options","cellSize","p","a","ceil","h","_","has","_insert","_getCellOrCreate","insert","createId","create","fields","GridSpatialIndex","pixelsPerMapUnit"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/layers/features/aggregation/GridSpatialIndex.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{getMetersPerUnitForSR as t,inchesPerMeter as e}from\"../../../../../core/unitUtils.js\";import{AAggregateSpatialIndex as i}from\"./AAggregateSpatialIndex.js\";import{GridCell as s}from\"./GridCell.js\";const l=96;function o(i,s){return t(i)*e*l/s}class n extends i{constructor(t){super(t),this._cells=new Map,this._pixelsPerMapUnit=o(t.spatialReference,t.scale)}put(t){for(const e of this._cells.values()){const i=t.get(e.id);i?i.merge(e):t.set(e.id,e.clone())}}putBounded(t,e,i){const s=[e.xmin,e.ymin,e.xmax,e.ymax],[l,o,n,r]=s,c=Math.floor(l*this._pixelsPerMapUnit/this._options.cellSize),p=Math.floor(o*this._pixelsPerMapUnit/this._options.cellSize),a=Math.ceil(n*this._pixelsPerMapUnit/this._options.cellSize),h=Math.ceil(r*this._pixelsPerMapUnit/this._options.cellSize);for(let _=p;_<=h;_++)for(let e=c;e<=a;e++){const i=`${e}.${_}`,s=this._cells.get(i);if(!s)continue;const l=t.get(s.id);l?s&&!t.has(s.id)&&l.merge(s):t.set(s.id,s.clone())}}_insert(t,e,i,s){const l=e*this._pixelsPerMapUnit,o=i*this._pixelsPerMapUnit,n=Math.floor(l/this._options.cellSize),r=Math.floor(o/this._options.cellSize);this._getCellOrCreate(n,r).insert(t,s,e,i)}_getCellOrCreate(t,e){const i=s.createId(t,e);let l=this._cells.get(i);if(!l){const o=1*this._options.cellSize/this._pixelsPerMapUnit;l=s.create(t,e,this._options.fields,o),this._cells.set(i,l)}return l}}export{n as GridSpatialIndex,o as pixelsPerMapUnit};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,qBAAqB,IAAIC,CAAC,EAACC,cAAc,IAAIC,CAAC,QAAK,kCAAkC;AAAC,SAAOC,sBAAsB,IAAIC,CAAC,QAAK,6BAA6B;AAAC,SAAOC,QAAQ,IAAIC,CAAC,QAAK,eAAe;AAAC,MAAMC,CAAC,GAAC,EAAE;AAAC,SAASC,CAACA,CAACJ,CAAC,EAACE,CAAC,EAAC;EAAC,OAAON,CAAC,CAACI,CAAC,CAAC,GAACF,CAAC,GAACK,CAAC,GAACD,CAAC;AAAA;AAAC,MAAMG,CAAC,SAASL,CAAC;EAACM,WAAWA,CAACV,CAAC,EAAC;IAAC,KAAK,CAACA,CAAC,CAAC,EAAC,IAAI,CAACW,MAAM,GAAC,IAAIC,GAAG,CAAD,CAAC,EAAC,IAAI,CAACC,iBAAiB,GAACL,CAAC,CAACR,CAAC,CAACc,gBAAgB,EAACd,CAAC,CAACe,KAAK,CAAC;EAAA;EAACC,GAAGA,CAAChB,CAAC,EAAC;IAAC,KAAI,MAAME,CAAC,IAAI,IAAI,CAACS,MAAM,CAACM,MAAM,CAAC,CAAC,EAAC;MAAC,MAAMb,CAAC,GAACJ,CAAC,CAACkB,GAAG,CAAChB,CAAC,CAACiB,EAAE,CAAC;MAACf,CAAC,GAACA,CAAC,CAACgB,KAAK,CAAClB,CAAC,CAAC,GAACF,CAAC,CAACqB,GAAG,CAACnB,CAAC,CAACiB,EAAE,EAACjB,CAAC,CAACoB,KAAK,CAAC,CAAC,CAAC;IAAA;EAAC;EAACC,UAAUA,CAACvB,CAAC,EAACE,CAAC,EAACE,CAAC,EAAC;IAAC,MAAME,CAAC,GAAC,CAACJ,CAAC,CAACsB,IAAI,EAACtB,CAAC,CAACuB,IAAI,EAACvB,CAAC,CAACwB,IAAI,EAACxB,CAAC,CAACyB,IAAI,CAAC;MAAC,CAACpB,CAAC,EAACC,CAAC,EAACC,CAAC,EAACmB,CAAC,CAAC,GAACtB,CAAC;MAACuB,CAAC,GAACC,IAAI,CAACC,KAAK,CAACxB,CAAC,GAAC,IAAI,CAACM,iBAAiB,GAAC,IAAI,CAACmB,QAAQ,CAACC,QAAQ,CAAC;MAACC,CAAC,GAACJ,IAAI,CAACC,KAAK,CAACvB,CAAC,GAAC,IAAI,CAACK,iBAAiB,GAAC,IAAI,CAACmB,QAAQ,CAACC,QAAQ,CAAC;MAACE,CAAC,GAACL,IAAI,CAACM,IAAI,CAAC3B,CAAC,GAAC,IAAI,CAACI,iBAAiB,GAAC,IAAI,CAACmB,QAAQ,CAACC,QAAQ,CAAC;MAACI,CAAC,GAACP,IAAI,CAACM,IAAI,CAACR,CAAC,GAAC,IAAI,CAACf,iBAAiB,GAAC,IAAI,CAACmB,QAAQ,CAACC,QAAQ,CAAC;IAAC,KAAI,IAAIK,CAAC,GAACJ,CAAC,EAACI,CAAC,IAAED,CAAC,EAACC,CAAC,EAAE,EAAC,KAAI,IAAIpC,CAAC,GAAC2B,CAAC,EAAC3B,CAAC,IAAEiC,CAAC,EAACjC,CAAC,EAAE,EAAC;MAAC,MAAME,CAAC,GAAC,GAAGF,CAAC,IAAIoC,CAAC,EAAE;QAAChC,CAAC,GAAC,IAAI,CAACK,MAAM,CAACO,GAAG,CAACd,CAAC,CAAC;MAAC,IAAG,CAACE,CAAC,EAAC;MAAS,MAAMC,CAAC,GAACP,CAAC,CAACkB,GAAG,CAACZ,CAAC,CAACa,EAAE,CAAC;MAACZ,CAAC,GAACD,CAAC,IAAE,CAACN,CAAC,CAACuC,GAAG,CAACjC,CAAC,CAACa,EAAE,CAAC,IAAEZ,CAAC,CAACa,KAAK,CAACd,CAAC,CAAC,GAACN,CAAC,CAACqB,GAAG,CAACf,CAAC,CAACa,EAAE,EAACb,CAAC,CAACgB,KAAK,CAAC,CAAC,CAAC;IAAA;EAAC;EAACkB,OAAOA,CAACxC,CAAC,EAACE,CAAC,EAACE,CAAC,EAACE,CAAC,EAAC;IAAC,MAAMC,CAAC,GAACL,CAAC,GAAC,IAAI,CAACW,iBAAiB;MAACL,CAAC,GAACJ,CAAC,GAAC,IAAI,CAACS,iBAAiB;MAACJ,CAAC,GAACqB,IAAI,CAACC,KAAK,CAACxB,CAAC,GAAC,IAAI,CAACyB,QAAQ,CAACC,QAAQ,CAAC;MAACL,CAAC,GAACE,IAAI,CAACC,KAAK,CAACvB,CAAC,GAAC,IAAI,CAACwB,QAAQ,CAACC,QAAQ,CAAC;IAAC,IAAI,CAACQ,gBAAgB,CAAChC,CAAC,EAACmB,CAAC,CAAC,CAACc,MAAM,CAAC1C,CAAC,EAACM,CAAC,EAACJ,CAAC,EAACE,CAAC,CAAC;EAAA;EAACqC,gBAAgBA,CAACzC,CAAC,EAACE,CAAC,EAAC;IAAC,MAAME,CAAC,GAACE,CAAC,CAACqC,QAAQ,CAAC3C,CAAC,EAACE,CAAC,CAAC;IAAC,IAAIK,CAAC,GAAC,IAAI,CAACI,MAAM,CAACO,GAAG,CAACd,CAAC,CAAC;IAAC,IAAG,CAACG,CAAC,EAAC;MAAC,MAAMC,CAAC,GAAC,CAAC,GAAC,IAAI,CAACwB,QAAQ,CAACC,QAAQ,GAAC,IAAI,CAACpB,iBAAiB;MAACN,CAAC,GAACD,CAAC,CAACsC,MAAM,CAAC5C,CAAC,EAACE,CAAC,EAAC,IAAI,CAAC8B,QAAQ,CAACa,MAAM,EAACrC,CAAC,CAAC,EAAC,IAAI,CAACG,MAAM,CAACU,GAAG,CAACjB,CAAC,EAACG,CAAC,CAAC;IAAA;IAAC,OAAOA,CAAC;EAAA;AAAC;AAAC,SAAOE,CAAC,IAAIqC,gBAAgB,EAACtC,CAAC,IAAIuC,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}