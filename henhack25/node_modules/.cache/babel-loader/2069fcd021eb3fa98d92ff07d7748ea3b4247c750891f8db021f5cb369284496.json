{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from \"../../../request.js\";\nimport { createTask as s } from \"../../../core/asyncUtils.js\";\nimport r from \"../../../core/Handles.js\";\nimport { destroyMaybe as i, abortMaybe as n } from \"../../../core/maybe.js\";\nimport { watch as t, initial as a } from \"../../../core/reactiveUtils.js\";\nimport { create as o } from \"../../../core/libs/gl-matrix-2/factories/mat3f32.js\";\nimport { UpdatingHandles as l } from \"../../../core/support/UpdatingHandles.js\";\nimport { DisplayObject as h } from \"../engine/DisplayObject.js\";\nimport { WGLDrawPhase as u } from \"../engine/webgl/enums.js\";\nimport { MagnifierTechnique as m } from \"../engine/webgl/shaderGraph/techniques/magnifier/MagnifierTechnique.js\";\nimport { loadMagnifierResources as d } from \"../../magnifier/resources.js\";\nclass c extends h {\n  constructor() {\n    super(), this._handles = new r(), this._magnifierTechnique = new m(), this.updatingHandles = new l(), this.visible = !1;\n  }\n  destroy() {\n    this._handles = i(this._handles), this._magnifierTechnique.shutdown(), this._resourcesTask = n(this._resourcesTask);\n  }\n  get backgroundColor() {\n    return this._backgroundColor;\n  }\n  set backgroundColor(e) {\n    this._backgroundColor = e, this.requestRender();\n  }\n  get magnifier() {\n    return this._magnifier;\n  }\n  set magnifier(e) {\n    this._magnifier = e, this._handles.removeAll(), this._handles.add([t(() => e.version, () => {\n      this.visible = e.visible && null != e.position && e.size > 0, this.requestRender();\n    }, a), t(() => [e.maskUrl, e.overlayUrl], () => this._reloadResources()), t(() => e.size, () => {\n      this._magnifierTechnique.shutdown(), this.requestRender();\n    })]);\n  }\n  _createTransforms() {\n    return {\n      displayViewScreenMat3: o()\n    };\n  }\n  doRender(e) {\n    if (!this._resourcesTask) return void this._reloadResources();\n    if (e.drawPhase !== u.MAP || !this._canRender()) return;\n    const s = this._magnifier;\n    if (null == s.position) return;\n    this._magnifierTechnique.updateResources(e, this._mask, this._overlay, s);\n    const r = this.backgroundColor,\n      i = r ? [r.a * r.r / 255, r.a * r.g / 255, r.a * r.b / 255, r.a] : [1, 1, 1, 1];\n    this._magnifierTechnique.render(e, {\n      background: i,\n      maskEnabled: s.maskEnabled ? 1 : 0,\n      overlayEnabled: s.overlayEnabled ? 1 : 0\n    });\n  }\n  _canRender() {\n    return this._mask && this._overlay && null != this._magnifier;\n  }\n  _reloadResources() {\n    this._resourcesTask && this._resourcesTask.abort();\n    const r = null != this._magnifier ? this._magnifier.maskUrl : null,\n      i = null != this._magnifier ? this._magnifier.overlayUrl : null;\n    this._resourcesTask = s(async s => {\n      const n = null == r || null == i ? d(s) : null,\n        t = null != r ? e(r, {\n          responseType: \"image\",\n          signal: s\n        }).then(e => e.data) : n.then(e => e.mask),\n        a = null != i ? e(i, {\n          responseType: \"image\",\n          signal: s\n        }).then(e => e.data) : n.then(e => e.overlay),\n        [o, l] = await Promise.all([t, a]);\n      this._mask = o, this._overlay = l, this._magnifierTechnique.shutdown(), this.requestRender();\n    }), this.updatingHandles.addPromise(this._resourcesTask.promise);\n  }\n}\nexport { c as default };","map":{"version":3,"names":["e","createTask","s","r","destroyMaybe","i","abortMaybe","n","watch","t","initial","a","create","o","UpdatingHandles","l","DisplayObject","h","WGLDrawPhase","u","MagnifierTechnique","m","loadMagnifierResources","d","c","constructor","_handles","_magnifierTechnique","updatingHandles","visible","destroy","shutdown","_resourcesTask","backgroundColor","_backgroundColor","requestRender","magnifier","_magnifier","removeAll","add","version","position","size","maskUrl","overlayUrl","_reloadResources","_createTransforms","displayViewScreenMat3","doRender","drawPhase","MAP","_canRender","updateResources","_mask","_overlay","g","b","render","background","maskEnabled","overlayEnabled","abort","responseType","signal","then","data","mask","overlay","Promise","all","addPromise","promise","default"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/magnifier/MagnifierView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../request.js\";import{createTask as s}from\"../../../core/asyncUtils.js\";import r from\"../../../core/Handles.js\";import{destroyMaybe as i,abortMaybe as n}from\"../../../core/maybe.js\";import{watch as t,initial as a}from\"../../../core/reactiveUtils.js\";import{create as o}from\"../../../core/libs/gl-matrix-2/factories/mat3f32.js\";import{UpdatingHandles as l}from\"../../../core/support/UpdatingHandles.js\";import{DisplayObject as h}from\"../engine/DisplayObject.js\";import{WGLDrawPhase as u}from\"../engine/webgl/enums.js\";import{MagnifierTechnique as m}from\"../engine/webgl/shaderGraph/techniques/magnifier/MagnifierTechnique.js\";import{loadMagnifierResources as d}from\"../../magnifier/resources.js\";class c extends h{constructor(){super(),this._handles=new r,this._magnifierTechnique=new m,this.updatingHandles=new l,this.visible=!1}destroy(){this._handles=i(this._handles),this._magnifierTechnique.shutdown(),this._resourcesTask=n(this._resourcesTask)}get backgroundColor(){return this._backgroundColor}set backgroundColor(e){this._backgroundColor=e,this.requestRender()}get magnifier(){return this._magnifier}set magnifier(e){this._magnifier=e,this._handles.removeAll(),this._handles.add([t((()=>e.version),(()=>{this.visible=e.visible&&null!=e.position&&e.size>0,this.requestRender()}),a),t((()=>[e.maskUrl,e.overlayUrl]),(()=>this._reloadResources())),t((()=>e.size),(()=>{this._magnifierTechnique.shutdown(),this.requestRender()}))])}_createTransforms(){return{displayViewScreenMat3:o()}}doRender(e){if(!this._resourcesTask)return void this._reloadResources();if(e.drawPhase!==u.MAP||!this._canRender())return;const s=this._magnifier;if(null==s.position)return;this._magnifierTechnique.updateResources(e,this._mask,this._overlay,s);const r=this.backgroundColor,i=r?[r.a*r.r/255,r.a*r.g/255,r.a*r.b/255,r.a]:[1,1,1,1];this._magnifierTechnique.render(e,{background:i,maskEnabled:s.maskEnabled?1:0,overlayEnabled:s.overlayEnabled?1:0})}_canRender(){return this._mask&&this._overlay&&null!=this._magnifier}_reloadResources(){this._resourcesTask&&this._resourcesTask.abort();const r=null!=this._magnifier?this._magnifier.maskUrl:null,i=null!=this._magnifier?this._magnifier.overlayUrl:null;this._resourcesTask=s((async s=>{const n=null==r||null==i?d(s):null,t=null!=r?e(r,{responseType:\"image\",signal:s}).then((e=>e.data)):n.then((e=>e.mask)),a=null!=i?e(i,{responseType:\"image\",signal:s}).then((e=>e.data)):n.then((e=>e.overlay)),[o,l]=await Promise.all([t,a]);this._mask=o,this._overlay=l,this._magnifierTechnique.shutdown(),this.requestRender()})),this.updatingHandles.addPromise(this._resourcesTask.promise)}}export{c as default};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}