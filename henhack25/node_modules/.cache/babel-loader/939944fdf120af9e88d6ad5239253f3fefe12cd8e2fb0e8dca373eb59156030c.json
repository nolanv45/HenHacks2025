{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../chunks/tslib.es6.js\";\nimport t from \"../config.js\";\nimport { id as r } from \"../kernel.js\";\nimport s from \"../request.js\";\nimport i from \"../core/Error.js\";\nimport o from \"../core/Evented.js\";\nimport { on as n } from \"../core/events.js\";\nimport { fixJson as a } from \"../core/lang.js\";\nimport { getDeepValue as h } from \"../core/object.js\";\nimport { createResolver as l, onAbort as c, isAborted as d } from \"../core/promiseUtils.js\";\nimport { urlToObject as u, hasSameOrigin as p, Url as _, queryToObject as f, base64UrlEncode as g, objectToQuery as m, normalize as v, getProxyRule as S, makeAbsolute as w, addQueryParameters as I } from \"../core/urlUtils.js\";\nimport { property as A } from \"../core/accessorSupport/decorators/property.js\";\nimport \"../core/has.js\";\nimport \"../core/Logger.js\";\nimport { subclass as k } from \"../core/accessorSupport/decorators/subclass.js\";\nimport y from \"./IdentityModal.js\";\nimport U from \"./OAuthCredential.js\";\nimport T from \"./OAuthInfo.js\";\nimport x from \"./ServerInfo.js\";\nimport { isSecureProxyService as O, normalizeArcGISOnlineOrgDomain as P } from \"../portal/support/urlUtils.js\";\nconst R = {},\n  C = e => {\n    const t = new _(e.owningSystemUrl).host,\n      r = new _(e.server).host,\n      s = /.+\\.arcgis\\.com$/i;\n    return s.test(t) && s.test(r);\n  },\n  D = (e, t) => !!(C(e) && t && t.some(t => t.test(e.server)));\nlet b = null,\n  q = null;\ntry {\n  b = window.localStorage, q = window.sessionStorage;\n} catch {}\nclass j extends o {\n  constructor() {\n    super(), this._portalConfig = globalThis.esriGeowConfig, this.serverInfos = [], this.oAuthInfos = [], this.credentials = [], this._soReqs = [], this._xoReqs = [], this._portals = [], this._defaultOAuthInfo = null, this._defaultTokenValidity = 60, this.dialog = null, this.tokenValidity = null, this.normalizeWebTierAuth = !1, this._appOrigin = \"null\" !== window.origin ? window.origin : window.location.origin, this._appUrlObj = u(window.location.href), this._busy = null, this._rejectOnPersistedPageShow = !1, this._oAuthLocationParams = null, this._gwTokenUrl = \"/sharing/rest/generateToken\", this._agsRest = \"/rest/services\", this._agsPortal = /\\/sharing(\\/|$)/i, this._agsAdmin = /(https?:\\/\\/[^/]+\\/[^/]+)\\/admin\\/?(\\/.*)?$/i, this._adminSvcs = /\\/rest\\/admin\\/services(\\/|$)/i, this._gwDomains = [{\n      regex: /^https?:\\/\\/www\\.arcgis\\.com/i,\n      customBaseUrl: \"maps.arcgis.com\",\n      tokenServiceUrl: \"https://www.arcgis.com/sharing/rest/generateToken\"\n    }, {\n      regex: /^https?:\\/\\/(?:dev|[a-z\\d-]+\\.mapsdev)\\.arcgis\\.com/i,\n      customBaseUrl: \"mapsdev.arcgis.com\",\n      tokenServiceUrl: \"https://dev.arcgis.com/sharing/rest/generateToken\"\n    }, {\n      regex: /^https?:\\/\\/(?:devext|[a-z\\d-]+\\.mapsdevext)\\.arcgis\\.com/i,\n      customBaseUrl: \"mapsdevext.arcgis.com\",\n      tokenServiceUrl: \"https://devext.arcgis.com/sharing/rest/generateToken\"\n    }, {\n      regex: /^https?:\\/\\/(?:qaext|[a-z\\d-]+\\.mapsqa)\\.arcgis\\.com/i,\n      customBaseUrl: \"mapsqa.arcgis.com\",\n      tokenServiceUrl: \"https://qaext.arcgis.com/sharing/rest/generateToken\"\n    }, {\n      regex: /^https?:\\/\\/[a-z\\d-]+\\.maps\\.arcgis\\.com/i,\n      customBaseUrl: \"maps.arcgis.com\",\n      tokenServiceUrl: \"https://www.arcgis.com/sharing/rest/generateToken\"\n    }], this._legacyFed = [], this._regexSDirUrl = /http.+\\/rest\\/services\\/?/gi, this._regexServerType = /(\\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|KnowledgeGraphServer|MapServer|MissionServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer|VideoServer)).*/gi, this._gwUser = /http.+\\/users\\/([^/]+).*/i, this._gwItem = /http.+\\/items\\/([^/]+).*/i, this._gwGroup = /http.+\\/groups\\/([^/]+).*/i, this._rePortalTokenSvc = /\\/sharing(\\/rest)?\\/generatetoken/i, this._createDefaultOAuthInfo = !0, this._hasTestedIfAppIsOnPortal = !1, this._getPlatformSelfError = null, this._getOAuthLocationParams(), window.addEventListener(\"pageshow\", e => {\n      this._pageShowHandler(e);\n    });\n  }\n  registerServers(e) {\n    const t = this.serverInfos;\n    t ? (e = e.filter(e => !this.findServerInfo(e.server)), this.serverInfos = t.concat(e)) : this.serverInfos = e, e.forEach(e => {\n      e.owningSystemUrl && this._portals.push(e.owningSystemUrl), e.hasPortal && this._portals.push(e.server);\n    });\n  }\n  registerOAuthInfos(e) {\n    const t = this.oAuthInfos;\n    if (t) {\n      for (const r of e) {\n        const e = this.findOAuthInfo(r.portalUrl);\n        e && t.splice(t.indexOf(e), 1);\n      }\n      this.oAuthInfos = t.concat(e);\n    } else this.oAuthInfos = e;\n  }\n  registerToken(e) {\n    e = {\n      ...e\n    };\n    const t = this._sanitizeUrl(e.server),\n      r = this._isServerRsrc(t);\n    let s,\n      i = this.findServerInfo(t),\n      o = !0;\n    i || (i = new x(), i.server = this._getServerInstanceRoot(t), r ? i.hasServer = !0 : (i.tokenServiceUrl = this._getTokenSvcUrl(t), i.hasPortal = !0), this.registerServers([i])), s = this._findCredential(t), s ? (delete e.server, Object.assign(s, e), o = !1) : (s = new E({\n      userId: e.userId,\n      server: i.server ?? void 0,\n      token: e.token,\n      expires: e.expires,\n      ssl: e.ssl,\n      scope: r ? \"server\" : \"portal\"\n    }), s.resources = [t], this.credentials.push(s)), s.emitTokenChange(!1), o || s.refreshServerTokens();\n  }\n  toJSON() {\n    return a({\n      serverInfos: this.serverInfos.map(e => e.toJSON()),\n      oAuthInfos: this.oAuthInfos.map(e => e.toJSON()),\n      credentials: this.credentials.map(e => e.toJSON())\n    });\n  }\n  initialize(e) {\n    if (!e) return;\n    \"string\" == typeof e && (e = JSON.parse(e));\n    const t = e.serverInfos,\n      r = e.oAuthInfos,\n      s = e.credentials;\n    if (t) {\n      const e = [];\n      t.forEach(t => {\n        t.server && t.tokenServiceUrl && e.push(t.declaredClass ? t : new x(t));\n      }), e.length && this.registerServers(e);\n    }\n    if (r) {\n      const e = [];\n      r.forEach(t => {\n        t.appId && e.push(t.declaredClass ? t : new T(t));\n      }), e.length && this.registerOAuthInfos(e);\n    }\n    s && s.forEach(e => {\n      e.server && e.token && e.expires && e.expires > Date.now() && ((e = e.declaredClass ? e : new E(e)).emitTokenChange(), this.credentials.push(e));\n    });\n  }\n  findServerInfo(e) {\n    let t;\n    e = this._sanitizeUrl(e);\n    for (const r of this.serverInfos) if (this._hasSameServerInstance(r.server, e)) {\n      t = r;\n      break;\n    }\n    return t;\n  }\n  findOAuthInfo(e) {\n    let t;\n    e = this._sanitizeUrl(e);\n    for (const r of this.oAuthInfos) if (this._hasSameServerInstance(r.portalUrl, e)) {\n      t = r;\n      break;\n    }\n    return t;\n  }\n  findCredential(e, t) {\n    if (!e) return;\n    let r;\n    e = this._sanitizeUrl(e);\n    const s = this._isServerRsrc(e) ? \"server\" : \"portal\";\n    if (t) {\n      for (const i of this.credentials) if (this._hasSameServerInstance(i.server, e) && t === i.userId && i.scope === s) {\n        r = i;\n        break;\n      }\n    } else for (const i of this.credentials) if (this._hasSameServerInstance(i.server, e) && -1 !== this._getIdenticalSvcIdx(e, i) && i.scope === s) {\n      r = i;\n      break;\n    }\n    return r;\n  }\n  getCredential(e, t) {\n    let r,\n      s,\n      o = !0;\n    t && (r = !!t.token, s = t.error, o = !1 !== t.prompt), t = {\n      ...t\n    }, e = this._sanitizeUrl(e);\n    const n = new AbortController(),\n      a = l();\n    if (t.signal && c(t.signal, () => {\n      n.abort();\n    }), c(n, () => {\n      a.reject(new i(\"identity-manager:user-aborted\", \"ABORTED\"));\n    }), d(n)) return a.promise;\n    t.signal = n.signal;\n    const h = this._isAdminResource(e),\n      u = r ? this.findCredential(e) : null;\n    let _;\n    if (u && s && s.details && 498 === s.details.httpStatus) u.destroy();else if (u) return _ = new i(\"identity-manager:not-authorized\", \"You are currently signed in as: '\" + u.userId + \"'. You do not have access to this resource: \" + e, {\n      error: s\n    }), a.reject(_), a.promise;\n    const f = this._findCredential(e, t);\n    if (f) return a.resolve(f), a.promise;\n    let g = this.findServerInfo(e);\n    if (g) !g.hasPortal && g.server && g.owningSystemUrl && this._hasSameServerInstance(g.server, g.owningSystemUrl) && (g.hasPortal = !0), !g.hasServer && this._isServerRsrc(e) && (g._restInfoPms = this._getTokenSvcUrl(e), g.hasServer = !0);else {\n      const t = this._getTokenSvcUrl(e);\n      if (!t) return _ = new i(\"identity-manager:unknown-resource\", \"Unknown resource - could not find token service endpoint.\"), a.reject(_), a.promise;\n      g = new x(), g.server = this._getServerInstanceRoot(e), \"string\" == typeof t ? (g.tokenServiceUrl = t, g.hasPortal = !0) : (g._restInfoPms = t, g.hasServer = !0), this.registerServers([g]);\n    }\n    return g.hasPortal && void 0 === g._selfReq && (o || p(g.tokenServiceUrl, this._appOrigin) || this._gwDomains.some(e => e.tokenServiceUrl === g.tokenServiceUrl)) && (g._selfReq = {\n      owningTenant: t?.owningTenant,\n      selfDfd: this._getPortalSelf(g.tokenServiceUrl.replace(this._rePortalTokenSvc, \"/sharing/rest/portals/self\"), e)\n    }), this._enqueue(e, g, t, a, h);\n  }\n  getResourceName(e) {\n    return this._isRESTService(e) ? e.replace(this._regexSDirUrl, \"\").replace(this._regexServerType, \"\") || \"\" : this._gwUser.test(e) && e.replace(this._gwUser, \"$1\") || this._gwItem.test(e) && e.replace(this._gwItem, \"$1\") || this._gwGroup.test(e) && e.replace(this._gwGroup, \"$1\") || \"\";\n  }\n  generateToken(e, t, r) {\n    const o = this._rePortalTokenSvc.test(e.tokenServiceUrl),\n      n = new _(this._appOrigin),\n      a = e.shortLivedTokenValidity;\n    let h, l, c, d, u, f, g, m;\n    t && (m = this.tokenValidity || a || this._defaultTokenValidity, m > a && a > 0 && (m = a)), r && (h = r.isAdmin, l = r.serverUrl, c = r.token, f = r.signal, g = r.ssl, e.customParameters = r.customParameters), h ? d = e.adminTokenServiceUrl : (d = e.tokenServiceUrl, u = new _(d.toLowerCase()), e.webTierAuth && r?.serverUrl && !g && \"http\" === n.scheme && (p(n.uri, d, !0) || \"https\" === u.scheme && n.host === u.host && \"7080\" === n.port && \"7443\" === u.port) && (d = d.replace(/^https:/i, \"http:\").replace(/:7443/i, \":7080\")));\n    const v = {\n      query: {\n        request: \"getToken\",\n        username: t?.username,\n        password: t?.password,\n        serverUrl: l,\n        token: c,\n        expiration: m,\n        referer: h || o ? this._appOrigin : null,\n        client: h ? \"referer\" : null,\n        f: \"json\",\n        ...e.customParameters\n      },\n      method: \"post\",\n      authMode: \"anonymous\",\n      useProxy: this._useProxy(e, r),\n      signal: f,\n      ...r?.ioArgs\n    };\n    o || (v.withCredentials = !1);\n    return s(d, v).then(r => {\n      const s = r.data;\n      if (!s?.token) return new i(\"identity-manager:authentication-failed\", \"Unable to generate token\");\n      const o = e.server;\n      return R[o] || (R[o] = {}), t && (R[o][t.username] = t.password), s.validity = m, s;\n    });\n  }\n  isBusy() {\n    return !!this._busy;\n  }\n  async checkSignInStatus(e) {\n    return (await this.checkAppAccess(e, \"\")).credential;\n  }\n  checkAppAccess(e, t, r) {\n    let o = !1;\n    return this.getCredential(e, {\n      prompt: !1\n    }).then(n => {\n      let a;\n      const h = {\n        f: \"json\"\n      };\n      if (\"portal\" === n.scope) {\n        if (t && (this._doPortalSignIn(e) || r?.force)) a = n.server + \"/sharing/rest/oauth2/validateAppAccess\", h.client_id = t;else {\n          if (!n.token) return {\n            credential: n\n          };\n          a = n.server + \"/sharing/rest\";\n        }\n      } else {\n        if (!n.token) return {\n          credential: n\n        };\n        a = n.server + \"/rest/services\";\n      }\n      return n.token && (h.token = n.token), s(a, {\n        query: h,\n        authMode: \"anonymous\"\n      }).then(e => {\n        if (!1 === e.data.valid) throw new i(\"identity-manager:not-authorized\", `You are currently signed in as: '${n.userId}'.`, e.data);\n        return o = !!e.data.viewOnlyUserTypeApp, {\n          credential: n\n        };\n      }).catch(e => {\n        if (\"identity-manager:not-authorized\" === e.name) throw e;\n        const t = e.details?.httpStatus;\n        if (498 === t) throw n.destroy(), new i(\"identity-manager:not-authenticated\", \"User is not signed in.\");\n        if (400 === t) throw new i(\"identity-manager:invalid-request\");\n        return {\n          credential: n\n        };\n      });\n    }).then(e => ({\n      credential: e.credential,\n      viewOnly: o\n    }));\n  }\n  setOAuthResponseHash(e) {\n    e && (\"#\" === e.charAt(0) && (e = e.slice(1)), this._processOAuthPopupParams(f(e)));\n  }\n  setOAuthRedirectionHandler(e) {\n    this._oAuthRedirectFunc = e;\n  }\n  setProtocolErrorHandler(e) {\n    this._protocolFunc = e;\n  }\n  signIn(e, t) {\n    let r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    const s = l(),\n      o = () => {\n        h?.remove(), d?.remove(), this.dialog?.destroy(), this.dialog = h = d = null;\n      },\n      n = () => {\n        o(), this._oAuthDfd = null, s.reject(new i(\"identity-manager:user-aborted\", \"ABORTED\"));\n      };\n    r.signal && c(r.signal, () => {\n      n();\n    });\n    const a = new y({\n      open: !0,\n      resource: this.getResourceName(e),\n      server: t.server\n    });\n    this.dialog = a, this.emit(\"dialog-create\");\n    let h = a.on(\"cancel\", n),\n      d = a.on(\"submit\", e => {\n        this.generateToken(t, e, {\n          isAdmin: r.isAdmin,\n          signal: r.signal\n        }).then(i => {\n          o();\n          const n = new E({\n            userId: e.username,\n            server: t.server ?? void 0,\n            token: i.token,\n            expires: null != i.expires ? Number(i.expires) : null,\n            ssl: !!i.ssl,\n            isAdmin: r.isAdmin,\n            validity: i.validity\n          });\n          s.resolve(n);\n        }).catch(e => {\n          a.error = e, a.signingIn = !1;\n        });\n      });\n    return s.promise;\n  }\n  oAuthSignIn(e, t, r, s) {\n    this._oAuthDfd = l();\n    const o = this._oAuthDfd;\n    let n;\n    s?.signal && c(s.signal, () => {\n      const e = this._oAuthDfd && this._oAuthDfd.oAuthWin_;\n      e && !e.closed ? e.close() : this.dialog && u();\n    }), o.resUrl_ = e, o.sinfo_ = t, o.oinfo_ = r;\n    const a = r._oAuthCred;\n    if (a.storage && (\"authorization-code\" === r.flowType || \"auto\" === r.flowType && t.currentVersion >= 8.4)) {\n      let e = crypto.getRandomValues(new Uint8Array(32));\n      n = g(e), a.codeVerifier = n, e = crypto.getRandomValues(new Uint8Array(32)), a.stateUID = g(e), a.save() || (a.codeVerifier = n = null);\n    } else a.codeVerifier = null;\n    let h, d;\n    this._getCodeChallenge(n).then(i => {\n      const o = !s || !1 !== s.oAuthPopupConfirmation;\n      if (!r.popup || !o) return void this._doOAuthSignIn(e, t, r, i);\n      const n = new y({\n        oAuthPrompt: !0,\n        server: t.server,\n        open: !0\n      });\n      this.dialog = n, this.emit(\"dialog-create\"), h = n.on(\"cancel\", u), d = n.on(\"submit\", () => {\n        p(), this._doOAuthSignIn(e, t, r, i);\n      });\n    });\n    const u = () => {\n        p(), this._oAuthDfd = null, o.reject(new i(\"identity-manager:user-aborted\", \"ABORTED\"));\n      },\n      p = () => {\n        h?.remove(), d?.remove(), this.dialog?.destroy(), this.dialog = null;\n      };\n    return o.promise;\n  }\n  destroyCredentials() {\n    if (this.credentials) {\n      this.credentials.slice().forEach(e => {\n        e.destroy();\n      });\n    }\n    this.emit(\"credentials-destroy\");\n  }\n  enablePostMessageAuth() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"https://www.arcgis.com/sharing/rest\";\n    this._postMessageAuthHandle && this._postMessageAuthHandle.remove(), this._postMessageAuthHandle = n(window, \"message\", t => {\n      if ((t.origin === this._appOrigin || t.origin.endsWith(\".arcgis.com\")) && \"arcgis:auth:requestCredential\" === t.data?.type) {\n        const r = t.source;\n        this.getCredential(e).then(e => {\n          r.postMessage({\n            type: \"arcgis:auth:credential\",\n            credential: {\n              expires: e.expires,\n              server: e.server,\n              ssl: e.ssl,\n              token: e.token,\n              userId: e.userId\n            }\n          }, t.origin);\n        }).catch(e => {\n          r.postMessage({\n            type: \"arcgis:auth:error\",\n            error: {\n              name: e.name,\n              message: e.message\n            }\n          }, t.origin);\n        });\n      }\n    });\n  }\n  disablePostMessageAuth() {\n    this._postMessageAuthHandle && (this._postMessageAuthHandle.remove(), this._postMessageAuthHandle = null);\n  }\n  _getOAuthLocationParams() {\n    let e = window.location.hash;\n    if (e) {\n      \"#\" === e.charAt(0) && (e = e.slice(1));\n      const t = f(e);\n      let r = !1;\n      if (t.access_token && t.expires_in && t.state && t.hasOwnProperty(\"username\")) try {\n        t.state = JSON.parse(t.state), t.state.portalUrl && (this._oAuthLocationParams = t, r = !0);\n      } catch {} else if (t.error && t.error_description && (console.log(\"IdentityManager OAuth Error: \", t.error, \" - \", t.error_description), \"access_denied\" === t.error && (r = !0, t.state))) try {\n        t.state = JSON.parse(t.state);\n      } catch {}\n      r && (window.location.hash = t.state?.hash || \"\");\n    }\n    let t = window.location.search;\n    if (t) {\n      \"?\" === t.charAt(0) && (t = t.slice(1));\n      const e = f(t);\n      let r = !1;\n      if (e.code && e.state) try {\n        e.state = JSON.parse(e.state), e.state.portalUrl && e.state.uid && (this._oAuthLocationParams = e, r = !0);\n      } catch {} else if (e.error && e.error_description && (console.log(\"IdentityManager OAuth Error: \", e.error, \" - \", e.error_description), \"access_denied\" === e.error && (r = !0, e.state))) try {\n        e.state = JSON.parse(e.state);\n      } catch {}\n      if (r) {\n        const t = {\n          ...e\n        };\n        [\"code\", \"error\", \"error_description\", \"message_code\", \"persist\", \"state\"].forEach(e => {\n          delete t[e];\n        });\n        const r = m(t),\n          s = window.location.pathname + (r ? `?${r}` : \"\") + (e.state?.hash || \"\");\n        window.history.replaceState(window.history.state, \"\", s);\n      }\n    }\n  }\n  _getOAuthToken(e, t, r, i, o) {\n    return e = e.replace(/^http:/i, \"https:\"), s(`${e}/sharing/rest/oauth2/token`, {\n      authMode: \"anonymous\",\n      method: \"post\",\n      query: i && o ? {\n        grant_type: \"authorization_code\",\n        code: t,\n        redirect_uri: i,\n        client_id: r,\n        code_verifier: o\n      } : {\n        grant_type: \"refresh_token\",\n        refresh_token: t,\n        client_id: r\n      }\n    }).then(e => e.data);\n  }\n  async _getCodeChallenge(e) {\n    if (e && globalThis.isSecureContext) {\n      const t = new TextEncoder().encode(e),\n        r = await crypto.subtle.digest(\"SHA-256\", t);\n      return g(new Uint8Array(r));\n    }\n    return null;\n  }\n  _pageShowHandler(e) {\n    if (e.persisted && this.isBusy() && this._rejectOnPersistedPageShow) {\n      const e = new i(\"identity-manager:user-aborted\", \"ABORTED\");\n      this._errbackFunc(e);\n    }\n  }\n  _findCredential(e, t) {\n    let r,\n      s,\n      i,\n      o,\n      n = -1;\n    const a = t?.token,\n      h = t?.resource,\n      l = this._isServerRsrc(e) ? \"server\" : \"portal\",\n      c = this.credentials.filter(t => this._hasSameServerInstance(t.server, e) && t.scope === l);\n    if (e = h || e, c.length) if (1 === c.length) {\n      if (r = c[0], i = this.findServerInfo(r.server), s = i?.owningSystemUrl, o = s ? this.findCredential(s, r.userId) : void 0, n = this._getIdenticalSvcIdx(e, r), !a) return -1 === n && r.resources.push(e), this._addResource(e, o), r;\n      -1 !== n && (r.resources.splice(n, 1), this._removeResource(e, o));\n    } else {\n      let t, r;\n      if (c.some(a => (r = this._getIdenticalSvcIdx(e, a), -1 !== r && (t = a, i = this.findServerInfo(t.server), s = i?.owningSystemUrl, o = s ? this.findCredential(s, t.userId) : void 0, n = r, !0))), a) t && (t.resources.splice(n, 1), this._removeResource(e, o));else if (t) return this._addResource(e, o), t;\n    }\n  }\n  _findOAuthInfo(e) {\n    let t = this.findOAuthInfo(e);\n    if (!t) for (const r of this.oAuthInfos) if (this._isIdProvider(r.portalUrl, e)) {\n      t = r;\n      break;\n    }\n    return t;\n  }\n  _addResource(e, t) {\n    t && -1 === this._getIdenticalSvcIdx(e, t) && t.resources.push(e);\n  }\n  _removeResource(e, t) {\n    let r = -1;\n    t && (r = this._getIdenticalSvcIdx(e, t), r > -1 && t.resources.splice(r, 1));\n  }\n  _useProxy(e, t) {\n    return t?.isAdmin && !p(e.adminTokenServiceUrl, this._appOrigin) || !this._isPortalDomain(e.tokenServiceUrl) && \"10.1\" === String(e.currentVersion) && !p(e.tokenServiceUrl, this._appOrigin);\n  }\n  _getOrigin(e) {\n    const t = new _(e);\n    return t.scheme + \"://\" + t.host + (null != t.port ? \":\" + t.port : \"\");\n  }\n  _getServerInstanceRoot(e) {\n    const t = e.toLowerCase();\n    let r = t.indexOf(this._agsRest);\n    return -1 === r && this._isAdminResource(e) && (r = this._agsAdmin.test(e) ? e.replace(this._agsAdmin, \"$1\").length : e.search(this._adminSvcs)), -1 !== r || O(t) || (r = t.indexOf(\"/sharing\")), -1 === r && t.endsWith(\"/\") && (r = t.length - 1), r > -1 ? e.slice(0, r) : e;\n  }\n  _hasSameServerInstance(e, t) {\n    return e.endsWith(\"/\") && (e = e.slice(0, -1)), e = e.toLowerCase(), t = this._getServerInstanceRoot(t).toLowerCase(), e = P(e), t = P(t), (e = e.slice(Math.max(0, e.indexOf(\":\")))) === (t = t.slice(Math.max(0, t.indexOf(\":\"))));\n  }\n  _sanitizeUrl(e) {\n    const r = (t.request.proxyUrl || \"\").toLowerCase(),\n      s = r ? e.toLowerCase().indexOf(r + \"?\") : -1;\n    return -1 !== s && (e = e.slice(s + r.length + 1)), e = v(e), u(e).path;\n  }\n  _isRESTService(e) {\n    return e.includes(this._agsRest);\n  }\n  _isAdminResource(e) {\n    return this._agsAdmin.test(e) || this._adminSvcs.test(e);\n  }\n  _isServerRsrc(e) {\n    return this._isRESTService(e) || this._isAdminResource(e);\n  }\n  _isIdenticalService(e, t) {\n    let r = !1;\n    if (this._isRESTService(e) && this._isRESTService(t)) {\n      const s = this._getSuffix(e).toLowerCase(),\n        i = this._getSuffix(t).toLowerCase();\n      if (r = s === i, !r) {\n        const e = /(.*)\\/(MapServer|FeatureServer|UtilityNetworkServer).*/gi;\n        r = s.replaceAll(e, \"$1\") === i.replaceAll(e, \"$1\");\n      }\n    } else this._isAdminResource(e) && this._isAdminResource(t) ? r = !0 : this._isServerRsrc(e) || this._isServerRsrc(t) || !this._isPortalDomain(e) || (r = !0);\n    return r;\n  }\n  _isPortalDomain(e) {\n    const r = new _(e.toLowerCase()),\n      s = this._portalConfig;\n    let i = this._gwDomains.some(e => e.regex.test(r.uri));\n    return !i && s && (i = this._hasSameServerInstance(this._getServerInstanceRoot(s.restBaseUrl), r.uri)), i || t.portalUrl && (i = p(r, t.portalUrl, !0)), i || (i = this._portals.some(e => this._hasSameServerInstance(e, r.uri))), i = i || this._agsPortal.test(r.path), i;\n  }\n  _isIdProvider(e, t) {\n    let r = -1,\n      s = -1;\n    this._gwDomains.forEach((i, o) => {\n      -1 === r && i.regex.test(e) && (r = o), -1 === s && i.regex.test(t) && (s = o);\n    });\n    let i = !1;\n    if (r > -1 && s > -1 && (0 === r || 4 === r ? 0 !== s && 4 !== s || (i = !0) : 1 === r ? 1 !== s && 2 !== s || (i = !0) : 2 === r ? 2 === s && (i = !0) : 3 === r && 3 === s && (i = !0)), !i) {\n      const r = this.findServerInfo(t),\n        s = r?.owningSystemUrl;\n      s && C(r) && this._isPortalDomain(s) && this._isIdProvider(e, s) && (i = !0);\n    }\n    return i;\n  }\n  _getIdenticalSvcIdx(e, t) {\n    let r = -1;\n    for (let s = 0; s < t.resources.length; s++) {\n      const i = t.resources[s];\n      if (this._isIdenticalService(e, i)) {\n        r = s;\n        break;\n      }\n    }\n    return r;\n  }\n  _getSuffix(e) {\n    return e.replace(this._regexSDirUrl, \"\").replace(this._regexServerType, \"$1\");\n  }\n  _getTokenSvcUrl(e) {\n    let t, r, i;\n    if (this._isRESTService(e) || this._isAdminResource(e)) {\n      const i = this._getServerInstanceRoot(e);\n      return t = i + \"/admin/generateToken\", r = s(e = i + \"/rest/info\", {\n        query: {\n          f: \"json\"\n        }\n      }).then(e => e.data), {\n        adminUrl: t,\n        promise: r\n      };\n    }\n    if (this._isPortalDomain(e)) {\n      let t = \"\";\n      if (this._gwDomains.some(r => (r.regex.test(e) && (t = r.tokenServiceUrl), !!t)), t || this._portals.some(r => (this._hasSameServerInstance(r, e) && (t = r + this._gwTokenUrl), !!t)), t || (i = e.toLowerCase().indexOf(\"/sharing\"), -1 !== i && (t = e.slice(0, i) + this._gwTokenUrl)), t || (t = this._getOrigin(e) + this._gwTokenUrl), t) {\n        const r = new _(e).port;\n        /^http:\\/\\//i.test(e) && \"7080\" === r && (t = t.replace(/:7080/i, \":7443\")), t = t.replace(/http:/i, \"https:\");\n      }\n      return t;\n    }\n  }\n  _processOAuthResponseParams(e, t, r) {\n    const s = t._oAuthCred;\n    if (e.code) {\n      const i = s.codeVerifier;\n      return s.codeVerifier = null, s.stateUID = null, s.save(), this._getOAuthToken(r.server, e.code, t.appId, this._getRedirectURI(t, !0), i).then(i => {\n        const o = new E({\n          userId: i.username,\n          server: r.server ?? void 0,\n          token: i.access_token,\n          expires: Date.now() + 1e3 * i.expires_in,\n          ssl: i.ssl,\n          oAuthState: e.state,\n          _oAuthCred: s\n        });\n        return t.userId = o.userId, s.storage = i.persist ? b : q, s.refreshToken = i.refresh_token, s.token = null, s.expires = i.refresh_token_expires_in ? Date.now() + 1e3 * i.refresh_token_expires_in : null, s.userId = o.userId, s.ssl = o.ssl, s.save(), o;\n      });\n    }\n    const i = new E({\n      userId: e.username,\n      server: r.server ?? void 0,\n      token: e.access_token,\n      expires: Date.now() + 1e3 * Number(e.expires_in),\n      ssl: \"true\" === e.ssl,\n      oAuthState: e.state,\n      _oAuthCred: s\n    });\n    return t.userId = i.userId, s.storage = e.persist ? b : q, s.refreshToken = null, s.token = i.token, s.expires = i.expires, s.userId = i.userId, s.ssl = i.ssl, s.save(), Promise.resolve(i);\n  }\n  _processOAuthPopupParams(e) {\n    const t = this._oAuthDfd;\n    if (this._oAuthDfd = null, t) if (clearInterval(this._oAuthIntervalId), this._oAuthOnPopupHandle?.remove(), e.error) {\n      const r = \"access_denied\" === e.error,\n        s = new i(r ? \"identity-manager:user-aborted\" : \"identity-manager:authentication-failed\", r ? \"ABORTED\" : \"OAuth: \" + e.error + \" - \" + e.error_description);\n      t.reject(s);\n    } else this._processOAuthResponseParams(e, t.oinfo_, t.sinfo_).then(e => {\n      t.resolve(e);\n    }).catch(e => {\n      t.reject(e);\n    });\n  }\n  _setOAuthResponseQueryString(e) {\n    e && (\"?\" === e.charAt(0) && (e = e.slice(1)), this._processOAuthPopupParams(f(e)));\n  }\n  async _exchangeToken(e, t, r) {\n    return (await s(`${e}/sharing/rest/oauth2/exchangeToken`, {\n      authMode: \"anonymous\",\n      method: \"post\",\n      query: {\n        f: \"json\",\n        client_id: t,\n        token: r\n      }\n    })).data.token;\n  }\n  async _getPlatformSelf(e, t) {\n    if (this._getPlatformSelfError && Date.now() - this._getPlatformSelfError[1] < 1e3) throw this._getPlatformSelfError[0];\n    e = e.replace(/^http:/i, \"https:\");\n    try {\n      const r = await s(`${e}/sharing/rest/oauth2/platformSelf`, {\n        authMode: \"anonymous\",\n        headers: {\n          \"X-Esri-Auth-Client-Id\": t,\n          \"X-Esri-Auth-Redirect-Uri\": window.location.href.replace(/#.*$/, \"\")\n        },\n        method: \"post\",\n        query: {\n          f: \"json\",\n          expiration: 30\n        },\n        withCredentials: !0\n      });\n      return this._getPlatformSelfError = null, r.data;\n    } catch (r) {\n      throw \"OAUTH_0066\" === r.details?.messageCode && (this._getPlatformSelfError = [r, Date.now()]), r;\n    }\n  }\n  _getPortalSelf(e, t) {\n    let r;\n    if (this._gwDomains.some(t => (t.regex.test(e) && (r = t.customBaseUrl), !!r)), r) return Promise.resolve({\n      allSSL: !0,\n      currentVersion: \"8.4\",\n      customBaseUrl: r,\n      portalMode: \"multitenant\",\n      supportsOAuth: !0\n    });\n    this._appOrigin.startsWith(\"https:\") ? e = e.replace(/^http:/i, \"https:\").replace(/:7080/i, \":7443\") : /^http:/i.test(t) && (e = e.replace(/^https:/i, \"http:\").replace(/:7443/i, \":7080\"));\n    return s(e, {\n      query: {\n        f: \"json\"\n      },\n      authMode: \"anonymous\",\n      withCredentials: !0\n    }).then(e => e.data);\n  }\n  _doPortalSignIn(e) {\n    const t = this._portalConfig,\n      r = window.location.href,\n      s = this.findServerInfo(e);\n    return !(!t && !this._isPortalDomain(r) || !(s ? s.hasPortal || s.owningSystemUrl && this._isPortalDomain(s.owningSystemUrl) : this._isPortalDomain(e)) || !(this._isIdProvider(r, e) || t && (this._hasSameServerInstance(this._getServerInstanceRoot(t.restBaseUrl), e) || this._isIdProvider(t.restBaseUrl, e)) || p(r, e, !0)));\n  }\n  _checkProtocol(e, t, r, s) {\n    let o = !0;\n    const n = s ? t.adminTokenServiceUrl : t.tokenServiceUrl;\n    if (n.trim().toLowerCase().startsWith(\"https:\") && !this._appOrigin.startsWith(\"https:\") && S(n) && (o = !!this._protocolFunc && !!this._protocolFunc({\n      resourceUrl: e,\n      serverInfo: t\n    }), !o)) {\n      r(new i(\"identity-manager:aborted\", \"Aborted the Sign-In process to avoid sending password over insecure connection.\"));\n    }\n    return o;\n  }\n  _enqueue(e, t, r, s, i, o) {\n    return s || (s = l()), s.resUrl_ = e, s.sinfo_ = t, s.options_ = r, s.admin_ = i, s.refresh_ = o, this._busy ? this._hasSameServerInstance(this._getServerInstanceRoot(e), this._busy.resUrl_) ? (this._oAuthDfd && this._oAuthDfd.oAuthWin_ && this._oAuthDfd.oAuthWin_.focus(), this._soReqs.push(s)) : this._xoReqs.push(s) : this._doSignIn(s), s.promise;\n  }\n  _doSignIn(e) {\n    this._busy = e, this._rejectOnPersistedPageShow = !1;\n    const t = t => {\n        const r = e.options_?.resource,\n          s = e.resUrl_,\n          i = e.refresh_;\n        let o = !1;\n        this.credentials.includes(t) || (i && this.credentials.includes(i) ? (i.userId = t.userId, i.token = t.token, i.expires = t.expires, i.validity = t.validity, i.ssl = t.ssl, i.creationTime = t.creationTime, o = !0, t = i) : this.credentials.push(t)), t.resources || (t.resources = []), t.resources.includes(r || s) || t.resources.push(r || s), t.scope = this._isServerRsrc(s) ? \"server\" : \"portal\", t.emitTokenChange();\n        const n = this._soReqs,\n          a = {};\n        this._soReqs = [], n.forEach(e => {\n          if (!this._isIdenticalService(s, e.resUrl_)) {\n            const r = this._getSuffix(e.resUrl_);\n            a[r] || (a[r] = !0, t.resources.push(e.resUrl_));\n          }\n        }), e.resolve(t), n.forEach(e => {\n          this._hasSameServerInstance(this._getServerInstanceRoot(s), e.resUrl_) ? e.resolve(t) : this._soReqs.push(e);\n        }), this._busy = e.resUrl_ = e.sinfo_ = e.refresh_ = null, o || this.emit(\"credential-create\", {\n          credential: t\n        }), this._soReqs.length ? this._doSignIn(this._soReqs.shift()) : this._xoReqs.length && this._doSignIn(this._xoReqs.shift());\n      },\n      r = t => {\n        e.reject(t), this._busy = e.resUrl_ = e.sinfo_ = e.refresh_ = null, this._soReqs.length ? this._doSignIn(this._soReqs.shift()) : this._xoReqs.length && this._doSignIn(this._xoReqs.shift());\n      },\n      s = (o, a, h, l) => {\n        const d = e.sinfo_,\n          u = !e.options_ || !1 !== e.options_.prompt,\n          _ = d.hasPortal && this._findOAuthInfo(e.resUrl_);\n        let f, g;\n        if (o) t(new E({\n          userId: o,\n          server: d.server ?? void 0,\n          token: h ?? void 0,\n          expires: null != l ? Number(l) : null,\n          ssl: !!a\n        }));else if (window !== window.parent && this._appUrlObj.query?.[\"arcgis-auth-origin\"] && this._appUrlObj.query?.[\"arcgis-auth-portal\"] && this._hasSameServerInstance(this._getServerInstanceRoot(this._appUrlObj.query[\"arcgis-auth-portal\"]), e.resUrl_)) {\n          window.parent.postMessage({\n            type: \"arcgis:auth:requestCredential\"\n          }, this._appUrlObj.query[\"arcgis-auth-origin\"]);\n          const s = n(window, \"message\", e => {\n            e.source === window.parent && e.data && (\"arcgis:auth:credential\" === e.data.type ? (s.remove(), e.data.credential.expires < Date.now() ? r(new i(\"identity-manager:credential-request-failed\", \"Parent application's token has expired.\")) : t(new E(e.data.credential))) : \"arcgis:auth:error\" === e.data.type && (s.remove(), \"tokenExpiredError\" === e.data.error.name ? r(new i(\"identity-manager:credential-request-failed\", \"Parent application's token has expired.\")) : r(i.fromJSON(e.data.error))));\n          });\n          c(e.options_?.signal, () => {\n            s.remove();\n          });\n        } else if (_) {\n          let o = _._oAuthCred;\n          if (!o) {\n            const e = new U(_, b),\n              t = new U(_, q);\n            e.isValid() && t.isValid() ? e.expires > t.expires ? (o = e, t.destroy()) : (o = t, e.destroy()) : o = e.isValid() ? e : t, _._oAuthCred = o;\n          }\n          if (o.isValid()) {\n            f = new E({\n              userId: o.userId ?? void 0,\n              server: d.server ?? void 0,\n              token: o.token ?? void 0,\n              expires: o.expires,\n              ssl: o.ssl ?? void 0,\n              _oAuthCred: o\n            });\n            const i = _.appId !== o.appId && this._doPortalSignIn(e.resUrl_);\n            i || o.refreshToken ? (e._pendingDfd = o.refreshToken ? this._getOAuthToken(d.server, o.refreshToken, o.appId).then(e => (f.expires = Date.now() + 1e3 * e.expires_in, f.token = e.access_token, f)) : Promise.resolve(f), e._pendingDfd.then(e => i ? this._exchangeToken(e.server, _.appId, e.token).then(t => (e.token = t, e)).catch(() => e) : e).then(e => {\n              t(e);\n            }).catch(e => {\n              const t = e.details?.httpStatus;\n              t > 0 && 404 !== t ? (o.destroy(), s()) : r(e);\n            })) : t(f);\n          } else if (this._oAuthLocationParams && this._hasSameServerInstance(_.portalUrl, this._oAuthLocationParams.state.portalUrl) && (this._oAuthLocationParams.access_token || this._oAuthLocationParams.code && this._oAuthLocationParams.state.uid === o.stateUID && o.codeVerifier)) {\n            const s = this._oAuthLocationParams;\n            this._oAuthLocationParams = null, e._pendingDfd = this._processOAuthResponseParams(s, _, d).then(e => {\n              t(e);\n            }).catch(r);\n          } else {\n            const s = () => {\n              u ? e._pendingDfd = this.oAuthSignIn(e.resUrl_, d, _, e.options_).then(t, r) : (g = new i(\"identity-manager:not-authenticated\", \"User is not signed in.\"), r(g));\n            };\n            this._doPortalSignIn(e.resUrl_) ? e._pendingDfd = this._getPlatformSelf(d.server, _.appId).then(e => {\n              p(e.portalUrl, this._appOrigin, !0) ? (f = new E({\n                userId: e.username,\n                server: d.server ?? void 0,\n                expires: Date.now() + 1e3 * e.expires_in,\n                token: e.token\n              }), t(f)) : s();\n            }).catch(s) : s();\n          }\n        } else if (u) {\n          if (this._checkProtocol(e.resUrl_, d, r, e.admin_)) {\n            let s = e.options_;\n            e.admin_ && (s = s || {}, s.isAdmin = !0), e._pendingDfd = this.signIn(e.resUrl_, d, s).then(t, r);\n          }\n        } else g = new i(\"identity-manager:not-authenticated\", \"User is not signed in.\"), r(g);\n      },\n      o = () => {\n        const s = e.sinfo_,\n          i = s.owningSystemUrl,\n          o = e.options_;\n        let n, a, h, l;\n        if (o && (n = o.token, a = o.error, h = o.prompt), l = this._findCredential(i, {\n          token: n,\n          resource: e.resUrl_\n        }), !l) for (const e of this.credentials) if (this._isIdProvider(i, e.server)) {\n          l = e;\n          break;\n        }\n        if (l) {\n          const i = this.findCredential(e.resUrl_, l.userId);\n          if (i) t(i);else if (D(s, this._legacyFed)) {\n            const e = l.toJSON();\n            e.server = s.server, e.resources = null, t(new E(e));\n          } else {\n            (e._pendingDfd = this.generateToken(this.findServerInfo(l.server), null, {\n              serverUrl: e.resUrl_,\n              token: l.token,\n              signal: e.options_.signal,\n              ssl: l.ssl\n            })).then(r => {\n              t(new E({\n                userId: l?.userId,\n                server: s.server ?? void 0,\n                token: r.token,\n                expires: null != r.expires ? Number(r.expires) : null,\n                ssl: !!r.ssl,\n                isAdmin: e.admin_,\n                validity: r.validity\n              }));\n            }, r);\n          }\n        } else {\n          this._busy = null, n && (e.options_.token = null);\n          (e._pendingDfd = this.getCredential(i.replace(/\\/?$/, \"/sharing\"), {\n            resource: e.resUrl_,\n            owningTenant: s.owningTenant,\n            signal: e.options_.signal,\n            token: n,\n            error: a,\n            prompt: h\n          })).then(() => {\n            this._enqueue(e.resUrl_, e.sinfo_, e.options_, e, e.admin_);\n          }, t => {\n            e.resUrl_ = e.sinfo_ = e.refresh_ = null, e.reject(t);\n          });\n        }\n      };\n    this._errbackFunc = r;\n    const a = e.sinfo_.owningSystemUrl,\n      l = this._isServerRsrc(e.resUrl_),\n      d = e.sinfo_._restInfoPms;\n    d ? d.promise.then(t => {\n      const r = e.sinfo_;\n      if (r._restInfoPms) {\n        r.adminTokenServiceUrl = r._restInfoPms.adminUrl, r._restInfoPms = null, r.tokenServiceUrl = (h(\"authInfo.tokenServicesUrl\", t) || h(\"authInfo.tokenServiceUrl\", t) || h(\"tokenServiceUrl\", t)) ?? null, r.shortLivedTokenValidity = h(\"authInfo.shortLivedTokenValidity\", t) ?? null, r.currentVersion = t.currentVersion, r.owningTenant = t.owningTenant;\n        const e = r.owningSystemUrl = t.owningSystemUrl;\n        e && this._portals.push(e);\n      }\n      l && r.owningSystemUrl ? o() : s();\n    }, () => {\n      e.sinfo_._restInfoPms = null;\n      const t = new i(\"identity-manager:server-identification-failed\", \"Unknown resource - could not find token service endpoint.\");\n      r(t);\n    }) : l && a ? o() : e.sinfo_._selfReq ? e.sinfo_._selfReq.selfDfd.then(t => {\n      const r = {};\n      let s, i, o, n;\n      return t && (s = t.user?.username, r.username = s, r.allSSL = t.allSSL, i = t.supportsOAuth, n = parseFloat(t.currentVersion), \"multitenant\" === t.portalMode && (o = t.customBaseUrl), e.sinfo_.currentVersion = n), e.sinfo_.webTierAuth = !!s, s && this.normalizeWebTierAuth ? this.generateToken(e.sinfo_, null, {\n        ssl: r.allSSL\n      }).catch(() => null).then(e => (r.portalToken = e?.token, r.tokenExpiration = e?.expires, r)) : !s && i && n >= 4.4 && !this._findOAuthInfo(e.resUrl_) ? this._generateOAuthInfo({\n        portalUrl: e.sinfo_.server,\n        customBaseUrl: o,\n        owningTenant: e.sinfo_._selfReq.owningTenant\n      }).catch(() => null).then(() => r) : r;\n    }).catch(() => null).then(t => {\n      e.sinfo_._selfReq = null, t ? s(t.username, t.allSSL, t.portalToken, t.tokenExpiration) : s();\n    }) : s();\n  }\n  _generateOAuthInfo(e) {\n    let t,\n      r = null,\n      i = e.portalUrl;\n    const o = e.customBaseUrl,\n      n = e.owningTenant,\n      a = !this._defaultOAuthInfo && this._createDefaultOAuthInfo && !this._hasTestedIfAppIsOnPortal;\n    if (a) {\n      r = window.location.href;\n      let e = r.indexOf(\"?\");\n      e > -1 && (r = r.slice(0, e)), e = r.search(/\\/(apps|home)\\//), r = e > -1 ? r.slice(0, e) : null;\n    }\n    return a && r ? (this._hasTestedIfAppIsOnPortal = !0, t = s(r + \"/sharing/rest\", {\n      query: {\n        f: \"json\"\n      }\n    }).then(() => {\n      this._defaultOAuthInfo = new T({\n        appId: \"arcgisonline\",\n        popupCallbackUrl: r + \"/home/oauth-callback.html\"\n      });\n    })) : t = Promise.resolve(), t.then(() => {\n      if (this._defaultOAuthInfo) return i = i.replace(/^http:/i, \"https:\"), s(i + \"/sharing/rest/oauth2/validateRedirectUri\", {\n        query: {\n          accountId: n,\n          client_id: this._defaultOAuthInfo.appId,\n          redirect_uri: w(this._defaultOAuthInfo.popupCallbackUrl),\n          f: \"json\"\n        }\n      }).then(e => {\n        if (e.data.valid) {\n          const t = this._defaultOAuthInfo.clone();\n          e.data.urlKey && o ? t.portalUrl = \"https://\" + e.data.urlKey.toLowerCase() + \".\" + o : t.portalUrl = i, t.popup = window !== window.top || !(p(i, this._appOrigin) || this._gwDomains.some(e => e.regex.test(i) && e.regex.test(this._appOrigin))), this.oAuthInfos.push(t);\n        }\n      });\n    });\n  }\n  _doOAuthSignIn(e, t, r, s) {\n    const o = r._oAuthCred,\n      a = {\n        portalUrl: r.portalUrl\n      };\n    !r.popup && r.preserveUrlHash && window.location.hash && (a.hash = window.location.hash), o.stateUID && (a.uid = o.stateUID);\n    const h = {\n      client_id: r.appId,\n      response_type: o.codeVerifier ? \"code\" : \"token\",\n      state: JSON.stringify(a),\n      expiration: r.expiration,\n      locale: r.locale,\n      redirect_uri: this._getRedirectURI(r, !!o.codeVerifier)\n    };\n    r.forceLogin && (h.force_login = !0), r.forceUserId && r.userId && (h.prepopulatedusername = r.userId), !r.popup && this._doPortalSignIn(e) && (h.redirectToUserOrgUrl = !0), o.codeVerifier && (h.code_challenge = s || o.codeVerifier, h.code_challenge_method = s ? \"S256\" : \"plain\");\n    const l = r.portalUrl.replace(/^http:/i, \"https:\") + \"/sharing/oauth2/authorize\",\n      c = l + \"?\" + m(h);\n    if (r.popup) {\n      const e = window.open(c, \"esriJSAPIOAuth\", r.popupWindowFeatures);\n      if (e) e.focus(), this._oAuthDfd.oAuthWin_ = e, this._oAuthIntervalId = setInterval(() => {\n        if (e.closed) {\n          clearInterval(this._oAuthIntervalId), this._oAuthOnPopupHandle.remove();\n          const e = this._oAuthDfd;\n          if (e) {\n            const t = new i(\"identity-manager:user-aborted\", \"ABORTED\");\n            e.reject(t);\n          }\n        }\n      }, 500), this._oAuthOnPopupHandle = n(window, [\"arcgis:auth:hash\", \"arcgis:auth:location:search\"], e => {\n        \"arcgis:auth:hash\" === e.type ? this.setOAuthResponseHash(e.detail) : this._setOAuthResponseQueryString(e.detail);\n      });else {\n        const e = new i(\"identity-manager:popup-blocked\", \"ABORTED\");\n        this._oAuthDfd.reject(e);\n      }\n    } else this._rejectOnPersistedPageShow = !0, this._oAuthRedirectFunc ? this._oAuthRedirectFunc({\n      authorizeParams: h,\n      authorizeUrl: l,\n      resourceUrl: e,\n      serverInfo: t,\n      oAuthInfo: r\n    }) : window.location.href = c;\n  }\n  _getRedirectURI(e, t) {\n    const r = window.location.href.replace(/#.*$/, \"\");\n    if (e.popup) return w(e.popupCallbackUrl);\n    if (t) {\n      const e = u(r);\n      return e.query && [\"code\", \"error\", \"error_description\", \"message_code\", \"persist\", \"state\"].forEach(t => {\n        delete e.query[t];\n      }), I(e.path, e.query);\n    }\n    return r;\n  }\n}\nj.prototype.declaredClass = \"esri.identity.IdentityManagerBase\";\nlet E = class extends o.EventedAccessor {\n  constructor(e) {\n    super(e), this._oAuthCred = null, this.tokenRefreshBuffer = 2, e?._oAuthCred && (this._oAuthCred = e._oAuthCred);\n  }\n  initialize() {\n    this.resources = this.resources || [], null == this.creationTime && (this.creationTime = Date.now());\n  }\n  refreshToken() {\n    const e = r,\n      t = e.findServerInfo(this.server),\n      s = t?.owningSystemUrl,\n      i = !!s && \"server\" === this.scope,\n      o = i && D(t, e._legacyFed),\n      n = t.webTierAuth,\n      a = n && e.normalizeWebTierAuth,\n      h = R[this.server],\n      l = h?.[this.userId];\n    let c,\n      d = this.resources && this.resources[0],\n      u = i ? e.findServerInfo(s) : null,\n      p = {\n        username: this.userId,\n        password: l\n      };\n    if (n && !a) return;\n    i && !u && e.serverInfos.some(t => (e._isIdProvider(s, t.server) && (u = t), !!u));\n    const _ = u ? e.findCredential(u.server, this.userId) : null;\n    if (!i || _) {\n      if (!o) {\n        if (i) c = {\n          serverUrl: d,\n          token: _?.token,\n          ssl: _?.ssl\n        };else if (a) p = null, c = {\n          ssl: this.ssl\n        };else {\n          if (!l) {\n            let r;\n            return d && (d = e._sanitizeUrl(d), this._enqueued = 1, r = e._enqueue(d, t, null, null, this.isAdmin, this), r.then(() => {\n              this._enqueued = 0, this.refreshServerTokens();\n            }).catch(() => {\n              this._enqueued = 0;\n            })), r;\n          }\n          this.isAdmin && (c = {\n            isAdmin: !0\n          });\n        }\n        return e.generateToken(i ? u : t, i ? null : p, c).then(e => {\n          this.token = e.token, this.expires = null != e.expires ? Number(e.expires) : null, this.creationTime = Date.now(), this.validity = e.validity, this.emitTokenChange(), this.refreshServerTokens();\n        }).catch(() => {});\n      }\n      _?.refreshToken();\n    }\n  }\n  refreshServerTokens() {\n    if (\"portal\" === this.scope) {\n      const e = r;\n      e.credentials.forEach(t => {\n        const r = e.findServerInfo(t.server),\n          s = r?.owningSystemUrl;\n        t !== this && t.userId === this.userId && s && \"server\" === t.scope && (e._hasSameServerInstance(this.server, s) || e._isIdProvider(s, this.server)) && (D(r, e._legacyFed) ? (t.token = this.token, t.expires = this.expires, t.creationTime = this.creationTime, t.validity = this.validity, t.emitTokenChange()) : t.refreshToken());\n      });\n    }\n  }\n  emitTokenChange(e) {\n    clearTimeout(this._refreshTimer);\n    const t = r,\n      s = this.server ? t.findServerInfo(this.server) : null,\n      i = s?.owningSystemUrl,\n      o = i ? t.findServerInfo(i) : null;\n    !1 === e || i && \"portal\" !== this.scope && (!o?.webTierAuth || t.normalizeWebTierAuth) || null == this.expires && null == this.validity || this._startRefreshTimer(), this.emit(\"token-change\");\n  }\n  destroy() {\n    this.userId = this.server = this.token = this.expires = this.validity = this.resources = this.creationTime = null, this._oAuthCred && (this._oAuthCred.destroy(), this._oAuthCred = null);\n    const e = r,\n      t = e.credentials.indexOf(this);\n    t > -1 && e.credentials.splice(t, 1), this.emitTokenChange(), this.emit(\"destroy\");\n  }\n  toJSON() {\n    const e = a({\n        userId: this.userId,\n        server: this.server,\n        token: this.token,\n        expires: this.expires,\n        validity: this.validity,\n        ssl: this.ssl,\n        isAdmin: this.isAdmin,\n        creationTime: this.creationTime,\n        scope: this.scope\n      }),\n      t = this.resources;\n    return t && t.length > 0 && (e.resources = t.slice()), e;\n  }\n  _startRefreshTimer() {\n    clearTimeout(this._refreshTimer);\n    const e = 6e4 * this.tokenRefreshBuffer,\n      t = 2 ** 31 - 1;\n    let r = (this.validity ? this.creationTime + 6e4 * this.validity : this.expires) - Date.now();\n    r < 0 ? r = 0 : r > t && (r = t), this._refreshTimer = setTimeout(this.refreshToken.bind(this), r > e ? r - e : r);\n  }\n};\ne([A()], E.prototype, \"creationTime\", void 0), e([A()], E.prototype, \"expires\", void 0), e([A()], E.prototype, \"isAdmin\", void 0), e([A()], E.prototype, \"oAuthState\", void 0), e([A()], E.prototype, \"resources\", void 0), e([A()], E.prototype, \"scope\", void 0), e([A()], E.prototype, \"server\", void 0), e([A()], E.prototype, \"ssl\", void 0), e([A()], E.prototype, \"token\", void 0), e([A()], E.prototype, \"tokenRefreshBuffer\", void 0), e([A()], E.prototype, \"userId\", void 0), e([A()], E.prototype, \"validity\", void 0), E = e([k(\"esri.identity.Credential\")], E);\nexport { E as Credential, j as IdentityManagerBase };","map":{"version":3,"names":["_","e","t","id","r","s","i","o","on","n","fixJson","a","getDeepValue","h","createResolver","l","onAbort","c","isAborted","d","urlToObject","u","hasSameOrigin","p","Url","queryToObject","f","base64UrlEncode","g","objectToQuery","m","normalize","v","getProxyRule","S","makeAbsolute","w","addQueryParameters","I","property","A","subclass","k","y","U","T","x","isSecureProxyService","O","normalizeArcGISOnlineOrgDomain","P","R","C","owningSystemUrl","host","server","test","D","some","b","q","window","localStorage","sessionStorage","j","constructor","_portalConfig","globalThis","esriGeowConfig","serverInfos","oAuthInfos","credentials","_soReqs","_xoReqs","_portals","_defaultOAuthInfo","_defaultTokenValidity","dialog","tokenValidity","normalizeWebTierAuth","_appOrigin","origin","location","_appUrlObj","href","_busy","_rejectOnPersistedPageShow","_oAuthLocationParams","_gwTokenUrl","_agsRest","_agsPortal","_agsAdmin","_adminSvcs","_gwDomains","regex","customBaseUrl","tokenServiceUrl","_legacyFed","_regexSDirUrl","_regexServerType","_gwUser","_gwItem","_gwGroup","_rePortalTokenSvc","_createDefaultOAuthInfo","_hasTestedIfAppIsOnPortal","_getPlatformSelfError","_getOAuthLocationParams","addEventListener","_pageShowHandler","registerServers","filter","findServerInfo","concat","forEach","push","hasPortal","registerOAuthInfos","findOAuthInfo","portalUrl","splice","indexOf","registerToken","_sanitizeUrl","_isServerRsrc","_getServerInstanceRoot","hasServer","_getTokenSvcUrl","_findCredential","Object","assign","E","userId","token","expires","ssl","scope","resources","emitTokenChange","refreshServerTokens","toJSON","map","initialize","JSON","parse","declaredClass","length","appId","Date","now","_hasSameServerInstance","findCredential","_getIdenticalSvcIdx","getCredential","error","prompt","AbortController","signal","abort","reject","promise","_isAdminResource","details","httpStatus","destroy","resolve","_restInfoPms","_selfReq","owningTenant","selfDfd","_getPortalSelf","replace","_enqueue","getResourceName","_isRESTService","generateToken","shortLivedTokenValidity","isAdmin","serverUrl","customParameters","adminTokenServiceUrl","toLowerCase","webTierAuth","scheme","uri","port","query","request","username","password","expiration","referer","client","method","authMode","useProxy","_useProxy","ioArgs","withCredentials","then","data","validity","isBusy","checkSignInStatus","checkAppAccess","credential","_doPortalSignIn","force","client_id","valid","viewOnlyUserTypeApp","catch","name","viewOnly","setOAuthResponseHash","charAt","slice","_processOAuthPopupParams","setOAuthRedirectionHandler","_oAuthRedirectFunc","setProtocolErrorHandler","_protocolFunc","signIn","arguments","undefined","remove","_oAuthDfd","open","resource","emit","Number","signingIn","oAuthSignIn","oAuthWin_","closed","close","resUrl_","sinfo_","oinfo_","_oAuthCred","storage","flowType","currentVersion","crypto","getRandomValues","Uint8Array","codeVerifier","stateUID","save","_getCodeChallenge","oAuthPopupConfirmation","popup","_doOAuthSignIn","oAuthPrompt","destroyCredentials","enablePostMessageAuth","_postMessageAuthHandle","endsWith","type","source","postMessage","message","disablePostMessageAuth","hash","access_token","expires_in","state","hasOwnProperty","error_description","console","log","search","code","uid","pathname","history","replaceState","_getOAuthToken","grant_type","redirect_uri","code_verifier","refresh_token","isSecureContext","TextEncoder","encode","subtle","digest","persisted","_errbackFunc","_addResource","_removeResource","_findOAuthInfo","_isIdProvider","_isPortalDomain","String","_getOrigin","Math","max","proxyUrl","path","includes","_isIdenticalService","_getSuffix","replaceAll","restBaseUrl","adminUrl","_processOAuthResponseParams","_getRedirectURI","oAuthState","persist","refreshToken","refresh_token_expires_in","Promise","clearInterval","_oAuthIntervalId","_oAuthOnPopupHandle","_setOAuthResponseQueryString","_exchangeToken","_getPlatformSelf","headers","messageCode","allSSL","portalMode","supportsOAuth","startsWith","_checkProtocol","trim","resourceUrl","serverInfo","options_","admin_","refresh_","focus","_doSignIn","creationTime","shift","parent","fromJSON","isValid","_pendingDfd","user","parseFloat","portalToken","tokenExpiration","_generateOAuthInfo","popupCallbackUrl","accountId","clone","urlKey","top","preserveUrlHash","response_type","stringify","locale","forceLogin","force_login","forceUserId","prepopulatedusername","redirectToUserOrgUrl","code_challenge","code_challenge_method","popupWindowFeatures","setInterval","detail","authorizeParams","authorizeUrl","oAuthInfo","prototype","EventedAccessor","tokenRefreshBuffer","_enqueued","clearTimeout","_refreshTimer","_startRefreshTimer","setTimeout","bind","Credential","IdentityManagerBase"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/identity/IdentityManagerBase.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../config.js\";import{id as r}from\"../kernel.js\";import s from\"../request.js\";import i from\"../core/Error.js\";import o from\"../core/Evented.js\";import{on as n}from\"../core/events.js\";import{fixJson as a}from\"../core/lang.js\";import{getDeepValue as h}from\"../core/object.js\";import{createResolver as l,onAbort as c,isAborted as d}from\"../core/promiseUtils.js\";import{urlToObject as u,hasSameOrigin as p,Url as _,queryToObject as f,base64UrlEncode as g,objectToQuery as m,normalize as v,getProxyRule as S,makeAbsolute as w,addQueryParameters as I}from\"../core/urlUtils.js\";import{property as A}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/Logger.js\";import{subclass as k}from\"../core/accessorSupport/decorators/subclass.js\";import y from\"./IdentityModal.js\";import U from\"./OAuthCredential.js\";import T from\"./OAuthInfo.js\";import x from\"./ServerInfo.js\";import{isSecureProxyService as O,normalizeArcGISOnlineOrgDomain as P}from\"../portal/support/urlUtils.js\";const R={},C=e=>{const t=new _(e.owningSystemUrl).host,r=new _(e.server).host,s=/.+\\.arcgis\\.com$/i;return s.test(t)&&s.test(r)},D=(e,t)=>!!(C(e)&&t&&t.some((t=>t.test(e.server))));let b=null,q=null;try{b=window.localStorage,q=window.sessionStorage}catch{}class j extends o{constructor(){super(),this._portalConfig=globalThis.esriGeowConfig,this.serverInfos=[],this.oAuthInfos=[],this.credentials=[],this._soReqs=[],this._xoReqs=[],this._portals=[],this._defaultOAuthInfo=null,this._defaultTokenValidity=60,this.dialog=null,this.tokenValidity=null,this.normalizeWebTierAuth=!1,this._appOrigin=\"null\"!==window.origin?window.origin:window.location.origin,this._appUrlObj=u(window.location.href),this._busy=null,this._rejectOnPersistedPageShow=!1,this._oAuthLocationParams=null,this._gwTokenUrl=\"/sharing/rest/generateToken\",this._agsRest=\"/rest/services\",this._agsPortal=/\\/sharing(\\/|$)/i,this._agsAdmin=/(https?:\\/\\/[^/]+\\/[^/]+)\\/admin\\/?(\\/.*)?$/i,this._adminSvcs=/\\/rest\\/admin\\/services(\\/|$)/i,this._gwDomains=[{regex:/^https?:\\/\\/www\\.arcgis\\.com/i,customBaseUrl:\"maps.arcgis.com\",tokenServiceUrl:\"https://www.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:dev|[a-z\\d-]+\\.mapsdev)\\.arcgis\\.com/i,customBaseUrl:\"mapsdev.arcgis.com\",tokenServiceUrl:\"https://dev.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:devext|[a-z\\d-]+\\.mapsdevext)\\.arcgis\\.com/i,customBaseUrl:\"mapsdevext.arcgis.com\",tokenServiceUrl:\"https://devext.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:qaext|[a-z\\d-]+\\.mapsqa)\\.arcgis\\.com/i,customBaseUrl:\"mapsqa.arcgis.com\",tokenServiceUrl:\"https://qaext.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/[a-z\\d-]+\\.maps\\.arcgis\\.com/i,customBaseUrl:\"maps.arcgis.com\",tokenServiceUrl:\"https://www.arcgis.com/sharing/rest/generateToken\"}],this._legacyFed=[],this._regexSDirUrl=/http.+\\/rest\\/services\\/?/gi,this._regexServerType=/(\\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|KnowledgeGraphServer|MapServer|MissionServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer|VideoServer)).*/gi,this._gwUser=/http.+\\/users\\/([^/]+).*/i,this._gwItem=/http.+\\/items\\/([^/]+).*/i,this._gwGroup=/http.+\\/groups\\/([^/]+).*/i,this._rePortalTokenSvc=/\\/sharing(\\/rest)?\\/generatetoken/i,this._createDefaultOAuthInfo=!0,this._hasTestedIfAppIsOnPortal=!1,this._getPlatformSelfError=null,this._getOAuthLocationParams(),window.addEventListener(\"pageshow\",(e=>{this._pageShowHandler(e)}))}registerServers(e){const t=this.serverInfos;t?(e=e.filter((e=>!this.findServerInfo(e.server))),this.serverInfos=t.concat(e)):this.serverInfos=e,e.forEach((e=>{e.owningSystemUrl&&this._portals.push(e.owningSystemUrl),e.hasPortal&&this._portals.push(e.server)}))}registerOAuthInfos(e){const t=this.oAuthInfos;if(t){for(const r of e){const e=this.findOAuthInfo(r.portalUrl);e&&t.splice(t.indexOf(e),1)}this.oAuthInfos=t.concat(e)}else this.oAuthInfos=e}registerToken(e){e={...e};const t=this._sanitizeUrl(e.server),r=this._isServerRsrc(t);let s,i=this.findServerInfo(t),o=!0;i||(i=new x,i.server=this._getServerInstanceRoot(t),r?i.hasServer=!0:(i.tokenServiceUrl=this._getTokenSvcUrl(t),i.hasPortal=!0),this.registerServers([i])),s=this._findCredential(t),s?(delete e.server,Object.assign(s,e),o=!1):(s=new E({userId:e.userId,server:i.server??void 0,token:e.token,expires:e.expires,ssl:e.ssl,scope:r?\"server\":\"portal\"}),s.resources=[t],this.credentials.push(s)),s.emitTokenChange(!1),o||s.refreshServerTokens()}toJSON(){return a({serverInfos:this.serverInfos.map((e=>e.toJSON())),oAuthInfos:this.oAuthInfos.map((e=>e.toJSON())),credentials:this.credentials.map((e=>e.toJSON()))})}initialize(e){if(!e)return;\"string\"==typeof e&&(e=JSON.parse(e));const t=e.serverInfos,r=e.oAuthInfos,s=e.credentials;if(t){const e=[];t.forEach((t=>{t.server&&t.tokenServiceUrl&&e.push(t.declaredClass?t:new x(t))})),e.length&&this.registerServers(e)}if(r){const e=[];r.forEach((t=>{t.appId&&e.push(t.declaredClass?t:new T(t))})),e.length&&this.registerOAuthInfos(e)}s&&s.forEach((e=>{e.server&&e.token&&e.expires&&e.expires>Date.now()&&((e=e.declaredClass?e:new E(e)).emitTokenChange(),this.credentials.push(e))}))}findServerInfo(e){let t;e=this._sanitizeUrl(e);for(const r of this.serverInfos)if(this._hasSameServerInstance(r.server,e)){t=r;break}return t}findOAuthInfo(e){let t;e=this._sanitizeUrl(e);for(const r of this.oAuthInfos)if(this._hasSameServerInstance(r.portalUrl,e)){t=r;break}return t}findCredential(e,t){if(!e)return;let r;e=this._sanitizeUrl(e);const s=this._isServerRsrc(e)?\"server\":\"portal\";if(t){for(const i of this.credentials)if(this._hasSameServerInstance(i.server,e)&&t===i.userId&&i.scope===s){r=i;break}}else for(const i of this.credentials)if(this._hasSameServerInstance(i.server,e)&&-1!==this._getIdenticalSvcIdx(e,i)&&i.scope===s){r=i;break}return r}getCredential(e,t){let r,s,o=!0;t&&(r=!!t.token,s=t.error,o=!1!==t.prompt),t={...t},e=this._sanitizeUrl(e);const n=new AbortController,a=l();if(t.signal&&c(t.signal,(()=>{n.abort()})),c(n,(()=>{a.reject(new i(\"identity-manager:user-aborted\",\"ABORTED\"))})),d(n))return a.promise;t.signal=n.signal;const h=this._isAdminResource(e),u=r?this.findCredential(e):null;let _;if(u&&s&&s.details&&498===s.details.httpStatus)u.destroy();else if(u)return _=new i(\"identity-manager:not-authorized\",\"You are currently signed in as: '\"+u.userId+\"'. You do not have access to this resource: \"+e,{error:s}),a.reject(_),a.promise;const f=this._findCredential(e,t);if(f)return a.resolve(f),a.promise;let g=this.findServerInfo(e);if(g)!g.hasPortal&&g.server&&g.owningSystemUrl&&this._hasSameServerInstance(g.server,g.owningSystemUrl)&&(g.hasPortal=!0),!g.hasServer&&this._isServerRsrc(e)&&(g._restInfoPms=this._getTokenSvcUrl(e),g.hasServer=!0);else{const t=this._getTokenSvcUrl(e);if(!t)return _=new i(\"identity-manager:unknown-resource\",\"Unknown resource - could not find token service endpoint.\"),a.reject(_),a.promise;g=new x,g.server=this._getServerInstanceRoot(e),\"string\"==typeof t?(g.tokenServiceUrl=t,g.hasPortal=!0):(g._restInfoPms=t,g.hasServer=!0),this.registerServers([g])}return g.hasPortal&&void 0===g._selfReq&&(o||p(g.tokenServiceUrl,this._appOrigin)||this._gwDomains.some((e=>e.tokenServiceUrl===g.tokenServiceUrl)))&&(g._selfReq={owningTenant:t?.owningTenant,selfDfd:this._getPortalSelf(g.tokenServiceUrl.replace(this._rePortalTokenSvc,\"/sharing/rest/portals/self\"),e)}),this._enqueue(e,g,t,a,h)}getResourceName(e){return this._isRESTService(e)?e.replace(this._regexSDirUrl,\"\").replace(this._regexServerType,\"\")||\"\":this._gwUser.test(e)&&e.replace(this._gwUser,\"$1\")||this._gwItem.test(e)&&e.replace(this._gwItem,\"$1\")||this._gwGroup.test(e)&&e.replace(this._gwGroup,\"$1\")||\"\"}generateToken(e,t,r){const o=this._rePortalTokenSvc.test(e.tokenServiceUrl),n=new _(this._appOrigin),a=e.shortLivedTokenValidity;let h,l,c,d,u,f,g,m;t&&(m=this.tokenValidity||a||this._defaultTokenValidity,m>a&&a>0&&(m=a)),r&&(h=r.isAdmin,l=r.serverUrl,c=r.token,f=r.signal,g=r.ssl,e.customParameters=r.customParameters),h?d=e.adminTokenServiceUrl:(d=e.tokenServiceUrl,u=new _(d.toLowerCase()),e.webTierAuth&&r?.serverUrl&&!g&&\"http\"===n.scheme&&(p(n.uri,d,!0)||\"https\"===u.scheme&&n.host===u.host&&\"7080\"===n.port&&\"7443\"===u.port)&&(d=d.replace(/^https:/i,\"http:\").replace(/:7443/i,\":7080\")));const v={query:{request:\"getToken\",username:t?.username,password:t?.password,serverUrl:l,token:c,expiration:m,referer:h||o?this._appOrigin:null,client:h?\"referer\":null,f:\"json\",...e.customParameters},method:\"post\",authMode:\"anonymous\",useProxy:this._useProxy(e,r),signal:f,...r?.ioArgs};o||(v.withCredentials=!1);return s(d,v).then((r=>{const s=r.data;if(!s?.token)return new i(\"identity-manager:authentication-failed\",\"Unable to generate token\");const o=e.server;return R[o]||(R[o]={}),t&&(R[o][t.username]=t.password),s.validity=m,s}))}isBusy(){return!!this._busy}async checkSignInStatus(e){return(await this.checkAppAccess(e,\"\")).credential}checkAppAccess(e,t,r){let o=!1;return this.getCredential(e,{prompt:!1}).then((n=>{let a;const h={f:\"json\"};if(\"portal\"===n.scope)if(t&&(this._doPortalSignIn(e)||r?.force))a=n.server+\"/sharing/rest/oauth2/validateAppAccess\",h.client_id=t;else{if(!n.token)return{credential:n};a=n.server+\"/sharing/rest\"}else{if(!n.token)return{credential:n};a=n.server+\"/rest/services\"}return n.token&&(h.token=n.token),s(a,{query:h,authMode:\"anonymous\"}).then((e=>{if(!1===e.data.valid)throw new i(\"identity-manager:not-authorized\",`You are currently signed in as: '${n.userId}'.`,e.data);return o=!!e.data.viewOnlyUserTypeApp,{credential:n}})).catch((e=>{if(\"identity-manager:not-authorized\"===e.name)throw e;const t=e.details?.httpStatus;if(498===t)throw n.destroy(),new i(\"identity-manager:not-authenticated\",\"User is not signed in.\");if(400===t)throw new i(\"identity-manager:invalid-request\");return{credential:n}}))})).then((e=>({credential:e.credential,viewOnly:o})))}setOAuthResponseHash(e){e&&(\"#\"===e.charAt(0)&&(e=e.slice(1)),this._processOAuthPopupParams(f(e)))}setOAuthRedirectionHandler(e){this._oAuthRedirectFunc=e}setProtocolErrorHandler(e){this._protocolFunc=e}signIn(e,t,r={}){const s=l(),o=()=>{h?.remove(),d?.remove(),this.dialog?.destroy(),this.dialog=h=d=null},n=()=>{o(),this._oAuthDfd=null,s.reject(new i(\"identity-manager:user-aborted\",\"ABORTED\"))};r.signal&&c(r.signal,(()=>{n()}));const a=new y({open:!0,resource:this.getResourceName(e),server:t.server});this.dialog=a,this.emit(\"dialog-create\");let h=a.on(\"cancel\",n),d=a.on(\"submit\",(e=>{this.generateToken(t,e,{isAdmin:r.isAdmin,signal:r.signal}).then((i=>{o();const n=new E({userId:e.username,server:t.server??void 0,token:i.token,expires:null!=i.expires?Number(i.expires):null,ssl:!!i.ssl,isAdmin:r.isAdmin,validity:i.validity});s.resolve(n)})).catch((e=>{a.error=e,a.signingIn=!1}))}));return s.promise}oAuthSignIn(e,t,r,s){this._oAuthDfd=l();const o=this._oAuthDfd;let n;s?.signal&&c(s.signal,(()=>{const e=this._oAuthDfd&&this._oAuthDfd.oAuthWin_;e&&!e.closed?e.close():this.dialog&&u()})),o.resUrl_=e,o.sinfo_=t,o.oinfo_=r;const a=r._oAuthCred;if(a.storage&&(\"authorization-code\"===r.flowType||\"auto\"===r.flowType&&t.currentVersion>=8.4)){let e=crypto.getRandomValues(new Uint8Array(32));n=g(e),a.codeVerifier=n,e=crypto.getRandomValues(new Uint8Array(32)),a.stateUID=g(e),a.save()||(a.codeVerifier=n=null)}else a.codeVerifier=null;let h,d;this._getCodeChallenge(n).then((i=>{const o=!s||!1!==s.oAuthPopupConfirmation;if(!r.popup||!o)return void this._doOAuthSignIn(e,t,r,i);const n=new y({oAuthPrompt:!0,server:t.server,open:!0});this.dialog=n,this.emit(\"dialog-create\"),h=n.on(\"cancel\",u),d=n.on(\"submit\",(()=>{p(),this._doOAuthSignIn(e,t,r,i)}))}));const u=()=>{p(),this._oAuthDfd=null,o.reject(new i(\"identity-manager:user-aborted\",\"ABORTED\"))},p=()=>{h?.remove(),d?.remove(),this.dialog?.destroy(),this.dialog=null};return o.promise}destroyCredentials(){if(this.credentials){this.credentials.slice().forEach((e=>{e.destroy()}))}this.emit(\"credentials-destroy\")}enablePostMessageAuth(e=\"https://www.arcgis.com/sharing/rest\"){this._postMessageAuthHandle&&this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=n(window,\"message\",(t=>{if((t.origin===this._appOrigin||t.origin.endsWith(\".arcgis.com\"))&&\"arcgis:auth:requestCredential\"===t.data?.type){const r=t.source;this.getCredential(e).then((e=>{r.postMessage({type:\"arcgis:auth:credential\",credential:{expires:e.expires,server:e.server,ssl:e.ssl,token:e.token,userId:e.userId}},t.origin)})).catch((e=>{r.postMessage({type:\"arcgis:auth:error\",error:{name:e.name,message:e.message}},t.origin)}))}}))}disablePostMessageAuth(){this._postMessageAuthHandle&&(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)}_getOAuthLocationParams(){let e=window.location.hash;if(e){\"#\"===e.charAt(0)&&(e=e.slice(1));const t=f(e);let r=!1;if(t.access_token&&t.expires_in&&t.state&&t.hasOwnProperty(\"username\"))try{t.state=JSON.parse(t.state),t.state.portalUrl&&(this._oAuthLocationParams=t,r=!0)}catch{}else if(t.error&&t.error_description&&(console.log(\"IdentityManager OAuth Error: \",t.error,\" - \",t.error_description),\"access_denied\"===t.error&&(r=!0,t.state)))try{t.state=JSON.parse(t.state)}catch{}r&&(window.location.hash=t.state?.hash||\"\")}let t=window.location.search;if(t){\"?\"===t.charAt(0)&&(t=t.slice(1));const e=f(t);let r=!1;if(e.code&&e.state)try{e.state=JSON.parse(e.state),e.state.portalUrl&&e.state.uid&&(this._oAuthLocationParams=e,r=!0)}catch{}else if(e.error&&e.error_description&&(console.log(\"IdentityManager OAuth Error: \",e.error,\" - \",e.error_description),\"access_denied\"===e.error&&(r=!0,e.state)))try{e.state=JSON.parse(e.state)}catch{}if(r){const t={...e};[\"code\",\"error\",\"error_description\",\"message_code\",\"persist\",\"state\"].forEach((e=>{delete t[e]}));const r=m(t),s=window.location.pathname+(r?`?${r}`:\"\")+(e.state?.hash||\"\");window.history.replaceState(window.history.state,\"\",s)}}}_getOAuthToken(e,t,r,i,o){return e=e.replace(/^http:/i,\"https:\"),s(`${e}/sharing/rest/oauth2/token`,{authMode:\"anonymous\",method:\"post\",query:i&&o?{grant_type:\"authorization_code\",code:t,redirect_uri:i,client_id:r,code_verifier:o}:{grant_type:\"refresh_token\",refresh_token:t,client_id:r}}).then((e=>e.data))}async _getCodeChallenge(e){if(e&&globalThis.isSecureContext){const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest(\"SHA-256\",t);return g(new Uint8Array(r))}return null}_pageShowHandler(e){if(e.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow){const e=new i(\"identity-manager:user-aborted\",\"ABORTED\");this._errbackFunc(e)}}_findCredential(e,t){let r,s,i,o,n=-1;const a=t?.token,h=t?.resource,l=this._isServerRsrc(e)?\"server\":\"portal\",c=this.credentials.filter((t=>this._hasSameServerInstance(t.server,e)&&t.scope===l));if(e=h||e,c.length)if(1===c.length){if(r=c[0],i=this.findServerInfo(r.server),s=i?.owningSystemUrl,o=s?this.findCredential(s,r.userId):void 0,n=this._getIdenticalSvcIdx(e,r),!a)return-1===n&&r.resources.push(e),this._addResource(e,o),r;-1!==n&&(r.resources.splice(n,1),this._removeResource(e,o))}else{let t,r;if(c.some((a=>(r=this._getIdenticalSvcIdx(e,a),-1!==r&&(t=a,i=this.findServerInfo(t.server),s=i?.owningSystemUrl,o=s?this.findCredential(s,t.userId):void 0,n=r,!0)))),a)t&&(t.resources.splice(n,1),this._removeResource(e,o));else if(t)return this._addResource(e,o),t}}_findOAuthInfo(e){let t=this.findOAuthInfo(e);if(!t)for(const r of this.oAuthInfos)if(this._isIdProvider(r.portalUrl,e)){t=r;break}return t}_addResource(e,t){t&&-1===this._getIdenticalSvcIdx(e,t)&&t.resources.push(e)}_removeResource(e,t){let r=-1;t&&(r=this._getIdenticalSvcIdx(e,t),r>-1&&t.resources.splice(r,1))}_useProxy(e,t){return t?.isAdmin&&!p(e.adminTokenServiceUrl,this._appOrigin)||!this._isPortalDomain(e.tokenServiceUrl)&&\"10.1\"===String(e.currentVersion)&&!p(e.tokenServiceUrl,this._appOrigin)}_getOrigin(e){const t=new _(e);return t.scheme+\"://\"+t.host+(null!=t.port?\":\"+t.port:\"\")}_getServerInstanceRoot(e){const t=e.toLowerCase();let r=t.indexOf(this._agsRest);return-1===r&&this._isAdminResource(e)&&(r=this._agsAdmin.test(e)?e.replace(this._agsAdmin,\"$1\").length:e.search(this._adminSvcs)),-1!==r||O(t)||(r=t.indexOf(\"/sharing\")),-1===r&&t.endsWith(\"/\")&&(r=t.length-1),r>-1?e.slice(0,r):e}_hasSameServerInstance(e,t){return e.endsWith(\"/\")&&(e=e.slice(0,-1)),e=e.toLowerCase(),t=this._getServerInstanceRoot(t).toLowerCase(),e=P(e),t=P(t),(e=e.slice(Math.max(0,e.indexOf(\":\"))))===(t=t.slice(Math.max(0,t.indexOf(\":\"))))}_sanitizeUrl(e){const r=(t.request.proxyUrl||\"\").toLowerCase(),s=r?e.toLowerCase().indexOf(r+\"?\"):-1;return-1!==s&&(e=e.slice(s+r.length+1)),e=v(e),u(e).path}_isRESTService(e){return e.includes(this._agsRest)}_isAdminResource(e){return this._agsAdmin.test(e)||this._adminSvcs.test(e)}_isServerRsrc(e){return this._isRESTService(e)||this._isAdminResource(e)}_isIdenticalService(e,t){let r=!1;if(this._isRESTService(e)&&this._isRESTService(t)){const s=this._getSuffix(e).toLowerCase(),i=this._getSuffix(t).toLowerCase();if(r=s===i,!r){const e=/(.*)\\/(MapServer|FeatureServer|UtilityNetworkServer).*/gi;r=s.replaceAll(e,\"$1\")===i.replaceAll(e,\"$1\")}}else this._isAdminResource(e)&&this._isAdminResource(t)?r=!0:this._isServerRsrc(e)||this._isServerRsrc(t)||!this._isPortalDomain(e)||(r=!0);return r}_isPortalDomain(e){const r=new _(e.toLowerCase()),s=this._portalConfig;let i=this._gwDomains.some((e=>e.regex.test(r.uri)));return!i&&s&&(i=this._hasSameServerInstance(this._getServerInstanceRoot(s.restBaseUrl),r.uri)),i||t.portalUrl&&(i=p(r,t.portalUrl,!0)),i||(i=this._portals.some((e=>this._hasSameServerInstance(e,r.uri)))),i=i||this._agsPortal.test(r.path),i}_isIdProvider(e,t){let r=-1,s=-1;this._gwDomains.forEach(((i,o)=>{-1===r&&i.regex.test(e)&&(r=o),-1===s&&i.regex.test(t)&&(s=o)}));let i=!1;if(r>-1&&s>-1&&(0===r||4===r?0!==s&&4!==s||(i=!0):1===r?1!==s&&2!==s||(i=!0):2===r?2===s&&(i=!0):3===r&&3===s&&(i=!0)),!i){const r=this.findServerInfo(t),s=r?.owningSystemUrl;s&&C(r)&&this._isPortalDomain(s)&&this._isIdProvider(e,s)&&(i=!0)}return i}_getIdenticalSvcIdx(e,t){let r=-1;for(let s=0;s<t.resources.length;s++){const i=t.resources[s];if(this._isIdenticalService(e,i)){r=s;break}}return r}_getSuffix(e){return e.replace(this._regexSDirUrl,\"\").replace(this._regexServerType,\"$1\")}_getTokenSvcUrl(e){let t,r,i;if(this._isRESTService(e)||this._isAdminResource(e)){const i=this._getServerInstanceRoot(e);return t=i+\"/admin/generateToken\",r=s(e=i+\"/rest/info\",{query:{f:\"json\"}}).then((e=>e.data)),{adminUrl:t,promise:r}}if(this._isPortalDomain(e)){let t=\"\";if(this._gwDomains.some((r=>(r.regex.test(e)&&(t=r.tokenServiceUrl),!!t))),t||this._portals.some((r=>(this._hasSameServerInstance(r,e)&&(t=r+this._gwTokenUrl),!!t))),t||(i=e.toLowerCase().indexOf(\"/sharing\"),-1!==i&&(t=e.slice(0,i)+this._gwTokenUrl)),t||(t=this._getOrigin(e)+this._gwTokenUrl),t){const r=new _(e).port;/^http:\\/\\//i.test(e)&&\"7080\"===r&&(t=t.replace(/:7080/i,\":7443\")),t=t.replace(/http:/i,\"https:\")}return t}}_processOAuthResponseParams(e,t,r){const s=t._oAuthCred;if(e.code){const i=s.codeVerifier;return s.codeVerifier=null,s.stateUID=null,s.save(),this._getOAuthToken(r.server,e.code,t.appId,this._getRedirectURI(t,!0),i).then((i=>{const o=new E({userId:i.username,server:r.server??void 0,token:i.access_token,expires:Date.now()+1e3*i.expires_in,ssl:i.ssl,oAuthState:e.state,_oAuthCred:s});return t.userId=o.userId,s.storage=i.persist?b:q,s.refreshToken=i.refresh_token,s.token=null,s.expires=i.refresh_token_expires_in?Date.now()+1e3*i.refresh_token_expires_in:null,s.userId=o.userId,s.ssl=o.ssl,s.save(),o}))}const i=new E({userId:e.username,server:r.server??void 0,token:e.access_token,expires:Date.now()+1e3*Number(e.expires_in),ssl:\"true\"===e.ssl,oAuthState:e.state,_oAuthCred:s});return t.userId=i.userId,s.storage=e.persist?b:q,s.refreshToken=null,s.token=i.token,s.expires=i.expires,s.userId=i.userId,s.ssl=i.ssl,s.save(),Promise.resolve(i)}_processOAuthPopupParams(e){const t=this._oAuthDfd;if(this._oAuthDfd=null,t)if(clearInterval(this._oAuthIntervalId),this._oAuthOnPopupHandle?.remove(),e.error){const r=\"access_denied\"===e.error,s=new i(r?\"identity-manager:user-aborted\":\"identity-manager:authentication-failed\",r?\"ABORTED\":\"OAuth: \"+e.error+\" - \"+e.error_description);t.reject(s)}else this._processOAuthResponseParams(e,t.oinfo_,t.sinfo_).then((e=>{t.resolve(e)})).catch((e=>{t.reject(e)}))}_setOAuthResponseQueryString(e){e&&(\"?\"===e.charAt(0)&&(e=e.slice(1)),this._processOAuthPopupParams(f(e)))}async _exchangeToken(e,t,r){return(await s(`${e}/sharing/rest/oauth2/exchangeToken`,{authMode:\"anonymous\",method:\"post\",query:{f:\"json\",client_id:t,token:r}})).data.token}async _getPlatformSelf(e,t){if(this._getPlatformSelfError&&Date.now()-this._getPlatformSelfError[1]<1e3)throw this._getPlatformSelfError[0];e=e.replace(/^http:/i,\"https:\");try{const r=await s(`${e}/sharing/rest/oauth2/platformSelf`,{authMode:\"anonymous\",headers:{\"X-Esri-Auth-Client-Id\":t,\"X-Esri-Auth-Redirect-Uri\":window.location.href.replace(/#.*$/,\"\")},method:\"post\",query:{f:\"json\",expiration:30},withCredentials:!0});return this._getPlatformSelfError=null,r.data}catch(r){throw\"OAUTH_0066\"===r.details?.messageCode&&(this._getPlatformSelfError=[r,Date.now()]),r}}_getPortalSelf(e,t){let r;if(this._gwDomains.some((t=>(t.regex.test(e)&&(r=t.customBaseUrl),!!r))),r)return Promise.resolve({allSSL:!0,currentVersion:\"8.4\",customBaseUrl:r,portalMode:\"multitenant\",supportsOAuth:!0});this._appOrigin.startsWith(\"https:\")?e=e.replace(/^http:/i,\"https:\").replace(/:7080/i,\":7443\"):/^http:/i.test(t)&&(e=e.replace(/^https:/i,\"http:\").replace(/:7443/i,\":7080\"));return s(e,{query:{f:\"json\"},authMode:\"anonymous\",withCredentials:!0}).then((e=>e.data))}_doPortalSignIn(e){const t=this._portalConfig,r=window.location.href,s=this.findServerInfo(e);return!(!t&&!this._isPortalDomain(r)||!(s?s.hasPortal||s.owningSystemUrl&&this._isPortalDomain(s.owningSystemUrl):this._isPortalDomain(e))||!(this._isIdProvider(r,e)||t&&(this._hasSameServerInstance(this._getServerInstanceRoot(t.restBaseUrl),e)||this._isIdProvider(t.restBaseUrl,e))||p(r,e,!0)))}_checkProtocol(e,t,r,s){let o=!0;const n=s?t.adminTokenServiceUrl:t.tokenServiceUrl;if(n.trim().toLowerCase().startsWith(\"https:\")&&!this._appOrigin.startsWith(\"https:\")&&S(n)&&(o=!!this._protocolFunc&&!!this._protocolFunc({resourceUrl:e,serverInfo:t}),!o)){r(new i(\"identity-manager:aborted\",\"Aborted the Sign-In process to avoid sending password over insecure connection.\"))}return o}_enqueue(e,t,r,s,i,o){return s||(s=l()),s.resUrl_=e,s.sinfo_=t,s.options_=r,s.admin_=i,s.refresh_=o,this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(e),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(s)):this._xoReqs.push(s):this._doSignIn(s),s.promise}_doSignIn(e){this._busy=e,this._rejectOnPersistedPageShow=!1;const t=t=>{const r=e.options_?.resource,s=e.resUrl_,i=e.refresh_;let o=!1;this.credentials.includes(t)||(i&&this.credentials.includes(i)?(i.userId=t.userId,i.token=t.token,i.expires=t.expires,i.validity=t.validity,i.ssl=t.ssl,i.creationTime=t.creationTime,o=!0,t=i):this.credentials.push(t)),t.resources||(t.resources=[]),t.resources.includes(r||s)||t.resources.push(r||s),t.scope=this._isServerRsrc(s)?\"server\":\"portal\",t.emitTokenChange();const n=this._soReqs,a={};this._soReqs=[],n.forEach((e=>{if(!this._isIdenticalService(s,e.resUrl_)){const r=this._getSuffix(e.resUrl_);a[r]||(a[r]=!0,t.resources.push(e.resUrl_))}})),e.resolve(t),n.forEach((e=>{this._hasSameServerInstance(this._getServerInstanceRoot(s),e.resUrl_)?e.resolve(t):this._soReqs.push(e)})),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,o||this.emit(\"credential-create\",{credential:t}),this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},r=t=>{e.reject(t),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},s=(o,a,h,l)=>{const d=e.sinfo_,u=!e.options_||!1!==e.options_.prompt,_=d.hasPortal&&this._findOAuthInfo(e.resUrl_);let f,g;if(o)t(new E({userId:o,server:d.server??void 0,token:h??void 0,expires:null!=l?Number(l):null,ssl:!!a}));else if(window!==window.parent&&this._appUrlObj.query?.[\"arcgis-auth-origin\"]&&this._appUrlObj.query?.[\"arcgis-auth-portal\"]&&this._hasSameServerInstance(this._getServerInstanceRoot(this._appUrlObj.query[\"arcgis-auth-portal\"]),e.resUrl_)){window.parent.postMessage({type:\"arcgis:auth:requestCredential\"},this._appUrlObj.query[\"arcgis-auth-origin\"]);const s=n(window,\"message\",(e=>{e.source===window.parent&&e.data&&(\"arcgis:auth:credential\"===e.data.type?(s.remove(),e.data.credential.expires<Date.now()?r(new i(\"identity-manager:credential-request-failed\",\"Parent application's token has expired.\")):t(new E(e.data.credential))):\"arcgis:auth:error\"===e.data.type&&(s.remove(),\"tokenExpiredError\"===e.data.error.name?r(new i(\"identity-manager:credential-request-failed\",\"Parent application's token has expired.\")):r(i.fromJSON(e.data.error))))}));c(e.options_?.signal,(()=>{s.remove()}))}else if(_){let o=_._oAuthCred;if(!o){const e=new U(_,b),t=new U(_,q);e.isValid()&&t.isValid()?e.expires>t.expires?(o=e,t.destroy()):(o=t,e.destroy()):o=e.isValid()?e:t,_._oAuthCred=o}if(o.isValid()){f=new E({userId:o.userId??void 0,server:d.server??void 0,token:o.token??void 0,expires:o.expires,ssl:o.ssl??void 0,_oAuthCred:o});const i=_.appId!==o.appId&&this._doPortalSignIn(e.resUrl_);i||o.refreshToken?(e._pendingDfd=o.refreshToken?this._getOAuthToken(d.server,o.refreshToken,o.appId).then((e=>(f.expires=Date.now()+1e3*e.expires_in,f.token=e.access_token,f))):Promise.resolve(f),e._pendingDfd.then((e=>i?this._exchangeToken(e.server,_.appId,e.token).then((t=>(e.token=t,e))).catch((()=>e)):e)).then((e=>{t(e)})).catch((e=>{const t=e.details?.httpStatus;t>0&&404!==t?(o.destroy(),s()):r(e)}))):t(f)}else if(this._oAuthLocationParams&&this._hasSameServerInstance(_.portalUrl,this._oAuthLocationParams.state.portalUrl)&&(this._oAuthLocationParams.access_token||this._oAuthLocationParams.code&&this._oAuthLocationParams.state.uid===o.stateUID&&o.codeVerifier)){const s=this._oAuthLocationParams;this._oAuthLocationParams=null,e._pendingDfd=this._processOAuthResponseParams(s,_,d).then((e=>{t(e)})).catch(r)}else{const s=()=>{u?e._pendingDfd=this.oAuthSignIn(e.resUrl_,d,_,e.options_).then(t,r):(g=new i(\"identity-manager:not-authenticated\",\"User is not signed in.\"),r(g))};this._doPortalSignIn(e.resUrl_)?e._pendingDfd=this._getPlatformSelf(d.server,_.appId).then((e=>{p(e.portalUrl,this._appOrigin,!0)?(f=new E({userId:e.username,server:d.server??void 0,expires:Date.now()+1e3*e.expires_in,token:e.token}),t(f)):s()})).catch(s):s()}}else if(u){if(this._checkProtocol(e.resUrl_,d,r,e.admin_)){let s=e.options_;e.admin_&&(s=s||{},s.isAdmin=!0),e._pendingDfd=this.signIn(e.resUrl_,d,s).then(t,r)}}else g=new i(\"identity-manager:not-authenticated\",\"User is not signed in.\"),r(g)},o=()=>{const s=e.sinfo_,i=s.owningSystemUrl,o=e.options_;let n,a,h,l;if(o&&(n=o.token,a=o.error,h=o.prompt),l=this._findCredential(i,{token:n,resource:e.resUrl_}),!l)for(const e of this.credentials)if(this._isIdProvider(i,e.server)){l=e;break}if(l){const i=this.findCredential(e.resUrl_,l.userId);if(i)t(i);else if(D(s,this._legacyFed)){const e=l.toJSON();e.server=s.server,e.resources=null,t(new E(e))}else{(e._pendingDfd=this.generateToken(this.findServerInfo(l.server),null,{serverUrl:e.resUrl_,token:l.token,signal:e.options_.signal,ssl:l.ssl})).then((r=>{t(new E({userId:l?.userId,server:s.server??void 0,token:r.token,expires:null!=r.expires?Number(r.expires):null,ssl:!!r.ssl,isAdmin:e.admin_,validity:r.validity}))}),r)}}else{this._busy=null,n&&(e.options_.token=null);(e._pendingDfd=this.getCredential(i.replace(/\\/?$/,\"/sharing\"),{resource:e.resUrl_,owningTenant:s.owningTenant,signal:e.options_.signal,token:n,error:a,prompt:h})).then((()=>{this._enqueue(e.resUrl_,e.sinfo_,e.options_,e,e.admin_)}),(t=>{e.resUrl_=e.sinfo_=e.refresh_=null,e.reject(t)}))}};this._errbackFunc=r;const a=e.sinfo_.owningSystemUrl,l=this._isServerRsrc(e.resUrl_),d=e.sinfo_._restInfoPms;d?d.promise.then((t=>{const r=e.sinfo_;if(r._restInfoPms){r.adminTokenServiceUrl=r._restInfoPms.adminUrl,r._restInfoPms=null,r.tokenServiceUrl=(h(\"authInfo.tokenServicesUrl\",t)||h(\"authInfo.tokenServiceUrl\",t)||h(\"tokenServiceUrl\",t))??null,r.shortLivedTokenValidity=h(\"authInfo.shortLivedTokenValidity\",t)??null,r.currentVersion=t.currentVersion,r.owningTenant=t.owningTenant;const e=r.owningSystemUrl=t.owningSystemUrl;e&&this._portals.push(e)}l&&r.owningSystemUrl?o():s()}),(()=>{e.sinfo_._restInfoPms=null;const t=new i(\"identity-manager:server-identification-failed\",\"Unknown resource - could not find token service endpoint.\");r(t)})):l&&a?o():e.sinfo_._selfReq?e.sinfo_._selfReq.selfDfd.then((t=>{const r={};let s,i,o,n;return t&&(s=t.user?.username,r.username=s,r.allSSL=t.allSSL,i=t.supportsOAuth,n=parseFloat(t.currentVersion),\"multitenant\"===t.portalMode&&(o=t.customBaseUrl),e.sinfo_.currentVersion=n),e.sinfo_.webTierAuth=!!s,s&&this.normalizeWebTierAuth?this.generateToken(e.sinfo_,null,{ssl:r.allSSL}).catch((()=>null)).then((e=>(r.portalToken=e?.token,r.tokenExpiration=e?.expires,r))):!s&&i&&n>=4.4&&!this._findOAuthInfo(e.resUrl_)?this._generateOAuthInfo({portalUrl:e.sinfo_.server,customBaseUrl:o,owningTenant:e.sinfo_._selfReq.owningTenant}).catch((()=>null)).then((()=>r)):r})).catch((()=>null)).then((t=>{e.sinfo_._selfReq=null,t?s(t.username,t.allSSL,t.portalToken,t.tokenExpiration):s()})):s()}_generateOAuthInfo(e){let t,r=null,i=e.portalUrl;const o=e.customBaseUrl,n=e.owningTenant,a=!this._defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal;if(a){r=window.location.href;let e=r.indexOf(\"?\");e>-1&&(r=r.slice(0,e)),e=r.search(/\\/(apps|home)\\//),r=e>-1?r.slice(0,e):null}return a&&r?(this._hasTestedIfAppIsOnPortal=!0,t=s(r+\"/sharing/rest\",{query:{f:\"json\"}}).then((()=>{this._defaultOAuthInfo=new T({appId:\"arcgisonline\",popupCallbackUrl:r+\"/home/oauth-callback.html\"})}))):t=Promise.resolve(),t.then((()=>{if(this._defaultOAuthInfo)return i=i.replace(/^http:/i,\"https:\"),s(i+\"/sharing/rest/oauth2/validateRedirectUri\",{query:{accountId:n,client_id:this._defaultOAuthInfo.appId,redirect_uri:w(this._defaultOAuthInfo.popupCallbackUrl),f:\"json\"}}).then((e=>{if(e.data.valid){const t=this._defaultOAuthInfo.clone();e.data.urlKey&&o?t.portalUrl=\"https://\"+e.data.urlKey.toLowerCase()+\".\"+o:t.portalUrl=i,t.popup=window!==window.top||!(p(i,this._appOrigin)||this._gwDomains.some((e=>e.regex.test(i)&&e.regex.test(this._appOrigin)))),this.oAuthInfos.push(t)}}))}))}_doOAuthSignIn(e,t,r,s){const o=r._oAuthCred,a={portalUrl:r.portalUrl};!r.popup&&r.preserveUrlHash&&window.location.hash&&(a.hash=window.location.hash),o.stateUID&&(a.uid=o.stateUID);const h={client_id:r.appId,response_type:o.codeVerifier?\"code\":\"token\",state:JSON.stringify(a),expiration:r.expiration,locale:r.locale,redirect_uri:this._getRedirectURI(r,!!o.codeVerifier)};r.forceLogin&&(h.force_login=!0),r.forceUserId&&r.userId&&(h.prepopulatedusername=r.userId),!r.popup&&this._doPortalSignIn(e)&&(h.redirectToUserOrgUrl=!0),o.codeVerifier&&(h.code_challenge=s||o.codeVerifier,h.code_challenge_method=s?\"S256\":\"plain\");const l=r.portalUrl.replace(/^http:/i,\"https:\")+\"/sharing/oauth2/authorize\",c=l+\"?\"+m(h);if(r.popup){const e=window.open(c,\"esriJSAPIOAuth\",r.popupWindowFeatures);if(e)e.focus(),this._oAuthDfd.oAuthWin_=e,this._oAuthIntervalId=setInterval((()=>{if(e.closed){clearInterval(this._oAuthIntervalId),this._oAuthOnPopupHandle.remove();const e=this._oAuthDfd;if(e){const t=new i(\"identity-manager:user-aborted\",\"ABORTED\");e.reject(t)}}}),500),this._oAuthOnPopupHandle=n(window,[\"arcgis:auth:hash\",\"arcgis:auth:location:search\"],(e=>{\"arcgis:auth:hash\"===e.type?this.setOAuthResponseHash(e.detail):this._setOAuthResponseQueryString(e.detail)}));else{const e=new i(\"identity-manager:popup-blocked\",\"ABORTED\");this._oAuthDfd.reject(e)}}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:h,authorizeUrl:l,resourceUrl:e,serverInfo:t,oAuthInfo:r}):window.location.href=c}_getRedirectURI(e,t){const r=window.location.href.replace(/#.*$/,\"\");if(e.popup)return w(e.popupCallbackUrl);if(t){const e=u(r);return e.query&&[\"code\",\"error\",\"error_description\",\"message_code\",\"persist\",\"state\"].forEach((t=>{delete e.query[t]})),I(e.path,e.query)}return r}}j.prototype.declaredClass=\"esri.identity.IdentityManagerBase\";let E=class extends o.EventedAccessor{constructor(e){super(e),this._oAuthCred=null,this.tokenRefreshBuffer=2,e?._oAuthCred&&(this._oAuthCred=e._oAuthCred)}initialize(){this.resources=this.resources||[],null==this.creationTime&&(this.creationTime=Date.now())}refreshToken(){const e=r,t=e.findServerInfo(this.server),s=t?.owningSystemUrl,i=!!s&&\"server\"===this.scope,o=i&&D(t,e._legacyFed),n=t.webTierAuth,a=n&&e.normalizeWebTierAuth,h=R[this.server],l=h?.[this.userId];let c,d=this.resources&&this.resources[0],u=i?e.findServerInfo(s):null,p={username:this.userId,password:l};if(n&&!a)return;i&&!u&&e.serverInfos.some((t=>(e._isIdProvider(s,t.server)&&(u=t),!!u)));const _=u?e.findCredential(u.server,this.userId):null;if(!i||_){if(!o){if(i)c={serverUrl:d,token:_?.token,ssl:_?.ssl};else if(a)p=null,c={ssl:this.ssl};else{if(!l){let r;return d&&(d=e._sanitizeUrl(d),this._enqueued=1,r=e._enqueue(d,t,null,null,this.isAdmin,this),r.then((()=>{this._enqueued=0,this.refreshServerTokens()})).catch((()=>{this._enqueued=0}))),r}this.isAdmin&&(c={isAdmin:!0})}return e.generateToken(i?u:t,i?null:p,c).then((e=>{this.token=e.token,this.expires=null!=e.expires?Number(e.expires):null,this.creationTime=Date.now(),this.validity=e.validity,this.emitTokenChange(),this.refreshServerTokens()})).catch((()=>{}))}_?.refreshToken()}}refreshServerTokens(){if(\"portal\"===this.scope){const e=r;e.credentials.forEach((t=>{const r=e.findServerInfo(t.server),s=r?.owningSystemUrl;t!==this&&t.userId===this.userId&&s&&\"server\"===t.scope&&(e._hasSameServerInstance(this.server,s)||e._isIdProvider(s,this.server))&&(D(r,e._legacyFed)?(t.token=this.token,t.expires=this.expires,t.creationTime=this.creationTime,t.validity=this.validity,t.emitTokenChange()):t.refreshToken())}))}}emitTokenChange(e){clearTimeout(this._refreshTimer);const t=r,s=this.server?t.findServerInfo(this.server):null,i=s?.owningSystemUrl,o=i?t.findServerInfo(i):null;!1===e||i&&\"portal\"!==this.scope&&(!o?.webTierAuth||t.normalizeWebTierAuth)||null==this.expires&&null==this.validity||this._startRefreshTimer(),this.emit(\"token-change\")}destroy(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null,this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);const e=r,t=e.credentials.indexOf(this);t>-1&&e.credentials.splice(t,1),this.emitTokenChange(),this.emit(\"destroy\")}toJSON(){const e=a({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),t=this.resources;return t&&t.length>0&&(e.resources=t.slice()),e}_startRefreshTimer(){clearTimeout(this._refreshTimer);const e=6e4*this.tokenRefreshBuffer,t=2**31-1;let r=(this.validity?this.creationTime+6e4*this.validity:this.expires)-Date.now();r<0?r=0:r>t&&(r=t),this._refreshTimer=setTimeout(this.refreshToken.bind(this),r>e?r-e:r)}};e([A()],E.prototype,\"creationTime\",void 0),e([A()],E.prototype,\"expires\",void 0),e([A()],E.prototype,\"isAdmin\",void 0),e([A()],E.prototype,\"oAuthState\",void 0),e([A()],E.prototype,\"resources\",void 0),e([A()],E.prototype,\"scope\",void 0),e([A()],E.prototype,\"server\",void 0),e([A()],E.prototype,\"ssl\",void 0),e([A()],E.prototype,\"token\",void 0),e([A()],E.prototype,\"tokenRefreshBuffer\",void 0),e([A()],E.prototype,\"userId\",void 0),e([A()],E.prototype,\"validity\",void 0),E=e([k(\"esri.identity.Credential\")],E);export{E as Credential,j as IdentityManagerBase};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}