{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { a as e, l as t, b as r } from \"../chunks/vec32.js\";\nimport { create as n } from \"../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { create as l, fromPoints as o } from \"../geometry/support/ray.js\";\nimport { StoreResults as i } from \"../views/3d/webgl-engine/lib/IntersectorInterfaces.js\";\nimport { toGraphic as u, hasLod as s, getIntersectedFeatureBSRadius as a } from \"../views/3d/webgl-engine/lib/intersectorUtilsConversions.js\";\nfunction c(e, t) {\n  return d(e) === d(t);\n}\nfunction d(e) {\n  if (null == e) return null;\n  const t = null != e.layer ? e.layer.id : \"\";\n  let r = null;\n  return r = null != e.objectId ? e.objectId : null != e.layer && \"objectIdField\" in e.layer && null != e.layer.objectIdField && null != e.attributes ? e.attributes[e.layer.objectIdField] : e.uid, null == r ? null : `o-${t}-${r}`;\n}\nconst b = {\n  json: {\n    write: {\n      writer: f,\n      target: {\n        \"feature.layerId\": {\n          type: [Number, String],\n          isRequired: !0\n        },\n        \"feature.objectId\": {\n          type: [Number, String],\n          isRequired: !0\n        }\n      }\n    },\n    origins: {\n      \"web-scene\": {\n        read: I\n      }\n    }\n  }\n};\nfunction f(e, t) {\n  null != e?.layer?.objectIdField && null != e.attributes && (t.feature = {\n    layerId: e.layer.id,\n    objectId: e.attributes[e.layer.objectIdField]\n  });\n}\nfunction I(e) {\n  if (null != e.layerId && null != e.objectId) return {\n    uid: null,\n    layer: {\n      id: e.layerId,\n      objectIdField: \"ObjectId\"\n    },\n    attributes: {\n      ObjectId: e.objectId\n    }\n  };\n}\nfunction m(l, s, a, c) {\n  const {\n      sceneIntersectionHelper: b\n    } = l,\n    {\n      observer: f,\n      observerFeatureId: I,\n      targetFeatureId: m,\n      target: g\n    } = a;\n  if (null == I && null == m) return;\n  c || (c = e => e), e(p, f, g);\n  const v = t(p),\n    S = 1;\n  r(p, f, p, S / v);\n  const F = o(p, g, y);\n  s.options.store = i.ALL, b.intersectToolIntersectorRay(F, s);\n  let N = null,\n    w = null,\n    R = null,\n    A = null;\n  for (const e of s.results.all) {\n    const t = u(e, l);\n    if (null == t || null == e.distanceInRenderSpace) continue;\n    const r = d(t);\n    null != r && (null != I && r === I && (N ??= c(j(e, l, v)), e.distanceInRenderSpace - S < N && (R = e)), null != m && r === m && (w ??= c(j(e, l, v)), null == A && e.distanceInRenderSpace - S < v && v - e.distanceInRenderSpace + S < w && (A = e)));\n  }\n  const {\n    observerAdjusted: T,\n    targetAdjusted: h\n  } = a;\n  R?.getIntersectionPoint(T) ? a.observerSurfaceNormal = R.getTransformedNormal(n()) : a.observerSurfaceNormal = null, A?.getIntersectionPoint(h) ? a.targetSurfaceNormal = A.getTransformedNormal(n()) : a.targetSurfaceNormal = null;\n}\nfunction j(e, t, r) {\n  if (s(e)) {\n    const n = a(e, t);\n    if (null != n) return Math.min(n * g, r);\n  }\n  return 1e-5 * r;\n}\nconst g = .05,\n  y = l(),\n  p = n();\nexport { c as featureReferenceEquals, b as featureReferenceProperty, d as getFeatureId, m as updatePointsFromFeatureReference };","map":{"version":3,"names":["a","e","l","t","b","r","create","n","fromPoints","o","StoreResults","i","toGraphic","u","hasLod","s","getIntersectedFeatureBSRadius","c","d","layer","id","objectId","objectIdField","attributes","uid","json","write","writer","f","target","type","Number","String","isRequired","origins","read","I","feature","layerId","ObjectId","m","sceneIntersectionHelper","observer","observerFeatureId","targetFeatureId","g","p","v","S","F","y","options","store","ALL","intersectToolIntersectorRay","N","w","R","A","results","all","distanceInRenderSpace","j","observerAdjusted","T","targetAdjusted","h","getIntersectionPoint","observerSurfaceNormal","getTransformedNormal","targetSurfaceNormal","Math","min","featureReferenceEquals","featureReferenceProperty","getFeatureId","updatePointsFromFeatureReference"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/analysis/featureReferenceUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{a as e,l as t,b as r}from\"../chunks/vec32.js\";import{create as n}from\"../core/libs/gl-matrix-2/factories/vec3f64.js\";import{create as l,fromPoints as o}from\"../geometry/support/ray.js\";import{StoreResults as i}from\"../views/3d/webgl-engine/lib/IntersectorInterfaces.js\";import{toGraphic as u,hasLod as s,getIntersectedFeatureBSRadius as a}from\"../views/3d/webgl-engine/lib/intersectorUtilsConversions.js\";function c(e,t){return d(e)===d(t)}function d(e){if(null==e)return null;const t=null!=e.layer?e.layer.id:\"\";let r=null;return r=null!=e.objectId?e.objectId:null!=e.layer&&\"objectIdField\"in e.layer&&null!=e.layer.objectIdField&&null!=e.attributes?e.attributes[e.layer.objectIdField]:e.uid,null==r?null:`o-${t}-${r}`}const b={json:{write:{writer:f,target:{\"feature.layerId\":{type:[Number,String],isRequired:!0},\"feature.objectId\":{type:[Number,String],isRequired:!0}}},origins:{\"web-scene\":{read:I}}}};function f(e,t){null!=e?.layer?.objectIdField&&null!=e.attributes&&(t.feature={layerId:e.layer.id,objectId:e.attributes[e.layer.objectIdField]})}function I(e){if(null!=e.layerId&&null!=e.objectId)return{uid:null,layer:{id:e.layerId,objectIdField:\"ObjectId\"},attributes:{ObjectId:e.objectId}}}function m(l,s,a,c){const{sceneIntersectionHelper:b}=l,{observer:f,observerFeatureId:I,targetFeatureId:m,target:g}=a;if(null==I&&null==m)return;c||(c=e=>e),e(p,f,g);const v=t(p),S=1;r(p,f,p,S/v);const F=o(p,g,y);s.options.store=i.ALL,b.intersectToolIntersectorRay(F,s);let N=null,w=null,R=null,A=null;for(const e of s.results.all){const t=u(e,l);if(null==t||null==e.distanceInRenderSpace)continue;const r=d(t);null!=r&&(null!=I&&r===I&&(N??=c(j(e,l,v)),e.distanceInRenderSpace-S<N&&(R=e)),null!=m&&r===m&&(w??=c(j(e,l,v)),null==A&&e.distanceInRenderSpace-S<v&&v-e.distanceInRenderSpace+S<w&&(A=e)))}const{observerAdjusted:T,targetAdjusted:h}=a;R?.getIntersectionPoint(T)?a.observerSurfaceNormal=R.getTransformedNormal(n()):a.observerSurfaceNormal=null,A?.getIntersectionPoint(h)?a.targetSurfaceNormal=A.getTransformedNormal(n()):a.targetSurfaceNormal=null}function j(e,t,r){if(s(e)){const n=a(e,t);if(null!=n)return Math.min(n*g,r)}return 1e-5*r}const g=.05,y=l(),p=n();export{c as featureReferenceEquals,b as featureReferenceProperty,d as getFeatureId,m as updatePointsFromFeatureReference};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}