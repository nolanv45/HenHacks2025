{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport r from \"../../core/Collection.js\";\nimport { handlesGroup as t, makeHandle as s } from \"../../core/handleUtils.js\";\nimport i from \"../../core/Logger.js\";\nimport { debounce as a, ignoreAbortErrors as o } from \"../../core/promiseUtils.js\";\nimport { sqlAnd as n } from \"../../core/sql.js\";\nimport { property as d } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/has.js\";\nimport \"../../core/RandomLCG.js\";\nimport { subclass as p } from \"../../core/accessorSupport/decorators/subclass.js\";\nconst l = Symbol(),\n  u = u => {\n    let y = class extends u {\n      constructor() {\n        super(...arguments), this.layerViews = new r(), this._debouncedUpdate = a(async () => {\n          const {\n              layer: e,\n              parent: r\n            } = this,\n            t = r?.footprintLayerView;\n          let s = [];\n          const i = this._createQuery();\n          if (i && t) {\n            const {\n              features: r\n            } = await t.queryFeatures(i);\n            this.suspended || (s = r.map(r => e.acquireLayer(r)));\n          }\n          this.removeHandles(l), this.addHandles(s, l);\n        });\n      }\n      get creatingLayerViews() {\n        return this.view?.layerViewManager.isCreatingLayerViewsForLayer(this.layer) ?? !1;\n      }\n      isUpdating() {\n        return this.creatingLayerViews || this.layer.updating || this.layerViews.some(e => e.updating);\n      }\n      enableLayerUpdates() {\n        return t([this._updatingHandles.addWhen(() => !1 === this.parent?.footprintLayerView?.dataUpdating, () => this.updateLayers()), this._updatingHandles.add(() => [this.layer.maximumVisibleSublayers, this.layer.parent?.orderBy, this.parent?.footprintLayerView?.filter, this.parent?.footprintLayerView?.timeExtent, this.suspended], () => this.updateLayers()), s(() => this.removeHandles(l))]);\n      }\n      updateLayers() {\n        this.suspended ? this.removeHandles(l) : this._updatingHandles.addPromise(o(this._debouncedUpdate()).catch(e => {\n          i.getLogger(this).error(e);\n        }));\n      }\n      _createQuery() {\n        const e = this.parent?.footprintLayerView,\n          r = this.layer?.parent;\n        if (!e || !r || r.destroyed) return null;\n        const {\n          layer: {\n            maximumVisibleSublayers: t\n          },\n          view: {\n            scale: s\n          }\n        } = this;\n        if (!t) return null;\n        const {\n            itemTypeField: i,\n            itemSourceField: a,\n            itemNameField: o,\n            minScaleField: d,\n            maxScaleField: p,\n            objectIdField: l,\n            orderBy: u\n          } = r,\n          y = n(`${d} IS NULL OR ${s} <= ${d} OR ${d} = 0`, `${p} IS NULL OR ${s} >= ${p}`),\n          c = u?.find(e => e.field && !e.valueExpression),\n          m = e.createQuery();\n        if (m.returnGeometry = !1, m.num = t, m.outFields = [l, a, o], m.where = n(m.where, y), null != this.unsupportedItemTypes) {\n          const e = `${i} NOT IN (${this.unsupportedItemTypes.map(e => `'${e}'`)})`;\n          m.where = n(m.where, e);\n        }\n        return c?.field && (m.orderByFields = [`${c.field} ${\"descending\" === c.order ? \"DESC\" : \"ASC\"}`], m.outFields.push(c.field)), m;\n      }\n    };\n    return e([d({\n      readOnly: !0\n    })], y.prototype, \"creatingLayerViews\", null), e([d()], y.prototype, \"layer\", void 0), e([d()], y.prototype, \"layerViews\", void 0), e([d({\n      readOnly: !0\n    })], y.prototype, \"unsupportedItemTypes\", void 0), e([d()], y.prototype, \"parent\", void 0), e([d({\n      readOnly: !0\n    })], y.prototype, \"isUpdating\", null), y = e([p(\"esri.views.layers.CatalogDynamicGroupLayerView\")], y), y;\n  };\nexport { u as default };","map":{"version":3,"names":["_","e","r","handlesGroup","t","makeHandle","s","i","debounce","a","ignoreAbortErrors","o","sqlAnd","n","property","d","subclass","p","l","Symbol","u","y","constructor","arguments","layerViews","_debouncedUpdate","layer","parent","footprintLayerView","_createQuery","features","queryFeatures","suspended","map","acquireLayer","removeHandles","addHandles","creatingLayerViews","view","layerViewManager","isCreatingLayerViewsForLayer","isUpdating","updating","some","enableLayerUpdates","_updatingHandles","addWhen","dataUpdating","updateLayers","add","maximumVisibleSublayers","orderBy","filter","timeExtent","addPromise","catch","getLogger","error","destroyed","scale","itemTypeField","itemSourceField","itemNameField","minScaleField","maxScaleField","objectIdField","c","find","field","valueExpression","m","createQuery","returnGeometry","num","outFields","where","unsupportedItemTypes","orderByFields","order","push","readOnly","prototype","default"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/layers/CatalogDynamicGroupLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Collection.js\";import{handlesGroup as t,makeHandle as s}from\"../../core/handleUtils.js\";import i from\"../../core/Logger.js\";import{debounce as a,ignoreAbortErrors as o}from\"../../core/promiseUtils.js\";import{sqlAnd as n}from\"../../core/sql.js\";import{property as d}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/RandomLCG.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";const l=Symbol(),u=u=>{let y=class extends u{constructor(){super(...arguments),this.layerViews=new r,this._debouncedUpdate=a((async()=>{const{layer:e,parent:r}=this,t=r?.footprintLayerView;let s=[];const i=this._createQuery();if(i&&t){const{features:r}=await t.queryFeatures(i);this.suspended||(s=r.map((r=>e.acquireLayer(r))))}this.removeHandles(l),this.addHandles(s,l)}))}get creatingLayerViews(){return this.view?.layerViewManager.isCreatingLayerViewsForLayer(this.layer)??!1}isUpdating(){return this.creatingLayerViews||this.layer.updating||this.layerViews.some((e=>e.updating))}enableLayerUpdates(){return t([this._updatingHandles.addWhen((()=>!1===this.parent?.footprintLayerView?.dataUpdating),(()=>this.updateLayers())),this._updatingHandles.add((()=>[this.layer.maximumVisibleSublayers,this.layer.parent?.orderBy,this.parent?.footprintLayerView?.filter,this.parent?.footprintLayerView?.timeExtent,this.suspended]),(()=>this.updateLayers())),s((()=>this.removeHandles(l)))])}updateLayers(){this.suspended?this.removeHandles(l):this._updatingHandles.addPromise(o(this._debouncedUpdate()).catch((e=>{i.getLogger(this).error(e)})))}_createQuery(){const e=this.parent?.footprintLayerView,r=this.layer?.parent;if(!e||!r||r.destroyed)return null;const{layer:{maximumVisibleSublayers:t},view:{scale:s}}=this;if(!t)return null;const{itemTypeField:i,itemSourceField:a,itemNameField:o,minScaleField:d,maxScaleField:p,objectIdField:l,orderBy:u}=r,y=n(`${d} IS NULL OR ${s} <= ${d} OR ${d} = 0`,`${p} IS NULL OR ${s} >= ${p}`),c=u?.find((e=>e.field&&!e.valueExpression)),m=e.createQuery();if(m.returnGeometry=!1,m.num=t,m.outFields=[l,a,o],m.where=n(m.where,y),null!=this.unsupportedItemTypes){const e=`${i} NOT IN (${this.unsupportedItemTypes.map((e=>`'${e}'`))})`;m.where=n(m.where,e)}return c?.field&&(m.orderByFields=[`${c.field} ${\"descending\"===c.order?\"DESC\":\"ASC\"}`],m.outFields.push(c.field)),m}};return e([d({readOnly:!0})],y.prototype,\"creatingLayerViews\",null),e([d()],y.prototype,\"layer\",void 0),e([d()],y.prototype,\"layerViews\",void 0),e([d({readOnly:!0})],y.prototype,\"unsupportedItemTypes\",void 0),e([d()],y.prototype,\"parent\",void 0),e([d({readOnly:!0})],y.prototype,\"isUpdating\",null),y=e([p(\"esri.views.layers.CatalogDynamicGroupLayerView\")],y),y};export{u as default};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAC,QAAK,2BAA2B;AAAC,OAAOC,CAAC,MAAK,0BAA0B;AAAC,SAAOC,YAAY,IAAIC,CAAC,EAACC,UAAU,IAAIC,CAAC,QAAK,2BAA2B;AAAC,OAAOC,CAAC,MAAK,sBAAsB;AAAC,SAAOC,QAAQ,IAAIC,CAAC,EAACC,iBAAiB,IAAIC,CAAC,QAAK,4BAA4B;AAAC,SAAOC,MAAM,IAAIC,CAAC,QAAK,mBAAmB;AAAC,SAAOC,QAAQ,IAAIC,CAAC,QAAK,mDAAmD;AAAC,OAAM,mBAAmB;AAAC,OAAM,yBAAyB;AAAC,SAAOC,QAAQ,IAAIC,CAAC,QAAK,mDAAmD;AAAC,MAAMC,CAAC,GAACC,MAAM,CAAC,CAAC;EAACC,CAAC,GAACA,CAAC,IAAE;IAAC,IAAIC,CAAC,GAAC,cAAcD,CAAC;MAACE,WAAWA,CAAA,EAAE;QAAC,KAAK,CAAC,GAAGC,SAAS,CAAC,EAAC,IAAI,CAACC,UAAU,GAAC,IAAItB,CAAC,CAAD,CAAC,EAAC,IAAI,CAACuB,gBAAgB,GAAChB,CAAC,CAAE,YAAS;UAAC,MAAK;cAACiB,KAAK,EAACzB,CAAC;cAAC0B,MAAM,EAACzB;YAAC,CAAC,GAAC,IAAI;YAACE,CAAC,GAACF,CAAC,EAAE0B,kBAAkB;UAAC,IAAItB,CAAC,GAAC,EAAE;UAAC,MAAMC,CAAC,GAAC,IAAI,CAACsB,YAAY,CAAC,CAAC;UAAC,IAAGtB,CAAC,IAAEH,CAAC,EAAC;YAAC,MAAK;cAAC0B,QAAQ,EAAC5B;YAAC,CAAC,GAAC,MAAME,CAAC,CAAC2B,aAAa,CAACxB,CAAC,CAAC;YAAC,IAAI,CAACyB,SAAS,KAAG1B,CAAC,GAACJ,CAAC,CAAC+B,GAAG,CAAE/B,CAAC,IAAED,CAAC,CAACiC,YAAY,CAAChC,CAAC,CAAE,CAAC,CAAC;UAAA;UAAC,IAAI,CAACiC,aAAa,CAACjB,CAAC,CAAC,EAAC,IAAI,CAACkB,UAAU,CAAC9B,CAAC,EAACY,CAAC,CAAC;QAAA,CAAE,CAAC;MAAA;MAAC,IAAImB,kBAAkBA,CAAA,EAAE;QAAC,OAAO,IAAI,CAACC,IAAI,EAAEC,gBAAgB,CAACC,4BAA4B,CAAC,IAAI,CAACd,KAAK,CAAC,IAAE,CAAC,CAAC;MAAA;MAACe,UAAUA,CAAA,EAAE;QAAC,OAAO,IAAI,CAACJ,kBAAkB,IAAE,IAAI,CAACX,KAAK,CAACgB,QAAQ,IAAE,IAAI,CAAClB,UAAU,CAACmB,IAAI,CAAE1C,CAAC,IAAEA,CAAC,CAACyC,QAAS,CAAC;MAAA;MAACE,kBAAkBA,CAAA,EAAE;QAAC,OAAOxC,CAAC,CAAC,CAAC,IAAI,CAACyC,gBAAgB,CAACC,OAAO,CAAE,MAAI,CAAC,CAAC,KAAG,IAAI,CAACnB,MAAM,EAAEC,kBAAkB,EAAEmB,YAAY,EAAG,MAAI,IAAI,CAACC,YAAY,CAAC,CAAE,CAAC,EAAC,IAAI,CAACH,gBAAgB,CAACI,GAAG,CAAE,MAAI,CAAC,IAAI,CAACvB,KAAK,CAACwB,uBAAuB,EAAC,IAAI,CAACxB,KAAK,CAACC,MAAM,EAAEwB,OAAO,EAAC,IAAI,CAACxB,MAAM,EAAEC,kBAAkB,EAAEwB,MAAM,EAAC,IAAI,CAACzB,MAAM,EAAEC,kBAAkB,EAAEyB,UAAU,EAAC,IAAI,CAACrB,SAAS,CAAC,EAAG,MAAI,IAAI,CAACgB,YAAY,CAAC,CAAE,CAAC,EAAC1C,CAAC,CAAE,MAAI,IAAI,CAAC6B,aAAa,CAACjB,CAAC,CAAE,CAAC,CAAC,CAAC;MAAA;MAAC8B,YAAYA,CAAA,EAAE;QAAC,IAAI,CAAChB,SAAS,GAAC,IAAI,CAACG,aAAa,CAACjB,CAAC,CAAC,GAAC,IAAI,CAAC2B,gBAAgB,CAACS,UAAU,CAAC3C,CAAC,CAAC,IAAI,CAACc,gBAAgB,CAAC,CAAC,CAAC,CAAC8B,KAAK,CAAEtD,CAAC,IAAE;UAACM,CAAC,CAACiD,SAAS,CAAC,IAAI,CAAC,CAACC,KAAK,CAACxD,CAAC,CAAC;QAAA,CAAE,CAAC,CAAC;MAAA;MAAC4B,YAAYA,CAAA,EAAE;QAAC,MAAM5B,CAAC,GAAC,IAAI,CAAC0B,MAAM,EAAEC,kBAAkB;UAAC1B,CAAC,GAAC,IAAI,CAACwB,KAAK,EAAEC,MAAM;QAAC,IAAG,CAAC1B,CAAC,IAAE,CAACC,CAAC,IAAEA,CAAC,CAACwD,SAAS,EAAC,OAAO,IAAI;QAAC,MAAK;UAAChC,KAAK,EAAC;YAACwB,uBAAuB,EAAC9C;UAAC,CAAC;UAACkC,IAAI,EAAC;YAACqB,KAAK,EAACrD;UAAC;QAAC,CAAC,GAAC,IAAI;QAAC,IAAG,CAACF,CAAC,EAAC,OAAO,IAAI;QAAC,MAAK;YAACwD,aAAa,EAACrD,CAAC;YAACsD,eAAe,EAACpD,CAAC;YAACqD,aAAa,EAACnD,CAAC;YAACoD,aAAa,EAAChD,CAAC;YAACiD,aAAa,EAAC/C,CAAC;YAACgD,aAAa,EAAC/C,CAAC;YAACiC,OAAO,EAAC/B;UAAC,CAAC,GAAClB,CAAC;UAACmB,CAAC,GAACR,CAAC,CAAC,GAAGE,CAAC,eAAeT,CAAC,OAAOS,CAAC,OAAOA,CAAC,MAAM,EAAC,GAAGE,CAAC,eAAeX,CAAC,OAAOW,CAAC,EAAE,CAAC;UAACiD,CAAC,GAAC9C,CAAC,EAAE+C,IAAI,CAAElE,CAAC,IAAEA,CAAC,CAACmE,KAAK,IAAE,CAACnE,CAAC,CAACoE,eAAgB,CAAC;UAACC,CAAC,GAACrE,CAAC,CAACsE,WAAW,CAAC,CAAC;QAAC,IAAGD,CAAC,CAACE,cAAc,GAAC,CAAC,CAAC,EAACF,CAAC,CAACG,GAAG,GAACrE,CAAC,EAACkE,CAAC,CAACI,SAAS,GAAC,CAACxD,CAAC,EAACT,CAAC,EAACE,CAAC,CAAC,EAAC2D,CAAC,CAACK,KAAK,GAAC9D,CAAC,CAACyD,CAAC,CAACK,KAAK,EAACtD,CAAC,CAAC,EAAC,IAAI,IAAE,IAAI,CAACuD,oBAAoB,EAAC;UAAC,MAAM3E,CAAC,GAAC,GAAGM,CAAC,YAAY,IAAI,CAACqE,oBAAoB,CAAC3C,GAAG,CAAEhC,CAAC,IAAE,IAAIA,CAAC,GAAI,CAAC,GAAG;UAACqE,CAAC,CAACK,KAAK,GAAC9D,CAAC,CAACyD,CAAC,CAACK,KAAK,EAAC1E,CAAC,CAAC;QAAA;QAAC,OAAOiE,CAAC,EAAEE,KAAK,KAAGE,CAAC,CAACO,aAAa,GAAC,CAAC,GAAGX,CAAC,CAACE,KAAK,IAAI,YAAY,KAAGF,CAAC,CAACY,KAAK,GAAC,MAAM,GAAC,KAAK,EAAE,CAAC,EAACR,CAAC,CAACI,SAAS,CAACK,IAAI,CAACb,CAAC,CAACE,KAAK,CAAC,CAAC,EAACE,CAAC;MAAA;IAAC,CAAC;IAAC,OAAOrE,CAAC,CAAC,CAACc,CAAC,CAAC;MAACiE,QAAQ,EAAC,CAAC;IAAC,CAAC,CAAC,CAAC,EAAC3D,CAAC,CAAC4D,SAAS,EAAC,oBAAoB,EAAC,IAAI,CAAC,EAAChF,CAAC,CAAC,CAACc,CAAC,CAAC,CAAC,CAAC,EAACM,CAAC,CAAC4D,SAAS,EAAC,OAAO,EAAC,KAAK,CAAC,CAAC,EAAChF,CAAC,CAAC,CAACc,CAAC,CAAC,CAAC,CAAC,EAACM,CAAC,CAAC4D,SAAS,EAAC,YAAY,EAAC,KAAK,CAAC,CAAC,EAAChF,CAAC,CAAC,CAACc,CAAC,CAAC;MAACiE,QAAQ,EAAC,CAAC;IAAC,CAAC,CAAC,CAAC,EAAC3D,CAAC,CAAC4D,SAAS,EAAC,sBAAsB,EAAC,KAAK,CAAC,CAAC,EAAChF,CAAC,CAAC,CAACc,CAAC,CAAC,CAAC,CAAC,EAACM,CAAC,CAAC4D,SAAS,EAAC,QAAQ,EAAC,KAAK,CAAC,CAAC,EAAChF,CAAC,CAAC,CAACc,CAAC,CAAC;MAACiE,QAAQ,EAAC,CAAC;IAAC,CAAC,CAAC,CAAC,EAAC3D,CAAC,CAAC4D,SAAS,EAAC,YAAY,EAAC,IAAI,CAAC,EAAC5D,CAAC,GAACpB,CAAC,CAAC,CAACgB,CAAC,CAAC,gDAAgD,CAAC,CAAC,EAACI,CAAC,CAAC,EAACA,CAAC;EAAA,CAAC;AAAC,SAAOD,CAAC,IAAI8D,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}