{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../chunks/tslib.es6.js\";\nimport t from \"../config.js\";\nimport r from \"../Graphic.js\";\nimport o from \"../PopupTemplate.js\";\nimport s from \"../request.js\";\nimport i from \"../core/Collection.js\";\nimport a from \"../core/CollectionFlattener.js\";\nimport n from \"../core/Error.js\";\nimport { JSONMap as l } from \"../core/jsonMap.js\";\nimport { clone as p } from \"../core/lang.js\";\nimport { MultiOriginJSONMixin as m } from \"../core/MultiOriginJSONSupport.js\";\nimport { throwIfAbortError as u } from \"../core/promiseUtils.js\";\nimport { on as c, watch as y, sync as f } from \"../core/reactiveUtils.js\";\nimport { urlToObject as d, addQueryParameters as h, addProxy as g, Url as b } from \"../core/urlUtils.js\";\nimport { property as w } from \"../core/accessorSupport/decorators/property.js\";\nimport { Integer as v } from \"../core/accessorSupport/ensureType.js\";\nimport { reader as x } from \"../core/accessorSupport/decorators/reader.js\";\nimport { subclass as j } from \"../core/accessorSupport/decorators/subclass.js\";\nimport { writer as I } from \"../core/accessorSupport/decorators/writer.js\";\nimport { willPropertyWrite as S } from \"../core/accessorSupport/write.js\";\nimport F from \"../geometry/Extent.js\";\nimport P from \"../geometry/SpatialReference.js\";\nimport { getScale as R } from \"../geometry/support/scaleUtils.js\";\nimport { equals as E } from \"../geometry/support/spatialReferenceUtils.js\";\nimport L from \"./Layer.js\";\nimport { BlendLayer as O } from \"./mixins/BlendLayer.js\";\nimport { OperationalLayer as U } from \"./mixins/OperationalLayer.js\";\nimport { PortalLayer as M } from \"./mixins/PortalLayer.js\";\nimport { RefreshableLayer as _ } from \"./mixins/RefreshableLayer.js\";\nimport { ScaleRangeLayer as T } from \"./mixins/ScaleRangeLayer.js\";\nimport { TemporalLayer as C } from \"./mixins/TemporalLayer.js\";\nimport { isAxesOrderReversedForWkid as W } from \"./ogc/crsUtils.js\";\nimport { isWmsServer as q } from \"./support/arcgisLayerUrl.js\";\nimport { legendEnabled as N, url as $ } from \"./support/commonProperties.js\";\nimport { ExportWMSImageParameters as k } from \"./support/ExportWMSImageParameters.js\";\nimport { createBitmap as B } from \"./support/imageBitmapUtils.js\";\nimport H from \"./support/WMSSublayer.js\";\nimport { normalizeWKID as G, toTimeQueryParameter as V, getPopupLayers as A, parseCapabilities as D } from \"./support/wmsUtils.js\";\nconst J = new l({\n  bmp: \"image/bmp\",\n  gif: \"image/gif\",\n  jpg: \"image/jpeg\",\n  png: \"image/png\",\n  svg: \"image/svg+xml\"\n}, {\n  ignoreUnknown: !1\n});\nfunction z(e) {\n  return \"text/html\" === e;\n}\nfunction Q(e) {\n  return \"text/plain\" === e;\n}\nlet K = class extends O(C(_(T(U(M(m(L))))))) {\n  constructor() {\n    super(...arguments), this.allSublayers = new a({\n      getCollections: () => [this.sublayers],\n      getChildrenFunction: e => e.sublayers\n    }), this.customParameters = null, this.customLayerParameters = null, this.copyright = null, this.description = null, this.dimensions = null, this.fullExtent = null, this.fullExtents = null, this.featureInfoFormats = null, this.featureInfoUrl = null, this.fetchFeatureInfoFunction = null, this.imageFormat = null, this.imageMaxHeight = 2048, this.imageMaxWidth = 2048, this.imageTransparency = !0, this.legendEnabled = !0, this.mapUrl = null, this.isReference = null, this.operationalLayerType = \"WMS\", this.spatialReference = null, this.spatialReferences = null, this.sublayers = null, this.type = \"wms\", this.version = null, this.addHandles([c(() => this.sublayers, \"after-add\", _ref => {\n      let {\n        item: e\n      } = _ref;\n      e.parent = e.layer = this;\n    }, f), c(() => this.sublayers, \"after-remove\", _ref2 => {\n      let {\n        item: e\n      } = _ref2;\n      e.layer = e.parent = null;\n    }, f), y(() => this.sublayers, (e, t) => {\n      if (t) for (const r of t) r.layer = r.parent = null;\n      if (e) for (const r of e) r.parent = r.layer = this;\n    }, f)]);\n  }\n  normalizeCtorArgs(e, t) {\n    return \"string\" == typeof e ? {\n      url: e,\n      ...t\n    } : e;\n  }\n  destroy() {\n    this.allSublayers.destroy();\n  }\n  load(e) {\n    const t = null != e ? e.signal : null;\n    return this.addResolvingPromise(this.loadFromPortal({\n      supportedTypes: [\"WMS\"]\n    }, e).catch(u).then(() => this._fetchService(t)).then(() => this._checkLayerValidity())), Promise.resolve(this);\n  }\n  readFullExtentFromItemOrMap(e, t) {\n    const r = t.extent;\n    return r ? new F({\n      xmin: r[0][0],\n      ymin: r[0][1],\n      xmax: r[1][0],\n      ymax: r[1][1]\n    }) : null;\n  }\n  writeFullExtent(e, t) {\n    t.extent = [[e.xmin, e.ymin], [e.xmax, e.ymax]];\n  }\n  get featureInfoFormat() {\n    return null == this.featureInfoFormats ? null : this.featureInfoFormats.find(z) ?? this.featureInfoFormats.find(Q) ?? null;\n  }\n  set featureInfoFormat(e) {\n    null == e ? (this.revert(\"featureInfoFormat\", \"service\"), this._clearOverride(\"featureInfoFormat\")) : (z(e) || Q(e)) && this._override(\"featureInfoFormat\", e);\n  }\n  readImageFormat(e, t) {\n    const r = t.supportedImageFormatTypes;\n    return r && r.includes(\"image/png\") ? \"image/png\" : r && r[0];\n  }\n  readSpatialReferenceFromItemOrDocument(e, t) {\n    return new P(t.spatialReferences[0]);\n  }\n  writeSpatialReferences(e, t) {\n    const r = this.spatialReference?.wkid;\n    e && r ? (t.spatialReferences = e.filter(e => e !== r), t.spatialReferences.unshift(r)) : t.spatialReferences = e;\n  }\n  readSublayersFromItemOrMap(e, t, r) {\n    return Y(t.layers, r, t.visibleLayers);\n  }\n  readSublayers(e, t, r) {\n    return Y(t.layers, r);\n  }\n  writeSublayers(e, t, r, o) {\n    t.layers = [];\n    const s = new Map(),\n      i = e.flatten(_ref3 => {\n        let {\n          sublayers: e\n        } = _ref3;\n        return e ?? [];\n      });\n    for (const a of i) if (\"number\" == typeof a.parent?.id) {\n      const e = s.get(a.parent.id);\n      null != e ? e.push(a.id) : s.set(a.parent.id, [a.id]);\n    }\n    for (const a of i) {\n      const e = {\n          sublayer: a,\n          ...o\n        },\n        r = a.write({\n          parentLayerId: \"number\" == typeof a.parent?.id ? a.parent.id : -1\n        }, e);\n      if (s.has(a.id) && (r.sublayerIds = s.get(a.id)), !a.sublayers && a.name) {\n        const r = a.write({}, e);\n        delete r.id, t.layers.push(r);\n      }\n    }\n    t.visibleLayers = i.filter(_ref4 => {\n      let {\n        visible: e,\n        sublayers: t\n      } = _ref4;\n      return e && !t;\n    }).map(_ref5 => {\n      let {\n        name: e\n      } = _ref5;\n      return e;\n    }).toArray();\n  }\n  set url(e) {\n    if (!e) return void this._set(\"url\", e);\n    const {\n      path: t,\n      query: r\n    } = d(e);\n    for (const s in r) /^(request|service)$/i.test(s) && delete r[s];\n    const o = h(t, r ?? {});\n    this._set(\"url\", o);\n  }\n  createExportImageParameters(e, t, r, o) {\n    const s = o?.pixelRatio ?? 1,\n      i = R({\n        extent: e,\n        width: t\n      }) * s,\n      a = new k({\n        layer: this,\n        scale: i\n      }),\n      {\n        xmin: n,\n        ymin: l,\n        xmax: p,\n        ymax: m,\n        spatialReference: u\n      } = e,\n      c = G(u, this.spatialReferences),\n      y = \"1.3.0\" === this.version && W(c) ? `${l},${n},${m},${p}` : `${n},${l},${p},${m}`,\n      f = a.toJSON(),\n      d = \"1.3.0\" === this.version ? \"crs\" : \"srs\";\n    return {\n      bbox: y,\n      [d]: null == c || isNaN(c) ? void 0 : \"EPSG:\" + c,\n      ...f\n    };\n  }\n  async fetchImage(e, t, r, o) {\n    const i = this.mapUrl,\n      a = this.createExportImageParameters(e, t, r, o);\n    if (!a.layers) {\n      const e = document.createElement(\"canvas\");\n      return e.width = t, e.height = r, e;\n    }\n    const n = V(o?.timeExtent),\n      l = {\n        responseType: \"image\",\n        query: this._mixCustomParameters({\n          width: t,\n          height: r,\n          ...a,\n          time: n,\n          ...this.refreshParameters\n        }),\n        signal: o?.signal\n      };\n    return s(i ?? \"\", l).then(e => e.data);\n  }\n  async fetchImageBitmap(e, t, r, o) {\n    const i = this.mapUrl ?? \"\",\n      a = this.createExportImageParameters(e, t, r, o);\n    if (!a.layers) {\n      const e = document.createElement(\"canvas\");\n      return e.width = t, e.height = r, e;\n    }\n    const n = V(o?.timeExtent),\n      l = {\n        responseType: \"blob\",\n        query: this._mixCustomParameters({\n          width: t,\n          height: r,\n          ...a,\n          time: n,\n          ...this.refreshParameters\n        }),\n        signal: o?.signal\n      },\n      {\n        data: p\n      } = await s(i, l);\n    return B(p, i, o?.signal);\n  }\n  fetchFeatureInfo(e, t, r, o, s) {\n    const i = R({\n        extent: e,\n        width: t\n      }),\n      a = new k({\n        layer: this,\n        scale: i\n      }),\n      n = A(a.visibleSublayers);\n    if (null == this.featureInfoUrl || null == n) return Promise.resolve([]);\n    if (null == this.fetchFeatureInfoFunction && null == this.featureInfoFormat) return Promise.resolve([]);\n    const l = \"1.3.0\" === this.version ? {\n        I: o,\n        J: s\n      } : {\n        x: o,\n        y: s\n      },\n      p = {\n        query_layers: n,\n        request: \"GetFeatureInfo\",\n        info_format: this.featureInfoFormat,\n        feature_count: 25,\n        width: t,\n        height: r,\n        ...l\n      },\n      m = {\n        ...this.createExportImageParameters(e, t, r),\n        ...p\n      },\n      u = this._mixCustomParameters(m);\n    return null != this.fetchFeatureInfoFunction ? this.fetchFeatureInfoFunction(u) : this._defaultFetchFeatureInfoFunction(h(this.featureInfoUrl, u));\n  }\n  findSublayerById(e) {\n    return this.allSublayers.find(t => t.id === e);\n  }\n  findSublayerByName(e) {\n    return this.allSublayers.find(t => t.name === e);\n  }\n  serviceSupportsSpatialReference(e) {\n    return q(this.url) || null != this.spatialReferences && this.spatialReferences.some(t => {\n      const r = 900913 === t ? P.WebMercator : new P({\n        wkid: t\n      });\n      return E(r, e);\n    });\n  }\n  _defaultFetchFeatureInfoFunction(e) {\n    const t = document.createElement(\"iframe\");\n    t.src = g(e), t.style.border = \"none\", t.style.margin = \"0\", t.style.width = \"100%\", t.setAttribute(\"sandbox\", \"\");\n    const s = new o({\n        title: this.title,\n        content: t\n      }),\n      i = new r({\n        sourceLayer: this,\n        popupTemplate: s\n      });\n    return Promise.resolve([i]);\n  }\n  async _fetchService(e) {\n    if (!this.resourceInfo && this.parsedUrl?.path) {\n      const {\n          path: t,\n          query: r\n        } = this.parsedUrl,\n        {\n          data: o\n        } = await s(t, {\n          query: {\n            SERVICE: \"WMS\",\n            REQUEST: \"GetCapabilities\",\n            ...r,\n            ...this.customParameters\n          },\n          responseType: \"xml\",\n          signal: e\n        });\n      this.resourceInfo = D(o);\n    }\n    if (this.parsedUrl) {\n      const e = new b(this.parsedUrl.path),\n        {\n          httpsDomains: r\n        } = t.request;\n      \"https\" !== e.scheme || e.port && \"443\" !== e.port || !e.host || r.includes(e.host) || r.push(e.host);\n    }\n    this.read(this.resourceInfo, {\n      origin: \"service\"\n    });\n  }\n  _checkLayerValidity() {\n    if (!this.allSublayers.length) throw new n(\"wmslayer:empty-layer\", \"The layer doesn't have any sublayer\");\n  }\n  _mixCustomParameters(e) {\n    if (!this.customLayerParameters && !this.customParameters) return e;\n    const t = {\n      ...this.customParameters,\n      ...this.customLayerParameters\n    };\n    for (const r in t) e[r.toLowerCase()] = t[r];\n    return e;\n  }\n};\nfunction X(e, t) {\n  return e.some(e => {\n    for (const r in e) if (S(e, r, null, t)) return !0;\n    return !1;\n  });\n}\nfunction Y(e, t, r) {\n  e = e ?? [];\n  const o = new Map();\n  e.every(e => null == e.id) && (e = p(e)).forEach((e, t) => e.id = t);\n  for (const i of e) {\n    const e = new H();\n    e.read(i, t), r && !r.includes(e.name) && (e.visible = !1), o.set(e.id, e);\n  }\n  const s = [];\n  for (const a of e) {\n    const e = null != a.id ? o.get(a.id) : null;\n    if (e) if (null != a.parentLayerId && a.parentLayerId >= 0) {\n      const t = o.get(a.parentLayerId);\n      if (!t) continue;\n      t.sublayers || (t.sublayers = new i()), t.sublayers.push(e);\n    } else s.push(e);\n  }\n  return s;\n}\ne([w({\n  readOnly: !0\n})], K.prototype, \"allSublayers\", void 0), e([w({\n  json: {\n    type: Object,\n    write: !0\n  }\n})], K.prototype, \"customParameters\", void 0), e([w({\n  json: {\n    type: Object,\n    write: !0\n  }\n})], K.prototype, \"customLayerParameters\", void 0), e([w({\n  type: String,\n  json: {\n    write: !0\n  }\n})], K.prototype, \"copyright\", void 0), e([w()], K.prototype, \"description\", void 0), e([w({\n  readOnly: !0\n})], K.prototype, \"dimensions\", void 0), e([w({\n  json: {\n    type: [[Number]],\n    read: {\n      source: \"extent\"\n    },\n    write: {\n      target: \"extent\"\n    },\n    origins: {\n      \"web-document\": {\n        write: {\n          ignoreOrigin: !0\n        }\n      },\n      \"portal-item\": {\n        write: {\n          ignoreOrigin: !0\n        }\n      }\n    }\n  }\n})], K.prototype, \"fullExtent\", void 0), e([x([\"web-document\", \"portal-item\"], \"fullExtent\", [\"extent\"])], K.prototype, \"readFullExtentFromItemOrMap\", null), e([I([\"web-document\", \"portal-item\"], \"fullExtent\", {\n  extent: {\n    type: [[Number]]\n  }\n})], K.prototype, \"writeFullExtent\", null), e([w({\n  type: [F]\n})], K.prototype, \"fullExtents\", void 0), e([w({\n  type: String,\n  json: {\n    write: {\n      ignoreOrigin: !0\n    }\n  }\n})], K.prototype, \"featureInfoFormat\", null), e([w({\n  type: [String],\n  readOnly: !0\n})], K.prototype, \"featureInfoFormats\", void 0), e([w({\n  type: String,\n  json: {\n    write: {\n      ignoreOrigin: !0\n    }\n  }\n})], K.prototype, \"featureInfoUrl\", void 0), e([w()], K.prototype, \"fetchFeatureInfoFunction\", void 0), e([w({\n  type: String,\n  json: {\n    origins: {\n      \"web-document\": {\n        default: \"image/png\",\n        type: J.jsonValues,\n        read: {\n          reader: J.read,\n          source: \"format\"\n        },\n        write: {\n          writer: J.write,\n          target: \"format\"\n        }\n      }\n    }\n  }\n})], K.prototype, \"imageFormat\", void 0), e([x(\"imageFormat\", [\"supportedImageFormatTypes\"])], K.prototype, \"readImageFormat\", null), e([w({\n  type: Number,\n  json: {\n    read: {\n      source: \"maxHeight\"\n    },\n    write: {\n      target: \"maxHeight\"\n    }\n  }\n})], K.prototype, \"imageMaxHeight\", void 0), e([w({\n  type: Number,\n  json: {\n    read: {\n      source: \"maxWidth\"\n    },\n    write: {\n      target: \"maxWidth\"\n    }\n  }\n})], K.prototype, \"imageMaxWidth\", void 0), e([w()], K.prototype, \"imageTransparency\", void 0), e([w(N)], K.prototype, \"legendEnabled\", void 0), e([w({\n  type: [\"show\", \"hide\", \"hide-children\"]\n})], K.prototype, \"listMode\", void 0), e([w({\n  type: String,\n  json: {\n    write: {\n      ignoreOrigin: !0\n    }\n  }\n})], K.prototype, \"mapUrl\", void 0), e([w({\n  type: Boolean,\n  json: {\n    read: !1,\n    write: {\n      enabled: !0,\n      overridePolicy: () => ({\n        enabled: !1\n      })\n    }\n  }\n})], K.prototype, \"isReference\", void 0), e([w({\n  type: [\"WMS\"]\n})], K.prototype, \"operationalLayerType\", void 0), e([w()], K.prototype, \"resourceInfo\", void 0), e([w({\n  type: P,\n  json: {\n    origins: {\n      service: {\n        read: {\n          source: \"extent.spatialReference\"\n        }\n      }\n    },\n    write: !1\n  }\n})], K.prototype, \"spatialReference\", void 0), e([x([\"web-document\", \"portal-item\"], \"spatialReference\", [\"spatialReferences\"])], K.prototype, \"readSpatialReferenceFromItemOrDocument\", null), e([w({\n  type: [v],\n  json: {\n    read: !1,\n    origins: {\n      service: {\n        read: !0\n      },\n      \"web-document\": {\n        read: !1,\n        write: {\n          ignoreOrigin: !0\n        }\n      },\n      \"portal-item\": {\n        read: !1,\n        write: {\n          ignoreOrigin: !0\n        }\n      }\n    }\n  }\n})], K.prototype, \"spatialReferences\", void 0), e([I([\"web-document\", \"portal-item\"], \"spatialReferences\")], K.prototype, \"writeSpatialReferences\", null), e([w({\n  type: i.ofType(H),\n  json: {\n    write: {\n      target: \"layers\",\n      overridePolicy(e, t, r) {\n        if (X(this.allSublayers, r)) return {\n          ignoreOrigin: !0\n        };\n      }\n    }\n  }\n})], K.prototype, \"sublayers\", void 0), e([x([\"web-document\", \"portal-item\"], \"sublayers\", [\"layers\", \"visibleLayers\"])], K.prototype, \"readSublayersFromItemOrMap\", null), e([x(\"service\", \"sublayers\", [\"layers\"])], K.prototype, \"readSublayers\", null), e([I(\"sublayers\", {\n  layers: {\n    type: [H]\n  },\n  visibleLayers: {\n    type: [String]\n  }\n})], K.prototype, \"writeSublayers\", null), e([w({\n  json: {\n    read: !1\n  },\n  readOnly: !0,\n  value: \"wms\"\n})], K.prototype, \"type\", void 0), e([w($)], K.prototype, \"url\", null), e([w({\n  type: String,\n  json: {\n    write: {\n      ignoreOrigin: !0\n    }\n  }\n})], K.prototype, \"version\", void 0), K = e([j(\"esri.layers.WMSLayer\")], K);\nconst Z = K;\nexport { Z as default };","map":{"version":3,"names":["_","e","t","r","o","s","i","a","n","JSONMap","l","clone","p","MultiOriginJSONMixin","m","throwIfAbortError","u","on","c","watch","y","sync","f","urlToObject","d","addQueryParameters","h","addProxy","g","Url","b","property","w","Integer","v","reader","x","subclass","j","writer","I","willPropertyWrite","S","F","P","getScale","R","equals","E","L","BlendLayer","O","OperationalLayer","U","PortalLayer","M","RefreshableLayer","ScaleRangeLayer","T","TemporalLayer","C","isAxesOrderReversedForWkid","W","isWmsServer","q","legendEnabled","N","url","$","ExportWMSImageParameters","k","createBitmap","B","H","normalizeWKID","G","toTimeQueryParameter","V","getPopupLayers","A","parseCapabilities","D","J","bmp","gif","jpg","png","svg","ignoreUnknown","z","Q","K","constructor","arguments","allSublayers","getCollections","sublayers","getChildrenFunction","customParameters","customLayerParameters","copyright","description","dimensions","fullExtent","fullExtents","featureInfoFormats","featureInfoUrl","fetchFeatureInfoFunction","imageFormat","imageMaxHeight","imageMaxWidth","imageTransparency","mapUrl","isReference","operationalLayerType","spatialReference","spatialReferences","type","version","addHandles","_ref","item","parent","layer","_ref2","normalizeCtorArgs","destroy","load","signal","addResolvingPromise","loadFromPortal","supportedTypes","catch","then","_fetchService","_checkLayerValidity","Promise","resolve","readFullExtentFromItemOrMap","extent","xmin","ymin","xmax","ymax","writeFullExtent","featureInfoFormat","find","revert","_clearOverride","_override","readImageFormat","supportedImageFormatTypes","includes","readSpatialReferenceFromItemOrDocument","writeSpatialReferences","wkid","filter","unshift","readSublayersFromItemOrMap","Y","layers","visibleLayers","readSublayers","writeSublayers","Map","flatten","_ref3","id","get","push","set","sublayer","write","parentLayerId","has","sublayerIds","name","_ref4","visible","map","_ref5","toArray","_set","path","query","test","createExportImageParameters","pixelRatio","width","scale","toJSON","bbox","isNaN","fetchImage","document","createElement","height","timeExtent","responseType","_mixCustomParameters","time","refreshParameters","data","fetchImageBitmap","fetchFeatureInfo","visibleSublayers","query_layers","request","info_format","feature_count","_defaultFetchFeatureInfoFunction","findSublayerById","findSublayerByName","serviceSupportsSpatialReference","some","WebMercator","src","style","border","margin","setAttribute","title","content","sourceLayer","popupTemplate","resourceInfo","parsedUrl","SERVICE","REQUEST","httpsDomains","scheme","port","host","read","origin","length","toLowerCase","X","every","forEach","readOnly","prototype","json","Object","String","Number","source","target","origins","ignoreOrigin","default","jsonValues","Boolean","enabled","overridePolicy","service","ofType","value","Z"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/layers/WMSLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../config.js\";import r from\"../Graphic.js\";import o from\"../PopupTemplate.js\";import s from\"../request.js\";import i from\"../core/Collection.js\";import a from\"../core/CollectionFlattener.js\";import n from\"../core/Error.js\";import{JSONMap as l}from\"../core/jsonMap.js\";import{clone as p}from\"../core/lang.js\";import{MultiOriginJSONMixin as m}from\"../core/MultiOriginJSONSupport.js\";import{throwIfAbortError as u}from\"../core/promiseUtils.js\";import{on as c,watch as y,sync as f}from\"../core/reactiveUtils.js\";import{urlToObject as d,addQueryParameters as h,addProxy as g,Url as b}from\"../core/urlUtils.js\";import{property as w}from\"../core/accessorSupport/decorators/property.js\";import{Integer as v}from\"../core/accessorSupport/ensureType.js\";import{reader as x}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as j}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as I}from\"../core/accessorSupport/decorators/writer.js\";import{willPropertyWrite as S}from\"../core/accessorSupport/write.js\";import F from\"../geometry/Extent.js\";import P from\"../geometry/SpatialReference.js\";import{getScale as R}from\"../geometry/support/scaleUtils.js\";import{equals as E}from\"../geometry/support/spatialReferenceUtils.js\";import L from\"./Layer.js\";import{BlendLayer as O}from\"./mixins/BlendLayer.js\";import{OperationalLayer as U}from\"./mixins/OperationalLayer.js\";import{PortalLayer as M}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as _}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as T}from\"./mixins/ScaleRangeLayer.js\";import{TemporalLayer as C}from\"./mixins/TemporalLayer.js\";import{isAxesOrderReversedForWkid as W}from\"./ogc/crsUtils.js\";import{isWmsServer as q}from\"./support/arcgisLayerUrl.js\";import{legendEnabled as N,url as $}from\"./support/commonProperties.js\";import{ExportWMSImageParameters as k}from\"./support/ExportWMSImageParameters.js\";import{createBitmap as B}from\"./support/imageBitmapUtils.js\";import H from\"./support/WMSSublayer.js\";import{normalizeWKID as G,toTimeQueryParameter as V,getPopupLayers as A,parseCapabilities as D}from\"./support/wmsUtils.js\";const J=new l({bmp:\"image/bmp\",gif:\"image/gif\",jpg:\"image/jpeg\",png:\"image/png\",svg:\"image/svg+xml\"},{ignoreUnknown:!1});function z(e){return\"text/html\"===e}function Q(e){return\"text/plain\"===e}let K=class extends(O(C(_(T(U(M(m(L)))))))){constructor(...e){super(...e),this.allSublayers=new a({getCollections:()=>[this.sublayers],getChildrenFunction:e=>e.sublayers}),this.customParameters=null,this.customLayerParameters=null,this.copyright=null,this.description=null,this.dimensions=null,this.fullExtent=null,this.fullExtents=null,this.featureInfoFormats=null,this.featureInfoUrl=null,this.fetchFeatureInfoFunction=null,this.imageFormat=null,this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.legendEnabled=!0,this.mapUrl=null,this.isReference=null,this.operationalLayerType=\"WMS\",this.spatialReference=null,this.spatialReferences=null,this.sublayers=null,this.type=\"wms\",this.version=null,this.addHandles([c((()=>this.sublayers),\"after-add\",(({item:e})=>{e.parent=e.layer=this}),f),c((()=>this.sublayers),\"after-remove\",(({item:e})=>{e.layer=e.parent=null}),f),y((()=>this.sublayers),((e,t)=>{if(t)for(const r of t)r.layer=r.parent=null;if(e)for(const r of e)r.parent=r.layer=this}),f)])}normalizeCtorArgs(e,t){return\"string\"==typeof e?{url:e,...t}:e}destroy(){this.allSublayers.destroy()}load(e){const t=null!=e?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"WMS\"]},e).catch(u).then((()=>this._fetchService(t))).then((()=>this._checkLayerValidity()))),Promise.resolve(this)}readFullExtentFromItemOrMap(e,t){const r=t.extent;return r?new F({xmin:r[0][0],ymin:r[0][1],xmax:r[1][0],ymax:r[1][1]}):null}writeFullExtent(e,t){t.extent=[[e.xmin,e.ymin],[e.xmax,e.ymax]]}get featureInfoFormat(){return null==this.featureInfoFormats?null:this.featureInfoFormats.find(z)??this.featureInfoFormats.find(Q)??null}set featureInfoFormat(e){null==e?(this.revert(\"featureInfoFormat\",\"service\"),this._clearOverride(\"featureInfoFormat\")):(z(e)||Q(e))&&this._override(\"featureInfoFormat\",e)}readImageFormat(e,t){const r=t.supportedImageFormatTypes;return r&&r.includes(\"image/png\")?\"image/png\":r&&r[0]}readSpatialReferenceFromItemOrDocument(e,t){return new P(t.spatialReferences[0])}writeSpatialReferences(e,t){const r=this.spatialReference?.wkid;e&&r?(t.spatialReferences=e.filter((e=>e!==r)),t.spatialReferences.unshift(r)):t.spatialReferences=e}readSublayersFromItemOrMap(e,t,r){return Y(t.layers,r,t.visibleLayers)}readSublayers(e,t,r){return Y(t.layers,r)}writeSublayers(e,t,r,o){t.layers=[];const s=new Map,i=e.flatten((({sublayers:e})=>e??[]));for(const a of i)if(\"number\"==typeof a.parent?.id){const e=s.get(a.parent.id);null!=e?e.push(a.id):s.set(a.parent.id,[a.id])}for(const a of i){const e={sublayer:a,...o},r=a.write({parentLayerId:\"number\"==typeof a.parent?.id?a.parent.id:-1},e);if(s.has(a.id)&&(r.sublayerIds=s.get(a.id)),!a.sublayers&&a.name){const r=a.write({},e);delete r.id,t.layers.push(r)}}t.visibleLayers=i.filter((({visible:e,sublayers:t})=>e&&!t)).map((({name:e})=>e)).toArray()}set url(e){if(!e)return void this._set(\"url\",e);const{path:t,query:r}=d(e);for(const s in r)/^(request|service)$/i.test(s)&&delete r[s];const o=h(t,r??{});this._set(\"url\",o)}createExportImageParameters(e,t,r,o){const s=o?.pixelRatio??1,i=R({extent:e,width:t})*s,a=new k({layer:this,scale:i}),{xmin:n,ymin:l,xmax:p,ymax:m,spatialReference:u}=e,c=G(u,this.spatialReferences),y=\"1.3.0\"===this.version&&W(c)?`${l},${n},${m},${p}`:`${n},${l},${p},${m}`,f=a.toJSON(),d=\"1.3.0\"===this.version?\"crs\":\"srs\";return{bbox:y,[d]:null==c||isNaN(c)?void 0:\"EPSG:\"+c,...f}}async fetchImage(e,t,r,o){const i=this.mapUrl,a=this.createExportImageParameters(e,t,r,o);if(!a.layers){const e=document.createElement(\"canvas\");return e.width=t,e.height=r,e}const n=V(o?.timeExtent),l={responseType:\"image\",query:this._mixCustomParameters({width:t,height:r,...a,time:n,...this.refreshParameters}),signal:o?.signal};return s(i??\"\",l).then((e=>e.data))}async fetchImageBitmap(e,t,r,o){const i=this.mapUrl??\"\",a=this.createExportImageParameters(e,t,r,o);if(!a.layers){const e=document.createElement(\"canvas\");return e.width=t,e.height=r,e}const n=V(o?.timeExtent),l={responseType:\"blob\",query:this._mixCustomParameters({width:t,height:r,...a,time:n,...this.refreshParameters}),signal:o?.signal},{data:p}=await s(i,l);return B(p,i,o?.signal)}fetchFeatureInfo(e,t,r,o,s){const i=R({extent:e,width:t}),a=new k({layer:this,scale:i}),n=A(a.visibleSublayers);if(null==this.featureInfoUrl||null==n)return Promise.resolve([]);if(null==this.fetchFeatureInfoFunction&&null==this.featureInfoFormat)return Promise.resolve([]);const l=\"1.3.0\"===this.version?{I:o,J:s}:{x:o,y:s},p={query_layers:n,request:\"GetFeatureInfo\",info_format:this.featureInfoFormat,feature_count:25,width:t,height:r,...l},m={...this.createExportImageParameters(e,t,r),...p},u=this._mixCustomParameters(m);return null!=this.fetchFeatureInfoFunction?this.fetchFeatureInfoFunction(u):this._defaultFetchFeatureInfoFunction(h(this.featureInfoUrl,u))}findSublayerById(e){return this.allSublayers.find((t=>t.id===e))}findSublayerByName(e){return this.allSublayers.find((t=>t.name===e))}serviceSupportsSpatialReference(e){return q(this.url)||null!=this.spatialReferences&&this.spatialReferences.some((t=>{const r=900913===t?P.WebMercator:new P({wkid:t});return E(r,e)}))}_defaultFetchFeatureInfoFunction(e){const t=document.createElement(\"iframe\");t.src=g(e),t.style.border=\"none\",t.style.margin=\"0\",t.style.width=\"100%\",t.setAttribute(\"sandbox\",\"\");const s=new o({title:this.title,content:t}),i=new r({sourceLayer:this,popupTemplate:s});return Promise.resolve([i])}async _fetchService(e){if(!this.resourceInfo&&this.parsedUrl?.path){const{path:t,query:r}=this.parsedUrl,{data:o}=await s(t,{query:{SERVICE:\"WMS\",REQUEST:\"GetCapabilities\",...r,...this.customParameters},responseType:\"xml\",signal:e});this.resourceInfo=D(o)}if(this.parsedUrl){const e=new b(this.parsedUrl.path),{httpsDomains:r}=t.request;\"https\"!==e.scheme||e.port&&\"443\"!==e.port||!e.host||r.includes(e.host)||r.push(e.host)}this.read(this.resourceInfo,{origin:\"service\"})}_checkLayerValidity(){if(!this.allSublayers.length)throw new n(\"wmslayer:empty-layer\",\"The layer doesn't have any sublayer\")}_mixCustomParameters(e){if(!this.customLayerParameters&&!this.customParameters)return e;const t={...this.customParameters,...this.customLayerParameters};for(const r in t)e[r.toLowerCase()]=t[r];return e}};function X(e,t){return e.some((e=>{for(const r in e)if(S(e,r,null,t))return!0;return!1}))}function Y(e,t,r){e=e??[];const o=new Map;e.every((e=>null==e.id))&&(e=p(e)).forEach(((e,t)=>e.id=t));for(const i of e){const e=new H;e.read(i,t),r&&!r.includes(e.name)&&(e.visible=!1),o.set(e.id,e)}const s=[];for(const a of e){const e=null!=a.id?o.get(a.id):null;if(e)if(null!=a.parentLayerId&&a.parentLayerId>=0){const t=o.get(a.parentLayerId);if(!t)continue;t.sublayers||(t.sublayers=new i),t.sublayers.push(e)}else s.push(e)}return s}e([w({readOnly:!0})],K.prototype,\"allSublayers\",void 0),e([w({json:{type:Object,write:!0}})],K.prototype,\"customParameters\",void 0),e([w({json:{type:Object,write:!0}})],K.prototype,\"customLayerParameters\",void 0),e([w({type:String,json:{write:!0}})],K.prototype,\"copyright\",void 0),e([w()],K.prototype,\"description\",void 0),e([w({readOnly:!0})],K.prototype,\"dimensions\",void 0),e([w({json:{type:[[Number]],read:{source:\"extent\"},write:{target:\"extent\"},origins:{\"web-document\":{write:{ignoreOrigin:!0}},\"portal-item\":{write:{ignoreOrigin:!0}}}}})],K.prototype,\"fullExtent\",void 0),e([x([\"web-document\",\"portal-item\"],\"fullExtent\",[\"extent\"])],K.prototype,\"readFullExtentFromItemOrMap\",null),e([I([\"web-document\",\"portal-item\"],\"fullExtent\",{extent:{type:[[Number]]}})],K.prototype,\"writeFullExtent\",null),e([w({type:[F]})],K.prototype,\"fullExtents\",void 0),e([w({type:String,json:{write:{ignoreOrigin:!0}}})],K.prototype,\"featureInfoFormat\",null),e([w({type:[String],readOnly:!0})],K.prototype,\"featureInfoFormats\",void 0),e([w({type:String,json:{write:{ignoreOrigin:!0}}})],K.prototype,\"featureInfoUrl\",void 0),e([w()],K.prototype,\"fetchFeatureInfoFunction\",void 0),e([w({type:String,json:{origins:{\"web-document\":{default:\"image/png\",type:J.jsonValues,read:{reader:J.read,source:\"format\"},write:{writer:J.write,target:\"format\"}}}}})],K.prototype,\"imageFormat\",void 0),e([x(\"imageFormat\",[\"supportedImageFormatTypes\"])],K.prototype,\"readImageFormat\",null),e([w({type:Number,json:{read:{source:\"maxHeight\"},write:{target:\"maxHeight\"}}})],K.prototype,\"imageMaxHeight\",void 0),e([w({type:Number,json:{read:{source:\"maxWidth\"},write:{target:\"maxWidth\"}}})],K.prototype,\"imageMaxWidth\",void 0),e([w()],K.prototype,\"imageTransparency\",void 0),e([w(N)],K.prototype,\"legendEnabled\",void 0),e([w({type:[\"show\",\"hide\",\"hide-children\"]})],K.prototype,\"listMode\",void 0),e([w({type:String,json:{write:{ignoreOrigin:!0}}})],K.prototype,\"mapUrl\",void 0),e([w({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],K.prototype,\"isReference\",void 0),e([w({type:[\"WMS\"]})],K.prototype,\"operationalLayerType\",void 0),e([w()],K.prototype,\"resourceInfo\",void 0),e([w({type:P,json:{origins:{service:{read:{source:\"extent.spatialReference\"}}},write:!1}})],K.prototype,\"spatialReference\",void 0),e([x([\"web-document\",\"portal-item\"],\"spatialReference\",[\"spatialReferences\"])],K.prototype,\"readSpatialReferenceFromItemOrDocument\",null),e([w({type:[v],json:{read:!1,origins:{service:{read:!0},\"web-document\":{read:!1,write:{ignoreOrigin:!0}},\"portal-item\":{read:!1,write:{ignoreOrigin:!0}}}}})],K.prototype,\"spatialReferences\",void 0),e([I([\"web-document\",\"portal-item\"],\"spatialReferences\")],K.prototype,\"writeSpatialReferences\",null),e([w({type:i.ofType(H),json:{write:{target:\"layers\",overridePolicy(e,t,r){if(X(this.allSublayers,r))return{ignoreOrigin:!0}}}}})],K.prototype,\"sublayers\",void 0),e([x([\"web-document\",\"portal-item\"],\"sublayers\",[\"layers\",\"visibleLayers\"])],K.prototype,\"readSublayersFromItemOrMap\",null),e([x(\"service\",\"sublayers\",[\"layers\"])],K.prototype,\"readSublayers\",null),e([I(\"sublayers\",{layers:{type:[H]},visibleLayers:{type:[String]}})],K.prototype,\"writeSublayers\",null),e([w({json:{read:!1},readOnly:!0,value:\"wms\"})],K.prototype,\"type\",void 0),e([w($)],K.prototype,\"url\",null),e([w({type:String,json:{write:{ignoreOrigin:!0}}})],K.prototype,\"version\",void 0),K=e([j(\"esri.layers.WMSLayer\")],K);const Z=K;export{Z as default};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}