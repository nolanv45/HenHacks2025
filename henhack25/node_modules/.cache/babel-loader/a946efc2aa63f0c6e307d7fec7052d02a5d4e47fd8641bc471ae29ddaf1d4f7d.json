{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from \"./TileKey.js\";\nfunction s(e, s) {\n  const t = new Set();\n  for (const i of e instanceof Set ? e.values() : e.keys()) s.has(i) || t.add(i);\n  return t;\n}\nclass t {\n  constructor(e, s, t) {\n    const i = t ? e.getTileCoverage(t, 0, !0, \"closest\") : null,\n      o = e.getTileCoverage(s, 0, !0, \"closest\");\n    if (this._tileKeys = new Map(), i) for (const n of i.keys()) this._tileKeys.set(n.id, n);\n    if (o) for (const n of o.keys()) this._tileKeys.set(n.id, n);\n  }\n  get coverageSet() {\n    return new Set(this._tileKeys.keys());\n  }\n  keys() {\n    return this._tileKeys.values();\n  }\n}\nclass i {\n  constructor(e) {\n    this.version = e;\n  }\n}\nclass o {\n  constructor(e) {\n    this._subscriptions = new Map(), this._visible = new Set(), this._paused = new Set(), this._version = 0, this._config = e;\n  }\n  destroy() {}\n  get _coverageSet() {\n    return this._coverage?.coverageSet ?? new Set();\n  }\n  suspend() {\n    this._suspendedOverage = this._coverage, this._coverage = null, this._updateSubscriptions();\n  }\n  resume() {\n    null == this._coverage && (this._coverage = this._suspendedOverage, this._suspendedOverage = null, this._updateSubscriptions());\n  }\n  update(e, s) {\n    return this._version = (this._version + 1) % Number.MAX_SAFE_INTEGER, this._updateCoverage(e, s), this._updateSubscriptions(), new Set(this._visible);\n  }\n  _updateCoverage(e, s) {\n    this._coverage = new t(this._config.tileInfoView, e, s);\n  }\n  _updateSubscriptions() {\n    const e = this._coverageSet,\n      t = this._updateVisibility(),\n      o = s(t, e),\n      n = s(this._subscriptions, t),\n      r = s(e, this._subscriptions),\n      a = s(n, e),\n      c = s(o, a),\n      u = s(c, this._paused);\n    this._visible = t;\n    for (const s of r.values()) this._subscriptions.set(s, new i(this._version));\n    for (const s of u.values()) this._paused.add(s);\n    for (const s of a.values()) this._subscriptions.delete(s), this._paused.delete(s);\n    (r.size || a.size || u.size) && this._sendUpdateSubscriptions(r, a, u);\n  }\n  _sendUpdateSubscriptions(e, s, t) {\n    const i = Array.from(e.values()).map(e => ({\n      tileId: e,\n      version: this._subscriptions.get(e).version\n    }));\n    this._config.updateSubscriptions({\n      subscribe: i,\n      unsubscribe: Array.from(s.values()),\n      pause: Array.from(t.values())\n    });\n  }\n  _updateVisibility() {\n    const s = new Set(),\n      t = new Set();\n    if (!this._coverage) return s;\n    for (const e of this._coverage.keys()) {\n      if (this._config.isDone(e)) {\n        s.add(e.id);\n        continue;\n      }\n      if (this._addVisibleParent(s, t, e)) continue;\n      this._addVisibleChildren(s, e) || s.add(e.id);\n    }\n    const i = new e(0, 0, 0, 0),\n      o = new e(0, 0, 0, 0);\n    for (const e of t) {\n      i.id = e;\n      for (const e of s) o.id = e, i.containsChild(o) && s.delete(e);\n    }\n    return s;\n  }\n  _addVisibleParent(s, t, i) {\n    let o = !1;\n    for (const n of this._visible.values()) {\n      new e(n).containsChild(i) && (s.add(n), t.add(n), o = !0);\n    }\n    return o;\n  }\n  _addVisibleChildren(s, t) {\n    let i = !1;\n    for (const o of this._visible.values()) {\n      const n = new e(o);\n      t.containsChild(n) && (s.add(o), i = !0);\n    }\n    return i;\n  }\n}\nexport { o as FeatureTileSubscriptionManager };","map":{"version":3,"names":["e","s","t","Set","i","values","keys","has","add","constructor","getTileCoverage","o","_tileKeys","Map","n","set","id","coverageSet","version","_subscriptions","_visible","_paused","_version","_config","destroy","_coverageSet","_coverage","suspend","_suspendedOverage","_updateSubscriptions","resume","update","Number","MAX_SAFE_INTEGER","_updateCoverage","tileInfoView","_updateVisibility","r","a","c","u","delete","size","_sendUpdateSubscriptions","Array","from","map","tileId","get","updateSubscriptions","subscribe","unsubscribe","pause","isDone","_addVisibleParent","_addVisibleChildren","containsChild","FeatureTileSubscriptionManager"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/tiling/FeatureTileSubscriptionManager.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"./TileKey.js\";function s(e,s){const t=new Set;for(const i of e instanceof Set?e.values():e.keys())s.has(i)||t.add(i);return t}class t{constructor(e,s,t){const i=t?e.getTileCoverage(t,0,!0,\"closest\"):null,o=e.getTileCoverage(s,0,!0,\"closest\");if(this._tileKeys=new Map,i)for(const n of i.keys())this._tileKeys.set(n.id,n);if(o)for(const n of o.keys())this._tileKeys.set(n.id,n)}get coverageSet(){return new Set(this._tileKeys.keys())}keys(){return this._tileKeys.values()}}class i{constructor(e){this.version=e}}class o{constructor(e){this._subscriptions=new Map,this._visible=new Set,this._paused=new Set,this._version=0,this._config=e}destroy(){}get _coverageSet(){return this._coverage?.coverageSet??new Set}suspend(){this._suspendedOverage=this._coverage,this._coverage=null,this._updateSubscriptions()}resume(){null==this._coverage&&(this._coverage=this._suspendedOverage,this._suspendedOverage=null,this._updateSubscriptions())}update(e,s){return this._version=(this._version+1)%Number.MAX_SAFE_INTEGER,this._updateCoverage(e,s),this._updateSubscriptions(),new Set(this._visible)}_updateCoverage(e,s){this._coverage=new t(this._config.tileInfoView,e,s)}_updateSubscriptions(){const e=this._coverageSet,t=this._updateVisibility(),o=s(t,e),n=s(this._subscriptions,t),r=s(e,this._subscriptions),a=s(n,e),c=s(o,a),u=s(c,this._paused);this._visible=t;for(const s of r.values())this._subscriptions.set(s,new i(this._version));for(const s of u.values())this._paused.add(s);for(const s of a.values())this._subscriptions.delete(s),this._paused.delete(s);(r.size||a.size||u.size)&&this._sendUpdateSubscriptions(r,a,u)}_sendUpdateSubscriptions(e,s,t){const i=Array.from(e.values()).map((e=>({tileId:e,version:this._subscriptions.get(e).version})));this._config.updateSubscriptions({subscribe:i,unsubscribe:Array.from(s.values()),pause:Array.from(t.values())})}_updateVisibility(){const s=new Set,t=new Set;if(!this._coverage)return s;for(const e of this._coverage.keys()){if(this._config.isDone(e)){s.add(e.id);continue}if(this._addVisibleParent(s,t,e))continue;this._addVisibleChildren(s,e)||s.add(e.id)}const i=new e(0,0,0,0),o=new e(0,0,0,0);for(const e of t){i.id=e;for(const e of s)o.id=e,i.containsChild(o)&&s.delete(e)}return s}_addVisibleParent(s,t,i){let o=!1;for(const n of this._visible.values()){new e(n).containsChild(i)&&(s.add(n),t.add(n),o=!0)}return o}_addVisibleChildren(s,t){let i=!1;for(const o of this._visible.values()){const n=new e(o);t.containsChild(n)&&(s.add(o),i=!0)}return i}}export{o as FeatureTileSubscriptionManager};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}