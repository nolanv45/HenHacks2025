{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../chunks/tslib.es6.js\";\nimport s from \"../../../core/Accessor.js\";\nimport { abortMaybe as o, removeMaybe as n } from \"../../../core/maybe.js\";\nimport { debounce as i } from \"../../../core/promiseUtils.js\";\nimport { property as r } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/Logger.js\";\nimport \"../../../core/RandomLCG.js\";\nimport { subclass as e } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { TaskPriority as a, ImmediateTask as l } from \"../../support/Scheduler.js\";\nlet p = class extends s {\n  constructor(t) {\n    super(t), this.constrainResult = t => t, this._snapPoints = null, this._frameTask = null, this._abortController = null, this._stagedPoint = null, this._snap = i(async (t, s, o, n) => {\n      const i = this._frameTask;\n      if (null == i) return;\n      const r = await i.schedule(() => s.snap({\n        ...t,\n        context: o,\n        signal: n\n      }), n);\n      r.valid && (await i.schedule(() => {\n        this.stagedPoint = r.apply(), t !== this._snapPoints && null != this._snapPoints && (this.stagedPoint = s.update({\n          ...this._snapPoints,\n          context: o\n        }));\n      }, n));\n    });\n  }\n  get stagedPoint() {\n    return this._stagedPoint;\n  }\n  set stagedPoint(t) {\n    this._stagedPoint = this.constrainResult(t);\n  }\n  initialize() {\n    const t = \"3d\" === this.view.type ? this.view?.resourceController?.scheduler : null;\n    this._frameTask = null != t ? t.registerTask(a.SNAPPING) : l;\n  }\n  destroy() {\n    this._abortController = o(this._abortController), this._frameTask = n(this._frameTask);\n  }\n  update(t, s, o) {\n    this._snapPoints = t;\n    const {\n        point: n,\n        scenePoint: i\n      } = t,\n      r = s.update({\n        point: n,\n        scenePoint: i,\n        context: o\n      });\n    return this.stagedPoint = r, r;\n  }\n  async snap(t, s, o) {\n    const {\n      point: n,\n      scenePoint: i\n    } = t;\n    return this.stagedPoint = s.update({\n      point: n,\n      scenePoint: i,\n      context: o\n    }), this._snapPoints = t, null == this._abortController && (this._abortController = new AbortController()), this._snap(t, s, o, this._abortController.signal);\n  }\n  async snapAgainNearPreviousMapPoint(t, s) {\n    null != this._snapPoints && (await this.snap(this._snapPoints, t, s));\n  }\n  abort() {\n    this._abortController = o(this._abortController), this._snapPoints = null;\n  }\n};\nt([r({\n  constructOnly: !0\n})], p.prototype, \"view\", void 0), t([r()], p.prototype, \"stagedPoint\", null), t([r()], p.prototype, \"constrainResult\", void 0), t([r()], p.prototype, \"_stagedPoint\", void 0), p = t([e(\"esri.views.interactive.snapping.SnappingOperation\")], p);\nexport { p as SnappingOperation };","map":{"version":3,"names":["_","t","s","abortMaybe","o","removeMaybe","n","debounce","i","property","r","subclass","e","TaskPriority","a","ImmediateTask","l","p","constructor","constrainResult","_snapPoints","_frameTask","_abortController","_stagedPoint","_snap","schedule","snap","context","signal","valid","stagedPoint","apply","update","initialize","view","type","resourceController","scheduler","registerTask","SNAPPING","destroy","point","scenePoint","AbortController","snapAgainNearPreviousMapPoint","abort","constructOnly","prototype","SnappingOperation"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/interactive/snapping/SnappingOperation.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import s from\"../../../core/Accessor.js\";import{abortMaybe as o,removeMaybe as n}from\"../../../core/maybe.js\";import{debounce as i}from\"../../../core/promiseUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as e}from\"../../../core/accessorSupport/decorators/subclass.js\";import{TaskPriority as a,ImmediateTask as l}from\"../../support/Scheduler.js\";let p=class extends s{constructor(t){super(t),this.constrainResult=t=>t,this._snapPoints=null,this._frameTask=null,this._abortController=null,this._stagedPoint=null,this._snap=i((async(t,s,o,n)=>{const i=this._frameTask;if(null==i)return;const r=await i.schedule((()=>s.snap({...t,context:o,signal:n})),n);r.valid&&await i.schedule((()=>{this.stagedPoint=r.apply(),t!==this._snapPoints&&null!=this._snapPoints&&(this.stagedPoint=s.update({...this._snapPoints,context:o}))}),n)}))}get stagedPoint(){return this._stagedPoint}set stagedPoint(t){this._stagedPoint=this.constrainResult(t)}initialize(){const t=\"3d\"===this.view.type?this.view?.resourceController?.scheduler:null;this._frameTask=null!=t?t.registerTask(a.SNAPPING):l}destroy(){this._abortController=o(this._abortController),this._frameTask=n(this._frameTask)}update(t,s,o){this._snapPoints=t;const{point:n,scenePoint:i}=t,r=s.update({point:n,scenePoint:i,context:o});return this.stagedPoint=r,r}async snap(t,s,o){const{point:n,scenePoint:i}=t;return this.stagedPoint=s.update({point:n,scenePoint:i,context:o}),this._snapPoints=t,null==this._abortController&&(this._abortController=new AbortController),this._snap(t,s,o,this._abortController.signal)}async snapAgainNearPreviousMapPoint(t,s){null!=this._snapPoints&&await this.snap(this._snapPoints,t,s)}abort(){this._abortController=o(this._abortController),this._snapPoints=null}};t([r({constructOnly:!0})],p.prototype,\"view\",void 0),t([r()],p.prototype,\"stagedPoint\",null),t([r()],p.prototype,\"constrainResult\",void 0),t([r()],p.prototype,\"_stagedPoint\",void 0),p=t([e(\"esri.views.interactive.snapping.SnappingOperation\")],p);export{p as SnappingOperation};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}