{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport { id as i } from \"../../kernel.js\";\nimport r from \"../../core/Collection.js\";\nimport s from \"../../core/Error.js\";\nimport n from \"../../core/Evented.js\";\nimport t from \"../../core/Loadable.js\";\nimport o from \"../../core/Logger.js\";\nimport { getOrCreateMapValue as a } from \"../../core/MapUtils.js\";\nimport d from \"../../core/Promise.js\";\nimport { debounce as c, throwIfAborted as v } from \"../../core/promiseUtils.js\";\nimport l from \"../../core/ReactiveMap.js\";\nimport { watch as p, whenOnce as u } from \"../../core/reactiveUtils.js\";\nimport { normalize as f } from \"../../core/urlUtils.js\";\nimport { property as m } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/has.js\";\nimport \"../../core/RandomLCG.js\";\nimport { subclass as h } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { UpdatingHandles as g } from \"../../core/support/UpdatingHandles.js\";\nimport { parse as w } from \"../../layers/support/arcgisLayerUrl.js\";\nimport { isSubtypeGroupLayer as y, isFeatureLayer as S } from \"../../layers/support/layerUtils.js\";\nimport I from \"../../portal/Portal.js\";\nimport { hasUserTypeExtension as _ } from \"../../portal/support/utils.js\";\nimport b from \"../../rest/featureService/FeatureService.js\";\nimport { ServiceVersionInfo as L } from \"./ServiceVersionInfo.js\";\nimport V from \"../../versionManagement/VersionManagementService.js\";\nfunction U(e) {\n  return !e || 0 === e.trim().length;\n}\nconst A = new Map();\nfunction T(e) {\n  return a(A, e, () => {\n    const i = new j({\n      view: e\n    });\n    return e.addHandles({\n      remove() {\n        A.delete(e), i.destroy();\n      }\n    }), i.load().catch(e => {\n      o.getLogger(\"esri.views.Services\").error(\"Failed to load service metadata\", e);\n    }), i;\n  });\n}\nlet j = class extends t.LoadableMixin(d.EsriPromiseMixin(n.EventedAccessor)) {\n  constructor(e) {\n    super(e), this._updatingHandles = new g(), this.items = new r(), this.tablesAndLayersLookup = new l(), this.additionalLayers = new r(), this._debouncedCheckAndUpdateServiceInfos = c(async () => {\n      const e = [];\n      for (const i of this.items) {\n        if (0 === i.layersAndTables.length) continue;\n        const r = i.layersAndTables.getItemAt(0);\n        r?.gdbVersion !== i.versionInfo?.versionIdentifier.name && e.push(i);\n      }\n      0 !== e.length && (await u(() => !this.updating), await this._updateVersionInfos(e));\n    }), this._debouncedLayersChanged = c(async () => {\n      const e = this._detectNewLayersAndTables();\n      0 !== e.length && (await u(() => !this._updatingHandles.updating), await this._updatingHandles.addPromise((async () => {\n        const i = new Set();\n        for (const s of e) if (\"feature\" === s.type || \"subtype-group\" === s.type) {\n          if (!s.url) continue;\n          const e = w(s.url).url.path,\n            n = this._findServiceInfo(e);\n          if (n) this.tablesAndLayersLookup.set(s, n), s.isTable ? n.tables.push(s) : n.layers.push(s);else if (!i.has(e)) try {\n            await this._addServiceInfo(e, s);\n          } catch (r) {\n            o.getLogger(this).error(`Failed to load feature service: ${e}`, r);\n          } finally {\n            i.add(e);\n          }\n        }\n      })()));\n    }), this._processed = new Set();\n  }\n  destroy() {\n    this._set(\"view\", null), this.items.removeAll(), this.tablesAndLayersLookup.clear();\n  }\n  async load(e) {\n    return v(e), this.addHandles([p(() => this._allLayersAndTables, () => {\n      this._debouncedLayersChanged().catch(e => {\n        o.getLogger(this).warn(\"Failed to update service info\", e);\n      });\n    }), p(() => this.items.map(e => e.layersAndTables.map(e => e.gdbVersion ?? \"\").join(\",\")), () => {\n      this.checkAndUpdateServiceInfos().catch(e => {\n        o.getLogger(this).warn(\"Failed to update service info\", e);\n      });\n    })]), this.addResolvingPromise(this._debouncedLayersChanged()), this;\n  }\n  get updating() {\n    return \"loading\" === this.loadStatus || this._updatingHandles.updating;\n  }\n  checkAndUpdateServiceInfos() {\n    return this._debouncedCheckAndUpdateServiceInfos();\n  }\n  changeVersion(e, i, r) {\n    return this._updatingHandles.addPromise((async () => {\n      await this._changeVersionInternal(e, i, r);\n    })());\n  }\n  createVersion(e) {\n    return this._updatingHandles.addPromise((async () => {\n      const i = e.featureServerUrl,\n        r = this._findServiceInfo(i);\n      if (!r?.versionService) throw new s(\"services:no-version-management-service\");\n      const n = r.hasAdvancedEditingUserTypeExtension,\n        t = r.loggedInServiceUser.toUpperCase(),\n        o = U(e.ownerName) ? t : e.ownerName?.trim().toUpperCase();\n      if (o !== t) {\n        if (r.featureServiceVersion <= 11.1) throw new s(\"services:versioning-api-error\");\n        if (!n) throw new s(\"services:no-advanced-editing-user-type-extension\");\n      }\n      if (\"SDE\" === o?.toUpperCase() && \"DEFAULT\" === e.versionName.toUpperCase()) throw new s(\"services:no-valid-version-name\");\n      {\n        const i = await r.versionService.getVersionInfos();\n        if (i?.find(i => i.versionIdentifier.name.toUpperCase() === (o + \".\" + e.versionName).toUpperCase() || i.versionIdentifier.name.toUpperCase() === (t + \".\" + e.versionName).toUpperCase())) throw new s(\"services:no-valid-version-name\");\n      }\n      const a = await r.versionService.createVersion({\n        versionName: e.versionName,\n        access: o !== t ? \"public\" : e.access,\n        description: e.description\n      });\n      if (o !== t) {\n        const {\n          guid: i,\n          name: s\n        } = a.versionIdentifier;\n        await r.versionService.alterVersion({\n          guid: i,\n          name: s\n        }, {\n          ownerName: o,\n          access: e.access\n        });\n      }\n      e.switchToVersion && (await this._changeVersionInternal(i, a.versionIdentifier.name, a.versionIdentifier.guid)), this.emit(\"version-created\", {\n        versionIdentifier: a.versionIdentifier,\n        versionManagementService: r.versionService\n      });\n    })());\n  }\n  deleteVersion(e, i, r) {\n    return this._updatingHandles.addPromise((async () => {\n      const n = this._findServiceInfo(e);\n      if (!n?.versionService) throw new s(\"services:no-version-management-service\");\n      if (n.featureServiceVersion <= 11.1) throw new s(\"services:versioning-api-error\");\n      if (!n.hasAdvancedEditingUserTypeExtension) throw new s(\"services:no-advanced-editing-user-type-extension\");\n      const t = {\n        name: i,\n        guid: r\n      };\n      (await n.versionService.deleteVersion(t)) && (await this._updateVersionInfo(n), this.emit(\"version-deleted\", {\n        versionIdentifier: t,\n        versionManagementService: n.versionService\n      }));\n    })());\n  }\n  startEditing(e) {\n    return this._updatingHandles.addPromise((async () => {\n      const i = this._findServiceInfo(e);\n      if (!i?.versionService) throw new s(\"services:no-version-management-service\");\n      if (!i.hasAdvancedEditingUserTypeExtension) throw new s(\"services:no-advanced-editing-user-type-extension\");\n      const r = i.versionInfo?.versionIdentifier ?? {\n        name: i.versionService.defaultVersionIdentifier.name,\n        guid: i.versionService.defaultVersionIdentifier.guid\n      };\n      let n = !0;\n      (\"none\" !== i.versionService.getLockType(r) || (n = await i.versionService.startReading(r), n)) && (n = await i.versionService.startEditing(r), i.updateLockType());\n    })());\n  }\n  finishEditing(e, i) {\n    return this._updatingHandles.addPromise((async () => {\n      const r = this._findServiceInfo(e);\n      if (!r?.versionService) throw new s(\"services:no-version-management-service\");\n      if (!r.hasAdvancedEditingUserTypeExtension) throw new s(\"services:no-advanced-editing-user-type-extension\");\n      const n = r.versionInfo?.versionIdentifier ?? {\n          name: r.versionService.defaultVersionIdentifier.name,\n          guid: r.versionService.defaultVersionIdentifier.guid\n        },\n        t = r.versionService.getLockType(n);\n      if (\"none\" !== t) return \"read\" === t ? (await r.versionService.stopReading(n), void r.updateLockType()) : \"edit\" === t ? (await r.versionService.stopEditing(n, i), await r.versionService.stopReading(n), void r.updateLockType()) : void 0;\n    })());\n  }\n  async _changeVersionInternal(e, i, r) {\n    const n = this._findServiceInfo(e);\n    if (!n?.versionService) throw new s(\"services:no-version-management-service\");\n    const t = n.versionInfo?.versionIdentifier ?? {\n        name: n.versionService.defaultVersionIdentifier.name,\n        guid: n.versionService.defaultVersionIdentifier.guid\n      },\n      o = {\n        name: i,\n        guid: r\n      };\n    (await n.versionService.changeVersion(this.view?.map, t, o)) && (await this._updateVersionInfo(n));\n  }\n  async _updateVersionInfo(e) {\n    const i = e.versionService;\n    if (!i) return;\n    if (0 === e.layersAndTables.length) return;\n    const r = e.layersAndTables.getItemAt(0)?.gdbVersion,\n      s = r ? await i.getVersionIdentifierFromName(r) : i.defaultVersionIdentifier;\n    e.versionInfo = await i.getVersionInfoExtended(s);\n  }\n  _findServiceInfo(e) {\n    return this.items.find(i => i.featureService.url === e) ?? null;\n  }\n  _removeFeatureService(e) {\n    this.items.remove(e);\n  }\n  async _findPortal(e) {\n    const r = i?.findServerInfo(e ?? \"\");\n    if (!r?.owningSystemUrl) return null;\n    const s = `${r.owningSystemUrl}/sharing/rest`,\n      n = I.getDefault();\n    if (n?.loaded && f(n.restUrl) === f(s)) return n;\n    return new I({\n      authMode: \"immediate\",\n      url: r.owningSystemUrl\n    }).load();\n  }\n  _updateVersionInfos(e) {\n    return this._updatingHandles.addPromise((async () => {\n      for (const i of e) await this._updateVersionInfo(i).catch(e => {\n        o.getLogger(this).error(\"Failed to update version details\", e);\n      });\n    })());\n  }\n  async _addServiceInfo(e, i) {\n    const s = new b({\n      url: e\n    });\n    await s.load();\n    const n = await this._findPortal(e),\n      t = n?.user?.username;\n    let o = !1;\n    t && (o = await _(n, t, \"advediting\"));\n    let a = null;\n    s.versionManagementServiceUrl && (a = new V({\n      url: s.versionManagementServiceUrl\n    }), await a.load());\n    const d = i.isTable ? [] : [i],\n      c = i.isTable ? [i] : [],\n      v = new L({\n        loggedInServiceUser: t ?? \"\",\n        hasAdvancedEditingUserTypeExtension: o,\n        versionInfo: null,\n        lockType: \"none\",\n        canEditVersionedData: !0,\n        canCreateVersion: !0,\n        featureService: s,\n        versionService: a,\n        layers: new r(d),\n        tables: new r(c)\n      });\n    return a && (await this._updateVersionInfo(v)), this.items.push(v), this.tablesAndLayersLookup.set(i, v), i.isTable ? v.tables.push(i) : v.layers.push(i), v;\n  }\n  get _allLayersAndTables() {\n    return [...this.view.map.allLayers, ...this.view.map.allTables, ...this.additionalLayers];\n  }\n  _detectNewLayersAndTables() {\n    const e = new Set(this._allLayersAndTables),\n      i = [];\n    for (const r of e) \"feature\" !== r.type && \"subtype-group\" !== r.type || this._processed.has(r) || i.push(r);\n    for (const r of this._processed) if (!e.has(r) && (y(r) || S(r))) {\n      const e = this.tablesAndLayersLookup.get(r);\n      if (!e) continue;\n      this.tablesAndLayersLookup.delete(r), r.isTable ? e.tables.remove(r) : e.layers.remove(r), 0 === e.layersAndTables.length && this._removeFeatureService(e);\n    }\n    return this._processed = e, i;\n  }\n};\ne([m({\n  constructOnly: !0\n})], j.prototype, \"view\", void 0), e([m()], j.prototype, \"items\", void 0), e([m()], j.prototype, \"tablesAndLayersLookup\", void 0), e([m()], j.prototype, \"additionalLayers\", void 0), e([m()], j.prototype, \"updating\", null), e([m()], j.prototype, \"_allLayersAndTables\", null), j = e([h(\"esri.undoredo.support.Services\")], j);\nexport { j as Services, T as getServices };","map":{"version":3,"names":["_","e","id","i","r","s","n","t","o","getOrCreateMapValue","a","d","debounce","c","throwIfAborted","v","l","watch","p","whenOnce","u","normalize","f","property","m","subclass","h","UpdatingHandles","g","parse","w","isSubtypeGroupLayer","y","isFeatureLayer","S","I","hasUserTypeExtension","b","ServiceVersionInfo","L","V","U","trim","length","A","Map","T","j","view","addHandles","remove","delete","destroy","load","catch","getLogger","error","LoadableMixin","EsriPromiseMixin","EventedAccessor","constructor","_updatingHandles","items","tablesAndLayersLookup","additionalLayers","_debouncedCheckAndUpdateServiceInfos","layersAndTables","getItemAt","gdbVersion","versionInfo","versionIdentifier","name","push","updating","_updateVersionInfos","_debouncedLayersChanged","_detectNewLayersAndTables","addPromise","Set","type","url","path","_findServiceInfo","set","isTable","tables","layers","has","_addServiceInfo","add","_processed","_set","removeAll","clear","_allLayersAndTables","warn","map","join","checkAndUpdateServiceInfos","addResolvingPromise","loadStatus","changeVersion","_changeVersionInternal","createVersion","featureServerUrl","versionService","hasAdvancedEditingUserTypeExtension","loggedInServiceUser","toUpperCase","ownerName","featureServiceVersion","versionName","getVersionInfos","find","access","description","guid","alterVersion","switchToVersion","emit","versionManagementService","deleteVersion","_updateVersionInfo","startEditing","defaultVersionIdentifier","getLockType","startReading","updateLockType","finishEditing","stopReading","stopEditing","getVersionIdentifierFromName","getVersionInfoExtended","featureService","_removeFeatureService","_findPortal","findServerInfo","owningSystemUrl","getDefault","loaded","restUrl","authMode","user","username","versionManagementServiceUrl","lockType","canEditVersionedData","canCreateVersion","allLayers","allTables","get","constructOnly","prototype","Services","getServices"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/undoredo/support/Services.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{id as i}from\"../../kernel.js\";import r from\"../../core/Collection.js\";import s from\"../../core/Error.js\";import n from\"../../core/Evented.js\";import t from\"../../core/Loadable.js\";import o from\"../../core/Logger.js\";import{getOrCreateMapValue as a}from\"../../core/MapUtils.js\";import d from\"../../core/Promise.js\";import{debounce as c,throwIfAborted as v}from\"../../core/promiseUtils.js\";import l from\"../../core/ReactiveMap.js\";import{watch as p,whenOnce as u}from\"../../core/reactiveUtils.js\";import{normalize as f}from\"../../core/urlUtils.js\";import{property as m}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/RandomLCG.js\";import{subclass as h}from\"../../core/accessorSupport/decorators/subclass.js\";import{UpdatingHandles as g}from\"../../core/support/UpdatingHandles.js\";import{parse as w}from\"../../layers/support/arcgisLayerUrl.js\";import{isSubtypeGroupLayer as y,isFeatureLayer as S}from\"../../layers/support/layerUtils.js\";import I from\"../../portal/Portal.js\";import{hasUserTypeExtension as _}from\"../../portal/support/utils.js\";import b from\"../../rest/featureService/FeatureService.js\";import{ServiceVersionInfo as L}from\"./ServiceVersionInfo.js\";import V from\"../../versionManagement/VersionManagementService.js\";function U(e){return!e||0===e.trim().length}const A=new Map;function T(e){return a(A,e,(()=>{const i=new j({view:e});return e.addHandles({remove(){A.delete(e),i.destroy()}}),i.load().catch((e=>{o.getLogger(\"esri.views.Services\").error(\"Failed to load service metadata\",e)})),i}))}let j=class extends(t.LoadableMixin(d.EsriPromiseMixin(n.EventedAccessor))){constructor(e){super(e),this._updatingHandles=new g,this.items=new r,this.tablesAndLayersLookup=new l,this.additionalLayers=new r,this._debouncedCheckAndUpdateServiceInfos=c((async()=>{const e=[];for(const i of this.items){if(0===i.layersAndTables.length)continue;const r=i.layersAndTables.getItemAt(0);r?.gdbVersion!==i.versionInfo?.versionIdentifier.name&&e.push(i)}0!==e.length&&(await u((()=>!this.updating)),await this._updateVersionInfos(e))})),this._debouncedLayersChanged=c((async()=>{const e=this._detectNewLayersAndTables();0!==e.length&&(await u((()=>!this._updatingHandles.updating)),await this._updatingHandles.addPromise((async()=>{const i=new Set;for(const s of e)if(\"feature\"===s.type||\"subtype-group\"===s.type){if(!s.url)continue;const e=w(s.url).url.path,n=this._findServiceInfo(e);if(n)this.tablesAndLayersLookup.set(s,n),s.isTable?n.tables.push(s):n.layers.push(s);else if(!i.has(e))try{await this._addServiceInfo(e,s)}catch(r){o.getLogger(this).error(`Failed to load feature service: ${e}`,r)}finally{i.add(e)}}})()))})),this._processed=new Set}destroy(){this._set(\"view\",null),this.items.removeAll(),this.tablesAndLayersLookup.clear()}async load(e){return v(e),this.addHandles([p((()=>this._allLayersAndTables),(()=>{this._debouncedLayersChanged().catch((e=>{o.getLogger(this).warn(\"Failed to update service info\",e)}))})),p((()=>this.items.map((e=>e.layersAndTables.map((e=>e.gdbVersion??\"\")).join(\",\")))),(()=>{this.checkAndUpdateServiceInfos().catch((e=>{o.getLogger(this).warn(\"Failed to update service info\",e)}))}))]),this.addResolvingPromise(this._debouncedLayersChanged()),this}get updating(){return\"loading\"===this.loadStatus||this._updatingHandles.updating}checkAndUpdateServiceInfos(){return this._debouncedCheckAndUpdateServiceInfos()}changeVersion(e,i,r){return this._updatingHandles.addPromise((async()=>{await this._changeVersionInternal(e,i,r)})())}createVersion(e){return this._updatingHandles.addPromise((async()=>{const i=e.featureServerUrl,r=this._findServiceInfo(i);if(!r?.versionService)throw new s(\"services:no-version-management-service\");const n=r.hasAdvancedEditingUserTypeExtension,t=r.loggedInServiceUser.toUpperCase(),o=U(e.ownerName)?t:e.ownerName?.trim().toUpperCase();if(o!==t){if(r.featureServiceVersion<=11.1)throw new s(\"services:versioning-api-error\");if(!n)throw new s(\"services:no-advanced-editing-user-type-extension\")}if(\"SDE\"===o?.toUpperCase()&&\"DEFAULT\"===e.versionName.toUpperCase())throw new s(\"services:no-valid-version-name\");{const i=await r.versionService.getVersionInfos();if(i?.find((i=>i.versionIdentifier.name.toUpperCase()===(o+\".\"+e.versionName).toUpperCase()||i.versionIdentifier.name.toUpperCase()===(t+\".\"+e.versionName).toUpperCase())))throw new s(\"services:no-valid-version-name\")}const a=await r.versionService.createVersion({versionName:e.versionName,access:o!==t?\"public\":e.access,description:e.description});if(o!==t){const{guid:i,name:s}=a.versionIdentifier;await r.versionService.alterVersion({guid:i,name:s},{ownerName:o,access:e.access})}e.switchToVersion&&await this._changeVersionInternal(i,a.versionIdentifier.name,a.versionIdentifier.guid),this.emit(\"version-created\",{versionIdentifier:a.versionIdentifier,versionManagementService:r.versionService})})())}deleteVersion(e,i,r){return this._updatingHandles.addPromise((async()=>{const n=this._findServiceInfo(e);if(!n?.versionService)throw new s(\"services:no-version-management-service\");if(n.featureServiceVersion<=11.1)throw new s(\"services:versioning-api-error\");if(!n.hasAdvancedEditingUserTypeExtension)throw new s(\"services:no-advanced-editing-user-type-extension\");const t={name:i,guid:r};await n.versionService.deleteVersion(t)&&(await this._updateVersionInfo(n),this.emit(\"version-deleted\",{versionIdentifier:t,versionManagementService:n.versionService}))})())}startEditing(e){return this._updatingHandles.addPromise((async()=>{const i=this._findServiceInfo(e);if(!i?.versionService)throw new s(\"services:no-version-management-service\");if(!i.hasAdvancedEditingUserTypeExtension)throw new s(\"services:no-advanced-editing-user-type-extension\");const r=i.versionInfo?.versionIdentifier??{name:i.versionService.defaultVersionIdentifier.name,guid:i.versionService.defaultVersionIdentifier.guid};let n=!0;(\"none\"!==i.versionService.getLockType(r)||(n=await i.versionService.startReading(r),n))&&(n=await i.versionService.startEditing(r),i.updateLockType())})())}finishEditing(e,i){return this._updatingHandles.addPromise((async()=>{const r=this._findServiceInfo(e);if(!r?.versionService)throw new s(\"services:no-version-management-service\");if(!r.hasAdvancedEditingUserTypeExtension)throw new s(\"services:no-advanced-editing-user-type-extension\");const n=r.versionInfo?.versionIdentifier??{name:r.versionService.defaultVersionIdentifier.name,guid:r.versionService.defaultVersionIdentifier.guid},t=r.versionService.getLockType(n);if(\"none\"!==t)return\"read\"===t?(await r.versionService.stopReading(n),void r.updateLockType()):\"edit\"===t?(await r.versionService.stopEditing(n,i),await r.versionService.stopReading(n),void r.updateLockType()):void 0})())}async _changeVersionInternal(e,i,r){const n=this._findServiceInfo(e);if(!n?.versionService)throw new s(\"services:no-version-management-service\");const t=n.versionInfo?.versionIdentifier??{name:n.versionService.defaultVersionIdentifier.name,guid:n.versionService.defaultVersionIdentifier.guid},o={name:i,guid:r};await n.versionService.changeVersion(this.view?.map,t,o)&&await this._updateVersionInfo(n)}async _updateVersionInfo(e){const i=e.versionService;if(!i)return;if(0===e.layersAndTables.length)return;const r=e.layersAndTables.getItemAt(0)?.gdbVersion,s=r?await i.getVersionIdentifierFromName(r):i.defaultVersionIdentifier;e.versionInfo=await i.getVersionInfoExtended(s)}_findServiceInfo(e){return this.items.find((i=>i.featureService.url===e))??null}_removeFeatureService(e){this.items.remove(e)}async _findPortal(e){const r=i?.findServerInfo(e??\"\");if(!r?.owningSystemUrl)return null;const s=`${r.owningSystemUrl}/sharing/rest`,n=I.getDefault();if(n?.loaded&&f(n.restUrl)===f(s))return n;return new I({authMode:\"immediate\",url:r.owningSystemUrl}).load()}_updateVersionInfos(e){return this._updatingHandles.addPromise((async()=>{for(const i of e)await this._updateVersionInfo(i).catch((e=>{o.getLogger(this).error(\"Failed to update version details\",e)}))})())}async _addServiceInfo(e,i){const s=new b({url:e});await s.load();const n=await this._findPortal(e),t=n?.user?.username;let o=!1;t&&(o=await _(n,t,\"advediting\"));let a=null;s.versionManagementServiceUrl&&(a=new V({url:s.versionManagementServiceUrl}),await a.load());const d=i.isTable?[]:[i],c=i.isTable?[i]:[],v=new L({loggedInServiceUser:t??\"\",hasAdvancedEditingUserTypeExtension:o,versionInfo:null,lockType:\"none\",canEditVersionedData:!0,canCreateVersion:!0,featureService:s,versionService:a,layers:new r(d),tables:new r(c)});return a&&await this._updateVersionInfo(v),this.items.push(v),this.tablesAndLayersLookup.set(i,v),i.isTable?v.tables.push(i):v.layers.push(i),v}get _allLayersAndTables(){return[...this.view.map.allLayers,...this.view.map.allTables,...this.additionalLayers]}_detectNewLayersAndTables(){const e=new Set(this._allLayersAndTables),i=[];for(const r of e)\"feature\"!==r.type&&\"subtype-group\"!==r.type||this._processed.has(r)||i.push(r);for(const r of this._processed)if(!e.has(r)&&(y(r)||S(r))){const e=this.tablesAndLayersLookup.get(r);if(!e)continue;this.tablesAndLayersLookup.delete(r),r.isTable?e.tables.remove(r):e.layers.remove(r),0===e.layersAndTables.length&&this._removeFeatureService(e)}return this._processed=e,i}};e([m({constructOnly:!0})],j.prototype,\"view\",void 0),e([m()],j.prototype,\"items\",void 0),e([m()],j.prototype,\"tablesAndLayersLookup\",void 0),e([m()],j.prototype,\"additionalLayers\",void 0),e([m()],j.prototype,\"updating\",null),e([m()],j.prototype,\"_allLayersAndTables\",null),j=e([h(\"esri.undoredo.support.Services\")],j);export{j as Services,T as getServices};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}