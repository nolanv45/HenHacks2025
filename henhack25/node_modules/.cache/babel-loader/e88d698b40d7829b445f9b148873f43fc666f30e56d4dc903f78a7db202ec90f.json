{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { addFrameTask as e } from \"../../../core/scheduling.js\";\nimport t from \"./GamepadInputDevice.js\";\nimport { extractState as s, stateIdle as n, stateEqual as i } from \"./GamepadState.js\";\nclass a {\n  constructor(e, t) {\n    this._element = e, this._input = t, this._hasEventListeners = !1, this._onConnectGamepad = e => {\n      this._connectGamepad(e.gamepad);\n    }, this._onDisconnectGamepad = e => {\n      const t = e.gamepad,\n        n = t.index,\n        i = this._inputDevices[n];\n      i && (this._emitGamepadEvent(t, s(i), !1), this._inputDevices.splice(n, 1), this._latestUpdate.splice(n, 1), this._input.gamepad.devices.remove(i), this.ensurePollingState());\n    }, this._frameTask = null, this._latestUpdate = new Array(), this._inputDevices = new Array(), this._callback = null;\n    const n = \"getGamepads\" in window.navigator,\n      i = window.isSecureContext;\n    this.supported = n && i, this.supported && (d(e => this._connectGamepad(e)), window.addEventListener(\"gamepadconnected\", this._onConnectGamepad), window.addEventListener(\"gamepaddisconnected\", this._onDisconnectGamepad), this.ensurePollingState());\n  }\n  destroy() {\n    this.hasEventListeners = !1, this.supported && (window.removeEventListener(\"gamepadconnected\", this._onConnectGamepad), window.removeEventListener(\"gamepaddisconnected\", this._onDisconnectGamepad));\n  }\n  set hasEventListeners(e) {\n    this._hasEventListeners !== e && (this._hasEventListeners = e, this.ensurePollingState());\n  }\n  get _eventsEnabled() {\n    return this.supported && this._inputDevices.length > 0 && this._hasEventListeners;\n  }\n  set onEvent(e) {\n    this._callback = e;\n  }\n  _connectGamepad(e) {\n    const s = new t(e);\n    \"unknown\" !== s.deviceType && (this._inputDevices[e.index] = s, this._input.gamepad.devices.add(s)), this.ensurePollingState();\n  }\n  ensurePollingState() {\n    this._eventsEnabled ? this._startPolling() : this._stopPolling();\n  }\n  _startPolling() {\n    null == this._frameTask && (this._frameTask = e({\n      update: () => this._readGamepadState()\n    }));\n  }\n  _stopPolling() {\n    null != this._frameTask && (this._frameTask.remove(), this._frameTask = null, this._latestUpdate = new Array());\n  }\n  _readGamepadState() {\n    const e = document.hasFocus(),\n      t = this._element.contains(document.activeElement),\n      a = \"document\" === this._input.gamepad.enabledFocusMode && !e || \"view\" === this._input.gamepad.enabledFocusMode && !t;\n    d(e => {\n      const t = this._inputDevices[e.index];\n      if (!t) return;\n      const o = this._latestUpdate[e.index],\n        d = s(t),\n        c = a || n(d);\n      if (o) {\n        if (o.timestamp === e.timestamp) return;\n        if (!o.active && c) return;\n        if (i(o.state, d)) return;\n      }\n      this._emitGamepadEvent(e, d, !c);\n    });\n  }\n  _emitGamepadEvent(e, t, s) {\n    const n = this._latestUpdate[e.index],\n      i = n && n.active;\n    if (!i && !s) return;\n    const a = !i && s ? \"start\" : i && s ? \"update\" : \"end\";\n    this._latestUpdate[e.index] = {\n      timestamp: e.timestamp,\n      state: t,\n      active: s\n    }, this._callback && this._callback({\n      device: this._inputDevices[e.index],\n      state: t,\n      action: a\n    });\n  }\n}\nfunction o(e) {\n  if (!e) return !1;\n  if (!e.connected) return !1;\n  for (let t = 0; t < e.axes.length; t++) if (isNaN(e.axes[t])) return !1;\n  return !0;\n}\nfunction d(e) {\n  for (const t of navigator.getGamepads()) o(t) && e(t);\n}\nexport { a as GamepadSource };","map":{"version":3,"names":["addFrameTask","e","t","extractState","s","stateIdle","n","stateEqual","i","a","constructor","_element","_input","_hasEventListeners","_onConnectGamepad","_connectGamepad","gamepad","_onDisconnectGamepad","index","_inputDevices","_emitGamepadEvent","splice","_latestUpdate","devices","remove","ensurePollingState","_frameTask","Array","_callback","window","navigator","isSecureContext","supported","d","addEventListener","destroy","hasEventListeners","removeEventListener","_eventsEnabled","length","onEvent","deviceType","add","_startPolling","_stopPolling","update","_readGamepadState","document","hasFocus","contains","activeElement","enabledFocusMode","o","c","timestamp","active","state","device","action","connected","axes","isNaN","getGamepads","GamepadSource"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/input/gamepad/GamepadSource.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{addFrameTask as e}from\"../../../core/scheduling.js\";import t from\"./GamepadInputDevice.js\";import{extractState as s,stateIdle as n,stateEqual as i}from\"./GamepadState.js\";class a{constructor(e,t){this._element=e,this._input=t,this._hasEventListeners=!1,this._onConnectGamepad=e=>{this._connectGamepad(e.gamepad)},this._onDisconnectGamepad=e=>{const t=e.gamepad,n=t.index,i=this._inputDevices[n];i&&(this._emitGamepadEvent(t,s(i),!1),this._inputDevices.splice(n,1),this._latestUpdate.splice(n,1),this._input.gamepad.devices.remove(i),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const n=\"getGamepads\"in window.navigator,i=window.isSecureContext;this.supported=n&&i,this.supported&&(d((e=>this._connectGamepad(e))),window.addEventListener(\"gamepadconnected\",this._onConnectGamepad),window.addEventListener(\"gamepaddisconnected\",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener(\"gamepadconnected\",this._onConnectGamepad),window.removeEventListener(\"gamepaddisconnected\",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const s=new t(e);\"unknown\"!==s.deviceType&&(this._inputDevices[e.index]=s,this._input.gamepad.devices.add(s)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){null==this._frameTask&&(this._frameTask=e({update:()=>this._readGamepadState()}))}_stopPolling(){null!=this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),t=this._element.contains(document.activeElement),a=\"document\"===this._input.gamepad.enabledFocusMode&&!e||\"view\"===this._input.gamepad.enabledFocusMode&&!t;d((e=>{const t=this._inputDevices[e.index];if(!t)return;const o=this._latestUpdate[e.index],d=s(t),c=a||n(d);if(o){if(o.timestamp===e.timestamp)return;if(!o.active&&c)return;if(i(o.state,d))return}this._emitGamepadEvent(e,d,!c)}))}_emitGamepadEvent(e,t,s){const n=this._latestUpdate[e.index],i=n&&n.active;if(!i&&!s)return;const a=!i&&s?\"start\":i&&s?\"update\":\"end\";this._latestUpdate[e.index]={timestamp:e.timestamp,state:t,active:s},this._callback&&this._callback({device:this._inputDevices[e.index],state:t,action:a})}}function o(e){if(!e)return!1;if(!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}function d(e){for(const t of navigator.getGamepads())o(t)&&e(t)}export{a as GamepadSource};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}