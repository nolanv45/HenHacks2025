{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from \"../../core/Error.js\";\nimport { clone as t } from \"../../core/lang.js\";\nimport { getDeepValue as n } from \"../../core/object.js\";\nimport { numberToJSON as r } from \"../../core/accessorSupport/extensions/serializableProperty/writer.js\";\nimport { isFeatureCollectionLayer as i } from \"../../layers/support/layerUtils.js\";\nconst o = new Set([\"bing-maps\", \"imagery\", \"imagery-tile\", \"map-image\", \"open-street-map\", \"tile\", \"unknown\", \"unsupported\", \"vector-tile\", \"web-tile\", \"wcs\", \"wms\", \"wmts\"]),\n  l = new Set([\"catalog\", \"csv\", \"feature\", \"geo-rss\", \"geojson\", \"group\", \"imagery\", \"imagery-tile\", \"kml\", \"knowledge-graph\", \"map-image\", \"map-notes\", \"media\", \"ogc-feature\", \"oriented-imagery\", \"route\", \"stream\", \"subtype-group\", \"tile\", \"unknown\", \"unsupported\", \"vector-tile\", \"web-tile\", \"wcs\", \"wfs\", \"wms\", \"wmts\"]),\n  a = new Set([...l, \"link-chart\"]);\nfunction s(e) {\n  o.delete(e), l.delete(e);\n}\nfunction c(e) {\n  o.add(e), l.add(e);\n}\nfunction u(e) {\n  switch (e.layerContainerType) {\n    case \"basemap\":\n      return o;\n    case \"operational-layers\":\n      return \"link-chart\" === e.origin ? a : l;\n    default:\n      return null;\n  }\n}\nfunction d(e, t) {\n  if (t.restrictedWebMapWriting) {\n    const n = u(t);\n    return null == n || n.has(e.type) && !i(e);\n  }\n  return !0;\n}\nfunction p(e, t) {\n  if (t) if (i(e)) {\n    const r = n(\"featureCollection.layers\", t),\n      i = r?.[0]?.layerDefinition;\n    i && m(e, i);\n  } else \"group\" !== e.type && m(e, t);\n}\nfunction m(e, t) {\n  \"maxScale\" in e && (t.maxScale = r(e.maxScale) ?? void 0), \"minScale\" in e && (t.minScale = r(e.minScale) ?? void 0);\n}\nfunction f(e, t) {\n  if (p(e, t), t && (t.id = e.id, \"blendMode\" in e && (t.blendMode = e.blendMode, \"normal\" === t.blendMode && delete t.blendMode), t.opacity = r(e.opacity) ?? void 0, t.title = e.title || \"Layer\", t.visibility = e.visible, \"legendEnabled\" in e && \"wmts\" !== e.type)) if (i(e)) {\n    const n = t.featureCollection;\n    n && (n.showLegend = e.legendEnabled);\n  } else t.showLegend = e.legendEnabled;\n}\nfunction g(n, r, o) {\n  if (!n.persistenceEnabled) return null;\n  if (!(\"write\" in n) || !n.write) return o?.messages && o.messages.push(new e(\"layer:unsupported\", `Layers (${n.title}, ${n.id}) of type '${n.declaredClass}' cannot be persisted`, {\n    layer: n\n  })), null;\n  if (i(n) && !n.isTable) r = n.resourceInfo;else if (d(n, o)) {\n    const e = {};\n    return n.write(e, o) ? e : null;\n  }\n  return null != r && f(n, r = t(r)), r;\n}\nexport { c as disableRestrictedWriting, s as enableRestrictedWriting, g as getLayerJSON };","map":{"version":3,"names":["e","clone","t","getDeepValue","n","numberToJSON","r","isFeatureCollectionLayer","i","o","Set","l","a","s","delete","c","add","u","layerContainerType","origin","d","restrictedWebMapWriting","has","type","p","layerDefinition","m","maxScale","minScale","f","id","blendMode","opacity","title","visibility","visible","featureCollection","showLegend","legendEnabled","g","persistenceEnabled","write","messages","push","declaredClass","layer","isTable","resourceInfo","disableRestrictedWriting","enableRestrictedWriting","getLayerJSON"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/webdoc/support/writeUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{clone as t}from\"../../core/lang.js\";import{getDeepValue as n}from\"../../core/object.js\";import{numberToJSON as r}from\"../../core/accessorSupport/extensions/serializableProperty/writer.js\";import{isFeatureCollectionLayer as i}from\"../../layers/support/layerUtils.js\";const o=new Set([\"bing-maps\",\"imagery\",\"imagery-tile\",\"map-image\",\"open-street-map\",\"tile\",\"unknown\",\"unsupported\",\"vector-tile\",\"web-tile\",\"wcs\",\"wms\",\"wmts\"]),l=new Set([\"catalog\",\"csv\",\"feature\",\"geo-rss\",\"geojson\",\"group\",\"imagery\",\"imagery-tile\",\"kml\",\"knowledge-graph\",\"map-image\",\"map-notes\",\"media\",\"ogc-feature\",\"oriented-imagery\",\"route\",\"stream\",\"subtype-group\",\"tile\",\"unknown\",\"unsupported\",\"vector-tile\",\"web-tile\",\"wcs\",\"wfs\",\"wms\",\"wmts\"]),a=new Set([...l,\"link-chart\"]);function s(e){o.delete(e),l.delete(e)}function c(e){o.add(e),l.add(e)}function u(e){switch(e.layerContainerType){case\"basemap\":return o;case\"operational-layers\":return\"link-chart\"===e.origin?a:l;default:return null}}function d(e,t){if(t.restrictedWebMapWriting){const n=u(t);return null==n||n.has(e.type)&&!i(e)}return!0}function p(e,t){if(t)if(i(e)){const r=n(\"featureCollection.layers\",t),i=r?.[0]?.layerDefinition;i&&m(e,i)}else\"group\"!==e.type&&m(e,t)}function m(e,t){\"maxScale\"in e&&(t.maxScale=r(e.maxScale)??void 0),\"minScale\"in e&&(t.minScale=r(e.minScale)??void 0)}function f(e,t){if(p(e,t),t&&(t.id=e.id,\"blendMode\"in e&&(t.blendMode=e.blendMode,\"normal\"===t.blendMode&&delete t.blendMode),t.opacity=r(e.opacity)??void 0,t.title=e.title||\"Layer\",t.visibility=e.visible,\"legendEnabled\"in e&&\"wmts\"!==e.type))if(i(e)){const n=t.featureCollection;n&&(n.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function g(n,r,o){if(!n.persistenceEnabled)return null;if(!(\"write\"in n)||!n.write)return o?.messages&&o.messages.push(new e(\"layer:unsupported\",`Layers (${n.title}, ${n.id}) of type '${n.declaredClass}' cannot be persisted`,{layer:n})),null;if(i(n)&&!n.isTable)r=n.resourceInfo;else if(d(n,o)){const e={};return n.write(e,o)?e:null}return null!=r&&f(n,r=t(r)),r}export{c as disableRestrictedWriting,s as enableRestrictedWriting,g as getLayerJSON};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}