{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from \"../../request.js\";\nimport t from \"../../core/Error.js\";\nimport { join as r, getPathExtension as s } from \"../../core/urlUtils.js\";\nasync function o(e) {\n  let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let s = arguments.length > 2 ? arguments[2] : undefined;\n  await e.load(s);\n  const o = r(e.itemUrl, \"resources\"),\n    {\n      start: a = 1,\n      num: n = 10,\n      sortOrder: c = \"asc\",\n      sortField: l = \"resource\"\n    } = t,\n    i = {\n      query: {\n        start: a,\n        num: n,\n        sortOrder: c,\n        sortField: l,\n        token: e.apiKey\n      },\n      signal: s?.signal\n    },\n    u = await e.portal.request(o, i);\n  return {\n    total: u.total,\n    nextStart: u.nextStart,\n    resources: u.resources.map(_ref => {\n      let {\n        created: t,\n        size: r,\n        resource: s\n      } = _ref;\n      return {\n        created: new Date(t),\n        size: r,\n        resource: e.resourceFromPath(s)\n      };\n    })\n  };\n}\nasync function a(e, s, o, a) {\n  const n = new Map();\n  for (const {\n    resource: r,\n    content: i,\n    compress: u,\n    access: p\n  } of s) {\n    if (!r.hasPath()) throw new t(`portal-item-resource-${o}:invalid-path`, \"Resource does not have a valid path\");\n    const [e, s] = l(r.path),\n      a = `${e}/${u ?? \"\"}/${p ?? \"\"}`;\n    n.has(a) || n.set(a, {\n      prefix: e,\n      compress: u,\n      access: p,\n      files: []\n    });\n    n.get(a).files.push({\n      fileName: s,\n      content: i\n    });\n  }\n  await e.load(a);\n  const c = r(e.userItemUrl, \"add\" === o ? \"addResources\" : \"updateResources\");\n  for (const {\n    prefix: t,\n    compress: r,\n    access: l,\n    files: i\n  } of n.values()) {\n    const s = 25;\n    for (let o = 0; o < i.length; o += s) {\n      const n = i.slice(o, o + s),\n        u = new FormData();\n      t && \".\" !== t && u.append(\"resourcesPrefix\", t), r && u.append(\"compress\", \"true\"), l && u.append(\"access\", l);\n      let p = 0;\n      for (const {\n        fileName: e,\n        content: t\n      } of n) u.append(\"file\" + ++p, t, e);\n      u.append(\"f\", \"json\"), await e.portal.request(c, {\n        method: \"post\",\n        body: u,\n        signal: a?.signal\n      });\n    }\n  }\n}\nasync function n(e, s, o) {\n  if (!s.hasPath()) throw new t(\"portal-item-resources-remove:invalid-path\", \"Resource does not have a valid path\");\n  await e.load(o);\n  const a = r(e.userItemUrl, \"removeResources\");\n  await e.portal.request(a, {\n    method: \"post\",\n    query: {\n      resource: s.path\n    },\n    signal: o?.signal\n  }), s.portalItem = null;\n}\nasync function c(e, t) {\n  await e.load(t);\n  const s = r(e.userItemUrl, \"removeResources\");\n  return e.portal.request(s, {\n    method: \"post\",\n    query: {\n      deleteAll: !0\n    },\n    signal: t?.signal\n  });\n}\nfunction l(e) {\n  const t = e.lastIndexOf(\"/\");\n  return -1 === t ? [\".\", e] : [e.slice(0, t), e.slice(t + 1)];\n}\nfunction i(e) {\n  const [t, r] = u(e),\n    [s, o] = l(t);\n  return [s, o, r];\n}\nfunction u(e) {\n  const t = s(e);\n  return null == t ? [e, \"\"] : [e.slice(0, e.length - t.length - 1), `.${t}`];\n}\nasync function p(t) {\n  if (\"blob\" === t.type) return t.blob;\n  if (\"json\" === t.type) return new Blob([t.jsonString], {\n    type: \"application/json\"\n  });\n  return (await e(t.url, {\n    responseType: \"blob\"\n  })).data;\n}\nfunction f(e, t) {\n  if (!e.hasPath()) return null;\n  const [s,, o] = i(e.path);\n  return e.portalItem.resourceFromPath(r(s, t + o));\n}\nfunction m(e, t) {\n  if (!e.hasPath()) return null;\n  const [s,, o] = i(e.path);\n  return e.portalItem.resourceFromPath(r(s, t + o));\n}\nexport { a as addOrUpdateResources, p as contentToBlob, o as fetchResources, f as getSiblingOfSameType, m as getSiblingOfSameTypeI, c as removeAllResources, n as removeResource, i as splitPrefixFileNameAndExtension };","map":{"version":3,"names":["e","t","join","r","getPathExtension","s","o","arguments","length","undefined","load","itemUrl","start","a","num","n","sortOrder","c","sortField","l","i","query","token","apiKey","signal","u","portal","request","total","nextStart","resources","map","_ref","created","size","resource","Date","resourceFromPath","Map","content","compress","access","p","hasPath","path","has","set","prefix","files","get","push","fileName","userItemUrl","values","slice","FormData","append","method","body","portalItem","deleteAll","lastIndexOf","type","blob","Blob","jsonString","url","responseType","data","f","m","addOrUpdateResources","contentToBlob","fetchResources","getSiblingOfSameType","getSiblingOfSameTypeI","removeAllResources","removeResource","splitPrefixFileNameAndExtension"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/portal/support/resourceUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import t from\"../../core/Error.js\";import{join as r,getPathExtension as s}from\"../../core/urlUtils.js\";async function o(e,t={},s){await e.load(s);const o=r(e.itemUrl,\"resources\"),{start:a=1,num:n=10,sortOrder:c=\"asc\",sortField:l=\"resource\"}=t,i={query:{start:a,num:n,sortOrder:c,sortField:l,token:e.apiKey},signal:s?.signal},u=await e.portal.request(o,i);return{total:u.total,nextStart:u.nextStart,resources:u.resources.map((({created:t,size:r,resource:s})=>({created:new Date(t),size:r,resource:e.resourceFromPath(s)})))}}async function a(e,s,o,a){const n=new Map;for(const{resource:r,content:i,compress:u,access:p}of s){if(!r.hasPath())throw new t(`portal-item-resource-${o}:invalid-path`,\"Resource does not have a valid path\");const[e,s]=l(r.path),a=`${e}/${u??\"\"}/${p??\"\"}`;n.has(a)||n.set(a,{prefix:e,compress:u,access:p,files:[]});n.get(a).files.push({fileName:s,content:i})}await e.load(a);const c=r(e.userItemUrl,\"add\"===o?\"addResources\":\"updateResources\");for(const{prefix:t,compress:r,access:l,files:i}of n.values()){const s=25;for(let o=0;o<i.length;o+=s){const n=i.slice(o,o+s),u=new FormData;t&&\".\"!==t&&u.append(\"resourcesPrefix\",t),r&&u.append(\"compress\",\"true\"),l&&u.append(\"access\",l);let p=0;for(const{fileName:e,content:t}of n)u.append(\"file\"+ ++p,t,e);u.append(\"f\",\"json\"),await e.portal.request(c,{method:\"post\",body:u,signal:a?.signal})}}}async function n(e,s,o){if(!s.hasPath())throw new t(\"portal-item-resources-remove:invalid-path\",\"Resource does not have a valid path\");await e.load(o);const a=r(e.userItemUrl,\"removeResources\");await e.portal.request(a,{method:\"post\",query:{resource:s.path},signal:o?.signal}),s.portalItem=null}async function c(e,t){await e.load(t);const s=r(e.userItemUrl,\"removeResources\");return e.portal.request(s,{method:\"post\",query:{deleteAll:!0},signal:t?.signal})}function l(e){const t=e.lastIndexOf(\"/\");return-1===t?[\".\",e]:[e.slice(0,t),e.slice(t+1)]}function i(e){const[t,r]=u(e),[s,o]=l(t);return[s,o,r]}function u(e){const t=s(e);return null==t?[e,\"\"]:[e.slice(0,e.length-t.length-1),`.${t}`]}async function p(t){if(\"blob\"===t.type)return t.blob;if(\"json\"===t.type)return new Blob([t.jsonString],{type:\"application/json\"});return(await e(t.url,{responseType:\"blob\"})).data}function f(e,t){if(!e.hasPath())return null;const[s,,o]=i(e.path);return e.portalItem.resourceFromPath(r(s,t+o))}function m(e,t){if(!e.hasPath())return null;const[s,,o]=i(e.path);return e.portalItem.resourceFromPath(r(s,t+o))}export{a as addOrUpdateResources,p as contentToBlob,o as fetchResources,f as getSiblingOfSameType,m as getSiblingOfSameTypeI,c as removeAllResources,n as removeResource,i as splitPrefixFileNameAndExtension};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}