{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport has from \"../../../../../core/has.js\";\nimport { clone as e } from \"../../../../../core/lang.js\";\nimport { isHostedAgolService as t } from \"../../../../../layers/support/arcgisLayerUrl.js\";\nimport { getEffectiveFeatureReduction as r } from \"./featureReductionUtils.js\";\nimport { exceedsMinimumSnapshotCoverage as o } from \"./featureServiceUtils.js\";\nimport { addFloorFilter as s, hasFloorFilter as i } from \"./floorFilterUtils.js\";\nimport { getServiceGeometryType as a } from \"./geometryUtils.js\";\nimport { getFeatureReductionDeconflictionEnabled as l, getLayerDeconflictionEnabled as n, createLabelVVEvaluator as p } from \"./labelingUtils.js\";\nimport { createFeatureSourceSchema as u } from \"../schema/SourceSchema.js\";\nimport { createSimpleProcessorSchema as d } from \"../schema/processor/SimpleProcessorSchema.js\";\nimport { isRendererSupported as c } from \"../support/rendererUtils.js\";\nclass m {\n  constructor(e) {\n    this.layer = e;\n  }\n  getLabelingDeconflictionInfo(e) {\n    const t = this.layer,\n      r = l(t, e) ?? n(t);\n    return [{\n      vvEvaluators: {\n        0: p(t.renderer)\n      },\n      deconflictionEnabled: r\n    }];\n  }\n  async createServiceOptions(r) {\n    const s = this.layer,\n      {\n        capabilities: i,\n        objectIdField: l,\n        globalIdField: n,\n        orderBy: p,\n        refreshInterval: u\n      } = s,\n      d = s.fieldsIndex.toJSON(),\n      c = a(s),\n      m = s.timeInfo?.toJSON(),\n      y = s.spatialReference.toJSON(),\n      f = e(this.layer.parsedUrl);\n    let h = this.layer.objectIdField;\n    if (p?.length) {\n      const e = !p[0].valueExpression && p[0].field;\n      e && (h = e);\n    }\n    const b = u > 0,\n      F = !!has(\"featurelayer-snapshot-enabled\") && \"point\" === s.geometryType && i?.query.supportsPagination && !i?.operations.supportsEditing && !b,\n      S = F && o(r, s.fullExtent),\n      g = t(f.path),\n      I = r.spatialReference.toJSON();\n    return {\n      type: \"feature-service\",\n      source: f,\n      isSourceHosted: g,\n      orderByFields: h,\n      outSpatialReference: I,\n      metadata: {\n        globalIdField: n,\n        fieldsIndex: d,\n        geometryType: c,\n        objectIdField: l,\n        timeInfo: m,\n        spatialReference: y,\n        outSpatialReference: I,\n        timeReferenceUnknownClient: s.datesInUnknownTimezone,\n        dateFieldsTimeZone: s.dateFieldsTimeZone,\n        subtypeField: null,\n        subtypes: null,\n        typeIdField: null,\n        types: null\n      },\n      queryMetadata: {\n        maxRecordCount: i.query.maxRecordCount,\n        supportsCompactGeometry: i.query.supportsCompactGeometry,\n        supportsDefaultSpatialReference: i.query.supportsDefaultSpatialReference,\n        supportsFormatPBF: i.query.supportsFormatPBF,\n        supportsMaxRecordCountFactor: i.query.supportsMaxRecordCountFactor,\n        supportsQuantization: i.query.supportsQuantization,\n        lastEditDate: null,\n        snapshotInfo: {\n          supportsSnapshotMinThreshold: F,\n          supportsSnapshotMaxThreshold: S,\n          snapshotCountThresholds: {\n            min: has(\"featurelayer-snapshot-point-min-threshold\"),\n            max: has(\"featurelayer-snapshot-point-max-threshold\")\n          }\n        }\n      }\n    };\n  }\n  createSourceSchema(e, t) {\n    const {\n      definitionExpression: r,\n      displayFilterInfo: o,\n      customParameters: s,\n      timeExtent: i\n    } = this.layer;\n    return u({\n      definitionExpression: r,\n      displayFilterInfo: o,\n      customParameters: s,\n      timeExtent: i\n    }, e, t, null);\n  }\n  createProcessorSchema(e, t, o) {\n    const {\n        fields: s,\n        renderer: i,\n        geometryType: a,\n        labelingInfo: l,\n        labelsVisible: n,\n        orderBy: p,\n        objectIdField: u\n      } = this.layer,\n      c = {\n        fields: s.map(e => e.toJSON()),\n        renderer: i?.clone(),\n        featureReduction: r(this.layer, t),\n        geometryType: a,\n        labelingInfo: l,\n        labelsVisible: n,\n        objectIdField: u,\n        orderBy: p ?? \"default\"\n      };\n    return d(e, t, c, o);\n  }\n  get hasRequiredSupport() {\n    return c(this.layer.renderer);\n  }\n  get timeOptions() {\n    return this.layer;\n  }\n  addFilters(e, t) {\n    return s(this.layer, e, t);\n  }\n  getUpdateHashProperties(e) {\n    return [() => this.layer.outFields, () => this.layer.orderBy, () => this.layer.definitionExpression, () => this.layer.renderer, () => this.layer.labelsVisible ? this.layer.labelingInfo : null, () => r(this.layer, e), () => this.layer.customParameters, () => i(this.layer, e) ? e.floors : null];\n  }\n}\nexport { m as OrientedImageryLayerAdapter };","map":{"version":3,"names":["has","clone","e","isHostedAgolService","t","getEffectiveFeatureReduction","r","exceedsMinimumSnapshotCoverage","o","addFloorFilter","s","hasFloorFilter","i","getServiceGeometryType","a","getFeatureReductionDeconflictionEnabled","l","getLayerDeconflictionEnabled","n","createLabelVVEvaluator","p","createFeatureSourceSchema","u","createSimpleProcessorSchema","d","isRendererSupported","c","m","constructor","layer","getLabelingDeconflictionInfo","vvEvaluators","renderer","deconflictionEnabled","createServiceOptions","capabilities","objectIdField","globalIdField","orderBy","refreshInterval","fieldsIndex","toJSON","timeInfo","y","spatialReference","f","parsedUrl","h","length","valueExpression","field","b","F","geometryType","query","supportsPagination","operations","supportsEditing","S","fullExtent","g","path","I","type","source","isSourceHosted","orderByFields","outSpatialReference","metadata","timeReferenceUnknownClient","datesInUnknownTimezone","dateFieldsTimeZone","subtypeField","subtypes","typeIdField","types","queryMetadata","maxRecordCount","supportsCompactGeometry","supportsDefaultSpatialReference","supportsFormatPBF","supportsMaxRecordCountFactor","supportsQuantization","lastEditDate","snapshotInfo","supportsSnapshotMinThreshold","supportsSnapshotMaxThreshold","snapshotCountThresholds","min","max","createSourceSchema","definitionExpression","displayFilterInfo","customParameters","timeExtent","createProcessorSchema","fields","labelingInfo","labelsVisible","map","featureReduction","hasRequiredSupport","timeOptions","addFilters","getUpdateHashProperties","outFields","floors","OrientedImageryLayerAdapter"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/OrientedImageryLayerAdapter.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport has from\"../../../../../core/has.js\";import{clone as e}from\"../../../../../core/lang.js\";import{isHostedAgolService as t}from\"../../../../../layers/support/arcgisLayerUrl.js\";import{getEffectiveFeatureReduction as r}from\"./featureReductionUtils.js\";import{exceedsMinimumSnapshotCoverage as o}from\"./featureServiceUtils.js\";import{addFloorFilter as s,hasFloorFilter as i}from\"./floorFilterUtils.js\";import{getServiceGeometryType as a}from\"./geometryUtils.js\";import{getFeatureReductionDeconflictionEnabled as l,getLayerDeconflictionEnabled as n,createLabelVVEvaluator as p}from\"./labelingUtils.js\";import{createFeatureSourceSchema as u}from\"../schema/SourceSchema.js\";import{createSimpleProcessorSchema as d}from\"../schema/processor/SimpleProcessorSchema.js\";import{isRendererSupported as c}from\"../support/rendererUtils.js\";class m{constructor(e){this.layer=e}getLabelingDeconflictionInfo(e){const t=this.layer,r=l(t,e)??n(t);return[{vvEvaluators:{0:p(t.renderer)},deconflictionEnabled:r}]}async createServiceOptions(r){const s=this.layer,{capabilities:i,objectIdField:l,globalIdField:n,orderBy:p,refreshInterval:u}=s,d=s.fieldsIndex.toJSON(),c=a(s),m=s.timeInfo?.toJSON(),y=s.spatialReference.toJSON(),f=e(this.layer.parsedUrl);let h=this.layer.objectIdField;if(p?.length){const e=!p[0].valueExpression&&p[0].field;e&&(h=e)}const b=u>0,F=!!has(\"featurelayer-snapshot-enabled\")&&\"point\"===s.geometryType&&i?.query.supportsPagination&&!i?.operations.supportsEditing&&!b,S=F&&o(r,s.fullExtent),g=t(f.path),I=r.spatialReference.toJSON();return{type:\"feature-service\",source:f,isSourceHosted:g,orderByFields:h,outSpatialReference:I,metadata:{globalIdField:n,fieldsIndex:d,geometryType:c,objectIdField:l,timeInfo:m,spatialReference:y,outSpatialReference:I,timeReferenceUnknownClient:s.datesInUnknownTimezone,dateFieldsTimeZone:s.dateFieldsTimeZone,subtypeField:null,subtypes:null,typeIdField:null,types:null},queryMetadata:{maxRecordCount:i.query.maxRecordCount,supportsCompactGeometry:i.query.supportsCompactGeometry,supportsDefaultSpatialReference:i.query.supportsDefaultSpatialReference,supportsFormatPBF:i.query.supportsFormatPBF,supportsMaxRecordCountFactor:i.query.supportsMaxRecordCountFactor,supportsQuantization:i.query.supportsQuantization,lastEditDate:null,snapshotInfo:{supportsSnapshotMinThreshold:F,supportsSnapshotMaxThreshold:S,snapshotCountThresholds:{min:has(\"featurelayer-snapshot-point-min-threshold\"),max:has(\"featurelayer-snapshot-point-max-threshold\")}}}}}createSourceSchema(e,t){const{definitionExpression:r,displayFilterInfo:o,customParameters:s,timeExtent:i}=this.layer;return u({definitionExpression:r,displayFilterInfo:o,customParameters:s,timeExtent:i},e,t,null)}createProcessorSchema(e,t,o){const{fields:s,renderer:i,geometryType:a,labelingInfo:l,labelsVisible:n,orderBy:p,objectIdField:u}=this.layer,c={fields:s.map((e=>e.toJSON())),renderer:i?.clone(),featureReduction:r(this.layer,t),geometryType:a,labelingInfo:l,labelsVisible:n,objectIdField:u,orderBy:p??\"default\"};return d(e,t,c,o)}get hasRequiredSupport(){return c(this.layer.renderer)}get timeOptions(){return this.layer}addFilters(e,t){return s(this.layer,e,t)}getUpdateHashProperties(e){return[()=>this.layer.outFields,()=>this.layer.orderBy,()=>this.layer.definitionExpression,()=>this.layer.renderer,()=>this.layer.labelsVisible?this.layer.labelingInfo:null,()=>r(this.layer,e),()=>this.layer.customParameters,()=>i(this.layer,e)?e.floors:null]}}export{m as OrientedImageryLayerAdapter};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}