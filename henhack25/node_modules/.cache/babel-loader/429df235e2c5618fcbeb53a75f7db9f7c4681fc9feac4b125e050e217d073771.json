{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from \"../../../../../core/Error.js\";\nimport t from \"../../../../../layers/support/FieldsIndex.js\";\nimport { parseField as s, parseTransform as r } from \"../../../../../rest/query/operations/pbfFeatureServiceParser.js\";\nconst n = 268435455;\nclass o {\n  constructor() {\n    this.hasFeatures = !1, this.exceededTransferLimit = !1, this.fieldCount = 0, this.featureCount = 0, this.objectIdFieldIndex = 0, this.vertexCount = 0, this.offsets = {\n      attributes: new Array(),\n      geometry: new Array()\n    }, this.centroid = new Array();\n  }\n}\nfunction a(a, i) {\n  let c = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;\n  const f = 1,\n    d = 3,\n    u = 9,\n    g = 12,\n    l = 13,\n    p = 15,\n    h = a.asUnsafe(),\n    b = h.pos(),\n    w = new o();\n  let m = 0,\n    y = 0;\n  const k = 1,\n    x = 2,\n    I = 4,\n    L = 3;\n  let A = null,\n    F = null,\n    C = null,\n    S = !1;\n  const j = [];\n  for (; h.next();) switch (h.tag()) {\n    case f:\n      A = h.getString();\n      break;\n    case d:\n      F = h.getString();\n      break;\n    case g:\n      C = h.processMessage(r);\n      break;\n    case u:\n      if (w.exceededTransferLimit = h.getBool(), w.exceededTransferLimit) {\n        w.offsets.geometry = c ? new Float64Array(8e3) : new Int32Array(8e3), w.centroid = c ? new Float64Array(16e3) : new Int32Array(16e3);\n        for (let e = 0; e < w.centroid.length; e++) w.centroid[e] = n;\n      }\n      break;\n    case l:\n      {\n        const e = h.processMessage(s);\n        e.index = m++, j.push(e);\n        break;\n      }\n    case p:\n      {\n        const e = h.getLength(),\n          t = h.pos() + e;\n        if (!w.exceededTransferLimit) {\n          const e = w.offsets.geometry,\n            t = w.centroid;\n          e.push(0), t.push(n), t.push(n);\n        }\n        !S && w.exceededTransferLimit && (S = !0, w.offsets.attributes = c ? new Float64Array(8e3 * m) : new Uint32Array(8e3 * m));\n        let s = y * m;\n        for (; h.pos() < t && h.next();) switch (h.tag()) {\n          case k:\n            {\n              if (S) w.offsets.attributes[s++] = h.pos();else {\n                w.offsets.attributes.push(h.pos());\n              }\n              const e = h.getLength();\n              h.skipLen(e);\n              break;\n            }\n          case x:\n            if (i) {\n              const e = h.getLength(),\n                t = h.pos() + e;\n              for (; h.pos() < t && h.next();) switch (h.tag()) {\n                case L:\n                  {\n                    h.getUInt32();\n                    const e = h.getSInt64(),\n                      t = h.getSInt64();\n                    w.centroid[2 * y] = e, w.centroid[2 * y + 1] = t;\n                    break;\n                  }\n                default:\n                  h.skip();\n              }\n            } else {\n              w.offsets.geometry[y] = h.pos();\n              const e = h.getLength();\n              w.vertexCount += e, h.skipLen(e);\n            }\n            break;\n          case I:\n            {\n              const e = h.getLength(),\n                t = h.pos() + e;\n              for (; h.pos() < t && h.next();) switch (h.tag()) {\n                case L:\n                  {\n                    h.getUInt32();\n                    const e = h.getSInt64(),\n                      t = h.getSInt64();\n                    w.centroid[2 * y] = e, w.centroid[2 * y + 1] = t;\n                    break;\n                  }\n                default:\n                  h.skip();\n              }\n              break;\n            }\n          default:\n            h.skip();\n        }\n        y++, w.hasFeatures = !0;\n        break;\n      }\n    default:\n      h.skip();\n  }\n  const U = A || F;\n  if (!U) throw new e(\"FeatureSet has no objectId or globalId field name\");\n  return w.fields = new t(j), w.featureCount = y, w.fieldCount = m, w.objectIdFieldIndex = w.fields.get(U)?.index, w.transform = C, w.displayIds = new Uint32Array(w.featureCount), w.groupIds = new Uint16Array(w.featureCount), h.move(b), w;\n}\nexport { o as FeatureSetHeader, a as parseHeader };","map":{"version":3,"names":["e","t","parseField","s","parseTransform","r","n","o","constructor","hasFeatures","exceededTransferLimit","fieldCount","featureCount","objectIdFieldIndex","vertexCount","offsets","attributes","Array","geometry","centroid","a","i","c","arguments","length","undefined","f","d","u","g","l","p","h","asUnsafe","b","pos","w","m","y","k","x","I","L","A","F","C","S","j","next","tag","getString","processMessage","getBool","Float64Array","Int32Array","index","push","getLength","Uint32Array","skipLen","getUInt32","getSInt64","skip","U","fields","get","transform","displayIds","groupIds","Uint16Array","move","FeatureSetHeader","parseHeader"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/layers/features/support/FeatureSetReaderPBFHeader.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/Error.js\";import t from\"../../../../../layers/support/FieldsIndex.js\";import{parseField as s,parseTransform as r}from\"../../../../../rest/query/operations/pbfFeatureServiceParser.js\";const n=268435455;class o{constructor(){this.hasFeatures=!1,this.exceededTransferLimit=!1,this.fieldCount=0,this.featureCount=0,this.objectIdFieldIndex=0,this.vertexCount=0,this.offsets={attributes:new Array,geometry:new Array},this.centroid=new Array}}function a(a,i,c=!1){const f=1,d=3,u=9,g=12,l=13,p=15,h=a.asUnsafe(),b=h.pos(),w=new o;let m=0,y=0;const k=1,x=2,I=4,L=3;let A=null,F=null,C=null,S=!1;const j=[];for(;h.next();)switch(h.tag()){case f:A=h.getString();break;case d:F=h.getString();break;case g:C=h.processMessage(r);break;case u:if(w.exceededTransferLimit=h.getBool(),w.exceededTransferLimit){w.offsets.geometry=c?new Float64Array(8e3):new Int32Array(8e3),w.centroid=c?new Float64Array(16e3):new Int32Array(16e3);for(let e=0;e<w.centroid.length;e++)w.centroid[e]=n}break;case l:{const e=h.processMessage(s);e.index=m++,j.push(e);break}case p:{const e=h.getLength(),t=h.pos()+e;if(!w.exceededTransferLimit){const e=w.offsets.geometry,t=w.centroid;e.push(0),t.push(n),t.push(n)}!S&&w.exceededTransferLimit&&(S=!0,w.offsets.attributes=c?new Float64Array(8e3*m):new Uint32Array(8e3*m));let s=y*m;for(;h.pos()<t&&h.next();)switch(h.tag()){case k:{if(S)w.offsets.attributes[s++]=h.pos();else{w.offsets.attributes.push(h.pos())}const e=h.getLength();h.skipLen(e);break}case x:if(i){const e=h.getLength(),t=h.pos()+e;for(;h.pos()<t&&h.next();)switch(h.tag()){case L:{h.getUInt32();const e=h.getSInt64(),t=h.getSInt64();w.centroid[2*y]=e,w.centroid[2*y+1]=t;break}default:h.skip()}}else{w.offsets.geometry[y]=h.pos();const e=h.getLength();w.vertexCount+=e,h.skipLen(e)}break;case I:{const e=h.getLength(),t=h.pos()+e;for(;h.pos()<t&&h.next();)switch(h.tag()){case L:{h.getUInt32();const e=h.getSInt64(),t=h.getSInt64();w.centroid[2*y]=e,w.centroid[2*y+1]=t;break}default:h.skip()}break}default:h.skip()}y++,w.hasFeatures=!0;break}default:h.skip()}const U=A||F;if(!U)throw new e(\"FeatureSet has no objectId or globalId field name\");return w.fields=new t(j),w.featureCount=y,w.fieldCount=m,w.objectIdFieldIndex=w.fields.get(U)?.index,w.transform=C,w.displayIds=new Uint32Array(w.featureCount),w.groupIds=new Uint16Array(w.featureCount),h.move(b),w}export{o as FeatureSetHeader,a as parseHeader};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}