{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport t from \"../../request.js\";\nimport i from \"../../core/Error.js\";\nimport { clone as e } from \"../../core/lang.js\";\nimport { estimateNumberArrayMemory as a } from \"../../core/memoryEstimations.js\";\nimport { newUintArray as o } from \"../../geometry/support/UintArray.js\";\nclass l {\n  constructor(t) {\n    s(t);\n    const {\n      location: i,\n      data: l\n    } = t;\n    this.location = Object.freeze(e(i));\n    const r = this.location.width,\n      n = this.location.height;\n    let h = !0,\n      c = !0;\n    const m = Math.ceil(r * n / 32),\n      f = o(m);\n    let w = 0;\n    for (let e = 0; e < l.length; e++) {\n      const t = e % 32;\n      l[e] ? (c = !1, f[w] |= 1 << t) : h = !1, 31 === t && ++w;\n    }\n    c ? (this._availability = \"unavailable\", this.byteSize = 40) : h ? (this._availability = \"available\", this.byteSize = 40) : (this._availability = f, this.byteSize = 40 + a(f));\n  }\n  getAvailability(t, i) {\n    if (\"unavailable\" === this._availability || \"available\" === this._availability) return this._availability;\n    const e = (t - this.location.top) * this.location.width + (i - this.location.left),\n      a = e % 32,\n      o = e >> 5,\n      l = this._availability;\n    return o < 0 || o > l.length ? \"unknown\" : l[o] & 1 << a ? \"available\" : \"unavailable\";\n  }\n  static fromDefinition(e, a) {\n    const o = e.service.request || t,\n      {\n        row: r,\n        col: s,\n        width: h,\n        height: c\n      } = e,\n      m = {\n        query: {\n          f: \"json\"\n        }\n      };\n    return a = a ? {\n      ...m,\n      ...a\n    } : m, o(n(e), a).then(t => t.data).catch(t => {\n      if (422 === t?.details?.httpStatus) return {\n        location: {\n          top: r,\n          left: s,\n          width: h,\n          height: c\n        },\n        valid: !0,\n        data: new Array(h * c).fill(0)\n      };\n      throw t;\n    }).then(t => {\n      if (t.location && (t.location.top !== r || t.location.left !== s || t.location.width !== h || t.location.height !== c)) throw new i(\"tilemap:location-mismatch\", \"Tilemap response for different location than requested\", {\n        response: t,\n        definition: {\n          top: r,\n          left: s,\n          width: h,\n          height: c\n        }\n      });\n      return l.fromJSON(t);\n    });\n  }\n  static fromJSON(t) {\n    return Object.freeze(new l(t));\n  }\n}\nfunction r(t) {\n  return `${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`;\n}\nfunction n(t) {\n  let i;\n  if (t.service.tileServers?.length) {\n    const e = t.service.tileServers;\n    i = `${e && e.length ? e[t.row % e.length] : t.service.url}/tilemap/${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`;\n  } else i = `${t.service.url}/tilemap/${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`;\n  const e = t.service.query;\n  return e && (i = `${i}?${e}`), i;\n}\nfunction s(t) {\n  if (!t?.location) throw new i(\"tilemap:missing-location\", \"Location missing from tilemap response\");\n  if (!1 === t.valid) throw new i(\"tilemap:invalid\", \"Tilemap response was marked as invalid\");\n  if (!t.data) throw new i(\"tilemap:missing-data\", \"Data missing from tilemap response\");\n  if (!Array.isArray(t.data)) throw new i(\"tilemap:data-mismatch\", \"Data must be an array of numbers\");\n  if (t.data.length !== t.location.width * t.location.height) throw new i(\"tilemap:data-mismatch\", \"Number of data items does not match width/height of tilemap\");\n}\nexport { l as Tilemap, r as tilemapDefinitionId };","map":{"version":3,"names":["t","i","clone","e","estimateNumberArrayMemory","a","newUintArray","o","l","constructor","s","location","data","Object","freeze","r","width","n","height","h","c","m","Math","ceil","f","w","length","_availability","byteSize","getAvailability","top","left","fromDefinition","service","request","row","col","query","then","catch","details","httpStatus","valid","Array","fill","response","definition","fromJSON","level","tileServers","url","isArray","Tilemap","tilemapDefinitionId"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/layers/support/Tilemap.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport t from\"../../request.js\";import i from\"../../core/Error.js\";import{clone as e}from\"../../core/lang.js\";import{estimateNumberArrayMemory as a}from\"../../core/memoryEstimations.js\";import{newUintArray as o}from\"../../geometry/support/UintArray.js\";class l{constructor(t){s(t);const{location:i,data:l}=t;this.location=Object.freeze(e(i));const r=this.location.width,n=this.location.height;let h=!0,c=!0;const m=Math.ceil(r*n/32),f=o(m);let w=0;for(let e=0;e<l.length;e++){const t=e%32;l[e]?(c=!1,f[w]|=1<<t):h=!1,31===t&&++w}c?(this._availability=\"unavailable\",this.byteSize=40):h?(this._availability=\"available\",this.byteSize=40):(this._availability=f,this.byteSize=40+a(f))}getAvailability(t,i){if(\"unavailable\"===this._availability||\"available\"===this._availability)return this._availability;const e=(t-this.location.top)*this.location.width+(i-this.location.left),a=e%32,o=e>>5,l=this._availability;return o<0||o>l.length?\"unknown\":l[o]&1<<a?\"available\":\"unavailable\"}static fromDefinition(e,a){const o=e.service.request||t,{row:r,col:s,width:h,height:c}=e,m={query:{f:\"json\"}};return a=a?{...m,...a}:m,o(n(e),a).then((t=>t.data)).catch((t=>{if(422===t?.details?.httpStatus)return{location:{top:r,left:s,width:h,height:c},valid:!0,data:new Array(h*c).fill(0)};throw t})).then((t=>{if(t.location&&(t.location.top!==r||t.location.left!==s||t.location.width!==h||t.location.height!==c))throw new i(\"tilemap:location-mismatch\",\"Tilemap response for different location than requested\",{response:t,definition:{top:r,left:s,width:h,height:c}});return l.fromJSON(t)}))}static fromJSON(t){return Object.freeze(new l(t))}}function r(t){return`${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`}function n(t){let i;if(t.service.tileServers?.length){const e=t.service.tileServers;i=`${e&&e.length?e[t.row%e.length]:t.service.url}/tilemap/${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`}else i=`${t.service.url}/tilemap/${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`;const e=t.service.query;return e&&(i=`${i}?${e}`),i}function s(t){if(!t?.location)throw new i(\"tilemap:missing-location\",\"Location missing from tilemap response\");if(!1===t.valid)throw new i(\"tilemap:invalid\",\"Tilemap response was marked as invalid\");if(!t.data)throw new i(\"tilemap:missing-data\",\"Data missing from tilemap response\");if(!Array.isArray(t.data))throw new i(\"tilemap:data-mismatch\",\"Data must be an array of numbers\");if(t.data.length!==t.location.width*t.location.height)throw new i(\"tilemap:data-mismatch\",\"Number of data items does not match width/height of tilemap\")}export{l as Tilemap,r as tilemapDefinitionId};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}