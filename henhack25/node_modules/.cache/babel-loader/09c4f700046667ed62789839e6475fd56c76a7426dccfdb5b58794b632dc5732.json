{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { lerp as e, distance as t } from \"../../../core/libs/gl-matrix-2/math/vec2.js\";\nimport { create as i } from \"../../../core/libs/gl-matrix-2/factories/vec2f64.js\";\nimport { absoluteHeightElevationInfo as r } from \"../../../support/elevationInfoUtils.js\";\nimport { fromAnyMapPoint as o, asVec2 as s, markAsTarget as n, fromValues as p } from \"../sketch/normalizedPoint.js\";\nimport { SnappingAlgorithm as a } from \"./SnappingAlgorithm.js\";\nimport { squaredScreenDistance as d } from \"./snappingUtils.js\";\nimport { RightAngleTriangleSnappingCandidate as l } from \"./candidates/RightAngleTriangleSnappingCandidate.js\";\nimport { vectorToScreenPoint as m } from \"../support/viewUtils.js\";\nimport { projectPointToCircle as c } from \"../../support/geometry2dUtils.js\";\nclass h extends a {\n  snapNewVertex(e, t) {\n    const i = t.editGeometryOperations.data.components[0],\n      r = [],\n      s = i.vertices.length;\n    if (\"polygon\" !== t.editGeometryOperations.data.type || s < 2) return r;\n    const {\n        view: n\n      } = this,\n      p = i.vertices[0],\n      a = i.vertices[s - 1],\n      d = o(p.pos, n, t),\n      l = o(a.pos, n, t);\n    return this._processCandidateProposal(d, l, e, t, r), r;\n  }\n  snapExistingVertex(e, t) {\n    const i = [],\n      r = t.vertexHandle,\n      s = r.component;\n    if (s.edges.length < 2) return i;\n    if (\"polyline\" === t.editGeometryOperations.data.type && (0 === r.index || r.index === s.vertices.length - 1)) return i;\n    const {\n        view: n\n      } = this,\n      p = o(r.leftEdge.leftVertex.pos, n, t),\n      a = o(r.rightEdge.rightVertex.pos, n, t);\n    return this._processCandidateProposal(p, a, e, t, i), i;\n  }\n  _processCandidateProposal(i, o, a, h, g) {\n    if (!this.exceedsShortLineThreshold(i, o, h)) return;\n    const v = e(f, s(i), s(o), .5),\n      x = .5 * t(s(i), s(o)),\n      u = c(f, s(a), v, x),\n      j = n(p(u[0], u[1], a[2])),\n      {\n        spatialReference: y,\n        pointer: w\n      } = h,\n      P = m(a, y, r, this.view);\n    if (d(P, m(j, y, r, this.view)) < this.squaredProximityThreshold(w)) {\n      if (this.isVertical(i, j, h) || this.isVertical(j, o, h)) return;\n      g.push(new l({\n        targetPoint: j,\n        point1: i,\n        point2: o,\n        isDraped: \"on-the-ground\" === h.elevationInfo?.mode\n      }));\n    }\n  }\n}\nconst f = i();\nexport { h as RightAngleTriangleSnapper };","map":{"version":3,"names":["lerp","e","distance","t","create","i","absoluteHeightElevationInfo","r","fromAnyMapPoint","o","asVec2","s","markAsTarget","n","fromValues","p","SnappingAlgorithm","a","squaredScreenDistance","d","RightAngleTriangleSnappingCandidate","l","vectorToScreenPoint","m","projectPointToCircle","c","h","snapNewVertex","editGeometryOperations","data","components","vertices","length","type","view","pos","_processCandidateProposal","snapExistingVertex","vertexHandle","component","edges","index","leftEdge","leftVertex","rightEdge","rightVertex","g","exceedsShortLineThreshold","v","f","x","u","j","spatialReference","y","pointer","w","P","squaredProximityThreshold","isVertical","push","targetPoint","point1","point2","isDraped","elevationInfo","mode","RightAngleTriangleSnapper"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/interactive/snapping/RightAngleTriangleSnapper.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{lerp as e,distance as t}from\"../../../core/libs/gl-matrix-2/math/vec2.js\";import{create as i}from\"../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{absoluteHeightElevationInfo as r}from\"../../../support/elevationInfoUtils.js\";import{fromAnyMapPoint as o,asVec2 as s,markAsTarget as n,fromValues as p}from\"../sketch/normalizedPoint.js\";import{SnappingAlgorithm as a}from\"./SnappingAlgorithm.js\";import{squaredScreenDistance as d}from\"./snappingUtils.js\";import{RightAngleTriangleSnappingCandidate as l}from\"./candidates/RightAngleTriangleSnappingCandidate.js\";import{vectorToScreenPoint as m}from\"../support/viewUtils.js\";import{projectPointToCircle as c}from\"../../support/geometry2dUtils.js\";class h extends a{snapNewVertex(e,t){const i=t.editGeometryOperations.data.components[0],r=[],s=i.vertices.length;if(\"polygon\"!==t.editGeometryOperations.data.type||s<2)return r;const{view:n}=this,p=i.vertices[0],a=i.vertices[s-1],d=o(p.pos,n,t),l=o(a.pos,n,t);return this._processCandidateProposal(d,l,e,t,r),r}snapExistingVertex(e,t){const i=[],r=t.vertexHandle,s=r.component;if(s.edges.length<2)return i;if(\"polyline\"===t.editGeometryOperations.data.type&&(0===r.index||r.index===s.vertices.length-1))return i;const{view:n}=this,p=o(r.leftEdge.leftVertex.pos,n,t),a=o(r.rightEdge.rightVertex.pos,n,t);return this._processCandidateProposal(p,a,e,t,i),i}_processCandidateProposal(i,o,a,h,g){if(!this.exceedsShortLineThreshold(i,o,h))return;const v=e(f,s(i),s(o),.5),x=.5*t(s(i),s(o)),u=c(f,s(a),v,x),j=n(p(u[0],u[1],a[2])),{spatialReference:y,pointer:w}=h,P=m(a,y,r,this.view);if(d(P,m(j,y,r,this.view))<this.squaredProximityThreshold(w)){if(this.isVertical(i,j,h)||this.isVertical(j,o,h))return;g.push(new l({targetPoint:j,point1:i,point2:o,isDraped:\"on-the-ground\"===h.elevationInfo?.mode}))}}}const f=i();export{h as RightAngleTriangleSnapper};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}