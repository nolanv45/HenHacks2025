{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { clone as e } from \"../../../../../core/lang.js\";\nimport { getEffectiveFeatureReduction as t } from \"./featureReductionUtils.js\";\nimport { getServiceGeometryType as r } from \"./geometryUtils.js\";\nimport { getFeatureReductionDeconflictionEnabled as o, getLayerDeconflictionEnabled as s, createLabelVVEvaluator as a } from \"./labelingUtils.js\";\nimport { createFeatureSourceSchema as l } from \"../schema/SourceSchema.js\";\nimport { createSimpleProcessorSchema as i } from \"../schema/processor/SimpleProcessorSchema.js\";\nimport { isRendererSupported as n } from \"../support/rendererUtils.js\";\nclass u {\n  constructor(e) {\n    this.layer = e;\n  }\n  getLabelingDeconflictionInfo(e) {\n    const t = this.layer,\n      r = o(t, e) ?? s(t);\n    return [{\n      vvEvaluators: {\n        0: a(t.renderer)\n      },\n      deconflictionEnabled: r\n    }];\n  }\n  async createServiceOptions(t) {\n    const o = this.layer,\n      {\n        capabilities: s,\n        objectIdField: a\n      } = o,\n      l = o.fieldsIndex.toJSON(),\n      i = r(o),\n      n = o.timeInfo?.toJSON(),\n      u = o.spatialReference.toJSON(),\n      c = o.source.getSource(),\n      p = this.layer.objectIdField,\n      d = e(s);\n    d.query.maxRecordCount = c.maxRecordCount;\n    const m = t.spatialReference.toJSON();\n    return {\n      type: \"ogc\",\n      source: c,\n      orderByFields: p,\n      outSpatialReference: m,\n      metadata: {\n        fieldsIndex: l,\n        geometryType: i,\n        objectIdField: a,\n        timeInfo: n,\n        spatialReference: u,\n        outSpatialReference: m,\n        globalIdField: null,\n        subtypeField: null,\n        subtypes: null,\n        timeReferenceUnknownClient: null,\n        dateFieldsTimeZone: null,\n        typeIdField: null,\n        types: null\n      },\n      queryMetadata: {\n        maxRecordCount: d.query.maxRecordCount,\n        supportsCompactGeometry: d.query.supportsCompactGeometry,\n        supportsDefaultSpatialReference: d.query.supportsDefaultSpatialReference,\n        supportsFormatPBF: d.query.supportsFormatPBF,\n        supportsMaxRecordCountFactor: d.query.supportsMaxRecordCountFactor,\n        supportsQuantization: d.query.supportsQuantization,\n        lastEditDate: null,\n        snapshotInfo: null\n      }\n    };\n  }\n  createSourceSchema(e, t) {\n    const {\n      customParameters: r,\n      timeExtent: o,\n      apiKey: s\n    } = this.layer;\n    return l({\n      customParameters: r,\n      timeExtent: o\n    }, e, t, s);\n  }\n  createProcessorSchema(e, r, o) {\n    const {\n        fields: s,\n        renderer: a,\n        geometryType: l,\n        labelingInfo: n,\n        labelsVisible: u,\n        orderBy: c,\n        objectIdField: p\n      } = this.layer,\n      d = {\n        fields: s.map(e => e.toJSON()),\n        renderer: a?.clone(),\n        featureReduction: t(this.layer, r),\n        geometryType: l,\n        labelingInfo: n,\n        labelsVisible: u,\n        objectIdField: p,\n        orderBy: c ?? \"default\"\n      };\n    return i(e, r, d, o);\n  }\n  get hasRequiredSupport() {\n    return n(this.layer.renderer);\n  }\n  get timeOptions() {\n    return this.layer;\n  }\n  getUpdateHashProperties(e) {\n    return [() => this.layer.apiKey, () => this.layer.customParameters, () => t(this.layer, e), () => this.layer.labelsVisible ? this.layer.labelingInfo : null, () => this.layer.orderBy, () => this.layer.renderer];\n  }\n}\nexport { u as OGCFeatureLayerAdapter };","map":{"version":3,"names":["clone","e","getEffectiveFeatureReduction","t","getServiceGeometryType","r","getFeatureReductionDeconflictionEnabled","o","getLayerDeconflictionEnabled","s","createLabelVVEvaluator","a","createFeatureSourceSchema","l","createSimpleProcessorSchema","i","isRendererSupported","n","u","constructor","layer","getLabelingDeconflictionInfo","vvEvaluators","renderer","deconflictionEnabled","createServiceOptions","capabilities","objectIdField","fieldsIndex","toJSON","timeInfo","spatialReference","c","source","getSource","p","d","query","maxRecordCount","m","type","orderByFields","outSpatialReference","metadata","geometryType","globalIdField","subtypeField","subtypes","timeReferenceUnknownClient","dateFieldsTimeZone","typeIdField","types","queryMetadata","supportsCompactGeometry","supportsDefaultSpatialReference","supportsFormatPBF","supportsMaxRecordCountFactor","supportsQuantization","lastEditDate","snapshotInfo","createSourceSchema","customParameters","timeExtent","apiKey","createProcessorSchema","fields","labelingInfo","labelsVisible","orderBy","map","featureReduction","hasRequiredSupport","timeOptions","getUpdateHashProperties","OGCFeatureLayerAdapter"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/OGCFeatureLayerAdapter.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{clone as e}from\"../../../../../core/lang.js\";import{getEffectiveFeatureReduction as t}from\"./featureReductionUtils.js\";import{getServiceGeometryType as r}from\"./geometryUtils.js\";import{getFeatureReductionDeconflictionEnabled as o,getLayerDeconflictionEnabled as s,createLabelVVEvaluator as a}from\"./labelingUtils.js\";import{createFeatureSourceSchema as l}from\"../schema/SourceSchema.js\";import{createSimpleProcessorSchema as i}from\"../schema/processor/SimpleProcessorSchema.js\";import{isRendererSupported as n}from\"../support/rendererUtils.js\";class u{constructor(e){this.layer=e}getLabelingDeconflictionInfo(e){const t=this.layer,r=o(t,e)??s(t);return[{vvEvaluators:{0:a(t.renderer)},deconflictionEnabled:r}]}async createServiceOptions(t){const o=this.layer,{capabilities:s,objectIdField:a}=o,l=o.fieldsIndex.toJSON(),i=r(o),n=o.timeInfo?.toJSON(),u=o.spatialReference.toJSON(),c=o.source.getSource(),p=this.layer.objectIdField,d=e(s);d.query.maxRecordCount=c.maxRecordCount;const m=t.spatialReference.toJSON();return{type:\"ogc\",source:c,orderByFields:p,outSpatialReference:m,metadata:{fieldsIndex:l,geometryType:i,objectIdField:a,timeInfo:n,spatialReference:u,outSpatialReference:m,globalIdField:null,subtypeField:null,subtypes:null,timeReferenceUnknownClient:null,dateFieldsTimeZone:null,typeIdField:null,types:null},queryMetadata:{maxRecordCount:d.query.maxRecordCount,supportsCompactGeometry:d.query.supportsCompactGeometry,supportsDefaultSpatialReference:d.query.supportsDefaultSpatialReference,supportsFormatPBF:d.query.supportsFormatPBF,supportsMaxRecordCountFactor:d.query.supportsMaxRecordCountFactor,supportsQuantization:d.query.supportsQuantization,lastEditDate:null,snapshotInfo:null}}}createSourceSchema(e,t){const{customParameters:r,timeExtent:o,apiKey:s}=this.layer;return l({customParameters:r,timeExtent:o},e,t,s)}createProcessorSchema(e,r,o){const{fields:s,renderer:a,geometryType:l,labelingInfo:n,labelsVisible:u,orderBy:c,objectIdField:p}=this.layer,d={fields:s.map((e=>e.toJSON())),renderer:a?.clone(),featureReduction:t(this.layer,r),geometryType:l,labelingInfo:n,labelsVisible:u,objectIdField:p,orderBy:c??\"default\"};return i(e,r,d,o)}get hasRequiredSupport(){return n(this.layer.renderer)}get timeOptions(){return this.layer}getUpdateHashProperties(e){return[()=>this.layer.apiKey,()=>this.layer.customParameters,()=>t(this.layer,e),()=>this.layer.labelsVisible?this.layer.labelingInfo:null,()=>this.layer.orderBy,()=>this.layer.renderer]}}export{u as OGCFeatureLayerAdapter};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}