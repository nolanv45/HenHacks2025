{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport r from \"../../../../../../core/Error.js\";\nimport e from \"../../../../../../core/Logger.js\";\nimport { getDeepValue as t } from \"../../../../../../core/object.js\";\nimport \"../../../../../../core/has.js\";\nimport \"../../../../../../core/RandomLCG.js\";\nimport \"../../../../../webgl/checkWebGLError.js\";\nimport \"../../../../../webgl/enums.js\";\nimport \"../../../../../webgl/FramebufferObject.js\";\nimport { Program as o } from \"../../../../../webgl/Program.js\";\nimport \"../../../../../webgl/GLObjectType.js\";\nimport \"../../../../../webgl/Texture.js\";\nimport { createTexture as i } from \"../../Utils.js\";\nconst s = () => e.getLogger(\"esri.views.2d.engine.webgl.shaderGraph.typed.TypedShaderProgram\");\nfunction n(e, t, o) {\n  const i = t.length;\n  if (i !== o) {\n    const n = new r(\"Invalid Uniform\", `Invalid length, expected ${o} but got ${i}`, {\n      uniformName: e,\n      values: t\n    });\n    s().errorOnce(n);\n  }\n}\nclass a {\n  constructor(r, e, t, o, i, s) {\n    this._program = null, this._vao = null, this._temporaryTextures = [], this.vertexShader = r, this.fragmentShader = e, this._locations = t, this._locationInfo = o, this._uniformBindings = i, this._transformFeedbackBindings = s;\n  }\n  destroy() {\n    this._program && this._program.dispose(), this.cleanupTemporaryTextures();\n  }\n  get locations() {\n    return this._locations;\n  }\n  get locationInfo() {\n    return this._locationInfo;\n  }\n  setUniforms(r) {\n    this._uniforms = r;\n  }\n  cleanupTemporaryTextures() {\n    for (const r of this._temporaryTextures) r.dispose();\n    this._temporaryTextures = [];\n  }\n  bind(r) {\n    const e = this._uniforms;\n    if (!this._program) {\n      const e = new Map();\n      for (const [r, o] of this._locations) e.set(r, o);\n      const t = [];\n      for (const r of this._transformFeedbackBindings ?? []) {\n        const {\n          index: e,\n          propertyKey: o\n        } = r;\n        t[e] = `v_${o}`;\n      }\n      this._program = new o(r, this.vertexShader, this.fragmentShader, e, new Map(), t);\n    }\n    const s = this._program;\n    r.useProgram(s);\n    for (const o of this._uniformBindings) {\n      const {\n          shaderModulePath: a,\n          uniformName: f,\n          uniformType: m,\n          uniformArrayLength: c\n        } = o,\n        p = t(a, e);\n      if (null == p) {\n        if (\"sampler2D\" === m) continue;\n        throw new Error(`Failed to find uniform value for ${a}`);\n      }\n      switch (\"array\" === m || \"array-2d\" === m ? o.uniformArrayElementType : m) {\n        case \"sampler2D\":\n          {\n            const {\n              unit: e,\n              texture: t\n            } = p;\n            if (s.setUniform1i(f, e), \"type\" in t) r.bindTexture(t, e);else {\n              const o = i(r, t.descriptor, t.data);\n              r.bindTexture(o, e);\n            }\n            break;\n          }\n        case \"int\":\n          if (!c) {\n            s.setUniform1i(f, p);\n            break;\n          }\n          n(o.uniformName, p, c), s.setUniform1iv(f, p);\n          break;\n        case \"float\":\n          if (!c) {\n            s.setUniform1f(f, p);\n            break;\n          }\n          n(o.uniformName, p, c), s.setUniform1fv(f, p);\n          break;\n        case \"vec2\":\n          if (!c) {\n            s.setUniform2f(f, p[0], p[1]);\n            break;\n          }\n          n(o.uniformName, p, c), s.setUniform2fv(f, p.flat());\n          break;\n        case \"vec3\":\n          if (!c) {\n            s.setUniform3f(f, p[0], p[1], p[2]);\n            break;\n          }\n          n(o.uniformName, p, c), s.setUniform3fv(f, p.flat());\n          break;\n        case \"vec4\":\n          if (!c) {\n            s.setUniform4f(f, p[0], p[1], p[2], p[3]);\n            break;\n          }\n          n(o.uniformName, p, c), s.setUniform4fv(f, p.flat());\n          break;\n        case \"mat3\":\n          s.setUniformMatrix3fv(f, p);\n          break;\n        case \"mat4\":\n          s.setUniformMatrix4fv(f, p);\n          break;\n        default:\n          throw new Error(`Unable to set uniform for type ${m}`);\n      }\n    }\n  }\n}\nexport { a as TypedShaderProgram };","map":{"version":3,"names":["r","e","getDeepValue","t","Program","o","createTexture","i","s","getLogger","n","length","uniformName","values","errorOnce","a","constructor","_program","_vao","_temporaryTextures","vertexShader","fragmentShader","_locations","_locationInfo","_uniformBindings","_transformFeedbackBindings","destroy","dispose","cleanupTemporaryTextures","locations","locationInfo","setUniforms","_uniforms","bind","Map","set","index","propertyKey","useProgram","shaderModulePath","f","uniformType","m","uniformArrayLength","c","p","Error","uniformArrayElementType","unit","texture","setUniform1i","bindTexture","descriptor","data","setUniform1iv","setUniform1f","setUniform1fv","setUniform2f","setUniform2fv","flat","setUniform3f","setUniform3fv","setUniform4f","setUniform4fv","setUniformMatrix3fv","setUniformMatrix4fv","TypedShaderProgram"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/typed/TypedShaderProgram.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport r from\"../../../../../../core/Error.js\";import e from\"../../../../../../core/Logger.js\";import{getDeepValue as t}from\"../../../../../../core/object.js\";import\"../../../../../../core/has.js\";import\"../../../../../../core/RandomLCG.js\";import\"../../../../../webgl/checkWebGLError.js\";import\"../../../../../webgl/enums.js\";import\"../../../../../webgl/FramebufferObject.js\";import{Program as o}from\"../../../../../webgl/Program.js\";import\"../../../../../webgl/GLObjectType.js\";import\"../../../../../webgl/Texture.js\";import{createTexture as i}from\"../../Utils.js\";const s=()=>e.getLogger(\"esri.views.2d.engine.webgl.shaderGraph.typed.TypedShaderProgram\");function n(e,t,o){const i=t.length;if(i!==o){const n=new r(\"Invalid Uniform\",`Invalid length, expected ${o} but got ${i}`,{uniformName:e,values:t});s().errorOnce(n)}}class a{constructor(r,e,t,o,i,s){this._program=null,this._vao=null,this._temporaryTextures=[],this.vertexShader=r,this.fragmentShader=e,this._locations=t,this._locationInfo=o,this._uniformBindings=i,this._transformFeedbackBindings=s}destroy(){this._program&&this._program.dispose(),this.cleanupTemporaryTextures()}get locations(){return this._locations}get locationInfo(){return this._locationInfo}setUniforms(r){this._uniforms=r}cleanupTemporaryTextures(){for(const r of this._temporaryTextures)r.dispose();this._temporaryTextures=[]}bind(r){const e=this._uniforms;if(!this._program){const e=new Map;for(const[r,o]of this._locations)e.set(r,o);const t=[];for(const r of this._transformFeedbackBindings??[]){const{index:e,propertyKey:o}=r;t[e]=`v_${o}`}this._program=new o(r,this.vertexShader,this.fragmentShader,e,new Map,t)}const s=this._program;r.useProgram(s);for(const o of this._uniformBindings){const{shaderModulePath:a,uniformName:f,uniformType:m,uniformArrayLength:c}=o,p=t(a,e);if(null==p){if(\"sampler2D\"===m)continue;throw new Error(`Failed to find uniform value for ${a}`)}switch(\"array\"===m||\"array-2d\"===m?o.uniformArrayElementType:m){case\"sampler2D\":{const{unit:e,texture:t}=p;if(s.setUniform1i(f,e),\"type\"in t)r.bindTexture(t,e);else{const o=i(r,t.descriptor,t.data);r.bindTexture(o,e)}break}case\"int\":if(!c){s.setUniform1i(f,p);break}n(o.uniformName,p,c),s.setUniform1iv(f,p);break;case\"float\":if(!c){s.setUniform1f(f,p);break}n(o.uniformName,p,c),s.setUniform1fv(f,p);break;case\"vec2\":if(!c){s.setUniform2f(f,p[0],p[1]);break}n(o.uniformName,p,c),s.setUniform2fv(f,p.flat());break;case\"vec3\":if(!c){s.setUniform3f(f,p[0],p[1],p[2]);break}n(o.uniformName,p,c),s.setUniform3fv(f,p.flat());break;case\"vec4\":if(!c){s.setUniform4f(f,p[0],p[1],p[2],p[3]);break}n(o.uniformName,p,c),s.setUniform4fv(f,p.flat());break;case\"mat3\":s.setUniformMatrix3fv(f,p);break;case\"mat4\":s.setUniformMatrix4fv(f,p);break;default:throw new Error(`Unable to set uniform for type ${m}`)}}}}export{a as TypedShaderProgram};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}