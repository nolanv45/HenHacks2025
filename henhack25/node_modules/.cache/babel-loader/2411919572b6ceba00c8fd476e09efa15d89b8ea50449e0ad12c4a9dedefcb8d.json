{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { addNearFar as e } from \"../ForwardLinearDepth.glsl.js\";\nimport { ShaderOutput as r } from \"../ShaderOutput.js\";\nimport { SliceDraw as o } from \"../Slice.glsl.js\";\nimport { Transform as t } from \"../Transform.glsl.js\";\nimport { NormalAttribute as i, NormalType as a } from \"../attributes/NormalAttribute.glsl.js\";\nimport { ObjectAndLayerIdColor as s } from \"../attributes/ObjectAndLayerIdColor.glsl.js\";\nimport { TextureCoordinateAttribute as l } from \"../attributes/TextureCoordinateAttribute.glsl.js\";\nimport { VertexNormal as d } from \"../attributes/VertexNormal.glsl.js\";\nimport { OutputDepth as n } from \"../output/OutputDepth.glsl.js\";\nimport { OutputHighlight as c } from \"../output/OutputHighlight.glsl.js\";\nimport { VisualVariables as u } from \"../shading/VisualVariables.glsl.js\";\nimport { DiscardOrAdjustAlphaPass as p } from \"../util/DiscardOrAdjustAlpha.glsl.js\";\nimport { addProjViewLocalOrigin as m } from \"../util/View.glsl.js\";\nimport { glsl as v, If as g } from \"../../shaderModules/glsl.js\";\nimport { Texture2DPassUniform as f } from \"../../shaderModules/Texture2DPassUniform.js\";\nimport { AlphaDiscardMode as x } from \"../../../lib/basicInterfaces.js\";\nfunction h(h, O) {\n  const {\n      vertex: j,\n      fragment: w\n    } = h,\n    b = O.hasColorTexture && O.alphaDiscardMode !== x.Opaque,\n    {\n      output: C,\n      normalType: V,\n      hasColorTextureTransform: A\n    } = O;\n  switch (C) {\n    case r.Depth:\n      m(j, O), h.include(t, O), h.fragment.include(o, O), h.include(l, O), b && w.uniforms.add(new f(\"tex\", e => e.texture)), j.main.add(v`vpos = getVertexInLocalOriginSpace();\nvpos = subtractOrigin(vpos);\nvpos = addVerticalOffset(vpos, localOrigin);\ngl_Position = transformPosition(proj, view, vpos);\nforwardTextureCoordinates();`), h.include(p, O), w.main.add(v`\n        discardBySlice(vpos);\n        ${g(b, v`vec4 texColor = texture(tex, ${A ? \"colorUV\" : \"vuv0\"});\n                discardOrAdjustAlpha(texColor);`)}`);\n      break;\n    case r.Shadow:\n    case r.ShadowHighlight:\n    case r.ShadowExcludeHighlight:\n    case r.ViewshedShadow:\n    case r.ObjectAndLayerIdColor:\n      m(j, O), h.include(t, O), h.include(l, O), h.include(u, O), h.include(n, O), h.fragment.include(o, O), h.include(s, O), e(h), h.varyings.add(\"depth\", \"float\"), b && w.uniforms.add(new f(\"tex\", e => e.texture)), j.main.add(v`vpos = getVertexInLocalOriginSpace();\nvpos = subtractOrigin(vpos);\nvpos = addVerticalOffset(vpos, localOrigin);\ngl_Position = transformPositionWithDepth(proj, view, vpos, nearFar, depth);\nforwardTextureCoordinates();\nforwardObjectAndLayerIdColor();`), h.include(p, O), w.main.add(v`\n        discardBySlice(vpos);\n        ${g(b, v`vec4 texColor = texture(tex, ${A ? \"colorUV\" : \"vuv0\"});\n                discardOrAdjustAlpha(texColor);`)}\n        ${C === r.ObjectAndLayerIdColor ? v`outputObjectAndLayerIdColor();` : v`outputDepth(depth);`}`);\n      break;\n    case r.Normal:\n      {\n        m(j, O), h.include(t, O), h.include(i, O), h.include(d, O), h.include(l, O), h.include(u, O), b && w.uniforms.add(new f(\"tex\", e => e.texture)), V === a.ScreenDerivative && h.varyings.add(\"vPositionView\", \"vec3\");\n        const e = V === a.Attribute || V === a.Compressed;\n        j.main.add(v`\n        vpos = getVertexInLocalOriginSpace();\n        ${e ? v`vNormalWorld = dpNormalView(vvLocalNormal(normalModel()));` : v`vPositionView = (view * vec4(vpos, 1.0)).xyz;`}\n        vpos = subtractOrigin(vpos);\n        vpos = addVerticalOffset(vpos, localOrigin);\n        gl_Position = transformPosition(proj, view, vpos);\n        forwardTextureCoordinates();`), h.fragment.include(o, O), h.include(p, O), w.main.add(v`\n        discardBySlice(vpos);\n        ${g(b, v`vec4 texColor = texture(tex, ${A ? \"colorUV\" : \"vuv0\"});\n                discardOrAdjustAlpha(texColor);`)}\n\n        ${V === a.ScreenDerivative ? v`vec3 normal = screenDerivativeNormal(vPositionView);` : v`vec3 normal = normalize(vNormalWorld);\n                    if (gl_FrontFacing == false){\n                      normal = -normal;\n                    }`}\n        fragColor = vec4(0.5 + 0.5 * normal, 1.0);`);\n        break;\n      }\n    case r.Highlight:\n      m(j, O), h.include(t, O), h.include(l, O), h.include(u, O), b && w.uniforms.add(new f(\"tex\", e => e.texture)), j.main.add(v`vpos = getVertexInLocalOriginSpace();\nvpos = subtractOrigin(vpos);\nvpos = addVerticalOffset(vpos, localOrigin);\ngl_Position = transformPosition(proj, view, vpos);\nforwardTextureCoordinates();`), h.fragment.include(o, O), h.include(p, O), h.include(c, O), w.main.add(v`\n        discardBySlice(vpos);\n        ${g(b, v`vec4 texColor = texture(tex, ${A ? \"colorUV\" : \"vuv0\"});\n                discardOrAdjustAlpha(texColor);`)}\n        calculateOcclusionAndOutputHighlight();`);\n  }\n}\nexport { h as DefaultMaterialAuxiliaryPasses };","map":{"version":3,"names":["addNearFar","e","ShaderOutput","r","SliceDraw","o","Transform","t","NormalAttribute","i","NormalType","a","ObjectAndLayerIdColor","s","TextureCoordinateAttribute","l","VertexNormal","d","OutputDepth","n","OutputHighlight","c","VisualVariables","u","DiscardOrAdjustAlphaPass","p","addProjViewLocalOrigin","m","glsl","v","If","g","Texture2DPassUniform","f","AlphaDiscardMode","x","h","O","vertex","j","fragment","w","b","hasColorTexture","alphaDiscardMode","Opaque","output","C","normalType","V","hasColorTextureTransform","A","Depth","include","uniforms","add","texture","main","Shadow","ShadowHighlight","ShadowExcludeHighlight","ViewshedShadow","varyings","Normal","ScreenDerivative","Attribute","Compressed","Highlight","DefaultMaterialAuxiliaryPasses"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/default/DefaultMaterialAuxiliaryPasses.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{addNearFar as e}from\"../ForwardLinearDepth.glsl.js\";import{ShaderOutput as r}from\"../ShaderOutput.js\";import{SliceDraw as o}from\"../Slice.glsl.js\";import{Transform as t}from\"../Transform.glsl.js\";import{NormalAttribute as i,NormalType as a}from\"../attributes/NormalAttribute.glsl.js\";import{ObjectAndLayerIdColor as s}from\"../attributes/ObjectAndLayerIdColor.glsl.js\";import{TextureCoordinateAttribute as l}from\"../attributes/TextureCoordinateAttribute.glsl.js\";import{VertexNormal as d}from\"../attributes/VertexNormal.glsl.js\";import{OutputDepth as n}from\"../output/OutputDepth.glsl.js\";import{OutputHighlight as c}from\"../output/OutputHighlight.glsl.js\";import{VisualVariables as u}from\"../shading/VisualVariables.glsl.js\";import{DiscardOrAdjustAlphaPass as p}from\"../util/DiscardOrAdjustAlpha.glsl.js\";import{addProjViewLocalOrigin as m}from\"../util/View.glsl.js\";import{glsl as v,If as g}from\"../../shaderModules/glsl.js\";import{Texture2DPassUniform as f}from\"../../shaderModules/Texture2DPassUniform.js\";import{AlphaDiscardMode as x}from\"../../../lib/basicInterfaces.js\";function h(h,O){const{vertex:j,fragment:w}=h,b=O.hasColorTexture&&O.alphaDiscardMode!==x.Opaque,{output:C,normalType:V,hasColorTextureTransform:A}=O;switch(C){case r.Depth:m(j,O),h.include(t,O),h.fragment.include(o,O),h.include(l,O),b&&w.uniforms.add(new f(\"tex\",(e=>e.texture))),j.main.add(v`vpos = getVertexInLocalOriginSpace();\nvpos = subtractOrigin(vpos);\nvpos = addVerticalOffset(vpos, localOrigin);\ngl_Position = transformPosition(proj, view, vpos);\nforwardTextureCoordinates();`),h.include(p,O),w.main.add(v`\n        discardBySlice(vpos);\n        ${g(b,v`vec4 texColor = texture(tex, ${A?\"colorUV\":\"vuv0\"});\n                discardOrAdjustAlpha(texColor);`)}`);break;case r.Shadow:case r.ShadowHighlight:case r.ShadowExcludeHighlight:case r.ViewshedShadow:case r.ObjectAndLayerIdColor:m(j,O),h.include(t,O),h.include(l,O),h.include(u,O),h.include(n,O),h.fragment.include(o,O),h.include(s,O),e(h),h.varyings.add(\"depth\",\"float\"),b&&w.uniforms.add(new f(\"tex\",(e=>e.texture))),j.main.add(v`vpos = getVertexInLocalOriginSpace();\nvpos = subtractOrigin(vpos);\nvpos = addVerticalOffset(vpos, localOrigin);\ngl_Position = transformPositionWithDepth(proj, view, vpos, nearFar, depth);\nforwardTextureCoordinates();\nforwardObjectAndLayerIdColor();`),h.include(p,O),w.main.add(v`\n        discardBySlice(vpos);\n        ${g(b,v`vec4 texColor = texture(tex, ${A?\"colorUV\":\"vuv0\"});\n                discardOrAdjustAlpha(texColor);`)}\n        ${C===r.ObjectAndLayerIdColor?v`outputObjectAndLayerIdColor();`:v`outputDepth(depth);`}`);break;case r.Normal:{m(j,O),h.include(t,O),h.include(i,O),h.include(d,O),h.include(l,O),h.include(u,O),b&&w.uniforms.add(new f(\"tex\",(e=>e.texture))),V===a.ScreenDerivative&&h.varyings.add(\"vPositionView\",\"vec3\");const e=V===a.Attribute||V===a.Compressed;j.main.add(v`\n        vpos = getVertexInLocalOriginSpace();\n        ${e?v`vNormalWorld = dpNormalView(vvLocalNormal(normalModel()));`:v`vPositionView = (view * vec4(vpos, 1.0)).xyz;`}\n        vpos = subtractOrigin(vpos);\n        vpos = addVerticalOffset(vpos, localOrigin);\n        gl_Position = transformPosition(proj, view, vpos);\n        forwardTextureCoordinates();`),h.fragment.include(o,O),h.include(p,O),w.main.add(v`\n        discardBySlice(vpos);\n        ${g(b,v`vec4 texColor = texture(tex, ${A?\"colorUV\":\"vuv0\"});\n                discardOrAdjustAlpha(texColor);`)}\n\n        ${V===a.ScreenDerivative?v`vec3 normal = screenDerivativeNormal(vPositionView);`:v`vec3 normal = normalize(vNormalWorld);\n                    if (gl_FrontFacing == false){\n                      normal = -normal;\n                    }`}\n        fragColor = vec4(0.5 + 0.5 * normal, 1.0);`);break}case r.Highlight:m(j,O),h.include(t,O),h.include(l,O),h.include(u,O),b&&w.uniforms.add(new f(\"tex\",(e=>e.texture))),j.main.add(v`vpos = getVertexInLocalOriginSpace();\nvpos = subtractOrigin(vpos);\nvpos = addVerticalOffset(vpos, localOrigin);\ngl_Position = transformPosition(proj, view, vpos);\nforwardTextureCoordinates();`),h.fragment.include(o,O),h.include(p,O),h.include(c,O),w.main.add(v`\n        discardBySlice(vpos);\n        ${g(b,v`vec4 texColor = texture(tex, ${A?\"colorUV\":\"vuv0\"});\n                discardOrAdjustAlpha(texColor);`)}\n        calculateOcclusionAndOutputHighlight();`)}}export{h as DefaultMaterialAuxiliaryPasses};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}