{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { sqlAnd as e } from \"../../../../../core/sql.js\";\nimport { systemIsSpatialFieldName as r } from \"../../../../../layers/knowledgeGraph/constants.js\";\nimport t from \"../../../../../layers/support/FeatureFilter.js\";\nimport { getEffectiveFeatureReduction as o } from \"./featureReductionUtils.js\";\nimport { getServiceGeometryType as s } from \"./geometryUtils.js\";\nimport { getFeatureReductionDeconflictionEnabled as i, getLayerDeconflictionEnabled as a, createLabelVVEvaluator as l } from \"./labelingUtils.js\";\nimport { createFeatureSourceSchema as n } from \"../schema/SourceSchema.js\";\nimport { createSimpleProcessorSchema as p } from \"../schema/processor/SimpleProcessorSchema.js\";\nimport { isRendererSupported as u } from \"../support/rendererUtils.js\";\nclass c {\n  constructor(e) {\n    this.layer = e;\n  }\n  getLabelingDeconflictionInfo(e) {\n    const r = this.layer,\n      t = i(r, e) ?? a(r);\n    return [{\n      vvEvaluators: {\n        0: l(r.renderer)\n      },\n      deconflictionEnabled: t\n    }];\n  }\n  async createServiceOptions(e) {\n    const r = this.layer,\n      {\n        capabilities: t,\n        objectIdField: o\n      } = r,\n      i = r.fieldsIndex.toJSON(),\n      a = s(r),\n      l = r.spatialReference.toJSON(),\n      n = await r.source.openPorts(),\n      p = o,\n      u = e.spatialReference.toJSON();\n    return {\n      type: \"memory\",\n      source: n,\n      orderByFields: p,\n      outSpatialReference: u,\n      metadata: {\n        fieldsIndex: i,\n        geometryType: a,\n        objectIdField: o,\n        spatialReference: l,\n        outSpatialReference: u,\n        globalIdField: null,\n        subtypeField: null,\n        subtypes: null,\n        timeInfo: r.timeInfo?.toJSON(),\n        timeReferenceUnknownClient: null,\n        dateFieldsTimeZone: null,\n        typeIdField: null,\n        types: null\n      },\n      queryMetadata: {\n        maxRecordCount: t.query.maxRecordCount,\n        supportsCompactGeometry: t.query.supportsCompactGeometry,\n        supportsDefaultSpatialReference: t.query.supportsDefaultSpatialReference,\n        supportsFormatPBF: t.query.supportsFormatPBF,\n        supportsMaxRecordCountFactor: t.query.supportsMaxRecordCountFactor,\n        supportsQuantization: t.query.supportsQuantization,\n        lastEditDate: null,\n        snapshotInfo: null\n      }\n    };\n  }\n  createSourceSchema(e, r) {\n    const {\n      definitionExpression: t,\n      displayFilterInfo: o\n    } = this.layer;\n    return n({\n      definitionExpression: t,\n      displayFilterInfo: o,\n      customParameters: null\n    }, e, r, null);\n  }\n  createProcessorSchema(e, r, t) {\n    const {\n        fields: s,\n        renderer: i,\n        geometryType: a,\n        labelingInfo: l,\n        labelsVisible: n,\n        objectIdField: u\n      } = this.layer,\n      c = {\n        fields: s.map(e => e.toJSON()),\n        renderer: i?.clone(),\n        featureReduction: o(this.layer, r),\n        geometryType: a,\n        labelingInfo: l,\n        labelsVisible: n,\n        objectIdField: u,\n        orderBy: \"default\"\n      };\n    return p(e, r, c, t);\n  }\n  get hasRequiredSupport() {\n    return u(this.layer.renderer);\n  }\n  get timeOptions() {\n    return this.layer;\n  }\n  getUpdateHashProperties(e) {\n    return [() => this.layer.definitionExpression, () => this.layer.renderer, () => this.layer.labelsVisible ? this.layer.labelingInfo : null, () => o(this.layer, e), () => d(this.layer)];\n  }\n  hasFilters(e) {\n    return d(this.layer);\n  }\n  addFilters(o, s) {\n    if (d(this.layer)) {\n      const s = e(o?.where, `${r}=1`);\n      if (!s) return o;\n      o ??= new t(), o.where = s;\n    }\n    return o;\n  }\n}\nfunction d(e) {\n  return \"link-chart\" === e.parentCompositeLayer.type && \"hidden\" === e.parentCompositeLayer.linkChart?.linkChartProperties.nonspatialDataDisplay?.mode;\n}\nexport { c as KnowledgeGraphSublayerAdapter };","map":{"version":3,"names":["sqlAnd","e","systemIsSpatialFieldName","r","t","getEffectiveFeatureReduction","o","getServiceGeometryType","s","getFeatureReductionDeconflictionEnabled","i","getLayerDeconflictionEnabled","a","createLabelVVEvaluator","l","createFeatureSourceSchema","n","createSimpleProcessorSchema","p","isRendererSupported","u","c","constructor","layer","getLabelingDeconflictionInfo","vvEvaluators","renderer","deconflictionEnabled","createServiceOptions","capabilities","objectIdField","fieldsIndex","toJSON","spatialReference","source","openPorts","type","orderByFields","outSpatialReference","metadata","geometryType","globalIdField","subtypeField","subtypes","timeInfo","timeReferenceUnknownClient","dateFieldsTimeZone","typeIdField","types","queryMetadata","maxRecordCount","query","supportsCompactGeometry","supportsDefaultSpatialReference","supportsFormatPBF","supportsMaxRecordCountFactor","supportsQuantization","lastEditDate","snapshotInfo","createSourceSchema","definitionExpression","displayFilterInfo","customParameters","createProcessorSchema","fields","labelingInfo","labelsVisible","map","clone","featureReduction","orderBy","hasRequiredSupport","timeOptions","getUpdateHashProperties","d","hasFilters","addFilters","where","parentCompositeLayer","linkChart","linkChartProperties","nonspatialDataDisplay","mode","KnowledgeGraphSublayerAdapter"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/KnowledgeGraphSublayerAdapter.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{sqlAnd as e}from\"../../../../../core/sql.js\";import{systemIsSpatialFieldName as r}from\"../../../../../layers/knowledgeGraph/constants.js\";import t from\"../../../../../layers/support/FeatureFilter.js\";import{getEffectiveFeatureReduction as o}from\"./featureReductionUtils.js\";import{getServiceGeometryType as s}from\"./geometryUtils.js\";import{getFeatureReductionDeconflictionEnabled as i,getLayerDeconflictionEnabled as a,createLabelVVEvaluator as l}from\"./labelingUtils.js\";import{createFeatureSourceSchema as n}from\"../schema/SourceSchema.js\";import{createSimpleProcessorSchema as p}from\"../schema/processor/SimpleProcessorSchema.js\";import{isRendererSupported as u}from\"../support/rendererUtils.js\";class c{constructor(e){this.layer=e}getLabelingDeconflictionInfo(e){const r=this.layer,t=i(r,e)??a(r);return[{vvEvaluators:{0:l(r.renderer)},deconflictionEnabled:t}]}async createServiceOptions(e){const r=this.layer,{capabilities:t,objectIdField:o}=r,i=r.fieldsIndex.toJSON(),a=s(r),l=r.spatialReference.toJSON(),n=await r.source.openPorts(),p=o,u=e.spatialReference.toJSON();return{type:\"memory\",source:n,orderByFields:p,outSpatialReference:u,metadata:{fieldsIndex:i,geometryType:a,objectIdField:o,spatialReference:l,outSpatialReference:u,globalIdField:null,subtypeField:null,subtypes:null,timeInfo:r.timeInfo?.toJSON(),timeReferenceUnknownClient:null,dateFieldsTimeZone:null,typeIdField:null,types:null},queryMetadata:{maxRecordCount:t.query.maxRecordCount,supportsCompactGeometry:t.query.supportsCompactGeometry,supportsDefaultSpatialReference:t.query.supportsDefaultSpatialReference,supportsFormatPBF:t.query.supportsFormatPBF,supportsMaxRecordCountFactor:t.query.supportsMaxRecordCountFactor,supportsQuantization:t.query.supportsQuantization,lastEditDate:null,snapshotInfo:null}}}createSourceSchema(e,r){const{definitionExpression:t,displayFilterInfo:o}=this.layer;return n({definitionExpression:t,displayFilterInfo:o,customParameters:null},e,r,null)}createProcessorSchema(e,r,t){const{fields:s,renderer:i,geometryType:a,labelingInfo:l,labelsVisible:n,objectIdField:u}=this.layer,c={fields:s.map((e=>e.toJSON())),renderer:i?.clone(),featureReduction:o(this.layer,r),geometryType:a,labelingInfo:l,labelsVisible:n,objectIdField:u,orderBy:\"default\"};return p(e,r,c,t)}get hasRequiredSupport(){return u(this.layer.renderer)}get timeOptions(){return this.layer}getUpdateHashProperties(e){return[()=>this.layer.definitionExpression,()=>this.layer.renderer,()=>this.layer.labelsVisible?this.layer.labelingInfo:null,()=>o(this.layer,e),()=>d(this.layer)]}hasFilters(e){return d(this.layer)}addFilters(o,s){if(d(this.layer)){const s=e(o?.where,`${r}=1`);if(!s)return o;o??=new t,o.where=s}return o}}function d(e){return\"link-chart\"===e.parentCompositeLayer.type&&\"hidden\"===e.parentCompositeLayer.linkChart?.linkChartProperties.nonspatialDataDisplay?.mode}export{c as KnowledgeGraphSublayerAdapter};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,MAAM,IAAIC,CAAC,QAAK,4BAA4B;AAAC,SAAOC,wBAAwB,IAAIC,CAAC,QAAK,mDAAmD;AAAC,OAAOC,CAAC,MAAK,gDAAgD;AAAC,SAAOC,4BAA4B,IAAIC,CAAC,QAAK,4BAA4B;AAAC,SAAOC,sBAAsB,IAAIC,CAAC,QAAK,oBAAoB;AAAC,SAAOC,uCAAuC,IAAIC,CAAC,EAACC,4BAA4B,IAAIC,CAAC,EAACC,sBAAsB,IAAIC,CAAC,QAAK,oBAAoB;AAAC,SAAOC,yBAAyB,IAAIC,CAAC,QAAK,2BAA2B;AAAC,SAAOC,2BAA2B,IAAIC,CAAC,QAAK,8CAA8C;AAAC,SAAOC,mBAAmB,IAAIC,CAAC,QAAK,6BAA6B;AAAC,MAAMC,CAAC;EAACC,WAAWA,CAACrB,CAAC,EAAC;IAAC,IAAI,CAACsB,KAAK,GAACtB,CAAC;EAAA;EAACuB,4BAA4BA,CAACvB,CAAC,EAAC;IAAC,MAAME,CAAC,GAAC,IAAI,CAACoB,KAAK;MAACnB,CAAC,GAACM,CAAC,CAACP,CAAC,EAACF,CAAC,CAAC,IAAEW,CAAC,CAACT,CAAC,CAAC;IAAC,OAAM,CAAC;MAACsB,YAAY,EAAC;QAAC,CAAC,EAACX,CAAC,CAACX,CAAC,CAACuB,QAAQ;MAAC,CAAC;MAACC,oBAAoB,EAACvB;IAAC,CAAC,CAAC;EAAA;EAAC,MAAMwB,oBAAoBA,CAAC3B,CAAC,EAAC;IAAC,MAAME,CAAC,GAAC,IAAI,CAACoB,KAAK;MAAC;QAACM,YAAY,EAACzB,CAAC;QAAC0B,aAAa,EAACxB;MAAC,CAAC,GAACH,CAAC;MAACO,CAAC,GAACP,CAAC,CAAC4B,WAAW,CAACC,MAAM,CAAC,CAAC;MAACpB,CAAC,GAACJ,CAAC,CAACL,CAAC,CAAC;MAACW,CAAC,GAACX,CAAC,CAAC8B,gBAAgB,CAACD,MAAM,CAAC,CAAC;MAAChB,CAAC,GAAC,MAAMb,CAAC,CAAC+B,MAAM,CAACC,SAAS,CAAC,CAAC;MAACjB,CAAC,GAACZ,CAAC;MAACc,CAAC,GAACnB,CAAC,CAACgC,gBAAgB,CAACD,MAAM,CAAC,CAAC;IAAC,OAAM;MAACI,IAAI,EAAC,QAAQ;MAACF,MAAM,EAAClB,CAAC;MAACqB,aAAa,EAACnB,CAAC;MAACoB,mBAAmB,EAAClB,CAAC;MAACmB,QAAQ,EAAC;QAACR,WAAW,EAACrB,CAAC;QAAC8B,YAAY,EAAC5B,CAAC;QAACkB,aAAa,EAACxB,CAAC;QAAC2B,gBAAgB,EAACnB,CAAC;QAACwB,mBAAmB,EAAClB,CAAC;QAACqB,aAAa,EAAC,IAAI;QAACC,YAAY,EAAC,IAAI;QAACC,QAAQ,EAAC,IAAI;QAACC,QAAQ,EAACzC,CAAC,CAACyC,QAAQ,EAAEZ,MAAM,CAAC,CAAC;QAACa,0BAA0B,EAAC,IAAI;QAACC,kBAAkB,EAAC,IAAI;QAACC,WAAW,EAAC,IAAI;QAACC,KAAK,EAAC;MAAI,CAAC;MAACC,aAAa,EAAC;QAACC,cAAc,EAAC9C,CAAC,CAAC+C,KAAK,CAACD,cAAc;QAACE,uBAAuB,EAAChD,CAAC,CAAC+C,KAAK,CAACC,uBAAuB;QAACC,+BAA+B,EAACjD,CAAC,CAAC+C,KAAK,CAACE,+BAA+B;QAACC,iBAAiB,EAAClD,CAAC,CAAC+C,KAAK,CAACG,iBAAiB;QAACC,4BAA4B,EAACnD,CAAC,CAAC+C,KAAK,CAACI,4BAA4B;QAACC,oBAAoB,EAACpD,CAAC,CAAC+C,KAAK,CAACK,oBAAoB;QAACC,YAAY,EAAC,IAAI;QAACC,YAAY,EAAC;MAAI;IAAC,CAAC;EAAA;EAACC,kBAAkBA,CAAC1D,CAAC,EAACE,CAAC,EAAC;IAAC,MAAK;MAACyD,oBAAoB,EAACxD,CAAC;MAACyD,iBAAiB,EAACvD;IAAC,CAAC,GAAC,IAAI,CAACiB,KAAK;IAAC,OAAOP,CAAC,CAAC;MAAC4C,oBAAoB,EAACxD,CAAC;MAACyD,iBAAiB,EAACvD,CAAC;MAACwD,gBAAgB,EAAC;IAAI,CAAC,EAAC7D,CAAC,EAACE,CAAC,EAAC,IAAI,CAAC;EAAA;EAAC4D,qBAAqBA,CAAC9D,CAAC,EAACE,CAAC,EAACC,CAAC,EAAC;IAAC,MAAK;QAAC4D,MAAM,EAACxD,CAAC;QAACkB,QAAQ,EAAChB,CAAC;QAAC8B,YAAY,EAAC5B,CAAC;QAACqD,YAAY,EAACnD,CAAC;QAACoD,aAAa,EAAClD,CAAC;QAACc,aAAa,EAACV;MAAC,CAAC,GAAC,IAAI,CAACG,KAAK;MAACF,CAAC,GAAC;QAAC2C,MAAM,EAACxD,CAAC,CAAC2D,GAAG,CAAElE,CAAC,IAAEA,CAAC,CAAC+B,MAAM,CAAC,CAAE,CAAC;QAACN,QAAQ,EAAChB,CAAC,EAAE0D,KAAK,CAAC,CAAC;QAACC,gBAAgB,EAAC/D,CAAC,CAAC,IAAI,CAACiB,KAAK,EAACpB,CAAC,CAAC;QAACqC,YAAY,EAAC5B,CAAC;QAACqD,YAAY,EAACnD,CAAC;QAACoD,aAAa,EAAClD,CAAC;QAACc,aAAa,EAACV,CAAC;QAACkD,OAAO,EAAC;MAAS,CAAC;IAAC,OAAOpD,CAAC,CAACjB,CAAC,EAACE,CAAC,EAACkB,CAAC,EAACjB,CAAC,CAAC;EAAA;EAAC,IAAImE,kBAAkBA,CAAA,EAAE;IAAC,OAAOnD,CAAC,CAAC,IAAI,CAACG,KAAK,CAACG,QAAQ,CAAC;EAAA;EAAC,IAAI8C,WAAWA,CAAA,EAAE;IAAC,OAAO,IAAI,CAACjD,KAAK;EAAA;EAACkD,uBAAuBA,CAACxE,CAAC,EAAC;IAAC,OAAM,CAAC,MAAI,IAAI,CAACsB,KAAK,CAACqC,oBAAoB,EAAC,MAAI,IAAI,CAACrC,KAAK,CAACG,QAAQ,EAAC,MAAI,IAAI,CAACH,KAAK,CAAC2C,aAAa,GAAC,IAAI,CAAC3C,KAAK,CAAC0C,YAAY,GAAC,IAAI,EAAC,MAAI3D,CAAC,CAAC,IAAI,CAACiB,KAAK,EAACtB,CAAC,CAAC,EAAC,MAAIyE,CAAC,CAAC,IAAI,CAACnD,KAAK,CAAC,CAAC;EAAA;EAACoD,UAAUA,CAAC1E,CAAC,EAAC;IAAC,OAAOyE,CAAC,CAAC,IAAI,CAACnD,KAAK,CAAC;EAAA;EAACqD,UAAUA,CAACtE,CAAC,EAACE,CAAC,EAAC;IAAC,IAAGkE,CAAC,CAAC,IAAI,CAACnD,KAAK,CAAC,EAAC;MAAC,MAAMf,CAAC,GAACP,CAAC,CAACK,CAAC,EAAEuE,KAAK,EAAC,GAAG1E,CAAC,IAAI,CAAC;MAAC,IAAG,CAACK,CAAC,EAAC,OAAOF,CAAC;MAACA,CAAC,KAAG,IAAIF,CAAC,CAAD,CAAC,EAACE,CAAC,CAACuE,KAAK,GAACrE,CAAC;IAAA;IAAC,OAAOF,CAAC;EAAA;AAAC;AAAC,SAASoE,CAACA,CAACzE,CAAC,EAAC;EAAC,OAAM,YAAY,KAAGA,CAAC,CAAC6E,oBAAoB,CAAC1C,IAAI,IAAE,QAAQ,KAAGnC,CAAC,CAAC6E,oBAAoB,CAACC,SAAS,EAAEC,mBAAmB,CAACC,qBAAqB,EAAEC,IAAI;AAAA;AAAC,SAAO7D,CAAC,IAAI8D,6BAA6B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}