{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport { Float3PassUniform as e } from \"../../shaderModules/Float3PassUniform.js\";\nimport { Float4sPassUniform as o } from \"../../shaderModules/Float4sPassUniform.js\";\nimport { FloatsPassUniform as r } from \"../../shaderModules/FloatsPassUniform.js\";\nimport { glsl as v } from \"../../shaderModules/glsl.js\";\nimport { Matrix3PassUniform as t } from \"../../shaderModules/Matrix3PassUniform.js\";\nimport { VertexAttribute as a } from \"../../../lib/VertexAttribute.js\";\nimport { vvColorNumber as i } from \"../../../materials/VisualVariablePassParameters.js\";\nfunction l(l, n) {\n  const {\n    vertex: s,\n    attributes: u\n  } = l;\n  n.hasVvInstancing && (n.vvSize || n.vvColor) && u.add(a.INSTANCEFEATUREATTRIBUTE, \"vec4\"), n.vvSize ? (s.uniforms.add(new e(\"vvSizeMinSize\", e => e.vvSize.minSize)), s.uniforms.add(new e(\"vvSizeMaxSize\", e => e.vvSize.maxSize)), s.uniforms.add(new e(\"vvSizeOffset\", e => e.vvSize.offset)), s.uniforms.add(new e(\"vvSizeFactor\", e => e.vvSize.factor)), s.uniforms.add(new t(\"vvSymbolRotationMatrix\", e => e.vvSymbolRotationMatrix)), s.uniforms.add(new e(\"vvSymbolAnchor\", e => e.vvSymbolAnchor)), s.code.add(v`vec3 vvScale(vec4 _featureAttribute) {\nreturn clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize);\n}\nvec4 vvTransformPosition(vec3 position, vec4 _featureAttribute) {\nreturn vec4(vvSymbolRotationMatrix * ( vvScale(_featureAttribute) * (position + vvSymbolAnchor)), 1.0);\n}`), s.code.add(v`\n      const float eps = 1.192092896e-07;\n      vec4 vvTransformNormal(vec3 _normal, vec4 _featureAttribute) {\n        vec3 vvScale = clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize + eps, vvSizeMaxSize);\n        return vec4(vvSymbolRotationMatrix * _normal / vvScale, 1.0);\n      }\n\n      ${n.hasVvInstancing ? v`\n      vec4 vvLocalNormal(vec3 _normal) {\n        return vvTransformNormal(_normal, instanceFeatureAttribute);\n      }\n\n      vec4 localPosition() {\n        return vvTransformPosition(position, instanceFeatureAttribute);\n      }` : \"\"}\n    `)) : s.code.add(v`vec4 localPosition() { return vec4(position, 1.0); }\nvec4 vvLocalNormal(vec3 _normal) { return vec4(_normal, 1.0); }`), n.vvColor ? (s.constants.add(\"vvColorNumber\", \"int\", i), s.uniforms.add(new r(\"vvColorValues\", e => e.vvColor.values, i), new o(\"vvColorColors\", e => e.vvColor.colors, i)), s.code.add(v`\n      vec4 interpolateVVColor(float value) {\n        if (value <= vvColorValues[0]) {\n          return vvColorColors[0];\n        }\n\n        for (int i = 1; i < vvColorNumber; ++i) {\n          if (vvColorValues[i] >= value) {\n            float f = (value - vvColorValues[i-1]) / (vvColorValues[i] - vvColorValues[i-1]);\n            return mix(vvColorColors[i-1], vvColorColors[i], f);\n          }\n        }\n        return vvColorColors[vvColorNumber - 1];\n      }\n\n      vec4 vvGetColor(vec4 featureAttribute) {\n        return interpolateVVColor(featureAttribute.y);\n      }\n\n      ${n.hasVvInstancing ? v`\n            vec4 vvColor() {\n              return vvGetColor(instanceFeatureAttribute);\n            }` : \"vec4 vvColor() { return vec4(1.0); }\"}\n    `)) : s.code.add(v`vec4 vvColor() { return vec4(1.0); }`);\n}\nexport { l as VisualVariables };","map":{"version":3,"names":["Float3PassUniform","e","Float4sPassUniform","o","FloatsPassUniform","r","glsl","v","Matrix3PassUniform","t","VertexAttribute","a","vvColorNumber","i","l","n","vertex","s","attributes","u","hasVvInstancing","vvSize","vvColor","add","INSTANCEFEATUREATTRIBUTE","uniforms","minSize","maxSize","offset","factor","vvSymbolRotationMatrix","vvSymbolAnchor","code","constants","values","colors","VisualVariables"],"sources":["C:/Users/nolan/tasks/HenHacks2025/henhack25/node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{Float3PassUniform as e}from\"../../shaderModules/Float3PassUniform.js\";import{Float4sPassUniform as o}from\"../../shaderModules/Float4sPassUniform.js\";import{FloatsPassUniform as r}from\"../../shaderModules/FloatsPassUniform.js\";import{glsl as v}from\"../../shaderModules/glsl.js\";import{Matrix3PassUniform as t}from\"../../shaderModules/Matrix3PassUniform.js\";import{VertexAttribute as a}from\"../../../lib/VertexAttribute.js\";import{vvColorNumber as i}from\"../../../materials/VisualVariablePassParameters.js\";function l(l,n){const{vertex:s,attributes:u}=l;n.hasVvInstancing&&(n.vvSize||n.vvColor)&&u.add(a.INSTANCEFEATUREATTRIBUTE,\"vec4\"),n.vvSize?(s.uniforms.add(new e(\"vvSizeMinSize\",(e=>e.vvSize.minSize))),s.uniforms.add(new e(\"vvSizeMaxSize\",(e=>e.vvSize.maxSize))),s.uniforms.add(new e(\"vvSizeOffset\",(e=>e.vvSize.offset))),s.uniforms.add(new e(\"vvSizeFactor\",(e=>e.vvSize.factor))),s.uniforms.add(new t(\"vvSymbolRotationMatrix\",(e=>e.vvSymbolRotationMatrix))),s.uniforms.add(new e(\"vvSymbolAnchor\",(e=>e.vvSymbolAnchor))),s.code.add(v`vec3 vvScale(vec4 _featureAttribute) {\nreturn clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize);\n}\nvec4 vvTransformPosition(vec3 position, vec4 _featureAttribute) {\nreturn vec4(vvSymbolRotationMatrix * ( vvScale(_featureAttribute) * (position + vvSymbolAnchor)), 1.0);\n}`),s.code.add(v`\n      const float eps = 1.192092896e-07;\n      vec4 vvTransformNormal(vec3 _normal, vec4 _featureAttribute) {\n        vec3 vvScale = clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize + eps, vvSizeMaxSize);\n        return vec4(vvSymbolRotationMatrix * _normal / vvScale, 1.0);\n      }\n\n      ${n.hasVvInstancing?v`\n      vec4 vvLocalNormal(vec3 _normal) {\n        return vvTransformNormal(_normal, instanceFeatureAttribute);\n      }\n\n      vec4 localPosition() {\n        return vvTransformPosition(position, instanceFeatureAttribute);\n      }`:\"\"}\n    `)):s.code.add(v`vec4 localPosition() { return vec4(position, 1.0); }\nvec4 vvLocalNormal(vec3 _normal) { return vec4(_normal, 1.0); }`),n.vvColor?(s.constants.add(\"vvColorNumber\",\"int\",i),s.uniforms.add(new r(\"vvColorValues\",(e=>e.vvColor.values),i),new o(\"vvColorColors\",(e=>e.vvColor.colors),i)),s.code.add(v`\n      vec4 interpolateVVColor(float value) {\n        if (value <= vvColorValues[0]) {\n          return vvColorColors[0];\n        }\n\n        for (int i = 1; i < vvColorNumber; ++i) {\n          if (vvColorValues[i] >= value) {\n            float f = (value - vvColorValues[i-1]) / (vvColorValues[i] - vvColorValues[i-1]);\n            return mix(vvColorColors[i-1], vvColorColors[i], f);\n          }\n        }\n        return vvColorColors[vvColorNumber - 1];\n      }\n\n      vec4 vvGetColor(vec4 featureAttribute) {\n        return interpolateVVColor(featureAttribute.y);\n      }\n\n      ${n.hasVvInstancing?v`\n            vec4 vvColor() {\n              return vvGetColor(instanceFeatureAttribute);\n            }`:\"vec4 vvColor() { return vec4(1.0); }\"}\n    `)):s.code.add(v`vec4 vvColor() { return vec4(1.0); }`)}export{l as VisualVariables};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}