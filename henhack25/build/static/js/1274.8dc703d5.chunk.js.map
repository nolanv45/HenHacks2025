{"version":3,"file":"static/js/1274.8dc703d5.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/webgl/VertexElementDescriptor.js","../node_modules/@arcgis/core/geometry/support/lineSegment.js","../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat3f64.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/sceneLayerSource/sceneLayerSnappingUtils.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/sceneLayerSource/SceneLayerSnappingSourceWorker.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nclass t{constructor(t,s,i,h,o,e=!1,r=0){this.name=t,this.count=s,this.type=i,this.offset=h,this.stride=o,this.normalized=e,this.divisor=r}}export{t as VertexElementDescriptor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../core/mathUtils.js\";import{ObjectStack as r}from\"../../core/ObjectStack.js\";import{c as n,d as o,f as e,h as i,g as c,k as s,s as u}from\"../../chunks/vec32.js\";import{clone as a,create as g}from\"../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{sv3d as f}from\"./vectorStacks.js\";function v(t){return t?{origin:a(t.origin),vector:a(t.vector)}:{origin:g(),vector:g()}}function m(t,r){const n=S.get();return n.origin=t,n.vector=r,n}function p(t,r=v()){return h(t.origin,t.vector,r)}function h(t,r,o=v()){return n(o.origin,t),n(o.vector,r),o}function b(t,r,e=v()){return n(e.origin,t),o(e.vector,r,t),e}function M(r,n){const c=o(f.get(),n,r.origin),s=e(r.vector,c),u=e(r.vector,r.vector),a=t(s/u,0,1),g=o(f.get(),i(f.get(),r.vector,a),c);return e(g,g)}function j(t,r,n){return A(t,r,0,1,n)}function l(t,r,n){return c(n,t.origin,i(n,t.vector,r))}function A(r,n,u,a,g){const{vector:v,origin:m}=r,p=o(f.get(),n,m),h=e(v,p)/s(v);return i(g,v,t(h,u,a)),c(g,g,r.origin)}function d(t,r){if(k(t,m(r.origin,r.direction),!1,x)){const{tA:r,pB:n,distance2:o}=x;if(r>=0&&r<=1)return o;if(r<0)return u(t.origin,n);if(r>1)return u(c(f.get(),t.origin,t.vector),n)}return null}function B(t,r,o){return!!k(t,r,!0,x)&&(n(o,x.pA),!0)}function k(r,n,o,e){const i=1e-6,s=r.origin,a=c(f.get(),s,r.vector),g=n.origin,v=c(f.get(),g,n.vector),m=f.get(),p=f.get();if(m[0]=s[0]-g[0],m[1]=s[1]-g[1],m[2]=s[2]-g[2],p[0]=v[0]-g[0],p[1]=v[1]-g[1],p[2]=v[2]-g[2],Math.abs(p[0])<i&&Math.abs(p[1])<i&&Math.abs(p[2])<i)return!1;const h=f.get();if(h[0]=a[0]-s[0],h[1]=a[1]-s[1],h[2]=a[2]-s[2],Math.abs(h[0])<i&&Math.abs(h[1])<i&&Math.abs(h[2])<i)return!1;const b=m[0]*p[0]+m[1]*p[1]+m[2]*p[2],M=p[0]*h[0]+p[1]*h[1]+p[2]*h[2],j=m[0]*h[0]+m[1]*h[1]+m[2]*h[2],l=p[0]*p[0]+p[1]*p[1]+p[2]*p[2],A=(h[0]*h[0]+h[1]*h[1]+h[2]*h[2])*l-M*M;if(Math.abs(A)<i)return!1;let d=(b*M-j*l)/A,B=(b+M*d)/l;o&&(d=t(d,0,1),B=t(B,0,1));const k=f.get(),x=f.get();return k[0]=s[0]+d*h[0],k[1]=s[1]+d*h[1],k[2]=s[2]+d*h[2],x[0]=g[0]+B*p[0],x[1]=g[1]+B*p[1],x[2]=g[2]+B*p[2],e.tA=d,e.tB=B,e.pA=k,e.pB=x,e.distance2=u(k,x),!0}const x={tA:0,tB:0,pA:g(),pB:g(),distance2:0},S=new r((()=>v()));export{B as closestLineSegmentPoint,d as closestRayDistance2,p as copy,v as create,M as distance2,b as fromPoints,h as fromValues,l as pointAt,j as projectPoint,A as projectPointClamp,m as wrap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nfunction e(){return[1,0,0,0,1,0,0,0,1]}function r(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]}function t(e,r,t,n,o,u,c,a,l){return[e,r,t,n,o,u,c,a,l]}function n(e,r){return new Float64Array(e,r,9)}const o=e(),u=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:r,create:e,createView:n,fromValues:t},Symbol.toStringTag,{value:\"Module\"}));export{o as IDENTITY,r as clone,e as create,n as createView,t as fromValues,u as m};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{b as s,j as o,g as r}from\"../../../../../chunks/vec32.js\";import{c,a as n}from\"../../../../../chunks/sphere.js\";const t=1e3;function a(t,a,e){const m=c(),p=n(m);return s(p,p,t,.5),s(p,p,a,.5),m[3]=o(p,t),r(p,p,e),m}export{a as boundsFromEdge,t as maxCandidateCount};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import{throwIfAborted as t}from\"../../../../../core/promiseUtils.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/has.js\";import\"../../../../../core/RandomLCG.js\";import\"../../../../../core/Error.js\";import{subclass as o}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{g as s,j as n}from\"../../../../../chunks/vec32.js\";import{create as i,clone as r}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{create as c,fromPoints as d,projectPoint as a}from\"../../../../../geometry/support/lineSegment.js\";import{a as p,o as m}from\"../../../../../chunks/sphere.js\";import u from\"../../../../3d/webgl-engine/lib/Octree.js\";import{extractComponentsEdgeLocationsLayout as h}from\"../../../../3d/webgl-engine/lib/edgeRendering/edgeProcessing.js\";import{maxCandidateCount as g,boundsFromEdge as l}from\"./sceneLayerSnappingUtils.js\";let f=class{constructor(){this._idToComponent=new Map,this._components=new u((e=>e.bounds)),this._edges=new u((e=>e.bounds)),this._tmpLineSegment=c(),this._tmpP1=i(),this._tmpP2=i(),this._tmpP3=i(),this.remoteClient=null}async fetchCandidates(e,o){await Promise.resolve(),t(o),await this._ensureEdgeLocations(e,o);const s=[];return this._edges.forEachNeighbor((t=>(this._addCandidates(e,t,s),s.length<g)),e.bounds),{result:{candidates:s}}}async _ensureEdgeLocations(e,t){const o=[];if(this._components.forEachNeighbor((e=>{if(null==e.info){const{id:t,uid:s}=e;o.push({id:t,uid:s})}return!0}),e.bounds),!o.length)return;const s={components:o},n=await this.remoteClient.invoke(\"fetchAllEdgeLocations\",s,t??{});for(const i of n.components)this._setFetchEdgeLocations(i)}async add(e){const t=new j(e.id,e.bounds);return this._idToComponent.set(t.id,t),this._components.add([t]),{result:{}}}async remove(e){const t=this._idToComponent.get(e.id);if(t){const e=[];this._edges.forEachNeighbor((o=>(o.component===t&&e.push(o),!0)),t.bounds),this._edges.remove(e),this._components.remove([t]),this._idToComponent.delete(t.id)}return{result:{}}}_setFetchEdgeLocations(e){const t=this._idToComponent.get(e.id);if(null==t||e.uid!==t.uid)return;const o=h.createView(e.locations),s=new Array(o.count),n=i(),r=i();for(let i=0;i<o.count;i++){o.position0.getVec(i,n),o.position1.getVec(i,r);const c=l(n,r,e.origin),d=new w(t,i,c);s[i]=d}this._edges.add(s);const{objectIds:c,origin:d}=e;t.info={locations:o,objectIds:c,origin:d}}_addCandidates(e,t,o){const{info:n}=t.component,{origin:i,objectIds:r}=n,c=n.locations,d=c.position0.getVec(t.index,this._tmpP1),a=c.position1.getVec(t.index,this._tmpP2);s(d,d,i),s(a,a,i);const p=r[c.componentIndex.get(t.index)];this._addEdgeCandidate(e,p,d,a,o),b(e,p,d,o),b(e,p,a,o)}_addEdgeCandidate(e,t,o,s,i){if(!e.returnEdge)return;const c=p(e.bounds),u=d(o,s,this._tmpLineSegment),h=a(u,c,this._tmpP3);m(e.bounds,h)&&i.push({type:\"edge\",objectId:t,target:r(h),distance:n(c,h),start:r(o),end:r(s)})}};f=e([o(\"esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker\")],f);const _=f;function b(e,t,o,s){if(!e.returnVertex||!m(e.bounds,o))return;const i=p(e.bounds);s.push({type:\"vertex\",objectId:t,target:r(o),distance:n(i,o)})}class j{constructor(e,t){this.id=e,this.bounds=t,this.info=null,this.uid=++j.uid}}j.uid=0;class w{constructor(e,t,o){this.component=e,this.index=t,this.bounds=o}}export{_ as default};\n"],"names":["t","constructor","s","i","h","o","e","arguments","length","undefined","r","this","name","count","type","offset","stride","normalized","divisor","v","origin","a","vector","g","p","n","b","M","c","f","get","u","j","A","l","m","d","k","S","direction","x","tA","pB","distance2","B","pA","Math","abs","tB","Object","freeze","defineProperty","__proto__","IDENTITY","clone","create","createView","Float64Array","fromValues","Symbol","toStringTag","value","_idToComponent","Map","_components","bounds","_edges","_tmpLineSegment","_tmpP1","_tmpP2","_tmpP3","remoteClient","fetchCandidates","Promise","resolve","_ensureEdgeLocations","forEachNeighbor","_addCandidates","result","candidates","info","id","uid","push","components","invoke","_setFetchEdgeLocations","add","set","remove","component","delete","locations","Array","position0","getVec","position1","w","objectIds","index","componentIndex","_addEdgeCandidate","returnEdge","objectId","target","distance","start","end","_","returnVertex"],"sourceRoot":""}