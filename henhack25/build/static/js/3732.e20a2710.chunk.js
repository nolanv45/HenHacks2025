"use strict";(self.webpackChunkhenhack25=self.webpackChunkhenhack25||[]).push([[3732],{2687:(e,t,r)=>{r.d(t,{N5:()=>u});var n=r(50076),i=(r(81806),r(76460)),o=r(69728);const s=()=>i.A.getLogger("esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder");class a{constructor(){this._includedModules=new Map}include(e,t){this._includedModules.has(e)?this._includedModules.get(e):(this._includedModules.set(e,t),e(this.builder,t))}}class u extends a{constructor(){super(...arguments),this.vertex=new h,this.fragment=new h,this.attributes=new d,this.varyings=new g,this.extensions=new m,this.outputs=new p}get fragmentUniforms(){return this.fragment.uniforms.entries}get builder(){return this}generate(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=this.extensions.generateSource(e),n=this.attributes.generateSource(e),i=this.varyings.generateSource(e),o="vertex"===e?this.vertex:this.fragment,s=o.uniforms.generateSource(),a=o.code.generateSource(),u=o.main.generateSource(t),c="vertex"===e?S:y,f=o.constants.generateSource(),l=this.outputs.generateSource(e);return`#version 300 es\n${r.join("\n")}\n${c}\n${f.join("\n")}\n${s.join("\n")}\n${n.join("\n")}\n${i.join("\n")}\n${l.join("\n")}\n${a.join("\n")}\n${u.join("\n")}`}generateBind(e){const t=new Map;this.vertex.uniforms.entries.forEach((e=>{const r=e.bind[o.c.Bind];r&&t.set(e.name,r)})),this.fragment.uniforms.entries.forEach((e=>{const r=e.bind[o.c.Bind];r&&t.set(e.name,r)}));const r=Array.from(t.values()),n=r.length;return t=>{for(let i=0;i<n;++i)r[i](e,t)}}generateBindPass(e){const t=new Map;this.vertex.uniforms.entries.forEach((e=>{const r=e.bind[o.c.Pass];r&&t.set(e.name,r)})),this.fragment.uniforms.entries.forEach((e=>{const r=e.bind[o.c.Pass];r&&t.set(e.name,r)}));const r=Array.from(t.values()),n=r.length;return(t,i)=>{for(let o=0;o<n;++o)r[o](e,t,i)}}generateBindDraw(e){const t=new Map;this.vertex.uniforms.entries.forEach((e=>{const r=e.bind[o.c.Draw];r&&t.set(e.name,r)})),this.fragment.uniforms.entries.forEach((e=>{const r=e.bind[o.c.Draw];r&&t.set(e.name,r)}));const r=Array.from(t.values()),n=r.length;return(t,i,o)=>{for(let s=0;s<n;++s)r[s](e,o,t,i)}}}class c{constructor(e){this._stage=e,this._entries=new Map}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(const n of t)this._add(n);return this._stage}get(e){return this._entries.get(e)}_add(e){if(null!=e){if(this._entries.has(e.name)&&!this._entries.get(e.name).equals(e))throw new n.A(`Duplicate uniform name ${e.name} for different uniform type`);this._entries.set(e.name,e)}else s().error(`Trying to add null Uniform from ${(new Error).stack}.`)}generateSource(){return Array.from(this._entries.values()).map((e=>null!=e.arraySize?`uniform ${e.type} ${e.name}[${e.arraySize}];`:`uniform ${e.type} ${e.name};`))}get entries(){return Array.from(this._entries.values())}}class f{constructor(e){this._stage=e,this._bodies=new Array}add(e){return this._bodies.push(e),this._stage}generateSource(e){if(this._bodies.length>0)return[`void main() {\n ${this._bodies.join("\n")||""} \n}`];if(e)throw new n.A("Shader does not contain main function body.");return[]}}class l{constructor(e){this._stage=e,this._entries=new Array}add(e){return this._entries.push(e),this._stage}generateSource(){return this._entries}}class h extends a{constructor(){super(...arguments),this.uniforms=new c(this),this.main=new f(this),this.code=new l(this),this.constants=new _(this)}get builder(){return this}}class d{constructor(){this._entries=new Array}add(e,t){this._entries.push([e,t])}generateSource(e){return"fragment"===e?[]:this._entries.map((e=>`in ${e[1]} ${e[0]};`))}}class g{constructor(){this._entries=new Map}add(e,t){this._entries.has(e)?s().warn(`Ignoring duplicate varying ${t} ${e}`):this._entries.set(e,t)}generateSource(e){const t=new Array;return this._entries.forEach(((r,n)=>t.push("vertex"===e?`out ${r} ${n};`:`in ${r} ${n};`))),t}}class m{constructor(){this._entries=new Set}add(e){this._entries.add(e)}generateSource(e){const t="vertex"===e?m.ALLOWLIST_VERTEX:m.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter((e=>t.includes(e))).map((e=>`#extension ${e} : enable`))}}m.ALLOWLIST_FRAGMENT=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives"],m.ALLOWLIST_VERTEX=[];class p{constructor(){this._entries=new Map}add(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=this._entries.get(r);n?.name!==e||n?.type!==t?this._entries.set(r,{name:e,type:t}):s().warn(`Fragment shader output location ${r} occupied`)}generateSource(e){if("vertex"===e)return[];0===this._entries.size&&this._entries.set(0,{name:p.DEFAULT_NAME,type:p.DEFAULT_TYPE});const t=new Array;return this._entries.forEach(((e,r)=>t.push(`layout(location = ${r}) out ${e.type} ${e.name};`))),t}}p.DEFAULT_TYPE="vec4",p.DEFAULT_NAME="fragColor";class _{constructor(e){this._stage=e,this._entries=new Set}add(e,t,r){let n="ERROR_CONSTRUCTOR_STRING";switch(t){case"float":n=_._numberToFloatStr(r);break;case"int":n=_._numberToIntStr(r);break;case"bool":n=r.toString();break;case"vec2":n=`vec2(${_._numberToFloatStr(r[0])},                            ${_._numberToFloatStr(r[1])})`;break;case"vec3":n=`vec3(${_._numberToFloatStr(r[0])},                            ${_._numberToFloatStr(r[1])},                            ${_._numberToFloatStr(r[2])})`;break;case"vec4":n=`vec4(${_._numberToFloatStr(r[0])},                            ${_._numberToFloatStr(r[1])},                            ${_._numberToFloatStr(r[2])},                            ${_._numberToFloatStr(r[3])})`;break;case"ivec2":n=`ivec2(${_._numberToIntStr(r[0])},                             ${_._numberToIntStr(r[1])})`;break;case"ivec3":n=`ivec3(${_._numberToIntStr(r[0])},                             ${_._numberToIntStr(r[1])},                             ${_._numberToIntStr(r[2])})`;break;case"ivec4":n=`ivec4(${_._numberToIntStr(r[0])},                             ${_._numberToIntStr(r[1])},                             ${_._numberToIntStr(r[2])},                             ${_._numberToIntStr(r[3])})`;break;case"mat2":case"mat3":case"mat4":n=`${t}(${Array.prototype.map.call(r,(e=>_._numberToFloatStr(e))).join(", ")})`}return this._entries.add(`const ${t} ${e} = ${n};`),this._stage}static _numberToIntStr(e){return e.toFixed(0)}static _numberToFloatStr(e){return Number.isInteger(e)?e.toFixed(1):e.toString()}generateSource(){return Array.from(this._entries)}}const y="#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  precision highp int;\n  precision highp sampler2D;\n#else\n  precision mediump float;\n  precision mediump int;\n  precision mediump sampler2D;\n#endif",S="precision highp float;\nprecision highp sampler2D;"},10947:(e,t,r)=>{r.d(t,{a:()=>o,b:()=>f,l:()=>c,n:()=>a,t:()=>s});var n=r(99746),i=(r(81806),r(76460));function o(e,t,r){s(e.typedBuffer,t.typedBuffer,r,e.typedBufferStride,t.typedBufferStride)}function s(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n;if(e.length/n!=t.length/i)return;const o=e.length/n,s=r[0],a=r[1],u=r[2],c=r[3],f=r[4],l=r[5],h=r[6],d=r[7],g=r[8];let m=0,p=0;for(let _=0;_<o;_++){const r=t[m],o=t[m+1],_=t[m+2],y=t[m+3];e[p]=s*r+c*o+h*_,e[p+1]=a*r+f*o+d*_,e[p+2]=u*r+l*o+g*_,e[p+3]=y,m+=i,p+=n}}function a(e,t){const r=Math.min(e.count,t.count),n=e.typedBuffer,i=e.typedBufferStride,o=t.typedBuffer,s=t.typedBufferStride;for(let a=0;a<r;a++){const e=a*i,t=a*s,r=o[t],u=o[t+1],c=o[t+2],f=r*r+u*u+c*c;if(f>0){const t=1/Math.sqrt(f);n[e]=t*r,n[e+1]=t*u,n[e+2]=t*c}}}function u(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4;const i=Math.min(e.length/n,t.count),o=t.typedBuffer,s=t.typedBufferStride;let a=0,u=0;for(let c=0;c<i;c++)e[u]=r*o[a],e[u+1]=r*o[a+1],e[u+2]=r*o[a+2],e[u+3]=r*o[a+3],a+=s,u+=n}function c(e,t,r,n){f(e.typedBuffer,t,r,n,e.typedBufferStride)}function f(e,t,r,i){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4;const s=Math.min(e.length/o,t.count),a=t.typedBuffer,u=t.typedBufferStride;let c=0,f=0;const l=1/n.Tf;for(let n=0;n<s;n++)e[f]=i*(r*a[c])**l,e[f+1]=i*(r*a[c+1])**l,e[f+2]=i*(r*a[c+2])**l,e[f+3]=i*r*a[c+3],c+=u,f+=o}Object.freeze(Object.defineProperty({__proto__:null,linearToSRGB:f,linearToSRGBView:c,normalize:a,scale:u,scaleView:function(e,t,r){u(e.typedBuffer,t,r,e.typedBufferStride)},transformMat3:s,transformMat3View:o,transformMat4:function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n;if(e.length/n!=t.length/o)return void i.A.getLogger("esri.views.3d.support.buffer.math").error("source and destination buffers need to have the same number of elements");const s=e.length/n,a=r[0],u=r[1],c=r[2],f=r[3],l=r[4],h=r[5],d=r[6],g=r[7],m=r[8],p=r[9],_=r[10],y=r[11],S=r[12],b=r[13],v=r[14],w=r[15];let B=0,T=0;for(let i=0;i<s;i++){const r=t[B],i=t[B+1],s=t[B+2],$=t[B+3];e[T]=a*r+l*i+m*s+S*$,e[T+1]=u*r+h*i+p*s+b*$,e[T+2]=c*r+d*i+_*s+v*$,e[T+3]=f*r+g*i+y*s+w*$,B+=o,T+=n}},transformMat4View:function(e,t,r){if(e.count!==t.count)return;const n=e.count,i=r[0],o=r[1],s=r[2],a=r[3],u=r[4],c=r[5],f=r[6],l=r[7],h=r[8],d=r[9],g=r[10],m=r[11],p=r[12],_=r[13],y=r[14],S=r[15],b=e.typedBuffer,v=e.typedBufferStride,w=t.typedBuffer,B=t.typedBufferStride;for(let T=0;T<n;T++){const e=T*v,t=T*B,r=w[t],n=w[t+1],$=w[t+2],M=w[t+3];b[e]=i*r+u*n+h*$+p*M,b[e+1]=o*r+c*n+d*$+_*M,b[e+2]=s*r+f*n+g*$+y*M,b[e+3]=a*r+l*n+m*$+S*M}}},Symbol.toStringTag,{value:"Module"}))},44680:(e,t,r)=>{function n(){return[1,0,0,0,1,0,0,0,1]}function i(e,t,r,n,i,o,s,a,u){return[e,t,r,n,i,o,s,a,u]}r.d(t,{fA:()=>i,vt:()=>n,zK:()=>o});const o=[1,0,0,0,1,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},create:n,createView:function(e,t){return new Float64Array(e,t,9)},fromValues:i},Symbol.toStringTag,{value:"Module"}))},45136:(e,t,r)=>{r.d(t,{a:()=>l,b:()=>a,c:()=>s,d:()=>i,e:()=>h,f:()=>f,l:()=>c,n:()=>d,t:()=>o});var n=r(99746);r(81806),r(76460);function i(e,t,r){o(e.typedBuffer,t.typedBuffer,r,e.typedBufferStride,t.typedBufferStride)}function o(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n;if(e.length/n!==Math.ceil(t.length/i))return e;const o=e.length/n,s=r[0],a=r[1],u=r[2],c=r[4],f=r[5],l=r[6],h=r[8],d=r[9],g=r[10],m=r[12],p=r[13],_=r[14];let y=0,S=0;for(let b=0;b<o;b++){const r=t[y],o=t[y+1],b=t[y+2];e[S]=s*r+c*o+h*b+m,e[S+1]=a*r+f*o+d*b+p,e[S+2]=u*r+l*o+g*b+_,y+=i,S+=n}return e}function s(e,t,r){a(e.typedBuffer,t.typedBuffer,r,e.typedBufferStride,t.typedBufferStride)}function a(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n;if(e.length/n!==Math.ceil(t.length/i))return;const o=e.length/n,s=r[0],a=r[1],u=r[2],c=r[3],f=r[4],l=r[5],h=r[6],d=r[7],g=r[8];let m=0,p=0;for(let _=0;_<o;_++){const r=t[m],o=t[m+1],_=t[m+2];e[p]=s*r+c*o+h*_,e[p+1]=a*r+f*o+d*_,e[p+2]=u*r+l*o+g*_,m+=i,p+=n}}function u(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n;const o=Math.min(e.length/n,t.length/i);let s=0,a=0;for(let u=0;u<o;u++)e[a]=r*t[s],e[a+1]=r*t[s+1],e[a+2]=r*t[s+2],s+=i,a+=n;return e}function c(e,t,r,n){f(e.typedBuffer,t.typedBuffer,r,n,e.typedBufferStride,t.typedBufferStride)}function f(e,t,r,i){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:o;const a=Math.min(e.length/o,t.length/s);let u=0,c=0;const f=1/n.Tf;for(let n=0;n<a;n++)e[c]=i*(r*t[u])**f,e[c+1]=i*(r*t[u+1])**f,e[c+2]=i*(r*t[u+2])**f,u+=s,c+=o}function l(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n;const o=e.length/n;if(o!==Math.ceil(t.length/i))return e;let s=0,a=0;for(let u=0;u<o;u++)e[a]=t[s]+r[0],e[a+1]=t[s+1]+r[1],e[a+2]=t[s+2]+r[2],s+=i,a+=n;return e}function h(e,t){d(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function d(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r;const i=Math.min(e.length/r,t.length/n);let o=0,s=0;for(let a=0;a<i;a++){const i=t[o],a=t[o+1],u=t[o+2],c=i*i+a*a+u*u;if(c>0){const t=1/Math.sqrt(c);e[s]=t*i,e[s+1]=t*a,e[s+2]=t*u}o+=n,s+=r}}Object.freeze(Object.defineProperty({__proto__:null,linearToSRGB:f,linearToSRGBView:c,normalize:d,normalizeView:h,scale:u,scaleView:function(e,t,r){u(e.typedBuffer,t.typedBuffer,r,e.typedBufferStride,t.typedBufferStride)},shiftRight:function(e,t,r){const n=Math.min(e.count,t.count),i=e.typedBuffer,o=e.typedBufferStride,s=t.typedBuffer,a=t.typedBufferStride;let u=0,c=0;for(let f=0;f<n;f++)i[c]=s[u]>>r,i[c+1]=s[u+1]>>r,i[c+2]=s[u+2]>>r,u+=a,c+=o},transformMat3:a,transformMat3View:s,transformMat4:o,transformMat4View:i,translate:l},Symbol.toStringTag,{value:"Module"}))},69728:(e,t,r)=>{var n;r.d(t,{c:()=>n}),function(e){e[e.Bind=0]="Bind",e[e.Pass=1]="Pass",e[e.Draw=2]="Draw"}(n||(n={}))},75941:(e,t,r)=>{r.d(t,{O:()=>n});class n{constructor(){this._outer=new Map}clear(){this._outer.clear()}get empty(){return 0===this._outer.size}get(e,t){return this._outer.get(e)?.get(t)}getInner(e){return this._outer.get(e)}set(e,t,r){const n=this._outer.get(e);n?n.set(t,r):this._outer.set(e,new Map([[t,r]]))}delete(e,t){const r=this._outer.get(e);r&&(r.delete(t),0===r.size&&this._outer.delete(e))}forEach(e){this._outer.forEach(((t,r)=>e(t,r)))}forAll(e){for(const t of this._outer.values())for(const r of t.values())e(r)}}},97255:(e,t,r)=>{r.d(t,{Qf:()=>u,Qh:()=>s,RS:()=>i,ez:()=>l,i5:()=>h,lM:()=>o,qK:()=>f});var n=r(78393);const i=16;function o(e){if(!e)return 0;let t=f;for(const r in e)e.hasOwnProperty(r)&&(t+=a(e[r],!1));return t}function s(e){if(!e)return 0;if("number"==typeof e[0])return u(e);if(Array.isArray(e))return function(e){const t=e.length;if(0===t||"number"==typeof e[0])return c(e,8);let r=l;for(let n=0;n<t;n++)r+=a(e[n]);return r}(e);let t=f;for(const r in e)e.hasOwnProperty(r)&&(t+=a(e[r]));return t}function a(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];switch(typeof e){case"object":return t?s(e):f;case"string":return function(e){return 32+e.length}(e);case"number":return i;case"boolean":return 4;default:return 8}}function u(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(((e,t)=>e+(t?(0,n.iu)(t)?t.byteLength+h:Array.isArray(t)?c(t,i):0:0)),0)}function c(e,t){return l+e.length*t}const f=32,l=16,h=145}}]);
//# sourceMappingURL=3732.e20a2710.chunk.js.map